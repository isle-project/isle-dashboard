{"version":3,"sources":["actions/namespace.js","components/async/index.js","constants/colors.js","ev/components/lesson-creator/index.js","ev/containers/lesson-creator/index.js","components/lessons-page/details_modal.js","components/lessons-page/delete_modal.js","components/lessons-page/lesson.js","components/lessons-page/enrolled_lesson.js","components/lessons-page/no_course_banner.js","components/lessons-page/no_lesson_banner.js","components/lessons-page/index.js","containers/visible-lessons-page/index.js","utils/file_saver.js","utils/format_time.js","utils/is_owner.js","utils/sort_lessons.js"],"names":[],"mappings":"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","file":"static/js/1974.aa30a796.chunk.js","sourcesContent":["/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport axios from 'axios';\nimport qs from 'querystring';\nimport i18next from 'i18next';\nimport saveAs from 'utils/file_saver.js';\nimport server from 'constants/server';\nimport { addNotification, addErrorNotification } from 'actions/notification';\nimport { getCohorts } from 'actions/cohort';\nimport { APPEND_CREATED_NAMESPACE, CHANGED_NAMESPACE, DELETED_CURRENT_NAMESPACE, GET_ALL_NAMESPACES, UPDATED_OWNED_NAMESPACE, UPDATED_STUDENT_PROGRESS } from 'constants/action_types.js';\n\n\n// EXPORTS //\n\n/**\n * Returns an action object to be used in signalling that a namespace has been created.\n *\n * @param {Object} namespace - the created namespace\n * @returns {Object} the action object\n */\nexport function appendCreatedNamespace( namespace ) {\n\treturn {\n\t\ttype: APPEND_CREATED_NAMESPACE,\n\t\tpayload: {\n\t\t\tnamespace\n\t\t}\n\t};\n}\n\n/**\n * Returns an action object to be used in signalling that a namespace has been changed.\n *\n * @param {Object} namespace - the changed namespace\n * @param {string} namespace.title - namespace title\n * @param {Array} namespace.owners - ids of owners\n * @param {Array} namespace.announcements - announcements\n * @param {Array} namespace.cohorts - cohorts\n * @param {string} namespace.description - namespace description\n * @param {boolean} namespace.enableTicketing - controls if ticketing is enabled for the namespace\n * @param {string} namespace._id - id of the namespace\n * @returns {Object} the action object\n */\nexport function changedNamespace({ title, owners, announcements = [], cohorts = [], description, enableTicketing, _id }) {\n\treturn {\n\t\ttype: CHANGED_NAMESPACE,\n\t\tpayload: {\n\t\t\ttitle,\n\t\t\tannouncements,\n\t\t\tcohorts,\n\t\t\tdescription,\n\t\t\tenableTicketing,\n\t\t\towners,\n\t\t\t_id\n\t\t}\n\t};\n}\n\n/**\n * Returns an action object to be used in signalling that a namespace has been deleted.\n *\n * @param {string} id - the id of the namespace to be deleted\n * @returns {Object} the action object\n */\nexport function deletedCurrentNamespace( id ) {\n\treturn {\n\t\ttype: DELETED_CURRENT_NAMESPACE,\n\t\tpayload: {\n\t\t\tid\n\t\t}\n\t};\n}\n\n/**\n * Returns an action object to be used in signalling that a student's progress has been updated.\n *\n * @param {Object} options - progress of the student\n * @param {string} options.email - email of the student\n * @param {string} options.lessonId - lesson id\n * @param {number} options.progress - progress of the student\n * @param {Object} options.cohort - cohort of the student\n */\nexport function updateStudentProgress({ email, lessonID, progress, cohort }) {\n\treturn {\n\t\ttype: UPDATED_STUDENT_PROGRESS,\n\t\tpayload: {\n\t\t\temail, lessonID, progress, cohort\n\t\t}\n\t};\n}\n\n/**\n * Returns an action object to be used in signalling that an owned namespace has been updated.\n *\n * @param {Object} namespace - the updated namespace\n * @param {string} namespace.title - namespace title\n * @param {Array} namespace.owners - ids of owners\n * @param {Array} namespace.enableTicketing - controls if ticketing is enabled for the namespace\n * @param {string} namespace._id - id of the namespace\n * @returns {Object} the action object\n */\nexport function updatedOwnedNamespace({ title, owners, description, enableTicketing, _id }) {\n\treturn {\n\t\ttype: UPDATED_OWNED_NAMESPACE,\n\t\tpayload: {\n\t\t\ttitle,\n\t\t\tdescription,\n\t\t\towners,\n\t\t\tenableTicketing,\n\t\t\t_id\n\t\t}\n\t};\n}\n\n/**\n * Makes a POST request to create a new namespace.\n *\n * @param {Function} dispatch - dispatch function\n * @param {Object} namespace - the new namespace\n * @param {string} namespace.title - namespace title\n * @param {Array} namespace.description - namespace description\n * @param {Array} namespace.owners - ids of owners\n * @param {Object} namespace.props - properties of the invoking component\n */\nexport const createNamespace = async ( dispatch, { title, description, owners, props }) => {\n\ttry {\n\t\tconst res = await axios.post( server+'/create_namespace', { title, description, owners });\n\t\tif ( !res.data.successful ) {\n\t\t\treturn addErrorNotification( dispatch, new Error( res.data.message ));\n\t\t}\n\t\tconst namespace = res.data.namespace;\n\t\tprops.onNamespace( namespace );\n\t\tdispatch( appendCreatedNamespace( namespace ) );\n\t\tprops.history.replace( '/lessons' );\n\t\taddNotification( dispatch, {\n\t\t\tmessage: res.data.message,\n\t\t\tlevel: res.data.successful ? 'success' : 'error'\n\t\t});\n\t} catch ( err ) {\n\t\taddErrorNotification( dispatch, err );\n\t}\n};\n\n/**\n * Returns a function to make a POST request to create a new namespace.\n *\n * @param {Function} dispatch - dispatch function\n * @returns {Function} function to make the POST request to create a new namespace\n */\nexport const createNamespaceInjector = dispatch => {\n\treturn async ({ title, description, owners, props }) => {\n\t\tawait createNamespace( dispatch, { title, description, owners, props } );\n\t};\n};\n\n/**\n * Makes a POST request to delete a namespace.\n *\n * @param {Function} dispatch - dispatch function\n * @param {string} id - the id of the namespace to be deleted\n * @param {Object} history - browser history object\n * @returns {void}\n */\nexport const deleteCurrentNamespace = async ( dispatch, id, history ) => {\n\ttry {\n\t\tconst res = await axios.post( server+'/delete_namespace', { id });\n\t\tif ( history ) {\n\t\t\thistory.replace( '/lessons' );\n\t\t}\n\t\tdispatch( deletedCurrentNamespace( id ) );\n\t\taddNotification( dispatch, {\n\t\t\tmessage: res.data.message,\n\t\t\tlevel: 'success'\n\t\t});\n\t} catch ( err ) {\n\t\treturn addErrorNotification( dispatch, err );\n\t}\n};\n\n/**\n * Returns a function to make a POST request to delete a namespace.\n *\n * @param {Function} dispatch - dispatch function\n * @returns {Function} function to make the POST request to delete a namespace\n */\nexport const deleteCurrentNamespaceInjector = ( dispatch ) => {\n\treturn async ( id, history ) => {\n\t\tawait deleteCurrentNamespace( dispatch, id, history );\n\t};\n};\n\n/**\n * Makes a POST request to update a namespace.\n *\n * @param {Function} dispatch - dispatch function\n * @param {Object} ns - the updated namespace\n */\nexport const updateCurrentNamespace = async ( dispatch, ns ) => {\n\ttry {\n\t\tconst res = await axios.post( server+'/update_namespace', { ns });\n\t\tdispatch( changedNamespace( res.data.namespace ) );\n\t\tdispatch( updatedOwnedNamespace( res.data.namespace ) );\n\t\taddNotification( dispatch, {\n\t\t\tmessage: res.data.message,\n\t\t\tlevel: 'success'\n\t\t});\n\t\tgetCohorts( dispatch, {\n\t\t\tnamespaceID: ns._id\n\t\t});\n\t} catch ( err ) {\n\t\taddErrorNotification( dispatch, err );\n\t}\n};\n\n/**\n * Returns a function to make a POST request to update a namespace.\n *\n * @param {Function} dispatch - dispatch function\n * @returns {Function} function to make the POST request to update a namespace\n */\nexport const updateCurrentNamespaceInjector = ( dispatch ) => {\n\treturn async ( id, ns ) => {\n\t\tawait updateCurrentNamespace( dispatch, id, ns );\n\t};\n};\n\n/**\n * Makes a GET request to get a namespace's actions.\n *\n * @param {Function} dispatch - dispatch function\n * @param {Object} options - request options\n * @param {string} options.namespaceID - id of the namespace\n * @param {string} options.namespaceTitle - title of the namespace\n * @returns {void}\n */\nexport const getNamespaceActions = async ( dispatch, { namespaceID, namespaceTitle } ) => {\n\ttry {\n\t\tconst res = await axios.get( server+'/get_namespace_actions?'+qs.stringify({ namespaceID }) );\n\t\tconst blob = new Blob([ res.data ], {\n\t\t\ttype: 'application/json'\n\t\t});\n\t\tconst name = `actions_${namespaceTitle}.json`;\n\t\tsaveAs( blob, name );\n\t} catch ( err ) {\n\t\taddErrorNotification( dispatch, err );\n\t}\n};\n\n/**\n * Returns a function to make a GET request to get a namespace's actions.\n *\n * @param {Function} dispatch - dispatch function\n * @returns {Function} function to make the GET request to get a namespace's actions\n */\nexport const getNamespaceActionsInjector = ( dispatch ) => {\n\treturn async ({ namespaceID, namespaceTitle }) => {\n\t\tawait getNamespaceActions( dispatch, { namespaceID, namespaceTitle });\n\t};\n};\n\n/**\n * Makes a POST request to update a user's lesson progress.\n *\n * @param {Function} dispatch - dispatch function\n * @param {Object} options - request options\n * @param {string} options.namespaceID - id of the namespace\n * @param {string} options.lessonID - id of the lesson\n * @param {string} options.email - email of the user\n * @param {number} options.progress - progress of the user\n * @param {Object} options.cohort - cohort of the user\n */\nexport const adjustProgress = async ( dispatch, { email, lessonID, namespaceID, progress, cohort }) => {\n\tconst res = await axios.post( server+'/user_adjust_progress', {\n\t\temail, lessonID, namespaceID, progress\n\t});\n\taddNotification( dispatch, {\n\t\ttitle: i18next.t('common:updated'),\n\t\tmessage: res.data.message,\n\t\tlevel: 'success'\n\t});\n\tdispatch( updateStudentProgress({ email, lessonID, progress, cohort }) );\n};\n\n/**\n * Returns a function to make a POST request to update a user's lesson progress.\n *\n * @param {Function} dispatch - dispatch function\n * @returns {Function} function to make the POST request to update a user's lesson progress\n */\nexport const adjustProgressInjector = ( dispatch ) => {\n\treturn async ( { email, lessonID, namespaceID, progress, cohort } ) => {\n\t\tawait adjustProgress( dispatch, { email, lessonID, namespaceID, progress, cohort } );\n\t};\n};\n\n/**\n * Makes a GET request to get a all available namespaces.\n *\n * @param {Function} dispatch - dispatch function\n * @returns {void}\n */\nexport const getAllNamespaces = async ( dispatch ) => {\n\ttry {\n\t\tconst res = await axios.get( server+'/get_all_namespaces' );\n\t\tdispatch({\n\t\t\ttype: GET_ALL_NAMESPACES,\n\t\t\tpayload: {\n\t\t\t\tnamespaces: res.data.namespaces\n\t\t\t}\n\t\t});\n\t} catch ( err ) {\n\t\treturn addErrorNotification( dispatch, err );\n\t}\n};\n\n/**\n * Returns a function to make a GET request to get a all available namespaces.\n *\n * @param {Function} dispatch - dispatch function\n * @returns {Function} function to make the GET request to get a all available namespaces\n */\nexport const getAllNamespacesInjector = ( dispatch ) => {\n\treturn async () => {\n\t\tawait getAllNamespaces( dispatch );\n\t};\n};\n\n/**\n * Makes a POST request to set the order lessons appear on the dashboard.\n *\n * @param {Function} dispatch - dispatch function\n * @param {Object} options - request options\n * @param {Array} options.lessons - lessons of the course in the order to be displayed on the dashboard\n * @param {string} options.id - id of the namespace\n * @returns {void}\n */\nexport const setLessonOrder = async ( dispatch, { lessons, id }) => {\n\ttry {\n\t\tawait axios.post( server+'/set_lesson_order', {\n\t\t\tlessons, id\n\t\t});\n\t} catch ( err ) {\n\t\treturn addErrorNotification( dispatch, err );\n\t}\n};\n\n/**\n * Returns a function to make a POST request to set the order lessons appear on the dashboard.\n *\n * @param {Function} dispatch - dispatch function\n * @returns {Function} function to make the POST request to set the order lessons appear on the dashboard\n */\nexport const setLessonOrderInjector = ( dispatch ) => {\n\treturn async ({ lessons, id }) => {\n\t\tawait setLessonOrder( dispatch, { lessons, id } );\n\t};\n};\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React, { Component } from 'react';\nimport Spinner from 'components/spinner';\n\n\n// MAIN //\n\nfunction asyncComponent( importComponent ) {\n\tclass AsyncComponent extends Component {\n\t\tconstructor( props ) {\n\t\t\tsuper( props );\n\n\t\t\tthis.state = {\n\t\t\t\tcomponent: null\n\t\t\t};\n\t\t}\n\n\t\tasync componentDidMount() {\n\t\t\tconst { default: component } = await importComponent();\n\t\t\tthis.setState({ // eslint-disable-line react/no-did-mount-set-state\n\t\t\t\tcomponent: component\n\t\t\t});\n\t\t}\n\n\t\trender() {\n\t\t\tconst C = this.state.component;\n\t\t\treturn C ? <C {...this.props} /> : <Spinner />;\n\t\t}\n\t}\n\treturn AsyncComponent;\n}\n\n\n// EXPORTS //\n\nexport default asyncComponent;\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MAIN //\n\nconst COLORS = [\n\t'#1f77b4',\n\t'#ff7f0e',\n\t'#2ca02c',\n\t'#d62728',\n\t'#9467bd',\n\t'#8c564b',\n\t'#c49c94',\n\t'#e377c2',\n\t'#17becf',\n\t'#aec7e8',\n\t'#ffbb78',\n\t'#ff9896',\n\t'#98df8a',\n\t'#7f7f7f',\n\t'#c5b0d5',\n\t'#f7b6d2',\n\t'#bcbd22',\n\t'#c7c7c7',\n\t'#dbdb8d',\n\t'#9edae5'\n];\n\n\n// EXPORTS //\n\nexport default COLORS;\n","// MODULES //\n\nimport asyncComponent from 'components/async';\n\n\n// MAIN //\n\nconst LessonCreator = asyncComponent( () => import( './main.js' ) );\n\n\n// EXPORTS //\n\nexport default LessonCreator;\n","// MODULES //\n\nimport { connect } from 'react-redux';\nimport LessonCreator from 'ev/components/lesson-creator';\nimport { copyLessonInjector } from 'actions/lesson';\n\n\n// FUNCTIONS //\n\nfunction mapStateToProps( state ) {\n\treturn {\n\t\tadmin: state.admin,\n\t\tuser: state.user\n\t};\n}\n\nfunction mapDispatchToProps( dispatch ) {\n\treturn {\n\t\tcopyLesson: copyLessonInjector( dispatch )\n\t};\n}\n\n\n// MAIN //\n\nconst VisibleLessonCreator = connect( mapStateToProps, mapDispatchToProps )( LessonCreator );\n\n\n// EXPORTS //\n\nexport default VisibleLessonCreator;\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport logger from 'debug';\nimport Button from 'react-bootstrap/Button';\nimport FormControl from 'react-bootstrap/FormControl';\nimport FormLabel from 'react-bootstrap/FormLabel';\nimport FormGroup from 'react-bootstrap/FormGroup';\nimport Form from 'react-bootstrap/Form';\nimport Modal from 'react-bootstrap/Modal';\nimport DateTimePicker from 'react-datetime-picker';\nimport isEmptyObject from '@stdlib/assert/is-empty-object';\nimport SERVER from 'constants/server';\n\n\n// VARIABLES //\n\nconst debug = logger( 'isle-dashboard' );\n\n\n// FUNCTIONS //\n\nfunction preventPropagation( event ) {\n\tevent.stopPropagation();\n}\n\n\n// MAIN //\n\nclass DetailsModal extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tlet unlockLesson;\n\t\tlet lockLesson;\n\t\tlet lockUntil;\n\t\tlet lockAfter;\n\t\tif ( props.lockUntil ) {\n\t\t\tunlockLesson = true;\n\t\t\tlockUntil = props.lockUntil;\n\t\t} else {\n\t\t\tunlockLesson = false;\n\t\t\tlockUntil = new Date();\n\t\t}\n\t\tif ( props.lockAfter ) {\n\t\t\tlockLesson = true;\n\t\t\tlockAfter = props.lockAfter;\n\t\t} else {\n\t\t\tlockLesson = false;\n\t\t\tlockAfter = new Date();\n\t\t}\n\t\tthis.state = {\n\t\t\ttitle: props.title,\n\t\t\tdescription: props.description,\n\t\t\tdisabled: false,\n\t\t\thideFromDashboard: props.hideFromDashboard,\n\t\t\ttemplate: props.template,\n\t\t\tchangedTemplate: false,\n\t\t\tunlockLesson,\n\t\t\tlockUntil,\n\t\t\tlockLesson,\n\t\t\tlockAfter\n\t\t};\n\t}\n\n\tcomponentDidUpdate( prevProps ) {\n\t\tconst newState = {};\n\t\tif ( prevProps.title !== this.props.title ) {\n\t\t\tnewState.title = this.props.title;\n\t\t}\n\t\tif ( prevProps.description !== this.props.description ) {\n\t\t\tnewState.description = this.props.description;\n\t\t}\n\t\tif ( prevProps.template !== this.props.template ) {\n\t\t\tnewState.template = this.props.template;\n\t\t}\n\t\tif ( prevProps.lockUntil !== this.props.lockUntil ) {\n\t\t\tif ( this.props.lockUntil ) {\n\t\t\t\tnewState.unlockLesson = true;\n\t\t\t\tnewState.lockUntil = this.props.lockUntil;\n\t\t\t} else {\n\t\t\t\tnewState.unlockLesson = false;\n\t\t\t\tnewState.lockUntil = new Date();\n\t\t\t}\n\t\t}\n\t\tif ( prevProps.lockAfter !== this.props.lockAfter ) {\n\t\t\tif ( this.props.lockAfter ) {\n\t\t\t\tnewState.lockLesson = true;\n\t\t\t\tnewState.lockAfter = this.props.lockAfter;\n\t\t\t} else {\n\t\t\t\tnewState.lockLesson = false;\n\t\t\t\tnewState.lockAfter = new Date();\n\t\t\t}\n\t\t}\n\t\tif ( !isEmptyObject( newState ) ) {\n\t\t\tthis.setState( newState );\n\t\t}\n\t}\n\n\thandleInputChange = ( event ) => {\n\t\tconst target = event.target;\n\t\tconst value = target.value;\n\t\tconst name = target.name;\n\t\tdebug( `Input field ${name} changed to ${value}` );\n\t\tthis.setState({\n\t\t\t[ name ]: value\n\t\t}, () => {\n\t\t\tif ( this.state.title.length >= 3 && this.state.description.length > 0 ) {\n\t\t\t\tthis.setState({\n\t\t\t\t\tdisabled: false\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.setState({\n\t\t\t\t\tdisabled: true\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t};\n\n\thandleUnlockChange = ( event ) => {\n\t\tthis.setState({\n\t\t\tunlockLesson: event.target.checked\n\t\t});\n\t};\n\n\thandleLockChange = ( event ) => {\n\t\tthis.setState({\n\t\t\tlockLesson: event.target.checked\n\t\t});\n\t};\n\n\thandleTimeUntilChange = ( value ) => {\n\t\tthis.setState({\n\t\t\tlockUntil: value\n\t\t});\n\t};\n\n\thandleTimeAfterChange = ( value ) => {\n\t\tthis.setState({\n\t\t\tlockAfter: value\n\t\t});\n\t};\n\n\thandleTemplateChange = ( event ) => {\n\t\tthis.setState({\n\t\t\ttemplate: event.target.checked,\n\t\t\tchangedTemplate: true\n\t\t});\n\t};\n\n\thideFromDashboardChange = ( event ) => {\n\t\tthis.setState({\n\t\t\thideFromDashboard: event.target.checked\n\t\t});\n\t};\n\n\tonSubmit = ( evt ) => {\n\t\tevt.preventDefault();\n\t\tconst details = {\n\t\t\tnewTitle: this.state.title,\n\t\t\tnewDescription: this.state.description\n\t\t};\n\t\tif ( this.state.unlockLesson ) {\n\t\t\tdetails.lockUntil = this.state.lockUntil;\n\t\t}\n\t\tif ( this.state.lockLesson ) {\n\t\t\tdetails.lockAfter = this.state.lockAfter;\n\t\t}\n\t\tif ( this.state.hideFromDashboard !== this.props.hideFromDashboard ) {\n\t\t\tdetails.hideFromDashboard = this.state.hideFromDashboard;\n\t\t}\n\t\tif ( this.state.changedTemplate ) {\n\t\t\tdetails.template = this.state.template;\n\t\t}\n\t\tthis.props.update( details );\n\t};\n\n\trender() {\n\t\tconst { t } = this.props;\n\t\treturn (\n\t\t\t<Modal show={this.props.show} onHide={this.props.close}>\n\t\t\t\t<Form action={SERVER} method=\"get\" onSubmit={this.onSubmit} onKeyDown={preventPropagation} >\n\t\t\t\t\t<Modal.Header>\n\t\t\t\t\t\t<Modal.Title as=\"h3\">{t('lesson-details')}</Modal.Title>\n\t\t\t\t\t</Modal.Header>\n\t\t\t\t\t<Modal.Body className=\"d-grid gap-2\" >\n\t\t\t\t\t\t<FormGroup>\n\t\t\t\t\t\t\t<FormLabel>{t('common:title')}</FormLabel>\n\t\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\t\tname=\"title\"\n\t\t\t\t\t\t\t\ttype=\"title\"\n\t\t\t\t\t\t\t\tonChange={this.handleInputChange}\n\t\t\t\t\t\t\t\tdefaultValue={this.state.title}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</FormGroup>\n\t\t\t\t\t\t<FormGroup>\n\t\t\t\t\t\t\t<FormLabel>{t('common:description')}</FormLabel>\n\t\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\t\tname=\"description\"\n\t\t\t\t\t\t\t\ttype=\"description\"\n\t\t\t\t\t\t\t\tonChange={this.handleInputChange}\n\t\t\t\t\t\t\t\tdefaultValue={this.state.description}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</FormGroup>\n\t\t\t\t\t\t<FormGroup>\n\t\t\t\t\t\t\t<Form.Check\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\tlabel={t('common:lock-until')}\n\t\t\t\t\t\t\t\tchecked={this.state.unlockLesson}\n\t\t\t\t\t\t\t\tonChange={this.handleUnlockChange}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t{this.state.unlockLesson ? <DateTimePicker\n\t\t\t\t\t\t\t\t\tminDate={new Date()}\n\t\t\t\t\t\t\t\t\tonChange={this.handleTimeUntilChange}\n\t\t\t\t\t\t\t\t\tvalue={this.state.lockUntil}\n\t\t\t\t\t\t\t\t\tclearIcon={null}\n\t\t\t\t\t\t\t\t/> : null }\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</FormGroup>\n\t\t\t\t\t\t<FormGroup>\n\t\t\t\t\t\t\t<Form.Check\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\tlabel={t('common:lock-after')}\n\t\t\t\t\t\t\t\tchecked={this.state.lockLesson}\n\t\t\t\t\t\t\t\tonChange={this.handleLockChange}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t{this.state.lockLesson ? <DateTimePicker\n\t\t\t\t\t\t\t\t\tminDate={new Date()}\n\t\t\t\t\t\t\t\t\tonChange={this.handleTimeAfterChange}\n\t\t\t\t\t\t\t\t\tvalue={this.state.lockAfter}\n\t\t\t\t\t\t\t\t\tclearIcon={null}\n\t\t\t\t\t\t\t\t/> : null }\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</FormGroup>\n\t\t\t\t\t\t<FormGroup>\n\t\t\t\t\t\t\t<Form.Check\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\tlabel={t('common:hide-from-dashboard')}\n\t\t\t\t\t\t\t\tchecked={this.state.hideFromDashboard}\n\t\t\t\t\t\t\t\tonChange={this.hideFromDashboardChange}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</FormGroup>\n\t\t\t\t\t\t{ this.props.user.administrator ? <FormGroup>\n\t\t\t\t\t\t\t<Form.Check\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\tlabel={t('provide-as-template')}\n\t\t\t\t\t\t\t\tchecked={this.state.template}\n\t\t\t\t\t\t\t\tonChange={this.handleTemplateChange}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</FormGroup> : null}\n\t\t\t\t\t</Modal.Body>\n\t\t\t\t\t<Modal.Footer>\n\t\t\t\t\t\t<Button onClick={this.props.close}>{t('common:cancel')}</Button>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant=\"success\"\n\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\tdisabled={this.state.disabled}\n\t\t\t\t\t\t>{t('common:save')}</Button>\n\t\t\t\t\t</Modal.Footer>\n\t\t\t\t</Form>\n\t\t\t</Modal>\n\t\t);\n\t}\n}\n\n\n// PROPERTIES //\n\nDetailsModal.propTypes = {\n\tclose: PropTypes.func.isRequired,\n\tdescription: PropTypes.string.isRequired,\n\thideFromDashboard: PropTypes.bool,\n\tlockAfter: PropTypes.instanceOf( Date ),\n\tlockUntil: PropTypes.instanceOf( Date ),\n\tshow: PropTypes.bool.isRequired,\n\ttemplate: PropTypes.bool,\n\ttitle: PropTypes.string.isRequired,\n\tupdate: PropTypes.func.isRequired,\n\tuser: PropTypes.object.isRequired\n};\n\nDetailsModal.defaultProps = {\n\thideFromDashboard: false,\n\tlockAfter: null,\n\tlockUntil: null,\n\ttemplate: null\n};\n\n\n// EXPORTS //\n\nexport default DetailsModal;\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Button from 'react-bootstrap/Button';\nimport Modal from 'react-bootstrap/Modal';\n\n\n// MAIN //\n\n/**\n * Delete modal component.\n *\n * @param {Object} props - component properties\n * @param {boolean} props.show - boolean indicating if the modal is visible\n * @param {Function} props.close - callback to invoke when the modal is closed\n * @param {Function} props.delete - callback to invoke when the delete button is clicked\n * @param {string} props.title - lesson title\n * @param {Function} props.t - i18n translate function\n * @returns {ReactElement} delete modal\n */\nconst DeleteModal = ( props ) => (\n\t<Modal show={props.show} onHide={props.close}>\n\t\t<Modal.Header>\n\t\t\t<Modal.Title>{props.t('common:delete')}?</Modal.Title>\n\t\t</Modal.Header>\n\t\t<Modal.Body>\n\t\t\t{props.t('delete-modal-body', { name: props.title })}\n\t\t</Modal.Body>\n\t\t<Modal.Footer>\n\t\t\t<Button onClick={props.close}>{props.t('common:cancel')}</Button>\n\t\t\t<Button variant=\"danger\" onClick={props.delete} >{props.t('common:delete')}</Button>\n\t\t</Modal.Footer>\n\t</Modal>\n);\n\n\n// PROPERTIES //\n\nDeleteModal.propTypes = {\n\tclose: PropTypes.func.isRequired,\n\tdelete: PropTypes.func.isRequired,\n\tshow: PropTypes.bool.isRequired,\n\tt: PropTypes.func.isRequired,\n\ttitle: PropTypes.string.isRequired\n};\n\n\n// EXPORTS //\n\nexport default DeleteModal;\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport logger from 'debug';\nimport { withTranslation } from 'react-i18next';\nimport Badge from 'react-bootstrap/Badge';\nimport Button from 'react-bootstrap/Button';\nimport ButtonGroup from 'react-bootstrap/ButtonGroup';\nimport ButtonToolbar from 'react-bootstrap/ButtonToolbar';\nimport Card from 'react-bootstrap/Card';\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\nimport Tooltip from 'react-bootstrap/Tooltip';\nimport copyToClipboard from 'clipboard-copy';\nimport DetailsModal from './details_modal.js';\nimport DeleteModal from './delete_modal.js';\nimport COLORS from 'constants/colors';\nimport background from './architecture.jpeg';\nimport upload from './upload.svg';\nimport './lesson.css';\n\n\n// VARIABLES //\n\nconst DEFAULT_DESCRIPTION = 'No description supplied.';\nconst debug = logger( 'isle:lessons-page:lesson' );\nconst IS_IOS = isIOS();\n\n\n// FUNCTIONS //\n\nfunction isIOS() {\n\treturn [\n\t\t'iPad Simulator',\n\t\t'iPhone Simulator',\n\t\t'iPod Simulator',\n\t\t'iPad',\n\t\t'iPhone',\n\t\t'iPod'\n\t].includes( navigator.platform ) ||\n\t(\n\t\tnavigator.userAgent.includes('Mac') &&\n\t\t'ontouchend' in document\n\t);\n}\n\n\n// MAIN //\n\nclass Lesson extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tthis.state = {\n\t\t\tshowDeleteModal: false,\n\t\t\tshowDetailsModal: false,\n\t\t\tisleFile: null\n\t\t};\n\t}\n\n\ttoggleLessonState = () => {\n\t\tconst query = {\n\t\t\tlessonName: this.props.title,\n\t\t\tnamespaceName: this.props.namespace\n\t\t};\n\t\tif ( this.props.active ) {\n\t\t\tthis.props.deactivateLesson( query );\n\t\t} else {\n\t\t\tthis.props.activateLesson( query );\n\t\t}\n\t};\n\n\ttoggleLessonVisibility = () => {\n\t\tconst query = {\n\t\t\tlessonName: this.props.title,\n\t\t\tnamespaceName: this.props.namespace\n\t\t};\n\t\tif ( this.props.public ) {\n\t\t\tthis.props.hideLessonInGallery( query );\n\t\t} else {\n\t\t\tthis.props.showLessonInGallery( query );\n\t\t}\n\t};\n\n\tdelete = () => {\n\t\tthis.props.deleteLesson({\n\t\t\tlessonName: this.props.title,\n\t\t\tnamespaceName: this.props.namespace\n\t\t});\n\t\tthis.closeDeleteModal();\n\t};\n\n\tupdate = async ({ newTitle, newDescription, lockAfter, lockUntil, hideFromDashboard, template }) => {\n\t\tconst bool = await this.props.updateLesson({\n\t\t\tlessonName: this.props.title,\n\t\t\tnamespaceName: this.props.namespace,\n\t\t\tnewTitle,\n\t\t\tnewDescription,\n\t\t\ttemplate,\n\t\t\tlockAfter: lockAfter ? lockAfter.getTime() : null,\n\t\t\tlockUntil: lockUntil ? lockUntil.getTime() : null,\n\t\t\thideFromDashboard\n\t\t});\n\t\tif ( bool ) {\n\t\t\tthis.closeDetailsModal();\n\t\t}\n\t};\n\n\tshowDeleteModal = () => {\n\t\tthis.setState({ showDeleteModal: true });\n\t};\n\n\tshowDetailsModal = () => {\n\t\tthis.setState({ showDetailsModal: true });\n\t};\n\n\tcloseDeleteModal = () => {\n\t\tthis.setState({ showDeleteModal: false });\n\t};\n\n\tcloseDetailsModal = () => {\n\t\tthis.setState({ showDetailsModal: false });\n\t};\n\n\tgetIsleFile = async () => {\n\t\tdebug( 'Request ISLE source code from server...' );\n\t\tif ( !this.state.isleFile ) {\n\t\t\tconst data = await this.props.getIsleFile({\n\t\t\t\tlessonName: this.props.title,\n\t\t\t\tnamespaceName: this.props.namespace\n\t\t\t});\n\t\t\tif ( data ) {\n\t\t\t\tthis.setState({\n\t\t\t\t\tisleFile: data\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t};\n\n\tcopyIsleFileToClipboard = () => {\n\t\tif ( !this.state.isleFile ) {\n\t\t\treturn this.props.addNotification({\n\t\t\t\tmessage: this.props.t('source-file-error'),\n\t\t\t\tlevel: 'error'\n\t\t\t});\n\t\t}\n\t\tconst promise = copyToClipboard( this.state.isleFile );\n\t\tpromise.then( () => {\n\t\t\tthis.props.addNotification({\n\t\t\t\tmessage: this.props.t('source-file-copied'),\n\t\t\t\tlevel: 'success'\n\t\t\t});\n\t\t}).catch( err => {\n\t\t\tthis.props.addNotification({\n\t\t\t\tmessage: err.message,\n\t\t\t\tlevel: 'error'\n\t\t\t});\n\t\t});\n\t};\n\n\tcopyLinkToClipboard = () => {\n\t\tconst promise = copyToClipboard( this.props.url );\n\t\tpromise.then( () => {\n\t\t\tthis.props.addNotification({\n\t\t\t\tmessage: this.props.t('link-copied'),\n\t\t\t\tlevel: 'success'\n\t\t\t});\n\t\t}).catch( err => {\n\t\t\tthis.props.addNotification({\n\t\t\t\tmessage: err.message,\n\t\t\t\tlevel: 'error'\n\t\t\t});\n\t\t});\n\t};\n\n\tcopyNameToClipboard = ( event ) => {\n\t\tevent.stopPropagation();\n\t\tconst promise = copyToClipboard( this.props.title );\n\t\tpromise.then( () => {\n\t\t\tthis.props.addNotification({\n\t\t\t\tmessage: this.props.t('name-copied'),\n\t\t\t\tlevel: 'success'\n\t\t\t});\n\t\t}).catch( err => {\n\t\t\tthis.props.addNotification({\n\t\t\t\tmessage: err.message,\n\t\t\t\tlevel: 'error'\n\t\t\t});\n\t\t});\n\t};\n\n\topenLesson = () => {\n\t\tif ( IS_IOS ) {\n\t\t\twindow.location = this.props.url;\n\t\t} else {\n\t\t\tconst win = window.open( this.props.url, '_blank' );\n\t\t\twin.focus();\n\t\t}\n\t};\n\n\trenderButtonToolbarDate() {\n\t\tconst { t } = this.props;\n\n\t\tlet updated = new Date( this.props.updatedAt );\n\t\tupdated = updated.toLocaleDateString();\n\n\t\tlet date = new Date( this.props.createdAt );\n\t\tdate = date.toLocaleDateString();\n\t\treturn (\n\t\t\t<span className=\"lessons-upload\">\n\t\t\t<OverlayTrigger placement=\"top\" overlay={<Tooltip id=\"toggle_visibility\">{t('created-at')}</Tooltip>}>\n\t\t\t\t<span className=\"lessons-uploaded-image\">\n\t\t\t\t\t<img alt=\"Upload Date Icon\" style={{ stroke: 'white', fill: 'red' }} src={upload} />\n\t\t\t\t</span>\n\t\t\t</OverlayTrigger>\n\t\t\t<OverlayTrigger placement=\"top\" overlay={<Tooltip id=\"toggle_visibility\">{t('last-updated')}{updated}</Tooltip>}>\n\t\t\t\t<span className=\"lessons-uploaded\">{date}</span>\n\t\t\t</OverlayTrigger>\n\t\t</span>\n\t\t);\n\t}\n\n\trenderActivateButton() {\n\t\tconst { lockUntil, t } = this.props;\n\t\tconst activeStyle = this.props.active === true ? 'success' : 'warning';\n\t\tif ( lockUntil ) {\n\t\t\treturn ( <OverlayTrigger placement=\"top\" overlay={<Tooltip id=\"lockUntil_disabled\">\n\t\t\t\t{t('scheduled-at', { date: lockUntil.toLocaleString() })}\n\t\t\t</Tooltip>} >\n\t\t\t\t<Badge\n\t\t\t\t\tclassName=\"lessons-status\"\n\t\t\t\t\tbg={activeStyle}\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\topacity: 0.3\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{this.props.active ? t('active') : t('inactive')}\n\t\t\t\t</Badge>\n\t\t\t</OverlayTrigger> );\n\t\t}\n\t\treturn (\n\t\t\t<OverlayTrigger placement=\"top\" overlay={<Tooltip id=\"toggle_availability\">{this.props.active ? t('disable-lesson') : t('activate-lesson')}</Tooltip>}>\n\t\t\t\t<Badge\n\t\t\t\t\tclassName=\"lessons-status\"\n\t\t\t\t\tonClick={this.toggleLessonState}\n\t\t\t\t\tbg={activeStyle}\n\t\t\t\t>\n\t\t\t\t\t{this.props.active ? t('active') : t('inactive')}\n\t\t\t\t</Badge>\n\t\t\t</OverlayTrigger>\n\t\t);\n\t}\n\n\trenderButtonToolbar() {\n\t\tconst { t } = this.props;\n\t\tconst publicStyle = this.props.public === true ? 'success' : 'warning';\n\t\treturn ( <ButtonToolbar className=\"lesson-button-toolbar\">\n\t\t\t<ButtonGroup style={{ marginRight: '2px' }} >\n\t\t\t\t<OverlayTrigger placement=\"top\" overlay={<Tooltip id=\"open_details\">{t('open-details')}</Tooltip>}>\n\t\t\t\t\t<Button size=\"sm\" variant=\"secondary\" onClick={this.showDetailsModal} aria-label={t('open-details')} >\n\t\t\t\t\t\t<i className=\"fa fa-cog\"></i>\n\t\t\t\t\t</Button>\n\t\t\t\t</OverlayTrigger>\n\t\t\t\t<OverlayTrigger placement=\"top\" overlay={<Tooltip id=\"delete_lesson\">{t('delete-lesson')}</Tooltip>}>\n\t\t\t\t\t<Button size=\"sm\" variant=\"secondary\" onClick={this.showDeleteModal} aria-label={t('delete-lesson')} >\n\t\t\t\t\t\t<i className=\"fa fa-trash-alt\"></i>\n\t\t\t\t\t</Button>\n\t\t\t\t</OverlayTrigger>\n\t\t\t\t<OverlayTrigger placement=\"top\" overlay={<Tooltip id=\"isle-file\">{t('copy-file')}</Tooltip>}>\n\t\t\t\t\t<Button variant=\"secondary\" size=\"sm\" onFocus={this.getIsleFile} onMouseEnter={this.getIsleFile}\n\t\t\t\t\t\tonClick={this.copyIsleFileToClipboard} style={{ float: 'right' }}\n\t\t\t\t\t\taria-label={t('copy-file')}\n\t\t\t\t\t>\n\t\t\t\t\t\t<i className=\"fa fa-clipboard\"></i>\n\t\t\t\t\t</Button>\n\t\t\t\t</OverlayTrigger>\n\t\t\t</ButtonGroup>\n\t\t\t{this.renderActivateButton()}\n\t\t\t<OverlayTrigger placement=\"top\" overlay={<Tooltip id=\"toggle_visibility\">{this.props.public ? t('remove-from-gallery') : t('show-in-gallery') }</Tooltip>}>\n\t\t\t\t<Badge className=\"lessons-status\" onClick={this.toggleLessonVisibility} bg={publicStyle}>{this.props.public ? t(('public')) : t('private')}</Badge>\n\t\t\t</OverlayTrigger>\n\t\t\t{ this.renderButtonToolbarDate() }\n\t\t</ButtonToolbar> );\n\t}\n\n\trenderModals() {\n\t\treturn ( <Fragment>\n\t\t\t<DeleteModal {...this.props} show={this.state.showDeleteModal} close={this.closeDeleteModal} delete={this.delete} />\n\t\t\t{ this.state.showDetailsModal ?\n\t\t\t\t<DetailsModal {...this.props} show={this.state.showDetailsModal} close={this.closeDetailsModal} update={this.update} /> :\n\t\t\t\tnull\n\t\t\t}\n\t\t</Fragment> );\n\t}\n\n\trender() {\n\t\tconst { t } = this.props;\n\t\treturn (\n\t\t\t<Card className=\"animated-lesson-card\">\n\t\t\t\t<Card.Body style={{ padding: 0, opacity: this.props.hideFromDashboard ? 0.6 : 1.0 }}>\n\t\t\t\t\t<div\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tfilter: 'grayscale(30%)',\n\t\t\t\t\t\t\tbackground: COLORS[ this.props.colorIndex ]\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tclassName=\"hovereffect\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tclassName=\"img-responsive\"\n\t\t\t\t\t\t\tsrc={background}\n\t\t\t\t\t\t\tref={( div ) => {\n\t\t\t\t\t\t\t\tthis.img = div;\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\talt=\"Tile background\"\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\twidth: '100%',\n\t\t\t\t\t\t\t\theight: 180\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName=\"overlay\"\n\t\t\t\t\t\t\tstyle={{ cursor: 'cell' }}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<h2>\n\t\t\t\t\t\t\t\t<OverlayTrigger\n\t\t\t\t\t\t\t\t\tplacement=\"top\"\n\t\t\t\t\t\t\t\t\toverlay={<Tooltip id=\"copy_name\">\n\t\t\t\t\t\t\t\t\t\t{t('common:copy-name')\n\t\t\t\t\t\t\t\t\t}</Tooltip>}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\tclassName=\"lesson-title-button\"\n\t\t\t\t\t\t\t\t\t\trole=\"button\" tabIndex={0}\n\t\t\t\t\t\t\t\t\t\tonClick={this.copyNameToClipboard}\n\t\t\t\t\t\t\t\t\t\tonKeyPress={this.copyNameToClipboard}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{this.props.title}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</OverlayTrigger>\n\t\t\t\t\t\t\t</h2>\n\t\t\t\t\t\t\t{this.props.description !== DEFAULT_DESCRIPTION ?\n\t\t\t\t\t\t\t\t<h3>{this.props.description}</h3> :\n\t\t\t\t\t\t\t\tnull\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\tref={( link ) => {\n\t\t\t\t\t\t\t\t\tthis.link = link;\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tclassName=\"info\"\n\t\t\t\t\t\t\t\tonClick={this.openLesson} onKeyPress={this.openLesson}\n\t\t\t\t\t\t\t\ttabIndex={0} role=\"button\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{t('open-lesson')}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<OverlayTrigger placement=\"top\" overlay={<Tooltip id=\"copy_link\">{t('common:copy-link')}</Tooltip>}>\n\t\t\t\t\t\t<i\n\t\t\t\t\t\t\trole=\"button\" tabIndex={0}\n\t\t\t\t\t\t\tclassName=\"lesson-link-icon fas fa-external-link-alt\"\n\t\t\t\t\t\t\tonClick={this.copyLinkToClipboard}\n\t\t\t\t\t\t\tonKeyPress={this.copyLinkToClipboard}\n\t\t\t\t\t\t\taria-label={t('common:copy-link')}\n\t\t\t\t\t\t></i>\n\t\t\t\t\t</OverlayTrigger>\n\t\t\t\t\t{this.renderButtonToolbar()}\n\t\t\t\t\t{this.renderModals()}\n\t\t\t\t</Card.Body>\n\t\t\t</Card>\n\t\t);\n\t}\n}\n\n\n// PROPERTIES //\n\nLesson.propTypes = {\n\tactivateLesson: PropTypes.func.isRequired,\n\tactive: PropTypes.bool.isRequired,\n\taddNotification: PropTypes.func.isRequired,\n\tcolorIndex: PropTypes.number.isRequired,\n\tcreatedAt: PropTypes.any.isRequired,\n\tdeactivateLesson: PropTypes.func.isRequired,\n\tdeleteLesson: PropTypes.func.isRequired,\n\tdescription: PropTypes.string.isRequired,\n\tgetIsleFile: PropTypes.func.isRequired,\n\tgetLessons: PropTypes.func.isRequired,\n\thideFromDashboard: PropTypes.bool,\n\thideLessonInGallery: PropTypes.func.isRequired,\n\tlockAfter: PropTypes.instanceOf( Date ),\n\tlockUntil: PropTypes.instanceOf( Date ),\n\tnamespace: PropTypes.string.isRequired,\n\tpublic: PropTypes.bool.isRequired,\n\tshowLessonInGallery: PropTypes.func.isRequired,\n\ttitle: PropTypes.string.isRequired,\n\tupdateLesson: PropTypes.func.isRequired,\n\tupdatedAt: PropTypes.any.isRequired,\n\turl: PropTypes.string.isRequired,\n\tuser: PropTypes.object.isRequired\n};\n\nLesson.defaultProps = {\n\thideFromDashboard: false,\n\tlockAfter: null,\n\tlockUntil: null\n};\n\n\n// EXPORTS //\n\nexport default withTranslation( [ 'lesson', 'common' ] )( Lesson );\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React, { useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport { useTranslation } from 'react-i18next';\nimport Card from 'react-bootstrap/Card';\nimport ButtonToolbar from 'react-bootstrap/ButtonToolbar';\nimport ProgressBar from 'react-bootstrap/ProgressBar';\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\nimport Tooltip from 'react-bootstrap/Tooltip';\nimport copyToClipboard from 'clipboard-copy';\nimport round from '@stdlib/math/base/special/round';\nimport min from '@stdlib/math/base/special/min';\nimport COLORS from 'constants/colors';\nimport formatTime from 'utils/format_time.js';\nimport background from './architecture.jpeg';\nimport './lessons.css';\n\n\n// FUNCTIONS //\n\n/**\n * Adds a default background image to the card.\n *\n * @private\n * @param {Event} event - event object\n * @returns {void}\n */\nfunction addDefaultSrc( event ) {\n\tevent.target.src = background;\n}\n\n/**\n * Renders user progress.\n *\n * @private\n * @param {Object} props - component properties\n * @param {Object} props.user - user object\n * @param {string} props._id - id of the lesson\n * @param {Object} props.metadata - metadata associated with the lesson\n * @param {Function} props.t - i18n translation function\n * @returns {ReactElement} component\n */\nfunction LessonProgress( props ) {\n\tlet progress;\n\tif ( props.metadata && props.metadata.hideProgressBar === true ) {\n\t\treturn <div className=\"enrolled-lesson-progress\"></div>;\n\t}\n\tconst lessonData = props.user.lessonData;\n\tconst data = lessonData[ props._id ];\n\tif ( data ) {\n\t\tprogress = data.progress;\n\t\tprogress *= 100;\n\t\tprogress = min( round( progress ), 100.0 );\n\t} else {\n\t\tprogress = 0;\n\t}\n\tconst { t } = props;\n\treturn ( <div className=\"enrolled-lesson-progress\">\n\t\t<OverlayTrigger placement=\"top\" overlay={<Tooltip id=\"open_details\">{t('your-progress')}</Tooltip>}>\n\t\t\t<ProgressBar aria-label={t('your-progress')} variant='success' now={progress} label={`${progress}%`} />\n\t\t</OverlayTrigger>\n\t</div> );\n}\n\n/**\n * Renders user progress and information about the lesson.\n *\n * @private\n * @param {Object} props - component properties\n * @param {Object} props.user - user object\n * @param {string} props._id - id of the lesson\n * @param {Object} props.metadata - metadata associated with the lesson\n * @param {Function} props.t - i18n translation function\n * @returns {ReactElement} component\n */\nfunction LessonInfo( props ) {\n\tlet duration;\n\tconst lessonData = props.user.lessonData;\n\tconst data = lessonData[ props._id ];\n\tif ( data ) {\n\t\tduration = data.spentTime;\n\t} else {\n\t\tduration = 0;\n\t}\n\tconst { t } = props;\n\treturn (\n\t\t<ButtonToolbar style={{\n\t\t\tposition: 'absolute',\n\t\t\ttop: 180,\n\t\t\twidth: '100%',\n\t\t\theight: '36px',\n\t\t\tbackground: 'rgba(0, 0, 0, 0.75)'\n\t\t}}>\n\t\t\t<LessonProgress {...props} t={t} />\n\t\t\t<div className=\"enrolled-lesson-time\" style={{ width: '35%', height: '100%' }} >\n\t\t\t\t<OverlayTrigger placement=\"top\" overlay={<Tooltip id=\"open_details\">{t('time-format')}</Tooltip>}>\n\t\t\t\t\t<span>{t('time-spent')}: {formatTime( duration )}</span>\n\t\t\t\t</OverlayTrigger>\n\t\t\t</div>\n\t\t</ButtonToolbar>\n\t);\n}\n\n\n// VARIABLES //\n\nconst DEFAULT_DESCRIPTION = 'No description supplied.';\n\n\n// MAIN //\n\n/**\n * A component which displays a lesson that the user has enrolled in.\n *\n * @param {Object} props - component properties\n * @param {string} props.title - title of the lesson\n * @param {string} props.description - description of the lesson\n * @param {string} props._id - id of the lesson\n * @param {string} props.url - URL of the lesson\n * @param {Object} props.metadata - metadata associated with the lesson\n * @param {number} props.colorIndex - color index associated with the lesson\n * @param {Object} props.user - user object\n * @param {Function} props.addNotification - function to add a notification\n * @returns {ReactElement} lesson component\n */\nconst EnrolledLesson = ( props ) => {\n\tconst { t } = useTranslation( [ 'lesson', 'common' ] );\n\tconst imgRef = useRef();\n\tconst openLesson = () => {\n\t\tconst win = window.open( props.url, '_blank' );\n\t\twin.focus();\n\t};\n\tconst showPreviewImage = () => {\n\t\timgRef.current.src = props.url+'/preview.jpg';\n\t};\n\tconst copyLinkToClipboard = () => {\n\t\tconst promise = copyToClipboard( props.url );\n\t\tpromise.then( () => {\n\t\t\tprops.addNotification({\n\t\t\t\tmessage: t('link-copied'),\n\t\t\t\tlevel: 'success'\n\t\t\t});\n\t\t}).catch( err => {\n\t\t\tprops.addNotification({\n\t\t\t\tmessage: err.message,\n\t\t\t\tlevel: 'error'\n\t\t\t});\n\t\t});\n\t};\n\treturn (\n\t\t<Card className=\"animated-lesson-card\">\n\t\t\t<Card.Body style={{ padding: 0 }}>\n\t\t\t\t<div style={{\n\t\t\t\t\tfilter: 'grayscale(30%)',\n\t\t\t\t\tbackground: COLORS[ props.colorIndex ]\n\t\t\t\t}} onMouseOver={showPreviewImage} onFocus={showPreviewImage}\n\t\t\t\t\tclassName=\"hovereffect\"\n\t\t\t\t>\n\t\t\t\t\t<img\n\t\t\t\t\t\tclassName=\"img-responsive\"\n\t\t\t\t\t\tsrc={background}\n\t\t\t\t\t\tref={imgRef}\n\t\t\t\t\t\talt=\"\"\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\twidth: '100%',\n\t\t\t\t\t\t\theight: 180\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonError={addDefaultSrc}\n\t\t\t\t\t/>\n\t\t\t\t\t<div className=\"overlay\" >\n\t\t\t\t\t\t<h2>{props.title}</h2>\n\t\t\t\t\t\t{props.description !== DEFAULT_DESCRIPTION ?\n\t\t\t\t\t\t\t<h3>{props.description}</h3> :\n\t\t\t\t\t\t\tnull\n\t\t\t\t\t\t}\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tclassName=\"info\"\n\t\t\t\t\t\t\trole=\"button\" tabIndex={0}\n\t\t\t\t\t\t\tonClick={openLesson} onKeyPress={openLesson}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{t('open-lesson')}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<OverlayTrigger placement=\"top\" overlay={<Tooltip id=\"copy_link\">{t('common:copy-link')}</Tooltip>}>\n\t\t\t\t\t<i\n\t\t\t\t\t\trole=\"button\" tabIndex={0}\n\t\t\t\t\t\tclassName=\"lesson-link-icon fas fa-external-link-alt\"\n\t\t\t\t\t\tonClick={copyLinkToClipboard}\n\t\t\t\t\t\tonKeyPress={copyLinkToClipboard}\n\t\t\t\t\t\taria-label={t('common:copy-link')}\n\t\t\t\t\t></i>\n\t\t\t\t</OverlayTrigger>\n\t\t\t\t<LessonInfo {...props} t={t} />\n\t\t\t</Card.Body>\n\t\t</Card>\n\t);\n};\n\n\n// PROPERTIES //\n\nEnrolledLesson.propTypes = {\n\t'_id': PropTypes.string.isRequired,\n\taddNotification: PropTypes.func.isRequired,\n\tcolorIndex: PropTypes.number.isRequired,\n\tdescription: PropTypes.string.isRequired,\n\tmetadata: PropTypes.object,\n\ttitle: PropTypes.string.isRequired,\n\turl: PropTypes.string.isRequired,\n\tuser: PropTypes.object.isRequired\n};\n\nEnrolledLesson.defaultProps = {\n\tmetadata: null\n};\n\n\n// EXPORTS //\n\nexport default EnrolledLesson;\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React from 'react';\nimport { useTranslation } from 'react-i18next';\n\n\n// MAIN //\n\n/**\n * A component which displays a message to the user indicating that they have not selected a course.\n *\n * @param {Object} props - component properties\n * @param {Object} props.t - i18next translation function\n * @param {Object} props.user - user object\n * @returns {ReactElement} banner component\n */\nconst NoCourseBanner = ( props ) => {\n\tconst { user } = props;\n\tconst { t } = useTranslation( [ 'lessons_page', 'common' ] );\n\tlet appendix = null;\n\tif ( user.writeAccess ) {\n\t\tappendix = <span>{t('create-new-one')}<i className=\"fa fa-pencil-alt\"></i>.</span>;\n\t} else {\n\t\tappendix = ' .';\n\t}\n\treturn ( <div className=\"jumbotron lessons-jumbotron\" >\n\t\t<h1>{t('common:no-course-selected')}</h1>\n\t\t<p>{t('no-course-description')}<i className=\"fa fa-align-justify\"></i>{appendix}\n\t\t</p>\n\t</div> );\n};\n\n\n// EXPORTS //\n\nexport default NoCourseBanner;\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React from 'react';\nimport { useTranslation } from 'react-i18next';\n\n\n// MAIN //\n\n/**\n * A banner displayed for a course that has no lessons.\n *\n * @param {Object} props - component props\n * @param {Object} props.user - user object\n * @returns {ReactElement} banner\n */\nconst NoLessonBanner = ({ user }) => {\n\tconst { t } = useTranslation( [ 'lessons_page', 'common' ] );\n\tlet description = t('no-lessons');\n\tif ( user.writeAccess ) {\n\t\tdescription += t('upload-from-editor');\n\t}\n\treturn ( <div className=\"jumbotron lessons-jumbotron\">\n\t\t<h1>{t('no-lessons-found')}</h1>\n\t\t<p>{description}</p>\n\t</div> );\n};\n\n\n// EXPORTS //\n\nexport default NoLessonBanner;\n\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React, { Component, Fragment } from 'react';\nimport logger from 'debug';\nimport { withTranslation } from 'react-i18next';\nimport PropTypes from 'prop-types';\nimport { Responsive, WidthProvider } from 'react-grid-layout';\nimport Button from 'react-bootstrap/Button';\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\nimport Tooltip from 'react-bootstrap/Tooltip';\nimport isArray from '@stdlib/assert/is-array';\nimport contains from '@stdlib/assert/contains';\nimport lowercase from '@stdlib/string/lowercase';\nimport pluck from '@stdlib/utils/pluck';\nimport floor from '@stdlib/math/base/special/floor';\nimport LessonCreator from 'ev/containers/lesson-creator';\nimport Lesson from './lesson.js';\nimport EnrolledLesson from './enrolled_lesson.js';\nimport NoCourseBanner from './no_course_banner.js';\nimport NoLessonBanner from './no_lesson_banner.js';\nimport sortLessons from 'utils/sort_lessons.js';\nimport isOwner from 'utils/is_owner.js';\nimport 'css/image.css';\nimport 'react-grid-layout/css/styles.css';\nimport 'react-resizable/css/styles.css';\nimport './lessons.css';\n\n\n// VARIABLES //\n\nconst debug = logger( 'isle-dashboard:lessons-page' );\nconst ResponsiveReactGridLayout = WidthProvider( Responsive );\n\n\n// FUNCTIONS //\n\nfunction searchLessons( lessons, phrase ) {\n\tif ( !phrase ) {\n\t\treturn lessons;\n\t}\n\tconst filteredLessons = [];\n\tif ( isArray( lessons ) ) {\n\t\tfor ( let i = 0; i < lessons.length; i++ ) {\n\t\t\tif (\n\t\t\t\tcontains( lowercase( lessons[ i ].title ), phrase ) ||\n\t\t\t\tcontains( lowercase( lessons[ i ].description ), phrase )\n\t\t\t) {\n\t\t\t\tfilteredLessons.push( lessons[ i ] );\n\t\t\t}\n\t\t}\n\t}\n\treturn filteredLessons;\n}\n\nfunction createLayout( lessons ) {\n\tdebug( 'Create layout...' );\n\tconst elemH = 3.52;\n\tlet layouts = lessons.map( ( e, i ) => {\n\t\treturn {\n\t\t\tlg: { i: `cell-${e.title}-${i}`, x: i*4 % 24, y: floor( i / 6 ) * elemH, w: 4, h: elemH },\n\t\t\tmd: { i: `cell-${e.title}-${i}`, x: i*4 % 20, y: floor( i / 5 ) * elemH, w: 4, h: elemH },\n\t\t\tsm: { i: `cell-${e.title}-${i}`, x: i*4 % 16, y: floor( i / 4 ) * elemH, w: 4, h: elemH },\n\t\t\txs: { i: `cell-${e.title}-${i}`, x: i*4 % 12, y: floor( i / 3 ) * elemH, w: 4, h: elemH },\n\t\t\txxs: { i: `cell-${e.title}-${i}`, x: i*4 % 8, y: floor( i / 2 ) * elemH, w: 4, h: elemH },\n\t\t\ttiny: { i: `cell-${e.title}-${i}`, x: i*4 % 4, y: floor( i / 1 ) * elemH, w: 4, h: elemH }\n\t\t};\n\t});\n\tlayouts = {\n\t\tlg: pluck( layouts, 'lg' ),\n\t\tmd: pluck( layouts, 'md' ),\n\t\tsm: pluck( layouts, 'sm' ),\n\t\txs: pluck( layouts, 'xs' ),\n\t\txxs: pluck( layouts, 'xxs' ),\n\t\ttiny: pluck( layouts, 'tiny' )\n\t};\n\treturn layouts;\n}\n\n\n// MAIN //\n\nclass LessonsPage extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tlet lessons = props.namespace.lessons;\n\t\tif ( !isOwner( props.user, props.namespace ) ) {\n\t\t\tdebug( 'Filter out inactive or hidden lessons for enrolled students...' );\n\t\t\tlessons = lessons.filter( e => e.active === true && e.hideFromDashboard !== true );\n\t\t}\n\t\tthis.state = {\n\t\t\tfilteredLessons: searchLessons( lessons, props.search.phrase ),\n\t\t\tlayouts: createLayout( lessons ),\n\t\t\tunfilteredLessons: lessons,\n\t\t\tsearch: props.search,\n\t\t\tactiveElement: null,\n\t\t\tshowLessonCreator: false\n\t\t};\n\t}\n\n\tstatic getDerivedStateFromProps( nextProps, prevState ) {\n\t\tif (\n\t\t\tnextProps.namespace.lessons !== prevState.unfilteredLessons ||\n\t\t\tnextProps.search.phrase !== prevState.search.phrase ||\n\t\t\tnextProps.search.direction !== prevState.search.direction ||\n\t\t\tnextProps.search.type !== prevState.search.type\n\t\t) {\n\t\t\tdebug( 'Get derived state...' );\n\t\t\tlet lessons = nextProps.namespace.lessons || [];\n\t\t\tif ( !isOwner( nextProps.user, nextProps.namespace ) ) {\n\t\t\t\tdebug( 'Filter out inactive or hidden lessons for enrolled students...' );\n\t\t\t\tlessons = lessons.filter( e => e.active === true && e.hideFromDashboard !== true );\n\t\t\t}\n\t\t\tconst filteredLessons = searchLessons( lessons, nextProps.search.phrase );\n\t\t\tsortLessons( filteredLessons, nextProps.search );\n\t\t\tconst layouts = createLayout( filteredLessons );\n\t\t\treturn {\n\t\t\t\tfilteredLessons,\n\t\t\t\tlayouts,\n\t\t\t\tunfilteredLessons: nextProps.namespace.lessons,\n\t\t\t\tsearch: nextProps.search\n\t\t\t};\n\t\t}\n\t\treturn null;\n\t}\n\n\tcomponentDidMount() {\n\t\tdebug( 'Component did mount...' );\n\t\tconst course = this.props.namespace;\n\t\tif ( course.title ) {\n\t\t\tdebug( 'Fetch lessons...' );\n\t\t\tthis.props.getLessons( course.title );\n\t\t}\n\t}\n\n\tshouldComponentUpdate( nextProps, nextState ) {\n\t\tif (\n\t\t\tnextProps.search.direction !== this.props.search.direction ||\n\t\t\tnextProps.search.type !== this.props.search.type ||\n\t\t\tnextState.filteredLessons !== this.state.filteredLessons ||\n\t\t\tnextState.showLessonCreator !== this.state.showLessonCreator\n\t\t) {\n\t\t\tdebug( 'Should update page...' );\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tpreventOpeningLink = ( event ) => {\n\t\tevent.preventDefault();\n\t};\n\n\trepositionLessons( idx, direction ) {\n\t\tconst unfilteredLessons = this.state.unfilteredLessons.slice();\n\t\tif ( direction === 'left' ) {\n\t\t\tif ( idx > 0 ) {\n\t\t\t\tconst lesson = unfilteredLessons[ idx ];\n\t\t\t\tconst left = unfilteredLessons[ idx - 1 ];\n\t\t\t\tconst tmp = left.pos;\n\t\t\t\tleft.pos = lesson.pos;\n\t\t\t\tlesson.pos = tmp;\n\t\t\t}\n\t\t}\n\t\telse if ( direction === 'right' ) {\n\t\t\tif ( idx < unfilteredLessons.length - 1 ) {\n\t\t\t\tconst lesson = unfilteredLessons[ idx ];\n\t\t\t\tconst right = unfilteredLessons[ idx + 1 ];\n\t\t\t\tconst tmp = right.pos;\n\t\t\t\tright.pos = lesson.pos;\n\t\t\t\tlesson.pos = tmp;\n\t\t\t}\n\t\t}\n\t\tconst filteredLessons = searchLessons( unfilteredLessons, this.props.search.phrase );\n\t\tsortLessons( filteredLessons, this.props.search );\n\t\tconst layouts = createLayout( filteredLessons );\n\t\tthis.setState({\n\t\t\tfilteredLessons,\n\t\t\tlayouts,\n\t\t\tunfilteredLessons\n\t\t}, this.forceUpdate );\n\t\tthis.props.setLessonOrder({\n\t\t\tid: this.props.namespace._id,\n\t\t\tlessons: unfilteredLessons.map( x => x._id )\n\t\t});\n\t}\n\n\thandlePositionChangeFactory = ( idx ) => {\n\t\treturn ( event ) => {\n\t\t\tlet bool = false;\n\t\t\tswitch ( event.code ) {\n\t\t\t\tcase 'ArrowLeft':\n\t\t\t\t\tbool = true;\n\t\t\t\t\tthis.repositionLessons( idx, 'left' );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'ArrowRight':\n\t\t\t\t\tbool = true;\n\t\t\t\t\tthis.repositionLessons( idx, 'right' );\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif ( bool ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tevent.stopPropagation();\n\t\t\t}\n\t\t};\n\t};\n\n\ttoggleCreator = () => {\n\t\tthis.props.getTemplateLessons();\n\t\tthis.setState({ showLessonCreator: !this.state.showLessonCreator });\n\t};\n\n\thandleCreate = () => {\n\t\tthis.setState({ showLessonCreator: false });\n\t\tconst course = this.props.namespace;\n\t\tif ( course.title ) {\n\t\t\tdebug( 'Fetch lessons...' );\n\t\t\tthis.props.getLessons( course.title );\n\t\t}\n\t};\n\n\trenderLessons() {\n\t\tlet lessons = this.state.filteredLessons;\n\t\tif ( !isOwner( this.props.user, this.props.namespace ) ) {\n\t\t\treturn lessons.map( ( e, i ) => {\n\t\t\t\treturn (<div className=\"lesson-grid-item\" key={`cell-${e.title}-${i}`}>\n\t\t\t\t\t<EnrolledLesson\n\t\t\t\t\t\t{...lessons[ i ]}\n\t\t\t\t\t\taddNotification={this.props.addNotification}\n\t\t\t\t\t\tuser={this.props.user}\n\t\t\t\t\t/>\n\t\t\t\t</div>);\n\t\t\t});\n\t\t}\n\t\treturn (\n\t\t\tlessons.map( ( e, i ) => {\n\t\t\t\tconst lesson = <Lesson\n\t\t\t\t\t{...lessons[ i ]}\n\t\t\t\t\taddNotification={this.props.addNotification}\n\t\t\t\t\tdeleteLesson={this.props.deleteLesson}\n\t\t\t\t\tupdateLesson={this.props.updateLesson}\n\t\t\t\t\tdeactivateLesson={this.props.deactivateLesson}\n\t\t\t\t\tactivateLesson={this.props.activateLesson}\n\t\t\t\t\tshowLessonInGallery={this.props.showLessonInGallery}\n\t\t\t\t\thideLessonInGallery={this.props.hideLessonInGallery}\n\t\t\t\t\tgetLessons={this.props.getLessons}\n\t\t\t\t\tgetIsleFile={this.props.getIsleFile}\n\t\t\t\t\tuser={this.props.user}\n\t\t\t\t/>;\n\t\t\t\tif ( this.props.search.type === 'sequentially' ) {\n\t\t\t\t\treturn ( <div\n\t\t\t\t\t\tclassName=\"lesson-grid-item\"\n\t\t\t\t\t\tkey={`cell-${e.title}-${i}`}\n\t\t\t\t\t\ttabIndex={0} role=\"button\"\n\t\t\t\t\t\tref={input => {\n\t\t\t\t\t\t\tif ( input && this.state.activeElement === e.title ) {\n\t\t\t\t\t\t\t\tinput.focus();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn input;\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonKeyDown={this.handlePositionChangeFactory( i )}\n\t\t\t\t\t\tonFocus={() => {\n\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\tactiveElement: e.title\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{lesson}\n\t\t\t\t\t</div> );\n\t\t\t\t}\n\t\t\t\treturn (\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName=\"lesson-grid-item\" key={`cell-${e.title}-${i}`}\n\t\t\t\t\t>\n\t\t\t\t\t\t{lesson}\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t})\n\t\t);\n\t}\n\n\trender() {\n\t\tif ( !this.props.namespace.title ) {\n\t\t\treturn <NoCourseBanner user={this.props.user} />;\n\t\t}\n\t\tlet lessons = this.state.filteredLessons;\n\t\tif ( isArray( lessons ) ) {\n\t\t\tconst templateButton = <OverlayTrigger placement=\"left\" overlay={<Tooltip id=\"create-from-template-tooltip\">{this.props.t('create-from-template')}</Tooltip>}>\n\t\t\t\t<Button aria-label={this.props.t('create-from-template')} className=\"create-from-template-button\" onClick={this.toggleCreator} >\n\t\t\t\t\t<i className=\"fas fa-plus\" />\n\t\t\t\t</Button>\n\t\t\t</OverlayTrigger>;\n\t\t\tif ( lessons.length === 0 ) {\n\t\t\t\treturn ( <Fragment>\n\t\t\t\t\t<NoLessonBanner user={this.props.user} />\n\t\t\t\t\t{templateButton}\n\t\t\t\t\t{this.state.showLessonCreator ? <LessonCreator\n\t\t\t\t\t\tonHide={this.toggleCreator}\n\t\t\t\t\t\tonCreate={this.handleCreate}\n\t\t\t\t\t\tnamespace={this.props.namespace}\n\t\t\t\t\t/> : null}\n\t\t\t\t</Fragment> );\n\t\t\t}\n\t\t\treturn (\n\t\t\t\t<Fragment>\n\t\t\t\t\t<div className=\"lessons-grid-container\">\n\t\t\t\t\t\t<ResponsiveReactGridLayout\n\t\t\t\t\t\t\tlayouts={this.state.layouts}\n\t\t\t\t\t\t\tbreakpoints={{ lg: 1800, md: 1550, sm: 1200, xs: 900, xxs: 400, tiny: 0 }}\n\t\t\t\t\t\t\tcols={{ lg: 24, md: 20, sm: 16, xs: 12, xxs: 8, tiny: 4 }}\n\t\t\t\t\t\t\tcontainerPadding={[10, 10]}\n\t\t\t\t\t\t\tisResizable={false}\n\t\t\t\t\t\t\tisBounded={true}\n\t\t\t\t\t\t\tisDraggable={false}\n\t\t\t\t\t\t\trowHeight={isOwner( this.props.user, this.props.namespace ) ? 54.5 : 55}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{this.renderLessons()}\n\t\t\t\t\t\t</ResponsiveReactGridLayout>\n\t\t\t\t\t\t{templateButton}\n\t\t\t\t\t</div>\n\t\t\t\t\t{this.state.showLessonCreator ? <LessonCreator\n\t\t\t\t\t\tonHide={this.toggleCreator}\n\t\t\t\t\t\tonCreate={this.handleCreate}\n\t\t\t\t\t\tnamespace={this.props.namespace}\n\t\t\t\t\t/> : null}\n\t\t\t\t</Fragment>\n\t\t\t);\n\t\t}\n\t}\n}\n\n\n// PROPERTIES //\n\nLessonsPage.propTypes = {\n\tactivateLesson: PropTypes.func.isRequired,\n\taddNotification: PropTypes.func.isRequired,\n\tdeactivateLesson: PropTypes.func.isRequired,\n\tdeleteLesson: PropTypes.func.isRequired,\n\tgetIsleFile: PropTypes.func.isRequired,\n\tgetLessons: PropTypes.func.isRequired,\n\tgetTemplateLessons: PropTypes.func.isRequired,\n\thideLessonInGallery: PropTypes.func.isRequired,\n\tnamespace: PropTypes.object.isRequired,\n\tsearch: PropTypes.object.isRequired,\n\tsetLessonOrder: PropTypes.func.isRequired,\n\tshowLessonInGallery: PropTypes.func.isRequired,\n\tupdateLesson: PropTypes.func.isRequired,\n\turl: PropTypes.string,\n\tuser: PropTypes.object.isRequired\n};\n\nLessonsPage.defaultProps = {\n\turl: null\n};\n\n\n// EXPORTS //\n\nexport default withTranslation( [ 'lessons_page', 'common' ] )( LessonsPage );\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport LessonsPage from 'components/lessons-page';\nimport { setLessonOrderInjector } from 'actions/namespace';\nimport { activateLessonInjector, deactivateLessonInjector, deleteLessonInjector, getIsleFileInjector, getLessonsInjector, getTemplateLessonsInjector,\n\tshowLessonInGalleryInjector, hideLessonInGalleryInjector, updateLessonInjector } from 'actions/lesson';\nimport { addNotificationInjector } from 'actions/notification';\n\n\n// EXPORTS //\n\nconst VisibleLessonsPage = connect( mapStateToProps, mapDispatchToProps )( LessonsPage );\n\nfunction mapStateToProps( state ) {\n\treturn {\n\t\tsearch: state.search,\n\t\tuser: state.user,\n\t\tnamespace: state.namespace\n\t};\n}\n\nfunction mapDispatchToProps( dispatch ) {\n\treturn {\n\t\taddNotification: addNotificationInjector( dispatch ),\n\t\tshowLessonInGallery: showLessonInGalleryInjector( dispatch ),\n\t\thideLessonInGallery: hideLessonInGalleryInjector( dispatch ),\n\t\tactivateLesson: activateLessonInjector( dispatch ),\n\t\tdeactivateLesson: deactivateLessonInjector( dispatch ),\n\t\tupdateLesson: updateLessonInjector( dispatch ),\n\t\tdeleteLesson: deleteLessonInjector( dispatch ),\n\t\tgetLessons: getLessonsInjector( dispatch ),\n\t\tgetTemplateLessons: getTemplateLessonsInjector( dispatch ),\n\t\tgetIsleFile: getIsleFileInjector( dispatch ),\n\t\tsetLessonOrder: setLessonOrderInjector( dispatch )\n\t};\n}\n\nexport default VisibleLessonsPage;\n","/*\n* Adapted from:\n*\n* FileSaver.js\n* A saveAs() FileSaver implementation.\n* 1.3.8\n* 2018-03-22 14:03:47\n*\n* By Eli Grey, https://eligrey.com\n* License: MIT\n*   See https://github.com/eligrey/FileSaver.js/blob/master/LICENSE.md\n*\n* @source http://purl.eligrey.com/github/FileSaver.js/blob/master/src/FileSaver.js\n*/\n\n// VARIABLES //\n\nconst RE_AUTO_BOM = /^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i;\nconst ARBITRARY_REVOKE_TIMEOUT = 1000 * 40; // Time in ms\n\n\n// FUNCTIONS //\n\nfunction click(node) {\n\tconst event = new MouseEvent( 'click' );\n\tnode.dispatchEvent( event );\n}\n\nfunction throwOutside( ex ) {\n\tsetImmediate(function throwEx() {\n\t\tthrow ex;\n\t}, 0 );\n}\n\nfunction autoBOM( blob ) {\n\t// Prepend BOM for UTF-8 XML and text/* types (including HTML). Note: your browser will automatically convert UTF-16 U+FEFF to EF BB BF\n\tif ( RE_AUTO_BOM.test( blob.type ) ) {\n\t\treturn new Blob([ String.fromCharCode( 0xFEFF ), blob ], {\n\t\t\ttype: blob.type\n\t\t});\n\t}\n\treturn blob;\n}\n\nfunction dispatch( filesaver, eventTypes, event ) {\n\teventTypes = [].concat( eventTypes );\n\tlet i = eventTypes.length;\n\twhile ( i-- ) {\n\t\tlet listener = filesaver[ 'on' + eventTypes[i] ];\n\t\tif ( typeof listener === 'function' ) {\n\t\t\ttry {\n\t\t\t\tlistener.call( filesaver, event || filesaver );\n\t\t\t} catch ( ex ) {\n\t\t\t\tthrowOutside( ex );\n\t\t\t}\n\t\t}\n\t}\n}\n\n\n// MAIN //\n\nfunction saveFactory( view ) {\n\tif (\n\t\ttypeof view === 'undefined' ||\n\t\ttypeof navigator !== 'undefined' &&\n\t\t/MSIE [1-9]\\./.test( navigator.userAgent )\n\t) {\n\t\treturn;\n\t}\n\tconst doc = view.document;\n\n\t// Only get URL when necessary in case Blob.js hasn't overridden it yet:\n\tfunction getURL() {\n\t\treturn view.URL || view.webkitURL || view;\n\t}\n\tfunction revoke( file ) {\n\t\tfunction revoker() {\n\t\t\tif ( typeof file === 'string' ) { // File is an object URL...\n\t\t\t\tgetURL().revokeObjectURL(file);\n\t\t\t} else { // File is a File...\n\t\t\t\tfile.remove();\n\t\t\t}\n\t\t}\n\t\tsetTimeout( revoker, ARBITRARY_REVOKE_TIMEOUT );\n\t}\n\n\tconst saveLink = doc.createElementNS( 'http://www.w3.org/1999/xhtml', 'a' );\n\tconst canUseSaveLink = 'download' in saveLink;\n\tconst isSafari = /constructor/i.test( view.HTMLElement ) || view.safari;\n\tconst isChromeIOS =/CriOS\\/[\\d]+/.test( navigator.userAgent );\n\tconst setImmediate = view.setImmediate || view.setTimeout;\n\tconst forceSavableType = 'application/octet-stream';\n\n\tfunction FileSaver(blob, name, noAutoBOM ) {\n\t\tif ( !noAutoBOM ) {\n\t\t\tblob = autoBOM(blob);\n\t\t}\n\t\t// First try a.download, then web filesystem, then object URLs\n\t\tconst self = this;\n\t\tconst type = blob.type;\n\t\tconst force = type === forceSavableType;\n\t\tlet objectURL;\n\t\tfunction dispatchAll() {\n\t\t\tdispatch( self, 'writestart progress write writeend'.split(' ') );\n\t\t}\n\t\t// On any filesystem errors, revert to saving with object URLs:\n\t\tfunction fsError() {\n\t\t\tif ((isChromeIOS || (force && isSafari)) && view.FileReader) {\n\t\t\t\t// Safari doesn't allow downloading of blob urls\n\t\t\t\tconst reader = new FileReader();\n\t\t\t\treader.onloadend = function onLoadEnd() {\n\t\t\t\t\tlet url = isChromeIOS ? reader.result : reader.result.replace(/^data:[^;]*;/, 'data:attachment/file;');\n\t\t\t\t\tconst popup = view.open(url, '_blank');\n\t\t\t\t\tif ( !popup ) {\n\t\t\t\t\t\tview.location.href = url;\n\t\t\t\t\t}\n\t\t\t\t\turl = void 0; // Release reference before dispatching...\n\t\t\t\t\tself.readyState = self.DONE;\n\t\t\t\t\tdispatchAll();\n\t\t\t\t};\n\t\t\t\treader.readAsDataURL(blob);\n\t\t\t\tself.readyState = self.INIT;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// Don't create more object URLs than needed:\n\t\t\tif ( !objectURL ) {\n\t\t\t\tobjectURL = getURL().createObjectURL( blob );\n\t\t\t}\n\t\t\tif ( force ) {\n\t\t\t\tview.location.href = objectURL;\n\t\t\t} else {\n\t\t\t\tconst opened = view.open( objectURL, '_blank' );\n\t\t\t\tif ( !opened ) {\n\t\t\t\t\t// Apple does not allow window.open, see https://developer.apple.com/library/safari/documentation/Tools/Conceptual/SafariExtensionGuide/WorkingwithWindowsandTabs/WorkingwithWindowsandTabs.html\n\t\t\t\t\tview.location.href = objectURL;\n\t\t\t\t}\n\t\t\t}\n\t\t\tself.readyState = self.DONE;\n\t\t\tdispatchAll();\n\t\t\trevoke( objectURL );\n\t\t}\n\t\tself.readyState = self.INIT;\n\n\t\tif ( canUseSaveLink ) {\n\t\t\tobjectURL = getURL().createObjectURL(blob);\n\t\t\tsetImmediate(function save() {\n\t\t\t\tsaveLink.href = objectURL;\n\t\t\t\tsaveLink.download = name;\n\t\t\t\tclick( saveLink );\n\t\t\t\tdispatchAll();\n\t\t\t\trevoke( objectURL );\n\t\t\t\tself.readyState = self.DONE;\n\t\t\t}, 0);\n\t\t\treturn;\n\t\t}\n\n\t\tfsError();\n\t}\n\tconst proto = FileSaver.prototype;\n\tfunction saveAs( blob, name, noAutoBOM ) {\n\t\treturn new FileSaver( blob, name || blob.name || 'download', noAutoBOM );\n\t}\n\n\t// IE 10+ (native saveAs)\n\tif ( typeof navigator !== 'undefined' && navigator.msSaveOrOpenBlob ) {\n\t\treturn function saveAs( blob, name, noAutoBOM ) {\n\t\t\tname = name || blob.name || 'download';\n\t\t\tif ( !noAutoBOM ) {\n\t\t\t\tblob = autoBOM( blob );\n\t\t\t}\n\t\t\treturn navigator.msSaveOrOpenBlob(blob, name);\n\t\t};\n\t}\n\n\tproto.abort = function abort() {};\n\tproto.readyState = proto.INIT = 0;\n\tproto.WRITING = 1;\n\tproto.DONE = 2;\n\n\tproto.error = null;\n\tproto.onwritestart = null;\n\tproto.onprogress = null;\n\tproto.onwrite = null;\n\tproto.onabort = null;\n\tproto.onerror = null;\n\tproto.onwriteend = null;\n\n\treturn saveAs;\n}\n\nconst saveAs = saveFactory(\n\ttypeof self !== 'undefined' && self ||\n\ttypeof window !== 'undefined' && window ||\n\tthis.content\n);\n\n\n// EXPORTS //\n\nexport default saveAs;\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport floor from '@stdlib/math/base/special/floor';\n\n\n// MAIN //\n\n/**\n* Formats a timestamp in a human readable format.\n*\n* @param {number} timestamp - timestamp\n* @param {Object} [opts] - options\n* @param {string} [opts.hours] - hours\n* @param {string} [opts.minutes] - minutes\n* @param {string} [opts.seconds] - seconds\n* @returns {string} formatted timestamp\n*/\nconst formatTime = ( time, opts = { hours: true, minutes: true, seconds: true }) => {\n\ttime = time / 1000;\n\tconst hours = floor( time / ( 60*60 ) );\n\ttime = time % ( 60*60 );\n\tlet minutes = floor( time / 60 );\n\tif ( minutes < 10 ) {\n\t\tminutes = '0'+minutes;\n\t}\n\ttime = time % 60;\n\tlet seconds = floor( time );\n\tif ( seconds < 10 ) {\n\t\tseconds = '0'+seconds;\n\t}\n\tlet out = '';\n\tif ( opts.hours ) {\n\t\tout += hours;\n\t}\n\tif ( opts.minutes ) {\n\t\tif ( out ) {\n\t\t\tout += ':';\n\t\t}\n\t\tout += minutes;\n\t}\n\tif ( opts.seconds ) {\n\t\tif ( out ) {\n\t\t\tout += ':';\n\t\t}\n\t\tout += seconds;\n\t}\n\treturn out;\n};\n\n\n// EXPORTS //\n\nexport default formatTime;\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport isObject from '@stdlib/assert/is-object';\n\n\n// MAIN //\n\n/**\n* Validates if a user is an owner of the specified namespace.\n*\n* @param {Object} user - user object\n* @param {Object} namespace - namespace object\n* @returns {boolean} boolean indicating if the user is an owner of the namespace\n*/\nfunction isOwner( user, namespace ) {\n\tlet bool = false;\n\tfor ( let i = 0; i < namespace.owners.length; i++ ) {\n\t\tconst owner = namespace.owners[ i ];\n\t\tif ( isObject( owner ) ) {\n\t\t\tif ( owner.email === user.email ) {\n\t\t\t\tbool = true;\n\t\t\t}\n\t\t} else if ( owner === user.id ) {\n\t\t\t// Case: Owners array is not yet populated but contains only string IDs:\n\t\t\tbool = true;\n\t\t}\n\t}\n\treturn bool;\n}\n\n\n// EXPORTS //\n\nexport default isOwner;\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// VARIABLES //\n\nconst OPTS = {\n\tnumeric: true // Use numeric collation such that \"1\" < \"2\" < \"10\"...\n};\n\n\n// MAIN //\n\n/**\n* Sorts lessons according to the `search` object in place.\n*\n* @param {Array} lessons - a list of lessons\n* @param {Object} search - search object\n* @param {string} search.type - either `sequentially`, `alphabetically`, `created_at`, or `updated_at`\n* @param {string} search.direction - either `ascending` or `descending`\n*/\nfunction sortLessons( lessons, search ) {\n\tconst { type, direction } = search;\n\tif ( type === 'sequentially' ) {\n\t\tif ( direction === 'ascending' ) {\n\t\t\tlessons.sort( ( a, b ) => {\n\t\t\t\treturn a.pos - b.pos;\n\t\t\t});\n\t\t} else {\n\t\t\tlessons.sort( ( a, b ) => {\n\t\t\t\treturn b.pos - a.pos;\n\t\t\t});\n\t\t}\n\t}\n\telse if ( type === 'alphabetically' ) {\n\t\tif ( direction === 'ascending' ) {\n\t\t\tlessons.sort( ( a, b ) => {\n\t\t\t\tconst x = a.namespace + a.title;\n\t\t\t\tconst y = b.namespace + b.title;\n\t\t\t\treturn x.localeCompare( y, void 0, OPTS );\n\t\t\t});\n\t\t} else {\n\t\t\tlessons.sort( ( a, b ) => {\n\t\t\t\tconst x = a.namespace + a.title;\n\t\t\t\tconst y = b.namespace + b.title;\n\t\t\t\treturn y.localeCompare( x, void 0, OPTS );\n\t\t\t});\n\t\t}\n\t}\n\telse if ( type === 'created_at' ) {\n\t\tif ( direction === 'ascending' ) {\n\t\t\tlessons.sort( ( a, b ) => {\n\t\t\t\treturn a.createdAt.localeCompare( b.createdAt, void 0, OPTS );\n\t\t\t});\n\t\t} else {\n\t\t\tlessons.sort( ( a, b ) => {\n\t\t\t\treturn b.createdAt.localeCompare( a.createdAt, void 0, OPTS );\n\t\t\t});\n\t\t}\n\t}\n\telse if ( type === 'updated_at' ) {\n\t\tif ( direction === 'ascending' ) {\n\t\t\tlessons.sort( ( a, b ) => {\n\t\t\t\treturn a.updatedAt.localeCompare( b.updatedAt, void 0, OPTS );\n\t\t\t});\n\t\t} else {\n\t\t\tlessons.sort( ( a, b ) => {\n\t\t\t\treturn b.updatedAt.localeCompare( a.updatedAt, void 0, OPTS );\n\t\t\t});\n\t\t}\n\t}\n}\n\n\n// EXPORTS //\n\nexport default sortLessons;\n"],"sourceRoot":""}