"use strict";(self.webpackChunkisle_dashboard=self.webpackChunkisle_dashboard||[]).push([[7562],{76780:function(__unused_webpack_module,__webpack_exports__){const COLORS=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#c49c94","#e377c2","#17becf","#aec7e8","#ffbb78","#ff9896","#98df8a","#7f7f7f","#c5b0d5","#f7b6d2","#bcbd22","#c7c7c7","#dbdb8d","#9edae5"];__webpack_exports__.Z=COLORS},13016:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:function(){return visible_gallery}});var react=__webpack_require__(67294),lib=__webpack_require__(37424),prop_types=__webpack_require__(45697),prop_types_default=__webpack_require__.n(prop_types),commonjs=__webpack_require__(81468),Pagination=__webpack_require__(24988),Pagination_default=__webpack_require__.n(Pagination),react_grid_layout=__webpack_require__(69968),is_array_lib=__webpack_require__(76266),is_array_lib_default=__webpack_require__.n(is_array_lib),contains_lib=__webpack_require__(61635),contains_lib_default=__webpack_require__.n(contains_lib),lowercase_lib=__webpack_require__(86361),lowercase_lib_default=__webpack_require__.n(lowercase_lib),pluck_lib=__webpack_require__(60149),pluck_lib_default=__webpack_require__.n(pluck_lib),min_lib=__webpack_require__(27813),min_lib_default=__webpack_require__.n(min_lib),ceil_lib=__webpack_require__(77731),ceil_lib_default=__webpack_require__.n(ceil_lib),floor_lib=__webpack_require__(78113),floor_lib_default=__webpack_require__.n(floor_lib),sort_lessons=__webpack_require__(56335),Button=__webpack_require__(89876),Button_default=__webpack_require__.n(Button),FormLabel=__webpack_require__(65903),FormLabel_default=__webpack_require__.n(FormLabel),FormControl=__webpack_require__(26199),FormControl_default=__webpack_require__.n(FormControl),FormGroup=__webpack_require__(34168),FormGroup_default=__webpack_require__.n(FormGroup),Modal=__webpack_require__(89194),Modal_default=__webpack_require__.n(Modal),react_select_cjs_prod=__webpack_require__(87583),__defProp=Object.defineProperty,__defNormalProp=(obj,key,value)=>key in obj?__defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value}):obj[key]=value,__publicField=(obj,key,value)=>(__defNormalProp(obj,typeof key!="symbol"?key+"":key,value),value);class ImportModal extends react.Component{constructor(props){super(props);__publicField(this,"handleChange",event=>{const target=event.target,value=target.value,name=target.name;this.setState({[name]:value})}),__publicField(this,"handleImport",()=>{this.props.copyLesson({sourceName:this.props.title,source:this.props.namespace,target:this.state.selected.value,targetName:this.state.targetName}),this.props.close()}),__publicField(this,"handleCourseChange",newValue=>{this.setState({selected:newValue})});const ns=props.userNamespaces;let selected;props.openedNamespace.title?selected=props.openedNamespace.title:selected=is_array_lib_default()(ns)&&ns.length>0?ns[0].title:null,selected&&(selected={label:selected,value:selected}),this.state={selected,targetName:props.title}}render(){const{t}=this.props;return react.createElement(Modal_default(),{show:this.props.show,onHide:this.props.close},react.createElement(Modal_default().Header,null,react.createElement(Modal_default().Title,null,t("import-lesson"),react.createElement("span",{style:{color:"darkred"}},this.props.namespace,": ",this.props.title))),react.createElement(Modal_default().Body,{className:"d-grid gap-2"},react.createElement("p",null,t("import-lesson-description")),react.createElement(FormGroup_default(),null,react.createElement(FormLabel_default(),null,t("select-course")),react.createElement(react_select_cjs_prod.ZP,{options:this.props.userNamespaces.map(ns=>({value:ns.title,label:ns.title})),onChange:this.handleCourseChange,value:this.state.selected})),react.createElement(FormGroup_default(),null,react.createElement(FormLabel_default(),null,t("lesson-name")),react.createElement(FormControl_default(),{name:"targetName",type:"text",value:this.state.targetName,onChange:this.handleChange}))),react.createElement(Modal_default().Footer,null,react.createElement(Button_default(),{onClick:this.props.close},t("common:cancel")),react.createElement(Button_default(),{variant:"success",onClick:this.handleImport},t("import"))))}}ImportModal.propTypes={close:prop_types_default().func.isRequired,copyLesson:prop_types_default().func.isRequired,namespace:prop_types_default().string.isRequired,openedNamespace:prop_types_default().object.isRequired,show:prop_types_default().bool.isRequired,t:prop_types_default().func.isRequired,title:prop_types_default().string.isRequired,userNamespaces:prop_types_default().array.isRequired};var import_modal=ImportModal,ButtonToolbar=__webpack_require__(71507),ButtonToolbar_default=__webpack_require__.n(ButtonToolbar),Card=__webpack_require__(51889),Card_default=__webpack_require__.n(Card),OverlayTrigger=__webpack_require__(99201),OverlayTrigger_default=__webpack_require__.n(OverlayTrigger),Tooltip=__webpack_require__(18868),Tooltip_default=__webpack_require__.n(Tooltip),browser=__webpack_require__(11227),browser_default=__webpack_require__.n(browser),css_image=__webpack_require__(64731),colors=__webpack_require__(76780),clipboard_copy=__webpack_require__(66485),clipboard_copy_default=__webpack_require__.n(clipboard_copy),bubble=__webpack_require__(38088),upload=__webpack_require__(34231),lesson_defProp=Object.defineProperty,lesson_defNormalProp=(obj,key,value)=>key in obj?lesson_defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value}):obj[key]=value,lesson_publicField=(obj,key,value)=>(lesson_defNormalProp(obj,typeof key!="symbol"?key+"":key,value),value),__async=(__this,__arguments,generator)=>new Promise((resolve,reject)=>{var fulfilled=value=>{try{step(generator.next(value))}catch(e){reject(e)}},rejected=value=>{try{step(generator.throw(value))}catch(e){reject(e)}},step=x=>x.done?resolve(x.value):Promise.resolve(x.value).then(fulfilled,rejected);step((generator=generator.apply(__this,__arguments)).next())});const debug=browser_default()("isle:gallery:lesson");class Lesson extends react.Component{constructor(props){super(props);lesson_publicField(this,"getIsleFile",()=>__async(this,null,function*(){if(debug("Request ISLE source code from server..."),!this.state.isleFile){const data=yield this.props.getIsleFile({lessonName:this.props.title,namespaceName:this.props.namespace});data&&this.setState({isleFile:data})}})),lesson_publicField(this,"copyIsleFileToClipboard",()=>{if(!this.state.isleFile)return this.props.addNotification({message:this.props.t("source-file-error"),level:"error"});clipboard_copy_default()(this.state.isleFile).then(()=>{this.props.addNotification({message:this.props.t("source-file-copied"),level:"success"})}).catch(err=>{this.props.addNotification({message:err.message,level:"error"})})}),lesson_publicField(this,"copyIncludeToClipboard",()=>{clipboard_copy_default()(`<!-- #include "${this.props.url}" -->`).then(()=>{this.props.addNotification({message:this.props.t("include-copied"),level:"success"})}).catch(err=>{this.props.addNotification({message:err.message,level:"error"})})}),lesson_publicField(this,"openLesson",()=>{window.open(this.props.url,"_blank").focus()}),this.state={isleFile:null}}renderButtonToolbarDate(){if(!this.props.updatedAt)return null;let date=null,updated=null;this.props.updatedAt&&(updated=new Date(this.props.updatedAt),updated=updated.toLocaleDateString(),this.props.createdAt?(date=new Date(this.props.createdAt),date=date.toLocaleDateString()):date=updated);const{t}=this.props;return react.createElement("div",{className:"gallery-upload"},react.createElement(OverlayTrigger_default(),{placement:"bottom",overlay:react.createElement(Tooltip_default(),{id:"toggle_visibility"},t("created-at"))},react.createElement("span",{className:"gallery-uploaded-image"},react.createElement("img",{style:{stroke:"white",fill:"red"},alt:"Upload Time Icon",src:upload}))),react.createElement(OverlayTrigger_default(),{placement:"bottom",overlay:react.createElement(Tooltip_default(),{id:"toggle_visibility"},t("last-updated"),updated)},react.createElement("span",{className:"gallery-uploaded"},date)))}renderButtonToolbar(){const{t}=this.props;return react.createElement("div",{className:"gallery-toolbar"},react.createElement(ButtonToolbar_default(),{size:"sm",style:{marginLeft:-4,marginTop:3}},react.createElement(OverlayTrigger_default(),{placement:"bottom",overlay:react.createElement(Tooltip_default(),{id:"ImportFile"},t("import-tooltip"))},react.createElement(Button_default(),{size:"sm",style:{marginLeft:4,marginRight:4},onClick:this.props.onImport},t("import"))),react.createElement(OverlayTrigger_default(),{placement:"bottom",overlay:react.createElement(Tooltip_default(),{id:"IsleFile"},t("copy-file"))},react.createElement(Button_default(),{"aria-label":t("copy-file"),size:"sm",onFocus:this.getIsleFile,onMouseEnter:this.getIsleFile,onClick:this.copyIsleFileToClipboard},react.createElement("i",{className:"fa fa-clipboard"}))),react.createElement(OverlayTrigger_default(),{placement:"bottom",overlay:react.createElement(Tooltip_default(),{id:"IsleFile"},t("copy-include"))},react.createElement(Button_default(),{"aria-label":t("copy-include"),size:"sm",onClick:this.copyIncludeToClipboard,style:{marginLeft:4}},react.createElement("i",{className:"fa fa-link"}))),this.renderButtonToolbarDate()))}render(){const{t}=this.props;return react.createElement(Card_default(),{className:"gallery-card"},react.createElement(Card_default().Body,null,react.createElement("div",{style:{height:180}},react.createElement("div",{style:{filter:"grayscale(30%)",background:colors.Z[this.props.colorIndex]},className:"hovereffect "},react.createElement("img",{className:"img-responsive",src:bubble,alt:"",style:{width:"100%",height:180,background:colors.Z[this.props.colorIndex]}}),react.createElement("div",{role:"button",className:"overlay",onClick:this.openLesson,onKeyPress:this.openLesson,tabIndex:0},react.createElement("h2",null,this.props.namespace,": ",this.props.title),react.createElement("h3",null,this.props.description),react.createElement("span",{className:"info"},t("open-lesson"))))),this.renderButtonToolbar()))}}Lesson.propTypes={addNotification:prop_types_default().func.isRequired,colorIndex:prop_types_default().number.isRequired,createdAt:prop_types_default().any.isRequired,description:prop_types_default().string.isRequired,getIsleFile:prop_types_default().func.isRequired,namespace:prop_types_default().string.isRequired,onImport:prop_types_default().func.isRequired,title:prop_types_default().string.isRequired,updatedAt:prop_types_default().any.isRequired,url:prop_types_default().string.isRequired};var lesson=(0,commonjs.Zh)(["lesson","common"])(Lesson),styles=__webpack_require__(56045),css_styles=__webpack_require__(16065),gallery_defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,gallery_defNormalProp=(obj,key,value)=>key in obj?gallery_defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value}):obj[key]=value,__spreadValues=(a,b)=>{for(var prop in b||(b={}))__hasOwnProp.call(b,prop)&&gallery_defNormalProp(a,prop,b[prop]);if(__getOwnPropSymbols)for(var prop of __getOwnPropSymbols(b))__propIsEnum.call(b,prop)&&gallery_defNormalProp(a,prop,b[prop]);return a},__spreadProps=(a,b)=>__defProps(a,__getOwnPropDescs(b)),gallery_publicField=(obj,key,value)=>(gallery_defNormalProp(obj,typeof key!="symbol"?key+"":key,value),value);function createLayout(nLessons){let layouts=[];for(let i=0;i<nLessons;i++)layouts[i]={lg:{i:`cell-${i}`,x:i*4%24,y:floor_lib_default()(i/6)*3.72,w:4,h:3.72},md:{i:`cell-${i}`,x:i*4%20,y:floor_lib_default()(i/5)*3.72,w:4,h:3.72},sm:{i:`cell-${i}`,x:i*4%16,y:floor_lib_default()(i/4)*3.72,w:4,h:3.72},xs:{i:`cell-${i}`,x:i*4%12,y:floor_lib_default()(i/3)*3.72,w:4,h:3.72},xxs:{i:`cell-${i}`,x:i*4%8,y:floor_lib_default()(i/2)*3.72,w:4,h:3.72},tiny:{i:`cell-${i}`,x:i*4%4,y:floor_lib_default()(i/1)*3.72,w:4,h:3.72}};return layouts={lg:pluck_lib_default()(layouts,"lg"),md:pluck_lib_default()(layouts,"md"),sm:pluck_lib_default()(layouts,"sm"),xs:pluck_lib_default()(layouts,"xs"),xxs:pluck_lib_default()(layouts,"xxs"),tiny:pluck_lib_default()(layouts,"tiny")},layouts}const ResponsiveReactGridLayout=(0,react_grid_layout.WidthProvider)(react_grid_layout.Responsive),NO_LESSONS_PER_PAGE=100,FULL_LAYOUT=createLayout(NO_LESSONS_PER_PAGE);class Gallery extends react.Component{constructor(props){super(props);gallery_publicField(this,"showImportModal",({title,namespace})=>{this.setState({showImportModal:!0,namespace,title})}),gallery_publicField(this,"closeImportModal",()=>{this.setState({showImportModal:!1})}),this.state={filteredLessons:[],showImportModal:!1,namespace:null,title:null,page:0},props.findPublicLessons()}componentDidUpdate(prevProps){if(this.props.gallery.lessons!==prevProps.gallery.lessons){const lessons=this.props.gallery.lessons||[];let filteredLessons=this.searchLessons(lessons,prevProps.search.phrase);this.setState({filteredLessons})}if(this.props.search.phrase!==prevProps.search.phrase){const lessons=prevProps.gallery.lessons||[];let filteredLessons=this.searchLessons(lessons,this.props.search.phrase);this.setState({filteredLessons})}}searchLessons(lessons,phrase){if(!phrase)return lessons;const filteredLessons=[];if(is_array_lib_default()(lessons))for(let i=0;i<lessons.length;i++)(contains_lib_default()(lowercase_lib_default()(lessons[i].title),phrase)||contains_lib_default()(lowercase_lib_default()(lessons[i].namespace),phrase)||contains_lib_default()(lowercase_lib_default()(lessons[i].description),phrase))&&filteredLessons.push(lessons[i]);return filteredLessons}selectPageLessons(lessons){let out=[];const maxid=min_lib_default()((this.state.page+1)*NO_LESSONS_PER_PAGE,lessons.length);for(let i=this.state.page*NO_LESSONS_PER_PAGE;i<maxid;i++)out.push(lessons[i]);return out}renderImportModal(){return this.state.showImportModal?react.createElement(import_modal,{namespace:this.state.namespace,title:this.state.title,show:this.state.showImportModal,close:this.closeImportModal,userNamespaces:this.props.user.ownedNamespaces,copyLesson:this.props.copyLesson,openedNamespace:this.props.openedNamespace,t:this.props.t}):null}renderPagination(){const nPages=ceil_lib_default()(this.state.filteredLessons.length/NO_LESSONS_PER_PAGE),pages=[];for(let i=0;i<nPages;i++)pages.push(react.createElement(Pagination_default().Item,{key:i,active:i===this.state.page,onClick:()=>{this.setState({page:i})}},i+1));return react.createElement(Pagination_default(),{className:"gallery-pagination",size:"small"},pages)}render(){const{t}=this.props;let lessons=this.state.filteredLessons;if(!is_array_lib_default()(lessons)||lessons.length===0)return react.createElement("div",{className:"jumbotron gallery-jumbotron"},react.createElement("h1",null,t("no-lessons-title")),react.createElement("p",null,t("no-lessons-description")));lessons=this.selectPageLessons(lessons);const layouts=lessons.length===NO_LESSONS_PER_PAGE?FULL_LAYOUT:createLayout(lessons.length);return(0,sort_lessons.Z)(lessons,this.props.search),react.createElement(react.Fragment,null,this.renderPagination(),react.createElement("div",{className:"gallery"},react.createElement(ResponsiveReactGridLayout,{layouts,breakpoints:{lg:1800,md:1550,sm:1200,xs:900,xxs:400,tiny:0},cols:{lg:24,md:20,sm:16,xs:12,xxs:8,tiny:4},containerPadding:[10,10],isResizable:!1,isDraggable:!1,rowHeight:60},lessons.map((e,i)=>react.createElement("div",{key:`cell-${i}`},react.createElement(lesson,__spreadProps(__spreadValues({},lessons[i]),{getIsleFile:this.props.getIsleFile,addNotification:this.props.addNotification,openedNamespace:this.props.openedNamespace,key:i,onImport:()=>{this.showImportModal({title:lessons[i].title,namespace:lessons[i].namespace})}}))))),this.renderImportModal()))}}Gallery.propTypes={addNotification:prop_types_default().func.isRequired,copyLesson:prop_types_default().func.isRequired,findPublicLessons:prop_types_default().func.isRequired,gallery:prop_types_default().object.isRequired,getIsleFile:prop_types_default().func.isRequired,openedNamespace:prop_types_default().object.isRequired,search:prop_types_default().object.isRequired,user:prop_types_default().object.isRequired};var gallery=(0,commonjs.Zh)(["gallery","common"])(Gallery),actions_lesson=__webpack_require__(36189),notification=__webpack_require__(16120);function mapStateToProps(state){return{search:state.search,user:state.user,openedNamespace:state.namespace,gallery:state.gallery}}function mapDispatchToProps(dispatch){return{addNotification:(0,notification.pP)(dispatch),copyLesson:(0,actions_lesson.Vo)(dispatch),findPublicLessons:(0,actions_lesson.h7)(dispatch),getIsleFile:(0,actions_lesson.OD)(dispatch)}}var visible_gallery=(0,lib.connect)(mapStateToProps,mapDispatchToProps)(gallery)},56335:function(__unused_webpack_module,__webpack_exports__){const OPTS={numeric:!0};function sortLessons(lessons,search){const{type,direction}=search;type==="sequentially"?direction==="ascending"?lessons.sort((a,b)=>a.pos-b.pos):lessons.sort((a,b)=>b.pos-a.pos):type==="alphabetically"?direction==="ascending"?lessons.sort((a,b)=>{const x=a.namespace+a.title,y=b.namespace+b.title;return x.localeCompare(y,void 0,OPTS)}):lessons.sort((a,b)=>{const x=a.namespace+a.title;return(b.namespace+b.title).localeCompare(x,void 0,OPTS)}):type==="created_at"?direction==="ascending"?lessons.sort((a,b)=>a.createdAt.localeCompare(b.createdAt,void 0,OPTS)):lessons.sort((a,b)=>b.createdAt.localeCompare(a.createdAt,void 0,OPTS)):type==="updated_at"&&(direction==="ascending"?lessons.sort((a,b)=>a.updatedAt.localeCompare(b.updatedAt,void 0,OPTS)):lessons.sort((a,b)=>b.updatedAt.localeCompare(a.updatedAt,void 0,OPTS)))}__webpack_exports__.Z=sortLessons},64731:function(){},34231:function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/4fb5572720134983dbb4.svg"},38088:function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/7adf28c00794d3514992.jpg"}}]);

//# sourceMappingURL=7562.80a39771.chunk.js.map