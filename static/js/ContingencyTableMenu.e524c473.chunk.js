"use strict";(self.webpackChunkisle_dashboard=self.webpackChunkisle_dashboard||[]).push([[705,459],{13616:function(e,t,n){n.r(t);var l=n(38603),a=n(91532),o=n.n(a),s=n(38564),r=n.n(s),i=n(93918),u=n(89956),c=n(38408),p=n(3021),d=n(28564),m=n(96597),b=n(2443),g=n(80595);const f=r()("isle:data-explorer:contingency-table");class y extends l.Component{constructor(e){super(e),this.state={relativeFreqs:!1,rowVar:e.defaultRowVar||e.variables[0],colVar:e.defaultColVar||e.variables[1],group:null,nDecimalPlaces:3,variables:e.variables,display:[]}}static getDerivedStateFromProps(e,t){return e.variables.length!==t.variables.length?(f("Available variables have changed..."),{rowVar:e.defaultRowVar||e.variables[0],colVar:e.defaultColVar||e.variables[1],variables:e.variables}):null}generateContingencyTable(){const{rowVar:e,colVar:t,group:n,relativeFreqs:a,nDecimalPlaces:o,display:s}=this.state;if(!e||!t)return this.props.session.addNotification({title:this.props.t("select-variables"),message:this.props.t("select-row-and-column-variable"),level:"warning",position:"tr"});const r=l.createElement(m.Z,{rowVar:e,colVar:t,group:n,relativeFreqs:a,nDecimalPlaces:o,display:s,data:this.props.data});this.props.logAction(b.lS,{rowVar:e,colVar:t,group:n,relativeFreqs:a,display:s}),this.props.onCreated(r)}render(){const{variables:e,groupingVariables:t,t:n}=this.props;return l.createElement(u.Z,null,l.createElement(u.Z.Header,{as:"h4"},n("Contingency Table"),l.createElement(g.Z,{title:n("Contingency Table"),content:n("Contingency Table-description")})),l.createElement(u.Z.Body,null,l.createElement(p.Z,{legend:n("row-variable"),defaultValue:this.state.rowVar,options:e,onChange:e=>{this.setState({rowVar:e})}}),l.createElement(p.Z,{legend:n("column-variable"),defaultValue:this.state.colVar,options:e,onChange:e=>{this.setState({colVar:e})}}),l.createElement(p.Z,{legend:n("group-by"),options:t,clearable:!0,menuPlacement:"top",onChange:e=>{this.setState({group:e})},tooltip:n("contingency-table-group-tooltip")}),l.createElement(c.Z,{legend:n("relative-frequency"),defaultValue:!1,onChange:()=>{this.setState({relativeFreqs:!this.state.relativeFreqs})}}),l.createElement(p.Z,{legend:n("display"),options:["Row Percent","Column Percent"],multi:!0,onChange:e=>{this.setState({display:e||[]})}}),this.state.relativeFreqs||this.state.display.length>0?l.createElement("p",null,n("report-relative-frequencies"),l.createElement(d.Z,{inline:!0,width:50,max:16,min:0,defaultValue:this.state.nDecimalPlaces,onChange:e=>{this.setState({nDecimalPlaces:e})}}),n("decimal-places")):null,l.createElement(i.Z,{variant:"primary",block:!0,onClick:this.generateContingencyTable.bind(this)},n("generate"))))}}y.defaultProps={defaultRowVar:null,defaultColVar:null,groupingVariables:null,logAction(){}},y.propTypes={data:o().object.isRequired,defaultColVar:o().string,defaultRowVar:o().string,groupingVariables:o().array,logAction:o().func,onCreated:o().func.isRequired,session:o().object.isRequired,variables:o().array.isRequired},t.default=y},80595:function(e,t,n){var l=n(38603),a=n(91532),o=n.n(a),s=n(93918),r=n(58479),i=n(49628),u=n(3569),c=n(54849);const p=e=>{const t=l.createElement(r.Z,{id:"popover-positioned-right"},l.createElement(i.Z,null,e.title),l.createElement(u.Z,null,e.content));return l.createElement(c.Z,{trigger:["click","hover","focus"],placement:"left",rootClose:!0,overlay:t},l.createElement(s.Z,{size:"sm",variant:"outline-secondary",className:"question-button"},l.createElement("div",{className:"fa fa-question"})))};p.propTypes={content:o().oneOfType([o().string,o().node]).isRequired,title:o().string.isRequired},t.Z=p},38408:function(e,t,n){n.d(t,{Z:function(){return d}});var l=n(38603),a=n(91532),o=n.n(a),s=n(4593),r=n.n(s),i=n(94123),u=n(26516);const c=(0,n(61202).Z)("checkbox-input"),p=e=>{const{bind:t,defaultValue:a,disabled:o,onChange:s}=e,p=(0,l.useRef)(e.id||c(e)),d=(0,l.useContext)(u.Z),[m,b]=(0,l.useState)(t&&d.state?d.state[t]:a);(0,l.useEffect)((()=>{b(a)}),[a]),(0,l.useEffect)((()=>{t&&b(n.g.lesson.state[t])}),[t]),(0,l.useEffect)((()=>{if(t){let e=n.g.lesson.state[t];e!==m&&b(e)}}),[t,m]);const g=(0,l.useCallback)((e=>{b(e),t&&n.g.lesson.setState({[t]:e})}),[t]),f=(0,l.useCallback)((e=>{const t=e.target.checked;s(t),g(t)}),[s,g]),y=()=>{const t=null!==e.value?!e.value:!m;s(t),g(t)},h=l.createElement("input",{className:"checkbox-input",type:"checkbox",checked:null!==e.value?e.value:m,value:"checkbox",onChange:f,disabled:o,"aria-label":e.tooltip});if(!0===e.inline)return l.createElement(i.Z,{tooltip:e.tooltip,placement:e.tooltipPlacement},l.createElement("span",{id:p.current,style:{marginLeft:"8px",...e.style}},h,l.createElement("span",{role:"button",tabIndex:0,className:"checkbox-legend",style:{color:o?"darkgray":null},onClick:y,onKeyPress:y},e.legend)));const v=o?r():y;return l.createElement(i.Z,{tooltip:e.tooltip,placement:e.tooltipPlacement},l.createElement("div",{id:p.current,className:"input checkbox-input-div",style:e.style},h,l.createElement("span",{role:"button",tabIndex:0,className:"checkbox-legend",style:{color:o?"darkgray":null},onClick:v,onKeyPress:v},e.legend)))};p.defaultProps={bind:"",onChange(){},defaultValue:!1,value:null,disabled:!1,inline:!1,legend:"",tooltip:"",tooltipPlacement:"right",style:{}},p.propTypes={bind:o().string,defaultValue:o().bool,value:o().bool,disabled:o().bool,inline:o().bool,onChange:o().func,legend:o().oneOfType([o().string,o().node]),tooltip:o().string,tooltipPlacement:o().oneOf(["left","top","right","bottom"]),style:o().object};var d=p},28564:function(e,t,n){n.d(t,{Z:function(){return K}});var l=n(38603),a=n(91532),o=n.n(a),s=n(38564),r=n.n(s),i=n(52458),u=n(89506),c=n.n(u),p=n(4286),d=n.n(p),m=n(24500),b=n(17218),g=n.n(b),f=n(42415),y=n(88928),h=n.n(y),v=n(24469),E=n.n(v),C=n(94123),V=n(26516),x=n(61202);var w=function({min:e,max:t,step:n,t:l}){let a=`${l("enter")} ${l(1===n?"integer":"number")} `;return t!==h()&&e!==E()?a+=`${l("between")} ${e} ${l("and")} ${t}`:e!==E()?a+=`${l("larger-or-equal-to")} ${e}`:t!==h()&&(a+=`${l("smaller-or-equal-to")} ${t}`),a};const P=r()("isle:number-input"),Z=(0,x.Z)("number-input"),k=e=>{const t=(0,l.useRef)(e.id||Z(e)),{bind:a,defaultValue:o,min:s,max:r,step:u,value:p,onBlur:b,onChange:y}=e,{t:h}=(0,i.$)("input"),v=(0,l.useContext)(V.Z),[E,x]=(0,l.useState)(p||(a&&v.state?v.state[a]:o));(0,l.useEffect)((()=>{if(a){const e=n.g.lesson.state[a];e!==E&&(0,f.isPrimitive)(E)&&x(e)}}),[a,E]),(0,l.useEffect)((()=>{x(o)}),[o]),(0,l.useEffect)((()=>{a&&x(n.g.lesson.state[a])}),[a]);const k=(0,l.useCallback)((e=>{P("Handle change of input field...");let t=e.target.validity.valid,l=e.target.value;x(l),p||t&&""!==l&&"-"!==l&&"."!==l&&"-."!==l?(l=parseFloat(l),d()(l)&&(l=""),y(l),a&&n.g.lesson.setState({[a]:l})):a&&n.g.lesson.setState({[a]:l})}),[a,p,y]),K=(0,l.useCallback)((e=>{P("Finished change...");let t=e.target.value;if(c()(t,"/")){P("Encountered a fraction...");const e=t.split("/");""!==e[0]&&""!==e[1]&&(t=parseFloat(e[0])/parseFloat(e[1]))}d()(t)?t="":""!==t&&"-"!==t&&"."!==t&&"-."!==t&&(t=parseFloat(t)),t>r?t=r:t<s?t=s:1===u&&""!==t&&"-"!==t&&"."!==t&&"-."!==t&&(t-=t%u),y(t),b(t),t!==E&&(x(t),a&&n.g.lesson.setState({[a]:t}))}),[a,s,r,u,E,b,y]),q=g()(e.tooltip)?w({min:s,max:r,step:u,t:h}):e.tooltip;if(!0===e.inline){const n=l.createElement("span",{className:"input",style:{padding:"5px",...e.style}},e.legend?l.createElement("label",{htmlFor:t.current}," ",e.legend," =  "):null,l.createElement("input",{id:t.current,type:e.numbersOnly?"number":"text",name:"input",className:"number-number-input",disabled:e.disabled,value:null!==p?p:E,step:e.step,min:e.min,max:e.max,style:{width:"80px",paddingLeft:"6px",marginLeft:"3px",...e.inputStyle},onChange:k,onBlur:K,onKeyPress:e.onKeyPress,onKeyDown:e.onKeyDown,onKeyUp:e.onKeyUp,autoComplete:"off"}),e.description?l.createElement("span",null,"(",e.description,")"):l.createElement("span",null));return e.disabled?n:l.createElement(C.Z,{id:"number-input-tooltip-inline",placement:"top",show:!e.disabled,tooltip:q},n)}const S=l.createElement("input",{id:t.current,type:e.numbersOnly?"number":"text",name:"input",className:"number-number-input",disabled:e.disabled,value:null!==p?p:E,step:e.step,min:e.min,max:e.max,style:{width:"80px",marginLeft:"24px",...e.inputStyle},onChange:k,onBlur:K,onKeyPress:e.onKeyPress,onKeyDown:e.onKeyDown,onKeyUp:e.onKeyUp,autoComplete:"off"});return l.createElement("div",{className:"input",style:{marginBottom:"4px",marginTop:"4px",...e.style}},e.legend?l.createElement("span",null,l.createElement("label",{htmlFor:t.current},(0,m.isPrimitive)(e.legend)?e.legend+":":e.legend),e.description?l.createElement("span",null," ",e.description):null):null,l.createElement(C.Z,{id:"number-input-tooltip",placement:e.tooltipPlacement,tooltip:q,show:!e.disabled},l.createElement("span",{className:"number-input-span"},S)))};k.defaultProps={bind:"",disabled:!1,legend:null,min:E(),max:h(),step:1,defaultValue:0,onBlur(){},onChange(){},onKeyDown(){},onKeyPress(){},onKeyUp(){},inline:!1,numbersOnly:!0,style:{},inputStyle:{},value:null,tooltip:null,tooltipPlacement:"left"},k.propTypes={bind:o().string,defaultValue:o().number,disabled:o().bool,inline:o().bool,legend:o().oneOfType([o().string,o().node]),max:o().number,min:o().number,numbersOnly:o().bool,onBlur:o().func,onChange:o().func,onKeyDown:o().func,onKeyPress:o().func,onKeyUp:o().func,step:o().oneOfType([o().number,o().string]),style:o().object,inputStyle:o().object,value:o().number,tooltip:o().string,tooltipPlacement:o().oneOf(["top","right","bottom","left"])};var K=k}}]);
//# sourceMappingURL=ContingencyTableMenu.e524c473.chunk.js.map