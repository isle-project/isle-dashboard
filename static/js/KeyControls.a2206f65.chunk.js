"use strict";(self.webpackChunkisle_dashboard=self.webpackChunkisle_dashboard||[]).push([[7659],{29325:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(45254),react_dom__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(84167),prop_types__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(45697),prop_types__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_8__),debug__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(14946),debug__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(debug__WEBPACK_IMPORTED_MODULE_2__),_stdlib_utils_keys__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(25351),_stdlib_utils_keys__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_stdlib_utils_keys__WEBPACK_IMPORTED_MODULE_3__),_stdlib_string_lowercase__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(86361),_stdlib_string_lowercase__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_stdlib_string_lowercase__WEBPACK_IMPORTED_MODULE_4__),_stdlib_assert_is_function__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(5726),_stdlib_assert_is_function__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(_stdlib_assert_is_function__WEBPACK_IMPORTED_MODULE_5__),_stdlib_assert_is_string__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(99301),_stdlib_assert_is_string__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(_stdlib_assert_is_string__WEBPACK_IMPORTED_MODULE_6__),_isle_project_session_context_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(32283),__defProp=Object.defineProperty,__defNormalProp=(obj,key,value)=>key in obj?__defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value}):obj[key]=value,__publicField=(obj,key,value)=>(__defNormalProp(obj,typeof key!="symbol"?key+"":key,value),value);const debug=debug__WEBPACK_IMPORTED_MODULE_2___default()("isle:key-controls"),RE_ALPHABETIC=/^[a-z]$/i,INPUTS=["input","textarea"];class KeyControls extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),__publicField(this,"addListeners",()=>{const keys=_stdlib_utils_keys__WEBPACK_IMPORTED_MODULE_3___default()(this.props.actions);if(debug(`Add keydown event listeners for ${this.props.container?"container":"document"}: ${keys.join(", ")}`),this.props.container)try{let node;(0,_stdlib_assert_is_string__WEBPACK_IMPORTED_MODULE_6__.isPrimitive)(this.props.container)?node=document.querySelector(this.props.container):node=react_dom__WEBPACK_IMPORTED_MODULE_1__.findDOMNode(this.props.container),node.addEventListener("keydown",this.triggerEvent)}catch(err){debug(err.message)}else document.addEventListener("keydown",this.triggerDocEvent)}),__publicField(this,"removeListeners",container=>{const keys=_stdlib_utils_keys__WEBPACK_IMPORTED_MODULE_3___default()(this.props.actions);if(debug(`Remove keydown event listeners for ${container?"container":"document"}: ${keys.join(", ")}`),container)try{let node;(0,_stdlib_assert_is_string__WEBPACK_IMPORTED_MODULE_6__.isPrimitive)(this.props.container)?node=document.querySelector(this.props.container):node=react_dom__WEBPACK_IMPORTED_MODULE_1__.findDOMNode(this.props.container),node.removeEventListener("keydown",this.triggerEvent)}catch(err){debug(err.message)}document.removeEventListener("keydown",this.triggerDocEvent)}),__publicField(this,"triggerEvent",event=>{let keyName=event.key;debug(`Received key press for container: ${keyName}`);let modifiers="";event.ctrlKey&&(modifiers+="ctrl+"),event.shiftKey&&(keyName=_stdlib_string_lowercase__WEBPACK_IMPORTED_MODULE_4___default()(keyName),modifiers+="shift+"),event.altKey&&(modifiers+="alt+"),event.metaKey&&(modifiers+="meta+");const fn=this.props.actions[modifiers+keyName];if(document.activeElement===this.props.container&&_stdlib_assert_is_function__WEBPACK_IMPORTED_MODULE_5___default()(fn)){if(!modifiers&&RE_ALPHABETIC.test(keyName)&&document.activeElement!==document.body){const el=document.activeElement;if(el&&(INPUTS.indexOf(el.tagName.toLowerCase())!==-1||el.isContentEditable)||el.tagName==="CANVAS")return}event.preventDefault(),event.stopPropagation(),fn(event)}}),__publicField(this,"triggerDocEvent",event=>{let keyName=event.key;debug(`Received key press for document: ${keyName}`);let modifiers="";event.ctrlKey&&(modifiers+="ctrl+"),event.shiftKey&&(keyName=_stdlib_string_lowercase__WEBPACK_IMPORTED_MODULE_4___default()(keyName),modifiers+="shift+"),event.altKey&&(modifiers+="alt+"),event.metaKey&&(modifiers+="meta+");const fn=this.props.actions[modifiers+keyName];if(_stdlib_assert_is_function__WEBPACK_IMPORTED_MODULE_5___default()(fn)){if(!modifiers&&RE_ALPHABETIC.test(keyName)&&document.activeElement!==document.body){const el=document.activeElement;if(el&&(INPUTS.indexOf(el.tagName.toLowerCase())!==-1||el.isContentEditable)||el.tagName==="CANVAS")return}event.preventDefault(),event.stopPropagation(),fn(event)}})}componentDidMount(){debug("Component has mounted..."),this.addListeners()}componentDidUpdate(prevProps){this.props.container!==prevProps.container&&(debug("Container has changed, re-attach event listeners..."),this.removeListeners(prevProps.container),this.addListeners())}componentWillUnmount(){debug("Component has unmounted..."),this.removeListeners()}render(){return null}}KeyControls.defaultProps={actions:{},container:null},KeyControls.propTypes={actions:prop_types__WEBPACK_IMPORTED_MODULE_8___default().objectOf(prop_types__WEBPACK_IMPORTED_MODULE_8___default().func),container:prop_types__WEBPACK_IMPORTED_MODULE_8___default().oneOfType([prop_types__WEBPACK_IMPORTED_MODULE_8___default().object,prop_types__WEBPACK_IMPORTED_MODULE_8___default().element,prop_types__WEBPACK_IMPORTED_MODULE_8___default().string])},KeyControls.contextType=_isle_project_session_context_js__WEBPACK_IMPORTED_MODULE_7__.Z,__webpack_exports__.default=KeyControls}}]);

//# sourceMappingURL=KeyControls.a2206f65.chunk.js.map