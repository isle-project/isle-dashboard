{"version":3,"sources":["constants/colors.js","components/gallery/import_modal.js","components/gallery/lesson.js","components/gallery/index.js","containers/visible-gallery/index.js","utils/sort_lessons.js"],"names":[],"mappings":"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","file":"static/js/1506.f154c7f0.chunk.js","sourcesContent":["/**\r\n* Copyright (C) 2016-present The ISLE Authors\r\n*\r\n* The isle-dashboard program is free software: you can redistribute it and/or modify\r\n* it under the terms of the GNU Affero General Public License as\r\n* published by the Free Software Foundation, either version 3 of the\r\n* License, or (at your option) any later version.\r\n*\r\n* This program is distributed in the hope that it will be useful,\r\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n* GNU Affero General Public License for more details.\r\n*\r\n* You should have received a copy of the GNU Affero General Public License\r\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\r\n*/\r\n\r\n// MAIN //\r\n\r\nconst COLORS = [\r\n\t'#1f77b4',\r\n\t'#ff7f0e',\r\n\t'#2ca02c',\r\n\t'#d62728',\r\n\t'#9467bd',\r\n\t'#8c564b',\r\n\t'#c49c94',\r\n\t'#e377c2',\r\n\t'#17becf',\r\n\t'#aec7e8',\r\n\t'#ffbb78',\r\n\t'#ff9896',\r\n\t'#98df8a',\r\n\t'#7f7f7f',\r\n\t'#c5b0d5',\r\n\t'#f7b6d2',\r\n\t'#bcbd22',\r\n\t'#c7c7c7',\r\n\t'#dbdb8d',\r\n\t'#9edae5'\r\n];\r\n\r\n\r\n// EXPORTS //\r\n\r\nexport default COLORS;\r\n","/**\r\n* Copyright (C) 2016-present The ISLE Authors\r\n*\r\n* The isle-dashboard program is free software: you can redistribute it and/or modify\r\n* it under the terms of the GNU Affero General Public License as\r\n* published by the Free Software Foundation, either version 3 of the\r\n* License, or (at your option) any later version.\r\n*\r\n* This program is distributed in the hope that it will be useful,\r\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n* GNU Affero General Public License for more details.\r\n*\r\n* You should have received a copy of the GNU Affero General Public License\r\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\r\n*/\r\n\r\n// MODULES //\r\n\r\nimport React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Button from 'react-bootstrap/Button';\r\nimport FormLabel from 'react-bootstrap/FormLabel';\r\nimport FormControl from 'react-bootstrap/FormControl';\r\nimport FormGroup from 'react-bootstrap/FormGroup';\r\nimport Modal from 'react-bootstrap/Modal';\r\nimport SelectInput from 'react-select';\r\nimport isArray from '@stdlib/assert/is-array';\r\n\r\n\r\n// MAIN //\r\n\r\nclass ImportModal extends Component {\r\n\tconstructor( props ) {\r\n\t\tsuper( props );\r\n\r\n\t\tconst ns = props.userNamespaces;\r\n\t\tlet selected;\r\n\t\tif ( props.openedNamespace.title ) {\r\n\t\t\tselected = props.openedNamespace.title;\r\n\t\t} else {\r\n\t\t\tselected = ( isArray( ns ) && ns.length > 0 ) ?\r\n\t\t\t\tns[ 0 ].title :\r\n\t\t\t\tnull;\r\n\t\t}\r\n\t\tif ( selected ) {\r\n\t\t\tselected = { label: selected, value: selected };\r\n\t\t}\r\n\t\tthis.state = {\r\n\t\t\tselected: selected,\r\n\t\t\ttargetName: props.title\r\n\t\t};\r\n\t}\r\n\r\n\thandleChange = ( event ) => {\r\n\t\tconst target = event.target;\r\n\t\tconst value = target.value;\r\n\t\tconst name = target.name;\r\n\t\tthis.setState({\r\n\t\t\t[ name ]: value\r\n\t\t});\r\n\t};\r\n\r\n\thandleImport = () => {\r\n\t\tthis.props.copyLesson({\r\n\t\t\tsourceName: this.props.title,\r\n\t\t\tsource: this.props.namespace,\r\n\t\t\ttarget: this.state.selected.value,\r\n\t\t\ttargetName: this.state.targetName\r\n\t\t});\r\n\t\tthis.props.close();\r\n\t};\r\n\r\n\thandleCourseChange = ( newValue ) => {\r\n\t\tthis.setState({\r\n\t\t\tselected: newValue\r\n\t\t});\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst { t } = this.props;\r\n\t\treturn (\r\n\t\t\t<Modal show={this.props.show} onHide={this.props.close}>\r\n\t\t\t\t<Modal.Header>\r\n\t\t\t\t\t<Modal.Title>\r\n\t\t\t\t\t\t{t('import-lesson')}<span style={{ color: 'darkred' }}>{this.props.namespace}: {this.props.title}</span>\r\n\t\t\t\t\t</Modal.Title>\r\n\t\t\t\t</Modal.Header>\r\n\t\t\t\t<Modal.Body className=\"d-grid gap-2\">\r\n\t\t\t\t\t<p>{t('import-lesson-description')}</p>\r\n\t\t\t\t\t<FormGroup>\r\n\t\t\t\t\t\t<FormLabel>{t('select-course')}</FormLabel>\r\n\t\t\t\t\t\t<SelectInput\r\n\t\t\t\t\t\t\toptions={this.props.userNamespaces.map( ns => {\r\n\t\t\t\t\t\t\t\treturn { value: ns.title, label: ns.title };\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\tonChange={this.handleCourseChange}\r\n\t\t\t\t\t\t\tvalue={this.state.selected}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</FormGroup>\r\n\t\t\t\t\t<FormGroup>\r\n\t\t\t\t\t\t<FormLabel>{t('lesson-name')}</FormLabel>\r\n\t\t\t\t\t\t<FormControl\r\n\t\t\t\t\t\t\tname=\"targetName\"\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tvalue={this.state.targetName}\r\n\t\t\t\t\t\t\tonChange={this.handleChange}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</FormGroup>\r\n\t\t\t\t</Modal.Body>\r\n\t\t\t\t<Modal.Footer>\r\n\t\t\t\t\t<Button onClick={this.props.close}>{t('common:cancel')}</Button>\r\n\t\t\t\t\t<Button variant=\"success\" onClick={this.handleImport} >{t('import')}</Button>\r\n\t\t\t\t</Modal.Footer>\r\n\t\t\t</Modal>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n\r\n// PROPERTIES //\r\n\r\nImportModal.propTypes = {\r\n\tclose: PropTypes.func.isRequired,\r\n\tcopyLesson: PropTypes.func.isRequired,\r\n\tnamespace: PropTypes.string.isRequired,\r\n\topenedNamespace: PropTypes.object.isRequired,\r\n\tshow: PropTypes.bool.isRequired,\r\n\tt: PropTypes.func.isRequired,\r\n\ttitle: PropTypes.string.isRequired,\r\n\tuserNamespaces: PropTypes.array.isRequired\r\n};\r\n\r\n\r\n// EXPORTS //\r\n\r\nexport default ImportModal;\r\n","/**\r\n* Copyright (C) 2016-present The ISLE Authors\r\n*\r\n* The isle-dashboard program is free software: you can redistribute it and/or modify\r\n* it under the terms of the GNU Affero General Public License as\r\n* published by the Free Software Foundation, either version 3 of the\r\n* License, or (at your option) any later version.\r\n*\r\n* This program is distributed in the hope that it will be useful,\r\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n* GNU Affero General Public License for more details.\r\n*\r\n* You should have received a copy of the GNU Affero General Public License\r\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\r\n*/\r\n\r\n// MODULES //\r\n\r\nimport React, { Component } from 'react';\r\nimport { withTranslation } from 'react-i18next';\r\nimport ButtonToolbar from 'react-bootstrap/ButtonToolbar';\r\nimport Button from 'react-bootstrap/Button';\r\nimport Card from 'react-bootstrap/Card';\r\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\r\nimport Tooltip from 'react-bootstrap/Tooltip';\r\nimport PropTypes from 'prop-types';\r\nimport logger from 'debug';\r\nimport 'css/image.css';\r\nimport COLORS from 'constants/colors';\r\nimport copyToClipboard from 'clipboard-copy';\r\nimport background from './bubble.jpg';\r\nimport upload from './upload.svg';\r\n\r\n\r\n// VARIABLES //\r\n\r\nconst debug = logger( 'isle:gallery:lesson' );\r\n\r\n\r\n// MAIN //\r\n\r\nclass Lesson extends Component {\r\n\tconstructor( props ) {\r\n\t\tsuper( props );\r\n\r\n\t\tthis.state = {\r\n\t\t\tisleFile: null\r\n\t\t};\r\n\t}\r\n\r\n\tgetIsleFile = async () => {\r\n\t\tdebug( 'Request ISLE source code from server...' );\r\n\t\tif ( !this.state.isleFile ) {\r\n\t\t\tconst data = await this.props.getIsleFile({\r\n\t\t\t\tlessonName: this.props.title,\r\n\t\t\t\tnamespaceName: this.props.namespace\r\n\t\t\t});\r\n\t\t\tif ( data ) {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tisleFile: data\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tcopyIsleFileToClipboard = () => {\r\n\t\tif ( !this.state.isleFile ) {\r\n\t\t\treturn this.props.addNotification({\r\n\t\t\t\tmessage: this.props.t('source-file-error'),\r\n\t\t\t\tlevel: 'error'\r\n\t\t\t});\r\n\t\t}\r\n\t\tconst promise = copyToClipboard( this.state.isleFile );\r\n\t\tpromise.then( () => {\r\n\t\t\tthis.props.addNotification({\r\n\t\t\t\tmessage: this.props.t('source-file-copied'),\r\n\t\t\t\tlevel: 'success'\r\n\t\t\t});\r\n\t\t}).catch( err => {\r\n\t\t\tthis.props.addNotification({\r\n\t\t\t\tmessage: err.message,\r\n\t\t\t\tlevel: 'error'\r\n\t\t\t});\r\n\t\t});\r\n\t};\r\n\r\n\tcopyIncludeToClipboard = () => {\r\n\t\tconst promise = copyToClipboard( `<!-- #include \"${this.props.url}\" -->` );\r\n\t\tpromise.then( () => {\r\n\t\t\tthis.props.addNotification({\r\n\t\t\t\tmessage: this.props.t('include-copied'),\r\n\t\t\t\tlevel: 'success'\r\n\t\t\t});\r\n\t\t}).catch( err => {\r\n\t\t\tthis.props.addNotification({\r\n\t\t\t\tmessage: err.message,\r\n\t\t\t\tlevel: 'error'\r\n\t\t\t});\r\n\t\t});\r\n\t};\r\n\r\n\topenLesson = () => {\r\n\t\tconst win = window.open( this.props.url, '_blank' );\r\n\t\twin.focus();\r\n\t};\r\n\r\n\trenderButtonToolbarDate() {\r\n\t\tif ( !this.props.updatedAt ) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tlet date = null;\r\n\t\tlet updated = null;\r\n\t\tif ( this.props.updatedAt ) {\r\n\t\t\tupdated = new Date( this.props.updatedAt );\r\n\t\t\tupdated = updated.toLocaleDateString();\r\n\t\t\tif ( this.props.createdAt ) {\r\n\t\t\t\tdate = new Date( this.props.createdAt );\r\n\t\t\t\tdate = date.toLocaleDateString();\r\n\t\t\t} else {\r\n\t\t\t\tdate = updated;\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst { t } = this.props;\r\n\t\treturn (\r\n\t\t\t<div className=\"gallery-upload\">\r\n\t\t\t\t<OverlayTrigger placement=\"bottom\" overlay={<Tooltip id=\"toggle_visibility\">{t('created-at')}</Tooltip>}>\r\n\t\t\t\t\t<span className=\"gallery-uploaded-image\"><img style={{ stroke: 'white', fill: 'red' }} alt=\"Upload Time Icon\" src={upload} /></span>\r\n\t\t\t\t</OverlayTrigger>\r\n\t\t\t\t<OverlayTrigger placement=\"bottom\" overlay={<Tooltip id=\"toggle_visibility\">{t('last-updated')}{updated}</Tooltip>}>\r\n\t\t\t\t\t<span className=\"gallery-uploaded\">{date}</span>\r\n\t\t\t\t</OverlayTrigger>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\trenderButtonToolbar() {\r\n\t\tconst { t } = this.props;\r\n\t\treturn ( <div className=\"gallery-toolbar\">\r\n\t\t\t<ButtonToolbar size=\"sm\" style={{ marginLeft: -4, marginTop: 3 }}>\r\n\t\t\t\t<OverlayTrigger placement=\"bottom\" overlay={<Tooltip id=\"ImportFile\">{t('import-tooltip')}</Tooltip>}>\r\n\t\t\t\t\t<Button size=\"sm\" style={{ marginLeft: 4, marginRight: 4 }} onClick={this.props.onImport}>\r\n\t\t\t\t\t\t{t('import')}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</OverlayTrigger>\r\n\t\t\t\t<OverlayTrigger placement=\"bottom\" overlay={<Tooltip id=\"IsleFile\">{t('copy-file')}</Tooltip>}>\r\n\t\t\t\t\t<Button aria-label={t('copy-file')} size=\"sm\" onFocus={this.getIsleFile} onMouseEnter={this.getIsleFile} onClick={this.copyIsleFileToClipboard} >\r\n\t\t\t\t\t\t<i className=\"fa fa-clipboard\"></i>\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</OverlayTrigger>\r\n\t\t\t\t<OverlayTrigger placement=\"bottom\" overlay={<Tooltip id=\"IsleFile\">{t('copy-include')}</Tooltip>}>\r\n\t\t\t\t\t<Button aria-label={t('copy-include')} size=\"sm\" onClick={this.copyIncludeToClipboard} style={{ marginLeft: 4 }} >\r\n\t\t\t\t\t\t<i className=\"fa fa-link\"></i>\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</OverlayTrigger>\r\n\t\t\t\t{ this.renderButtonToolbarDate() }\r\n\t\t\t</ButtonToolbar>\r\n\t\t</div> );\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { t } = this.props;\r\n\t\treturn (\r\n\t\t\t<Card className=\"gallery-card\">\r\n\t\t\t\t<Card.Body>\r\n\t\t\t\t\t<div style={{ height: 180 }} >\r\n\t\t\t\t\t\t<div style={{\r\n\t\t\t\t\t\t\tfilter: 'grayscale(30%)',\r\n\t\t\t\t\t\t\tbackground: COLORS[ this.props.colorIndex ]\r\n\t\t\t\t\t\t}} className=\"hovereffect \">\r\n\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\tclassName=\"img-responsive\"\r\n\t\t\t\t\t\t\t\tsrc={background}\r\n\t\t\t\t\t\t\t\talt=\"\"\r\n\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\twidth: '100%',\r\n\t\t\t\t\t\t\t\t\theight: 180,\r\n\t\t\t\t\t\t\t\t\tbackground: COLORS[ this.props.colorIndex ]\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\trole=\"button\" className=\"overlay\"\r\n\t\t\t\t\t\t\t\tonClick={this.openLesson}\r\n\t\t\t\t\t\t\t\tonKeyPress={this.openLesson}\r\n\t\t\t\t\t\t\t\ttabIndex={0}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<h2>{this.props.namespace}: {this.props.title}</h2>\r\n\t\t\t\t\t\t\t\t<h3>{this.props.description}</h3>\r\n\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\tclassName=\"info\"\r\n\t\t\t\t\t\t\t\t>{t('open-lesson')}</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{this.renderButtonToolbar()}\r\n\t\t\t\t</Card.Body>\r\n\t\t\t</Card>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n\r\n// PROPERTIES//\r\n\r\nLesson.propTypes = {\r\n\taddNotification: PropTypes.func.isRequired,\r\n\tcolorIndex: PropTypes.number.isRequired,\r\n\tcreatedAt: PropTypes.any.isRequired,\r\n\tdescription: PropTypes.string.isRequired,\r\n\tgetIsleFile: PropTypes.func.isRequired,\r\n\tnamespace: PropTypes.string.isRequired,\r\n\tonImport: PropTypes.func.isRequired,\r\n\ttitle: PropTypes.string.isRequired,\r\n\tupdatedAt: PropTypes.any.isRequired,\r\n\turl: PropTypes.string.isRequired\r\n};\r\n\r\n\r\n// EXPORTS //\r\n\r\nexport default withTranslation( [ 'lesson', 'common' ] )( Lesson );\r\n","/**\r\n* Copyright (C) 2016-present The ISLE Authors\r\n*\r\n* The isle-dashboard program is free software: you can redistribute it and/or modify\r\n* it under the terms of the GNU Affero General Public License as\r\n* published by the Free Software Foundation, either version 3 of the\r\n* License, or (at your option) any later version.\r\n*\r\n* This program is distributed in the hope that it will be useful,\r\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n* GNU Affero General Public License for more details.\r\n*\r\n* You should have received a copy of the GNU Affero General Public License\r\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\r\n*/\r\n\r\n// MODULES //\r\n\r\nimport React, { Component, Fragment } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { withTranslation } from 'react-i18next';\r\nimport Pagination from 'react-bootstrap/Pagination';\r\nimport { Responsive, WidthProvider } from 'react-grid-layout';\r\nimport isArray from '@stdlib/assert/is-array';\r\nimport contains from '@stdlib/assert/contains';\r\nimport lowercase from '@stdlib/string/lowercase';\r\nimport pluck from '@stdlib/utils/pluck';\r\nimport min from '@stdlib/math/base/special/min';\r\nimport ceil from '@stdlib/math/base/special/ceil';\r\nimport floor from '@stdlib/math/base/special/floor';\r\nimport sortLessons from 'utils/sort_lessons.js';\r\nimport ImportModal from './import_modal.js';\r\nimport Lesson from './lesson.js';\r\nimport 'react-grid-layout/css/styles.css';\r\nimport 'react-resizable/css/styles.css';\r\nimport 'css/image.css';\r\nimport './gallery.css';\r\n\r\n\r\n// FUNCTIONS //\r\n\r\nfunction createLayout( nLessons ) {\r\n\tconst elemH = 3.72;\r\n\tlet layouts = [];\r\n\tfor ( let i = 0; i < nLessons; i++ ) {\r\n\t\tlayouts[ i ] = {\r\n\t\t\tlg: { i: `cell-${i}`, x: i*4 % 24, y: floor( i / 6 ) * elemH, w: 4, h: elemH },\r\n\t\t\tmd: { i: `cell-${i}`, x: i*4 % 20, y: floor( i / 5 ) * elemH, w: 4, h: elemH },\r\n\t\t\tsm: { i: `cell-${i}`, x: i*4 % 16, y: floor( i / 4 ) * elemH, w: 4, h: elemH },\r\n\t\t\txs: { i: `cell-${i}`, x: i*4 % 12, y: floor( i / 3 ) * elemH, w: 4, h: elemH },\r\n\t\t\txxs: { i: `cell-${i}`, x: i*4 % 8, y: floor( i / 2 ) * elemH, w: 4, h: elemH },\r\n\t\t\ttiny: { i: `cell-${i}`, x: i*4 % 4, y: floor( i / 1 ) * elemH, w: 4, h: elemH }\r\n\t\t};\r\n\t}\r\n\tlayouts = {\r\n\t\tlg: pluck( layouts, 'lg' ),\r\n\t\tmd: pluck( layouts, 'md' ),\r\n\t\tsm: pluck( layouts, 'sm' ),\r\n\t\txs: pluck( layouts, 'xs' ),\r\n\t\txxs: pluck( layouts, 'xxs' ),\r\n\t\ttiny: pluck( layouts, 'tiny' )\r\n\t};\r\n\treturn layouts;\r\n}\r\n\r\n\r\n// VARIABLES //\r\n\r\nconst ResponsiveReactGridLayout = WidthProvider( Responsive );\r\nconst NO_LESSONS_PER_PAGE = 100;\r\nconst FULL_LAYOUT = createLayout( NO_LESSONS_PER_PAGE );\r\n\r\n\r\n// MAIN //\r\n\r\nclass Gallery extends Component {\r\n\tconstructor( props ) {\r\n\t\tsuper( props );\r\n\r\n\t\tthis.state = {\r\n\t\t\tfilteredLessons: [],\r\n\t\t\tshowImportModal: false,\r\n\t\t\tnamespace: null,\r\n\t\t\ttitle: null,\r\n\t\t\tpage: 0\r\n\t\t};\r\n\t\tprops.findPublicLessons();\r\n\t}\r\n\r\n\tcomponentDidUpdate( prevProps ) {\r\n\t\tif (\r\n\t\t\tthis.props.gallery.lessons !== prevProps.gallery.lessons\r\n\t\t) {\r\n\t\t\tconst lessons = this.props.gallery.lessons || [];\r\n\t\t\tlet filteredLessons = this.searchLessons( lessons, prevProps.search.phrase );\r\n\t\t\tthis.setState({\r\n\t\t\t\tfilteredLessons\r\n\t\t\t});\r\n\t\t}\r\n\t\tif (\r\n\t\t\tthis.props.search.phrase !== prevProps.search.phrase\r\n\t\t) {\r\n\t\t\tconst lessons = prevProps.gallery.lessons || [];\r\n\t\t\tlet filteredLessons = this.searchLessons( lessons, this.props.search.phrase );\r\n\t\t\tthis.setState({\r\n\t\t\t\tfilteredLessons\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tshowImportModal = ({ title, namespace }) => {\r\n\t\tthis.setState({\r\n\t\t\tshowImportModal: true,\r\n\t\t\tnamespace,\r\n\t\t\ttitle\r\n\t\t});\r\n\t};\r\n\r\n\tcloseImportModal = () => {\r\n\t\tthis.setState({\r\n\t\t\tshowImportModal: false\r\n\t\t});\r\n\t};\r\n\r\n\tsearchLessons( lessons, phrase ) {\r\n\t\tif ( !phrase ) {\r\n\t\t\treturn lessons;\r\n\t\t}\r\n\t\tconst filteredLessons = [];\r\n\t\tif ( isArray( lessons ) ) {\r\n\t\t\tfor ( let i = 0; i < lessons.length; i++ ) {\r\n\t\t\t\tif (\r\n\t\t\t\t\tcontains( lowercase( lessons[ i ].title ), phrase ) ||\r\n\t\t\t\t\tcontains( lowercase( lessons[ i ].namespace ), phrase ) ||\r\n\t\t\t\t\tcontains( lowercase( lessons[ i ].description ), phrase )\r\n\t\t\t\t) {\r\n\t\t\t\t\tfilteredLessons.push( lessons[ i ] );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn filteredLessons;\r\n\t}\r\n\r\n\tselectPageLessons( lessons ) {\r\n\t\tlet out = [];\r\n\t\tconst maxid = min( ( this.state.page+1 ) * NO_LESSONS_PER_PAGE, lessons.length );\r\n\t\tfor ( let i = this.state.page*NO_LESSONS_PER_PAGE; i < maxid; i++ ) {\r\n\t\t\tout.push( lessons[ i ] );\r\n\t\t}\r\n\t\treturn out;\r\n\t}\r\n\r\n\trenderImportModal() {\r\n\t\tif ( !this.state.showImportModal ) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn ( <ImportModal\r\n\t\t\tnamespace={this.state.namespace}\r\n\t\t\ttitle={this.state.title}\r\n\t\t\tshow={this.state.showImportModal}\r\n\t\t\tclose={this.closeImportModal}\r\n\t\t\tuserNamespaces={this.props.user.ownedNamespaces}\r\n\t\t\tcopyLesson={this.props.copyLesson}\r\n\t\t\topenedNamespace={this.props.openedNamespace}\r\n\t\t\tt={this.props.t}\r\n\t\t/> );\r\n\t}\r\n\r\n\trenderPagination() {\r\n\t\tconst nPages = ceil( this.state.filteredLessons.length / NO_LESSONS_PER_PAGE );\r\n\t\tconst pages = [];\r\n\t\tfor ( let i = 0; i < nPages; i++ ) {\r\n\t\t\tpages.push(\r\n\t\t\t\t<Pagination.Item\r\n\t\t\t\t\tkey={i}\r\n\t\t\t\t\tactive={i === this.state.page}\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\tpage: i\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t{i+1}\r\n\t\t\t\t</Pagination.Item>\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<Pagination className=\"gallery-pagination\" size=\"small\" >\r\n\t\t\t\t{pages}\r\n\t\t\t</Pagination>\r\n\t\t);\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { t } = this.props;\r\n\t\tlet lessons = this.state.filteredLessons;\r\n\t\tif ( !isArray( lessons ) || lessons.length === 0 ) {\r\n\t\t\treturn ( <div className=\"jumbotron gallery-jumbotron\">\r\n\t\t\t\t<h1>{t('no-lessons-title')}</h1>\r\n\t\t\t\t<p>{t('no-lessons-description')}</p>\r\n\t\t\t</div> );\r\n\t\t}\r\n\t\tlessons = this.selectPageLessons( lessons );\r\n\t\tconst layouts = ( lessons.length === NO_LESSONS_PER_PAGE ) ?\r\n\t\t\tFULL_LAYOUT :\r\n\t\t\tcreateLayout( lessons.length );\r\n\t\tsortLessons( lessons, this.props.search );\r\n\t\treturn (\r\n\t\t\t<Fragment>\r\n\t\t\t\t{this.renderPagination()}\r\n\t\t\t\t<div className=\"gallery\">\r\n\t\t\t\t\t<ResponsiveReactGridLayout\r\n\t\t\t\t\t\tlayouts={layouts}\r\n\t\t\t\t\t\tbreakpoints={{ lg: 1800, md: 1550, sm: 1200, xs: 900, xxs: 400, tiny: 0 }}\r\n\t\t\t\t\t\tcols={{ lg: 24, md: 20, sm: 16, xs: 12, xxs: 8, tiny: 4 }}\r\n\t\t\t\t\t\tcontainerPadding={[10, 10]}\r\n\t\t\t\t\t\tisResizable={false}\r\n\t\t\t\t\t\tisDraggable={false}\r\n\t\t\t\t\t\trowHeight={60}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{lessons.map( ( e, i ) => {\r\n\t\t\t\t\t\t\treturn ( <div key={`cell-${i}`}>\r\n\t\t\t\t\t\t\t\t<Lesson\r\n\t\t\t\t\t\t\t\t\t{...lessons[ i ]}\r\n\t\t\t\t\t\t\t\t\tgetIsleFile={this.props.getIsleFile}\r\n\t\t\t\t\t\t\t\t\taddNotification={this.props.addNotification}\r\n\t\t\t\t\t\t\t\t\topenedNamespace={this.props.openedNamespace}\r\n\t\t\t\t\t\t\t\t\tkey={i}\r\n\t\t\t\t\t\t\t\t\tonImport={() => {\r\n\t\t\t\t\t\t\t\t\t\tthis.showImportModal({\r\n\t\t\t\t\t\t\t\t\t\t\ttitle: lessons[ i ].title,\r\n\t\t\t\t\t\t\t\t\t\t\tnamespace: lessons[ i ].namespace\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div> );\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</ResponsiveReactGridLayout>\r\n\t\t\t\t\t{this.renderImportModal()}\r\n\t\t\t\t</div>\r\n\t\t\t</Fragment>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n\r\n// PROPERTIES //\r\n\r\nGallery.propTypes = {\r\n\taddNotification: PropTypes.func.isRequired,\r\n\tcopyLesson: PropTypes.func.isRequired,\r\n\tfindPublicLessons: PropTypes.func.isRequired,\r\n\tgallery: PropTypes.object.isRequired,\r\n\tgetIsleFile: PropTypes.func.isRequired,\r\n\topenedNamespace: PropTypes.object.isRequired,\r\n\tsearch: PropTypes.object.isRequired,\r\n\tuser: PropTypes.object.isRequired\r\n};\r\n\r\n\r\n// EXPORTS //\r\n\r\nexport default withTranslation( [ 'gallery', 'common' ] )( Gallery );\r\n","/**\r\n* Copyright (C) 2016-present The ISLE Authors\r\n*\r\n* The isle-dashboard program is free software: you can redistribute it and/or modify\r\n* it under the terms of the GNU Affero General Public License as\r\n* published by the Free Software Foundation, either version 3 of the\r\n* License, or (at your option) any later version.\r\n*\r\n* This program is distributed in the hope that it will be useful,\r\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n* GNU Affero General Public License for more details.\r\n*\r\n* You should have received a copy of the GNU Affero General Public License\r\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\r\n*/\r\n\r\n// MODULES //\r\n\r\nimport React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport Gallery from 'components/gallery';\r\nimport { copyLessonInjector, getIsleFileInjector, getPublicLessonsInjector } from 'actions/lesson';\r\nimport { addNotificationInjector } from 'actions/notification';\r\n\r\n\r\n// FUNCTIONS //\r\n\r\nfunction mapStateToProps( state ) {\r\n\treturn {\r\n\t\tsearch: state.search,\r\n\t\tuser: state.user,\r\n\t\topenedNamespace: state.namespace,\r\n\t\tgallery: state.gallery\r\n\t};\r\n}\r\n\r\nfunction mapDispatchToProps( dispatch ) {\r\n\treturn {\r\n\t\taddNotification: addNotificationInjector( dispatch ),\r\n\t\tcopyLesson: copyLessonInjector( dispatch ),\r\n\t\tfindPublicLessons: getPublicLessonsInjector( dispatch ),\r\n\t\tgetIsleFile: getIsleFileInjector( dispatch )\r\n\t};\r\n}\r\n\r\n\r\n// MAIN //\r\n\r\nconst VisibleGallery = connect( mapStateToProps, mapDispatchToProps )( Gallery );\r\n\r\n\r\n// EXPORTS //\r\n\r\nexport default VisibleGallery;\r\n","/**\r\n* Copyright (C) 2016-present The ISLE Authors\r\n*\r\n* The isle-dashboard program is free software: you can redistribute it and/or modify\r\n* it under the terms of the GNU Affero General Public License as\r\n* published by the Free Software Foundation, either version 3 of the\r\n* License, or (at your option) any later version.\r\n*\r\n* This program is distributed in the hope that it will be useful,\r\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n* GNU Affero General Public License for more details.\r\n*\r\n* You should have received a copy of the GNU Affero General Public License\r\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\r\n*/\r\n\r\n// VARIABLES //\r\n\r\nconst OPTS = {\r\n\tnumeric: true // Use numeric collation such that \"1\" < \"2\" < \"10\"...\r\n};\r\n\r\n\r\n// MAIN //\r\n\r\n/**\r\n* Sorts lessons according to the `search` object in place.\r\n*\r\n* @param {Array} lessons - a list of lessons\r\n* @param {Object} search - search object\r\n* @param {string} search.type - either `sequentially`, `alphabetically`, `created_at`, or `updated_at`\r\n* @param {string} search.direction - either `ascending` or `descending`\r\n*/\r\nfunction sortLessons( lessons, search ) {\r\n\tconst { type, direction } = search;\r\n\tif ( type === 'sequentially' ) {\r\n\t\tif ( direction === 'ascending' ) {\r\n\t\t\tlessons.sort( ( a, b ) => {\r\n\t\t\t\treturn a.pos - b.pos;\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tlessons.sort( ( a, b ) => {\r\n\t\t\t\treturn b.pos - a.pos;\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\telse if ( type === 'alphabetically' ) {\r\n\t\tif ( direction === 'ascending' ) {\r\n\t\t\tlessons.sort( ( a, b ) => {\r\n\t\t\t\tconst x = a.namespace + a.title;\r\n\t\t\t\tconst y = b.namespace + b.title;\r\n\t\t\t\treturn x.localeCompare( y, void 0, OPTS );\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tlessons.sort( ( a, b ) => {\r\n\t\t\t\tconst x = a.namespace + a.title;\r\n\t\t\t\tconst y = b.namespace + b.title;\r\n\t\t\t\treturn y.localeCompare( x, void 0, OPTS );\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\telse if ( type === 'created_at' ) {\r\n\t\tif ( direction === 'ascending' ) {\r\n\t\t\tlessons.sort( ( a, b ) => {\r\n\t\t\t\treturn a.createdAt.localeCompare( b.createdAt, void 0, OPTS );\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tlessons.sort( ( a, b ) => {\r\n\t\t\t\treturn b.createdAt.localeCompare( a.createdAt, void 0, OPTS );\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\telse if ( type === 'updated_at' ) {\r\n\t\tif ( direction === 'ascending' ) {\r\n\t\t\tlessons.sort( ( a, b ) => {\r\n\t\t\t\treturn a.updatedAt.localeCompare( b.updatedAt, void 0, OPTS );\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tlessons.sort( ( a, b ) => {\r\n\t\t\t\treturn b.updatedAt.localeCompare( a.updatedAt, void 0, OPTS );\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n}\r\n\r\n\r\n// EXPORTS //\r\n\r\nexport default sortLessons;\r\n"],"sourceRoot":""}