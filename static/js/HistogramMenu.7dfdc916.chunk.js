"use strict";(self.webpackChunkisle_dashboard=self.webpackChunkisle_dashboard||[]).push([[5157,459],{42588:function(e,t,n){n.r(t);var l=n(38603),a=n(38564),o=n.n(a),i=n(93918),s=n(89956),r=n(83729),u=n(7846),c=n(91532),d=n.n(c),p=n(38408),m=n(3021),g=n(28564),b=n(22168),f=n(72077),y=n(2443),h=n(80595);function E(){return E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},E.apply(this,arguments)}const v=o()("isle:data-explorer:histogram"),Z={start:null,size:100,end:null},C=e=>{const[t,n]=(0,l.useState)(!1),[a,o]=(0,l.useState)(null),[c,d]=(0,l.useState)(1),[C,x]=(0,l.useState)(e.defaultValue||e.variables[0]),[S,w]=(0,l.useState)(null),[k,V]=(0,l.useState)("Overlay"),[P,K]=(0,l.useState)(2),[O,N]=(0,l.useState)(10),[D,$]=(0,l.useState)(Z),[T,q]=(0,l.useState)("Automatic"),{variables:F,groupingVariables:j,t:B}=e;(0,l.useEffect)((()=>{$(Z)}),[T]);return l.createElement(s.Z,null,l.createElement(s.Z.Header,{as:"h4"},B("Histogram"),l.createElement(h.Z,{title:B("Histogram"),content:B("Histogram-description")})),l.createElement(s.Z.Body,null,l.createElement(m.Z,{legend:B("variable"),defaultValue:C,options:F,onChange:x}),l.createElement(u.Z,null,l.createElement(r.Z,{md:5},l.createElement(m.Z,{legend:B("group-by"),options:j,clearable:!0,onChange:w})),l.createElement(r.Z,{md:4},S?l.createElement(m.Z,{legend:`${B("mode")}:`,defaultValue:k,options:["Overlay","Facets"],onChange:V}):null),l.createElement(r.Z,{md:3},S&&"Facets"===k?l.createElement(g.Z,{legend:B("columns"),defaultValue:2,min:1,onChange:K,style:{marginTop:0},inputStyle:{width:70,marginLeft:0,marginTop:2}}):null)),l.createElement("div",null,l.createElement(m.Z,{legend:B("binning-strategy"),options:["Automatic","Select # of bins","Set bin width"],defaultValue:T,inline:!0,onChange:q}),"Automatic"!==T?l.createElement("div",null,l.createElement(g.Z,{legend:B("start"),inline:!0,defaultValue:D.start,onChange:e=>{const t={...D};t.start=e,$(t)},step:"any",inputStyle:{width:70}}),"Select # of bins"===T?l.createElement(g.Z,{legend:B("bins"),defaultValue:O,min:1,step:1,onChange:N,inline:!0,inputStyle:{width:70}}):null,"Set bin width"===T?l.createElement(g.Z,{legend:B("size"),inline:!0,defaultValue:D.size,onChange:e=>{const t={...D};t.size=e,$(t)},step:"any",inputStyle:{width:70}}):null,l.createElement(g.Z,{legend:B("end"),inline:!0,defaultValue:D.end,onChange:e=>{const t={...D};t.end=e,$(t)},step:"any",inputStyle:{width:70}})):null),e.showDensityOption?l.createElement("div",null,l.createElement(p.Z,{legend:B("display-density"),defaultValue:t,onChange:n}),l.createElement(m.Z,{legend:B("overlay-density-line"),options:["Data-driven","Normal","Uniform","Exponential"],disabled:!t,defaultValue:a,clearable:!0,menuPlacement:"top",onChange:o}),"Data-driven"===a?l.createElement(g.Z,{legend:B("bandwidth-adjustment"),defaultValue:c,min:0,step:.1,onChange:d}):null):null,l.createElement(i.Z,{variant:"primary",block:!0,onClick:()=>{v(`Generate a histogram with ${O} bins`);const n=(0,b.Z)(6),o={variable:C,group:S,groupMode:k,displayDensity:t,densityType:a,binStrategy:T};"Select # of bins"===T&&(o.nBins=O),o.xBins=D,"Facets"===k&&(o.nCols=P),"Data-driven"===a&&(o.bandwidthAdjust=c);const i={...o,plotId:n},s=l.createElement(f.Z,E({data:e.data},o,{id:n,action:i,onShare:()=>{e.session.addNotification({title:e.t("plot-shared"),message:e.t("plot-shared-message"),level:"success",position:"tr"}),e.logAction(y.V3,i)}}));e.logAction(y.NM,i),e.onCreated(s)}},B("generate"))))};C.defaultProps={defaultValue:null,groupingVariables:null,logAction(){},showDensityOption:!0,onSelected(){}},C.propTypes={data:d().object.isRequired,defaultValue:d().string,groupingVariables:d().array,logAction:d().func,onSelected:d().func,onCreated:d().func.isRequired,session:d().object.isRequired,showDensityOption:d().bool,variables:d().array.isRequired},t.default=C},80595:function(e,t,n){var l=n(38603),a=n(91532),o=n.n(a),i=n(93918),s=n(58479),r=n(49628),u=n(3569),c=n(54849);const d=e=>{const t=l.createElement(s.Z,{id:"popover-positioned-right"},l.createElement(r.Z,null,e.title),l.createElement(u.Z,null,e.content));return l.createElement(c.Z,{trigger:["click","hover","focus"],placement:"left",rootClose:!0,overlay:t},l.createElement(i.Z,{size:"sm",variant:"outline-secondary",className:"question-button"},l.createElement("div",{className:"fa fa-question"})))};d.propTypes={content:o().oneOfType([o().string,o().node]).isRequired,title:o().string.isRequired},t.Z=d},38408:function(e,t,n){n.d(t,{Z:function(){return p}});var l=n(38603),a=n(91532),o=n.n(a),i=n(4593),s=n.n(i),r=n(94123),u=n(26516);const c=(0,n(61202).Z)("checkbox-input"),d=e=>{const{bind:t,defaultValue:a,disabled:o,onChange:i}=e,d=(0,l.useRef)(e.id||c(e)),p=(0,l.useContext)(u.Z),[m,g]=(0,l.useState)(t&&p.state?p.state[t]:a);(0,l.useEffect)((()=>{g(a)}),[a]),(0,l.useEffect)((()=>{t&&g(n.g.lesson.state[t])}),[t]),(0,l.useEffect)((()=>{if(t){let e=n.g.lesson.state[t];e!==m&&g(e)}}),[t,m]);const b=(0,l.useCallback)((e=>{g(e),t&&n.g.lesson.setState({[t]:e})}),[t]),f=(0,l.useCallback)((e=>{const t=e.target.checked;i(t),b(t)}),[i,b]),y=()=>{const t=null!==e.value?!e.value:!m;i(t),b(t)},h=l.createElement("input",{className:"checkbox-input",type:"checkbox",checked:null!==e.value?e.value:m,value:"checkbox",onChange:f,disabled:o,"aria-label":e.tooltip});if(!0===e.inline)return l.createElement(r.Z,{tooltip:e.tooltip,placement:e.tooltipPlacement},l.createElement("span",{id:d.current,style:{marginLeft:"8px",...e.style}},h,l.createElement("span",{role:"button",tabIndex:0,className:"checkbox-legend",style:{color:o?"darkgray":null},onClick:y,onKeyPress:y},e.legend)));const E=o?s():y;return l.createElement(r.Z,{tooltip:e.tooltip,placement:e.tooltipPlacement},l.createElement("div",{id:d.current,className:"input checkbox-input-div",style:e.style},h,l.createElement("span",{role:"button",tabIndex:0,className:"checkbox-legend",style:{color:o?"darkgray":null},onClick:E,onKeyPress:E},e.legend)))};d.defaultProps={bind:"",onChange(){},defaultValue:!1,value:null,disabled:!1,inline:!1,legend:"",tooltip:"",tooltipPlacement:"right",style:{}},d.propTypes={bind:o().string,defaultValue:o().bool,value:o().bool,disabled:o().bool,inline:o().bool,onChange:o().func,legend:o().oneOfType([o().string,o().node]),tooltip:o().string,tooltipPlacement:o().oneOf(["left","top","right","bottom"]),style:o().object};var p=d},28564:function(e,t,n){n.d(t,{Z:function(){return P}});var l=n(38603),a=n(91532),o=n.n(a),i=n(38564),s=n.n(i),r=n(52458),u=n(89506),c=n.n(u),d=n(4286),p=n.n(d),m=n(24500),g=n(17218),b=n.n(g),f=n(42415),y=n(88928),h=n.n(y),E=n(24469),v=n.n(E),Z=n(94123),C=n(26516),x=n(61202);var S=function({min:e,max:t,step:n,t:l}){let a=`${l("enter")} ${l(1===n?"integer":"number")} `;return t!==h()&&e!==v()?a+=`${l("between")} ${e} ${l("and")} ${t}`:e!==v()?a+=`${l("larger-or-equal-to")} ${e}`:t!==h()&&(a+=`${l("smaller-or-equal-to")} ${t}`),a};const w=s()("isle:number-input"),k=(0,x.Z)("number-input"),V=e=>{const t=(0,l.useRef)(e.id||k(e)),{bind:a,defaultValue:o,min:i,max:s,step:u,value:d,onBlur:g,onChange:y}=e,{t:h}=(0,r.$)("input"),E=(0,l.useContext)(C.Z),[v,x]=(0,l.useState)(d||(a&&E.state?E.state[a]:o));(0,l.useEffect)((()=>{if(a){const e=n.g.lesson.state[a];e!==v&&(0,f.isPrimitive)(v)&&x(e)}}),[a,v]),(0,l.useEffect)((()=>{x(o)}),[o]),(0,l.useEffect)((()=>{a&&x(n.g.lesson.state[a])}),[a]);const V=(0,l.useCallback)((e=>{w("Handle change of input field...");let t=e.target.validity.valid,l=e.target.value;x(l),d||t&&""!==l&&"-"!==l&&"."!==l&&"-."!==l?(l=parseFloat(l),p()(l)&&(l=""),y(l),a&&n.g.lesson.setState({[a]:l})):a&&n.g.lesson.setState({[a]:l})}),[a,d,y]),P=(0,l.useCallback)((e=>{w("Finished change...");let t=e.target.value;if(c()(t,"/")){w("Encountered a fraction...");const e=t.split("/");""!==e[0]&&""!==e[1]&&(t=parseFloat(e[0])/parseFloat(e[1]))}p()(t)?t="":""!==t&&"-"!==t&&"."!==t&&"-."!==t&&(t=parseFloat(t)),t>s?t=s:t<i?t=i:1===u&&""!==t&&"-"!==t&&"."!==t&&"-."!==t&&(t-=t%u),y(t),g(t),t!==v&&(x(t),a&&n.g.lesson.setState({[a]:t}))}),[a,i,s,u,v,g,y]),K=b()(e.tooltip)?S({min:i,max:s,step:u,t:h}):e.tooltip;if(!0===e.inline){const n=l.createElement("span",{className:"input",style:{padding:"5px",...e.style}},e.legend?l.createElement("label",{htmlFor:t.current}," ",e.legend," =  "):null,l.createElement("input",{id:t.current,type:e.numbersOnly?"number":"text",name:"input",className:"number-number-input",disabled:e.disabled,value:null!==d?d:v,step:e.step,min:e.min,max:e.max,style:{width:"80px",paddingLeft:"6px",marginLeft:"3px",...e.inputStyle},onChange:V,onBlur:P,onKeyPress:e.onKeyPress,onKeyDown:e.onKeyDown,onKeyUp:e.onKeyUp,autoComplete:"off"}),e.description?l.createElement("span",null,"(",e.description,")"):l.createElement("span",null));return e.disabled?n:l.createElement(Z.Z,{id:"number-input-tooltip-inline",placement:"top",show:!e.disabled,tooltip:K},n)}const O=l.createElement("input",{id:t.current,type:e.numbersOnly?"number":"text",name:"input",className:"number-number-input",disabled:e.disabled,value:null!==d?d:v,step:e.step,min:e.min,max:e.max,style:{width:"80px",marginLeft:"24px",...e.inputStyle},onChange:V,onBlur:P,onKeyPress:e.onKeyPress,onKeyDown:e.onKeyDown,onKeyUp:e.onKeyUp,autoComplete:"off"});return l.createElement("div",{className:"input",style:{marginBottom:"4px",marginTop:"4px",...e.style}},e.legend?l.createElement("span",null,l.createElement("label",{htmlFor:t.current},(0,m.isPrimitive)(e.legend)?e.legend+":":e.legend),e.description?l.createElement("span",null," ",e.description):null):null,l.createElement(Z.Z,{id:"number-input-tooltip",placement:e.tooltipPlacement,tooltip:K,show:!e.disabled},l.createElement("span",{className:"number-input-span"},O)))};V.defaultProps={bind:"",disabled:!1,legend:null,min:v(),max:h(),step:1,defaultValue:0,onBlur(){},onChange(){},onKeyDown(){},onKeyPress(){},onKeyUp(){},inline:!1,numbersOnly:!0,style:{},inputStyle:{},value:null,tooltip:null,tooltipPlacement:"left"},V.propTypes={bind:o().string,defaultValue:o().number,disabled:o().bool,inline:o().bool,legend:o().oneOfType([o().string,o().node]),max:o().number,min:o().number,numbersOnly:o().bool,onBlur:o().func,onChange:o().func,onKeyDown:o().func,onKeyPress:o().func,onKeyUp:o().func,step:o().oneOfType([o().number,o().string]),style:o().object,inputStyle:o().object,value:o().number,tooltip:o().string,tooltipPlacement:o().oneOf(["top","right","bottom","left"])};var P=V}}]);
//# sourceMappingURL=HistogramMenu.7dfdc916.chunk.js.map