/*! For license information please see LassoRegression.3d7a0951.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkisle_dashboard=self.webpackChunkisle_dashboard||[]).push([[5474],{35689:function(t,e,r){r.r(e),r.d(e,{default:function(){return pt}});var i=r(38603),n=r(91532),a=r.n(n),s=r(58651),o=r(79174),l=r(89506),u=r.n(l),c=r(22949),h=r.n(c),d=r(42415),p=r.n(d),f=r(19189),m=r.n(f),v=r(55236),g=r.n(v),b=r(45014),y=r.n(b),w=r(83276),E=r.n(w),x=r(93918),T=r(94123),q=r(5883),A=r(7474),Z=r.n(A);var P=function(t,e){const r=Z()(e);if(!Z()(t))throw new TypeError("invalid input argument. Must provide an array. Value: `"+t+"`.");if(!r&&!(0,d.isPrimitive)(e))throw new TypeError("invalid input argument. Second argument must either be an array or number primitive. Value: `"+e+"`.");const i=t.length,n=new Array(i);if(r){if(i!==e.length)throw new Error("invalid input argument. Array to be multiplied must have a length equal to that of the input array.");for(let r=0;r<i;r++)n[r]=t[r]*e[r]}else for(let a=0;a<i;a++)n[a]=t[a]*e;return n},k=r(84111),F=r(40094),V=r(44784),N=r.n(V);var S=function(t,e=!0,r=!0){const i=(0,k.Z)(t),n=(0,F.Z)(t),a=t.length,s=new Array(a);if(e)if(r)for(let o=0;o<a;o++)s[o]=(t[o]-i)/n;else for(let o=0;o<a;o++)s[o]=t[o]-i;else if(r)for(let o=0;o<a;o++)s[o]=t[o]/n;else s=t.slice();return N()(s,"mu",i),N()(s,"sigma",n),s},O=r(76798),_=r(32921),z=r(38564),C=r.n(z),K=r(99262),R=r.n(K),$=r(12806),M=r.n($),j=r(11120),D=r.n(j),W=r(22372),X=r.n(W),B=r(34564),G=r.n(B),H=r(75891),I=r.n(H),J=r(48207),L=r.n(J),Q=r(58997),U=r(81380),Y=r(16684);var tt=function(t,e,r){const i=Z()(e);if(!Z()(t))throw new TypeError("invalid input argument. Must provide an array. Value: `"+t+"`.");if(!i&&!(0,d.isPrimitive)(e))throw new TypeError("invalid input argument. Second argument must either be an array or number primitive. Value: `"+e+"`.");const n=t.length,a=new Array(n);if(i){if(n!==e.length)throw new Error("invalid input argument. Array to be divided must have a length equal to that of the input array.");for(let r=0;r<n;r++)a[r]=t[r]/e[r]}else for(let s=0;s<n;s++)a[s]=t[s]/e;return a};var et=function(t,e,r){let i=0;const n=t.shape[0];for(let a=0;a<n;a++){const n=t.get(a,r),s=e.get(a,r);0!==n&&0!==s&&(i+=n*s)}return i};var rt=function(t,e){const r=t.length;let i=0;for(let n=0;n<r;n++)i+=t[n]*e[n];return i};var it=function(t,e){return t>e?t-e:t<-e?t+e:0};const nt=C()("isle:lasso"),at=1e-9,st=(t,e)=>{const r=new Float64Array(t.shape[0]);for(let i=0;i<r.length;i++)r[i]=t.get(i,e);return r};function ot(t,e,r){this.y=t,this.x=e,this.lambda=r,this.N=e.shape[0],this.p=e.shape[1],this.beta=new Float64Array(this.p),this.betast=new Float64Array(this.p),this.active=R()(0,this.beta.length,1),this.nonactive=[],this.presid=G()("float64",new Float64Array(e._buffer.length),e.shape,e.strides,e.offset,e.order),this.init=()=>{this.iteration=0,this.iterate()},this.init()}ot.prototype.testKKT=function(){const t=this.beta,e=this.N,r=this.x,i=this.y,n=(0,Y.Z)(i,(0,Q.Z)(r,t)),a=tt((0,Q.Z)((0,U.Z)(r),n),e);for(let s=0;s<t.length;s++)if(0===t[s]){if(L()(a[s])>this.lambda+at)return!1}else if(t[s]>0&&a[s]-this.lambda*M()(t[s])>at)return!1;return!0},ot.prototype.testActiveSet=function(){let t=!1;const{residuals:e}=this.predict(this.x);for(let r=0;r<this.nonactive.length;r++){const i=this.nonactive[r],n=st(this.x,i);L()(rt(n,e))/this.N>this.lambda&&(this.active.push(i),this.nonactive.splice(r,1),t=!0)}return nt("Active set changes..."),t},ot.prototype.iterate=function(){const t=this.N,e=this.p,r=this.x,i=this.y;if(this.iteration+=1,this.iteration>1e4)return;let n=!0;for(let a=0;a<this.active.length;a++){const s=this.active[a];for(let n=0;n<t;n++){const t=i[n];for(let i=0;i<e;i++)t-=s!==i?r.get(n,i)*this.beta[i]:0;this.presid.set(n,s,t)}this.betast[s]=1/t*et(r,this.presid,s);const o=this.beta[s],l=it(this.betast[s],this.lambda);L()(l-o)>at&&(n=!1),this.beta[s]=l}for(let a=this.active.length-1;a>=0;a--){const t=this.active[a];L()(this.beta[t])<at&&(this.active.splice(a,1),this.nonactive.push(t))}(!1===n||this.testActiveSet())&&this.iterate()},ot.prototype.predict=function(t){D()(t)&&(t=I()(t));const e=(0,Q.Z)(t,this.beta),r=new Array(this.N);for(let i=0;i<this.N;i++)r[i]=this.y[i]-e[i];return{fitted:e,residuals:r}};var lt=function(t,e,r){if(!p())throw new TypeError("invalid input argument. The third argument must be a number primitive. Value: `"+r+"`");if(!Z()(e))throw new TypeError("invalid input argument. The second argument must be array-like. Value: `"+e+"`");if(D()(t))t=I()(t);else if(!X()(t)){throw new TypeError("invalid input argument. The first argument must be a matrix or an array-of-arrays. Value: `"+t+"`")}return new ot(e,t,r)};let ut=0;function ct(t,e,r,i){h()(t)||(t=[t]);const n=[],a=[],s={},o={},l={},c=e[t[0]].length;for(let h=0;h<t.length;h++)if(u()(r,t[h])){const r=S(e[t[h]]);o[t[h]]=r,a.push(t[h])}else{const r=e[t[h]],n=m()(r,g()),o=t[h].categories||y()(n);for(let e=i?1:0;e<o.length;e++){const r=`${t[h]}_${o[e]}`;a.push(r);const i=n[o[e]]/c;l[r]={mu:i,sigma:E()(i*(1-i))}}s[t[h]]=o}for(let h=0;h<c;h++){const a=[];i&&a.push(1);for(let n=0;n<t.length;n++)if(u()(r,t[n])){const e=o[t[n]];a.push(e[h])}else{const r=e[t[n]],o=s[t[n]],u=r[h];for(let e=i?1:0;e<o.length;e++){const{mu:r,sigma:i}=l[`${t[n]}_${o[e]}`];a.push(u===o[e]?(1-r)/i:-r/i)}}n.push(a)}return{matrix:n,predictors:a,categoricalStats:l,standardized:o}}const ht=({x:t,y:e,lambda:r,data:i,quantitative:n,intercept:a})=>{try{let s=i[e];s=S(s,!1,!0);const{matrix:o,predictors:l,categoricalStats:c,standardized:h}=ct(t,i,n,a),d=new lt(o,s,r);if(a){let t=0;for(let e=1;e<d.beta.length;e++){const r=l[e-1];u()(n,r)?(d.beta[e]*=s.sigma/h[r].sigma,t+=d.beta[e]*h[r].mu):(d.beta[e]*=s.sigma/c[r].sigma,t+=d.beta[e]*c[r].mu)}d.beta[0]=s.mu-t}else for(let t=0;t<d.beta.length;t++){const e=l[t];u()(n,e)?d.beta[t]*=s.sigma/h[e].sigma:d.beta[t]*=s.sigma/c[e].sigma}return{predictors:l,result:d,yvalues:s}}catch(s){return{}}};class dt extends i.Component{constructor(t){var e,r,i;super(t),i=()=>{const{matrix:t}=ct(this.props.x,this.props.data,this.props.quantitative,this.props.intercept);let{fitted:e,residuals:r}=this.state.result.predict(t);e=P(e,this.state.yvalues.sigma),r=P(r,-this.state.yvalues.sigma),this.props.onPredict(e,r,ut)},(r="handlePredict")in(e=this)?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i,ut+=1;const{x:n,y:a,lambda:s,data:o,quantitative:l,intercept:u}=t;this.state={...ht({x:n,y:a,lambda:s,data:o,quantitative:l,intercept:u}),...t}}static getDerivedStateFromProps(t,e){if(t.data!==e.data||t.quantitative!==e.quantitative||t.x!==e.x||t.y!==e.y||t.intercept!==e.intercept||t.lambda!==e.lambda){const{x:e,y:r,lambda:i,data:n,quantitative:a,intercept:s}=t;return{...ht({x:e,y:r,lambda:i,data:n,quantitative:a,intercept:s}),...t}}return null}render(){const{y:t,intercept:e,lambda:r,onPredict:n,t:a}=this.props,{result:s,predictors:l}=this.state;return s?(0,d.isPrimitive)(r)?i.createElement("div",{style:{overflowX:"auto",width:"100%"}},i.createElement("span",{className:"title"},a("lasso-title",{y:t,lambda:r.toFixed(4),counter:ut})),((t,e,r,n)=>i.createElement(q.Z,{bordered:!0,size:"sm"},i.createElement("thead",null,i.createElement("tr",null,i.createElement("th",null,n("predictor")),i.createElement("th",null,n("coefficient")))),i.createElement("tbody",null,e?i.createElement("tr",null,i.createElement("th",null,n("intercept")),i.createElement("td",null,r.beta[0].toFixed(6))):null,t.map(((t,n)=>i.createElement("tr",{key:n},i.createElement("th",null,t),i.createElement("td",null,r.beta[n+Number(e)].toFixed(6))))))))(l,e,s,a),i.createElement("p",null,s.testKKT()?a("kkt-satisfied"):a("kkt-not-satisfied")),n?i.createElement(T.Z,{tooltip:a("use-model-to-predict-tooltip")},i.createElement(x.Z,{variant:"secondary",size:"sm",onClick:this.handlePredict},this.props.t("use-model-to-predict"))):null):i.createElement(o.Z,{variant:"danger"},a("lambda-not-number")):i.createElement(o.Z,{variant:"danger"},a("missing-attributes"))}}dt.defaultProps={lambda:.001,intercept:!0,onPredict(){}},dt.propTypes={data:a().object.isRequired,y:a().string.isRequired,x:a().oneOfType([a().arrayOf(a().oneOfType([a().string,a().instanceOf(_.E)])),a().string,a().instanceOf(_.E)]).isRequired,quantitative:a().arrayOf(a().string).isRequired,lambda:a().number,intercept:a().bool,onPredict:a().func};var pt=(0,s.Z)("models")((0,O.W)(dt))},58997:function(t,e){e.Z=function(t,e){const r=t.shape[0],i=t.shape[1];let n=new Float64Array(r);for(let a=0;a<r;a++){let r=0;for(let n=0;n<i;n++)r+=t.get(a,n)*e[n];n[a]=r}return n}},16684:function(t,e,r){var i=r(7474),n=r.n(i),a=r(42415);e.Z=function(t,e){const r=n()(e);if(!n()(t))throw new TypeError("invalid input argument. Must provide an array. Value: `"+t+"`.");if(!r&&!(0,a.isPrimitive)(e))throw new TypeError("invalid input argument. Second argument must either be an array or number primitive. Value: `"+e+"`.");const i=t.length,s=new Array(i);if(r){if(i!==e.length)throw new Error("invalid input argument. Array to be added must have a length equal to that of the input array.");for(let r=0;r<i;r++)s[r]=t[r]-e[r]}else for(let n=0;n<i;n++)s[n]=t[n]-e;return s}},81380:function(t,e,r){var i=r(34564),n=r.n(i);e.Z=t=>{const e=[t.shape[1],t.shape[0]],r=[t.strides[1],t.strides[0]],i=t.offset,a=t.order;return n()("float64",t._buffer,e,r,i,a)}},11120:function(t,e,r){var i=r(45042);t.exports=i},45042:function(t,e,r){var i=r(73830)(r(22949));t.exports=i},44784:function(t,e,r){var i=r(19670);t.exports=i},19670:function(t,e,r){var i=r(72646);t.exports=function(t,e,r){i(t,e,{configurable:!0,enumerable:!1,writable:!0,value:r})}}}]);
//# sourceMappingURL=LassoRegression.3d7a0951.chunk.js.map