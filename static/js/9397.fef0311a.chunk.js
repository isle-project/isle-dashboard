"use strict";(self.webpackChunkisle_dashboard=self.webpackChunkisle_dashboard||[]).push([[9397],{25218:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Zl:function(){return getAvailableBadgesInjector},fH:function(){return getUserBadgesInjector}});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(67294),axios__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(9669),axios__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_1__),i18next__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(41631),_stdlib_assert_contains__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(61635),_stdlib_assert_contains__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_stdlib_assert_contains__WEBPACK_IMPORTED_MODULE_3__),constants_server__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(94204),actions_notification__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(16120),constants_action_types_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(84499),__async=(__this,__arguments,generator)=>new Promise((resolve,reject)=>{var fulfilled=value=>{try{step(generator.next(value))}catch(e){reject(e)}},rejected=value=>{try{step(generator.throw(value))}catch(e){reject(e)}},step=x=>x.done?resolve(x.value):Promise.resolve(x.value).then(fulfilled,rejected);step((generator=generator.apply(__this,__arguments)).next())});function createBadgeNotification({name,description,picture}){const pic=constants_server__WEBPACK_IMPORTED_MODULE_4__.ZP+"/badges/"+picture;return{children:react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("h3",null,i18next__WEBPACK_IMPORTED_MODULE_2__.ZP.t("common:received-badge"),name),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"received-badge-before"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("img",{className:"received-badge",src:pic,alt:"Received Badge"})),react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",{style:{marginTop:15}},i18next__WEBPACK_IMPORTED_MODULE_2__.ZP.t("common:received-badge-for"),react__WEBPACK_IMPORTED_MODULE_0__.createElement("b",null,description)))),level:"info",position:"tc",dismissible:"button",autoDismiss:0}}function receivedUserBadges(badges){return{type:constants_action_types_js__WEBPACK_IMPORTED_MODULE_5__.eu,payload:{badges}}}function retrievedBadges(badges){return{type:constants_action_types_js__WEBPACK_IMPORTED_MODULE_5__.Z9,payload:{badges}}}const getUserBadges=dispatch=>__async(void 0,null,function*(){try{const res=yield axios__WEBPACK_IMPORTED_MODULE_1___default().get(constants_server__WEBPACK_IMPORTED_MODULE_4__.ZP+"/get_user_badges"),{badges,addedBadges}=res.data;if(dispatch(receivedUserBadges(badges)),addedBadges.length>0)for(let i=0;i<badges.length;i++){const item=badges[i];_stdlib_assert_contains__WEBPACK_IMPORTED_MODULE_3___default()(addedBadges,item.name)&&(0,actions_notification__WEBPACK_IMPORTED_MODULE_6__.wN)(dispatch,createBadgeNotification(item))}}catch(err){(0,actions_notification__WEBPACK_IMPORTED_MODULE_6__.EG)(dispatch,err)}}),getUserBadgesInjector=dispatch=>()=>__async(void 0,null,function*(){yield getUserBadges(dispatch)}),getAvailableBadges=dispatch=>__async(void 0,null,function*(){try{const res=yield axios__WEBPACK_IMPORTED_MODULE_1___default().get(constants_server__WEBPACK_IMPORTED_MODULE_4__.ZP+"/get_available_badges");dispatch(retrievedBadges(res.data))}catch(err){(0,actions_notification__WEBPACK_IMPORTED_MODULE_6__.EG)(dispatch,err)}}),getAvailableBadgesInjector=dispatch=>()=>__async(void 0,null,function*(){yield getAvailableBadges(dispatch)})},7534:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{B_:function(){return uploadLogoInjector},E8:function(){return uploadFileInjector},Ru:function(){return getOwnerFilesInjector},TK:function(){return getFilesInjector},U0:function(){return getAllFilesInjector},f2:function(){return getUserFilesInjector},i1:function(){return removeLicenseInjector},ns:function(){return deleteFileInjector},rt:function(){return getLicenseInjector},z0:function(){return uploadLicenseInjector}});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(67294),axios__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(9669),axios__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_1__),querystring__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(17673),i18next__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(41631),constants_server__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(94204),clipboard_copy__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(66485),clipboard_copy__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(clipboard_copy__WEBPACK_IMPORTED_MODULE_5__),react_bootstrap_OverlayTrigger__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(99201),react_bootstrap_OverlayTrigger__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(react_bootstrap_OverlayTrigger__WEBPACK_IMPORTED_MODULE_8__),react_bootstrap_Tooltip__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(18868),react_bootstrap_Tooltip__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(react_bootstrap_Tooltip__WEBPACK_IMPORTED_MODULE_9__),react_bootstrap_Button__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(89876),react_bootstrap_Button__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(react_bootstrap_Button__WEBPACK_IMPORTED_MODULE_10__),actions_notification__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(16120),constants_action_types_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(84499),__async=(__this,__arguments,generator)=>new Promise((resolve,reject)=>{var fulfilled=value=>{try{step(generator.next(value))}catch(e){reject(e)}},rejected=value=>{try{step(generator.throw(value))}catch(e){reject(e)}},step=x=>x.done?resolve(x.value):Promise.resolve(x.value).then(fulfilled,rejected);step((generator=generator.apply(__this,__arguments)).next())});function getFilesRequest(_0,_1){return __async(this,arguments,function*(dispatch,{namespaceName,owner=!1}){try{const url=`${constants_server__WEBPACK_IMPORTED_MODULE_4__.ZP}/get_files?${querystring__WEBPACK_IMPORTED_MODULE_2__.stringify({namespaceName,owner})}`,files=(yield axios__WEBPACK_IMPORTED_MODULE_1___default().get(url)).data.files;dispatch(receivedNamespaceFiles({files,owner}))}catch(err){(0,actions_notification__WEBPACK_IMPORTED_MODULE_6__.EG)(dispatch,err)}})}function receivedFiles(files){return{type:constants_action_types_js__WEBPACK_IMPORTED_MODULE_7__.Ze,payload:{files}}}function receivedLicense(license){return{type:constants_action_types_js__WEBPACK_IMPORTED_MODULE_7__.kn,payload:{license}}}function removedLicense(){return{type:constants_action_types_js__WEBPACK_IMPORTED_MODULE_7__.Ug}}function receivedNamespaceFiles({files,owner}){return{type:constants_action_types_js__WEBPACK_IMPORTED_MODULE_7__.aM,payload:{files,owner}}}const getUserFiles=dispatch=>__async(void 0,null,function*(){try{const res=yield axios__WEBPACK_IMPORTED_MODULE_1___default().get(constants_server__WEBPACK_IMPORTED_MODULE_4__.ZP+"/get_user_files");dispatch(receivedFiles(res.data.files))}catch(err){(0,actions_notification__WEBPACK_IMPORTED_MODULE_6__.EG)(dispatch,err)}}),getUserFilesInjector=dispatch=>()=>__async(void 0,null,function*(){yield getUserFiles(dispatch)}),deleteFile=(dispatch,_id,namespaceName,owner)=>__async(void 0,null,function*(){try{const res=yield axios__WEBPACK_IMPORTED_MODULE_1___default().post(`${constants_server__WEBPACK_IMPORTED_MODULE_4__.ZP}/delete_file`,{_id});namespaceName?getFilesRequest(dispatch,{namespaceName,owner}):dispatch({type:constants_action_types_js__WEBPACK_IMPORTED_MODULE_7__.Rm,payload:{id:_id}}),(0,actions_notification__WEBPACK_IMPORTED_MODULE_6__.wN)(dispatch,{title:i18next__WEBPACK_IMPORTED_MODULE_3__.ZP.t("common:delete-file-title"),message:res.data.message,level:"success"})}catch(err){(0,actions_notification__WEBPACK_IMPORTED_MODULE_6__.EG)(dispatch,err)}}),deleteFileInjector=dispatch=>(_id,namespaceName,owner)=>__async(void 0,null,function*(){yield deleteFile(dispatch,_id,namespaceName,owner)}),uploadFile=(_0,_1)=>__async(void 0,[_0,_1],function*(dispatch,{formData,user}){try{const query=querystring__WEBPACK_IMPORTED_MODULE_2__.stringify({namespaceName:formData.get("namespaceName"),owner:formData.get("owner"),jwt:user.token}),res=yield axios__WEBPACK_IMPORTED_MODULE_1___default().post(constants_server__WEBPACK_IMPORTED_MODULE_4__.ZP+"/upload_file?"+query,formData);getFilesRequest(dispatch,{namespaceName:formData.get("namespaceName"),owner:formData.get("owner")});const msg={title:i18next__WEBPACK_IMPORTED_MODULE_3__.ZP.t("common:file-upload-title"),message:res.data.message,level:"success",position:"tl",autoDismiss:10};return msg.children=react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{style:{marginBottom:30}},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_bootstrap_OverlayTrigger__WEBPACK_IMPORTED_MODULE_8___default(),{placement:"bottom",overlay:react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_bootstrap_Tooltip__WEBPACK_IMPORTED_MODULE_9___default(),{id:"ownerTooltip"},i18next__WEBPACK_IMPORTED_MODULE_3__.ZP.t("common:copy-link"))},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_bootstrap_Button__WEBPACK_IMPORTED_MODULE_10___default(),{size:"sm",variant:"outline-secondary",style:{float:"right",marginRight:"10px"},onClick:()=>{clipboard_copy__WEBPACK_IMPORTED_MODULE_5___default()(constants_server__WEBPACK_IMPORTED_MODULE_4__.ZP+"/"+res.data.filename),(0,actions_notification__WEBPACK_IMPORTED_MODULE_6__.wN)(dispatch,{title:i18next__WEBPACK_IMPORTED_MODULE_3__.ZP.t("common:copied-title"),message:i18next__WEBPACK_IMPORTED_MODULE_3__.ZP.t("common:link-copied"),level:"success",position:"tl"})}},react__WEBPACK_IMPORTED_MODULE_0__.createElement("i",{className:"fa fa-clipboard"}))),react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_bootstrap_OverlayTrigger__WEBPACK_IMPORTED_MODULE_8___default(),{placement:"bottom",overlay:react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_bootstrap_Tooltip__WEBPACK_IMPORTED_MODULE_9___default(),{id:"ownerTooltip"},i18next__WEBPACK_IMPORTED_MODULE_3__.ZP.t("common:open-uploaded-file"))},react__WEBPACK_IMPORTED_MODULE_0__.createElement("a",{href:constants_server__WEBPACK_IMPORTED_MODULE_4__.ZP+"/"+res.data.filename,target:"_blank",rel:"noopener noreferrer",style:{float:"right",marginRight:"10px"}},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_bootstrap_Button__WEBPACK_IMPORTED_MODULE_10___default(),{size:"sm",variant:"outline-secondary"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("i",{className:"fa fa-external-link-alt"}))))),(0,actions_notification__WEBPACK_IMPORTED_MODULE_6__.wN)(dispatch,msg)}catch(err){(0,actions_notification__WEBPACK_IMPORTED_MODULE_6__.EG)(dispatch,err)}}),uploadFileInjector=dispatch=>_0=>__async(void 0,[_0],function*({formData,user}){yield uploadFile(dispatch,{formData,user})}),getFilesInjector=dispatch=>_0=>__async(void 0,[_0],function*({namespaceName}){yield getFilesRequest(dispatch,{namespaceName})}),getOwnerFilesInjector=dispatch=>_0=>__async(void 0,[_0],function*({namespaceName}){yield getFilesRequest(dispatch,{namespaceName,owner:!0})}),getAllFiles=dispatch=>__async(void 0,null,function*(){try{const res=yield axios__WEBPACK_IMPORTED_MODULE_1___default().get(constants_server__WEBPACK_IMPORTED_MODULE_4__.ZP+"/get_all_files");dispatch({type:constants_action_types_js__WEBPACK_IMPORTED_MODULE_7__.ci,payload:{files:res.data.files}})}catch(err){return(0,actions_notification__WEBPACK_IMPORTED_MODULE_6__.EG)(dispatch,err)}}),getAllFilesInjector=dispatch=>()=>__async(void 0,null,function*(){yield getAllFiles(dispatch)}),uploadLicense=(_0,_1)=>__async(void 0,[_0,_1],function*(dispatch,{formData,user}){try{const query=querystring__WEBPACK_IMPORTED_MODULE_2__.stringify({jwt:user.token}),res=yield axios__WEBPACK_IMPORTED_MODULE_1___default().post(constants_server__WEBPACK_IMPORTED_MODULE_4__.ZP+"/upload_license?"+query,formData);(0,actions_notification__WEBPACK_IMPORTED_MODULE_6__.wN)(dispatch,{title:i18next__WEBPACK_IMPORTED_MODULE_3__.ZP.t("common:uploaded"),message:res.data.message,level:"success",position:"tl",autoDismiss:5}),dispatch(receivedLicense(res.data.license))}catch(err){return(0,actions_notification__WEBPACK_IMPORTED_MODULE_6__.EG)(dispatch,err)}}),uploadLicenseInjector=dispatch=>_0=>__async(void 0,[_0],function*({formData,user}){yield uploadLicense(dispatch,{formData,user})}),getLicense=(dispatch,user)=>__async(void 0,null,function*(){try{const query=querystring__WEBPACK_IMPORTED_MODULE_2__.stringify({jwt:user.token}),res=yield axios__WEBPACK_IMPORTED_MODULE_1___default().get(constants_server__WEBPACK_IMPORTED_MODULE_4__.ZP+"/get_license?"+query);dispatch(receivedLicense(res.data.license))}catch(err){return(0,actions_notification__WEBPACK_IMPORTED_MODULE_6__.EG)(dispatch,err)}}),getLicenseInjector=dispatch=>user=>__async(void 0,null,function*(){yield getLicense(dispatch,user)}),removeLicense=dispatch=>__async(void 0,null,function*(){try{(yield axios__WEBPACK_IMPORTED_MODULE_1___default().post(constants_server__WEBPACK_IMPORTED_MODULE_4__.ZP+"/remove_license")).data.message==="ok"&&dispatch(removedLicense())}catch(err){return err.message.includes("404")&&dispatch(removedLicense()),(0,actions_notification__WEBPACK_IMPORTED_MODULE_6__.EG)(dispatch,err)}}),removeLicenseInjector=dispatch=>()=>__async(void 0,null,function*(){yield removeLicense(dispatch)}),uploadLogo=(_0,_1)=>__async(void 0,[_0,_1],function*(dispatch,{formData,user}){try{const query=querystring__WEBPACK_IMPORTED_MODULE_2__.stringify({jwt:user.token}),res=yield axios__WEBPACK_IMPORTED_MODULE_1___default().post(constants_server__WEBPACK_IMPORTED_MODULE_4__.ZP+"/upload_logo?"+query,formData);return(0,actions_notification__WEBPACK_IMPORTED_MODULE_6__.wN)(dispatch,{title:i18next__WEBPACK_IMPORTED_MODULE_3__.ZP.t("common:uploaded"),message:res.data.message,level:"success",position:"tl",autoDismiss:5}),dispatch({type:constants_action_types_js__WEBPACK_IMPORTED_MODULE_7__.TH,payload:res.data}),res.data}catch(err){return(0,actions_notification__WEBPACK_IMPORTED_MODULE_6__.EG)(dispatch,err),err}}),uploadLogoInjector=dispatch=>_0=>__async(void 0,[_0],function*({formData,user}){return yield uploadLogo(dispatch,{formData,user})})},41054:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Ao:function(){return deleteTicketInjector},Cn:function(){return createTicketInjector},Cq:function(){return updatePriorityInjector},Lf:function(){return getAllTicketsInjector},P3:function(){return getCourseTicketsInjector},S$:function(){return getUserTicketsInjector},fG:function(){return sendTicketMessageInjector},mJ:function(){return openTicketInjector},xG:function(){return closeTicketInjector}});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(67294),axios__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(9669),axios__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_1__),querystring__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(17673),constants_server__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(94204),i18next__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(41631),actions_notification__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(16120),constants_action_types_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(84499),__async=(__this,__arguments,generator)=>new Promise((resolve,reject)=>{var fulfilled=value=>{try{step(generator.next(value))}catch(e){reject(e)}},rejected=value=>{try{step(generator.throw(value))}catch(e){reject(e)}},step=x=>x.done?resolve(x.value):Promise.resolve(x.value).then(fulfilled,rejected);step((generator=generator.apply(__this,__arguments)).next())});const getAllTickets=dispatch=>__async(void 0,null,function*(){try{const res=yield axios__WEBPACK_IMPORTED_MODULE_1___default().get(constants_server__WEBPACK_IMPORTED_MODULE_3__.ZP+"/get_all_tickets");dispatch({type:constants_action_types_js__WEBPACK_IMPORTED_MODULE_5__.rq,payload:{tickets:res.data.tickets}})}catch(err){return(0,actions_notification__WEBPACK_IMPORTED_MODULE_6__.EG)(dispatch,err)}}),getAllTicketsInjector=dispatch=>()=>__async(void 0,null,function*(){yield getAllTickets(dispatch)}),getCourseTickets=(dispatch,namespaceID)=>__async(void 0,null,function*(){try{const res=yield axios__WEBPACK_IMPORTED_MODULE_1___default().get(constants_server__WEBPACK_IMPORTED_MODULE_3__.ZP+"/get_course_tickets?"+querystring__WEBPACK_IMPORTED_MODULE_2__.stringify({namespaceID}));dispatch({type:constants_action_types_js__WEBPACK_IMPORTED_MODULE_5__.W1,payload:{tickets:res.data.tickets}})}catch(err){return(0,actions_notification__WEBPACK_IMPORTED_MODULE_6__.EG)(dispatch,err)}}),getCourseTicketsInjector=dispatch=>id=>__async(void 0,null,function*(){yield getCourseTickets(dispatch,id)}),getUserTickets=dispatch=>__async(void 0,null,function*(){try{const res=yield axios__WEBPACK_IMPORTED_MODULE_1___default().get(constants_server__WEBPACK_IMPORTED_MODULE_3__.ZP+"/get_user_tickets");dispatch({type:constants_action_types_js__WEBPACK_IMPORTED_MODULE_5__.cv,payload:{tickets:res.data.tickets}})}catch(err){return(0,actions_notification__WEBPACK_IMPORTED_MODULE_6__.EG)(dispatch,err)}}),getUserTicketsInjector=dispatch=>()=>__async(void 0,null,function*(){yield getUserTickets(dispatch)}),deleteTicket=(dispatch,id)=>__async(void 0,null,function*(){try{const res=yield axios__WEBPACK_IMPORTED_MODULE_1___default().post(constants_server__WEBPACK_IMPORTED_MODULE_3__.ZP+"/delete_ticket",{id});(0,actions_notification__WEBPACK_IMPORTED_MODULE_6__.wN)(dispatch,{title:i18next__WEBPACK_IMPORTED_MODULE_4__.ZP.t("common:deleted"),message:res.data.message,level:"success"}),dispatch({type:constants_action_types_js__WEBPACK_IMPORTED_MODULE_5__.SZ,payload:{id}})}catch(err){return(0,actions_notification__WEBPACK_IMPORTED_MODULE_6__.EG)(dispatch,err)}}),deleteTicketInjector=dispatch=>id=>__async(void 0,null,function*(){yield deleteTicket(dispatch,id)}),createTicket=(_0,_1)=>__async(void 0,[_0,_1],function*(dispatch,{title,description,platform,namespace,files}){try{let res,attachments;if(!files||files.length===0)res=yield axios__WEBPACK_IMPORTED_MODULE_1___default().post(constants_server__WEBPACK_IMPORTED_MODULE_3__.ZP+"/create_ticket",{title,description,platform,namespaceID:namespace._id}),attachments=[];else{const formData=new FormData;for(let i=0;i<files.length;i++)formData.append("attachment",files[i]);formData.append("title",title),formData.append("description",description),formData.append("platform",JSON.stringify(platform)),formData.append("namespaceID",namespace._id),res=yield axios__WEBPACK_IMPORTED_MODULE_1___default().post(constants_server__WEBPACK_IMPORTED_MODULE_3__.ZP+"/create_ticket",formData),attachments=res.data.attachments}return(0,actions_notification__WEBPACK_IMPORTED_MODULE_6__.wN)(dispatch,{title:i18next__WEBPACK_IMPORTED_MODULE_4__.ZP.t("common:created"),message:res.data.message,level:"success"}),dispatch({type:constants_action_types_js__WEBPACK_IMPORTED_MODULE_5__.NH,payload:{title,description,platform,namespace,attachments}}),res}catch(err){return(0,actions_notification__WEBPACK_IMPORTED_MODULE_6__.EG)(dispatch,err)}}),createTicketInjector=dispatch=>_0=>__async(void 0,[_0],function*({title,description,platform,namespace,files}){yield createTicket(dispatch,{title,description,platform,namespace,files})}),sendTicketMessage=(_0,_1)=>__async(void 0,[_0,_1],function*(dispatch,{message,ticketID,user}){try{const res=yield axios__WEBPACK_IMPORTED_MODULE_1___default().post(constants_server__WEBPACK_IMPORTED_MODULE_3__.ZP+"/add_ticket_message",{body:message,ticketID}),msgObj={body:message,author:user.name,email:user.email,picture:user.picture,createdAt:new Date().getTime()};dispatch({type:constants_action_types_js__WEBPACK_IMPORTED_MODULE_5__.JB,payload:{id:ticketID,message:msgObj}}),(0,actions_notification__WEBPACK_IMPORTED_MODULE_6__.wN)(dispatch,{title:i18next__WEBPACK_IMPORTED_MODULE_4__.ZP.t("common:added"),message:res.data.message,level:"success"})}catch(err){return(0,actions_notification__WEBPACK_IMPORTED_MODULE_6__.EG)(dispatch,err)}}),sendTicketMessageInjector=dispatch=>_0=>__async(void 0,[_0],function*({message,ticketID,user}){yield sendTicketMessage(dispatch,{message,ticketID,user})}),closeTicket=(dispatch,id)=>__async(void 0,null,function*(){try{const res=yield axios__WEBPACK_IMPORTED_MODULE_1___default().post(constants_server__WEBPACK_IMPORTED_MODULE_3__.ZP+"/close_ticket",{ticketID:id});(0,actions_notification__WEBPACK_IMPORTED_MODULE_6__.wN)(dispatch,{title:i18next__WEBPACK_IMPORTED_MODULE_4__.ZP.t("common:closed"),message:res.data.message,level:"success"}),dispatch({type:constants_action_types_js__WEBPACK_IMPORTED_MODULE_5__.mI,payload:{id}})}catch(err){return(0,actions_notification__WEBPACK_IMPORTED_MODULE_6__.EG)(dispatch,err)}}),closeTicketInjector=dispatch=>id=>__async(void 0,null,function*(){yield closeTicket(dispatch,id)}),updatePriority=(dispatch,id,priority)=>__async(void 0,null,function*(){try{const res=yield axios__WEBPACK_IMPORTED_MODULE_1___default().post(constants_server__WEBPACK_IMPORTED_MODULE_3__.ZP+"/update_ticket_priority",{ticketID:id,priority});(0,actions_notification__WEBPACK_IMPORTED_MODULE_6__.wN)(dispatch,{title:i18next__WEBPACK_IMPORTED_MODULE_4__.ZP.t("common:updated"),message:res.data.message,level:"success"}),dispatch({type:constants_action_types_js__WEBPACK_IMPORTED_MODULE_5__.B2,payload:{id,priority}})}catch(err){return(0,actions_notification__WEBPACK_IMPORTED_MODULE_6__.EG)(dispatch,err)}}),updatePriorityInjector=dispatch=>(id,priority)=>__async(void 0,null,function*(){yield updatePriority(dispatch,id,priority)}),openTicket=(dispatch,id)=>__async(void 0,null,function*(){try{const res=yield axios__WEBPACK_IMPORTED_MODULE_1___default().post(constants_server__WEBPACK_IMPORTED_MODULE_3__.ZP+"/open_ticket",{ticketID:id});(0,actions_notification__WEBPACK_IMPORTED_MODULE_6__.wN)(dispatch,{title:i18next__WEBPACK_IMPORTED_MODULE_4__.ZP.t("common:opened"),message:res.data.message,level:"success"}),dispatch({type:constants_action_types_js__WEBPACK_IMPORTED_MODULE_5__.wL,payload:{id}})}catch(err){return(0,actions_notification__WEBPACK_IMPORTED_MODULE_6__.EG)(dispatch,err)}}),openTicketInjector=dispatch=>id=>__async(void 0,null,function*(){yield openTicket(dispatch,id)})},15052:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(67294),components_spinner__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(72885),__defProp=Object.defineProperty,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(obj,key,value)=>key in obj?__defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value}):obj[key]=value,__spreadValues=(a,b)=>{for(var prop in b||(b={}))__hasOwnProp.call(b,prop)&&__defNormalProp(a,prop,b[prop]);if(__getOwnPropSymbols)for(var prop of __getOwnPropSymbols(b))__propIsEnum.call(b,prop)&&__defNormalProp(a,prop,b[prop]);return a},__async=(__this,__arguments,generator)=>new Promise((resolve,reject)=>{var fulfilled=value=>{try{step(generator.next(value))}catch(e){reject(e)}},rejected=value=>{try{step(generator.throw(value))}catch(e){reject(e)}},step=x=>x.done?resolve(x.value):Promise.resolve(x.value).then(fulfilled,rejected);step((generator=generator.apply(__this,__arguments)).next())});function asyncComponent(importComponent){class AsyncComponent extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state={component:null}}componentDidMount(){return __async(this,null,function*(){const{default:component}=yield importComponent();this.setState({component})})}render(){const C=this.state.component;return C?react__WEBPACK_IMPORTED_MODULE_0__.createElement(C,__spreadValues({},this.props)):react__WEBPACK_IMPORTED_MODULE_0__.createElement(components_spinner__WEBPACK_IMPORTED_MODULE_1__.Z,null)}}return AsyncComponent}__webpack_exports__.Z=asyncComponent},5760:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Z:function(){return ticket_modal}});var react=__webpack_require__(67294),prop_types=__webpack_require__(45697),prop_types_default=__webpack_require__.n(prop_types),commonjs=__webpack_require__(81468),Button=__webpack_require__(89876),Button_default=__webpack_require__.n(Button),OverlayTrigger=__webpack_require__(99201),OverlayTrigger_default=__webpack_require__.n(OverlayTrigger),Tooltip=__webpack_require__(18868),Tooltip_default=__webpack_require__.n(Tooltip),Modal=__webpack_require__(89194),Modal_default=__webpack_require__.n(Modal),FormLabel=__webpack_require__(65903),FormLabel_default=__webpack_require__.n(FormLabel),FormControl=__webpack_require__(26199),FormControl_default=__webpack_require__.n(FormControl),FormGroup=__webpack_require__(34168),FormGroup_default=__webpack_require__.n(FormGroup),server=__webpack_require__(94204),__defProp=Object.defineProperty,__defNormalProp=(obj,key,value)=>key in obj?__defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value}):obj[key]=value,__publicField=(obj,key,value)=>(__defNormalProp(obj,typeof key!="symbol"?key+"":key,value),value);const createTooltip=str=>react.createElement(Tooltip_default(),{id:"tooltip"},str);class TicketModal extends react.Component{constructor(props){super(props),__publicField(this,"handleResponseChange",event=>{this.setState({response:event.target.value})}),__publicField(this,"handleResponseSubmit",()=>{this.props.submitTicketMessage({message:this.state.response,ticketID:this.props.ticket._id}),this.setState({response:""})}),__publicField(this,"toggleCompletion",()=>{this.props.ticket.done?this.props.openTicket(this.props.ticket._id):this.props.closeTicket(this.props.ticket._id)}),__publicField(this,"renderMessage",(val,idx)=>{const t=this.props.t,createdAt=new Date(val.createdAt);return react.createElement("div",{className:"message-container",key:idx},react.createElement("div",{className:"message-data"},react.createElement("div",{className:"message-profile-pic"},react.createElement("img",{src:`${server.ZP}/thumbnail/${val.picture}`,alt:"User Profile Pic"})),react.createElement("div",{className:"message-author-line"},react.createElement("span",{className:"message-author"},val.author),"\xA0",t("common:wrote-on",{date:`${createdAt.toLocaleTimeString()} ${createdAt.toLocaleDateString()}`}))),react.createElement("div",{className:"message-body"},val.body))}),this.state={response:""}}render(){const t=this.props.t,{ticket}=this.props;return react.createElement(react.Fragment,null,react.createElement(Modal_default(),{show:this.props.show,onHide:this.props.onHide,dialogClassName:"modal-60w"},react.createElement(Modal_default().Header,null,react.createElement(Modal_default().Title,{as:"h3",style:{width:"100%"}},t("common:title"),": ",ticket.title,react.createElement(OverlayTrigger_default(),{placement:"right",overlay:createTooltip(t("close-ticket-modal"))},react.createElement(Button_default(),{onClick:this.props.onHide,style:{float:"right"},variant:"outline-secondary","aria-label":t("close-ticket-modal"),className:"modal-close"},react.createElement("span",{"aria-hidden":"true"},"x"))))),react.createElement(Modal_default().Body,{style:{height:"60vh",overflowY:"auto"}},react.createElement("span",{className:"title"},t("common:description"),":"),react.createElement("p",{style:{whiteSpace:"pre-wrap"}},ticket.description),react.createElement("hr",null),ticket.namespace.title?react.createElement(react.Fragment,null,react.createElement("span",{className:"title"},`${t("common:course")}: `),react.createElement("span",null,ticket.namespace.title)," | "):null,ticket.lesson?react.createElement(react.Fragment,null,react.createElement("span",{className:"title"},`${t("common:lesson")}: `),react.createElement("span",null,ticket.lesson.title)," | "):null,ticket.component?react.createElement(react.Fragment,null,react.createElement("span",{className:"title"},`${t("common:component")}: `),react.createElement("span",null,ticket.component)):null,ticket.attachments.length>0?react.createElement(react.Fragment,null,react.createElement("br",null),react.createElement("span",{className:"title"},`${t("common:attachments")}: `),ticket.attachments.map((file,idx)=>react.createElement("a",{"aria-label":t("common:attachments"),href:`${server.ZP}/attachments/${file.filename}`,key:idx,style:{marginLeft:6},target:"_blank",rel:"noopener noreferrer"},react.createElement("i",{className:"fas fa-link",style:{marginRight:2}}),file.title))):null,react.createElement("br",null),react.createElement("hr",null),react.createElement("span",{className:"title"},t("common:messages"),":"),ticket.messages.map(this.renderMessage),react.createElement("hr",null)),react.createElement(Modal_default().Footer,{style:{background:"ghostwhite"}},react.createElement(FormGroup_default(),{controlId:"form-text",style:{width:"calc(100% - 200px)"}},react.createElement(FormLabel_default(),null,t("enter-response")),react.createElement(FormControl_default(),{name:"body",type:"text",as:"textarea",rows:"5",value:this.state.response,placeholder:ticket.done?t("require-open-ticket"):t("response-comes-here"),onChange:this.handleResponseChange,disabled:ticket.done})),react.createElement("div",{style:{float:"right",width:"180px"},className:"d-grid gap-2"},react.createElement(Button_default(),{onClick:this.handleResponseSubmit,disabled:!this.state.response||ticket.done},t("submit-response")),react.createElement(Button_default(),{onClick:this.toggleCompletion},ticket.done?t("common:open-ticket"):t("common:close-ticket")),react.createElement(Button_default(),{onClick:this.props.onHide},t("common:hide"))))))}}TicketModal.propTypes={closeTicket:prop_types_default().func.isRequired,onHide:prop_types_default().func.isRequired,openTicket:prop_types_default().func.isRequired,show:prop_types_default().bool.isRequired,submitTicketMessage:prop_types_default().func.isRequired,ticket:prop_types_default().object.isRequired},TicketModal.defaultProps={};var ticket_modal=(0,commonjs.Zh)(["ticket_modal","common"])(TicketModal)},27505:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _stdlib_math_base_special_floor__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(78113),_stdlib_math_base_special_floor__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_stdlib_math_base_special_floor__WEBPACK_IMPORTED_MODULE_0__);const formatTime=(time,opts={hours:!0,minutes:!0,seconds:!0})=>{time=time/1e3;const hours=_stdlib_math_base_special_floor__WEBPACK_IMPORTED_MODULE_0___default()(time/(60*60));time=time%(60*60);let minutes=_stdlib_math_base_special_floor__WEBPACK_IMPORTED_MODULE_0___default()(time/60);minutes<10&&(minutes="0"+minutes),time=time%60;let seconds=_stdlib_math_base_special_floor__WEBPACK_IMPORTED_MODULE_0___default()(time);seconds<10&&(seconds="0"+seconds);let out="";return opts.hours&&(out+=hours),opts.minutes&&(out&&(out+=":"),out+=minutes),opts.seconds&&(out&&(out+=":"),out+=seconds),out};__webpack_exports__.Z=formatTime},60176:function(){}}]);

//# sourceMappingURL=9397.fef0311a.chunk.js.map