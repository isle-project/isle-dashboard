"use strict";var __defProp=Object.defineProperty,__defProps=Object.defineProperties;var __getOwnPropDescs=Object.getOwnPropertyDescriptors;var __getOwnPropSymbols=Object.getOwnPropertySymbols;var __hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable;var __defNormalProp=(obj,key,value)=>key in obj?__defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value}):obj[key]=value,__spreadValues=(a,b)=>{for(var prop in b||(b={}))__hasOwnProp.call(b,prop)&&__defNormalProp(a,prop,b[prop]);if(__getOwnPropSymbols)for(var prop of __getOwnPropSymbols(b))__propIsEnum.call(b,prop)&&__defNormalProp(a,prop,b[prop]);return a},__spreadProps=(a,b)=>__defProps(a,__getOwnPropDescs(b));var __objRest=(source,exclude)=>{var target={};for(var prop in source)__hasOwnProp.call(source,prop)&&exclude.indexOf(prop)<0&&(target[prop]=source[prop]);if(source!=null&&__getOwnPropSymbols)for(var prop of __getOwnPropSymbols(source))exclude.indexOf(prop)<0&&__propIsEnum.call(source,prop)&&(target[prop]=source[prop]);return target};(self.webpackChunkisle_dashboard=self.webpackChunkisle_dashboard||[]).push([[3589],{55809:function(module,__unused_webpack_exports,__webpack_require__){var round=__webpack_require__(87915);module.exports=round},87915:function(module){var round=Math.round;module.exports=round},63589:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(67294),prop_types__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(45697),prop_types__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_8__),react_i18next__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(81468),react_bootstrap_Table__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(80983),react_bootstrap_Table__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(react_bootstrap_Table__WEBPACK_IMPORTED_MODULE_4__),react_bootstrap_Button__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(89876),react_bootstrap_Button__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(react_bootstrap_Button__WEBPACK_IMPORTED_MODULE_7__),react_bootstrap_OverlayTrigger__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(99201),react_bootstrap_OverlayTrigger__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(react_bootstrap_OverlayTrigger__WEBPACK_IMPORTED_MODULE_5__),react_bootstrap_Tooltip__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(18868),react_bootstrap_Tooltip__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(react_bootstrap_Tooltip__WEBPACK_IMPORTED_MODULE_6__),_stdlib_math_base_special_round__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(55809),_stdlib_math_base_special_round__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_stdlib_math_base_special_round__WEBPACK_IMPORTED_MODULE_1__),components_confirm_modal__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(88608),constants_server__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(94204),__defProp2=Object.defineProperty,__defNormalProp2=(obj,key,value)=>key in obj?__defProp2(obj,key,{enumerable:!0,configurable:!0,writable:!0,value}):obj[key]=value,__publicField=(obj,key,value)=>(__defNormalProp2(obj,typeof key!="symbol"?key+"":key,value),value),__async=(__this,__arguments,generator)=>new Promise((resolve,reject)=>{var fulfilled=value=>{try{step(generator.next(value))}catch(e){reject(e)}},rejected=value=>{try{step(generator.throw(value))}catch(e){reject(e)}},step=x=>x.done?resolve(x.value):Promise.resolve(x.value).then(fulfilled,rejected);step((generator=generator.apply(__this,__arguments)).next())});class BackupsPage extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props);__publicField(this,"handleBackupCreation",()=>{this.props.createBackup()}),__publicField(this,"askToDeleteSelectedBackupFactory",backup=>()=>{this.setState({showDeleteModal:!this.state.showDeleteModal,selectedBackup:backup})}),__publicField(this,"deleteSelectedBackup",()=>{this.setState({showDeleteModal:!1},()=>__async(this,null,function*(){yield this.props.deleteBackup(this.state.selectedBackup._id)}))}),__publicField(this,"toggleDeleteModal",()=>{this.setState({showDeleteModal:!this.state.showDeleteModal})}),this.state={selectedBackup:null,showDeleteModal:!1}}componentDidMount(){this.props.getBackups()}renderBackupList(){if(!this.props.admin.backups)return null;const{t}=this.props;return react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_bootstrap_Table__WEBPACK_IMPORTED_MODULE_4___default(),{striped:!0,bordered:!0,hover:!0},react__WEBPACK_IMPORTED_MODULE_0__.createElement("thead",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("tr",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("th",null,t("common:filename")),react__WEBPACK_IMPORTED_MODULE_0__.createElement("th",null,t("common:size")),react__WEBPACK_IMPORTED_MODULE_0__.createElement("th",null,t("common:date")),react__WEBPACK_IMPORTED_MODULE_0__.createElement("th",null,t("common:actions")))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("tbody",null,this.props.admin.backups.map((x,idx)=>{if(!x)return null;const size=_stdlib_math_base_special_round__WEBPACK_IMPORTED_MODULE_1___default()(x.size/(1024*1024));return react__WEBPACK_IMPORTED_MODULE_0__.createElement("tr",{key:idx},react__WEBPACK_IMPORTED_MODULE_0__.createElement("td",null,x.filename),react__WEBPACK_IMPORTED_MODULE_0__.createElement("td",null,`${size} MB`),react__WEBPACK_IMPORTED_MODULE_0__.createElement("td",null,x.createdAt),react__WEBPACK_IMPORTED_MODULE_0__.createElement("td",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("a",{"aria-label":t("download-backup"),href:`${constants_server__WEBPACK_IMPORTED_MODULE_3__.ZP}/${x.filename}`,target:"_blank",rel:"noopener noreferrer"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_bootstrap_OverlayTrigger__WEBPACK_IMPORTED_MODULE_5___default(),{placement:"bottom",overlay:react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_bootstrap_Tooltip__WEBPACK_IMPORTED_MODULE_6___default(),{id:"download-backup-tooltip"},t("download-backup"))},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_bootstrap_Button__WEBPACK_IMPORTED_MODULE_7___default(),{"aria-label":t("download-backup"),size:"sm",variant:"secondary",style:{marginRight:8}},react__WEBPACK_IMPORTED_MODULE_0__.createElement("i",{className:"fas fa-cloud-download-alt"})))),react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_bootstrap_OverlayTrigger__WEBPACK_IMPORTED_MODULE_5___default(),{placement:"bottom",overlay:react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_bootstrap_Tooltip__WEBPACK_IMPORTED_MODULE_6___default(),{id:"delete-backup-tooltip"},t("delete-backup"))},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_bootstrap_Button__WEBPACK_IMPORTED_MODULE_7___default(),{"aria-label":t("delete-backup"),size:"sm",variant:"danger",onClick:this.askToDeleteSelectedBackupFactory(x)},react__WEBPACK_IMPORTED_MODULE_0__.createElement("i",{className:"fas fa-trash-alt"})))))})))}render(){const{t}=this.props;return react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"admin-settings-outer-container"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("h1",null,t("created-backups")),this.renderBackupList(),react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_bootstrap_Button__WEBPACK_IMPORTED_MODULE_7___default(),{size:"lg",onClick:this.handleBackupCreation},react__WEBPACK_IMPORTED_MODULE_0__.createElement("i",{className:"fas fa-cloud-upload-alt",style:{marginRight:12}}),t("create-backup"))),this.state.showDeleteModal?react__WEBPACK_IMPORTED_MODULE_0__.createElement(components_confirm_modal__WEBPACK_IMPORTED_MODULE_2__.Z,{title:t("delete-backup"),message:react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",null,t("delete-backup-confirm")),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{style:{color:"red"}},this.state.selectedBackup.filename)),close:this.toggleDeleteModal,show:this.state.showDeleteModal,onConfirm:this.deleteSelectedBackup}):null)}}BackupsPage.propTypes={admin:prop_types__WEBPACK_IMPORTED_MODULE_8___default().object.isRequired,createBackup:prop_types__WEBPACK_IMPORTED_MODULE_8___default().func.isRequired,deleteBackup:prop_types__WEBPACK_IMPORTED_MODULE_8___default().func.isRequired,getBackups:prop_types__WEBPACK_IMPORTED_MODULE_8___default().func.isRequired},__webpack_exports__.default=(0,react_i18next__WEBPACK_IMPORTED_MODULE_9__.Zh)(["admin_settings","common"])(BackupsPage)},88608:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(67294),prop_types__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(45697),prop_types__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_3__),react_i18next__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(81468),react_bootstrap_Button__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(89876),react_bootstrap_Button__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(react_bootstrap_Button__WEBPACK_IMPORTED_MODULE_2__),react_bootstrap_Modal__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(89194),react_bootstrap_Modal__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(react_bootstrap_Modal__WEBPACK_IMPORTED_MODULE_1__);const ConfirmModal=props=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_bootstrap_Modal__WEBPACK_IMPORTED_MODULE_1___default(),{show:props.show,onHide:props.close},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_bootstrap_Modal__WEBPACK_IMPORTED_MODULE_1___default().Header,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_bootstrap_Modal__WEBPACK_IMPORTED_MODULE_1___default().Title,{as:"h3"},props.title)),react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_bootstrap_Modal__WEBPACK_IMPORTED_MODULE_1___default().Body,null,props.message),react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_bootstrap_Modal__WEBPACK_IMPORTED_MODULE_1___default().Footer,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_bootstrap_Button__WEBPACK_IMPORTED_MODULE_2___default(),{onClick:props.close},props.t("cancel")),react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_bootstrap_Button__WEBPACK_IMPORTED_MODULE_2___default(),{variant:"danger",onClick:props.onConfirm},props.t("confirm"))));ConfirmModal.propTypes={close:prop_types__WEBPACK_IMPORTED_MODULE_3___default().func,message:prop_types__WEBPACK_IMPORTED_MODULE_3___default().node,onConfirm:prop_types__WEBPACK_IMPORTED_MODULE_3___default().func,show:prop_types__WEBPACK_IMPORTED_MODULE_3___default().bool,title:prop_types__WEBPACK_IMPORTED_MODULE_3___default().string},ConfirmModal.defaultProps={close(){},message:"",onConfirm(){},show:!1,title:""},__webpack_exports__.Z=(0,react_i18next__WEBPACK_IMPORTED_MODULE_4__.Zh)(["common"])(ConfirmModal)},80983:function(module,exports,__webpack_require__){var _interopRequireDefault=__webpack_require__(95318);exports.__esModule=!0,exports.default=void 0;var _classnames=_interopRequireDefault(__webpack_require__(94184)),React=_interopRequireWildcard(__webpack_require__(67294)),_ThemeProvider=__webpack_require__(3349),_jsxRuntime=__webpack_require__(85893);function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var _default=React.forwardRef((_a,ref)=>{var _b=_a,{bsPrefix,className,striped,bordered,borderless,hover,size,variant,responsive}=_b,props=__objRest(_b,["bsPrefix","className","striped","bordered","borderless","hover","size","variant","responsive"]);const decoratedBsPrefix=(0,_ThemeProvider.useBootstrapPrefix)(bsPrefix,"table"),classes=(0,_classnames.default)(className,decoratedBsPrefix,variant&&`${decoratedBsPrefix}-${variant}`,size&&`${decoratedBsPrefix}-${size}`,striped&&`${decoratedBsPrefix}-striped`,bordered&&`${decoratedBsPrefix}-bordered`,borderless&&`${decoratedBsPrefix}-borderless`,hover&&`${decoratedBsPrefix}-hover`),table=(0,_jsxRuntime.jsx)("table",__spreadProps(__spreadValues({},props),{className:classes,ref}));if(responsive){let responsiveClass=`${decoratedBsPrefix}-responsive`;return typeof responsive=="string"&&(responsiveClass=`${responsiveClass}-${responsive}`),(0,_jsxRuntime.jsx)("div",{className:responsiveClass,children:table})}return table});exports.default=_default,module.exports=exports.default}}]);

//# sourceMappingURL=3589.440e541b.chunk.js.map