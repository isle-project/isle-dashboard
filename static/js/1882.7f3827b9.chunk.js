var __defProp=Object.defineProperty,__defProps=Object.defineProperties;var __getOwnPropDescs=Object.getOwnPropertyDescriptors;var __getOwnPropSymbols=Object.getOwnPropertySymbols;var __hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable;var __defNormalProp=(obj,key,value)=>key in obj?__defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value}):obj[key]=value,__spreadValues=(a,b)=>{for(var prop in b||(b={}))__hasOwnProp.call(b,prop)&&__defNormalProp(a,prop,b[prop]);if(__getOwnPropSymbols)for(var prop of __getOwnPropSymbols(b))__propIsEnum.call(b,prop)&&__defNormalProp(a,prop,b[prop]);return a},__spreadProps=(a,b)=>__defProps(a,__getOwnPropDescs(b));var __objRest=(source,exclude)=>{var target={};for(var prop in source)__hasOwnProp.call(source,prop)&&exclude.indexOf(prop)<0&&(target[prop]=source[prop]);if(source!=null&&__getOwnPropSymbols)for(var prop of __getOwnPropSymbols(source))exclude.indexOf(prop)<0&&__propIsEnum.call(source,prop)&&(target[prop]=source[prop]);return target};(self.webpackChunkisle_dashboard=self.webpackChunkisle_dashboard||[]).push([[1882],{23646:function(module,__unused_webpack_exports,__webpack_require__){var arrayLikeToArray=__webpack_require__(67228);function _arrayWithoutHoles(arr){if(Array.isArray(arr))return arrayLikeToArray(arr)}module.exports=_arrayWithoutHoles,module.exports.__esModule=!0,module.exports.default=module.exports},46860:function(module){function _iterableToArray(iter){if(typeof Symbol!="undefined"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter)}module.exports=_iterableToArray,module.exports.__esModule=!0,module.exports.default=module.exports},98206:function(module){function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}module.exports=_nonIterableSpread,module.exports.__esModule=!0,module.exports.default=module.exports},319:function(module,__unused_webpack_exports,__webpack_require__){var arrayWithoutHoles=__webpack_require__(23646),iterableToArray=__webpack_require__(46860),unsupportedIterableToArray=__webpack_require__(60379),nonIterableSpread=__webpack_require__(98206);function _toConsumableArray(arr){return arrayWithoutHoles(arr)||iterableToArray(arr)||unsupportedIterableToArray(arr)||nonIterableSpread()}module.exports=_toConsumableArray,module.exports.__esModule=!0,module.exports.default=module.exports},64892:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(67294),prop_types__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(45697),prop_types__WEBPACK_IMPORTED_MODULE_15___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_15__),debug__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(11227),debug__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(debug__WEBPACK_IMPORTED_MODULE_1__),react_i18next__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(81468),react_bootstrap_OverlayTrigger__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(99201),react_bootstrap_OverlayTrigger__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(react_bootstrap_OverlayTrigger__WEBPACK_IMPORTED_MODULE_12__),react_bootstrap_Popover__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(44981),react_bootstrap_Popover__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(react_bootstrap_Popover__WEBPACK_IMPORTED_MODULE_11__),react_bootstrap_Button__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(89876),react_bootstrap_Button__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(react_bootstrap_Button__WEBPACK_IMPORTED_MODULE_14__),react_bootstrap_Tooltip__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(18868),react_bootstrap_Tooltip__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(react_bootstrap_Tooltip__WEBPACK_IMPORTED_MODULE_13__),components_dashboard_table__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1624),_stdlib_utils_pick__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(54401),_stdlib_utils_pick__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_stdlib_utils_pick__WEBPACK_IMPORTED_MODULE_3__),constants_server__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(94204),components_confirm_modal__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(88608),utils_create_boolean_column_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(3902),utils_create_text_column_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(90501),utils_create_date_column_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(30691),_isle_project_utils_obs_to_var__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(93390),ev_components_data_explorer__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(63787),__defProp2=Object.defineProperty,__defNormalProp2=(obj,key,value)=>key in obj?__defProp2(obj,key,{enumerable:!0,configurable:!0,writable:!0,value}):obj[key]=value,__publicField=(obj,key,value)=>(__defNormalProp2(obj,typeof key!="symbol"?key+"":key,value),value),__async=(__this,__arguments,generator)=>new Promise((resolve,reject)=>{var fulfilled=value=>{try{step(generator.next(value))}catch(e){reject(e)}},rejected=value=>{try{step(generator.throw(value))}catch(e){reject(e)}},step=x=>x.done?resolve(x.value):Promise.resolve(x.value).then(fulfilled,rejected);step((generator=generator.apply(__this,__arguments)).next())});const debug=debug__WEBPACK_IMPORTED_MODULE_1___default()("isle-dashboard:admin");class EventTable extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props);__publicField(this,"createColumns",()=>{const{t}=this.props;return[(0,utils_create_text_column_js__WEBPACK_IMPORTED_MODULE_7__.Z)({Header:t("common:type"),id:"type",accessor:"type",maxWidth:200,style:{marginTop:"8px",color:"darkslategrey"}}),(0,utils_create_date_column_js__WEBPACK_IMPORTED_MODULE_8__.Z)({Header:t("common:time"),accessor:"time",style:{marginTop:"2px",color:"darkslategrey"},maxWidth:150,t}),{Header:t("common:data"),accessor:"data",style:{marginTop:"2px",color:"darkslategrey",fontSize:24,textAlign:"center",cursor:"pointer"},Cell:row=>{if(row.value){const popover=react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_bootstrap_Popover__WEBPACK_IMPORTED_MODULE_11___default(),{id:"popover-data",style:{maxWidth:400}},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_bootstrap_Popover__WEBPACK_IMPORTED_MODULE_11___default().Header,{as:"h3"},"Data"),react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_bootstrap_Popover__WEBPACK_IMPORTED_MODULE_11___default().Body,{style:{backgroundColor:"lightblue"}},react__WEBPACK_IMPORTED_MODULE_0__.createElement("pre",null,JSON.stringify(row.value,null,2))));return react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_bootstrap_OverlayTrigger__WEBPACK_IMPORTED_MODULE_12___default(),{trigger:"click",placement:"right",overlay:popover},react__WEBPACK_IMPORTED_MODULE_0__.createElement("i",{className:"data-icon fas fa-tablet-alt"}))}return null},maxWidth:120,resizable:!1,filterable:!1,sortable:!1},(0,utils_create_boolean_column_js__WEBPACK_IMPORTED_MODULE_6__.Z)({Header:t("common:done"),accessor:"done",trueLabel:t("common:done"),falseLabel:t("common:not-done")}),{Header:"Pic",accessor:"user.picture",Cell:row=>react__WEBPACK_IMPORTED_MODULE_0__.createElement("img",{className:"table-pic",src:`${constants_server__WEBPACK_IMPORTED_MODULE_4__.ZP}/thumbnail/${row.value}`,alt:"Profile Pic"}),style:{marginTop:"8px",color:"darkslategrey"},maxWidth:46,minWidth:46,filterable:!1,resizable:!1,sortable:!1},(0,utils_create_text_column_js__WEBPACK_IMPORTED_MODULE_7__.Z)({Header:t("common:name"),accessor:"user.name",style:{marginTop:"8px",color:"darkslategrey"}}),(0,utils_create_text_column_js__WEBPACK_IMPORTED_MODULE_7__.Z)({Header:t("common:email"),accessor:"user.email",style:{marginTop:"8px",color:"darkslategrey"}}),{Header:t("common:actions"),Cell:row=>react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_bootstrap_OverlayTrigger__WEBPACK_IMPORTED_MODULE_12___default(),{placement:"bottom",overlay:react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_bootstrap_Tooltip__WEBPACK_IMPORTED_MODULE_13___default(),{id:"delete_event"},t("delete-event"))},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_bootstrap_Button__WEBPACK_IMPORTED_MODULE_14___default(),{variant:"outline-secondary",style:{marginLeft:8},onClick:this.askToDeleteSelectedEventFactory(row.row._original),"aria-label":t("delete-event")},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"fa fa-trash-alt"}))),react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_bootstrap_OverlayTrigger__WEBPACK_IMPORTED_MODULE_12___default(),{placement:"bottom",overlay:react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_bootstrap_Tooltip__WEBPACK_IMPORTED_MODULE_13___default(),{id:"trigger_event"},t("trigger-event"))},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_bootstrap_Button__WEBPACK_IMPORTED_MODULE_14___default(),{variant:"outline-secondary",style:{marginLeft:8},onClick:this.triggerEventFactory(row.row._original),"aria-label":t("trigger-event")},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"fas fa-share-square"})))),resizable:!1,filterable:!1,sortable:!1}]}),__publicField(this,"triggerEventFactory",row=>()=>{this.props.triggerEvent(row._id)}),__publicField(this,"askToDeleteSelectedEventFactory",event=>()=>{this.setState({showDeleteModal:!this.state.showDeleteModal,selectedEvent:event})}),__publicField(this,"deleteSelectedEvent",()=>{this.setState({showDeleteModal:!1},()=>__async(this,null,function*(){debug(`Delete event with id ${this.state.selectedEvent._id}...`),yield this.props.deleteEvent(this.state.selectedEvent._id),debug("Retrieve events from server..."),this.props.getEvents()}))}),__publicField(this,"toggleDeleteModal",()=>{this.setState({showDeleteModal:!this.state.showDeleteModal})}),__publicField(this,"toggleExplorer",()=>{this.setState({showExplorer:!this.state.showExplorer})}),this.columns=this.createColumns(),this.state={showDeleteModal:!1,selectedEvent:null,showExplorer:!1}}componentDidMount(){this.props.getEvents()}render(){const{t}=this.props;if(this.state.showExplorer){const variables=["user","done","time","type"];let events=(0,_isle_project_utils_obs_to_var__WEBPACK_IMPORTED_MODULE_9__.Z)(this.props.admin.events);return events=_stdlib_utils_pick__WEBPACK_IMPORTED_MODULE_3___default()(events,variables),events.user=events.user.map(x=>x?x.email:null),react__WEBPACK_IMPORTED_MODULE_0__.createElement(ev_components_data_explorer__WEBPACK_IMPORTED_MODULE_10__.Z,{title:t("explorer-events-title"),data:events,categorical:variables,quantitative:[],close:this.toggleExplorer})}return react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(components_dashboard_table__WEBPACK_IMPORTED_MODULE_2__.Z,{data:this.props.admin.events,columns:this.columns,onButtonClick:this.toggleExplorer,t:this.props.t}),this.state.showDeleteModal?react__WEBPACK_IMPORTED_MODULE_0__.createElement(components_confirm_modal__WEBPACK_IMPORTED_MODULE_5__.Z,{title:t("delete-event"),message:react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null,t("delete-event-confirm")),close:this.toggleDeleteModal,show:this.state.showDeleteModal,onConfirm:this.deleteSelectedEvent}):null)}}EventTable.propTypes={admin:prop_types__WEBPACK_IMPORTED_MODULE_15___default().object.isRequired,deleteEvent:prop_types__WEBPACK_IMPORTED_MODULE_15___default().func.isRequired,getEvents:prop_types__WEBPACK_IMPORTED_MODULE_15___default().func.isRequired,t:prop_types__WEBPACK_IMPORTED_MODULE_15___default().func.isRequired,triggerEvent:prop_types__WEBPACK_IMPORTED_MODULE_15___default().func.isRequired},__webpack_exports__.default=(0,react_i18next__WEBPACK_IMPORTED_MODULE_16__.Zh)(["admin","common"])(EventTable)},80405:function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(95318);exports.__esModule=!0,exports.default=void 0;var _classnames=_interopRequireDefault(__webpack_require__(94184)),React=_interopRequireWildcard(__webpack_require__(67294)),_propTypes=_interopRequireDefault(__webpack_require__(45697)),_jsxRuntime=__webpack_require__(85893);function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}const propTypes={type:_propTypes.default.string,tooltip:_propTypes.default.bool,as:_propTypes.default.elementType},Feedback=React.forwardRef((_a,ref)=>{var _b=_a,{as:Component="div",className,type="valid",tooltip=!1}=_b,props=__objRest(_b,["as","className","type","tooltip"]);return(0,_jsxRuntime.jsx)(Component,__spreadProps(__spreadValues({},props),{ref,className:(0,_classnames.default)(className,`${type}-${tooltip?"tooltip":"feedback"}`)}))});Feedback.displayName="Feedback",Feedback.propTypes=propTypes;var _default=Feedback;exports.default=_default,module.exports=exports.default},1409:function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.default=void 0;var React=_interopRequireWildcard(__webpack_require__(67294));function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var _default=React.createContext({});exports.default=_default,module.exports=exports.default},26199:function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(95318);exports.__esModule=!0,exports.default=void 0;var _classnames=_interopRequireDefault(__webpack_require__(94184)),React=_interopRequireWildcard(__webpack_require__(67294)),_warning=_interopRequireDefault(__webpack_require__(42473)),_Feedback=_interopRequireDefault(__webpack_require__(80405)),_FormContext=_interopRequireDefault(__webpack_require__(1409)),_ThemeProvider=__webpack_require__(3349),_jsxRuntime=__webpack_require__(85893);function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}const FormControl=React.forwardRef((_a,ref)=>{var _b=_a,{bsPrefix,type,size,htmlSize,id,className,isValid=!1,isInvalid=!1,plaintext,readOnly,as:Component="input"}=_b,props=__objRest(_b,["bsPrefix","type","size","htmlSize","id","className","isValid","isInvalid","plaintext","readOnly","as"]);const{controlId}=(0,React.useContext)(_FormContext.default);bsPrefix=(0,_ThemeProvider.useBootstrapPrefix)(bsPrefix,"form-control");let classes;return plaintext?classes={[`${bsPrefix}-plaintext`]:!0}:classes={[bsPrefix]:!0,[`${bsPrefix}-${size}`]:size},(0,_jsxRuntime.jsx)(Component,__spreadProps(__spreadValues({},props),{type,size:htmlSize,ref,readOnly,id:id||controlId,className:(0,_classnames.default)(className,classes,isValid&&"is-valid",isInvalid&&"is-invalid",type==="color"&&`${bsPrefix}-color`)}))});FormControl.displayName="FormControl";var _default=Object.assign(FormControl,{Feedback:_Feedback.default});exports.default=_default,module.exports=exports.default}}]);

//# sourceMappingURL=1882.7f3827b9.chunk.js.map