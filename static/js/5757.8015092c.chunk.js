"use strict";var __defProp=Object.defineProperty,__defProps=Object.defineProperties;var __getOwnPropDescs=Object.getOwnPropertyDescriptors;var __getOwnPropSymbols=Object.getOwnPropertySymbols;var __hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable;var __defNormalProp=(obj,key,value)=>key in obj?__defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value}):obj[key]=value,__spreadValues=(a,b)=>{for(var prop in b||(b={}))__hasOwnProp.call(b,prop)&&__defNormalProp(a,prop,b[prop]);if(__getOwnPropSymbols)for(var prop of __getOwnPropSymbols(b))__propIsEnum.call(b,prop)&&__defNormalProp(a,prop,b[prop]);return a},__spreadProps=(a,b)=>__defProps(a,__getOwnPropDescs(b));var __objRest=(source,exclude)=>{var target={};for(var prop in source)__hasOwnProp.call(source,prop)&&exclude.indexOf(prop)<0&&(target[prop]=source[prop]);if(source!=null&&__getOwnPropSymbols)for(var prop of __getOwnPropSymbols(source))exclude.indexOf(prop)<0&&__propIsEnum.call(source,prop)&&(target[prop]=source[prop]);return target};(self.webpackChunkisle_dashboard=self.webpackChunkisle_dashboard||[]).push([[5757],{85757:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:function(){return visible_complete_registration}});var lib=__webpack_require__(37424),react=__webpack_require__(67294),commonjs=__webpack_require__(81468),react_router_dom_production_min=__webpack_require__(59685),Button=__webpack_require__(89876),Button_default=__webpack_require__.n(Button),Card=__webpack_require__(51889),Card_default=__webpack_require__.n(Card),Col=__webpack_require__(1266),Row=__webpack_require__(28269),Row_default=__webpack_require__.n(Row),FormLabel=__webpack_require__(65903),FormLabel_default=__webpack_require__.n(FormLabel),FormControl=__webpack_require__(26199),FormControl_default=__webpack_require__.n(FormControl),FormGroup=__webpack_require__(34168),FormGroup_default=__webpack_require__.n(FormGroup),Form=__webpack_require__(17383),Form_default=__webpack_require__.n(Form),Modal=__webpack_require__(89194),Modal_default=__webpack_require__.n(Modal),Overlay=__webpack_require__(62760),Overlay_default=__webpack_require__.n(Overlay),Popover=__webpack_require__(44981),Popover_default=__webpack_require__.n(Popover),OverlayTrigger=__webpack_require__(99201),OverlayTrigger_default=__webpack_require__.n(OverlayTrigger),Tooltip=__webpack_require__(18868),Tooltip_default=__webpack_require__.n(Tooltip),prop_types=__webpack_require__(45697),prop_types_default=__webpack_require__.n(prop_types),query_string=__webpack_require__(17563),axios=__webpack_require__(9669),axios_default=__webpack_require__.n(axios),server=__webpack_require__(94204),login=__webpack_require__(97847),__async=(__this,__arguments,generator)=>new Promise((resolve,reject)=>{var fulfilled=value=>{try{step(generator.next(value))}catch(e){reject(e)}},rejected=value=>{try{step(generator.throw(value))}catch(e){reject(e)}},step=x=>x.done?resolve(x.value):Promise.resolve(x.value).then(fulfilled,rejected);step((generator=generator.apply(__this,__arguments)).next())});const createTooltip=str=>react.createElement(Tooltip_default(),{id:"tooltip"},str),validateName=name=>name&&name.length>=2,MsgModal=props=>react.createElement(Modal_default(),{show:props.show,onHide:props.close},react.createElement(Modal_default().Header,null,react.createElement(Modal_default().Title,null,"Registration Completion")),react.createElement(Modal_default().Body,null,props.message),react.createElement(Modal_default().Footer,null,react.createElement(Button_default(),{onClick:props.close},props.t("common:close"))));MsgModal.propTypes={close:prop_types_default().func.isRequired,message:prop_types_default().string.isRequired,show:prop_types_default().bool.isRequired};const CompleteRegistration=({settings})=>{const[firstName,setFirstName]=(0,react.useState)(""),[lastName,setLastName]=(0,react.useState)(""),[preferredName,setPreferredName]=(0,react.useState)(""),[password,setPassword]=(0,react.useState)(""),[passwordRepeat,setPasswordRepeat]=(0,react.useState)(""),[modal,setModal]=(0,react.useState)({show:!1,message:""}),[submitOverlay,setSubmitOverlay]=(0,react.useState)({show:!1,target:null}),{t}=(0,commonjs.$G)(["common","signup"]),navigate=(0,react_router_dom_production_min.useNavigate)(),validatePasswords=()=>!(password.length<6||passwordRepeat.length===0||password!==passwordRepeat),handlePasswordChange=event=>{setPassword(event.target.value)},handlePasswordRepeatChange=event=>{setPasswordRepeat(event.target.value)},handleSubmit=event=>__async(void 0,null,function*(){if(event.preventDefault(),validatePasswords()&&validateName(firstName)&&validateName(lastName))try{const search=window.location.search||window.location.hash.substring(24),token=query_string.parse(search).token,res=yield axios_default().post(server.ZP+"/complete_registration",{id:token,firstName,lastName,preferredName,password});setModal({show:!0,message:res.data.message})}catch(err){let msg;err.response?(msg="Server response: "+err.response.status+`.
`,msg+=err.response.data):msg=err.message,setModal({show:!0,message:msg})}else setSubmitOverlay({show:!0,target:event.target}),setTimeout(()=>{setSubmitOverlay({show:!1,target:null})},4e3);return!1}),handleClose=()=>{navigate("/")},enteredPasswords=password||passwordRepeat,validPasswords=validatePasswords(),renderedPassword=react.createElement(react.Fragment,null,react.createElement(OverlayTrigger_default(),{placement:"right",overlay:createTooltip("Please enter a new password with at least six characters")},react.createElement(FormGroup_default(),{controlId:"form-password"},react.createElement(Row_default(),null,react.createElement(Col.default,{sm:3},react.createElement(FormLabel_default(),null,t("common:password"))),react.createElement(Col.default,{sm:9},react.createElement(FormControl_default(),{name:"password",type:"password",placeholder:t("common:choose-new-password"),onChange:handlePasswordChange,maxLength:30,minLength:6,autoComplete:"new-password",isInvalid:enteredPasswords&&!validPasswords}),react.createElement(FormControl_default().Feedback,{type:"invalid"},"Please enter a new password with at least six characters."))))),react.createElement(FormGroup_default(),{controlId:"form-password-confirmation"},react.createElement(Row_default(),null,react.createElement(Col.default,{sm:{span:9,offset:3}},react.createElement(FormControl_default(),{name:"passwordRepeat",type:"password",placeholder:t("signup:confirm-password"),onChange:handlePasswordRepeatChange,maxLength:30,minLength:6,autoComplete:"new-password",isInvalid:enteredPasswords&&!validPasswords}),react.createElement(FormControl_default().Feedback,{type:"invalid"},t("signup:invalid-password"))))));return react.createElement("div",null,react.createElement("div",{className:"login"},react.createElement(Card_default(),{style:{opacity:.9}},react.createElement(Card_default().Header,null,react.createElement(Card_default().Title,{as:"h1"},react.createElement("small",null,"Complete Registration"))),react.createElement(Card_default().Body,null,react.createElement(Form_default(),{className:"d-grid gap-3"},react.createElement(OverlayTrigger_default(),{placement:"right",overlay:createTooltip(t("first-name-tooltip"))},react.createElement(FormGroup_default(),{controlId:"form-first-name"},react.createElement(Row_default(),null,react.createElement(Col.default,{sm:3},react.createElement(FormLabel_default(),null,t("common:first-name"))),react.createElement(Col.default,{sm:9},react.createElement(FormControl_default(),{name:"name",type:"text",placeholder:t("common:enter-first-name"),onChange:event=>{setFirstName(event.target.value)},isInvalid:firstName&&!validateName(firstName)}),react.createElement(Form_default().Control.Feedback,{type:"invalid"},t("invalid-name")))))),react.createElement(OverlayTrigger_default(),{placement:"right",overlay:createTooltip(t("preferred-name-tooltip"))},react.createElement(FormGroup_default(),{controlId:"form-preferred-name"},react.createElement(Row_default(),null,react.createElement(Col.default,{sm:3},react.createElement(FormLabel_default(),null,t("common:preferred-name"))),react.createElement(Col.default,{sm:9},react.createElement(FormControl_default(),{name:"name",type:"text",placeholder:t("common:enter-preferred-name"),onChange:event=>{setPreferredName(event.target.value)},isInvalid:preferredName&&!validateName(preferredName)}),react.createElement(Form_default().Control.Feedback,{type:"invalid"},t("invalid-name")))))),react.createElement(OverlayTrigger_default(),{placement:"right",overlay:createTooltip(t("last-name-tooltip"))},react.createElement(FormGroup_default(),{controlId:"form-name"},react.createElement(Row_default(),null,react.createElement(Col.default,{sm:3},react.createElement(FormLabel_default(),null,t("common:last-name"))),react.createElement(Col.default,{sm:9},react.createElement(FormControl_default(),{name:"name",type:"text",placeholder:t("common:enter-last-name"),onChange:event=>{setLastName(event.target.value)},isInvalid:lastName&&!validateName(lastName)}),react.createElement(Form_default().Control.Feedback,{type:"invalid"},t("invalid-name")))))),renderedPassword,react.createElement(FormGroup_default(),null,react.createElement(Button_default(),{variant:"primary",type:"submit",onClick:handleSubmit,className:"centered",disabled:!validateName(firstName)||!validateName(lastName)||!validPasswords},"Confirm")))))),modal.show?react.createElement(MsgModal,{show:modal.show,close:handleClose,message:modal.message,t}):null,react.createElement(Overlay_default(),{show:submitOverlay.show,target:submitOverlay.target,placement:"bottom",containerPadding:20},react.createElement(Popover_default(),{id:"popover-contained",title:"Input fields are not valid"},"Please make sure that the passwords are valid and match each other before submitting.")),settings.brandingLogo?react.createElement("img",{className:"login-branding-logo",src:settings.brandingLogo,alt:"Branded Logo"}):null)};CompleteRegistration.propTypes={settings:prop_types_default().object},CompleteRegistration.defaultProps={settings:{}};var complete_registration=CompleteRegistration;function mapStateToProps(state){return{settings:state.settings}}function mapDispatchToProps(){return{}}var visible_complete_registration=(0,lib.connect)(mapStateToProps,mapDispatchToProps)(complete_registration)},97847:function(){},28269:function(module,exports,__webpack_require__){var _interopRequireDefault=__webpack_require__(64836);exports.__esModule=!0,exports.default=void 0;var _classnames=_interopRequireDefault(__webpack_require__(94184)),React=_interopRequireWildcard(__webpack_require__(67294)),_ThemeProvider=__webpack_require__(3349),_jsxRuntime=__webpack_require__(85893);function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}const Row=React.forwardRef((_a,ref)=>{var _b=_a,{bsPrefix,className,as:Component="div"}=_b,props=__objRest(_b,["bsPrefix","className","as"]);const decoratedBsPrefix=(0,_ThemeProvider.useBootstrapPrefix)(bsPrefix,"row"),breakpoints=(0,_ThemeProvider.useBootstrapBreakpoints)(),sizePrefix=`${decoratedBsPrefix}-cols`,classes=[];return breakpoints.forEach(brkPoint=>{const propValue=props[brkPoint];delete props[brkPoint];let cols;propValue!=null&&typeof propValue=="object"?{cols}=propValue:cols=propValue;const infix=brkPoint!=="xs"?`-${brkPoint}`:"";cols!=null&&classes.push(`${sizePrefix}${infix}-${cols}`)}),(0,_jsxRuntime.jsx)(Component,__spreadProps(__spreadValues({ref},props),{className:(0,_classnames.default)(className,decoratedBsPrefix,...classes)}))});Row.displayName="Row";var _default=Row;exports.default=_default,module.exports=exports.default}}]);

//# sourceMappingURL=5757.8015092c.chunk.js.map