"use strict";(self.webpackChunkisle_dashboard=self.webpackChunkisle_dashboard||[]).push([[8201],{8177:function(e,t,a){a.d(t,{Qi:function(){return i},CP:function(){return c},Np:function(){return m},hb:function(){return d},mm:function(){return u}});var n=a(63022),s=a(67361),l=a(76417),o=a(1209),r=a(94883);const i=e=>async()=>{await(async e=>{try{const t=await r.Yy.get(n.ZP+"/get_custom_fields");e({type:o.C3,payload:{customFields:t.data.fields}})}catch(t){return(0,l.EG)(e,t)}})(e)},c=e=>async t=>{await(async(e,t)=>{try{const a=await r.Yy.post(n.ZP+"/increment_field_position",{id:t});e({type:o.S5,payload:{customFields:a.data.fields}})}catch(a){return(0,l.EG)(e,a)}})(e,t)},m=e=>async t=>{await(async(e,t)=>{try{const a=await r.Yy.post(n.ZP+"/decrement_field_position",{id:t});e({type:o.rh,payload:{customFields:a.data.fields}})}catch(a){return(0,l.EG)(e,a)}})(e,t)},d=e=>async t=>{await(async(e,t)=>{try{const a=await r.Yy.post(n.ZP+"/delete_custom_field",{id:t});(0,l.wN)(e,{title:s.Z.t("common:deleted"),message:a.data.message,level:"success"}),e({type:o.CH,payload:{id:t}})}catch(a){return(0,l.EG)(e,a)}})(e,t)},u=e=>async({name:t,description:a,type:i,options:c,position:m,showOnProfile:d,editableOnSignup:u,editableOnProfile:p})=>{await(async(e,{name:t,description:a,type:i,options:c,position:m,showOnProfile:d,editableOnSignup:u,editableOnProfile:p})=>{try{const h=await r.Yy.post(n.ZP+"/create_custom_field",{name:t,description:a,type:i,options:c,position:m,showOnProfile:d,editableOnSignup:u,editableOnProfile:p});return(0,l.wN)(e,{title:s.Z.t("common:created"),message:h.data.message,level:"success"}),e({type:o.Hs,payload:h.data.field}),h}catch(h){return(0,l.EG)(e,h)}})(e,{name:t,description:a,type:i,options:c,position:m,showOnProfile:d,editableOnSignup:u,editableOnProfile:p})}},38201:function(e,t,a){a.r(t),a.d(t,{default:function(){return M}});var n=a(38603),s=a(30322),l=a(91532),o=a.n(l),r=a(24466),i=a(58651),c=a(67289),m=a(12630),d=a(14224),u=a(30528),p=a(20328),h=a(47331),g=a(87078),E=a(56233),Z=a(72454),y=a(12908),w=a(81395),f=a(5610),b=a(69977),v=a(57927),C=a(2561),S=a.n(C),F=a(62810),P=a.n(F),k=a(14704),I=a(22109),O=a(67361);var x=(0,I.EN)((e=>n.createElement(k.Z,{variant:e.successful?"success":"warning",show:e.show},n.createElement(k.Z.Header,null,n.createElement(k.Z.Title,null,O.Z.t("signup:create-user"))),n.createElement(k.Z.Body,null,e.message),n.createElement(k.Z.Footer,null,e.successful?n.createElement(m.Z,{onClick:()=>{e.history.push("/login")}},O.Z.t("signup:go-to-login-page")):n.createElement(m.Z,{onClick:e.close},O.Z.t("signup:close"))))));a(22086);function N(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const _=e=>n.createElement(b.Z,{id:"tooltip"},e),V=S()("isle-dashboard:signup");class L extends n.Component{constructor(e){super(e),N(this,"handleSubmit",(async e=>{if(e.preventDefault(),this.getEmailValidationState()&&this.getNameValidationState()&&this.getPasswordValidationState())try{const e=await this.props.createUser((({name:e,email:t,password:a,customFields:n})=>({name:e,email:t,password:a,customFields:n}))(this.state));this.setState({message:e.data.message,successful:!0,showModal:!0})}catch(t){let e;e=t.response?t.response.data:t.message,V("Encountered an error: "+e),this.setState({message:e,successful:!1,showModal:!0})}else this.setState({showSubmitOverlay:!0,overlayTarget:e.target},(()=>{setTimeout((()=>{this.setState({showSubmitOverlay:!1})}),4e3)}))})),N(this,"handleInputChange",(e=>{const t=e.target,a=t.value,n=t.name;this.setState({[n]:a})})),N(this,"getEmailValidationState",(()=>P()(this.state.email))),N(this,"getNameValidationState",(()=>this.state.name.length>3)),N(this,"getPasswordValidationState",(()=>{const{password:e,passwordRepeat:t}=this.state;return!(e.length<6||0===t.length)&&e===t})),N(this,"close",(()=>{this.setState({showModal:!1})})),this.state={name:"",email:"",password:"",passwordRepeat:"",showModal:!1,customFields:{}}}componentDidMount(){this.props.getCustomFields()}renderEmail(){const{t:e}=this.props;return n.createElement(y.Z,{placement:"right",overlay:_(e("email-tooltip"))},n.createElement(E.Z,{controlId:"form-email"},n.createElement(p.Z,null,n.createElement(u.Z,{sm:3},n.createElement(h.Z,null,e("common:email"))),n.createElement(u.Z,{sm:9},n.createElement(g.Z,{name:"email",type:"email",autoComplete:"username email",placeholder:e("common:enter-email"),onChange:this.handleInputChange,isInvalid:this.state.email&&!this.getEmailValidationState()}),n.createElement(Z.Z.Control.Feedback,{type:"invalid"},e("invalid-email"))))))}renderName(){const{t:e}=this.props;return n.createElement(y.Z,{placement:"right",overlay:_(e("name-tooltip"))},n.createElement(E.Z,{controlId:"form-name"},n.createElement(p.Z,null,n.createElement(u.Z,{sm:3},n.createElement(h.Z,null,e("common:name"))),n.createElement(u.Z,{sm:9},n.createElement(g.Z,{name:"name",type:"text",placeholder:e("common:enter-name"),onChange:this.handleInputChange,isInvalid:this.state.name&&!this.getNameValidationState()}),n.createElement(Z.Z.Control.Feedback,{type:"invalid"},e("invalid-name"))))))}renderPasswordFields(){const{t:e}=this.props,t=this.getPasswordValidationState(),a=this.state.password||this.state.passwordRepeat;return n.createElement(n.Fragment,null,n.createElement(y.Z,{placement:"right",overlay:_(e("password-tooltip"))},n.createElement(E.Z,{controlId:"form-password"},n.createElement(p.Z,null,n.createElement(u.Z,{sm:3},n.createElement(h.Z,null,e("common:password"))),n.createElement(u.Z,{sm:9},n.createElement(g.Z,{name:"password",type:"password",autoComplete:"new-password",placeholder:e("choose-password"),onChange:this.handleInputChange,maxLength:30,minLength:6,isInvalid:a&&!t}),n.createElement(Z.Z.Control.Feedback,{type:"invalid"},e("invalid-password")))))),n.createElement(E.Z,{controlId:"form-repeat-password"},n.createElement(p.Z,null,n.createElement(u.Z,{sm:3},n.createElement(h.Z,null,e("common:repeat"))),n.createElement(u.Z,{sm:{span:9}},n.createElement(g.Z,{name:"passwordRepeat",type:"password",autoComplete:"new-password",placeholder:e("confirm-password"),onChange:this.handleInputChange,maxLength:30,minLength:6,isInvalid:a&&!t}),n.createElement(Z.Z.Control.Feedback,{type:"invalid"},e("invalid-password-match"))))))}render(){const{t:e,settings:t}=this.props,a=this.state.customFields,s=this.props.user.availableCustomFields||[];return n.createElement(n.Fragment,null,n.createElement("div",{className:"login"},n.createElement(d.Z,{style:{boxShadow:"0 0 8px rgba(0,0,0,0.3)",borderRadius:"6px",opacity:.98,background:"rgba(255,255,255,0.75)"}},n.createElement(d.Z.Header,null,n.createElement(d.Z.Title,{as:"h1",style:{textAlign:"center"}},"ISLE ",n.createElement("small",null,"Dashboard"))),n.createElement(d.Z.Body,null,n.createElement(Z.Z,null,this.renderEmail(),this.renderName(),this.renderPasswordFields(),s.filter((e=>e.editableOnSignup)).map(((e,t)=>{let s;const l=a[e.name];return s="checkbox"===e.type?n.createElement(E.Z,{controlId:`form-${e.name}`,as:p.Z},n.createElement(u.Z,{sm:3}),n.createElement(u.Z,{sm:3},n.createElement(Z.Z.Check,{type:"checkbox",label:e.name,defaultChecked:l,onChange:t=>{const a={...this.state.customFields};a[e.name]=t.target.checked,this.setState({customFields:a,changed:!0})}}))):"text"===e.type?n.createElement(E.Z,{controlId:`form-${e.name}`,as:p.Z},n.createElement(u.Z,{sm:3},n.createElement(h.Z,null,e.name)),n.createElement(u.Z,{sm:9},n.createElement(g.Z,{name:e.name,type:"text",value:l,placeholder:`Enter ${e.name}...`,onChange:t=>{const a={...this.state.customFields};a[e.name]=t.target.value,this.setState({customFields:a,changed:!0})},autoComplete:"none"}))):n.createElement(E.Z,{controlId:`form-${e.name}`,as:p.Z},n.createElement(u.Z,{sm:3},n.createElement(h.Z,null,e.name)),n.createElement(u.Z,{sm:9},n.createElement(c.ZP,{defaultValue:l?{label:l,value:l}:null,options:e.options.map((e=>({value:e,label:e}))),onChange:t=>{const a={...this.state.customFields};a[e.name]=t.value,this.setState({customFields:a,changed:!0})}}))),n.createElement(y.Z,{key:t,placement:"top",overlay:_(e.description)},s)})),n.createElement("p",null,n.createElement(r.c,{i18nKey:"signup:tos-disclaimer"},"Through clicking the signup button you agree to our ",n.createElement(v.rU,{to:"/terms"},"terms of service"),". Learn more about how your data is processed in our ",n.createElement(v.rU,{to:"/privacy"},"privacy policy"),".")),n.createElement(E.Z,null,n.createElement(m.Z,{variant:"primary",className:"centered",type:"submit",onClick:this.handleSubmit},e("common:register"))))),n.createElement(d.Z.Footer,{style:{background:"rgba(255,255,255,0.6)",textAlign:"right"}},n.createElement(v.rU,{to:"/forgot-password"},e("common:forgot-password")),n.createElement("span",null," | "),n.createElement(v.rU,{to:"/login"},e("common:login")))),t.brandingLogo?n.createElement("img",{className:"login-branding-logo",src:t.brandingLogo,alt:"Branded Logo"}):null),n.createElement(x,{show:this.state.showModal,close:this.close,message:this.state.message,successful:this.state.successful}),n.createElement(w.Z,{show:this.state.showSubmitOverlay,target:this.state.overlayTarget,placement:"right",containerPadding:20},n.createElement(f.Z,{id:"popover-contained",title:"Input fields are not valid"},e("signup-not-valid"))))}}L.propTypes={createUser:o().func.isRequired,getCustomFields:o().func.isRequired,settings:o().object,user:o().object},L.defaultProps={settings:{},user:{}};var R=(0,i.Z)(["signup","common"])(L),T=a(96162),U=a(8177);var M=(0,s.$j)((function(e){return{user:e.user,settings:e.settings}}),(function(e){return{createUser:T.r4,getCustomFields:(0,U.Qi)(e)}}))(R)},22086:function(){}}]);
//# sourceMappingURL=8201.3c260626.chunk.js.map