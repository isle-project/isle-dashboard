{"version":3,"sources":["actions/namespace.js","components/create-namespace/index.js","components/text-select/index.js","utils/check_url_path.js","utils/file_saver.js"],"names":[],"mappings":"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","file":"static/js/8498.ebc1fb37.chunk.js","sourcesContent":["/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport axios from 'axios';\nimport qs from 'querystring';\nimport i18next from 'i18next';\nimport saveAs from 'utils/file_saver.js';\nimport server from 'constants/server';\nimport { addNotification, addErrorNotification } from 'actions/notification';\nimport { getCohorts } from 'actions/cohort';\nimport { APPEND_CREATED_NAMESPACE, CHANGED_NAMESPACE, DELETED_CURRENT_NAMESPACE, GET_ALL_NAMESPACES, UPDATED_OWNED_NAMESPACE, UPDATED_STUDENT_PROGRESS } from 'constants/action_types.js';\n\n\n// EXPORTS //\n\n/**\n * Returns an action object to be used in signalling that a namespace has been created.\n *\n * @param {Object} namespace - the created namespace\n * @returns {Object} the action object\n */\nexport function appendCreatedNamespace( namespace ) {\n\treturn {\n\t\ttype: APPEND_CREATED_NAMESPACE,\n\t\tpayload: {\n\t\t\tnamespace\n\t\t}\n\t};\n}\n\n/**\n * Returns an action object to be used in signalling that a namespace has been changed.\n *\n * @param {Object} namespace - the changed namespace\n * @param {string} namespace.title - namespace title\n * @param {Array} namespace.owners - ids of owners\n * @param {Array} namespace.announcements - announcements\n * @param {Array} namespace.cohorts - cohorts\n * @param {string} namespace.description - namespace description\n * @param {boolean} namespace.enableTicketing - controls if ticketing is enabled for the namespace\n * @param {string} namespace._id - id of the namespace\n * @param {Array} namespace.completions - array of completion metric objects associated with the namespace\n * @returns {Object} the action object\n */\nexport function changedNamespace({ title, owners, announcements = [], cohorts = [], description, enableTicketing, _id, completions }) {\n\treturn {\n\t\ttype: CHANGED_NAMESPACE,\n\t\tpayload: {\n\t\t\ttitle,\n\t\t\tannouncements,\n\t\t\tcohorts,\n\t\t\tdescription,\n\t\t\tenableTicketing,\n\t\t\towners,\n\t\t\tcompletions,\n\t\t\t_id\n\t\t}\n\t};\n}\n\n/**\n * Returns an action object to be used in signalling that a namespace has been deleted.\n *\n * @param {string} id - the id of the namespace to be deleted\n * @returns {Object} the action object\n */\nexport function deletedCurrentNamespace( id ) {\n\treturn {\n\t\ttype: DELETED_CURRENT_NAMESPACE,\n\t\tpayload: {\n\t\t\tid\n\t\t}\n\t};\n}\n\n/**\n * Returns an action object to be used in signalling that a student's progress has been updated.\n *\n * @param {Object} options - progress of the student\n * @param {string} options.email - email of the student\n * @param {string} options.lessonId - lesson id\n * @param {number} options.progress - progress of the student\n * @param {Object} options.cohort - cohort of the student\n */\nexport function updateStudentProgress({ email, lessonID, progress, cohort }) {\n\treturn {\n\t\ttype: UPDATED_STUDENT_PROGRESS,\n\t\tpayload: {\n\t\t\temail, lessonID, progress, cohort\n\t\t}\n\t};\n}\n\n/**\n * Returns an action object to be used in signalling that an owned namespace has been updated.\n *\n * @param {Object} namespace - the updated namespace\n * @param {string} namespace.title - namespace title\n * @param {Array} namespace.owners - ids of owners\n * @param {Array} namespace.enableTicketing - controls if ticketing is enabled for the namespace\n * @param {string} namespace._id - id of the namespace\n * @returns {Object} the action object\n */\nexport function updatedOwnedNamespace({ title, owners, description, enableTicketing, _id }) {\n\treturn {\n\t\ttype: UPDATED_OWNED_NAMESPACE,\n\t\tpayload: {\n\t\t\ttitle,\n\t\t\tdescription,\n\t\t\towners,\n\t\t\tenableTicketing,\n\t\t\t_id\n\t\t}\n\t};\n}\n\n/**\n * Makes a POST request to create a new namespace.\n *\n * @param {Function} dispatch - dispatch function\n * @param {Object} namespace - the new namespace\n * @param {string} namespace.title - namespace title\n * @param {Array} namespace.description - namespace description\n * @param {Array} namespace.owners - ids of owners\n * @param {Object} namespace.props - properties of the invoking component\n */\nexport const createNamespace = async ( dispatch, { title, description, owners, props }) => {\n\ttry {\n\t\tconst res = await axios.post( server+'/create_namespace', { title, description, owners });\n\t\tif ( !res.data.successful ) {\n\t\t\treturn addErrorNotification( dispatch, new Error( res.data.message ));\n\t\t}\n\t\tconst namespace = res.data.namespace;\n\t\tprops.onNamespace( namespace );\n\t\tdispatch( appendCreatedNamespace( namespace ) );\n\t\twindow.location.replace( '/dashboard/lessons' );\n\t\taddNotification( dispatch, {\n\t\t\tmessage: res.data.message,\n\t\t\tlevel: res.data.successful ? 'success' : 'error'\n\t\t});\n\t} catch ( err ) {\n\t\taddErrorNotification( dispatch, err );\n\t}\n};\n\n/**\n * Returns a function to make a POST request to create a new namespace.\n *\n * @param {Function} dispatch - dispatch function\n * @returns {Function} function to make the POST request to create a new namespace\n */\nexport const createNamespaceInjector = dispatch => {\n\treturn async ({ title, description, owners, props }) => {\n\t\tawait createNamespace( dispatch, { title, description, owners, props } );\n\t};\n};\n\n/**\n * Makes a POST request to delete a namespace.\n *\n * @param {Function} dispatch - dispatch function\n * @param {string} id - the id of the namespace to be deleted\n * @returns {void}\n */\nexport const deleteCurrentNamespace = async ( dispatch, id ) => {\n\ttry {\n\t\tconst res = await axios.post( server+'/delete_namespace', { id });\n\t\twindow.location.replace( '/dashboard/lessons' );\n\t\tdispatch( deletedCurrentNamespace( id ) );\n\t\taddNotification( dispatch, {\n\t\t\tmessage: res.data.message,\n\t\t\tlevel: 'success'\n\t\t});\n\t} catch ( err ) {\n\t\treturn addErrorNotification( dispatch, err );\n\t}\n};\n\n/**\n * Returns a function to make a POST request to delete a namespace.\n *\n * @param {Function} dispatch - dispatch function\n * @returns {Function} function to make the POST request to delete a namespace\n */\nexport const deleteCurrentNamespaceInjector = ( dispatch ) => {\n\treturn async ( id ) => {\n\t\tawait deleteCurrentNamespace( dispatch, id );\n\t};\n};\n\n/**\n * Makes a POST request to update a namespace.\n *\n * @param {Function} dispatch - dispatch function\n * @param {Object} ns - the updated namespace\n */\nexport const updateCurrentNamespace = async ( dispatch, ns ) => {\n\ttry {\n\t\tconst res = await axios.post( server+'/update_namespace', { ns });\n\t\tdispatch( changedNamespace( res.data.namespace ) );\n\t\tdispatch( updatedOwnedNamespace( res.data.namespace ) );\n\t\taddNotification( dispatch, {\n\t\t\tmessage: res.data.message,\n\t\t\tlevel: 'success'\n\t\t});\n\t\tgetCohorts( dispatch, {\n\t\t\tnamespaceID: ns._id\n\t\t});\n\t} catch ( err ) {\n\t\taddErrorNotification( dispatch, err );\n\t}\n};\n\n/**\n * Returns a function to make a POST request to update a namespace.\n *\n * @param {Function} dispatch - dispatch function\n * @returns {Function} function to make the POST request to update a namespace\n */\nexport const updateCurrentNamespaceInjector = ( dispatch ) => {\n\treturn async ( id, ns ) => {\n\t\tawait updateCurrentNamespace( dispatch, id, ns );\n\t};\n};\n\n/**\n * Makes a GET request to get a namespace's actions.\n *\n * @param {Function} dispatch - dispatch function\n * @param {Object} options - request options\n * @param {string} options.namespaceID - id of the namespace\n * @param {string} options.namespaceTitle - title of the namespace\n * @returns {void}\n */\nexport const getNamespaceActions = async ( dispatch, { namespaceID, namespaceTitle } ) => {\n\ttry {\n\t\tconst res = await axios.get( server+'/get_namespace_actions?'+qs.stringify({ namespaceID }) );\n\t\tconst blob = new Blob([ res.data ], {\n\t\t\ttype: 'application/json'\n\t\t});\n\t\tconst name = `actions_${namespaceTitle}.json`;\n\t\tsaveAs( blob, name );\n\t} catch ( err ) {\n\t\taddErrorNotification( dispatch, err );\n\t}\n};\n\n/**\n * Returns a function to make a GET request to get a namespace's actions.\n *\n * @param {Function} dispatch - dispatch function\n * @returns {Function} function to make the GET request to get a namespace's actions\n */\nexport const getNamespaceActionsInjector = ( dispatch ) => {\n\treturn async ({ namespaceID, namespaceTitle }) => {\n\t\tawait getNamespaceActions( dispatch, { namespaceID, namespaceTitle });\n\t};\n};\n\n/**\n * Makes a POST request to update a user's lesson progress.\n *\n * @param {Function} dispatch - dispatch function\n * @param {Object} options - request options\n * @param {string} options.namespaceID - id of the namespace\n * @param {string} options.lessonID - id of the lesson\n * @param {string} options.email - email of the user\n * @param {number} options.progress - progress of the user\n * @param {Object} options.cohort - cohort of the user\n */\nexport const adjustProgress = async ( dispatch, { email, lessonID, namespaceID, progress, cohort }) => {\n\tconst res = await axios.post( server+'/user_adjust_progress', {\n\t\temail, lessonID, namespaceID, progress\n\t});\n\taddNotification( dispatch, {\n\t\ttitle: i18next.t('common:updated'),\n\t\tmessage: res.data.message,\n\t\tlevel: 'success'\n\t});\n\tdispatch( updateStudentProgress({ email, lessonID, progress, cohort }) );\n};\n\n/**\n * Returns a function to make a POST request to update a user's lesson progress.\n *\n * @param {Function} dispatch - dispatch function\n * @returns {Function} function to make the POST request to update a user's lesson progress\n */\nexport const adjustProgressInjector = ( dispatch ) => {\n\treturn async ( { email, lessonID, namespaceID, progress, cohort } ) => {\n\t\tawait adjustProgress( dispatch, { email, lessonID, namespaceID, progress, cohort } );\n\t};\n};\n\n/**\n * Makes a GET request to get a all available namespaces.\n *\n * @param {Function} dispatch - dispatch function\n * @returns {void}\n */\nexport const getAllNamespaces = async ( dispatch ) => {\n\ttry {\n\t\tconst res = await axios.get( server+'/get_all_namespaces' );\n\t\tdispatch({\n\t\t\ttype: GET_ALL_NAMESPACES,\n\t\t\tpayload: {\n\t\t\t\tnamespaces: res.data.namespaces\n\t\t\t}\n\t\t});\n\t} catch ( err ) {\n\t\treturn addErrorNotification( dispatch, err );\n\t}\n};\n\n/**\n * Returns a function to make a GET request to get a all available namespaces.\n *\n * @param {Function} dispatch - dispatch function\n * @returns {Function} function to make the GET request to get a all available namespaces\n */\nexport const getAllNamespacesInjector = ( dispatch ) => {\n\treturn async () => {\n\t\tawait getAllNamespaces( dispatch );\n\t};\n};\n\n/**\n * Makes a POST request to set the order lessons appear on the dashboard.\n *\n * @param {Function} dispatch - dispatch function\n * @param {Object} options - request options\n * @param {Array} options.lessons - lessons of the course in the order to be displayed on the dashboard\n * @param {string} options.id - id of the namespace\n * @returns {void}\n */\nexport const setLessonOrder = async ( dispatch, { lessons, id }) => {\n\ttry {\n\t\tawait axios.post( server+'/set_lesson_order', {\n\t\t\tlessons, id\n\t\t});\n\t} catch ( err ) {\n\t\treturn addErrorNotification( dispatch, err );\n\t}\n};\n\n/**\n * Returns a function to make a POST request to set the order lessons appear on the dashboard.\n *\n * @param {Function} dispatch - dispatch function\n * @returns {Function} function to make the POST request to set the order lessons appear on the dashboard\n */\nexport const setLessonOrderInjector = ( dispatch ) => {\n\treturn async ({ lessons, id }) => {\n\t\tawait setLessonOrder( dispatch, { lessons, id } );\n\t};\n};\n","/**\r\n* Copyright (C) 2016-present The ISLE Authors\r\n*\r\n* The isle-dashboard program is free software: you can redistribute it and/or modify\r\n* it under the terms of the GNU Affero General Public License as\r\n* published by the Free Software Foundation, either version 3 of the\r\n* License, or (at your option) any later version.\r\n*\r\n* This program is distributed in the hope that it will be useful,\r\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n* GNU Affero General Public License for more details.\r\n*\r\n* You should have received a copy of the GNU Affero General Public License\r\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\r\n*/\r\n\r\n// MODULES //\r\n\r\nimport React, { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { useTranslation } from 'react-i18next';\r\nimport Button from 'react-bootstrap/Button';\r\nimport Card from 'react-bootstrap/Card';\r\nimport FormLabel from 'react-bootstrap/FormLabel';\r\nimport FormControl from 'react-bootstrap/FormControl';\r\nimport FormGroup from 'react-bootstrap/FormGroup';\r\nimport Form from 'react-bootstrap/Form';\r\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\r\nimport Tooltip from 'react-bootstrap/Tooltip';\r\nimport logger from 'debug';\r\nimport isEmail from '@stdlib/assert/is-email-address';\r\nimport trim from '@stdlib/string/trim';\r\nimport contains from '@stdlib/assert/contains';\r\nimport TextSelect from 'components/text-select';\r\nimport SERVER from 'constants/server';\r\nimport checkURLPath from '../../utils/check_url_path';\r\nimport './create_namespace.css';\r\n\r\n\r\n// VARIABLES //\r\n\r\nconst debug = logger( 'isle-dashboard:create-namespace' );\r\n\r\n\r\n// FUNCTIONS //\r\n\r\n/**\r\n * Validates that a list of owners contains only email addresses.\r\n *\r\n * @private\r\n * @param {Array<string>} owners - list of owners\r\n * @returns {boolean} boolean indicating if the list of owners contains only email addresses\r\n */\r\nexport function validateOwners( owners ) {\r\n\tlet invalid = false;\r\n\tif ( owners.length === 0 ) {\r\n\t\tinvalid = true;\r\n\t} else {\r\n\t\towners.forEach( owner => {\r\n\t\t\tif ( !isEmail( owner ) ) {\r\n\t\t\t\tinvalid = true;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tif ( invalid ) {\r\n\t\treturn false;\r\n\t}\r\n\treturn true;\r\n}\r\n\r\n/**\r\n * Validates a namespace name.\r\n *\r\n * @private\r\n * @param {string} title - namespace name\r\n * @returns {boolean} boolean indicating if the namespace name is valid\r\n */\r\nexport function validateTitle( title ) {\r\n\treturn title.length >= 3 && !contains( title, ' ' ) && !checkURLPath( title );\r\n}\r\n\r\n/**\r\n * Validates a namespace description.\r\n *\r\n * @private\r\n * @param {string} description - namespace description\r\n * @returns {boolean} boolean indicating if the namespace description is valid\r\n */\r\nexport function validateDescription( description ) {\r\n\treturn description.length >= 3;\r\n}\r\n\r\n\r\n// MAIN //\r\n\r\n/**\r\n * A component for creating a new namespace.\r\n *\r\n * @param {Object} props - component properties\r\n * @param {Object} props.user - user object\r\n * @param {Function} props.createNamespace - callback function for creating a new namespace with the specified title, description, and owners\r\n * @returns {ReactElement} component for creating a new namespace\r\n */\r\nconst CreateNamespace = ( props ) => {\r\n\tconst [ title, setTitle ] = useState( '' );\r\n\tconst [ description, setDescription ] = useState( '' );\r\n\tconst [ owners, setOwners ] = useState( [ props.user.email ] );\r\n\tconst { t } = useTranslation( [ 'namespace', 'common' ] );\r\n\r\n\tconst handleSubmit = () => {\r\n\t\tprops.createNamespace({\r\n\t\t\ttitle,\r\n\t\t\tdescription,\r\n\t\t\towners,\r\n\t\t\tprops\r\n\t\t});\r\n\t};\r\n\tconst handleOwnerChange = ( newValue ) => {\r\n\t\tif ( !newValue ) {\r\n\t\t\tsetOwners( [] );\r\n\t\t}\r\n\t\tconst newOwners = newValue.map( x => trim( x.value ) );\r\n\t\tsetOwners( newOwners );\r\n\t};\r\n\tconst handleTitleChange = ( event ) => {\r\n\t\tconst value = event.target.value;\r\n\t\tsetTitle( value );\r\n\t};\r\n\tconst handleDescriptionChange = ( event ) => {\r\n\t\tconst value = event.target.value;\r\n\t\tsetDescription( value );\r\n\t};\r\n\tconst validTitle = validateTitle( title );\r\n\tconst invalidTitleChars = checkURLPath( title );\r\n\tconst validDescription = validateDescription( description );\r\n\tconst validOwners = validateOwners( owners );\r\n\tdebug( 'Validation status of input fields: ' );\r\n\tdebug( `Title: ${validTitle}` );\r\n\tdebug( `Description: ${validDescription}` );\r\n\tdebug( `Owners: ${validOwners}` );\r\n\treturn (\r\n\t\t<div className=\"create-namespace-container\" >\r\n\t\t\t<Card className=\"create-namespace-card\" >\r\n\t\t\t\t<Card.Header>\r\n\t\t\t\t\t<Card.Title as=\"h2\" >{t('create-course')}</Card.Title>\r\n\t\t\t\t</Card.Header>\r\n\t\t\t\t<Form style={{ padding: '20px' }}>\r\n\t\t\t\t\t<OverlayTrigger placement=\"right\" overlay={<Tooltip id=\"ownerTooltip\">{t('owner-tooltip')}</Tooltip>}>\r\n\t\t\t\t\t\t<FormGroup controlId=\"form-owners\" >\r\n\t\t\t\t\t\t\t<FormLabel>{t('common:owners')}</FormLabel>\r\n\t\t\t\t\t\t\t<TextSelect\r\n\t\t\t\t\t\t\t\tid=\"owners-text-select\"\r\n\t\t\t\t\t\t\t\tonChange={handleOwnerChange}\r\n\t\t\t\t\t\t\t\tdefaultValue={owners}\r\n\t\t\t\t\t\t\t\tisInvalid={!validOwners}\r\n\t\t\t\t\t\t\t\tplaceholder={t('enter-emails')}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<FormControl.Feedback type=\"invalid\">\r\n\t\t\t\t\t\t\t\t{t('invalid-owners')}\r\n\t\t\t\t\t\t\t</FormControl.Feedback>\r\n\t\t\t\t\t\t</FormGroup>\r\n\t\t\t\t\t</OverlayTrigger>\r\n\t\t\t\t\t<OverlayTrigger placement=\"right\" overlay={<Tooltip id=\"courseTooltip\" >{t('accessible-at')}<code>{SERVER+'/<course>/<lesson>'}</code></Tooltip>}>\r\n\t\t\t\t\t\t<FormGroup controlId=\"form-course\" >\r\n\t\t\t\t\t\t\t<FormLabel>{t('common:course')}</FormLabel>\r\n\t\t\t\t\t\t\t<FormControl\r\n\t\t\t\t\t\t\t\tname=\"title\"\r\n\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\tplaceholder={t('course-placeholder')}\r\n\t\t\t\t\t\t\t\tonChange={handleTitleChange}\r\n\t\t\t\t\t\t\t\tisInvalid={title && !validTitle}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<FormControl.Feedback type=\"invalid\">\r\n\t\t\t\t\t\t\t\t{ invalidTitleChars ?\r\n\t\t\t\t\t\t\t\t\t'Course identifier contains invalid character(s): '+invalidTitleChars[ 0 ] :\r\n\t\t\t\t\t\t\t\t\t'Course identifier must be at least three characters long and should not contain any spaces.'\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t</FormControl.Feedback>\r\n\t\t\t\t\t\t</FormGroup>\r\n\t\t\t\t\t</OverlayTrigger>\r\n\t\t\t\t\t<OverlayTrigger placement=\"right\" overlay={<Tooltip id=\"titleTooltip\">{t('title-tooltip')}</Tooltip>}>\r\n\t\t\t\t\t\t<FormGroup controlId=\"form-description\" >\r\n\t\t\t\t\t\t\t<FormLabel>{t('title-description')}</FormLabel>\r\n\t\t\t\t\t\t\t<FormControl\r\n\t\t\t\t\t\t\t\tname=\"description\"\r\n\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\tplaceholder={t('title-placeholder')}\r\n\t\t\t\t\t\t\t\tonChange={handleDescriptionChange}\r\n\t\t\t\t\t\t\t\tisInvalid={description && !validDescription}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<FormControl.Feedback type=\"invalid\">\r\n\t\t\t\t\t\t\t\t{t('invalid-description')}\r\n\t\t\t\t\t\t\t</FormControl.Feedback>\r\n\t\t\t\t\t\t</FormGroup>\r\n\t\t\t\t\t</OverlayTrigger>\r\n\t\t\t\t</Form>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tvariant=\"success\"\r\n\t\t\t\t\tonClick={handleSubmit}\r\n\t\t\t\t\tdisabled={!validOwners || !validTitle || !validDescription}\r\n\t\t\t\t\tblock\r\n\t\t\t\t>{t('common:create')}</Button>\r\n\t\t\t</Card>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\n\r\n// PROPERTIES //\r\n\r\nCreateNamespace.propTypes = {\r\n\tcreateNamespace: PropTypes.func.isRequired,\r\n\tuser: PropTypes.object.isRequired\r\n};\r\n\r\nCreateNamespace.defaultProps = {\r\n};\r\n\r\n\r\n// EXPORTS //\r\n\r\nexport default CreateNamespace;\r\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { withTranslation } from 'react-i18next';\nimport copy from 'clipboard-copy';\nimport CreatableSelect from 'react-select/creatable';\nimport { components } from 'react-select';\nimport Tooltip from 'react-bootstrap/Tooltip';\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\nimport isObjectArray from '@stdlib/assert/is-object-array';\nimport isEmptyString from '@stdlib/assert/is-empty-string';\nimport contains from '@stdlib/assert/contains';\nimport isNull from '@stdlib/assert/is-null';\nimport trim from '@stdlib/string/trim';\nimport './text_select.css';\n\n\n// VARIABLES //\n\nconst customStyles = {\n\tclearIndicator: ( provided, state ) => ({\n\t\t...provided,\n\t\tcursor: 'pointer'\n\t}),\n\tmultiValueRemove: ( provided, state ) => ({\n\t\t...provided,\n\t\tcursor: 'pointer'\n\t}),\n\tvalueContainer: ( provided, state ) => ({\n\t\t...provided,\n\t\tcursor: 'text'\n\t})\n};\n\n\n// FUNCTIONS //\n\n/**\n * Returns a select option object.\n *\n * @private\n * @param {string} label - option label\n * @returns {Object} option object\n */\nconst createOption = ( label ) => ({\n\tlabel,\n\tvalue: label\n});\n\n/**\n * Maps elements of an array to option objects.\n *\n * @private\n * @param {Array} arr - array of elements\n * @returns {Array} array of option objects\n */\nconst toOptions = ( arr ) => {\n\tif ( isNull( arr ) ) {\n\t\treturn null;\n\t}\n\tif ( isObjectArray( arr ) && arr[ 0 ].label && arr[ 0 ].value ) {\n\t\treturn arr;\n\t}\n\treturn arr.map( createOption );\n};\n\n\n// MAIN //\n\nclass TextSelect extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\t\tthis.state = {\n\t\t\tinputValue: '',\n\t\t\tvalue: toOptions( props.defaultValue )\n\t\t};\n\t}\n\n\tcomponentDidUpdate( prevProps ) {\n\t\tif ( this.props.defaultValue !== prevProps.defaultValue ) {\n\t\t\tthis.setState({\n\t\t\t\tvalue: toOptions( this.props.defaultValue )\n\t\t\t});\n\t\t}\n\t}\n\n\thandleChange = ( value ) => {\n\t\tthis.setState({ value });\n\t\tthis.props.onChange( value );\n\t};\n\n\thandleInputChange = ( inputValue, action ) => {\n\t\tif ( action.action === 'menu-close' ) {\n\t\t\tthis.addInputValues();\n\t\t}\n\t\telse if ( action.action !== 'input-blur' ) {\n\t\t\tthis.setState({\n\t\t\t\tinputValue\n\t\t\t});\n\t\t}\n\t};\n\n\taddInputValues = () => {\n\t\tlet { inputValue, value } = this.state;\n\t\tif ( !inputValue ) {\n\t\t\treturn null;\n\t\t}\n\t\tif ( contains( inputValue, ',' ) ) {\n\t\t\tinputValue = inputValue.split( ',' )\n\t\t\t\t.map( x => trim( x ) )\n\t\t\t\t.filter( x => !isEmptyString( x ) );\n\t\t} else {\n\t\t\tinputValue = [ trim( inputValue ) ];\n\t\t}\n\t\tlet newValue;\n\t\tif ( value ) {\n\t\t\tnewValue = value.concat( inputValue.map( createOption ) );\n\t\t} else {\n\t\t\tnewValue = inputValue.map( createOption );\n\t\t}\n\t\tthis.setState({\n\t\t\tinputValue: '',\n\t\t\tvalue: newValue\n\t\t}, () => {\n\t\t\tthis.props.onChange( this.state.value );\n\t\t});\n\t};\n\n\thandleKeyDown = ( event ) => {\n\t\tswitch ( event.key ) {\n\t\t\tcase 'Enter':\n\t\t\tcase 'Tab': {\n\t\t\t\tthis.addInputValues();\n\t\t\t}\n\t\t}\n\t};\n\n\trender() {\n\t\tconst { inputValue, value } = this.state;\n\t\tconst isInvalid = this.props.isInvalid;\n\t\tconst control = ( provided, state ) => {\n\t\t\tconst out = {\n\t\t\t\t...provided\n\t\t\t};\n\t\t\tif ( state.isFocused && isInvalid ) {\n\t\t\t\tout.boxShadow = '0 0 0 0.2rem rgba(220,53,69,0.25)';\n\t\t\t}\n\t\t\tout.borderColor = isInvalid ? '#dc3545' : '#ddd';\n\t\t\tout[ '&:hover' ] = {\n\t\t\t\tborderColor: isInvalid ? '#dc3545' : '#ddd'\n\t\t\t};\n\t\t\treturn out;\n\t\t};\n\t\tconst customComponents = {\n\t\t\tDropdownIndicator: null,\n\t\t\tMultiValueLabel: props => {\n\t\t\t\tconst copyToClipboard = () => {\n\t\t\t\t\tcopy( props.data.label );\n\t\t\t\t};\n\t\t\t\treturn (\n\t\t\t\t\t<OverlayTrigger\n\t\t\t\t\t\toverlay={<Tooltip id=\"copy_tooltip\">{this.props.t('copy-tooltip')}</Tooltip>}\n\t\t\t\t\t\tplacement=\"bottom\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\trole=\"button\" tabIndex={0}\n\t\t\t\t\t\t\tonClick={copyToClipboard} onKeyPress={copyToClipboard}\n\t\t\t\t\t\t\tclassName=\"text-select-copy\"\n\t\t\t\t\t\t\taria-label={this.props.t('copy-tooltip')}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<components.MultiValueLabel {...props} />\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</OverlayTrigger>\n\t\t\t\t);\n\t\t\t}\n\t\t};\n\t\treturn (\n\t\t\t<CreatableSelect\n\t\t\t\tinputId={this.props.id}\n\t\t\t\tcomponents={customComponents}\n\t\t\t\tinputValue={inputValue}\n\t\t\t\tisClearable={this.props.isClearable}\n\t\t\t\tisMulti\n\t\t\t\tmenuIsOpen={false}\n\t\t\t\tonChange={this.handleChange}\n\t\t\t\tonInputChange={this.handleInputChange}\n\t\t\t\tonKeyDown={this.handleKeyDown}\n\t\t\t\tplaceholder={this.props.placeholder}\n\t\t\t\tvalue={value}\n\t\t\t\tstyles={{ ...customStyles, control: control, ...this.props.styles }}\n\t\t\t\tt={this.props.t}\n\t\t\t/>\n\t\t);\n\t}\n}\n\n\n// PROPERTIES //\n\nTextSelect.propTypes = {\n\tdefaultValue: PropTypes.array,\n\tid: PropTypes.string,\n\tisClearable: PropTypes.bool,\n\tisInvalid: PropTypes.bool,\n\tonChange: PropTypes.func,\n\tplaceholder: PropTypes.string,\n\tstyles: PropTypes.object\n};\n\nTextSelect.defaultProps = {\n\tdefaultValue: [],\n\tid: null,\n\tisClearable: false,\n\tisInvalid: false,\n\tonChange() {},\n\tplaceholder: '',\n\tstyles: {}\n};\n\n\n// EXPORTS //\n\nexport default withTranslation( [ 'text_select', 'common' ] )( TextSelect );\n","/**\r\n* Copyright (C) 2016-present The ISLE Authors\r\n*\r\n* The isle-dashboard program is free software: you can redistribute it and/or modify\r\n* it under the terms of the GNU Affero General Public License as\r\n* published by the Free Software Foundation, either version 3 of the\r\n* License, or (at your option) any later version.\r\n*\r\n* This program is distributed in the hope that it will be useful,\r\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n* GNU Affero General Public License for more details.\r\n*\r\n* You should have received a copy of the GNU Affero General Public License\r\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\r\n*/\r\n\r\n// VARIABLES //\r\n\r\nconst REGEXP_CHARS = /[‘“!#$%&+^<=>{}()[\\]`]/;\r\n\r\n\r\n// MAIN //\r\n\r\n/**\r\n* Validates a string as a URL path.\r\n*\r\n* @param {string} str - value to validate\r\n* @returns {boolean} boolean indicating if a string is a URL path\r\n*/\r\nfunction checkURLPath( str ) {\r\n\treturn str.match( REGEXP_CHARS );\r\n}\r\n\r\n\r\n// EXPORTS //\r\n\r\nexport default checkURLPath;\r\n","/*\r\n* Adapted from:\r\n*\r\n* FileSaver.js\r\n* A saveAs() FileSaver implementation.\r\n* 1.3.8\r\n* 2018-03-22 14:03:47\r\n*\r\n* By Eli Grey, https://eligrey.com\r\n* License: MIT\r\n*   See https://github.com/eligrey/FileSaver.js/blob/master/LICENSE.md\r\n*\r\n* @source http://purl.eligrey.com/github/FileSaver.js/blob/master/src/FileSaver.js\r\n*/\r\n\r\n// VARIABLES //\r\n\r\nconst RE_AUTO_BOM = /^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i;\r\nconst ARBITRARY_REVOKE_TIMEOUT = 1000 * 40; // Time in ms\r\n\r\n\r\n// FUNCTIONS //\r\n\r\nfunction click(node) {\r\n\tconst event = new MouseEvent( 'click' );\r\n\tnode.dispatchEvent( event );\r\n}\r\n\r\nfunction throwOutside( ex ) {\r\n\tsetImmediate(function throwEx() {\r\n\t\tthrow ex;\r\n\t}, 0 );\r\n}\r\n\r\nfunction autoBOM( blob ) {\r\n\t// Prepend BOM for UTF-8 XML and text/* types (including HTML). Note: your browser will automatically convert UTF-16 U+FEFF to EF BB BF\r\n\tif ( RE_AUTO_BOM.test( blob.type ) ) {\r\n\t\treturn new Blob([ String.fromCharCode( 0xFEFF ), blob ], {\r\n\t\t\ttype: blob.type\r\n\t\t});\r\n\t}\r\n\treturn blob;\r\n}\r\n\r\nfunction dispatch( filesaver, eventTypes, event ) {\r\n\teventTypes = [].concat( eventTypes );\r\n\tlet i = eventTypes.length;\r\n\twhile ( i-- ) {\r\n\t\tlet listener = filesaver[ 'on' + eventTypes[i] ];\r\n\t\tif ( typeof listener === 'function' ) {\r\n\t\t\ttry {\r\n\t\t\t\tlistener.call( filesaver, event || filesaver );\r\n\t\t\t} catch ( ex ) {\r\n\t\t\t\tthrowOutside( ex );\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\n\r\n// MAIN //\r\n\r\nfunction saveFactory( view ) {\r\n\tif (\r\n\t\ttypeof view === 'undefined' ||\r\n\t\ttypeof navigator !== 'undefined' &&\r\n\t\t/MSIE [1-9]\\./.test( navigator.userAgent )\r\n\t) {\r\n\t\treturn;\r\n\t}\r\n\tconst doc = view.document;\r\n\r\n\t// Only get URL when necessary in case Blob.js hasn't overridden it yet:\r\n\tfunction getURL() {\r\n\t\treturn view.URL || view.webkitURL || view;\r\n\t}\r\n\tfunction revoke( file ) {\r\n\t\tfunction revoker() {\r\n\t\t\tif ( typeof file === 'string' ) { // File is an object URL...\r\n\t\t\t\tgetURL().revokeObjectURL(file);\r\n\t\t\t} else { // File is a File...\r\n\t\t\t\tfile.remove();\r\n\t\t\t}\r\n\t\t}\r\n\t\tsetTimeout( revoker, ARBITRARY_REVOKE_TIMEOUT );\r\n\t}\r\n\r\n\tconst saveLink = doc.createElementNS( 'http://www.w3.org/1999/xhtml', 'a' );\r\n\tconst canUseSaveLink = 'download' in saveLink;\r\n\tconst isSafari = /constructor/i.test( view.HTMLElement ) || view.safari;\r\n\tconst isChromeIOS =/CriOS\\/[\\d]+/.test( navigator.userAgent );\r\n\tconst setImmediate = view.setImmediate || view.setTimeout;\r\n\tconst forceSavableType = 'application/octet-stream';\r\n\r\n\tfunction FileSaver(blob, name, noAutoBOM ) {\r\n\t\tif ( !noAutoBOM ) {\r\n\t\t\tblob = autoBOM(blob);\r\n\t\t}\r\n\t\t// First try a.download, then web filesystem, then object URLs\r\n\t\tconst self = this;\r\n\t\tconst type = blob.type;\r\n\t\tconst force = type === forceSavableType;\r\n\t\tlet objectURL;\r\n\t\tfunction dispatchAll() {\r\n\t\t\tdispatch( self, 'writestart progress write writeend'.split(' ') );\r\n\t\t}\r\n\t\t// On any filesystem errors, revert to saving with object URLs:\r\n\t\tfunction fsError() {\r\n\t\t\tif ((isChromeIOS || (force && isSafari)) && view.FileReader) {\r\n\t\t\t\t// Safari doesn't allow downloading of blob urls\r\n\t\t\t\tconst reader = new FileReader();\r\n\t\t\t\treader.onloadend = function onLoadEnd() {\r\n\t\t\t\t\tlet url = isChromeIOS ? reader.result : reader.result.replace(/^data:[^;]*;/, 'data:attachment/file;');\r\n\t\t\t\t\tconst popup = view.open(url, '_blank');\r\n\t\t\t\t\tif ( !popup ) {\r\n\t\t\t\t\t\tview.location.href = url;\r\n\t\t\t\t\t}\r\n\t\t\t\t\turl = void 0; // Release reference before dispatching...\r\n\t\t\t\t\tself.readyState = self.DONE;\r\n\t\t\t\t\tdispatchAll();\r\n\t\t\t\t};\r\n\t\t\t\treader.readAsDataURL(blob);\r\n\t\t\t\tself.readyState = self.INIT;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t// Don't create more object URLs than needed:\r\n\t\t\tif ( !objectURL ) {\r\n\t\t\t\tobjectURL = getURL().createObjectURL( blob );\r\n\t\t\t}\r\n\t\t\tif ( force ) {\r\n\t\t\t\tview.location.href = objectURL;\r\n\t\t\t} else {\r\n\t\t\t\tconst opened = view.open( objectURL, '_blank' );\r\n\t\t\t\tif ( !opened ) {\r\n\t\t\t\t\t// Apple does not allow window.open, see https://developer.apple.com/library/safari/documentation/Tools/Conceptual/SafariExtensionGuide/WorkingwithWindowsandTabs/WorkingwithWindowsandTabs.html\r\n\t\t\t\t\tview.location.href = objectURL;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tself.readyState = self.DONE;\r\n\t\t\tdispatchAll();\r\n\t\t\trevoke( objectURL );\r\n\t\t}\r\n\t\tself.readyState = self.INIT;\r\n\r\n\t\tif ( canUseSaveLink ) {\r\n\t\t\tobjectURL = getURL().createObjectURL(blob);\r\n\t\t\tsetImmediate(function save() {\r\n\t\t\t\tsaveLink.href = objectURL;\r\n\t\t\t\tsaveLink.download = name;\r\n\t\t\t\tclick( saveLink );\r\n\t\t\t\tdispatchAll();\r\n\t\t\t\trevoke( objectURL );\r\n\t\t\t\tself.readyState = self.DONE;\r\n\t\t\t}, 0);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tfsError();\r\n\t}\r\n\tconst proto = FileSaver.prototype;\r\n\tfunction saveAs( blob, name, noAutoBOM ) {\r\n\t\treturn new FileSaver( blob, name || blob.name || 'download', noAutoBOM );\r\n\t}\r\n\r\n\t// IE 10+ (native saveAs)\r\n\tif ( typeof navigator !== 'undefined' && navigator.msSaveOrOpenBlob ) {\r\n\t\treturn function saveAs( blob, name, noAutoBOM ) {\r\n\t\t\tname = name || blob.name || 'download';\r\n\t\t\tif ( !noAutoBOM ) {\r\n\t\t\t\tblob = autoBOM( blob );\r\n\t\t\t}\r\n\t\t\treturn navigator.msSaveOrOpenBlob(blob, name);\r\n\t\t};\r\n\t}\r\n\r\n\tproto.abort = function abort() {};\r\n\tproto.readyState = proto.INIT = 0;\r\n\tproto.WRITING = 1;\r\n\tproto.DONE = 2;\r\n\r\n\tproto.error = null;\r\n\tproto.onwritestart = null;\r\n\tproto.onprogress = null;\r\n\tproto.onwrite = null;\r\n\tproto.onabort = null;\r\n\tproto.onerror = null;\r\n\tproto.onwriteend = null;\r\n\r\n\treturn saveAs;\r\n}\r\n\r\nconst saveAs = saveFactory(\r\n\ttypeof self !== 'undefined' && self ||\r\n\ttypeof window !== 'undefined' && window ||\r\n\tthis.content\r\n);\r\n\r\n\r\n// EXPORTS //\r\n\r\nexport default saveAs;\r\n"],"sourceRoot":""}