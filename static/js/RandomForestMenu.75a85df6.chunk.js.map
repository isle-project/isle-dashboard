{"version":3,"file":"static/js/RandomForestMenu.75a85df6.chunk.js","mappings":"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","sources":["../node_modules/@isle-project/components/collapse/index.js","../node_modules/@isle-project/components/data-explorer/menu/random_forest.js","../node_modules/@isle-project/components/data-explorer/question_button.js","../node_modules/@isle-project/components/input/number/create_tooltip.js","../node_modules/@isle-project/components/input/number/main.js","../node_modules/@isle-project/components/input/number/index.js"],"sourcesContent":["// MODULES //\n\nimport Loadable from '@isle-project/components/internal/loadable';\n\n\n// MAIN //\n\nconst Collapse = Loadable( () => import( /* webpackChunkName: \"Collapse\" */ './main.js' ) );\n\n\n// EXPORTS //\n\nexport default Collapse;\n","// MODULES //\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Button from 'react-bootstrap/Button';\nimport Card from 'react-bootstrap/Card';\nimport unique from 'uniq';\nimport contains from '@stdlib/assert/contains';\nimport isArray from '@stdlib/assert/is-array';\nimport copy from '@stdlib/utils/copy';\nimport floor from '@stdlib/math/base/special/floor';\nimport sqrt from '@stdlib/math/base/special/sqrt';\nimport SelectInput from '@isle-project/components/input/select';\nimport NumberInput from '@isle-project/components/input/number';\nimport Collapse from '@isle-project/components/collapse';\nimport RandomForest from '@isle-project/components/models/random-forest';\nimport { DATA_EXPLORER_RANDOM_FOREST } from '@isle-project/constants/actions.js';\nimport QuestionButton from './../question_button.js';\n\n\n// VARIABLES //\n\nconst DESCRIPTION = 'Instead of growing a single decision tree, a random forest as an ensemble method constructs many decision trees at once and returns the average of the predictions (regression case) or the majority vote (classification case) of the individual trees';\n\n\n// FUNCTIONS //\n\nfunction chooseTries( x, type ) {\n\tif ( !x ) {\n\t\treturn 1;\n\t}\n\tif ( type === 'Classificiation' ) {\n\t\treturn floor( sqrt( x.length ) );\n\t}\n\tif ( x.length < 3 ) {\n\t\treturn 1;\n\t}\n\treturn floor( x.length / 3 );\n}\n\n\n// MAIN //\n\nclass RandomForestMenu extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tthis.state = {\n\t\t\ty: props.categorical[ 0 ],\n\t\t\tx: props.quantitative[ 0 ],\n\t\t\ttype: 'Classification',\n\t\t\tnTrees: 50,\n\t\t\tnTry: 1,\n\t\t\timpurityMeasure: 'gini',\n\t\t\tscoreThreshold: 0.01,\n\t\t\tmaxTreeDepth: 20,\n\t\t\tminItemsCount: 50\n\t\t};\n\t}\n\n\tcompute = () => {\n\t\tlet { y, x, type, nTrees, nTry, impurityMeasure, scoreThreshold, maxTreeDepth, minItemsCount } = this.state;\n\t\tconst output = <RandomForest\n\t\t\tx={x} y={y} type={type} nTrees={nTrees} nTry={nTry}\n\t\t\timpurityMeasure={impurityMeasure}\n\t\t\tscoreThreshold={scoreThreshold}\n\t\t\tmaxTreeDepth={maxTreeDepth}\n\t\t\tminItemsCount={minItemsCount}\n\t\t\tquantitative={this.props.quantitative}\n\t\t\tdata={this.props.data}\n\t\t\tonPredict={( forest, counter ) => {\n\t\t\t\tconst newData = copy( this.props.data, 1 );\n\t\t\t\tif ( type === 'Classification' ) {\n\t\t\t\t\tconst newCategorical = this.props.categorical.slice();\n\t\t\t\t\tconst yhat = forest.predict( newData ).map( x => String( x ) );\n\t\t\t\t\tlet name = 'pred_forest' + counter;\n\t\t\t\t\tnewData[ name ] = yhat;\n\t\t\t\t\tif ( !contains( newCategorical, name ) ) {\n\t\t\t\t\t\tnewCategorical.push( name );\n\t\t\t\t\t}\n\t\t\t\t\tname = 'correct_forest' + counter;\n\t\t\t\t\tconst yvalues = this.props.data[ y ];\n\t\t\t\t\tnewData[ name ] = yhat.map( ( x, i ) => x === String( yvalues[ i ] ) ? 'Yes' : 'No' );\n\t\t\t\t\tif ( !contains( newCategorical, name ) ) {\n\t\t\t\t\t\tnewCategorical.push( name );\n\t\t\t\t\t}\n\t\t\t\t\tthis.props.onGenerate( this.props.quantitative, newCategorical, newData );\n\t\t\t\t}\n\t\t\t}}\n\t\t/>;\n\t\tthis.props.logAction( DATA_EXPLORER_RANDOM_FOREST, {\n\t\t\ty, x, type, nTrees, nTry\n\t\t});\n\t\tthis.props.onCreated( output );\n\t}\n\n\trender() {\n\t\tconst { categorical, quantitative, t } = this.props;\n\t\tconst { x, y, type, nTrees, nTry } = this.state;\n\t\treturn (\n\t\t\t<Card\n\t\t\t\tstyle={{ fontSize: '14px', maxWidth: 600 }}\n\t\t\t>\n\t\t\t\t<Card.Header as=\"h4\">\n\t\t\t\t\t{t('Random Forest')}\n\t\t\t\t\t<QuestionButton title={t('Random Forest')} content={DESCRIPTION} />\n\t\t\t\t</Card.Header>\n\t\t\t\t<Card.Body>\n\t\t\t\t\t<SelectInput\n\t\t\t\t\t\tlegend={t('type')}\n\t\t\t\t\t\toptions={[ 'Classification' ]}\n\t\t\t\t\t\tdefaultValue={type}\n\t\t\t\t\t\tonChange={( type ) => {\n\t\t\t\t\t\t\tif ( type !== this.state.type ) {\n\t\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\t\ttype,\n\t\t\t\t\t\t\t\t\ty: type === 'Classification' ? categorical[ 0 ] : quantitative[ 0 ],\n\t\t\t\t\t\t\t\t\tnTry: chooseTries( this.state.x, type )\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t\t<SelectInput\n\t\t\t\t\t\tlegend={t('outcome-y')}\n\t\t\t\t\t\toptions={type === 'Classification' ? categorical : quantitative}\n\t\t\t\t\t\tdefaultValue={y}\n\t\t\t\t\t\tonChange={( y ) => this.setState({ y })}\n\t\t\t\t\t/>\n\t\t\t\t\t<SelectInput\n\t\t\t\t\t\tlegend={t('predictors-x')} multi\n\t\t\t\t\t\toptions={unique( quantitative.concat( categorical ) )}\n\t\t\t\t\t\tdefaultValue={x || ''}\n\t\t\t\t\t\tonChange={( x ) => {\n\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\tx,\n\t\t\t\t\t\t\t\tnTry: chooseTries( x, type )\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t\t<NumberInput\n\t\t\t\t\t\tlegend={t('number-of-trees')}\n\t\t\t\t\t\tdefaultValue={nTrees}\n\t\t\t\t\t\tinputStyle={{ float: 'right' }}\n\t\t\t\t\t\tonChange={( nTrees) => this.setState({ nTrees })}\n\t\t\t\t\t\ttooltipPlacement=\"top\"\n\t\t\t\t\t\tmin={1}\n\t\t\t\t\t/>\n\t\t\t\t\t<NumberInput\n\t\t\t\t\t\tlegend={t('predictors-to-check')}\n\t\t\t\t\t\tdefaultValue={nTry}\n\t\t\t\t\t\tinputStyle={{ float: 'right' }}\n\t\t\t\t\t\tonChange={( nTry ) => this.setState({ nTry })}\n\t\t\t\t\t\ttooltipPlacement=\"top\"\n\t\t\t\t\t\tmin={1}\n\t\t\t\t\t\tmax={isArray( x ) ? x.length : 1}\n\t\t\t\t\t/>\n\t\t\t\t\t<Collapse header={t('change-tree-features')} headerStyle={{ fontSize: '1rem' }} >\n\t\t\t\t\t\t<NumberInput legend={t('score-threshold-for-split')}\n\t\t\t\t\t\t\tmin={0} max={1} step={0.001}\n\t\t\t\t\t\t\tdefaultValue={this.state.scoreThreshold} onChange={( scoreThreshold ) => this.setState({ scoreThreshold })}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<NumberInput legend={t('maximum-tre-depth')}\n\t\t\t\t\t\t\tmin={1} max={50}\n\t\t\t\t\t\t\tdefaultValue={this.state.maxTreeDepth} onChange={( maxTreeDepth ) => this.setState({ maxTreeDepth })}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<NumberInput legend={t('min-obs-leafs')}\n\t\t\t\t\t\t\tmin={1}\n\t\t\t\t\t\t\tdefaultValue={this.state.minItemsCount}\n\t\t\t\t\t\t\tonChange={( minItemsCount ) => this.setState({ minItemsCount })}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Collapse>\n\t\t\t\t\t{ type === 'Classification' ? <SelectInput\n\t\t\t\t\t\tlegend={t('impurity-measure')}\n\t\t\t\t\t\tdefaultValue={this.state.impurityMeasure}\n\t\t\t\t\t\toptions={[ 'gini', 'entropy' ]}\n\t\t\t\t\t\tonChange={( impurityMeasure ) => this.setState({ impurityMeasure })}\n\t\t\t\t\t/> : null }\n\t\t\t\t\t<Button disabled={!x || x.length === 0} variant=\"primary\" block onClick={this.compute}>\n\t\t\t\t\t\t{t('calculate')}\n\t\t\t\t\t</Button>\n\t\t\t\t</Card.Body>\n\t\t\t</Card>\n\t\t);\n\t}\n}\n\n\n// PROPERTIES //\n\nRandomForestMenu.defaultProps = {\n\tlogAction() {}\n};\n\nRandomForestMenu.propTypes = {\n\tcategorical: PropTypes.array.isRequired,\n\tquantitative: PropTypes.array.isRequired,\n\tdata: PropTypes.object.isRequired,\n\tlogAction: PropTypes.func,\n\tonGenerate: PropTypes.func.isRequired,\n\tonCreated: PropTypes.func.isRequired\n};\n\n\n// EXPORTS //\n\nexport default RandomForestMenu;\n","// MODULES //\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Button from 'react-bootstrap/Button';\nimport Popover from 'react-bootstrap/Popover';\nimport PopoverTitle from 'react-bootstrap/PopoverTitle';\nimport PopoverContent from 'react-bootstrap/PopoverContent';\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\n\n\n// MAIN //\n\nconst QuestionButton = ( props ) => {\n\tconst popover = <Popover id=\"popover-positioned-right\">\n\t\t<PopoverTitle>{props.title}</PopoverTitle>\n\t\t<PopoverContent>{props.content}</PopoverContent>\n\t</Popover>;\n\treturn (\n\t\t<OverlayTrigger trigger={[ 'click', 'hover', 'focus' ]} placement=\"left\" rootClose overlay={popover}>\n\t\t\t<Button\n\t\t\t\tsize=\"sm\"\n\t\t\t\tvariant=\"outline-secondary\"\n\t\t\t\tclassName=\"question-button\"\n\t\t\t>\n\t\t\t\t<div className=\"fa fa-question\" />\n\t\t\t</Button>\n\t\t</OverlayTrigger>\n\t);\n};\n\nQuestionButton.propTypes = {\n\t'content': PropTypes.oneOfType([ PropTypes.string, PropTypes.node ]).isRequired,\n\t'title': PropTypes.string.isRequired\n};\n\n\n// EXPORTS //\n\nexport default QuestionButton;\n","// MODULES //\n\nimport PINF from '@stdlib/constants/float64/pinf';\nimport NINF from '@stdlib/constants/float64/ninf';\n\n\n// MAIN //\n\nfunction createTooltip({ min, max, step, t }) {\n\tlet tooltip = `${t('enter')} ${ step === 1 ? t('integer') : t('number')} `;\n\tif ( max !== PINF && min !== NINF ) {\n\t\ttooltip += `${t('between')} ${min} ${t('and')} ${max}`;\n\t} else if ( min !== NINF ) {\n\t\ttooltip += `${t('larger-or-equal-to')} ${min}`;\n\t} else if ( max !== PINF ) {\n\t\ttooltip += `${t('smaller-or-equal-to')} ${max}`;\n\t}\n\treturn tooltip;\n}\n\n\n// EXPORTS //\n\nexport default createTooltip;\n","// MODULES //\n\nimport React, { useCallback, useContext, useEffect, useRef, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport logger from 'debug';\nimport { useTranslation } from 'react-i18next';\nimport contains from '@stdlib/assert/contains';\nimport isnan from '@stdlib/math/base/assert/is-nan';\nimport { isPrimitive as isString } from '@stdlib/assert/is-string';\nimport isNull from '@stdlib/assert/is-null';\nimport { isPrimitive as isNumber } from '@stdlib/assert/is-number';\nimport PINF from '@stdlib/constants/float64/pinf';\nimport NINF from '@stdlib/constants/float64/ninf';\nimport Tooltip from '@isle-project/components/tooltip';\nimport SessionContext from '@isle-project/session/context.js';\nimport generateUID from '@isle-project/utils/uid';\nimport createTooltip from './create_tooltip.js';\nimport './number.css';\n\n\n// VARIABLES //\n\nconst debug = logger( 'isle:number-input' );\nconst uid = generateUID( 'number-input' );\n\n\n// MAIN //\n\n/**\n* A number input component. Can be used as part of an ISLE dashboard or standalone. In the latter case, you want to handle changes via the `onChange` attribute or bind the value to a global variable via the `bind` attribute.\n*\n* @property {string} bind - name of global variable for the number to be assigned to\n* @property {number} value - number value (for controlled component)\n* @property {number} defaultValue - value indicating the default value of the input at startup\n* @property {boolean} disabled - boolean indicating whether the input is active or not\n* @property {number} min - number indicating the smallest possible value that may be inserted\n* @property {number} max - number indicating the maximum value that may be inserted\n* @property {(number|string)} step - number indicating the incremental changes when using the increment arrows\n* @property {boolean} inline - indicates whether the input is displayed inline\n* @property {string} legend - string indicating the text displayed next to the number input\n* @property {boolean} numbersOnly - controls whether only numbers are accepted\n* @property {string} tooltip - tooltip string (if not set, the tooltip is automatically generated)\n* @property {string} tooltipPlacement - direction of the tooltip\n* @property {Object} style - CSS inline styles\n* @property {Object} inputStyle - CSS inline styles for input element\n* @property {Function} onBlur - callback function to be invoked when using a blur method\n* @property {Function} onChange - callback function to be invoked when number input is changed\n* @property {Function} onKeyPress - callback function to be invoked when any key is entered\n* @property {Function} onKeyDown - callback function to be invoked when any key is pressed down\n* @property {Function} onKeyUp - callback function to be invoked when key is released\n*/\nconst NumberInput = ( props ) => {\n\tconst id = useRef( props.id || uid( props ) );\n\tconst { bind, defaultValue, min, max, step, value: propValue, onBlur, onChange } = props;\n\tconst { t } = useTranslation( 'input' );\n\tconst session = useContext( SessionContext );\n\tconst [ value, setValue ] = useState(\n\t\tpropValue || ( bind && session.state ?\n\t\t\tsession.state[ bind ]:\n\t\t\tdefaultValue ),\n\t);\n\tuseEffect( () => {\n\t\tif ( bind ) {\n\t\t\tconst globalValue = global.lesson.state[ bind ];\n\t\t\tif ( globalValue !== value && isNumber( value ) ) {\n\t\t\t\tsetValue( globalValue );\n\t\t\t}\n\t\t}\n\t}, [ bind, value ] );\n\tuseEffect( () => {\n\t\tsetValue( defaultValue );\n\t}, [ defaultValue ] );\n\tuseEffect( () => {\n\t\tif ( bind ) {\n\t\t\tsetValue( global.lesson.state[ bind ] );\n\t\t}\n\t}, [ bind ] );\n\n\tconst handleChange = useCallback( ( event ) => {\n\t\tdebug( 'Handle change of input field...' );\n\t\tlet valid = event.target.validity.valid;\n\t\tlet newValue = event.target.value;\n\t\tsetValue( newValue );\n\t\tif ( propValue ||\n\t\t\t( valid && newValue !== '' &&\n\t\t\tnewValue !== '-' && newValue !== '.' && newValue !== '-.' )\n\t\t) {\n\t\t\tnewValue = parseFloat( newValue );\n\t\t\tif ( isnan( newValue ) ) {\n\t\t\t\tnewValue = '';\n\t\t\t}\n\t\t\tonChange( newValue );\n\t\t\tif ( bind ) {\n\t\t\t\tglobal.lesson.setState({\n\t\t\t\t\t[ bind ]: newValue\n\t\t\t\t});\n\t\t\t}\n\t\t} else if ( bind ) {\n\t\t\tglobal.lesson.setState({\n\t\t\t\t[ bind ]: newValue\n\t\t\t});\n\t\t}\n\t}, [ bind, propValue, onChange ] );\n\tconst finishChange = useCallback( ( event ) => {\n\t\tdebug( 'Finished change...' );\n\t\tlet newValue = event.target.value;\n\t\tif ( contains( newValue, '/' ) ) {\n\t\t\tdebug( 'Encountered a fraction...' );\n\t\t\tconst splitted = newValue.split( '/' );\n\t\t\tif ( splitted[ 0 ] !== '' && splitted[ 1 ] !== '' ) {\n\t\t\t\tnewValue = parseFloat( splitted[ 0 ]) / parseFloat( splitted[ 1 ]);\n\t\t\t}\n\t\t}\n\t\tif ( isnan( newValue ) ) {\n\t\t\tnewValue = '';\n\t\t}\n\t\telse if (\n\t\t\tnewValue !== '' && newValue !== '-' &&\n\t\t\tnewValue !== '.' && newValue !== '-.'\n\t\t) {\n\t\t\tnewValue = parseFloat( newValue );\n\t\t}\n\t\tif ( newValue > max ) {\n\t\t\tnewValue = max;\n\t\t}\n\t\telse if ( newValue < min ) {\n\t\t\tnewValue = min;\n\t\t}\n\t\telse if (\n\t\t\tstep === 1.0 && newValue !== '' &&\n\t\t\tnewValue !== '-' && newValue !== '.' && newValue !== '-.'\n\t\t) {\n\t\t\tnewValue = newValue - newValue % step;\n\t\t}\n\t\tonChange( newValue );\n\t\tonBlur( newValue );\n\t\tif ( newValue !== value ) {\n\t\t\tsetValue( newValue );\n\t\t\tif ( bind ) {\n\t\t\t\tglobal.lesson.setState({\n\t\t\t\t\t[ bind ]: newValue\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}, [ bind, min, max, step, value, onBlur, onChange ] );\n\tconst tooltip = isNull( props.tooltip ) ? createTooltip({\n\t\tmin, max, step, t\n\t}) : props.tooltip;\n\tif ( props.inline === true ) {\n\t\tconst input =\n\t\t\t<span className=\"input\" style={{ padding: '5px', ...props.style }}>\n\t\t\t\t{ props.legend ? <label htmlFor={id.current} > {props.legend} =  </label> : null }\n\t\t\t\t<input\n\t\t\t\t\tid={id.current}\n\t\t\t\t\ttype={props.numbersOnly ? 'number' : 'text'}\n\t\t\t\t\tname=\"input\"\n\t\t\t\t\tclassName=\"number-number-input\"\n\t\t\t\t\tdisabled={props.disabled}\n\t\t\t\t\tvalue={propValue !== null ? propValue : value}\n\t\t\t\t\tstep={props.step}\n\t\t\t\t\tmin={props.min}\n\t\t\t\t\tmax={props.max}\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\twidth: '80px',\n\t\t\t\t\t\tpaddingLeft: '6px',\n\t\t\t\t\t\tmarginLeft: '3px',\n\t\t\t\t\t\t...props.inputStyle\n\t\t\t\t\t}}\n\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\tonBlur={finishChange}\n\t\t\t\t\tonKeyPress={props.onKeyPress}\n\t\t\t\t\tonKeyDown={props.onKeyDown}\n\t\t\t\t\tonKeyUp={props.onKeyUp}\n\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t/>\n\t\t\t\t{ props.description ?\n\t\t\t\t\t<span>({props.description})</span> :\n\t\t\t\t\t<span />\n\t\t\t\t}\n\t\t\t</span>;\n\t\treturn props.disabled ?\n\t\t\tinput:\n\t\t\t<Tooltip id=\"number-input-tooltip-inline\" placement=\"top\" show={!props.disabled} tooltip={tooltip} >\n\t\t\t\t{input}\n\t\t\t</Tooltip>;\n\t}\n\tconst input = <input\n\t\tid={id.current}\n\t\ttype={props.numbersOnly ? 'number' : 'text'}\n\t\tname=\"input\"\n\t\tclassName=\"number-number-input\"\n\t\tdisabled={props.disabled}\n\t\tvalue={propValue !== null ? propValue : value}\n\t\tstep={props.step}\n\t\tmin={props.min}\n\t\tmax={props.max}\n\t\tstyle={{\n\t\t\twidth: '80px',\n\t\t\tmarginLeft: '24px',\n\t\t\t...props.inputStyle\n\t\t}}\n\t\tonChange={handleChange}\n\t\tonBlur={finishChange}\n\t\tonKeyPress={props.onKeyPress}\n\t\tonKeyDown={props.onKeyDown}\n\t\tonKeyUp={props.onKeyUp}\n\t\tautoComplete=\"off\"\n\t/>;\n\treturn ( <div className=\"input\" style={{\n\t\tmarginBottom: '4px',\n\t\tmarginTop: '4px',\n\t\t...props.style\n\t}}>\n\t\t{ props.legend ?\n\t\t\t<span>\n\t\t\t\t<label htmlFor={id.current} >\n\t\t\t\t\t{isString( props.legend ) ?\n\t\t\t\t\t\tprops.legend+':' :\n\t\t\t\t\t\tprops.legend\n\t\t\t\t\t}\n\t\t\t\t</label>\n\t\t\t\t{ props.description ?\n\t\t\t\t\t<span> {props.description}</span> :\n\t\t\t\t\tnull\n\t\t\t\t}\n\t\t\t</span> : null\n\t\t}\n\t\t<Tooltip\n\t\t\tid=\"number-input-tooltip\" placement={props.tooltipPlacement}\n\t\t\ttooltip={tooltip} show={!props.disabled}\n\t\t><span className=\"number-input-span\" >{input}</span></Tooltip>\n\t</div> );\n};\n\n\n// PROPERTIES //\n\nNumberInput.defaultProps = {\n\tbind: '',\n\tdisabled: false,\n\tlegend: null,\n\tmin: NINF,\n\tmax: PINF,\n\tstep: 1,\n\tdefaultValue: 0,\n\tonBlur() {},\n\tonChange() {},\n\tonKeyDown() {},\n\tonKeyPress() {},\n\tonKeyUp() {},\n\tinline: false,\n\tnumbersOnly: true,\n\tstyle: {},\n\tinputStyle: {},\n\tvalue: null,\n\ttooltip: null,\n\ttooltipPlacement: 'left'\n};\n\nNumberInput.propTypes = {\n\tbind: PropTypes.string,\n\tdefaultValue: PropTypes.number,\n\tdisabled: PropTypes.bool,\n\tinline: PropTypes.bool,\n\tlegend: PropTypes.oneOfType([\n\t\tPropTypes.string,\n\t\tPropTypes.node\n\t]),\n\tmax: PropTypes.number,\n\tmin: PropTypes.number,\n\tnumbersOnly: PropTypes.bool,\n\tonBlur: PropTypes.func,\n\tonChange: PropTypes.func,\n\tonKeyDown: PropTypes.func,\n\tonKeyPress: PropTypes.func,\n\tonKeyUp: PropTypes.func,\n\tstep: PropTypes.oneOfType([\n\t\tPropTypes.number,\n\t\tPropTypes.string\n\t]),\n\tstyle: PropTypes.object,\n\tinputStyle: PropTypes.object,\n\tvalue: PropTypes.number,\n\ttooltip: PropTypes.string,\n\ttooltipPlacement: PropTypes.oneOf([ 'top', 'right', 'bottom', 'left' ])\n};\n\n\n// EXPORTS //\n\nexport default NumberInput;\n","// MODULES //\n\nimport NumberInput from './main';\nimport CreateTooltip from './create_tooltip.js';\n\n\n// EXPORTS //\n\nexport const createTooltip = CreateTooltip;\nexport default NumberInput;\n"],"names":["Collapse","Loadable","chooseTries","x","type","floor","sqrt","length","RandomForestMenu","Component","constructor","props","super","y","nTrees","nTry","impurityMeasure","scoreThreshold","maxTreeDepth","minItemsCount","this","state","output","quantitative","data","onPredict","forest","counter","newData","copy","newCategorical","categorical","slice","yhat","predict","map","String","name","contains","push","yvalues","i","onGenerate","logAction","DATA_EXPLORER_RANDOM_FOREST","onCreated","render","t","style","fontSize","maxWidth","as","title","content","legend","options","defaultValue","onChange","setState","multi","unique","concat","inputStyle","float","tooltipPlacement","min","max","isArray","header","headerStyle","step","disabled","variant","block","onClick","compute","defaultProps","propTypes","PropTypes","QuestionButton","popover","id","trigger","placement","rootClose","overlay","size","className","isRequired","tooltip","PINF","NINF","debug","logger","uid","generateUID","NumberInput","useRef","bind","value","propValue","onBlur","useTranslation","session","useContext","SessionContext","setValue","useState","useEffect","globalValue","global","lesson","isNumber","handleChange","useCallback","event","valid","target","validity","newValue","parseFloat","isnan","finishChange","splitted","split","isNull","createTooltip","inline","input","padding","htmlFor","current","numbersOnly","width","paddingLeft","marginLeft","onKeyPress","onKeyDown","onKeyUp","autoComplete","description","show","marginBottom","marginTop","isString"],"sourceRoot":""}