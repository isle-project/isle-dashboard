"use strict";(self.webpackChunkisle_dashboard=self.webpackChunkisle_dashboard||[]).push([[4651],{39640:function(module,__unused_webpack_exports,__webpack_require__){var incrsumabs2=__webpack_require__(33160);module.exports=incrsumabs2},33160:function(module){function incrsumabs2(){var sum=0,FLG;return accumulator;function accumulator(x){return arguments.length===0?FLG?sum:null:(FLG=!0,sum+=x*x,sum)}}module.exports=incrsumabs2},60522:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(67294),prop_types__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(45697),prop_types__WEBPACK_IMPORTED_MODULE_21___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_21__),react_i18next__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(81468),react_bootstrap_Alert__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(24032),react_bootstrap_Alert__WEBPACK_IMPORTED_MODULE_20___default=__webpack_require__.n(react_bootstrap_Alert__WEBPACK_IMPORTED_MODULE_20__),react_bootstrap_Button__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(30276),react_bootstrap_Button__WEBPACK_IMPORTED_MODULE_19___default=__webpack_require__.n(react_bootstrap_Button__WEBPACK_IMPORTED_MODULE_19__),_isle_project_components_table__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(63393),_isle_project_components_tooltip__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(77287),_stdlib_utils_values__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(49984),_stdlib_utils_values__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_stdlib_utils_values__WEBPACK_IMPORTED_MODULE_3__),_stdlib_utils_map_values__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(74481),_stdlib_utils_map_values__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_stdlib_utils_map_values__WEBPACK_IMPORTED_MODULE_4__),_stdlib_stats_incr_sumabs2__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(39640),_stdlib_stats_incr_sumabs2__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(_stdlib_stats_incr_sumabs2__WEBPACK_IMPORTED_MODULE_5__),_stdlib_stats_base_dists_t_cdf__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(4683),_stdlib_stats_base_dists_t_cdf__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(_stdlib_stats_base_dists_t_cdf__WEBPACK_IMPORTED_MODULE_6__),_stdlib_math_base_special_abs__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(28549),_stdlib_math_base_special_abs__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(_stdlib_math_base_special_abs__WEBPACK_IMPORTED_MODULE_7__),_stdlib_math_base_special_sqrt__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(26680),_stdlib_math_base_special_sqrt__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(_stdlib_math_base_special_sqrt__WEBPACK_IMPORTED_MODULE_8__),_isle_project_utils_statistic_mean__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(73306),_isle_project_components_plotly__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(1846),_isle_project_components_plots_histogram__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(46667),_isle_project_components_plots_qqplot__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(2780),_isle_project_utils_by2__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(23712),_isle_project_utils_by__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(69999),_isle_project_utils_prop_check__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(25048),_isle_project_utils_factor_variable__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(93199),_isle_project_utils_is_non_missing_number__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(35865),_isle_project_utils_is_missing__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(45250),__defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(obj,key,value)=>key in obj?__defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value}):obj[key]=value,__spreadValues=(a,b)=>{for(var prop in b||(b={}))__hasOwnProp.call(b,prop)&&__defNormalProp(a,prop,b[prop]);if(__getOwnPropSymbols)for(var prop of __getOwnPropSymbols(b))__propIsEnum.call(b,prop)&&__defNormalProp(a,prop,b[prop]);return a},__spreadProps=(a,b)=>__defProps(a,__getOwnPropDescs(b));let COUNTER=0;const T="t";function calculateCoefficients(x,y){const xmu=(0,_isle_project_utils_statistic_mean__WEBPACK_IMPORTED_MODULE_9__.Z)(x),ymu=(0,_isle_project_utils_statistic_mean__WEBPACK_IMPORTED_MODULE_9__.Z)(y);let C1=0,C2=0;const len=x.length;for(let i=0;i<len;i++){let xdelta=x[i]-xmu,ydelta=y[i]-ymu;C1+=xdelta*xdelta,C2+=xdelta*ydelta}const slope=C2/C1;return{yint:ymu-slope*xmu,slope,xg:x,yg:y}}function extractValues({x,y,data,group,omitMissing}){const xd=data[x],yd=data[y],groups=data[group];if(omitMissing){const xvals=[],yvals=[],groupvals=[];if(groups)for(let i=0;i<xd.length;i++)!(0,_isle_project_utils_is_missing__WEBPACK_IMPORTED_MODULE_18__.Z)(groups[i])&&(0,_isle_project_utils_is_non_missing_number__WEBPACK_IMPORTED_MODULE_17__.Z)(xd[i])&&(0,_isle_project_utils_is_non_missing_number__WEBPACK_IMPORTED_MODULE_17__.Z)(yd[i])&&(xvals.push(xd[i]),yvals.push(yd[i]),groupvals.push(groups[i]));else for(let i=0;i<xd.length;i++)(0,_isle_project_utils_is_non_missing_number__WEBPACK_IMPORTED_MODULE_17__.Z)(xd[i])&&(0,_isle_project_utils_is_non_missing_number__WEBPACK_IMPORTED_MODULE_17__.Z)(yd[i])&&(xvals.push(xd[i]),yvals.push(yd[i]));return{xd:xvals,yd:yvals,groups:groupvals}}return{xd,yd,groups}}class SimpleLinearRegression extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props);COUNTER+=1;const{x,y,data,group,omitMissing}=props;this.state=extractValues({x,y,data,group,omitMissing})}static getDerivedStateFromProps(nextProps,prevState){if(nextProps.data!==prevState.data||nextProps.x!==prevState.x||nextProps.y!==prevState.y||nextProps.group!==prevState.group||nextProps.omitMissing!==prevState.omitMissing){const{x,y,intercept,omitMissing,data,group}=nextProps;return extractValues({x,y,intercept,omitMissing,data,group})}return null}render(){const{xd,yd,groups}=this.state,{x,y,group,data,t}=this.props;let output;try{if(group){const xmeans=(0,_isle_project_utils_by__WEBPACK_IMPORTED_MODULE_14__.Z)(xd,groups,_isle_project_utils_statistic_mean__WEBPACK_IMPORTED_MODULE_9__.Z),res=(0,_isle_project_utils_by2__WEBPACK_IMPORTED_MODULE_13__.Z)(xd,yd,groups,calculateCoefficients);output=react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{style:{overflowX:"auto",width:"100%"}},react__WEBPACK_IMPORTED_MODULE_0__.createElement("label",null,t("regression-y-on-x",{x,y})),react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("i",null,t("grouped-by")," ",group,":")),_stdlib_utils_values__WEBPACK_IMPORTED_MODULE_3___default()(_stdlib_utils_map_values__WEBPACK_IMPORTED_MODULE_4___default()(res,(elem,key)=>{const{yint,slope,xg,yg}=elem,resAcc=_stdlib_stats_incr_sumabs2__WEBPACK_IMPORTED_MODULE_5___default()(),x2Acc=_stdlib_stats_incr_sumabs2__WEBPACK_IMPORTED_MODULE_5___default()(),x2mmAcc=_stdlib_stats_incr_sumabs2__WEBPACK_IMPORTED_MODULE_5___default()(),cdf=_stdlib_stats_base_dists_t_cdf__WEBPACK_IMPORTED_MODULE_6___default().factory(yg.length-2);for(let i=0;i<yg.length;i++){const pred=yint+slope*xg[i];resAcc(pred-yg[i]),x2Acc(xg[i]),x2mmAcc(xg[i]-xmeans[key])}const sigma2=resAcc()/(yg.length-2),slopeVar=sigma2/x2mmAcc(),slopeSE=_stdlib_math_base_special_sqrt__WEBPACK_IMPORTED_MODULE_8___default()(slopeVar),interceptVar=1/yg.length*sigma2*x2Acc()/x2mmAcc(),interceptSE=_stdlib_math_base_special_sqrt__WEBPACK_IMPORTED_MODULE_8___default()(interceptVar),tSlope=slope/slopeSE,tIntercept=yint/interceptSE;return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{key:`group-${key}`},react__WEBPACK_IMPORTED_MODULE_0__.createElement("label",null,key,":"),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_isle_project_components_table__WEBPACK_IMPORTED_MODULE_1__.Z,{bordered:!0,size:"sm"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("thead",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("tr",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("th",null,t("variable")),react__WEBPACK_IMPORTED_MODULE_0__.createElement("th",null,t("coefficient")),react__WEBPACK_IMPORTED_MODULE_0__.createElement("th",null,t("std-error")),react__WEBPACK_IMPORTED_MODULE_0__.createElement("th",null,T),react__WEBPACK_IMPORTED_MODULE_0__.createElement("th",null,t("p-value")))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("tbody",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("tr",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("td",null,t("intercept")),react__WEBPACK_IMPORTED_MODULE_0__.createElement("td",null,yint.toFixed(4)),react__WEBPACK_IMPORTED_MODULE_0__.createElement("td",null,interceptSE.toFixed(4)),react__WEBPACK_IMPORTED_MODULE_0__.createElement("td",null,tIntercept.toFixed(4)),react__WEBPACK_IMPORTED_MODULE_0__.createElement("td",null,2*(1-cdf(_stdlib_math_base_special_abs__WEBPACK_IMPORTED_MODULE_7___default()(tIntercept))).toFixed(4))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("tr",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("td",null,x),react__WEBPACK_IMPORTED_MODULE_0__.createElement("td",null,slope.toFixed(4)),react__WEBPACK_IMPORTED_MODULE_0__.createElement("td",null,slopeSE.toFixed(4)),react__WEBPACK_IMPORTED_MODULE_0__.createElement("td",null,tSlope.toFixed(4)),react__WEBPACK_IMPORTED_MODULE_0__.createElement("td",null,2*(1-cdf(_stdlib_math_base_special_abs__WEBPACK_IMPORTED_MODULE_7___default()(tSlope))).toFixed(4))))))})),this.props.onPredict?react__WEBPACK_IMPORTED_MODULE_0__.createElement(_isle_project_components_tooltip__WEBPACK_IMPORTED_MODULE_2__.Z,{tooltip:t("use-model-to-predict-tooltip")},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_bootstrap_Button__WEBPACK_IMPORTED_MODULE_19___default(),{variant:"secondary",size:"sm",onClick:()=>{const predict=data2=>{const xd2=data2[x],yd2=data2[y],fitted=new Float64Array(yd2.length),residuals=new Float64Array(yd2.length),groups2=data2[group];for(let i=0;i<fitted.length;i++){const{yint,slope}=res[groups2[i]];fitted[i]=yint+slope*xd2[i],residuals[i]=yd2[i]-fitted[i]}return{fitted,residuals}};this.props.onPredict(predict,COUNTER)}},this.props.t("use-model-to-predict"))):null,this.props.onDiagnostics?react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_bootstrap_Button__WEBPACK_IMPORTED_MODULE_19___default(),{variant:"secondary",size:"sm",style:{marginLeft:6},onClick:()=>{const xd2=data[x],yd2=data[y],fitted=new Float64Array(yd2.length),residuals=new Float64Array(yd2.length),groups2=data[group];for(let i=0;i<fitted.length;i++){const{yint,slope}=res[groups2[i]];fitted[i]=yint+slope*xd2[i],residuals[i]=yd2[i]-fitted[i]}const qqPlot=react__WEBPACK_IMPORTED_MODULE_0__.createElement(_isle_project_components_plotly__WEBPACK_IMPORTED_MODULE_10__.Z,__spreadProps(__spreadValues({draggable:!0,editable:!0,fit:!0},(0,_isle_project_components_plots_qqplot__WEBPACK_IMPORTED_MODULE_12__._)(residuals,"residuals")),{meta:{type:"qqplot of regression residuals",x:xd2,y:yd2}})),residualPlot=react__WEBPACK_IMPORTED_MODULE_0__.createElement(_isle_project_components_plotly__WEBPACK_IMPORTED_MODULE_10__.Z,{draggable:!0,editable:!0,fit:!0,data:[{x:fitted,y:residuals,mode:"markers"}],layout:{xaxis:{title:t("fitted-values")},yaxis:{title:t("residuals")},title:t("residuals-vs-fitted")},meta:{type:"regression residuals vs. fitted",x:xd2,y:yd2}}),hist=react__WEBPACK_IMPORTED_MODULE_0__.createElement(_isle_project_components_plots_histogram__WEBPACK_IMPORTED_MODULE_11__.Z,{data:{Residuals:residuals},variable:"Residuals",title:t("plotly:histogram-title",{x:"Residuals"})});this.props.onDiagnostics([qqPlot,hist,residualPlot])}},t("model-diagnostics")):null)}else{const{yint,slope}=calculateCoefficients(xd,yd),resAcc=_stdlib_stats_incr_sumabs2__WEBPACK_IMPORTED_MODULE_5___default()(),x2Acc=_stdlib_stats_incr_sumabs2__WEBPACK_IMPORTED_MODULE_5___default()(),x2mmAcc=_stdlib_stats_incr_sumabs2__WEBPACK_IMPORTED_MODULE_5___default()(),xmean=(0,_isle_project_utils_statistic_mean__WEBPACK_IMPORTED_MODULE_9__.Z)(xd),cdf=_stdlib_stats_base_dists_t_cdf__WEBPACK_IMPORTED_MODULE_6___default().factory(yd.length-2);for(let i=0;i<yd.length;i++){const pred=yint+slope*xd[i];resAcc(pred-yd[i]),x2Acc(xd[i]),x2mmAcc(xd[i]-xmean)}const sigma2=resAcc()/(yd.length-2),slopeVar=sigma2/x2mmAcc(),slopeSE=_stdlib_math_base_special_sqrt__WEBPACK_IMPORTED_MODULE_8___default()(slopeVar),interceptVar=1/yd.length*sigma2*x2Acc()/x2mmAcc(),interceptSE=_stdlib_math_base_special_sqrt__WEBPACK_IMPORTED_MODULE_8___default()(interceptVar),tSlope=slope/slopeSE,tIntercept=yint/interceptSE;output=react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{style:{overflowX:"auto",width:"100%"}},react__WEBPACK_IMPORTED_MODULE_0__.createElement("label",null,t("simple-regression-title",{x,y,counter:COUNTER})),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_isle_project_components_table__WEBPACK_IMPORTED_MODULE_1__.Z,{bordered:!0,size:"sm"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("thead",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("tr",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("th",null,t("variable")),react__WEBPACK_IMPORTED_MODULE_0__.createElement("th",null,t("coefficient")),react__WEBPACK_IMPORTED_MODULE_0__.createElement("th",null,t("std-error")),react__WEBPACK_IMPORTED_MODULE_0__.createElement("th",null,T),react__WEBPACK_IMPORTED_MODULE_0__.createElement("th",null,t("p-value")))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("tbody",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("tr",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("td",null,t("intercept")),react__WEBPACK_IMPORTED_MODULE_0__.createElement("td",null,yint.toFixed(4)),react__WEBPACK_IMPORTED_MODULE_0__.createElement("td",null,interceptSE.toFixed(4)),react__WEBPACK_IMPORTED_MODULE_0__.createElement("td",null,tIntercept.toFixed(4)),react__WEBPACK_IMPORTED_MODULE_0__.createElement("td",null,2*(1-cdf(_stdlib_math_base_special_abs__WEBPACK_IMPORTED_MODULE_7___default()(tIntercept))).toFixed(4))),react__WEBPACK_IMPORTED_MODULE_0__.createElement("tr",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("td",null,x),react__WEBPACK_IMPORTED_MODULE_0__.createElement("td",null,slope.toFixed(4)),react__WEBPACK_IMPORTED_MODULE_0__.createElement("td",null,slopeSE.toFixed(4)),react__WEBPACK_IMPORTED_MODULE_0__.createElement("td",null,tSlope.toFixed(4)),react__WEBPACK_IMPORTED_MODULE_0__.createElement("td",null,2*(1-cdf(_stdlib_math_base_special_abs__WEBPACK_IMPORTED_MODULE_7___default()(tSlope))).toFixed(4))))),this.props.onPredict?react__WEBPACK_IMPORTED_MODULE_0__.createElement(_isle_project_components_tooltip__WEBPACK_IMPORTED_MODULE_2__.Z,{tooltip:t("use-model-to-predict-tooltip")},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_bootstrap_Button__WEBPACK_IMPORTED_MODULE_19___default(),{variant:"secondary",size:"sm",onClick:()=>{const predict=data2=>{const xd2=data2[x],yd2=data2[y],fitted=new Array(yd2.length),residuals=new Array(yd2.length);for(let i=0;i<fitted.length;i++)fitted[i]=yint+slope*xd2[i],residuals[i]=yd2[i]-fitted[i];return{fitted,residuals}};this.props.onPredict(predict,COUNTER)}},this.props.t("use-model-to-predict"))):null,this.props.onDiagnostics?react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_bootstrap_Button__WEBPACK_IMPORTED_MODULE_19___default(),{variant:"secondary",size:"sm",style:{marginLeft:6},onClick:()=>{const xd2=data[x],yd2=data[y],yhat=new Array(yd2.length),resid=new Array(yd2.length);for(let i=0;i<yhat.length;i++)yhat[i]=yint+slope*xd2[i],resid[i]=yd2[i]-yhat[i];const qqPlot=react__WEBPACK_IMPORTED_MODULE_0__.createElement(_isle_project_components_plotly__WEBPACK_IMPORTED_MODULE_10__.Z,__spreadProps(__spreadValues({draggable:!0,editable:!0,fit:!0},(0,_isle_project_components_plots_qqplot__WEBPACK_IMPORTED_MODULE_12__._)(resid,"residuals")),{meta:{type:"qqplot of regression residuals",x:xd2,y:yd2}})),hist=react__WEBPACK_IMPORTED_MODULE_0__.createElement(_isle_project_components_plots_histogram__WEBPACK_IMPORTED_MODULE_11__.Z,{data:{Residuals:resid},variable:"Residuals",title:t("plotly:histogram-title",{x:"Residuals"})}),residualPlot=react__WEBPACK_IMPORTED_MODULE_0__.createElement(_isle_project_components_plotly__WEBPACK_IMPORTED_MODULE_10__.Z,{draggable:!0,editable:!0,fit:!0,data:[{x:yhat,y:resid,mode:"markers",type:yhat.length>2e3?"scattergl":"scatter"}],layout:{xaxis:{title:t("fitted-values")},yaxis:{title:t("residuals")},title:t("residuals-vs-fitted")},meta:{type:"regression residuals vs. fitted",x:xd2,y:yd2}});this.props.onDiagnostics([qqPlot,hist,residualPlot])}},t("model-diagnostics")):null)}return output}catch(_){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_bootstrap_Alert__WEBPACK_IMPORTED_MODULE_20___default(),{variant:"danger"},t("missing-attributes"))}}}SimpleLinearRegression.defaultProps={group:null,omitMissing:!1,onDiagnostics:null,onPredict:null},SimpleLinearRegression.propTypes={data:prop_types__WEBPACK_IMPORTED_MODULE_21___default().object.isRequired,x:prop_types__WEBPACK_IMPORTED_MODULE_21___default().string.isRequired,y:prop_types__WEBPACK_IMPORTED_MODULE_21___default().string.isRequired,group:prop_types__WEBPACK_IMPORTED_MODULE_21___default().oneOfType([prop_types__WEBPACK_IMPORTED_MODULE_21___default().string,prop_types__WEBPACK_IMPORTED_MODULE_21___default().instanceOf(_isle_project_utils_factor_variable__WEBPACK_IMPORTED_MODULE_16__.E)]),omitMissing:prop_types__WEBPACK_IMPORTED_MODULE_21___default().bool,onDiagnostics:prop_types__WEBPACK_IMPORTED_MODULE_21___default().func,onPredict:prop_types__WEBPACK_IMPORTED_MODULE_21___default().func},__webpack_exports__.default=(0,react_i18next__WEBPACK_IMPORTED_MODULE_22__.Zh)(["models","plotly"])((0,_isle_project_utils_prop_check__WEBPACK_IMPORTED_MODULE_15__.W)(SimpleLinearRegression))}}]);

//# sourceMappingURL=SimpleLinearRegression.b09ce362.chunk.js.map