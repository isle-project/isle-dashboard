"use strict";(self.webpackChunkisle_dashboard=self.webpackChunkisle_dashboard||[]).push([[8922],{47605:function(module,__unused_webpack_exports,__webpack_require__){var omitBy=__webpack_require__(81281);module.exports=omitBy},81281:function(module,__unused_webpack_exports,__webpack_require__){var objectKeys=__webpack_require__(25351),isFunction=__webpack_require__(5726);function omitBy(obj,predicate){var keys,out,key,i;if(typeof obj!="object"||obj===null)throw new TypeError("invalid argument. First argument must be an object. Value: `"+obj+"`.");if(!isFunction(predicate))throw new TypeError("invalid argument. Second argument must be a function. Value: `"+predicate+"`.");for(out={},keys=objectKeys(obj),i=0;i<keys.length;i++)key=keys[i],predicate(key,obj[key])||(out[key]=obj[key]);return out}module.exports=omitBy},96573:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(45254),react_dom__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(84167),prop_types__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(45697),prop_types__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_3__),_stdlib_constants_float64_pi__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(92663),_stdlib_constants_float64_pi__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_stdlib_constants_float64_pi__WEBPACK_IMPORTED_MODULE_2__),__defProp=Object.defineProperty,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(obj,key,value)=>key in obj?__defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value}):obj[key]=value,__spreadValues=(a,b)=>{for(var prop in b||(b={}))__hasOwnProp.call(b,prop)&&__defNormalProp(a,prop,b[prop]);if(__getOwnPropSymbols)for(var prop of __getOwnPropSymbols(b))__propIsEnum.call(b,prop)&&__defNormalProp(a,prop,b[prop]);return a},__publicField=(obj,key,value)=>(__defNormalProp(obj,typeof key!="symbol"?key+"":key,value),value);class Spinner extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),__publicField(this,"startSpinner",()=>{const context=(0,react_dom__WEBPACK_IMPORTED_MODULE_1__.findDOMNode)(this).getContext("2d");this.context=context;const start=new Date,lines=this.props.lines,cW=context.canvas.width,cH=context.canvas.height,draw=()=>{const num=(new Date-start)/1e3*lines,rotation=parseInt(num,10)/lines;context.save(),context.clearRect(0,0,cW,cH),context.translate(cW/2,cH/2),context.rotate(_stdlib_constants_float64_pi__WEBPACK_IMPORTED_MODULE_2___default()*2*rotation);for(let i=0;i<lines;i++)context.beginPath(),context.rotate(_stdlib_constants_float64_pi__WEBPACK_IMPORTED_MODULE_2___default()*2/lines),context.moveTo(cW/10,0),context.lineTo(cW/4,0),context.lineWidth=cW/30,context.strokeStyle="rgba(0, 0, 0,"+i/lines+")",context.stroke();context.restore()};this.activeSpinner=window.setInterval(draw,50)})}componentDidUpdate(){this.activeSpinner&&this.context.canvas&&(clearInterval(this.activeSpinner),this.context.clearRect(0,0,this.context.canvas.width,this.context.canvas.height)),this.props.running===!0&&this.startSpinner()}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("canvas",{style:__spreadValues({width:this.props.width,height:this.props.height,display:this.props.running?this.props.display:"none",margin:"auto"},this.props.style)})}}Spinner.defaultProps={display:"block",height:64,lines:16,style:{},width:128},Spinner.propTypes={display:prop_types__WEBPACK_IMPORTED_MODULE_3___default().string,height:prop_types__WEBPACK_IMPORTED_MODULE_3___default().number,lines:prop_types__WEBPACK_IMPORTED_MODULE_3___default().number,running:prop_types__WEBPACK_IMPORTED_MODULE_3___default().bool.isRequired,style:prop_types__WEBPACK_IMPORTED_MODULE_3___default().object,width:prop_types__WEBPACK_IMPORTED_MODULE_3___default().number},__webpack_exports__.Z=Spinner},33337:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:function(){return main}});var react=__webpack_require__(45254),prop_types=__webpack_require__(45697),prop_types_default=__webpack_require__.n(prop_types),commonjs=__webpack_require__(81468),js_yaml=__webpack_require__(48583),lib=__webpack_require__(47605),lib_default=__webpack_require__.n(lib),is_null_lib=__webpack_require__(95447),is_null_lib_default=__webpack_require__.n(is_null_lib),create_prepend_code=__webpack_require__(63167),spinner=__webpack_require__(96573),loadable=__webpack_require__(29209),components_image=(0,loadable.Z)(()=>Promise.all([__webpack_require__.e(8961),__webpack_require__.e(1686)]).then(__webpack_require__.bind(__webpack_require__,68961))),context=__webpack_require__(32283),html_to_clipboard=__webpack_require__(59177),prop_check=__webpack_require__(25048),__defProp=Object.defineProperty,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(obj,key,value)=>key in obj?__defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value}):obj[key]=value,__spreadValues=(a,b)=>{for(var prop in b||(b={}))__hasOwnProp.call(b,prop)&&__defNormalProp(a,prop,b[prop]);if(__getOwnPropSymbols)for(var prop of __getOwnPropSymbols(b))__propIsEnum.call(b,prop)&&__defNormalProp(a,prop,b[prop]);return a},__objRest=(source,exclude)=>{var target={};for(var prop in source)__hasOwnProp.call(source,prop)&&exclude.indexOf(prop)<0&&(target[prop]=source[prop]);if(source!=null&&__getOwnPropSymbols)for(var prop of __getOwnPropSymbols(source))exclude.indexOf(prop)<0&&__propIsEnum.call(source,prop)&&(target[prop]=source[prop]);return target};function createImgHTML({id,meta,plot}){let img;return meta?(meta=lib_default()(meta,(_,value)=>is_null_lib_default()(value)),meta=js_yaml.dump(meta),img=`<img src="${plot}" style="display: block; margin: 0 auto;" data-plot-id="${id}" data-plot-meta="${meta}"></img>`):img=`<img src="${plot}" alt="R Plot" style="display: block; margin: 0 auto;" />`,img}const RPlot=_a=>{var _b=_a,{code,className,draggable,id,libraries,prependCode,fileType,meta,onDone}=_b,rest=__objRest(_b,["code","className","draggable","id","libraries","prependCode","fileType","meta","onDone"]);const{t}=(0,commonjs.$G)("r"),[waiting,setWaiting]=(0,react.useState)(!1),[plot,setPlot]=(0,react.useState)({img:null,body:null}),session=(0,react.useContext)(context.Z);(0,react.useEffect)(()=>{setWaiting(!0);const fullCode=(0,create_prepend_code.Z)(libraries,prependCode,session)+code;session.getRPlot(fullCode,fileType,(error,img,body)=>{error?onDone(error):(setPlot({img,body}),setWaiting(!1),onDone(null,img,body))})},[code,fileType,libraries,prependCode,session,onDone]);let draggableBar=null;return draggable&&(draggableBar=react.createElement("button",{className:"rplot-draggable-bar",draggable:!0,onDragStart:ev=>{const img=createImgHTML({id,meta,plot:plot.body});ev.dataTransfer.setData("text/html",img)},onClick:()=>{const img=createImgHTML({id,meta,plot:plot.body});(0,html_to_clipboard.Z)(img)}},t("drag-plot"))),react.createElement("div",{className:`rplot ${className}`,style:{minHeight:128,cursor:"pointer"}},react.createElement(spinner.Z,{running:waiting,width:256,height:128}),waiting?react.createElement("span",null):react.createElement(react.Fragment,null,draggableBar,react.createElement(components_image,__spreadValues({src:plot.img,body:plot.body,title:t("r-plot")},rest))))};RPlot.propTypes={code:prop_types_default().string,width:prop_types_default().oneOfType([prop_types_default().number,prop_types_default().string]),height:prop_types_default().oneOfType([prop_types_default().number,prop_types_default().string]),draggable:prop_types_default().bool,fileType:prop_types_default().string,libraries:prop_types_default().array,prependCode:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().array]),meta:prop_types_default().object,className:prop_types_default().string,onDone:prop_types_default().func},RPlot.defaultProps={code:"",width:600,height:"auto",draggable:!1,fileType:"svg",libraries:[],prependCode:"",meta:null,className:"",onDone(){}};var main=(0,prop_check.W)(RPlot)},63167:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _stdlib_assert_is_array__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(76266),_stdlib_assert_is_array__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_stdlib_assert_is_array__WEBPACK_IMPORTED_MODULE_0__);const requireLibs=libs=>libs.map(x=>"library("+x+");").join(" ");function createPrependCode(libs,prependCode,session){const{rshell}=session.config;rshell&&rshell.libraries&&(libs=libs.concat(rshell.libraries));let ret=requireLibs(libs);return rshell&&rshell.global&&(ret+=rshell.global+`
`),prependCode=_stdlib_assert_is_array__WEBPACK_IMPORTED_MODULE_0___default()(prependCode)?prependCode.join(`
`):prependCode,prependCode+=`
`,ret+=prependCode,ret}__webpack_exports__.Z=createPrependCode},48583:function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/c8e207d336b35e1b8c28.mjs"}}]);

//# sourceMappingURL=RPlot.bec71316.chunk.js.map