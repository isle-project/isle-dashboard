"use strict";(self.webpackChunkisle_dashboard=self.webpackChunkisle_dashboard||[]).push([[5617],{50428:function(e,t,a){a.r(t);var s=a(38603),n=a(91532),l=a.n(n),r=a(2561),o=a.n(r),i=a(58651),c=a(53697),d=a.n(c),m=a(12630),p=a(12908),u=a(69977),h=a(5610),f=a(92290),g=a.n(f),v=a(88928),D=a.n(v),b=a(76470),E=a(31617),y=a(34668),Z=a(37933),x=a(63022),C=a(27925),w=a(65307),k=a(72868);function L(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const T=o()("isle-dashboard:admin");class A extends s.Component{constructor(e){super(e),L(this,"createColumns",(()=>{const{t:e}=this.props,t=this.props.admin.lessons;let a=D(),n=0;for(let s=0;s<t.length;s++)t[s].createdAt>n&&(n=t[s].createdAt),t[s].updatedAt>n&&(n=t[s].updatedAt),t[s].createdAt<a&&(a=t[s].createdAt),t[s].updatedAt<a&&(a=t[s].updatedAt);return n=d()(n),a=d()(a),[{Header:e("common:title"),id:"title",accessor:"title",maxWidth:200,style:{marginTop:"8px",color:"darkslategrey"},filterMethod:k.Z,Cell:e=>s.createElement("a",{href:`${x.ZP}/${e.original.namespace.title}/${e.original.title}`},e.original.title)},{Header:e("common:course"),id:"namespace",accessor:"namespace.title",maxWidth:200,style:{marginTop:"8px",color:"darkslategrey"},filterMethod:k.Z},{Header:e("common:description"),id:"description",accessor:"description",maxWidth:200,style:{marginTop:"8px",color:"darkslategrey"},filterMethod:k.Z},(0,C.Z)({Header:g()(e("lesson:active")),accessor:"active",trueLabel:e("lesson:active"),falseLabel:e("lesson:inactive")}),(0,C.Z)({Header:g()(e("lesson:public")),accessor:"public",trueLabel:e("lesson:public"),falseLabel:e("lesson:private")}),(0,w.Z)({Header:e("last-updated"),accessor:"updatedAt",startDate:a,endDate:n,t:e}),(0,w.Z)({Header:e("created-at"),accessor:"createdAt",startDate:a,endDate:n,t:e}),{Header:e("metadata"),accessor:"metadata",style:{marginTop:"2px",color:"darkslategrey",fontSize:24,textAlign:"center",cursor:"pointer"},Cell:e=>{if(e.value){const t=s.createElement(h.Z,{id:"popover-data",style:{maxWidth:400}},s.createElement(h.Z.Title,{as:"h3"},"Data"),s.createElement(h.Z.Content,{style:{backgroundColor:"lightblue"}},s.createElement("pre",null,JSON.stringify(e.value,null,2))));return s.createElement(p.Z,{trigger:"click",placement:"right",overlay:t},s.createElement("i",{className:"data-icon fas fa-tablet-alt"}))}return null},maxWidth:120,resizable:!1,filterable:!1,sortable:!1},{Header:e("common:actions"),Cell:t=>s.createElement("div",null,s.createElement(p.Z,{placement:"bottom",overlay:s.createElement(u.Z,{id:"delete_lesson"},e("lesson:delete-lesson"))},s.createElement(m.Z,{variant:"outline-secondary",style:{marginLeft:8},onClick:this.askToDeleteSelectedLessonFactory(t.row._original),"aria-label":e("lesson:delete-lesson")},s.createElement("div",{className:"fa fa-trash-alt"})))),resizable:!1,filterable:!1,sortable:!1}]})),L(this,"askToDeleteSelectedLessonFactory",(e=>()=>{this.setState({showDeleteModal:!this.state.showDeleteModal,selectedLesson:e})})),L(this,"deleteSelectedLesson",(()=>{const e=this.state.selectedLesson.title,t=this.state.selectedLesson.namespace.title;T(`Delete lesson ${e} of course ${t}.`),this.setState({showDeleteModal:!1},(async()=>{await this.props.deleteLesson({lessonName:e,namespaceName:t}),this.props.getAllLessons()}))})),L(this,"toggleDeleteModal",(()=>{this.setState({showDeleteModal:!this.state.showDeleteModal})})),L(this,"toggleExplorer",(()=>{this.setState({showExplorer:!this.state.showExplorer})})),this.state={selectedLesson:null,showDeleteModal:!1,columns:this.createColumns(),showExplorer:!1}}componentDidMount(){this.props.getAllLessons()}componentDidUpdate(e){e.admin.lessons!==this.props.admin.lessons&&this.setState({columns:this.createColumns()})}render(){const{t:e}=this.props;if(this.state.showExplorer){const t=this.props.admin.lessons;let a=[];for(let e=0;e<t.length;e++){const s=t[e],n={};n.title=s.title,n.namespace=s.namespace?s.namespace.title:null,n.description=s.description,n.active=s.active,n.public=s.public,n.createdAt=s.createdAt,n.updatedAt=s.updatedAt,a.push(n)}return a=(0,b.Z)(a),s.createElement(y.Z,{title:e("explorer-lessons-title"),data:a,categorical:["title","namespace","active","public","createdAt","updatedAt"],quantitative:[],close:this.toggleExplorer})}return s.createElement(s.Fragment,null,s.createElement(E.Z,{data:this.props.admin.lessons,columns:this.state.columns,onButtonClick:this.toggleExplorer,t:e}),this.state.showDeleteModal?s.createElement(Z.Z,{title:e("lesson:delete-lesson"),message:s.createElement("span",null,e("lesson:delete-modal-body",{name:this.state.selectedLesson.title})),close:this.toggleDeleteModal,show:this.state.showDeleteModal,onConfirm:this.deleteSelectedLesson}):null)}}A.propTypes={admin:l().object.isRequired,deleteLesson:l().func.isRequired,getAllLessons:l().func.isRequired,t:l().func.isRequired},t.default=(0,i.Z)(["admin","lesson","common"])(A)},37933:function(e,t,a){var s=a(38603),n=a(91532),l=a.n(n),r=a(58651),o=a(12630),i=a(14704);const c=e=>s.createElement(i.Z,{show:e.show,onHide:e.close},s.createElement(i.Z.Header,null,s.createElement(i.Z.Title,{as:"h3"},e.title)),s.createElement(i.Z.Body,null,e.message),s.createElement(i.Z.Footer,null,s.createElement(o.Z,{onClick:e.close},e.t("cancel")),s.createElement(o.Z,{variant:"danger",onClick:e.onConfirm},e.t("confirm"))));c.propTypes={close:l().func,message:l().node,onConfirm:l().func,show:l().bool,title:l().string},c.defaultProps={close(){},message:"",onConfirm(){},show:!1,title:""},t.Z=(0,r.Z)(["common"])(c)},31617:function(e,t,a){a.d(t,{Z:function(){return u}});var s=a(38603),n=a(91532),l=a.n(n),r=a(90037),o=a(12630),i=a(60805),c=a(12908),d=a(69977);a(3100);function m(){return m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},m.apply(this,arguments)}class p extends s.Component{constructor(...e){var t,a,s;super(...e),s=()=>({id:this.props.id||"dashboard-table"}),(a="getProps")in(t=this)?Object.defineProperty(t,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[a]=s}render(){const{t:e}=this.props;return s.createElement(s.Fragment,null,s.createElement(r.Z,m({},this.props,{filterable:!0,className:`dashboard-table ${this.props.className}`,data:this.props.data,columns:this.props.columns,previousText:e("common:previous"),nextText:e("common:next"),loadingText:e("common:loading"),noDataText:e("common:no-rows-found"),pageText:e("common:page"),ofText:e("common:of"),rowsText:e("common:rows"),ref:e=>{this.table=e},getProps:this.getProps})),this.props.onButtonClick?s.createElement(i.Z,{vertical:!0,style:{float:"right",marginRight:-9}},s.createElement(c.Z,{placement:"left",overlay:s.createElement(d.Z,{id:"explorer-tooltip"},e("common:data-explorer"))},s.createElement(o.Z,{"aria-label":e("common:data-explorer"),variant:"primary",style:{marginBottom:8},onClick:this.props.onButtonClick},s.createElement("i",{className:"fas fa-chart-bar"})))):null)}}p.propTypes={className:l().string,columns:l().array.isRequired,data:l().oneOfType([l().object,l().array]).isRequired,onButtonClick:l().func.isRequired,t:l().func},p.defaultProps={className:"",t(){}};var u=p},34668:function(e,t,a){const s=(0,a(221).Z)((()=>Promise.all([a.e(8504),a.e(6351)]).then(a.bind(a,27248))));t.Z=s},27925:function(e,t,a){var s=a(38603);t.Z=function({Header:e,accessor:t,trueLabel:a,falseLabel:n,printLabels:l=!1,maxWidth:r=150}){let o,i;return l?(o=e=>!0===e.value?a:!1===e.value?n:null,i={marginTop:"8px",color:"darkslategrey"}):(o=e=>e.value?s.createElement("i",{className:"far fa-check-square"}):null,i={marginTop:"2px",color:"darkslategrey",fontSize:24,textAlign:"center"}),{Header:e,accessor:t,style:i,Cell:o,filterMethod:(e,t)=>{if("all"===e.value)return!0;const a=e.pivotId||e.id;return void 0===t[a]||String(t[a])===e.value},Filter:({filter:e,onChange:t})=>{const l=e=>{const a=e.target.value;t(a)};let r;return r=e?e.value:"all",s.createElement("select",{onBlur:l,onChange:l,style:{width:"100%",backgroundColor:"ghostwhite"},value:r},s.createElement("option",{value:"all"},"Show All"),s.createElement("option",{value:!0},a),s.createElement("option",{value:!1},n))},maxWidth:r}}},65307:function(e,t,a){var s=a(38603),n=a(52089),l=a(12908),r=a(5610),o=a(12630);a(77511);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class c extends s.Component{constructor(e){super(e),i(this,"handleDatesChange",(({startDate:e,endDate:t})=>{this.setState({startDate:e,endDate:t},(()=>{this.props.onDatesChange(this.state)}))})),i(this,"handleReset",(()=>{this.setState({startDate:this.props.minDate,endDate:this.props.maxDate},(()=>{this.props.onDatesChange(this.state)}))})),this.state={startDate:e.startDate,endDate:e.endDate}}componentDidUpdate(e){this.props.startDate===e.startDate&&this.props.endDate===e.endDate||this.setState({startDate:this.props.startDate,endDate:this.props.endDate})}render(){return s.createElement(s.Fragment,null,s.createElement(n.DateRangePicker,{startDate:this.state.startDate,endDate:this.state.endDate,startDateId:"start_date_input",endDateId:"end_date_input",onDatesChange:this.handleDatesChange,focusedInput:this.state.focusedInput,onFocusChange:e=>this.setState({focusedInput:e}),isOutsideRange:()=>!1}),s.createElement(o.Z,{"aria-label":this.props.t("common:close"),variant:"warning",onClick:this.handleReset,style:{paddingTop:8,paddingLeft:16,paddingRight:16,paddingBottom:8,fontSize:20}},"x"))}}const d=e=>new Date(e.value).toLocaleString();t.Z=function({Header:e,accessor:t,Cell:a,style:n,startDate:i,endDate:m,t:p,maxWidth:u=150}){return{Header:e,accessor:t,style:n,Cell:a||d,filterMethod:(e,t)=>{if(!e.value)return!0;const{startDate:a,endDate:s}=e.value,n=t[e.pivotId||e.id].getTime();return a&&s?n>=a.valueOf()&&n<=s.valueOf():a?n>=a.valueOf():!s||n<=s.valueOf()},Filter:({filter:e,onChange:t})=>{const a=e&&e.value||{},n=s.createElement(r.Z,{id:"popover-data",style:{maxWidth:400}},s.createElement(r.Z.Title,{as:"h3"},p("common:dates")),s.createElement(r.Z.Content,{style:{backgroundColor:"grey"}},s.createElement(c,{startDate:a.startDate||i,minDate:i,maxDate:m,endDate:a.endDate||m,onDatesChange:({startDate:e,endDate:a})=>{t({startDate:e,endDate:a})},t:p})));return s.createElement(l.Z,{trigger:"click",placement:"right",overlay:n},s.createElement(o.Z,{"aria-label":p("common:toggle-calendar"),size:"sm",style:{float:"left",marginLeft:6},variant:"secondary"},s.createElement("i",{className:"far fa-calendar-alt"})))},maxWidth:u}}},72868:function(e,t,a){var s=a(89506),n=a.n(s),l=a(64817),r=a.n(l);t.Z=(e,t)=>{const a=t[e.id]||"";return n()(r()(a),r()(e.value))}},51906:function(e,t,a){a.d(t,{Z:function(){return m}});var s=a(87462),n=a(63366),l=a(68761),r=a.n(l),o=a(62489),i=a(38603),c=a(54447),d=["className","bsPrefix","as"];function m(e,t){var a,l=void 0===t?{}:t,m=l.displayName,p=void 0===m?(a=e)[0].toUpperCase()+(0,o.Z)(a).slice(1):m,u=l.Component,h=l.defaultProps,f=i.forwardRef((function(t,a){var l=t.className,o=t.bsPrefix,m=t.as,p=void 0===m?u||"div":m,h=(0,n.Z)(t,d),f=(0,c.vE)(o,e);return i.createElement(p,(0,s.Z)({ref:a,className:r()(l,f)},h))}));return f.defaultProps=h,f.displayName=p,f}}}]);
//# sourceMappingURL=5617.bd82922c.chunk.js.map