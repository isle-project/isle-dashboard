"use strict";(self.webpackChunkisle_dashboard=self.webpackChunkisle_dashboard||[]).push([[336],{23218:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Ib:function(){return changedNamespace},J3:function(){return updateCurrentNamespaceInjector},Ll:function(){return createNamespaceInjector},Tm:function(){return adjustProgressInjector},Vw:function(){return setLessonOrderInjector},hA:function(){return getAllNamespacesInjector},kC:function(){return deleteCurrentNamespaceInjector},qw:function(){return getNamespaceActionsInjector}});var axios__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(9669),axios__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_0__),querystring__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(17673),i18next__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(41631),_stdlib_assert_is_string__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(99301),_stdlib_assert_is_string__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_stdlib_assert_is_string__WEBPACK_IMPORTED_MODULE_3__),utils_file_saver_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(19446),constants_server__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(94204),actions_notification__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(16120),actions_cohort__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(72371),constants_action_types_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(84499),__defProp=Object.defineProperty,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(obj,key,value)=>key in obj?__defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value}):obj[key]=value,__spreadValues=(a,b)=>{for(var prop in b||(b={}))__hasOwnProp.call(b,prop)&&__defNormalProp(a,prop,b[prop]);if(__getOwnPropSymbols)for(var prop of __getOwnPropSymbols(b))__propIsEnum.call(b,prop)&&__defNormalProp(a,prop,b[prop]);return a},__async=(__this,__arguments,generator)=>new Promise((resolve,reject)=>{var fulfilled=value=>{try{step(generator.next(value))}catch(e){reject(e)}},rejected=value=>{try{step(generator.throw(value))}catch(e){reject(e)}},step=x=>x.done?resolve(x.value):Promise.resolve(x.value).then(fulfilled,rejected);step((generator=generator.apply(__this,__arguments)).next())});function appendCreatedNamespace(namespace){return{type:constants_action_types_js__WEBPACK_IMPORTED_MODULE_7__.$8,payload:{namespace}}}function changedNamespace({title,owners,announcements=[],cohorts=[],description,enableTicketing,_id,completions}){return{type:constants_action_types_js__WEBPACK_IMPORTED_MODULE_7__.WF,payload:{title,announcements,cohorts,description,enableTicketing,owners,completions,_id}}}function deletedCurrentNamespace(id){return{type:constants_action_types_js__WEBPACK_IMPORTED_MODULE_7__.ke,payload:{id}}}function updateStudentProgress({email,lessonID,progress,cohort}){return{type:constants_action_types_js__WEBPACK_IMPORTED_MODULE_7__.LX,payload:{email,lessonID,progress,cohort}}}function updatedOwnedNamespace({title,owners,description,enableTicketing,_id}){return{type:constants_action_types_js__WEBPACK_IMPORTED_MODULE_7__.Rg,payload:{title,description,owners,enableTicketing,_id}}}const createNamespace=(_0,_1)=>__async(void 0,[_0,_1],function*(dispatch,{title,description,tag,owners,props}){try{const body=__spreadValues({title,description,owners},(0,_stdlib_assert_is_string__WEBPACK_IMPORTED_MODULE_3__.isPrimitive)(tag)&&tag!=="_default_tag"&&{tag}),res=yield axios__WEBPACK_IMPORTED_MODULE_0___default().post(constants_server__WEBPACK_IMPORTED_MODULE_5__.ZP+"/create_namespace",body);if(!res.data.successful)return(0,actions_notification__WEBPACK_IMPORTED_MODULE_8__.EG)(dispatch,new Error(res.data.message));const namespace=res.data.namespace;dispatch(appendCreatedNamespace(namespace)),window.location.replace("/dashboard/lessons/"+title),(0,actions_notification__WEBPACK_IMPORTED_MODULE_8__.wN)(dispatch,{message:res.data.message,level:res.data.successful?"success":"error"})}catch(err){(0,actions_notification__WEBPACK_IMPORTED_MODULE_8__.EG)(dispatch,err)}}),createNamespaceInjector=dispatch=>_0=>__async(void 0,[_0],function*({title,description,tag,owners,props}){yield createNamespace(dispatch,{title,description,tag,owners,props})}),deleteCurrentNamespace=(dispatch,id)=>__async(void 0,null,function*(){try{const res=yield axios__WEBPACK_IMPORTED_MODULE_0___default().post(constants_server__WEBPACK_IMPORTED_MODULE_5__.ZP+"/delete_namespace",{id});dispatch(deletedCurrentNamespace(id)),(0,actions_notification__WEBPACK_IMPORTED_MODULE_8__.wN)(dispatch,{message:res.data.message,level:"success"})}catch(err){return(0,actions_notification__WEBPACK_IMPORTED_MODULE_8__.EG)(dispatch,err)}}),deleteCurrentNamespaceInjector=dispatch=>id=>__async(void 0,null,function*(){yield deleteCurrentNamespace(dispatch,id)}),updateCurrentNamespace=(dispatch,ns)=>__async(void 0,null,function*(){try{const res=yield axios__WEBPACK_IMPORTED_MODULE_0___default().post(constants_server__WEBPACK_IMPORTED_MODULE_5__.ZP+"/update_namespace",{ns});dispatch(changedNamespace(res.data.namespace)),dispatch(updatedOwnedNamespace(res.data.namespace)),(0,actions_notification__WEBPACK_IMPORTED_MODULE_8__.wN)(dispatch,{message:res.data.message,level:"success"}),(0,actions_cohort__WEBPACK_IMPORTED_MODULE_6__.k$)(dispatch,{namespaceID:ns._id})}catch(err){(0,actions_notification__WEBPACK_IMPORTED_MODULE_8__.EG)(dispatch,err)}}),updateCurrentNamespaceInjector=dispatch=>(id,ns)=>__async(void 0,null,function*(){yield updateCurrentNamespace(dispatch,id,ns)}),getNamespaceActions=(_0,_1)=>__async(void 0,[_0,_1],function*(dispatch,{namespaceID,namespaceTitle}){try{const res=yield axios__WEBPACK_IMPORTED_MODULE_0___default().get(constants_server__WEBPACK_IMPORTED_MODULE_5__.ZP+"/get_namespace_actions?"+querystring__WEBPACK_IMPORTED_MODULE_1__.stringify({namespaceID})),blob=new Blob([res.data],{type:"application/json"}),name=`actions_${namespaceTitle}.json`;(0,utils_file_saver_js__WEBPACK_IMPORTED_MODULE_4__.Z)(blob,name)}catch(err){(0,actions_notification__WEBPACK_IMPORTED_MODULE_8__.EG)(dispatch,err)}}),getNamespaceActionsInjector=dispatch=>_0=>__async(void 0,[_0],function*({namespaceID,namespaceTitle}){yield getNamespaceActions(dispatch,{namespaceID,namespaceTitle})}),adjustProgress=(_0,_1)=>__async(void 0,[_0,_1],function*(dispatch,{email,lessonID,namespaceID,progress,cohort}){const res=yield axios__WEBPACK_IMPORTED_MODULE_0___default().post(constants_server__WEBPACK_IMPORTED_MODULE_5__.ZP+"/user_adjust_progress",{email,lessonID,namespaceID,progress});(0,actions_notification__WEBPACK_IMPORTED_MODULE_8__.wN)(dispatch,{title:i18next__WEBPACK_IMPORTED_MODULE_2__.ZP.t("common:updated"),message:res.data.message,level:"success"}),dispatch(updateStudentProgress({email,lessonID,progress,cohort}))}),adjustProgressInjector=dispatch=>_0=>__async(void 0,[_0],function*({email,lessonID,namespaceID,progress,cohort}){yield adjustProgress(dispatch,{email,lessonID,namespaceID,progress,cohort})}),getAllNamespaces=dispatch=>__async(void 0,null,function*(){try{const res=yield axios__WEBPACK_IMPORTED_MODULE_0___default().get(constants_server__WEBPACK_IMPORTED_MODULE_5__.ZP+"/get_all_namespaces");dispatch({type:constants_action_types_js__WEBPACK_IMPORTED_MODULE_7__.XM,payload:{namespaces:res.data.namespaces}})}catch(err){return(0,actions_notification__WEBPACK_IMPORTED_MODULE_8__.EG)(dispatch,err)}}),getAllNamespacesInjector=dispatch=>()=>__async(void 0,null,function*(){yield getAllNamespaces(dispatch)}),setLessonOrder=(_0,_1)=>__async(void 0,[_0,_1],function*(dispatch,{lessons,id}){try{yield axios__WEBPACK_IMPORTED_MODULE_0___default().post(constants_server__WEBPACK_IMPORTED_MODULE_5__.ZP+"/set_lesson_order",{lessons,id})}catch(err){return(0,actions_notification__WEBPACK_IMPORTED_MODULE_8__.EG)(dispatch,err)}}),setLessonOrderInjector=dispatch=>_0=>__async(void 0,[_0],function*({lessons,id}){yield setLessonOrder(dispatch,{lessons,id})})},49063:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(67294),prop_types__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(45697),prop_types__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_12__),react_i18next__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(81468),_wojtekmaj_react_datetimerange_picker__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(15141),react_bootstrap_Container__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(70448),react_bootstrap_Container__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(react_bootstrap_Container__WEBPACK_IMPORTED_MODULE_6__),react_bootstrap_Modal__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(89194),react_bootstrap_Modal__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(react_bootstrap_Modal__WEBPACK_IMPORTED_MODULE_5__),react_bootstrap_Button__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(89876),react_bootstrap_Button__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(react_bootstrap_Button__WEBPACK_IMPORTED_MODULE_11__),react_bootstrap_Form__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(17383),react_bootstrap_Form__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(react_bootstrap_Form__WEBPACK_IMPORTED_MODULE_7__),react_bootstrap_Row__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(28269),react_bootstrap_Row__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(react_bootstrap_Row__WEBPACK_IMPORTED_MODULE_8__),react_bootstrap_Col__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(1266),react_select__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(87583),_stdlib_assert_is_array__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(76266),_stdlib_assert_is_array__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_stdlib_assert_is_array__WEBPACK_IMPORTED_MODULE_2__),_helpful_label_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(6141),__defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(obj,key,value)=>key in obj?__defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value}):obj[key]=value,__spreadValues=(a,b)=>{for(var prop in b||(b={}))__hasOwnProp.call(b,prop)&&__defNormalProp(a,prop,b[prop]);if(__getOwnPropSymbols)for(var prop of __getOwnPropSymbols(b))__propIsEnum.call(b,prop)&&__defNormalProp(a,prop,b[prop]);return a},__spreadProps=(a,b)=>__defProps(a,__getOwnPropDescs(b));const MULTIPLES_POLICIES=[{value:"last",label:"Last submitted value"},{value:"first",label:"First submitted value"},{value:"pass-through",label:"All submitted values"},{value:"max",label:"Best submitted value"}],memberSelection=member=>({value:member.id,label:`${member.firstName} ${member.lastName} (${member.email})`});function ComputeModal({cohorts,metric,entity,level,show,onHide,computeCompletions,onCompute}){const{t}=(0,react_i18next__WEBPACK_IMPORTED_MODULE_4__.$G)(["completions","common"]),metricName=_stdlib_assert_is_array__WEBPACK_IMPORTED_MODULE_2___default()(metric)?metric[0].name:metric.name,[formValues,setFormValues]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({users:[],activeCohorts:{},policyOptions:{multiples:MULTIPLES_POLICIES[0]}}),FORM_STORAGE_KEY=`ISLE?level=${level}&metric=${metricName}`;(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{var _a;let oldFormValues=localStorage.getItem(FORM_STORAGE_KEY);oldFormValues&&(oldFormValues=JSON.parse(oldFormValues),(_a=oldFormValues.policyOptions)!=null&&_a.timeFilter&&(oldFormValues.policyOptions.timeFilter=oldFormValues.policyOptions.timeFilter.map(x=>new Date(x))),setFormValues(oldFormValues))},[FORM_STORAGE_KEY]);const onTimeChange=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(dates=>{const newFormValues=__spreadValues({},formValues);dates?newFormValues.policyOptions.timeFilter=dates:delete newFormValues.policyOptions.timeFilter,setFormValues(newFormValues)},[formValues]),handleMultiplesPolicyChange=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(multiples=>{const newFormValues=__spreadValues({},formValues);newFormValues.policyOptions.multiples=multiples,setFormValues(newFormValues)},[formValues]),handleCompute=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{const policyOptions=__spreadProps(__spreadValues({},formValues.policyOptions),{multiples:formValues.policyOptions.multiples.value});formValues.policyOptions.timeFilter&&(policyOptions.timeFilter=formValues.policyOptions.timeFilter.map(x=>x.getTime())),localStorage.setItem(FORM_STORAGE_KEY,JSON.stringify(formValues));const body={ids:_stdlib_assert_is_array__WEBPACK_IMPORTED_MODULE_2___default()(entity)?entity.map(x=>x._id):[entity._id],users:formValues.users.map(x=>x.value),metric,policyOptions};computeCompletions(body).then(onCompute)},[metric,entity,formValues,FORM_STORAGE_KEY,computeCompletions,onCompute]),users=cohorts.reduce((userList,cohort)=>{const members=cohort.members.map(member=>memberSelection(member));return userList.concat(members)},[]),selectOptions=[{value:{category:"all",members:users},label:t("All users")},...cohorts.length>1?cohorts.map(cohort=>({value:{category:"cohort",id:cohort._id,members:cohort.members},label:"Cohort "+cohort.title})):[]].concat(users),userSelectStyles={option:(styles,{data})=>data.value.category==="cohort"&&formValues.activeCohorts[data.value.id]?__spreadProps(__spreadValues({},styles),{":before":{content:'"\u2713 "'}}):styles},handleUserSelectChange=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(value=>{if(!value){setFormValues(__spreadProps(__spreadValues({},formValues),{users:[]}));return}if(value.some(x=>x.value.category==="all")){setFormValues(__spreadProps(__spreadValues({},formValues),{users,activeCohorts:{}}));return}const selectedUsersSet=new Set,removeIds=new Set,newValue=[],newActiveCohorts=Object.assign({},formValues.activeCohorts);for(let i=0;i<value.length;i++)if(value[i].value.category==="cohort")if(formValues.activeCohorts[value[i].value.id])newActiveCohorts[value[i].value.id]=!1,value[i].value.members.forEach(member=>{removeIds.add(member.id)});else{newActiveCohorts[value[i].value.id]=!0;for(let j=0;j<value[i].value.members.length;++j)if(!selectedUsersSet.has(value[i].value.members[j].id)){const member=value[i].value.members[j];newValue.push(memberSelection(member)),selectedUsersSet.add(member.id)}}else selectedUsersSet.has(value[i].value)||(newValue.push(value[i]),selectedUsersSet.add(value[i].value));setFormValues(__spreadProps(__spreadValues({},formValues),{users:newValue.filter(x=>!removeIds.has(x.value)),activeCohorts:newActiveCohorts}))},[formValues,users]);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_bootstrap_Modal__WEBPACK_IMPORTED_MODULE_5___default(),{size:"lg",show,onHide},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_bootstrap_Modal__WEBPACK_IMPORTED_MODULE_5___default().Header,{closeButton:!0},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_bootstrap_Modal__WEBPACK_IMPORTED_MODULE_5___default().Title,{as:"h3"},t("calculate-scores-for",{metric:metricName}))),react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_bootstrap_Modal__WEBPACK_IMPORTED_MODULE_5___default().Body,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_bootstrap_Container__WEBPACK_IMPORTED_MODULE_6___default(),null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_bootstrap_Form__WEBPACK_IMPORTED_MODULE_7___default().Group,{className:"mb-2",as:react_bootstrap_Row__WEBPACK_IMPORTED_MODULE_8___default(),controlId:"multiplesPolicy"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_helpful_label_js__WEBPACK_IMPORTED_MODULE_3__.Z,{colWidth:3,name:t("multiples-policy"),description:t("multiples-policy-tooltip")}),react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_bootstrap_Col__WEBPACK_IMPORTED_MODULE_9__.default,{sm:9},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_select__WEBPACK_IMPORTED_MODULE_10__.ZP,{value:formValues.policyOptions.multiples,options:MULTIPLES_POLICIES,onChange:handleMultiplesPolicyChange}))),react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_bootstrap_Form__WEBPACK_IMPORTED_MODULE_7___default().Group,{className:"mb-2",as:react_bootstrap_Row__WEBPACK_IMPORTED_MODULE_8___default(),controlId:"timeFilter"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_helpful_label_js__WEBPACK_IMPORTED_MODULE_3__.Z,{colWidth:3,name:t("time-filter"),description:t("time-filter-tooltip")}),react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_bootstrap_Col__WEBPACK_IMPORTED_MODULE_9__.default,{sm:9},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_wojtekmaj_react_datetimerange_picker__WEBPACK_IMPORTED_MODULE_1__.Z,{onChange:onTimeChange,value:formValues.policyOptions.timeFilter}))),react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_bootstrap_Form__WEBPACK_IMPORTED_MODULE_7___default().Group,{className:"mb-2",as:react_bootstrap_Row__WEBPACK_IMPORTED_MODULE_8___default(),controlId:"users"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_helpful_label_js__WEBPACK_IMPORTED_MODULE_3__.Z,{colWidth:3,name:t("common:users"),description:t("users-tooltip")}),react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_bootstrap_Col__WEBPACK_IMPORTED_MODULE_9__.default,{sm:9},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_select__WEBPACK_IMPORTED_MODULE_10__.ZP,{value:formValues.users,isMulti:!0,options:selectOptions,onChange:handleUserSelectChange,hideSelectedOptions:!0,styles:userSelectStyles,placeholder:t("common:select-users-placeholder")}))))),react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_bootstrap_Modal__WEBPACK_IMPORTED_MODULE_5___default().Footer,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_bootstrap_Button__WEBPACK_IMPORTED_MODULE_11___default(),{onClick:onHide},t("common:cancel")),react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_bootstrap_Button__WEBPACK_IMPORTED_MODULE_11___default(),{variant:"success",onClick:handleCompute,disabled:formValues.users.length===0},t("common:compute"))))}ComputeModal.propTypes={cohorts:prop_types__WEBPACK_IMPORTED_MODULE_12___default().array.isRequired,computeCompletions:prop_types__WEBPACK_IMPORTED_MODULE_12___default().func.isRequired,entity:prop_types__WEBPACK_IMPORTED_MODULE_12___default().oneOfType([prop_types__WEBPACK_IMPORTED_MODULE_12___default().arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_12___default().object),prop_types__WEBPACK_IMPORTED_MODULE_12___default().object]).isRequired,level:prop_types__WEBPACK_IMPORTED_MODULE_12___default().string.isRequired,metric:prop_types__WEBPACK_IMPORTED_MODULE_12___default().oneOfType([prop_types__WEBPACK_IMPORTED_MODULE_12___default().arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_12___default().object),prop_types__WEBPACK_IMPORTED_MODULE_12___default().object]).isRequired,onCompute:prop_types__WEBPACK_IMPORTED_MODULE_12___default().func.isRequired,onHide:prop_types__WEBPACK_IMPORTED_MODULE_12___default().func.isRequired,show:prop_types__WEBPACK_IMPORTED_MODULE_12___default().bool.isRequired},ComputeModal.defaultProps={},__webpack_exports__.Z=ComputeModal},6141:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(67294),react_bootstrap_OverlayTrigger__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(99201),react_bootstrap_OverlayTrigger__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(react_bootstrap_OverlayTrigger__WEBPACK_IMPORTED_MODULE_2__),react_bootstrap_Tooltip__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(18868),react_bootstrap_Tooltip__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(react_bootstrap_Tooltip__WEBPACK_IMPORTED_MODULE_3__),react_bootstrap_Form__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(17383),react_bootstrap_Form__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(react_bootstrap_Form__WEBPACK_IMPORTED_MODULE_1__);function HelpfulLabel({name,description,colWidth,className,placement="left",disabled=!1,as=react_bootstrap_Form__WEBPACK_IMPORTED_MODULE_1___default().Label}){const children=[react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{key:"name"},name)];return disabled?react__WEBPACK_IMPORTED_MODULE_0__.createElement(as,{sm:colWidth,className,column:!0},children):(children.push(react__WEBPACK_IMPORTED_MODULE_0__.createElement("i",{key:"info-icon",className:"info-icon ms-2 fas fa-info"})),react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_bootstrap_OverlayTrigger__WEBPACK_IMPORTED_MODULE_2___default(),{placement,overlay:react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_bootstrap_Tooltip__WEBPACK_IMPORTED_MODULE_3___default(),{className:`render-whitespace ${description&&description.length>=80?"long-tooltip":""}`,id:`param-${name}-tooltip`},description)},react__WEBPACK_IMPORTED_MODULE_0__.createElement(as,{sm:colWidth,className,column:!0},children)))}__webpack_exports__.Z=HelpfulLabel},88608:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(67294),prop_types__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(45697),prop_types__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_3__),react_i18next__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(81468),react_bootstrap_Button__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(89876),react_bootstrap_Button__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(react_bootstrap_Button__WEBPACK_IMPORTED_MODULE_2__),react_bootstrap_Modal__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(89194),react_bootstrap_Modal__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(react_bootstrap_Modal__WEBPACK_IMPORTED_MODULE_1__);const ConfirmModal=props=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_bootstrap_Modal__WEBPACK_IMPORTED_MODULE_1___default(),{show:props.show,onHide:props.close},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_bootstrap_Modal__WEBPACK_IMPORTED_MODULE_1___default().Header,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_bootstrap_Modal__WEBPACK_IMPORTED_MODULE_1___default().Title,{as:"h3"},props.title)),react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_bootstrap_Modal__WEBPACK_IMPORTED_MODULE_1___default().Body,null,props.message),react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_bootstrap_Modal__WEBPACK_IMPORTED_MODULE_1___default().Footer,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_bootstrap_Button__WEBPACK_IMPORTED_MODULE_2___default(),{onClick:props.close},props.t("cancel")),react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_bootstrap_Button__WEBPACK_IMPORTED_MODULE_2___default(),{variant:"danger",onClick:props.onConfirm},props.t("confirm"))));ConfirmModal.propTypes={close:prop_types__WEBPACK_IMPORTED_MODULE_3___default().func,message:prop_types__WEBPACK_IMPORTED_MODULE_3___default().node,onConfirm:prop_types__WEBPACK_IMPORTED_MODULE_3___default().func,show:prop_types__WEBPACK_IMPORTED_MODULE_3___default().bool,title:prop_types__WEBPACK_IMPORTED_MODULE_3___default().string},ConfirmModal.defaultProps={close(){},message:"",onConfirm(){},show:!1,title:""},__webpack_exports__.Z=(0,react_i18next__WEBPACK_IMPORTED_MODULE_4__.Zh)(["common"])(ConfirmModal)},1624:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Z:function(){return dashboard_table}});var react=__webpack_require__(67294),prop_types=__webpack_require__(45697),prop_types_default=__webpack_require__.n(prop_types),lib=__webpack_require__(86199),Button=__webpack_require__(89876),Button_default=__webpack_require__.n(Button),ButtonGroup=__webpack_require__(63319),ButtonGroup_default=__webpack_require__.n(ButtonGroup),OverlayTrigger=__webpack_require__(99201),OverlayTrigger_default=__webpack_require__.n(OverlayTrigger),Tooltip=__webpack_require__(18868),Tooltip_default=__webpack_require__.n(Tooltip),react_table=__webpack_require__(94064),__defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(obj,key,value)=>key in obj?__defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value}):obj[key]=value,__spreadValues=(a,b)=>{for(var prop in b||(b={}))__hasOwnProp.call(b,prop)&&__defNormalProp(a,prop,b[prop]);if(__getOwnPropSymbols)for(var prop of __getOwnPropSymbols(b))__propIsEnum.call(b,prop)&&__defNormalProp(a,prop,b[prop]);return a},__spreadProps=(a,b)=>__defProps(a,__getOwnPropDescs(b));const DashboardTable=(0,react.forwardRef)((props,ref)=>{const{id,t}=props,getProps=(0,react.useCallback)(()=>({id:id||"dashboard-table"}),[id]);return react.createElement(react.Fragment,null,react.createElement(lib.ZP,__spreadProps(__spreadValues({},props),{filterable:!0,className:`dashboard-table ${props.className}`,data:props.data,columns:props.columns,previousText:t("common:previous"),nextText:t("common:next"),loadingText:t("common:loading"),noDataText:t("common:no-rows-found"),pageText:t("common:page"),ofText:t("common:of"),rowsText:t("common:rows"),getProps,ref})),props.onButtonClick?react.createElement(ButtonGroup_default(),{vertical:!0,style:{float:"right",marginRight:-9}},react.createElement(OverlayTrigger_default(),{placement:"left",overlay:react.createElement(Tooltip_default(),{id:"explorer-tooltip"},t("common:data-explorer"))},react.createElement(Button_default(),{"aria-label":t("common:data-explorer"),variant:"primary",style:{marginBottom:8},onClick:props.onButtonClick,disabled:props.disabled},react.createElement("i",{className:"fas fa-chart-bar"})))):null)});DashboardTable.propTypes={className:prop_types_default().string,columns:prop_types_default().array.isRequired,data:prop_types_default().oneOfType([prop_types_default().object,prop_types_default().array]).isRequired,disabled:prop_types_default().bool,onButtonClick:prop_types_default().func.isRequired,t:prop_types_default().func},DashboardTable.defaultProps={className:"",disabled:!1,t(){}};var dashboard_table=DashboardTable},21435:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:function(){return visible_namespace_data}});var react=__webpack_require__(67294),lib=__webpack_require__(37424),prop_types=__webpack_require__(45697),prop_types_default=__webpack_require__.n(prop_types),browser=__webpack_require__(11227),browser_default=__webpack_require__.n(browser),commonjs=__webpack_require__(81468),react_router_dom_production_min=__webpack_require__(59685),Alert=__webpack_require__(93166),Alert_default=__webpack_require__.n(Alert),Nav=__webpack_require__(75655),Nav_default=__webpack_require__.n(Nav),lib_browser=__webpack_require__(54816),lib_browser_default=__webpack_require__.n(lib_browser),ButtonGroup=__webpack_require__(63319),ButtonGroup_default=__webpack_require__.n(ButtonGroup),Button=__webpack_require__(89876),Button_default=__webpack_require__.n(Button),FormLabel=__webpack_require__(65903),FormLabel_default=__webpack_require__.n(FormLabel),FormGroup=__webpack_require__(34168),FormGroup_default=__webpack_require__.n(FormGroup),OverlayTrigger=__webpack_require__(99201),OverlayTrigger_default=__webpack_require__.n(OverlayTrigger),Tooltip=__webpack_require__(18868),Tooltip_default=__webpack_require__.n(Tooltip),Badge=__webpack_require__(86100),Badge_default=__webpack_require__.n(Badge),clipboard_copy=__webpack_require__(66485),clipboard_copy_default=__webpack_require__.n(clipboard_copy),roundn_lib=__webpack_require__(60004),roundn_lib_default=__webpack_require__.n(roundn_lib),ceil_lib=__webpack_require__(77731),ceil_lib_default=__webpack_require__.n(ceil_lib),pick_lib=__webpack_require__(54401),pick_lib_default=__webpack_require__.n(pick_lib),contains_lib=__webpack_require__(61635),contains_lib_default=__webpack_require__.n(contains_lib),lowercase_lib=__webpack_require__(86361),lowercase_lib_default=__webpack_require__.n(lowercase_lib),data_explorer=__webpack_require__(63787),obs_to_var=__webpack_require__(93390),dashboard_table=__webpack_require__(1624),confirm_modal=__webpack_require__(88608),server=__webpack_require__(94204),file_saver=__webpack_require__(19446),create_date_column=__webpack_require__(30691),create_text_column=__webpack_require__(90501),create_numeric_column=__webpack_require__(56739),input_range=__webpack_require__(53860),__defProp=Object.defineProperty,__defNormalProp=(obj,key,value)=>key in obj?__defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value}):obj[key]=value,__publicField=(obj,key,value)=>(__defNormalProp(obj,typeof key!="symbol"?key+"":key,value),value);const EXPORT_COLUMNS=["name","email","lesson","title","filename","type","createdAt","updatedAt"],debug=browser_default()("isle:files-page"),getPartAfterMedia=filepath=>filepath.substring(filepath.indexOf("/media/")+7),prepareExportData=data=>{for(let i=0;i<data.length;i++){const row=pick_lib_default()(data[i],EXPORT_COLUMNS);row.lesson=row.lesson.title,row.filename=server.ZP+"/"+row.filename,data[i]=row}return data};class FilesPage extends react.Component{constructor(props){super(props),__publicField(this,"handleDelete",()=>{this.props.handleFileDeletion(this.state.deletionID,this.props.ownerFiles),this.toggleDeleteModal()}),__publicField(this,"toggleDeleteModal",()=>{this.setState({showDeleteModal:!this.state.showDeleteModal})}),__publicField(this,"createColumns",()=>{const{t}=this.props;return[(0,create_text_column.Z)({Header:t("common:filename"),accessor:"title",minWidth:250,filterMethod:(filter,row)=>contains_lib_default()(lowercase_lib_default()(row[filter.id]),lowercase_lib_default()(filter.value))}),{Header:t("common:open"),accessor:"path",Cell:row=>react.createElement(OverlayTrigger_default(),{placement:"left",overlay:react.createElement(Tooltip_default(),{id:"external-link-tooltip"},t("open-file"))},react.createElement("a",{"aria-label":t("open-file"),href:server.ZP+"/"+getPartAfterMedia(row.value),target:"_blank",rel:"noopener noreferrer"},react.createElement(Button_default(),{"aria-label":t("open-file"),size:"sm",variant:"outline-secondary"},react.createElement("i",{className:"fa fa-external-link-alt"})))),resizable:!1,filterable:!1,sortable:!1,width:45},{Header:t("common:copy"),id:"copy-path",accessor:"path",Cell:row=>react.createElement(OverlayTrigger_default(),{placement:"right",overlay:react.createElement(Tooltip_default(),{id:"copy-clipboard-tooltip"},t("common:copy-link"))},react.createElement(Button_default(),{"aria-label":t("common:copy-link"),variant:"outline-secondary",size:"sm",onClick:()=>{clipboard_copy_default()(server.ZP+"/"+getPartAfterMedia(row.value)),this.props.addNotification({title:"Copied",message:"Link copied to clipboard",level:"success",position:"tl"})}},react.createElement("i",{className:"fa fa-clipboard"}))),resizable:!1,filterable:!1,sortable:!1,width:45},(0,create_text_column.Z)({Header:t("common:lesson"),accessor:"lesson",maxWidth:160,Cell:row=>row.row.lesson?react.createElement(OverlayTrigger_default(),{placement:"right",overlay:react.createElement(Tooltip_default(),{id:"open-lesson-tooltip"},t("open-lesson-new-tab"))},react.createElement("div",{style:{width:"100%",height:"100%"}},react.createElement("a",{"aria-label":t("open-lesson-new-tab"),href:row.row.lesson.url,target:"_blank",rel:"noopener noreferrer"},row.row.lesson.title))):react.createElement("span",null,t("no-lesson")),filterMethod:(filter,row)=>row[filter.id].title.startsWith(filter.value)}),(0,create_text_column.Z)({Header:t("common:first-name"),id:"first_name",accessor:"user.firstName",maxWidth:75,filterMethod:(filter,row)=>contains_lib_default()(lowercase_lib_default()(row[filter.id]),lowercase_lib_default()(filter.value))}),(0,create_text_column.Z)({Header:t("common:last-name"),id:"last_name",accessor:"user.lastName",maxWidth:75,filterMethod:(filter,row)=>contains_lib_default()(lowercase_lib_default()(row[filter.id]),lowercase_lib_default()(filter.value))}),(0,create_text_column.Z)({Header:t("common:email"),accessor:"user.email",maxWidth:160,filterMethod:(filter,row)=>contains_lib_default()(lowercase_lib_default()(row[filter.id]),lowercase_lib_default()(filter.value))}),(0,create_text_column.Z)({Header:t("type"),accessor:"type",filterMethod:(filter,row)=>contains_lib_default()(row[filter.id],filter.value)}),(0,create_numeric_column.Z)({Header:t("common:size"),accessor:"size",Cell:row=>row.value?`${roundn_lib_default()(row.value,-3)}mb`:"NA",filterMethod:(filter,row)=>{const id=filter.pivotId||filter.id,size=row[id];return size>=filter.value.min&&size<=filter.value.max},formatLabel:value=>roundn_lib_default()(value,-2),maxValue:ceil_lib_default()(this.state.fileMaxSize)||1,minValue:0}),(0,create_date_column.Z)({Header:t("common:date"),accessor:"updatedAt",Cell:row=>row.value&&row.value.toLocaleDateString?row.value.toLocaleDateString("en-US"):"",maxWidth:120,t}),{Header:"Del",accessor:"_id",Cell:row=>react.createElement(OverlayTrigger_default(),{placement:"left",overlay:react.createElement(Tooltip_default(),{id:"delete-file-tooltip"},t("delete-file-tooltip"))},react.createElement(Button_default(),{"aria-label":t("delete-file-tooltip"),size:"sm",variant:"outline-secondary",onClick:()=>{this.setState({deletionID:row.value,showDeleteModal:!0})}},react.createElement("div",{className:"fa fa-trash-alt"}))),resizable:!1,filterable:!1,sortable:!1,width:45}]}),__publicField(this,"saveJSON",()=>{const currentFiles=this.dashboardTable.getResolvedState().sortedData;let data=prepareExportData(currentFiles);const blob=new Blob([JSON.stringify(data)],{type:"application/json"}),name=`files_${this.props.namespace.title}.json`;(0,file_saver.Z)(blob,name)}),__publicField(this,"saveCSV",()=>{const currentFiles=this.dashboardTable.getResolvedState().sortedData;let data=prepareExportData(currentFiles);lib_browser_default()(data,{header:!0},(err,output)=>{if(err)return this.props.addNotification({title:"Error encountered",message:"Encountered an error while creating CSV: "+err.message,level:"error",position:"tl"});const blob=new Blob([output],{type:"text/plain"}),name=`files_${this.props.namespace.title}.csv`;(0,file_saver.Z)(blob,name)})}),__publicField(this,"toggleExplorer",()=>{this.setState({showExplorer:!this.state.showExplorer})}),this.state={showDeleteModal:!1,deletionID:null,fileMaxSize:0,fileInputKey:0,showExplorer:!1},this.columns=this.createColumns()}componentDidMount(){debug("Component did mount..."),this.props.getFiles({namespaceName:this.props.namespace.title})}componentDidUpdate(prevProps){if(prevProps.files!==this.props.files){const files=this.props.files;let fileMaxSize=0;for(let i=0;i<files.length;i++){const size=files[i].size;size&&size>fileMaxSize&&(fileMaxSize=size)}this.setState({fileMaxSize,fileInputKey:this.state.fileInputKey+1})}}render(){const{t}=this.props;if(this.state.showExplorer){const files=this.props.files;let data=[];for(let i=0;i<files.length;i++){const file2=files[i],replacement={};replacement.title=file2.title,replacement.type=file2.type,replacement.lesson=file2.lesson?file2.lesson.title:null,replacement.size=file2.size?file2.size:null,replacement.email=file2.email,replacement.createdAt=file2.createdAt,replacement.updatedAt=file2.updatedAt,data.push(replacement)}data=(0,obs_to_var.Z)(data);const quantitative=["size"],categorical=["title","type","lesson","email","createdAt","updatedAt"];return react.createElement(data_explorer.Z,{title:t("explorer-files-title"),data,categorical,quantitative,close:this.toggleExplorer})}return console.log(this.props.files),react.createElement("div",{className:"namespace-data-page"},react.createElement("div",{className:"namespace-data-buttons"},react.createElement(ButtonGroup_default(),{className:"files-export-button-group"},react.createElement(OverlayTrigger_default(),{placement:"bottom",overlay:react.createElement(Tooltip_default(),{id:"csvTooltip"},t("save-as-csv"))},react.createElement(Button_default(),{size:"sm",variant:"secondary",onClick:this.saveCSV},react.createElement("i",{className:"fas fa-download"})," CSV")),react.createElement(OverlayTrigger_default(),{placement:"bottom",overlay:react.createElement(Tooltip_default(),{id:"jsonTooltip"},t("save-as-json"))},react.createElement(Button_default(),{size:"sm",variant:"secondary",onClick:this.saveJSON},react.createElement("i",{className:"fas fa-download"})," JSON"))),this.props.ownerFiles?react.createElement(FormGroup_default(),{className:"file-upload-button"},react.createElement(FormLabel_default(),{htmlFor:"fileUpload",style:{cursor:"pointer"}},react.createElement(Badge_default(),{id:"file-upload-badge",bg:"success"},t("upload-file")),react.createElement("input",{id:"fileUpload",key:this.state.fileInputKey,type:"file",accept:".pdf,.html,.md,image/*,video/*,audio/*,.json,.csv",onChange:this.props.handleUpload,style:{display:"none"}}))):null),react.createElement(dashboard_table.Z,{data:this.props.files,columns:this.columns,t,ref:r=>{this.dashboardTable=r},onButtonClick:this.toggleExplorer}),react.createElement(confirm_modal.Z,{show:this.state.showDeleteModal,close:this.toggleDeleteModal,message:t("delete-file"),title:`${t("common:delete")}?`,onConfirm:this.handleDelete}))}}FilesPage.propTypes={addNotification:prop_types_default().func.isRequired,files:prop_types_default().array.isRequired,getFiles:prop_types_default().func.isRequired,handleFileDeletion:prop_types_default().func.isRequired,handleUpload:prop_types_default().func.isRequired,namespace:prop_types_default().object.isRequired,ownerFiles:prop_types_default().bool},FilesPage.defaultProps={ownerFiles:!1};var files_page=(0,commonjs.Zh)(["namespace_data","common"])(FilesPage),Card=__webpack_require__(51889),Card_default=__webpack_require__.n(Card),FormControl=__webpack_require__(26199),FormControl_default=__webpack_require__.n(FormControl),Form=__webpack_require__(17383),Form_default=__webpack_require__.n(Form),message_page=__webpack_require__(60176),announcements_page_defProp=Object.defineProperty,announcements_page_defNormalProp=(obj,key,value)=>key in obj?announcements_page_defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value}):obj[key]=value,announcements_page_publicField=(obj,key,value)=>(announcements_page_defNormalProp(obj,typeof key!="symbol"?key+"":key,value),value);class AnnouncementsPage extends react.Component{constructor(props){super(props),announcements_page_publicField(this,"deleteSelectedMessage",()=>{const ndx=this.state.editItem,announcement=this.props.namespace.announcements[ndx];this.props.deleteAnnouncement(announcement.createdAt,ndx),this.clear(),this.closeDeleteModal()}),announcements_page_publicField(this,"createMessage",()=>{const now=new Date().getTime(),message={title:this.state.title,body:this.state.body,author:this.props.user.name,email:this.props.user.email,picture:this.props.user.picture};if(this.state.editItem===null)message.createdAt=now,this.props.addAnnouncement(message);else{const announcement=this.props.namespace.announcements[this.state.editItem];message.createdAt=announcement.createdAt,this.props.editAnnouncement(message)}this.clear()}),announcements_page_publicField(this,"handleInputChange",event=>{const target=event.target,name=target.name;let value=target.value;this.setState({[name]:value})}),announcements_page_publicField(this,"clear",()=>{this.setState({title:"",body:"",mode:"new-announcement",editItem:null})}),announcements_page_publicField(this,"closeDeleteModal",()=>{this.setState({editItem:null,showDeleteModal:!1})}),this.state={title:"",body:"",mode:"new-announcement",editItem:null,showDeleteModal:!1}}renderModals(){return null}editMessage(ndx){const announcement=this.props.namespace.announcements[ndx];this.setState({mode:"edit-announcement",editItem:ndx,title:announcement.title,body:announcement.body})}renderMessages(){const{t}=this.props;return react.createElement("div",null,this.props.namespace.announcements.map((value,index)=>{const date=new Date(value.createdAt),dateString=date.toLocaleDateString()+"  -  "+date.toLocaleTimeString(navigator.language,{hour:"2-digit",minute:"2-digit"});return react.createElement("div",{key:index},react.createElement("div",{className:"message-container"},react.createElement("div",{className:"message-data"},react.createElement("div",{className:"message-profile-pic"},react.createElement("img",{src:value.picture,alt:"User Profile Pic"})),react.createElement("div",{className:"message-author-line"},react.createElement("span",{className:"message-author"},value.author),"\xA0",t("common:wrote-on",{date:dateString}))),react.createElement("div",{className:"message-title"},value.title),react.createElement("div",{className:"message-body"},value.body)),react.createElement("div",{className:"message-manip"},react.createElement("button",{onClick:()=>{this.setState({editItem:index,showDeleteModal:!0})},className:"message-delete"},t("common:delete")),react.createElement("button",{onClick:()=>{this.editMessage(index)},className:"message-edit"},t("common:edit"))))}))}render(){const{t}=this.props,isDisabled=this.state.title.length<3||this.state.body.length<3,isEmpty=this.state.title.length===0&&this.state.body.length===0;return react.createElement("div",{className:"namespace-data-page"},react.createElement("div",{className:"messages"},this.renderMessages()),react.createElement("div",{className:"new_message"},react.createElement(Card_default(),null,react.createElement(Card_default().Header,null,react.createElement(Card_default().Title,{as:"h3"},t(this.state.mode))),react.createElement(Card_default().Body,null,react.createElement(Form_default(),{style:{padding:"20px"}},react.createElement(OverlayTrigger_default(),{placement:"bottom",overlay:react.createElement(Tooltip_default(),{id:"titleTooltip"},t("announcement-title"))},react.createElement(FormGroup_default(),{controlId:"form-title"},react.createElement(FormLabel_default(),null,t("common:title")),react.createElement(FormControl_default(),{name:"title",type:"text",value:this.state.title,onChange:this.handleInputChange}))),react.createElement(FormGroup_default(),{controlId:"form-text"},react.createElement(FormLabel_default(),null,t("announcement-text")),react.createElement(FormControl_default(),{name:"body",type:"text",as:"textarea",rows:"10",value:this.state.body,onChange:this.handleInputChange}))),react.createElement(ButtonGroup_default(),null,react.createElement(Button_default(),{type:"submit",disabled:isDisabled,onClick:this.createMessage},this.state.mode==="new-announcement"?t("common:create"):t("common:update")),react.createElement(Button_default(),{onClick:this.clear,disabled:isEmpty,variant:"danger"},t("common:clear")))))),react.createElement(confirm_modal.Z,{show:this.state.showDeleteModal,close:this.closeDeleteModal,message:t("delete-announcement"),title:`${t("common:delete")}?`,onConfirm:this.deleteSelectedMessage}))}}AnnouncementsPage.propTypes={addAnnouncement:prop_types_default().func.isRequired,deleteAnnouncement:prop_types_default().func.isRequired,editAnnouncement:prop_types_default().func.isRequired,namespace:prop_types_default().object.isRequired,user:prop_types_default().object.isRequired},AnnouncementsPage.defaultProps={};var announcements_page=(0,commonjs.Zh)(["namespace_data","common"])(AnnouncementsPage),js=__webpack_require__(9322),js_default=__webpack_require__.n(js),DropdownButton=__webpack_require__(38313),DropdownButton_default=__webpack_require__.n(DropdownButton),Dropdown=__webpack_require__(80068),Dropdown_default=__webpack_require__.n(Dropdown),round_lib=__webpack_require__(55809),round_lib_default=__webpack_require__.n(round_lib),min_lib=__webpack_require__(27813),min_lib_default=__webpack_require__.n(min_lib),is_array_lib=__webpack_require__(76266),is_array_lib_default=__webpack_require__.n(is_array_lib),is_undefined_or_null_lib=__webpack_require__(88401),is_undefined_or_null_lib_default=__webpack_require__.n(is_undefined_or_null_lib),ProgressBar=__webpack_require__(82082),ProgressBar_default=__webpack_require__.n(ProgressBar),clamp_lib=__webpack_require__(40311),clamp_lib_default=__webpack_require__.n(clamp_lib),editable_progress_defProp=Object.defineProperty,editable_progress_defNormalProp=(obj,key,value)=>key in obj?editable_progress_defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value}):obj[key]=value,editable_progress_publicField=(obj,key,value)=>(editable_progress_defNormalProp(obj,typeof key!="symbol"?key+"":key,value),value);class EditableProgress extends react.Component{constructor(props){super(props),editable_progress_publicField(this,"toggleEditing",()=>{this.setState({isEditing:!this.state.isEditing,newProgress:this.props.progress})}),editable_progress_publicField(this,"handleChange",event=>{this.setState({newProgress:clamp_lib_default()(event.target.value,0,100),hasChanged:!0})}),editable_progress_publicField(this,"handleSubmit",()=>{this.setState({isEditing:!1,hasChanged:!1}),this.props.onSubmit(this.state.newProgress)}),this.state={isEditing:!1,hasChanged:!1,newProgress:props.progress,originalProgress:props.progress}}static getDerivedStateFromProps(nextProps,prevState){return nextProps.progress!==prevState.originalProgress?{newProgress:nextProps.progress,originalProgress:nextProps.progress}:null}render(){return this.state.isEditing?react.createElement(react.Fragment,null,react.createElement("input",{type:"number",value:this.state.newProgress,min:0,max:100,onChange:this.handleChange,className:"editable-progress-input"}),react.createElement("i",{role:"button",tabIndex:0,onClick:this.toggleEditing,onKeyPress:this.toggleEditing,className:"fas fa-window-close editable-progress-close"}),react.createElement("span",{className:"editable-progress-submit",style:{display:this.state.hasChanged?"inline":"none"}},react.createElement("i",{role:"button",tabIndex:0,onClick:this.handleSubmit,onKeyPress:this.handleSubmit,className:"fas fa-check-square"}))):react.createElement(ProgressBar_default(),{"aria-label":"new-progress",style:{fontSize:"10px",height:"12px"},now:this.state.newProgress,label:`${this.state.newProgress}%`,onClick:this.toggleEditing})}}var editable_progress=EditableProgress,format_time=__webpack_require__(27505),progress_page_defProp=Object.defineProperty,progress_page_defNormalProp=(obj,key,value)=>key in obj?progress_page_defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value}):obj[key]=value,progress_page_publicField=(obj,key,value)=>(progress_page_defNormalProp(obj,typeof key!="symbol"?key+"":key,value),value);const progress_page_debug=browser_default()("isle:progress-page");function filterNumbersFactory(lessons,idx){return(filter,row)=>{const lessonData=row[filter.id][lessons[idx]._id];if(is_undefined_or_null_lib_default()(lessonData))return filter.value.min===0;const progress=min_lib_default()(round_lib_default()(lessonData.progress*100),100);return progress>=filter.value.min&&progress<=filter.value.max}}function sortFactory(lessons,idx){return(a,b)=>(a=a[lessons[idx]._id],b=b[lessons[idx]._id],!a&&!b?0:a&&!b?1:!a&&b?-1:a.progress>b.progress?1:a.progress<b.progress?-1:0)}function filterMethodCategories(filter,row){if(filter.value==="all")return!0;const id=filter.pivotId||filter.id;return row[id]===void 0?!0:is_array_lib_default()(filter.value)?contains_lib_default()(filter.value,String(row[id])):String(row[id])===filter.value}class ProgressPage extends react.Component{constructor(props){super(props),progress_page_publicField(this,"accessorFactory",(lessons,idx)=>{const{t}=this.props;return d=>{let data=d.original.lessonData;const lessonID=lessons[idx]._id;if(data=data[lessonID],data){const progress=min_lib_default()(round_lib_default()(data.progress*100),100);return react.createElement("span",{style:{fontSize:"12px",fontWeight:800}},react.createElement(OverlayTrigger_default(),{placement:"bottom",overlay:react.createElement(Tooltip_default(),{id:"durationTooltip"},t("hours-minutes-seconds"))},react.createElement("span",null,t("duration"),": ",(0,format_time.Z)(data.spentTime))),react.createElement(OverlayTrigger_default(),{placement:"bottom",overlay:react.createElement(Tooltip_default(),{id:"startTooltip"},t("first-accessed"))},react.createElement("span",null," | ",new Date(data.createdAt).toLocaleString())),react.createElement(OverlayTrigger_default(),{placement:"bottom",overlay:react.createElement(Tooltip_default(),{id:"startTooltip"},t("last-accessed"))},react.createElement("span",null," - ",new Date(data.updatedAt).toLocaleString())),react.createElement("br",null),react.createElement(editable_progress,{progress,email:d.original.email,lessonID,onSubmit:newProgress=>{this.props.adjustProgress({email:d.original.email,lessonID,namespaceID:this.props.namespace._id,cohort:d.original.cohort,progress:newProgress})}}))}return react.createElement("span",null)}}),progress_page_publicField(this,"saveJSON",()=>{const data=this.assembleData(),blob=new Blob([JSON.stringify(data)],{type:"application/json"}),name=`completion_${this.props.namespace.title}.json`;(0,file_saver.Z)(blob,name)}),progress_page_publicField(this,"saveCSV",()=>{const data=this.assembleData();lib_browser_default()(data,{header:!0},(err,output)=>{if(err)return this.props.addNotification({title:"Error encountered",message:"Encountered an error while creating CSV: "+err.message,level:"error",position:"tl"});const blob=new Blob([output],{type:"text/plain"}),name=`completion_${this.props.namespace.title}.csv`;(0,file_saver.Z)(blob,name)})}),progress_page_publicField(this,"toggleExplorer",()=>{this.setState({showExplorer:!this.state.showExplorer})}),this.columns=this.createColumns(props.lessons,props.cohorts),this.state={displayedMembers:[],lessonSortDirection:"ascending",lessonOrder:"createdAt",showExplorer:!1}}componentDidMount(){this.createDisplayedMembers()}componentDidUpdate(prevProps){(this.props.cohorts!==prevProps.cohorts||this.props.lessons!==prevProps.lessons)&&(this.createDisplayedMembers(),this.columns=this.createColumns(this.props.lessons,this.props.cohorts))}createDisplayedMembers(){let members=[];for(let i=0;i<this.props.cohorts.length;i++){const cohortMembers=this.props.cohorts[i].members;for(let j=0;j<cohortMembers.length;j++)cohortMembers[j].cohort=this.props.cohorts[i].title,cohortMembers[j].lessonData||(cohortMembers[j].lessonData={});members=members.concat(this.props.cohorts[i].members)}this.setState({displayedMembers:members})}createColumns(lessons,cohorts){const{t}=this.props,COLUMNS=[{Header:"Pic",accessor:"picture",Cell:row=>react.createElement("img",{className:"table-pic",src:`${server.ZP}/thumbnail/${row.original.picture}`,alt:"Profile Pic"}),maxWidth:46,minWidth:46,filterable:!1,resizable:!1,sortable:!1,style:{color:"darkslategrey"}},(0,create_text_column.Z)({Header:t("common:first-name"),id:"first_name",accessor:"firstName",maxWidth:75,filterMethod:(filter,row)=>contains_lib_default()(lowercase_lib_default()(row[filter.id]),lowercase_lib_default()(filter.value))}),(0,create_text_column.Z)({Header:t("common:last-name"),id:"last_name",accessor:"lastName",maxWidth:75,filterMethod:(filter,row)=>contains_lib_default()(lowercase_lib_default()(row[filter.id]),lowercase_lib_default()(filter.value))}),(0,create_text_column.Z)({Header:t("common:email"),accessor:"email",maxWidth:200,filterMethod:(filter,row)=>contains_lib_default()(lowercase_lib_default()(row[filter.id]),lowercase_lib_default()(filter.value))}),{Header:t("common:cohort"),accessor:"cohort",style:{marginTop:"8px",color:"darkslategrey"},filterMethod:filterMethodCategories,Filter:({filter,onChange})=>{const handleChange=event=>{const newValue=event.target.value;onChange(newValue)};let value;return filter?is_array_lib_default()(filter.value)?value=filter.value.join(", "):value=filter.value:value="all",react.createElement("select",{onBlur:handleChange,onChange:handleChange,style:{width:"100%",backgroundColor:"ghostwhite"},value},react.createElement("option",{value:"all"},"Show All"),cohorts.map((v,key)=>react.createElement("option",{key,value:`${v.title}`},v.title)))}}];for(let i=0;i<lessons.length;i++){const id="lesson_"+i;COLUMNS.push({id,Header:react.createElement("span",{id},lessons[i].title),_lesson:lessons[i],Cell:this.accessorFactory(lessons,i),accessor:"lessonData",sortMethod:sortFactory(lessons,i),filterMethod:filterNumbersFactory(lessons,i),Filter:({filter,onChange})=>{const defaultVal={max:100,min:0};return react.createElement("div",{style:{paddingLeft:"4px",paddingRight:"4px",paddingTop:"8px"}},react.createElement(js_default(),{ariaLabelledby:id,ariaControls:"dashboard-table",allowSameValues:!0,maxValue:100,minValue:0,value:filter?filter.value:defaultVal,onChange:newValue=>{onChange(newValue)}}))}})}return COLUMNS}assembleData(){const displayedMembers=this.dashboardTable.getResolvedState().sortedData,len=displayedMembers.length,out=new Array(len),lessons=this.props.lessons;for(let i=0;i<len;i++){const member=displayedMembers[i]._original;out[i]={name:member.name,firstName:member.firstName,lastName:member.lastName,email:member.email,cohort:member.cohort};const availableCustomFields=this.props.user.availableCustomFields;for(let j=0;j<availableCustomFields.length;j++){const fieldName=availableCustomFields[j].name;member.customFields?out[i][fieldName]=member.customFields[fieldName]:out[i][fieldName]=null}for(let j=0;j<lessons.length;j++){const lessonName=lessons[j]._id;let data=member.lessonData;data&&data[lessonName]?(data=data[lessonName],out[i][lessons[j].title+"_question_progress"]=min_lib_default()(round_lib_default()(data.progress*100),100),out[i][lessons[j].title+"_time"]=round_lib_default()(data.spentTime/(1e3*60)),out[i][lessons[j].title+"_first_accessed"]=new Date(data.createdAt).toLocaleString(),out[i][lessons[j].title+"_last_accessed"]=new Date(data.updatedAt).toLocaleString()):(out[i][lessons[j].title+"_question_progress"]=0,out[i][lessons[j].title+"_time"]=0,out[i][lessons[j].title+"_first_accessed"]="",out[i][lessons[j].title+"_last_accessed"]="")}}return out}reorderColumns(lessonOrder,lessonSortDirection){return progress_page_debug("Sort columns by "+lessonOrder+" in "+lessonSortDirection+" order"),lessonSortDirection==="ascending"?this.columns.slice().sort((a,b)=>!a._lesson||!b._lesson?1:lessonOrder==="title"?a._lesson.title.localeCompare(b._lesson.title):a._lesson[lessonOrder]>b._lesson[lessonOrder]?1:-1):this.columns.slice().sort((a,b)=>!a._lesson||!b._lesson?1:lessonOrder==="title"?b._lesson.title.localeCompare(a._lesson.title):a._lesson[lessonOrder]<b._lesson[lessonOrder]?1:-1)}renderSortButton(){const{t}=this.props;let title;switch(this.state.lessonOrder){case"title":title=t("common:sort-alphabetically");break;case"createdAt":title=t("common:sort-create-date");break;case"updatedAt":title=t("common:sort-update-date");break}return react.createElement(ButtonGroup_default(),{className:"sort-button-group"},react.createElement(DropdownButton_default(),{size:"sm",variant:"secondary",onSelect:newValue=>{this.columns=this.reorderColumns(newValue,this.state.lessonSortDirection),this.setState({lessonOrder:newValue})},id:"dropdown",title:react.createElement("small",null,title)},react.createElement(Dropdown_default().Item,{eventKey:"title"},react.createElement("small",null,t("common:sort-alphabetically"))),react.createElement(Dropdown_default().Item,{eventKey:"createdAt"},react.createElement("small",null,t("common:sort-create-date"))),react.createElement(Dropdown_default().Item,{eventKey:"updatedAt"},react.createElement("small",null,t("common:sort-update-date")))),react.createElement(Button_default(),{size:"sm",variant:"secondary",style:{marginLeft:2},onClick:()=>{this.state.lessonSortDirection==="ascending"?(this.columns=this.reorderColumns(this.state.lessonOrder,"descending"),this.setState({lessonSortDirection:"descending"})):(this.columns=this.reorderColumns(this.state.lessonOrder,"ascending"),this.setState({lessonSortDirection:"ascending"}))},"aria-label":this.state.lessonSortDirection==="ascending"?t("common:sort-descending"):t("common:sort-ascending")},this.state.lessonSortDirection==="ascending"?react.createElement("i",{className:"fas fa-arrow-right"}):react.createElement("i",{className:"fas fa-arrow-left"})))}render(){const{t}=this.props;if(this.state.showExplorer){let data=this.assembleData();data=(0,obs_to_var.Z)(data);const quantitative=[],categorical=["name","email","cohort"];for(let i=0;i<this.props.lessons.length;i++){const title=this.props.lessons[i].title;quantitative.push(`${title}_question_progress`),quantitative.push(`${title}_time`),categorical.push(`${title}_first_accessed`),categorical.push(`${title}_last_accessed`)}const availableCustomFields=this.props.user.availableCustomFields;for(let i=0;i<availableCustomFields.length;i++)categorical.push(availableCustomFields[i].name);return react.createElement(data_explorer.Z,{title:t("explorer-progress-title"),data,categorical,quantitative,close:this.toggleExplorer})}return react.createElement(react.Fragment,null,react.createElement("div",{className:"namespace-data-buttons"},this.renderSortButton(),react.createElement(ButtonGroup_default(),{className:"progress-button-group"},react.createElement(OverlayTrigger_default(),{placement:"bottom",overlay:react.createElement(Tooltip_default(),{id:"csvTooltip"},t("save-as-csv"))},react.createElement(Button_default(),{size:"sm",variant:"secondary",onClick:this.saveCSV},react.createElement("i",{className:"fas fa-download"})," CSV")),react.createElement(OverlayTrigger_default(),{placement:"bottom",overlay:react.createElement(Tooltip_default(),{id:"jsonTooltip"},t("save-as-json"))},react.createElement(Button_default(),{size:"sm",variant:"secondary",onClick:this.saveJSON},react.createElement("i",{className:"fas fa-download"})," JSON")))),react.createElement("div",{className:"namespace-data-page"},react.createElement(dashboard_table.Z,{className:"progress-table",data:this.state.displayedMembers,columns:this.columns,t,ref:r=>{this.dashboardTable=r},onButtonClick:this.toggleExplorer})))}}ProgressPage.propTypes={addNotification:prop_types_default().func.isRequired,adjustProgress:prop_types_default().func.isRequired,cohorts:prop_types_default().array.isRequired,lessons:prop_types_default().array.isRequired,namespace:prop_types_default().object.isRequired,user:prop_types_default().object.isRequired},ProgressPage.defaultProps={};var progress_page=(0,commonjs.Zh)(["namespace_data","common"])(ProgressPage),react_select_cjs_prod=__webpack_require__(87583),cohorts_page_defProp=Object.defineProperty,cohorts_page_defNormalProp=(obj,key,value)=>key in obj?cohorts_page_defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value}):obj[key]=value,cohorts_page_publicField=(obj,key,value)=>(cohorts_page_defNormalProp(obj,typeof key!="symbol"?key+"":key,value),value);class CohortsPage extends react.Component{constructor(props){super(props),cohorts_page_publicField(this,"handleCohortChange",cohorts=>{let members=[];if(cohorts)for(let i=0;i<cohorts.length;i++)members=members.concat(cohorts[i].data.members);this.setState({selectedCohorts:cohorts,displayedMembers:members})}),cohorts_page_publicField(this,"showUser",member=>{this.setState({actualMember:member})}),cohorts_page_publicField(this,"closeActualMember",()=>{this.setState({actualMember:null})});const cohortOptions=props.cohorts.map(cohort=>({label:cohort.title,value:cohort.title,data:cohort}));let displayedMembers=[];for(let i=0;i<props.cohorts.length;i++)displayedMembers=displayedMembers.concat(props.cohorts[i].members);this.state={cohortOptions,selectedCohorts:cohortOptions,displayedMembers,actualMember:null}}componentDidUpdate(prevProps){if(this.props.cohorts!==prevProps.cohorts){const cohortOptions=this.props.cohorts.map(cohort=>({label:cohort.title,value:cohort.title,data:cohort}));let displayedMembers=[];for(let i=0;i<this.props.cohorts.length;i++)displayedMembers=displayedMembers.concat(this.props.cohorts[i].members);this.setState({cohortOptions,selectedCohorts:cohortOptions,displayedMembers,actualMember:null})}}renderMember(member,key){let phase=.3+key*.05,ani="scale-up "+phase+"s";return react.createElement(react.Fragment,{key},react.createElement("div",{className:"cohort-member",role:"button",onClick:()=>this.showUser(member),onKeyPress:()=>this.showUser(member),style:{animation:ani},tabIndex:0},react.createElement("div",{className:"cohort-member-name"},member.name),react.createElement("img",{src:server.ZP+"/thumbnail/"+member.picture,alt:"Member Profile Pic"}),react.createElement("div",{className:"cohort-member-email"},react.createElement("a",{href:"mailto:"+member.email},member.email))))}renderCohort(){const members=this.state.displayedMembers,list=[];for(let i=0;i<members.length;i++)list.push(this.renderMember(members[i],i));return list}renderMemberLessons(member){const lessons=this.props.lessons,list=[];let progress=0,spentTime=0,totalTime=0;for(let i=0;i<lessons.length;i++){let id=lessons[i]._id;if(member.lessonData&&member.lessonData[id]){const data=member.lessonData[id];progress=min_lib_default()(round_lib_default()(data.progress*100),100),spentTime=(0,format_time.Z)(data.spentTime),totalTime+=data.spentTime}else progress=0,spentTime=(0,format_time.Z)(0);list.push(react.createElement("div",{key:i},react.createElement("div",{className:"cohort-actual-member-lesson-title"},lessons[i].title),react.createElement(ProgressBar_default(),{"aria-label":"lesson-progress",className:"cohort-actual-member-lesson-progress",style:{float:"left",fontSize:"10px",height:"12px"},now:progress,label:`${progress}%`}),react.createElement("span",{className:"cohort-actual-member-lesson-time"},spentTime)))}return totalTime=(0,format_time.Z)(totalTime),react.createElement(react.Fragment,null,react.createElement("hr",null),react.createElement("div",{className:"cohort-actual-member-lesson-header"},"COURSE INFO"),react.createElement("div",{className:"cohort-actual-member-lesson-total"},"COURSE TOTAL TIME: ",totalTime),react.createElement("div",{className:"lessons-area"},list))}renderMemberBadges(member){const badges=this.props.badges,time=(0,format_time.Z)(member.spentTime),list=[];for(let i=0;i<badges.length;i++)contains_lib_default()(member.badges,badges[i].name)&&list.push(react.createElement(react.Fragment,null,react.createElement(OverlayTrigger_default(),{placement:"bottom",overlay:react.createElement(Tooltip_default(),{id:"isleTime"},badges[i].description)},react.createElement("div",{className:"cohort-user-badge"},react.createElement("img",{src:server.ZP+"/badges/"+badges[i].picture,alt:"User Badge"})))));const isleTime="the time the user spent with ISLE",scoreComment="user score";return react.createElement(react.Fragment,null,react.createElement("div",null,"General User Info"),react.createElement(OverlayTrigger_default(),{placement:"bottom",overlay:react.createElement(Tooltip_default(),{id:"isleTime"},isleTime)},react.createElement("span",{className:"user-info-time"},"ISLE TIME: ",time)),react.createElement(OverlayTrigger_default(),{placement:"bottom",overlay:react.createElement(Tooltip_default(),{id:"isleTime"},scoreComment)},react.createElement("span",{className:"user-info-score"},"SCORE: ",member.score)),react.createElement("div",null),react.createElement("div",{className:"user-info-badges"},react.createElement("div",{className:"user-info-separator"},"Badges"),list))}renderActualMember(){const member=this.state.actualMember;let date=null;return member.createdAt&&(date=new Date(member.createdAt).toLocaleDateString()),react.createElement("div",{className:"cohort-actual-member"},react.createElement("button",{onClick:this.closeActualMember,className:"cohort-actual-member-exit empty-button"},"\u2715"),react.createElement("img",{className:"cohort-actual-member-portrait",src:server.ZP+"/avatar/"+member.picture,alt:"User Profile Pic"}),react.createElement("div",{className:"cohort-actual-member-portrait-shadow"}),date?react.createElement("div",{className:"cohort-actual-member-registered"},"registered since ",date):null,react.createElement("div",{className:"cohort-actual-member-name"},react.createElement("h3",null,member.name),react.createElement("div",null,member.email)),react.createElement("div",{className:"cohort-actual-member-info"},this.renderMemberLessons(member)),react.createElement("div",{className:"cohort-actual-member-badges"},this.renderMemberBadges(member)))}render(){return react.createElement("div",{className:"namespace-data-page"},react.createElement("div",{style:{width:"100%",height:"40px"}},react.createElement(react_select_cjs_prod.ZP,{value:this.state.selectedCohorts,isMulti:!0,name:"cohorts","aria-label":"Select cohorts",placeholder:"Select cohorts to display",options:this.state.cohortOptions,onChange:this.handleCohortChange})),react.createElement("div",{className:"cohort-page"},this.renderCohort()),this.state.actualMember?this.renderActualMember():null)}}CohortsPage.propTypes={badges:prop_types_default().array.isRequired,cohorts:prop_types_default().array.isRequired,lessons:prop_types_default().array.isRequired},CohortsPage.defaultProps={};var cohorts_page=CohortsPage,has_own_property_lib=__webpack_require__(10813),has_own_property_lib_default=__webpack_require__.n(has_own_property_lib),grades_page_defProp=Object.defineProperty,grades_page_defNormalProp=(obj,key,value)=>key in obj?grades_page_defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value}):obj[key]=value,grades_page_publicField=(obj,key,value)=>(grades_page_defNormalProp(obj,typeof key!="symbol"?key+"":key,value),value);const grades_page_debug=browser_default()("isle:progress-page");function grades_page_filterNumbersFactory(lessons,idx){return(filter,row)=>{const grades=row[filter.id][lessons[idx]._id];if(is_undefined_or_null_lib_default()(grades))return filter.value.min===0;const points=grades._sumPoints;return points>=filter.value.min&&points<=filter.value.max}}function grades_page_filterMethodCategories(filter,row){if(filter.value==="all")return!0;const id=filter.pivotId||filter.id;return row[id]===void 0?!0:is_array_lib_default()(filter.value)?contains_lib_default()(filter.value,String(row[id])):String(row[id])===filter.value}function grades_page_sortFactory(lessons,idx){return(a,b)=>(a=a[lessons[idx]._id],b=b[lessons[idx]._id],!a&&!b?0:a&&!b?1:!a&&b?-1:a._sumPoints>b._sumPoints?1:a._sumPoints<b._sumPoints?-1:0)}class GradesPage extends react.Component{constructor(props){super(props),grades_page_publicField(this,"accessorFactory",(lessons,idx)=>d=>{let data=d.original.lessonGrades||{};const lesson=lessons[idx],lessonID=lesson._id;let maxPoints="";if(lesson.metadata&&lesson.metadata.grades&&(maxPoints+=` / ${lessons[idx].metadata.grades.maxPoints}`),data=data[lessonID],data){let tally=[];for(let key in data)has_own_property_lib_default()(data,key)&&key!=="_sumPoints"&&tally.push(react.createElement("p",{style:{margin:0},key},key,": ",react.createElement("b",{style:{float:"right",marginLeft:12}},data[key])));return react.createElement(OverlayTrigger_default(),{placement:"top",overlay:react.createElement(Card_default(),{className:"tickets-description-overlay",body:!0,id:"description-tooltip"},tally)},react.createElement("p",null,data._sumPoints,maxPoints))}return react.createElement("span",null)}),grades_page_publicField(this,"saveJSON",()=>{const data=this.assembleData(),blob=new Blob([JSON.stringify(data)],{type:"application/json"}),name=`grades_${this.props.namespace.title}.json`;(0,file_saver.Z)(blob,name)}),grades_page_publicField(this,"saveCSV",()=>{const data=this.assembleData();lib_browser_default()(data,{header:!0},(err,output)=>{if(err)return this.props.addNotification({title:"Error encountered",message:"Encountered an error while creating CSV: "+err.message,level:"error",position:"tl"});const blob=new Blob([output],{type:"text/plain"}),name=`grades_${this.props.namespace.title}.csv`;(0,file_saver.Z)(blob,name)})}),grades_page_publicField(this,"toggleExplorer",()=>{this.setState({showExplorer:!this.state.showExplorer})}),this.columns=this.createColumns(props.lessons,props.cohorts),this.state={displayedMembers:[],lessonSortDirection:"ascending",lessonOrder:"createdAt",showExplorer:!1}}componentDidMount(){this.createDisplayedMembers()}componentDidUpdate(prevProps){(this.props.cohorts!==prevProps.cohorts||this.props.lessons!==prevProps.lessons)&&(this.createDisplayedMembers(),this.columns=this.createColumns(this.props.lessons,this.props.cohorts))}createDisplayedMembers(){let members=[];for(let i=0;i<this.props.cohorts.length;i++){const cohortMembers=this.props.cohorts[i].members;for(let j=0;j<cohortMembers.length;j++)cohortMembers[j].cohort=this.props.cohorts[i].title,cohortMembers[j].lessonGrades||(cohortMembers[j].lessonGrades={});members=members.concat(this.props.cohorts[i].members)}this.setState({displayedMembers:members})}createColumns(lessons,cohorts){const{t}=this.props,COLUMNS=[{Header:"Pic",accessor:"picture",Cell:row=>react.createElement("img",{className:"table-pic",src:`${server.ZP}/thumbnail/${row.original.picture}`,alt:"Profile Pic"}),maxWidth:46,minWidth:46,filterable:!1,resizable:!1,sortable:!1,style:{color:"darkslategrey"}},(0,create_text_column.Z)({Header:t("common:first-name"),id:"first_name",accessor:"firstName",maxWidth:75,filterMethod:(filter,row)=>contains_lib_default()(lowercase_lib_default()(row[filter.id]),lowercase_lib_default()(filter.value))}),(0,create_text_column.Z)({Header:t("common:last-name"),id:"last_name",accessor:"lastName",maxWidth:75,filterMethod:(filter,row)=>contains_lib_default()(lowercase_lib_default()(row[filter.id]),lowercase_lib_default()(filter.value))}),(0,create_text_column.Z)({Header:t("common:email"),accessor:"email",maxWidth:200,filterMethod:(filter,row)=>contains_lib_default()(lowercase_lib_default()(row[filter.id]),lowercase_lib_default()(filter.value))}),{Header:t("common:cohort"),accessor:"cohort",style:{marginTop:"8px",color:"darkslategrey"},filterMethod:grades_page_filterMethodCategories,Filter:({filter,onChange})=>{const handleChange=event=>{const newValue=event.target.value;onChange(newValue)};let value;return filter?is_array_lib_default()(filter.value)?value=filter.value.join(", "):value=filter.value:value="all",react.createElement("select",{onBlur:handleChange,onChange:handleChange,style:{width:"100%",backgroundColor:"ghostwhite"},value},react.createElement("option",{value:"all"},"Show All"),cohorts.map((v,key)=>react.createElement("option",{key,value:`${v.title}`},v.title)))}}];for(let i=0;i<lessons.length;i++){const id="lesson_"+i;COLUMNS.push({id,Header:react.createElement("span",{id},lessons[i].title),_lesson:lessons[i],Cell:this.accessorFactory(lessons,i),sortMethod:grades_page_sortFactory(lessons,i),filterMethod:grades_page_filterNumbersFactory(lessons,i),Filter:({filter,onChange})=>{let maxPoints=0;lessons[i].metadata&&lessons[i].metadata.grades&&(maxPoints=lessons[i].metadata.grades.maxPoints);const defaultVal={max:maxPoints,min:0};return react.createElement("div",{style:{paddingLeft:"4px",paddingRight:"4px",paddingTop:"8px"}},react.createElement(js_default(),{ariaLabelledby:id,ariaControls:"dashboard-table",allowSameValues:!0,maxValue:maxPoints,minValue:0,value:filter?filter.value:defaultVal,onChange:newValue=>{onChange(newValue)}}))},accessor:"lessonGrades"})}return COLUMNS}reorderColumns(lessonOrder,lessonSortDirection){return grades_page_debug("Sort columns by "+lessonOrder+" in "+lessonSortDirection+" order"),lessonSortDirection==="ascending"?this.columns.slice().sort((a,b)=>!a._lesson||!b._lesson?1:lessonOrder==="title"?a._lesson.title.localeCompare(b._lesson.title):a._lesson[lessonOrder]>b._lesson[lessonOrder]?1:-1):this.columns.slice().sort((a,b)=>!a._lesson||!b._lesson?1:lessonOrder==="title"?b._lesson.title.localeCompare(a._lesson.title):a._lesson[lessonOrder]<b._lesson[lessonOrder]?1:-1)}assembleData(){const displayedMembers=this.dashboardTable.getResolvedState().sortedData,len=displayedMembers.length,out=new Array(len),lessons=this.props.lessons;for(let i=0;i<len;i++){const member=displayedMembers[i]._original;out[i]={name:member.name,firstName:member.firstName,lastName:member.lastName,email:member.email,cohort:member.cohort};const availableCustomFields=this.props.user.availableCustomFields;for(let j=0;j<availableCustomFields.length;j++){const fieldName=availableCustomFields[j].name;member.customFields?out[i][fieldName]=member.customFields[fieldName]:out[i][fieldName]=null}for(let j=0;j<lessons.length;j++){const lessonName=lessons[j]._id;let data=member.lessonGrades;data&&data[lessonName]?(data=data[lessonName],out[i][lessons[j].title]=data._sumPoints):out[i][lessons[j].title]=""}}return out}renderSortButton(){const{t}=this.props;let title;switch(this.state.lessonOrder){case"title":title=t("common:sort-alphabetically");break;case"createdAt":title=t("common:sort-create-date");break;case"updatedAt":title=t("common:sort-update-date");break}return react.createElement(ButtonGroup_default(),{className:"sort-button-group"},react.createElement(DropdownButton_default(),{size:"sm",variant:"secondary",onSelect:newValue=>{this.columns=this.reorderColumns(newValue,this.state.lessonSortDirection),this.setState({lessonOrder:newValue})},id:"dropdown",title:react.createElement("small",null,title)},react.createElement(Dropdown_default().Item,{eventKey:"title"},react.createElement("small",null,t("common:sort-alphabetically"))),react.createElement(Dropdown_default().Item,{eventKey:"createdAt"},react.createElement("small",null,t("common:sort-create-date"))),react.createElement(Dropdown_default().Item,{eventKey:"updatedAt"},react.createElement("small",null,t("common:sort-update-date")))),react.createElement(Button_default(),{size:"sm",variant:"secondary",style:{marginLeft:2},onClick:()=>{this.state.lessonSortDirection==="ascending"?(this.columns=this.reorderColumns(this.state.lessonOrder,"descending"),this.setState({lessonSortDirection:"descending"})):(this.columns=this.reorderColumns(this.state.lessonOrder,"ascending"),this.setState({lessonSortDirection:"ascending"}))},"aria-label":this.state.lessonSortDirection==="ascending"?t("common:sort-descending"):t("common:sort-ascending")},this.state.lessonSortDirection==="ascending"?react.createElement("i",{className:"fas fa-arrow-right"}):react.createElement("i",{className:"fas fa-arrow-left"})))}render(){const{t}=this.props;if(this.state.showExplorer){let data=this.assembleData();data=(0,obs_to_var.Z)(data);const quantitative=[],categorical=["name","email","cohort"];for(let i=0;i<this.props.lessons.length;i++)quantitative.push(this.props.lessons[i].title);const availableCustomFields=this.props.user.availableCustomFields;for(let i=0;i<availableCustomFields.length;i++)categorical.push(availableCustomFields[i].name);return react.createElement(data_explorer.Z,{title:t("explorer-grades-title"),data,categorical,quantitative,close:this.toggleExplorer})}return react.createElement(react.Fragment,null,react.createElement("div",{className:"namespace-data-buttons"},this.renderSortButton(),react.createElement(ButtonGroup_default(),{className:"progress-button-group"},react.createElement(OverlayTrigger_default(),{placement:"bottom",overlay:react.createElement(Tooltip_default(),{id:"csvTooltip"},t("save-as-csv"))},react.createElement(Button_default(),{size:"sm",variant:"secondary",onClick:this.saveCSV},react.createElement("i",{className:"fas fa-download"})," CSV")),react.createElement(OverlayTrigger_default(),{placement:"bottom",overlay:react.createElement(Tooltip_default(),{id:"jsonTooltip"},t("save-as-json"))},react.createElement(Button_default(),{size:"sm",variant:"secondary",onClick:this.saveJSON},react.createElement("i",{className:"fas fa-download"})," JSON")))),react.createElement("div",{className:"namespace-data-page"},react.createElement(dashboard_table.Z,{className:"grades-table",data:this.state.displayedMembers,columns:this.columns,t,ref:r=>{this.dashboardTable=r},onButtonClick:this.toggleExplorer})))}}GradesPage.propTypes={addNotification:prop_types_default().func.isRequired,cohorts:prop_types_default().array.isRequired,lessons:prop_types_default().array.isRequired,namespace:prop_types_default().object.isRequired,user:prop_types_default().object.isRequired},GradesPage.defaultProps={};var grades_page=(0,commonjs.Zh)(["namespace_data","common"])(GradesPage),ToggleButtonGroup=__webpack_require__(40091),ToggleButtonGroup_default=__webpack_require__.n(ToggleButtonGroup),ToggleButton=__webpack_require__(86059),ToggleButton_default=__webpack_require__.n(ToggleButton),actions_page_defProp=Object.defineProperty,actions_page_defNormalProp=(obj,key,value)=>key in obj?actions_page_defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value}):obj[key]=value,actions_page_publicField=(obj,key,value)=>(actions_page_defNormalProp(obj,typeof key!="symbol"?key+"":key,value),value);const actions_page_debug=browser_default()("isle-dashboard:namespace-data:actions-page");class ActionsPage extends react.Component{constructor(props){super(props),actions_page_publicField(this,"retrieveActions",()=>{this.props.getNamespaceActions({namespaceID:this.props.namespace._id,namespaceTitle:this.props.namespace.title})}),actions_page_publicField(this,"handleRadioChange",val=>{this.setState({anonymized:!this.state.anonymized})}),actions_page_publicField(this,"handleCohortChange",cohorts=>{let members=[];for(let i=0;i<cohorts.length;i++)members=members.concat(cohorts[i].value.members);this.setState({selectedCohorts:cohorts,displayedMembers:members},()=>{actions_page_debug("New number of displayed members: "+this.state.displayedMembers.length)})}),actions_page_publicField(this,"hideLessonActions",()=>{this.setState({lessonActionsPage:!1})}),actions_page_publicField(this,"showLessonActions",lesson=>{this.setState({lessonActionsPage:!0,actualLesson:lesson})});const cohortOptions=props.cohorts.map(cohort=>({label:cohort.title,value:cohort}));let displayedMembers=[];for(let i=0;i<props.cohorts.length;i++)displayedMembers=displayedMembers.concat(props.cohorts[i].members);this.state={cohortOptions,selectedCohorts:cohortOptions,displayedMembers,lessonActionsPage:!1,actualLesson:null,anonymized:!0}}renderCohorts(){return react.createElement(react.Fragment,null,react.createElement("div",{className:"actions-page-cohorts"},react.createElement("div",{style:{width:"400px",height:"40px"}},react.createElement(react_select_cjs_prod.ZP,{value:this.state.selectedCohorts,isMulti:!0,name:"cohorts",options:this.state.cohortOptions,onChange:this.handleCohortChange}))))}renderLessonActionsPage(){return react.createElement("div",{className:"actions-page-lesson-action-page"},react.createElement("div",{className:"lesson-action-page-resize"},"	\u{1F5D6}"),react.createElement("button",{onClick:this.hideLessonActions,className:"lesson-action-page-exit empty-button"},"\u2715"),react.createElement("div",{className:"lesson-action-page-title"},this.state.actualLesson.title),react.createElement("div",{className:"lesson-action-page-filter"},this.renderCohorts()))}renderLessons(){const lessons=this.props.namespace.lessons,list=[];for(let i=0;i<lessons.length;i++)list.push(react.createElement("button",{key:i,onClick:()=>this.showLessonActions(lessons[i]),className:"actions-page-lesson"},react.createElement("div",{className:"actions-page-lesson-title"},lessons[i].title)));return react.createElement("div",{className:"actions-page"},react.createElement("div",{className:"actions-page-export"},this.renderExportSection()),react.createElement("div",{className:"actions-page-lessons"},list))}renderExportSection(){return react.createElement(react.Fragment,null,react.createElement("div",{className:"actions-page-export-title"},"Export Actions"),react.createElement(ToggleButtonGroup_default(),{name:"options",onChange:this.handleRadioChange,type:"radio",size:"small",value:this.state.anonymized},react.createElement(ToggleButton_default(),{size:"sm",variant:"light",value:!1,style:{fontSize:"12px",color:this.state.anonymized?"#A9A9A9":"black"}},"Original"),react.createElement(ToggleButton_default(),{size:"sm",variant:"light",value:!0,style:{fontSize:"12px",color:this.state.anonymized?"black":"#A9A9A9"}},"Anonymized")),react.createElement(Button_default(),{onClick:this.retrieveActions},"Save all namespace actions"))}render(){return react.createElement("div",{className:"namespace-data-page"},this.renderLessons(),this.state.lessonActionsPage?this.renderLessonActionsPage():null)}}ActionsPage.propTypes={cohorts:prop_types_default().array.isRequired,getNamespaceActions:prop_types_default().func.isRequired,namespace:prop_types_default().object.isRequired},ActionsPage.defaultProps={};var actions_page=ActionsPage,moment=__webpack_require__(30381),moment_default=__webpack_require__.n(moment),pinf_lib=__webpack_require__(51235),pinf_lib_default=__webpack_require__.n(pinf_lib),omit_lib=__webpack_require__(73961),omit_lib_default=__webpack_require__.n(omit_lib),Popover=__webpack_require__(44981),Popover_default=__webpack_require__.n(Popover),create_categorical_column=__webpack_require__(84024),create_boolean_column=__webpack_require__(3902),ticket_modal=__webpack_require__(5760),tickets_page_defProp=Object.defineProperty,tickets_page_defNormalProp=(obj,key,value)=>key in obj?tickets_page_defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value}):obj[key]=value,tickets_page_publicField=(obj,key,value)=>(tickets_page_defNormalProp(obj,typeof key!="symbol"?key+"":key,value),value),__async=(__this,__arguments,generator)=>new Promise((resolve,reject)=>{var fulfilled=value=>{try{step(generator.next(value))}catch(e){reject(e)}},rejected=value=>{try{step(generator.throw(value))}catch(e){reject(e)}},step=x=>x.done?resolve(x.value):Promise.resolve(x.value).then(fulfilled,rejected);step((generator=generator.apply(__this,__arguments)).next())});const tickets_page_debug=browser_default()("isle:files-page"),RE_TICKET=/ticket=([^&]*)/;class TicketsPage extends react.Component{constructor(props){super(props),tickets_page_publicField(this,"toggleTicketModal",()=>{this.setState({showTicketModal:!this.state.showTicketModal})}),tickets_page_publicField(this,"createColumns",()=>{const{t}=this.props,tickets=this.props.tickets||[];let minTime=pinf_lib_default(),maxTime=0;for(let i=0;i<tickets.length;i++)tickets[i].createdAt>maxTime&&(maxTime=tickets[i].createdAt),tickets[i].updatedAt>maxTime&&(maxTime=tickets[i].updatedAt),tickets[i].createdAt<minTime&&(minTime=tickets[i].createdAt),tickets[i].updatedAt<minTime&&(minTime=tickets[i].updatedAt);return maxTime=moment_default()(maxTime),minTime=moment_default()(minTime),[{Header:"Pic",accessor:"user.picture",Cell:row=>react.createElement("img",{className:"table-pic",src:`${server.ZP}/thumbnail/${row.value}`,alt:"Profile Pic"}),style:{marginTop:"8px",color:"darkslategrey"},maxWidth:46,minWidth:46,filterable:!1,resizable:!1,sortable:!1},(0,create_text_column.Z)({Header:t("common:name"),accessor:"user.name",style:{marginTop:"8px",color:"darkslategrey"}}),(0,create_text_column.Z)({Header:t("common:email"),accessor:"user.email",style:{marginTop:"8px",color:"darkslategrey"}}),(0,create_text_column.Z)({Header:t("common:title"),accessor:"title",minWidth:200}),{Header:t("common:description"),accessor:"description",Cell:row=>react.createElement(OverlayTrigger_default(),{placement:"top",overlay:react.createElement(Card_default(),{className:"tickets-description-overlay",body:!0,id:"description-tooltip"},row.value)},react.createElement("p",{className:"tickets-description"},row.value)),style:{marginTop:"8px",color:"darkslategrey"},minWidth:300},(0,create_text_column.Z)({Header:t("common:component"),accessor:"component"}),{Header:"Reply",accessor:"_id",Cell:row=>react.createElement(OverlayTrigger_default(),{placement:"left",overlay:react.createElement(Tooltip_default(),{id:"open-ticket-tooltip"},t("common:open-ticket-tooltip"))},react.createElement(Button_default(),{size:"sm",variant:"outline-secondary",onClick:()=>{this.setState({selectedTicket:row.original},this.toggleTicketModal)}},react.createElement("i",{className:"fas fa-reply"}))),resizable:!1,filterable:!1,sortable:!1,width:45},(0,create_categorical_column.Z)({Header:t("common:priority"),accessor:"priority",labels:["Low","Middle","High"],maxWidth:200,Cell:row=>{if(!row.value)return null;let variant,higher,lower;switch(row.value){case"Low":variant="secondary",higher="Middle";break;case"Middle":variant="warning",higher="High",lower="Low";break;case"High":variant="danger",lower="Middle";break}return react.createElement("div",null,react.createElement(Badge_default(),{bg:variant,style:{marginRight:6,fontSize:"1em"}},row.value),react.createElement(Button_default(),{size:"sm",bg:"outline-secondary",onClick:()=>{this.props.updatePriority(row.original._id,higher)},disabled:!higher},react.createElement("i",{className:"fas fa-arrow-up"})),react.createElement(Button_default(),{size:"sm",bg:"outline-secondary",onClick:()=>{this.props.updatePriority(row.original._id,lower)},disabled:!lower},react.createElement("i",{className:"fas fa-arrow-down"})))}}),(0,create_text_column.Z)({Header:t("common:lesson"),accessor:"lesson.title",maxWidth:140,Cell:row=>{if(!row.value)return null;const url=`${server.ZP}/${this.props.namespace.title}/${row.value}`;return react.createElement(OverlayTrigger_default(),{placement:"right",overlay:react.createElement(Tooltip_default(),{id:"open-lesson-tooltip"},t("namespace_data:open-lesson-new-tab"))},react.createElement(Badge_default(),{bg:"light",style:{fontSize:"1em"}},react.createElement("a",{href:url,target:"_blank",rel:"noopener noreferrer"},row.value)))}}),(0,create_boolean_column.Z)({Header:t("common:done"),accessor:"done",trueLabel:t("common:done"),falseLabel:t("common:not-done")}),{Header:t("common:platform"),accessor:"platform",style:{marginTop:"2px",color:"darkslategrey",fontSize:24,textAlign:"center",cursor:"pointer"},Cell:row=>{if(row.value){const popover=react.createElement(Popover_default(),{id:"popover-data",style:{maxWidth:500,maxHeight:"80vh",overflowY:"auto"},arrowProps:{display:"none"}},react.createElement(Popover_default().Header,{as:"h3"},row.row._original.title),react.createElement(Popover_default().Body,{style:{backgroundColor:"lightblue"}},react.createElement("pre",null,JSON.stringify(omit_lib_default()(row.value,["description"]),null,2))));return react.createElement(OverlayTrigger_default(),{trigger:"click",placement:"left",overlay:popover},react.createElement("i",{className:"data-icon fas fa-tablet-alt"}))}return null},maxWidth:75,resizable:!1,filterable:!1,sortable:!1},(0,create_date_column.Z)({Header:t("created-at"),accessor:"createdAt",startDate:minTime,endDate:maxTime,t})]}),tickets_page_publicField(this,"toggleExplorer",()=>{this.setState({showExplorer:!this.state.showExplorer})}),tickets_page_publicField(this,"assembleExplorerData",()=>{let tickets=this.props.tickets,data=[];for(let i=0;i<tickets.length;i++){const ticket2=tickets[i],replacement={};replacement.component=ticket2.component,replacement.title=ticket2.title,replacement.description=ticket2.description,replacement.lesson=ticket2.lesson?ticket2.lesson.title:null,replacement.messages=ticket2.messages.length,replacement.attachments=ticket2.attachments.length,replacement.user=ticket2.user.email,replacement.done=ticket2.done,replacement.priority=ticket2.priority,replacement.browser=`${ticket2.platform.name} ${ticket2.platform.version}`;const os=ticket2.platform.os;replacement.os=`${os.family} ${os.version?os.version:""} ${os.architecture}bit`,replacement.createdAt=ticket2.createdAt,replacement.updatedAt=ticket2.updatedAt,data.push(replacement)}return data=(0,obs_to_var.Z)(data),data}),this.state={showTicketModal:!1,selectedTicket:null,showExplorer:!1},this.columns=this.createColumns()}componentDidMount(){return __async(this,null,function*(){if(tickets_page_debug("Component did mount..."),yield this.props.getCourseTickets(this.props.namespace._id),window.location.search){const match=RE_TICKET.exec(window.location.search);if(match&&match[1]){const tickets=this.props.tickets;for(let i=0;i<tickets.length;i++){const ticket2=tickets[i];if(ticket2._id===match[1]){this.setState({selectedTicket:ticket2,showTicketModal:!0});break}}}}})}render(){const{t}=this.props;return this.state.showExplorer?react.createElement(data_explorer.Z,{title:t("explorer-tickets-title"),data:this.assembleExplorerData(),categorical:["component","lesson","done","createdAt","updatedAt","priority","browser","os"],quantitative:["messages","attachments"],close:this.toggleExplorer}):react.createElement("div",{className:"namespace-data-page"},react.createElement(dashboard_table.Z,{data:this.props.tickets,columns:this.columns,t,onButtonClick:this.toggleExplorer}),this.state.showTicketModal?react.createElement(ticket_modal.Z,{show:this.state.showTicketModal,onHide:this.toggleTicketModal,ticket:this.state.selectedTicket,submitTicketMessage:this.props.submitTicketMessage,openTicket:this.props.openTicket,closeTicket:this.props.closeTicket}):null)}}TicketsPage.propTypes={closeTicket:prop_types_default().func.isRequired,getCourseTickets:prop_types_default().func.isRequired,namespace:prop_types_default().object.isRequired,openTicket:prop_types_default().func.isRequired,submitTicketMessage:prop_types_default().func.isRequired,tickets:prop_types_default().array,updatePriority:prop_types_default().func.isRequired},TicketsPage.defaultProps={tickets:[]};var tickets_page=(0,commonjs.Zh)(["namespace_data","common"])(TicketsPage),axios=__webpack_require__(9669),axios_default=__webpack_require__.n(axios),Row=__webpack_require__(28269),Row_default=__webpack_require__.n(Row),Col=__webpack_require__(1266),left_pad_lib=__webpack_require__(64849),left_pad_lib_default=__webpack_require__.n(left_pad_lib),compute_modal=__webpack_require__(49063),Modal=__webpack_require__(89194),Modal_default=__webpack_require__.n(Modal),index_production=__webpack_require__(24799),standard_table_defProp=Object.defineProperty,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,standard_table_defNormalProp=(obj,key,value)=>key in obj?standard_table_defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value}):obj[key]=value,__spreadValues=(a,b)=>{for(var prop in b||(b={}))__hasOwnProp.call(b,prop)&&standard_table_defNormalProp(a,prop,b[prop]);if(__getOwnPropSymbols)for(var prop of __getOwnPropSymbols(b))__propIsEnum.call(b,prop)&&standard_table_defNormalProp(a,prop,b[prop]);return a},standard_table=({data,columns,tableOptions={}})=>{const table=(0,index_production.useReactTable)(__spreadValues({data,columns,getCoreRowModel:(0,index_production.getCoreRowModel)(),columnResizeMode:"onChange",enableColumnResizing:!0,debugTable:!0,debugHeaders:!0,debugColumns:!0},tableOptions)),tableRef=(0,react.useRef)();return react.createElement("table",{className:"standard-table",ref:tableRef},react.createElement("thead",null,table.getHeaderGroups().map(headerGroup=>react.createElement("tr",{key:headerGroup.id},headerGroup.headers.map((header,idx)=>{var _a;const isLastColumn=idx===headerGroup.headers.length-1,style=isLastColumn?{width:((_a=tableRef==null?void 0:tableRef.current)==null?void 0:_a.offsetWidth)-table.getTotalSize()}:{width:header.getSize()};return react.createElement("th",{key:header.id,colSpan:header.colSpan,style:__spreadValues(__spreadValues({},style),header.column.columnDef.extraStyles),className:header.column.columnDef.className},header.isPlaceholder?null:(0,index_production.flexRender)(header.column.columnDef.header,header.getContext()),header.column.columnDef.enableResizing!==!1&&!isLastColumn&&react.createElement("div",{className:"resizer",onMouseDown:header.getResizeHandler(),onTouchStart:header.getResizeHandler(),tabIndex:-1,role:"button"}))})))),react.createElement("tbody",null,table.getRowModel().rows.map(row=>react.createElement("tr",{key:row.id},row.getVisibleCells().map((cell,idx)=>{var _a;const style=idx===row.getVisibleCells().length-1?{width:((_a=tableRef==null?void 0:tableRef.current)==null?void 0:_a.offsetWidth)-table.getTotalSize()}:{width:cell.column.getSize()};return react.createElement("td",{key:cell.id,style:__spreadValues(__spreadValues({},style),cell.column.columnDef.extraStyles),className:cell.column.columnDef.className},(0,index_production.flexRender)(cell.column.columnDef.cell,cell.getContext()))})))),react.createElement("tfoot",null,table.getFooterGroups().map(footerGroup=>react.createElement("tr",{key:footerGroup.id},footerGroup.headers.map(header=>react.createElement("th",{key:header.id},header.isPlaceholder?null:(0,index_production.flexRender)(header.column.columnDef.footer,header.getContext())))))))};const MISSING_SCORE=-999,relativeDate=unixTime=>{const now=new Date,udate=new Date(unixTime),deltaHours=(now.getTime()-unixTime)/(60*60*1e3);return is_undefined_or_null_lib_default()(unixTime)?"":deltaHours<1?`${Math.round(deltaHours*60)} minutes ago`:deltaHours<24?`${Math.round(deltaHours)} hours ago`:deltaHours<7*24?udate.toLocaleDateString(void 0,{weekday:"long"}):unixTime>new Date(now.getFullYear(),0,0).getTime()?udate.toLocaleString(void 0,{month:"short",day:"numeric",hour:"numeric",minute:"numeric"}):udate.toLocaleString(void 0,{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"})},makeProvenanceZipper=(instance,metric)=>({node:instance,metric,parentPath:[]}),isZipperAtRoot=loc=>loc.parentPath.length===0,zipperUp=loc=>{if(loc.parentPath.length>0)return loc.parentPath[0];throw new Error("Cannot move up from root in provenance zipper")},zipperDown=(loc,id,metric)=>{if((loc.node.provenance?loc.node.provenance.length:0)>0){const instance=id!==void 0?loc.node.provenance.find(x=>x.entity===id):loc.node.provenance[0];if(!instance)throw new Error(`zipperDown: Cannot find entity ${id} in provenance tree.`);return{node:instance,metric,parentPath:[loc,...loc.parentPath]}}throw new Error("Cannot move down without children in provenance zipper")},isLeaf=instance=>is_undefined_or_null_lib_default()(instance.provenance)||instance.provenance.length===0,tagLabel=(prefix,tag)=>tag&&tag!=="_default_tag"?prefix+tag:"",scoreLabel=score=>score===MISSING_SCORE||is_undefined_or_null_lib_default()(score)?"":roundn_lib_default()(score,-1).toFixed(1),makeColumns=(drillDown,level,names,t=s=>s)=>[{accessorFn:row=>names(row.entity),header:t(level)},{accessorFn:row=>scoreLabel(row.score),header:t("score")},{accessorFn:row=>relativeDate(row.time),header:t("time-calculated")},{accessorKey:"tag",header:t("tag")},{header:t("drill-down"),id:"drill-down",cell:cell=>{const inst=cell.row.original;if(isLeaf(inst))return null;const handleDrillDown=()=>drillDown(inst.entity);return react.createElement("span",{tabIndex:"-1",role:"button",onKeyDown:handleDrillDown,onClick:handleDrillDown},react.createElement("i",{className:"fa fa-arrow-down"}))}}],ProvenanceNavigator=({instance,metric,entities,onHide,show=!0})=>{const{t}=(0,commonjs.$G)("common"),[zipper,setZipper]=(0,react.useState)(makeProvenanceZipper(instance,metric)),nameOf=id=>{var _a,_b;return(_b=(_a=entities==null?void 0:entities[id])==null?void 0:_a.title)!=null?_b:id},moveDown=id=>setZipper(z=>{const entity=entities[id];console.log("Entity",entity),console.log("Z:"),console.log(z);let submetric=null;return entity&&(submetric=entity.completions.find(x=>x.name===z.metric.ref)),console.log("Submetric:",submetric),zipperDown(z,id,submetric)}),moveUp=()=>setZipper(zipperUp),columns=makeColumns(moveDown,zipper.node.level,nameOf,t),data=zipper.node.provenance||[],timeMsg=zipper.node.time?` from ${relativeDate(zipper.node.time)}`:"";console.log(zipper.metric);const tOpts={metricName:zipper.metric.name,ruleName:zipper.metric.rule[0],ruleParams:zipper.metric.rule.slice(1).join(", ")};return console.log("tOpts"),console.log(tOpts),react.createElement(Modal_default(),{size:"lg",show,onHide},react.createElement(Modal_default().Header,{closeButton:!0},react.createElement(Modal_default().Title,{as:"h3"},`${t("score-provenance-for")} ${t(zipper.node.level)} ${nameOf(zipper.node.entity)}`)),react.createElement(Modal_default().Body,null,react.createElement("h4",null,`Score ${scoreLabel(zipper.node.score)}${timeMsg}${tagLabel(" with tag ",zipper.node.tag)}`,react.createElement(Button_default(),{onClick:moveUp,style:{float:"right"},disabled:isZipperAtRoot(zipper),variant:"outline-dark",className:"mb-2"},t("move-up"))),zipper.metric&&react.createElement("h5",null,t("calculated-with-metric",tOpts)),react.createElement(standard_table,{columns,data})))};ProvenanceNavigator.propTypes={entities:prop_types_default().object.isRequired,instance:prop_types_default().object.isRequired,metric:prop_types_default().object.isRequired,onHide:prop_types_default().func.isRequired,show:prop_types_default().bool},ProvenanceNavigator.defaultProps={show:!0};var provenance_navigator=ProvenanceNavigator,assessment_scores_page_defProp=Object.defineProperty,assessment_scores_page_defNormalProp=(obj,key,value)=>key in obj?assessment_scores_page_defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value}):obj[key]=value,assessment_scores_page_publicField=(obj,key,value)=>(assessment_scores_page_defNormalProp(obj,typeof key!="symbol"?key+"":key,value),value);function assessment_scores_page_filterMethodCategories(filter,row){if(filter.value==="all")return!0;const id=filter.pivotId||filter.id;return row[id]===void 0?!0:is_array_lib_default()(filter.value)?contains_lib_default()(filter.value,String(row[id])):String(row[id])===filter.value}function extractMetricSet(cohorts,scope,namespace2){const metricSet=new Set,metricLabels={},keyCriterion=scope.value==="course-wide"?`namespace-${namespace2._id}-`:`lesson-${scope.value}-`;for(let i=0;i<cohorts.length;i++)for(let j=0;j<cohorts[i].members.length;j++){const userCompletions=Object.keys(cohorts[i].members[j].completions||{});for(let k=0;k<userCompletions.length;++k){const key=userCompletions[k];key.startsWith(keyCriterion)&&(metricSet.add(key),metricLabels[key]=cohorts[i].members[j].completions[key].metricName)}}const uniqueMetrics=[];return metricSet.forEach(key=>{uniqueMetrics.push({value:key,label:metricLabels[key]})}),uniqueMetrics.sort((a,b)=>a.label.localeCompare(b.label)),uniqueMetrics}function metricObject(scope,name,namespace2,lessons){if(scope.value==="course-wide")return namespace2.completions.find(c=>c.name===name);const lesson=lessons.find(x=>x._id===scope.value);return lesson?lesson.completions.find(c=>c.name===name):null}class AssessmentScoresPage extends react.Component{constructor(props){super(props),assessment_scores_page_publicField(this,"saveJSON",()=>{const data=this.assembleData(),blob=new Blob([JSON.stringify(data)],{type:"application/json"}),name=`completions_${this.props.namespace.title}.json`;(0,file_saver.Z)(blob,name)}),assessment_scores_page_publicField(this,"saveCSV",()=>{const data=this.assembleData();lib_browser_default()(data,{header:!0},(err,output)=>{if(err)return this.props.addNotification({title:"Error encountered",message:"Encountered an error while creating CSV: "+err.message,level:"error",position:"tl"});const blob=new Blob([output],{type:"text/plain"}),name=`completions_${this.props.namespace.title}.csv`;(0,file_saver.Z)(blob,name)})}),assessment_scores_page_publicField(this,"toggleExplorer",()=>{this.setState({showExplorer:!this.state.showExplorer})}),assessment_scores_page_publicField(this,"handleScopeChange",value=>{this.setState({scope:value})});const scope={value:"course-wide",label:props.t("common:course-wide")};this.metrics=extractMetricSet(props.cohorts,scope,props.namespace),this.columns=this.createColumns(props.lessons,props.cohorts),this.state={displayedMembers:[],showExplorer:!1,scope,showComputeModal:!1,tags:[],computeMetric:null,provenanceModal:!1},this.beginningOfDay=new Date(new Date().setHours(0,0,0,0)),this.entities={[props.namespace._id]:props.namespace};for(let i=0;i<props.lessons.length;++i){const lesson=props.lessons[i];this.entities[lesson._id]=lesson}}componentDidMount(){this.createDisplayedMembers();const lessonIds=this.props.namespace.lessons.map(lesson=>lesson._id);axios_default().post(`${server.ZP}/completion_tags`,{lessons:lessonIds}).then(response=>{this.setState({tags:response.data})}).catch(err=>{console.log("Error fetching completion tags:",err),this.setState({tags:["quiz","homework","exam","_default_tag"]})})}componentDidUpdate(prevProps,prevState){(this.props.cohorts!==prevProps.cohorts||this.props.lessons!==prevProps.lessons||this.state.scope!==prevState.scope)&&(this.metrics=extractMetricSet(this.props.cohorts,this.state.scope,this.props.namespace),this.columns=this.createColumns(this.props.lessons,this.props.cohorts),this.createDisplayedMembers())}createDisplayedMembers(){let members=[];for(let i=0;i<this.props.cohorts.length;i++){const cohortMembers=this.props.cohorts[i].members;for(let j=0;j<cohortMembers.length;j++)cohortMembers[j].cohort=this.props.cohorts[i].title,cohortMembers[j].lessonGrades||(cohortMembers[j].lessonGrades={});members=members.concat(this.props.cohorts[i].members)}this.setState({displayedMembers:members})}createColumns(lessons,cohorts){const{t}=this.props,COLUMNS=[{Header:"Pic",accessor:"picture",Cell:row=>react.createElement("img",{className:"table-pic",src:`${server.ZP}/thumbnail/${row.original.picture}`,alt:"Profile Pic"}),maxWidth:46,minWidth:46,filterable:!1,resizable:!1,sortable:!1,style:{color:"darkslategrey"}},(0,create_text_column.Z)({Header:t("common:first-name"),id:"first_name",accessor:"firstName",maxWidth:75,filterMethod:(filter,row)=>contains_lib_default()(lowercase_lib_default()(row[filter.id]),lowercase_lib_default()(filter.value))}),(0,create_text_column.Z)({Header:t("common:last-name"),id:"last_name",accessor:"lastName",maxWidth:75,filterMethod:(filter,row)=>contains_lib_default()(lowercase_lib_default()(row[filter.id]),lowercase_lib_default()(filter.value))}),(0,create_text_column.Z)({Header:t("common:email"),accessor:"email",maxWidth:200,filterMethod:(filter,row)=>contains_lib_default()(lowercase_lib_default()(row[filter.id]),lowercase_lib_default()(filter.value))}),{Header:t("common:cohort"),accessor:"cohort",style:{marginTop:"8px",color:"darkslategrey"},filterMethod:assessment_scores_page_filterMethodCategories,Filter:({filter,onChange})=>{const handleChange=event=>{const newValue=event.target.value;onChange(newValue)};let value;return filter?is_array_lib_default()(filter.value)?value=filter.value.join(", "):value=filter.value:value="all",react.createElement("select",{onBlur:handleChange,onChange:handleChange,style:{width:"100%",backgroundColor:"ghostwhite"},value},react.createElement("option",{value:"all"},"Show All"),cohorts.map((v,key)=>react.createElement("option",{key,value:`${v.title}`},v.title)))}}];for(let i=0;i<this.metrics.length;i++)COLUMNS.push({Header:this.metrics[i].label,accessor:"completions."+this.metrics[i].value,Cell:row=>{var _a,_b;if(!row.value)return react.createElement("span",null);const lastUpdated=row.value.lastUpdated,score=(_b=(_a=row.value.instance)==null?void 0:_a.score)!=null?_b:-999,missing=" ";let displayDate="";lastUpdated instanceof Date?displayDate=relativeDate(lastUpdated.getTime()):typeof lastUpdated=="number"?displayDate=relativeDate(lastUpdated):displayDate=lastUpdated;const onScoreClick=()=>this.setState({provenanceModal:row.value.instance?{instance:row.value.instance,metric:metricObject(this.state.scope,this.metrics[i].label,this.props.namespace,this.props.lessons)}:!1});return react.createElement(OverlayTrigger_default(),{placement:"right",overlay:react.createElement(Tooltip_default(),{id:"tooltip"},`${t("last-updated")} ${displayDate}`)},react.createElement("span",{style:{whiteSpace:"pre"},tabIndex:"-1",role:"button",onKeyDown:onScoreClick,onClick:onScoreClick},left_pad_lib_default()(score<0?missing:String(roundn_lib_default()(score,-1).toFixed(1)),5,"  ")))},Filter:({filter,onChange})=>{const defaultVal={max:100,min:0};return react.createElement("div",{className:"completions-column",style:{paddingLeft:"4px",paddingRight:"4px",paddingTop:"8px"}},react.createElement(js_default(),{ariaControls:"dashboard-table",allowSameValues:!0,maxValue:100,minValue:0,value:filter?filter.value:defaultVal,onChange:newValue=>{onChange(newValue)}}),react.createElement(OverlayTrigger_default(),{placement:"right",overlay:react.createElement(Tooltip_default(),{id:"tooltip"},t("recompute-scores"))},react.createElement(Button_default(),{size:"sm",style:{marginLeft:20},onClick:()=>{this.setState({computeMetric:metricObject(this.state.scope,this.metrics[i].label,this.props.namespace,this.props.lessons),showComputeModal:!0})}},react.createElement("i",{className:"fas fa-solid fa-calculator"}))))},filterMethod:(filter,row)=>row[filter.id].instance.score>=filter.value.min&&row[filter.id].instance.score<=filter.value.max});return COLUMNS}assembleData(){const displayedMembers=this.dashboardTable.getResolvedState().sortedData,len=displayedMembers.length,out=new Array(len);for(let i=0;i<len;i++){const member=displayedMembers[i]._original;out[i]={name:member.name,firstName:member.firstName,lastName:member.lastName,email:member.email,cohort:member.cohort}}return out}renderMetricSelect(){const{t}=this.props,options=[{value:"course-wide",label:t("common:course-wide")},...this.props.lessons.map(lesson=>({value:lesson._id,label:lesson.title}))];return react.createElement(Form_default().Group,{className:"align-items-center d-flex",as:Row_default(),style:{float:"right",marginRight:6,minWidth:350,marginTop:-3}},react.createElement(Col.default,{md:4},react.createElement(Form_default().Label,{style:{marginBottom:0}},t("display-for"),":")),react.createElement(Col.default,{md:8},react.createElement(react_select_cjs_prod.ZP,{defaultValue:options[0],options,onChange:this.handleScopeChange})))}render(){const{t}=this.props;if(this.state.showExplorer){let data=this.assembleData();data=(0,obs_to_var.Z)(data);const quantitative=[],categorical=["name","email","cohort"];for(let i=0;i<this.props.lessons.length;i++)quantitative.push(this.props.lessons[i].title);return react.createElement(data_explorer.Z,{title:t("explorer-grades-title"),data,categorical,quantitative,close:this.toggleExplorer})}return react.createElement(react.Fragment,null,react.createElement("div",{className:"namespace-data-buttons"},react.createElement(ButtonGroup_default(),{className:"progress-button-group"},react.createElement(OverlayTrigger_default(),{placement:"bottom",overlay:react.createElement(Tooltip_default(),{id:"csvTooltip"},t("save-as-csv"))},react.createElement(Button_default(),{size:"sm",variant:"secondary",onClick:this.saveCSV},react.createElement("i",{className:"fas fa-download"})," CSV")),react.createElement(OverlayTrigger_default(),{placement:"bottom",overlay:react.createElement(Tooltip_default(),{id:"jsonTooltip"},t("save-as-json"))},react.createElement(Button_default(),{size:"sm",variant:"secondary",onClick:this.saveJSON},react.createElement("i",{className:"fas fa-download"})," JSON"))),this.renderMetricSelect()),react.createElement("div",{className:"namespace-data-page"},react.createElement(dashboard_table.Z,{className:"grades-table",data:this.state.displayedMembers,columns:this.columns,t,ref:r=>{this.dashboardTable=r},onButtonClick:this.toggleExplorer})),this.state.showComputeModal&&react.createElement(compute_modal.Z,{metric:this.state.computeMetric,show:this.state.showComputeModal,onHide:()=>this.setState({showComputeModal:!1}),cohorts:this.props.cohorts,tags:this.state.tags,entity:this.props.namespace,level:"namespace",onCompute:()=>{this.setState({showComputeModal:!1})},computeCompletions:this.props.computeCompletions}),this.state.provenanceModal&&react.createElement(provenance_navigator,{instance:this.state.provenanceModal.instance,metric:this.state.provenanceModal.metric,entities:this.entities,onHide:()=>this.setState({provenanceModal:!1}),show:!!this.state.provenanceModal}))}}AssessmentScoresPage.propTypes={addNotification:prop_types_default().func.isRequired,cohorts:prop_types_default().array.isRequired,computeCompletions:prop_types_default().func.isRequired,lessons:prop_types_default().array.isRequired,namespace:prop_types_default().object.isRequired},AssessmentScoresPage.defaultProps={};var assessment_scores_page=(0,commonjs.Zh)(["namespace_data","common"])(AssessmentScoresPage),tag_table_defProp=Object.defineProperty,tag_table_getOwnPropSymbols=Object.getOwnPropertySymbols,tag_table_hasOwnProp=Object.prototype.hasOwnProperty,tag_table_propIsEnum=Object.prototype.propertyIsEnumerable,tag_table_defNormalProp=(obj,key,value)=>key in obj?tag_table_defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value}):obj[key]=value,tag_table_spreadValues=(a,b)=>{for(var prop in b||(b={}))tag_table_hasOwnProp.call(b,prop)&&tag_table_defNormalProp(a,prop,b[prop]);if(tag_table_getOwnPropSymbols)for(var prop of tag_table_getOwnPropSymbols(b))tag_table_propIsEnum.call(b,prop)&&tag_table_defNormalProp(a,prop,b[prop]);return a};function TagTable({namespace:namespace2,lessons}){const{t}=(0,commonjs.$G)("common"),[expanded,setExpanded]=(0,react.useState)(!0);console.log(namespace2.componentsByLesson);const columns=[{Header:"",id:"expand",cell:({row,getValue})=>react.createElement(react.Fragment,null,row.getCanExpand()?react.createElement("button",tag_table_spreadValues({className:"unstyled-text-button"},{onClick:row.getToggleExpandedHandler()}),row.getIsExpanded()?react.createElement("i",{className:"fa fa-minus"}):react.createElement("i",{className:"fa fa-plus"})):null),size:5,maxSize:5,minSize:5,enableResizing:!1,className:"expander-column"},{accessorFn:row=>row.title,header:t("lesson")},{accessorFn:row=>row.component,header:t("component")},{accessorFn:row=>row.description||row.componentType,header:t("description"),cell:info=>{const description=info.getValue();return description==="No description supplied."?"":description}},{header:t("tag"),accessorKey:"tag"}];return react.createElement(standard_table,{columns,data:lessons,tableOptions:{getSubRows:row=>{const components=namespace2.componentsByLesson[row._id];return console.log("COMPONENTS: "),console.log(namespace2.componentsByLesson),console.log(row._id),console.log(components),components},getExpandedRowModel:(0,index_production.getExpandedRowModel)(),state:{expanded},onExpandedChange:setExpanded}})}var tag_table=TagTable,is_empty_object_lib=__webpack_require__(83966),is_empty_object_lib_default=__webpack_require__.n(is_empty_object_lib),values_lib=__webpack_require__(49984),values_lib_default=__webpack_require__.n(values_lib);function MetricsTable({namespace:namespace2,lessons}){const{t}=(0,commonjs.$G)("common"),columns=[{accessorKey:"title",header:t("lesson")},{accessorKey:"description",header:t("description"),cell:info=>{const description=info.getValue();return description==="No description supplied."?"":description}},{accessorKey:"name",header:t("name")},{accessorFn:row=>row.rule?row.rule[0]:"",header:t("rule")},{header:t("coverage"),accessorKey:"coverage",cell:info=>{const coverage=info.getValue();return coverage?coverage[0]==="All"?"All components":"Selected components":""}},{accessorKey:"ref",header:t("submetric")},{accessorKey:"autoCompute",header:t("auto compute")},{accessorKey:"visibleToStudent",header:t("visible to student")},{accessorKey:"timeFilter",header:t("time filter")},{accessorKey:"tagWeights",header:t("tag weights"),cell:info=>{const tagWeights=info.getValue();if(!tagWeights)return"";const weights=values_lib_default()(tagWeights);return is_empty_object_lib_default()(tagWeights)||weights.every(v=>v===0)||weights.length===1&&(tagWeights==null?void 0:tagWeights._default_tag)?"":"Custom"}}];return react.createElement(standard_table,{columns,data:lessons,tableOptions:{getSubRows:row=>row.completions,getExpandedRowModel:(0,index_production.getExpandedRowModel)(),initialState:{expanded:!0}}})}var metrics_page=MetricsTable;const EXTENSIONS=[{user:"600e0ad44c7a064db2b42556",lastName:"Genovese",firstName:"Christopher",cohort:"Cohort 1",lesson:{_id:"62d0303b6048815e19d2fedd",title:"Lesson 1"},extensionStart:new Date,extensionEnd:new Date},{user:"6171a92ccf6e189c3144f65a",lastName:"Burckhardt",firstName:"Philipp",cohort:"Cohort 2",lesson:{_id:"61956dcba011aec3438b260d",title:"Lesson 2"},extensionStart:new Date,extensionEnd:new Date},{user:"60186c3ff996a8399ca8276d",lastName:"Klein",firstName:"Sebastian",cohort:"Cohort 1",lesson:{_id:"62d0303b6048815e19d2fedd",title:"Lesson 3"},extensionStart:new Date,extensionEnd:new Date}];function ExtensionsTable({cohorts,namespace:namespace2,lessons}){console.log(lessons),EXTENSIONS.sort((a,b)=>{if(a.cohort<b.cohort)return-1;if(a.cohort>b.cohort)return 1;const aName=a.lastName+a.firstName,bName=b.lastName+b.firstName;return aName<bName?-1:aName>bName?1:a.lesson.title<b.lesson.title?-1:a.lesson.title>b.lesson.title?1:0});const{t}=(0,commonjs.$G)("common"),columns=[{accessorKey:"lastName",header:t("lastName")},{accessorKey:"firstName",header:t("firstName")},{accessorKey:"cohort",header:t("cohort")},{accessorKey:"lesson.title",header:t("lesson")},{accessorKey:"extensionStart",header:t("extensionStart")},{accessorKey:"extensionEnd",header:t("extensionEnd")}];return react.createElement(standard_table,{columns,data:EXTENSIONS})}var extensions_page=ExtensionsTable;const AssessmentPage=props=>{const[activePage,setActivePage]=(0,react.useState)(window.location.pathname),{t}=(0,commonjs.$G)(["namespace_data","common"]),navigate=(0,react_router_dom_production_min.useNavigate)(),handleSelect=selectedKey=>{navigate(selectedKey),setActivePage(selectedKey)};return react.createElement(react.Fragment,null,react.createElement("div",{className:"namespace-sub-navbar"},react.createElement(Nav_default(),{variant:"pills",activeKey:activePage,onSelect:handleSelect},react.createElement(Nav_default().Item,null,react.createElement(Nav_default().Link,{eventKey:"scores",title:"Scores"},t("scores"))),react.createElement(Nav_default().Item,null,react.createElement(Nav_default().Link,{eventKey:"tags",title:"Tags"},t("tags"))),react.createElement(Nav_default().Item,null,react.createElement(Nav_default().Link,{eventKey:"metrics",title:"Metrics"},t("metrics"))),react.createElement(Nav_default().Item,null,react.createElement(Nav_default().Link,{eventKey:"extensions",title:"Extensions"},t("extensions"))))),react.createElement(react_router_dom_production_min.Routes,null,react.createElement(react_router_dom_production_min.Route,{path:"scores",element:react.createElement(assessment_scores_page,{addNotification:props.addNotification,namespace:props.namespace,cohorts:props.namespace.cohorts,lessons:props.lessons,user:props.user,computeCompletions:props.computeCompletions})}),react.createElement(react_router_dom_production_min.Route,{path:"tags",element:react.createElement(tag_table,{lessons:props.lessons,namespace:props.namespace})}),react.createElement(react_router_dom_production_min.Route,{path:"metrics",element:react.createElement(metrics_page,{lessons:props.lessons,namespace:props.namespace})}),react.createElement(react_router_dom_production_min.Route,{path:"extensions",element:react.createElement(extensions_page,{lessons:props.lessons,namespace:props.namespace,cohorts:props.namespace.cohorts})})))};AssessmentPage.propTypes={addNotification:prop_types_default().func.isRequired,computeCompletions:prop_types_default().func.isRequired,lessons:prop_types_default().array.isRequired,namespace:prop_types_default().object.isRequired,user:prop_types_default().object.isRequired};var assessment_page=AssessmentPage;const namespace_data_debug=browser_default()("isle-dashboard:namespace-data"),NamespaceData=({addAnnouncement:addAnnouncement2,deleteAnnouncement:deleteAnnouncement2,editAnnouncement:editAnnouncement2,badges,namespace:namespace2,user,getBadges,uploadFile,deleteFile,getFiles,sendTicketMessage,addNotification,adjustProgress,getCourseTickets,getNamespaceActions,openTicket,closeTicket,computeCompletions,updatePriority,getOwnerFiles})=>{let pathname=window.location.pathname;const[activePage,setActivePage]=(0,react.useState)(pathname.substring(pathname.lastIndexOf("/")+1)),{t}=(0,commonjs.$G)(["namespace_data","common"]),navigate=(0,react_router_dom_production_min.useNavigate)();if((0,react.useEffect)(()=>{namespace_data_debug("Getting badges upon mounting..."),getBadges()},[getBadges]),!namespace2._id)return react.createElement("div",{className:"namespace-data-div"},react.createElement(Alert_default(),{variant:"danger"},t("common:no-course-selected")));const handleUpload=event=>{namespace_data_debug("Uploading file...");const file2=event.target.files[0],formData=new FormData;formData.append("file",file2,file2.name),formData.append("namespaceName",namespace2.title),formData.append("owner","true"),uploadFile({formData,user})},handleAnnouncementDeletion=(createdAt,index)=>{deleteAnnouncement2({namespaceName:namespace2.title,index,createdAt})},handleAnnouncementEdit=announcement=>{editAnnouncement2({namespaceName:namespace2.title,announcement})},handleAnnouncementCreation=announcement=>{addAnnouncement2({namespaceName:namespace2.title,announcement})},handleFileDeletion=(_id,ownerFiles)=>{deleteFile(_id,namespace2.title,ownerFiles)},submitTicketMessage=({message,ticketID})=>{sendTicketMessage({message,ticketID,user})},handleSelect=selectedKey=>{const title=namespace2.title;navigate(`/namespace-data/${title}/${selectedKey}`),setActivePage(selectedKey)};return react.createElement("div",{className:"namespace-data-div"},react.createElement("div",{className:"namespace-data-navbar"},react.createElement(Nav_default(),{variant:"pills",className:"namespace-data-navbar-pills",activeKey:activePage,onSelect:handleSelect},react.createElement(Nav_default().Item,null,react.createElement(Nav_default().Link,{eventKey:"announcements",title:"Announcements"},t("common:announcements"))),react.createElement(Nav_default().Item,null,react.createElement(Nav_default().Link,{eventKey:"progress",title:"Progress"},t("common:progress"))),react.createElement(Nav_default().Item,null,react.createElement(Nav_default().Link,{eventKey:"assessments",title:"Assessments"},t("common:assessments"))),react.createElement(Nav_default().Item,null,react.createElement(Nav_default().Link,{eventKey:"grades",title:"Grades"},t("grades"))),react.createElement(Nav_default().Item,null,react.createElement(Nav_default().Link,{eventKey:"cohorts",title:"Cohorts"},t("common:cohorts"))),react.createElement(Nav_default().Item,null,react.createElement(Nav_default().Link,{eventKey:"owner-files",title:"Owner Files"},t("owner-files"))),react.createElement(Nav_default().Item,null,react.createElement(Nav_default().Link,{eventKey:"student-files",title:"Student Files"},t("student-files"))),react.createElement(Nav_default().Item,null,react.createElement(Nav_default().Link,{eventKey:"tickets",title:"Tickets",disabled:!namespace2.enableTicketing},t("common:tickets"))),react.createElement(Nav_default().Item,null,react.createElement(Nav_default().Link,{eventKey:"actions",title:"Actions",disabled:!0},t("common:actions"))))),react.createElement("div",{className:"namespace-data-page-container",style:{overflowY:"auto"}},react.createElement(react_router_dom_production_min.Routes,null,react.createElement(react_router_dom_production_min.Route,{path:"announcements",element:react.createElement(announcements_page,{namespace:namespace2,editAnnouncement:handleAnnouncementEdit,deleteAnnouncement:handleAnnouncementDeletion,addAnnouncement:handleAnnouncementCreation,user})}),react.createElement(react_router_dom_production_min.Route,{path:"progress",element:react.createElement(progress_page,{adjustProgress,addNotification,namespace:namespace2,cohorts:namespace2.cohorts,lessons:namespace2.lessons,user})}),react.createElement(react_router_dom_production_min.Route,{path:"assessments/*",element:react.createElement(assessment_page,{addNotification,namespace:namespace2,cohorts:namespace2.cohorts,lessons:namespace2.lessons,user,computeCompletions})}),react.createElement(react_router_dom_production_min.Route,{path:"grades",element:react.createElement(grades_page,{addNotification,namespace:namespace2,cohorts:namespace2.cohorts,lessons:namespace2.lessons,user})}),react.createElement(react_router_dom_production_min.Route,{path:"cohorts",element:react.createElement(cohorts_page,{badges,cohorts:namespace2.cohorts,lessons:namespace2.lessons})}),react.createElement(react_router_dom_production_min.Route,{path:"owner-files",element:react.createElement(files_page,{ownerFiles:!0,files:namespace2.ownerFiles,namespace:namespace2,handleUpload,handleFileDeletion,addNotification,getFiles:getOwnerFiles})}),react.createElement(react_router_dom_production_min.Route,{path:"student-files",element:react.createElement(files_page,{files:namespace2.files,namespace:namespace2,handleUpload,handleFileDeletion,addNotification,getFiles})}),react.createElement(react_router_dom_production_min.Route,{path:"tickets",element:react.createElement(tickets_page,{tickets:namespace2.tickets,namespace:namespace2,getCourseTickets,submitTicketMessage,openTicket,closeTicket,updatePriority})}),react.createElement(react_router_dom_production_min.Route,{path:"actions",element:react.createElement(actions_page,{namespace:namespace2,getNamespaceActions,user,cohorts:namespace2.cohorts})}))))};NamespaceData.propTypes={addAnnouncement:prop_types_default().func.isRequired,addNotification:prop_types_default().func.isRequired,adjustProgress:prop_types_default().func.isRequired,badges:prop_types_default().array,closeTicket:prop_types_default().func.isRequired,computeCompletions:prop_types_default().func.isRequired,deleteAnnouncement:prop_types_default().func.isRequired,deleteFile:prop_types_default().func.isRequired,editAnnouncement:prop_types_default().func.isRequired,getBadges:prop_types_default().func.isRequired,getCourseTickets:prop_types_default().func.isRequired,getFiles:prop_types_default().func.isRequired,getNamespaceActions:prop_types_default().func.isRequired,getOwnerFiles:prop_types_default().func.isRequired,namespace:prop_types_default().object.isRequired,openTicket:prop_types_default().func.isRequired,sendTicketMessage:prop_types_default().func.isRequired,updatePriority:prop_types_default().func.isRequired,uploadFile:prop_types_default().func.isRequired,user:prop_types_default().object.isRequired},NamespaceData.defaultProps={badges:null};var namespace_data=NamespaceData,action_types=__webpack_require__(84499),notification=__webpack_require__(16120),helpers_axios=__webpack_require__(9908),announcement_async=(__this,__arguments,generator)=>new Promise((resolve,reject)=>{var fulfilled=value=>{try{step(generator.next(value))}catch(e){reject(e)}},rejected=value=>{try{step(generator.throw(value))}catch(e){reject(e)}},step=x=>x.done?resolve(x.value):Promise.resolve(x.value).then(fulfilled,rejected);step((generator=generator.apply(__this,__arguments)).next())});function editedAnnouncement(announcement,namespaceName){return{type:action_types.wx,payload:{announcement,namespaceName}}}function createdAnnouncement(announcement,namespaceName){return{type:action_types.H0,payload:{announcement,namespaceName}}}function deletedAnnouncement(index,namespaceName){return{type:action_types.wd,payload:{index,namespaceName}}}const addAnnouncement=(_0,_1)=>announcement_async(void 0,[_0,_1],function*(dispatch,{namespaceName,announcement}){try{const res=yield helpers_axios.eC.post(server.ZP+"/new_announcement",{namespaceName,announcement});(0,notification.wN)(dispatch,{message:res.data.message,level:"success"}),dispatch(createdAnnouncement(announcement,namespaceName))}catch(err){(0,notification.EG)(dispatch,err)}}),addAnnouncementInjector=dispatch=>_0=>announcement_async(void 0,[_0],function*({namespaceName,announcement}){yield addAnnouncement(dispatch,{namespaceName,announcement})}),deleteAnnouncement=(_0,_1)=>announcement_async(void 0,[_0,_1],function*(dispatch,{namespaceName,createdAt,index}){try{const res=yield helpers_axios.eC.post(server.ZP+"/delete_announcement",{namespaceName,createdAt});(0,notification.wN)(dispatch,{message:res.data.message,level:"success"}),dispatch(deletedAnnouncement(index,namespaceName))}catch(err){(0,notification.EG)(dispatch,err)}}),deleteAnnouncementInjector=dispatch=>_0=>announcement_async(void 0,[_0],function*({namespaceName,createdAt,index}){yield deleteAnnouncement(dispatch,{namespaceName,createdAt,index})}),editAnnouncement=(_0,_1)=>announcement_async(void 0,[_0,_1],function*(dispatch,{namespaceName,announcement}){try{const res=yield helpers_axios.eC.post(server.ZP+"/edit_announcement",{namespaceName,announcement});(0,notification.wN)(dispatch,{message:res.data.message,level:"success"}),dispatch(editedAnnouncement(announcement,namespaceName))}catch(err){(0,notification.EG)(dispatch,err)}}),editAnnouncementInjector=dispatch=>_0=>announcement_async(void 0,[_0],function*({namespaceName,announcement}){yield editAnnouncement(dispatch,{namespaceName,announcement})});var badge=__webpack_require__(25218),file=__webpack_require__(7534),namespace=__webpack_require__(23218),ticket=__webpack_require__(41054),completions=__webpack_require__(83214);function mapStateToProps(state){return{badges:state.badges,user:state.user,namespace:state.namespace}}function mapDispatchToProps(dispatch){return{adjustProgress:(0,namespace.Tm)(dispatch),getBadges:(0,badge.Zl)(dispatch),getCourseTickets:(0,ticket.P3)(dispatch),getFiles:(0,file.TK)(dispatch),getOwnerFiles:(0,file.Ru)(dispatch),getNamespaceActions:(0,namespace.qw)(dispatch),addNotification:(0,notification.pP)(dispatch),deleteFile:(0,file.ns)(dispatch),deleteAnnouncement:deleteAnnouncementInjector(dispatch),editAnnouncement:editAnnouncementInjector(dispatch),addAnnouncement:addAnnouncementInjector(dispatch),sendTicketMessage:(0,ticket.fG)(dispatch),closeTicket:(0,ticket.xG)(dispatch),computeCompletions:(0,completions.sA)(dispatch),openTicket:(0,ticket.mJ)(dispatch),uploadFile:(0,file.E8)(dispatch),updatePriority:(0,ticket.Cq)(dispatch)}}var visible_namespace_data=(0,lib.connect)(mapStateToProps,mapDispatchToProps)(namespace_data)},63787:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var components_async__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(15052);const DashboardDataExplorer=(0,components_async__WEBPACK_IMPORTED_MODULE_0__.Z)(()=>Promise.all([__webpack_require__.e(8234),__webpack_require__.e(1419)]).then(__webpack_require__.bind(__webpack_require__,72186)));__webpack_exports__.Z=DashboardDataExplorer},3902:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(67294);function createBooleanColumn({Header,accessor,trueLabel,falseLabel,printLabels=!1,maxWidth=150}){let Cell,style;return printLabels?(Cell=row=>row.value===!0?trueLabel:row.value===!1?falseLabel:null,style={marginTop:"8px",color:"darkslategrey"}):(Cell=row=>row.value?react__WEBPACK_IMPORTED_MODULE_0__.createElement("i",{className:"far fa-check-square"}):null,style={marginTop:"2px",color:"darkslategrey",fontSize:24,textAlign:"center"}),{Header,accessor,style,Cell,filterMethod:(filter,row)=>{if(filter.value==="all")return!0;const id=filter.pivotId||filter.id;return row[id]===void 0?!0:String(row[id])===filter.value},Filter:({filter,onChange})=>{const handleChange=event=>{const newValue=event.target.value;onChange(newValue)};let value;return filter?value=filter.value:value="all",react__WEBPACK_IMPORTED_MODULE_0__.createElement("select",{onBlur:handleChange,onChange:handleChange,style:{width:"100%",backgroundColor:"ghostwhite"},value},react__WEBPACK_IMPORTED_MODULE_0__.createElement("option",{value:"all"},"Show All"),react__WEBPACK_IMPORTED_MODULE_0__.createElement("option",{value:!0},trueLabel),react__WEBPACK_IMPORTED_MODULE_0__.createElement("option",{value:!1},falseLabel))},maxWidth}}__webpack_exports__.Z=createBooleanColumn},84024:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(67294);function createCategoricalColumn({Header,Cell,accessor,labels,maxWidth=150,width}){let style;return{Header,accessor,style,Cell,filterMethod:(filter,row)=>{if(filter.value==="all")return!0;const id=filter.pivotId||filter.id;return row[id]===void 0?!0:String(row[id])===filter.value},Filter:({filter,onChange})=>{const handleChange=event=>{const newValue=event.target.value;onChange(newValue)};let value;return filter?value=filter.value:value="all",react__WEBPACK_IMPORTED_MODULE_0__.createElement("select",{onBlur:handleChange,onChange:handleChange,style:{width:"100%",backgroundColor:"ghostwhite"},value},react__WEBPACK_IMPORTED_MODULE_0__.createElement("option",{value:"all"},"Show All"),labels.map((x,idx)=>react__WEBPACK_IMPORTED_MODULE_0__.createElement("option",{value:x,key:idx},x)))},maxWidth,width}}__webpack_exports__.Z=createCategoricalColumn},30691:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(67294),react_dates__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(76141),react_bootstrap_OverlayTrigger__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(99201),react_bootstrap_OverlayTrigger__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(react_bootstrap_OverlayTrigger__WEBPACK_IMPORTED_MODULE_5__),react_bootstrap_Popover__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(44981),react_bootstrap_Popover__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(react_bootstrap_Popover__WEBPACK_IMPORTED_MODULE_4__),react_bootstrap_Button__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(89876),react_bootstrap_Button__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(react_bootstrap_Button__WEBPACK_IMPORTED_MODULE_3__),react_dates_lib_css_datepicker_css__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(71990),__defProp=Object.defineProperty,__defNormalProp=(obj,key,value)=>key in obj?__defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value}):obj[key]=value,__publicField=(obj,key,value)=>(__defNormalProp(obj,typeof key!="symbol"?key+"":key,value),value);class CustomDatePicker extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),__publicField(this,"handleDatesChange",({startDate,endDate})=>{this.setState({startDate,endDate},()=>{this.props.onDatesChange(this.state)})}),__publicField(this,"handleReset",()=>{this.setState({startDate:this.props.minDate,endDate:this.props.maxDate},()=>{this.props.onDatesChange(this.state)})}),this.state={startDate:props.startDate,endDate:props.endDate}}componentDidUpdate(prevProps){(this.props.startDate!==prevProps.startDate||this.props.endDate!==prevProps.endDate)&&this.setState({startDate:this.props.startDate,endDate:this.props.endDate})}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_dates__WEBPACK_IMPORTED_MODULE_1__.DateRangePicker,{startDate:this.state.startDate,endDate:this.state.endDate,startDateId:"start_date_input",endDateId:"end_date_input",onDatesChange:this.handleDatesChange,focusedInput:this.state.focusedInput,onFocusChange:focusedInput=>this.setState({focusedInput}),isOutsideRange:()=>!1}),react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_bootstrap_Button__WEBPACK_IMPORTED_MODULE_3___default(),{"aria-label":this.props.t("common:close"),variant:"warning",onClick:this.handleReset,style:{paddingTop:8,paddingLeft:16,paddingRight:16,paddingBottom:8,fontSize:20}},"x"))}}const DefaultCell=row=>new Date(row.value).toLocaleString();function createBooleanColumn({Header,accessor,Cell,style,startDate,endDate,t,maxWidth=150}){return{Header,accessor,style,Cell:Cell||DefaultCell,filterMethod:(filter,row)=>{if(!filter.value)return!0;const{startDate:startDate2,endDate:endDate2}=filter.value,id=filter.pivotId||filter.id,value=row[id].getTime();return startDate2&&endDate2?value>=startDate2.valueOf()&&value<=endDate2.valueOf():startDate2?value>=startDate2.valueOf():endDate2?value<=endDate2.valueOf():!0},Filter:({filter,onChange})=>{const filterValue=filter?filter.value||{}:{},popover=react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_bootstrap_Popover__WEBPACK_IMPORTED_MODULE_4___default(),{id:"popover-data",style:{maxWidth:400}},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_bootstrap_Popover__WEBPACK_IMPORTED_MODULE_4___default().Header,{as:"h3"},t("common:dates")),react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_bootstrap_Popover__WEBPACK_IMPORTED_MODULE_4___default().Body,{style:{backgroundColor:"grey"}},react__WEBPACK_IMPORTED_MODULE_0__.createElement(CustomDatePicker,{startDate:filterValue.startDate||startDate,minDate:startDate,maxDate:endDate,endDate:filterValue.endDate||endDate,onDatesChange:({startDate:startDate2,endDate:endDate2})=>{onChange({startDate:startDate2,endDate:endDate2})},t})));return react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_bootstrap_OverlayTrigger__WEBPACK_IMPORTED_MODULE_5___default(),{trigger:"click",placement:"right",overlay:popover},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_bootstrap_Button__WEBPACK_IMPORTED_MODULE_3___default(),{"aria-label":t("common:toggle-calendar"),size:"sm",style:{float:"left",marginLeft:6},variant:"secondary"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("i",{className:"far fa-calendar-alt"})))},maxWidth}}__webpack_exports__.Z=createBooleanColumn},56739:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(67294),react_input_range__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(9322),react_input_range__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(react_input_range__WEBPACK_IMPORTED_MODULE_1__),_stdlib_string_replace__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(51594),_stdlib_string_replace__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_stdlib_string_replace__WEBPACK_IMPORTED_MODULE_2__),_stdlib_string_lowercase__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(86361),_stdlib_string_lowercase__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_stdlib_string_lowercase__WEBPACK_IMPORTED_MODULE_3__),_stdlib_math_base_special_roundn__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(60004),_stdlib_math_base_special_roundn__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_stdlib_math_base_special_roundn__WEBPACK_IMPORTED_MODULE_4__),css_input_range_css__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(53860);const defaultFilterMethod=(filter,row)=>{const id=filter.pivotId||filter.id,val=row[id];return val>=filter.value.min&&val<=filter.value.max},defaultFormatLabel=value=>_stdlib_math_base_special_roundn__WEBPACK_IMPORTED_MODULE_4___default()(value,-2);function createNumericColumn({Header,accessor,Cell,minValue=0,maxValue=1,maxWidth=150,filterMethod,formatLabel}){const id=`header-${_stdlib_string_lowercase__WEBPACK_IMPORTED_MODULE_3___default()(_stdlib_string_replace__WEBPACK_IMPORTED_MODULE_2___default()(Header," ","-"))}`;return{Header:react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{id},Header),accessor,Cell:Cell||(row=>row.value?`${_stdlib_math_base_special_roundn__WEBPACK_IMPORTED_MODULE_4___default()(row.value,-3)}`:"NA"),filterMethod:filterMethod||defaultFilterMethod,Filter:({filter,onChange})=>{minValue===maxValue&&(maxValue=minValue+=1);const defaultVal={max:maxValue,min:minValue};return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{style:{paddingLeft:"4px",paddingRight:"4px",paddingTop:"8px"}},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_input_range__WEBPACK_IMPORTED_MODULE_1___default(),{ariaLabelledby:id,ariaControls:"dashboard-table",allowSameValues:!0,maxValue,minValue,step:.1,value:filter?filter.value:defaultVal,onChange:newValue=>{onChange(newValue)},formatLabel:formatLabel||defaultFormatLabel}))},maxWidth}}__webpack_exports__.Z=createNumericColumn},90501:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(67294),react_bootstrap_FormControl__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(26199),react_bootstrap_FormControl__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(react_bootstrap_FormControl__WEBPACK_IMPORTED_MODULE_2__),_text_filter_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(31190);function createTextColumn({id,Header,Cell,accessor,maxWidth=150,minWidth,filterMethod}){minWidth>maxWidth&&(maxWidth=minWidth);const spec={id,Header,accessor,Cell,filterMethod:filterMethod||_text_filter_js__WEBPACK_IMPORTED_MODULE_1__.Z,Filter:({filter,onChange})=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_bootstrap_FormControl__WEBPACK_IMPORTED_MODULE_2___default(),{"aria-label":Header,autoComplete:"none",onChange:event=>{onChange(event.target.value)}})};return maxWidth&&(spec.maxWidth=maxWidth),minWidth&&(spec.minWidth=minWidth),spec}__webpack_exports__.Z=createTextColumn},19446:function(__unused_webpack_module,__webpack_exports__){const RE_AUTO_BOM=/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i;function click(node){const event=new MouseEvent("click");node.dispatchEvent(event)}function throwOutside(ex){setImmediate(function(){throw ex},0)}function autoBOM(blob){return RE_AUTO_BOM.test(blob.type)?new Blob([String.fromCharCode(65279),blob],{type:blob.type}):blob}function dispatch(filesaver,eventTypes,event){eventTypes=[].concat(eventTypes);let i=eventTypes.length;for(;i--;){let listener=filesaver["on"+eventTypes[i]];if(typeof listener=="function")try{listener.call(filesaver,event||filesaver)}catch(ex){throwOutside(ex)}}}function saveFactory(view){if(typeof view=="undefined"||typeof navigator!="undefined"&&/MSIE [1-9]\./.test(navigator.userAgent))return;const doc=view.document;function getURL(){return view.URL||view.webkitURL||view}function revoke(file){function revoker(){typeof file=="string"?getURL().revokeObjectURL(file):file.remove()}setTimeout(revoker,4e4)}const saveLink=doc.createElementNS("http://www.w3.org/1999/xhtml","a"),canUseSaveLink="download"in saveLink,isSafari=/constructor/i.test(view.HTMLElement)||view.safari,isChromeIOS=/CriOS\/[\d]+/.test(navigator.userAgent),setImmediate2=view.setImmediate||view.setTimeout,forceSavableType="application/octet-stream";function FileSaver(blob,name,noAutoBOM){noAutoBOM||(blob=autoBOM(blob));const self2=this,force=blob.type===forceSavableType;let objectURL;function dispatchAll(){dispatch(self2,"writestart progress write writeend".split(" "))}function fsError(){if((isChromeIOS||force&&isSafari)&&view.FileReader){const reader=new FileReader;reader.onloadend=function(){let url=isChromeIOS?reader.result:reader.result.replace(/^data:[^;]*;/,"data:attachment/file;");view.open(url,"_blank")||(view.location.href=url),url=void 0,self2.readyState=self2.DONE,dispatchAll()},reader.readAsDataURL(blob),self2.readyState=self2.INIT;return}objectURL||(objectURL=getURL().createObjectURL(blob)),force?view.location.href=objectURL:view.open(objectURL,"_blank")||(view.location.href=objectURL),self2.readyState=self2.DONE,dispatchAll(),revoke(objectURL)}if(self2.readyState=self2.INIT,canUseSaveLink){objectURL=getURL().createObjectURL(blob),setImmediate2(function(){saveLink.href=objectURL,saveLink.download=name,click(saveLink),dispatchAll(),revoke(objectURL),self2.readyState=self2.DONE},0);return}fsError()}const proto=FileSaver.prototype;function saveAs2(blob,name,noAutoBOM){return new FileSaver(blob,name||blob.name||"download",noAutoBOM)}return typeof navigator!="undefined"&&navigator.msSaveOrOpenBlob?function(blob,name,noAutoBOM){return name=name||blob.name||"download",noAutoBOM||(blob=autoBOM(blob)),navigator.msSaveOrOpenBlob(blob,name)}:(proto.abort=function(){},proto.readyState=proto.INIT=0,proto.WRITING=1,proto.DONE=2,proto.error=null,proto.onwritestart=null,proto.onprogress=null,proto.onwrite=null,proto.onabort=null,proto.onerror=null,proto.onwriteend=null,saveAs2)}const saveAs=saveFactory(typeof self!="undefined"&&self||typeof window!="undefined"&&window||(void 0).content);__webpack_exports__.Z=saveAs},31190:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _stdlib_assert_contains__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(61635),_stdlib_assert_contains__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_stdlib_assert_contains__WEBPACK_IMPORTED_MODULE_0__),_stdlib_string_lowercase__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(86361),_stdlib_string_lowercase__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_stdlib_string_lowercase__WEBPACK_IMPORTED_MODULE_1__);const textFilter=(filter,row)=>{const str=row[filter.id]||"";return _stdlib_assert_contains__WEBPACK_IMPORTED_MODULE_0___default()(_stdlib_string_lowercase__WEBPACK_IMPORTED_MODULE_1___default()(str),_stdlib_string_lowercase__WEBPACK_IMPORTED_MODULE_1___default()(filter.value))};__webpack_exports__.Z=textFilter},53860:function(){}}]);

//# sourceMappingURL=336.e642eb75.chunk.js.map