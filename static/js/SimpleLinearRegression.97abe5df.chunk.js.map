{"version":3,"file":"static/js/SimpleLinearRegression.97abe5df.chunk.js","mappings":"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","sources":["../node_modules/@isle-project/components/models/simple-linear-regression/main.js","../node_modules/@stdlib/stats/incr/sumabs2/lib/index.js","../node_modules/@stdlib/stats/incr/sumabs2/lib/main.js"],"sourcesContent":["// MODULES //\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { withTranslation } from 'react-i18next';\nimport Alert from 'react-bootstrap/Alert';\nimport Button from 'react-bootstrap/Button';\nimport Table from '@isle-project/components/table';\nimport Tooltip from '@isle-project/components/tooltip';\nimport { isPrimitive as isNumber } from '@stdlib/assert/is-number';\nimport isUndefinedOrNull from '@stdlib/assert/is-undefined-or-null';\nimport isnan from '@stdlib/assert/is-nan';\nimport objectValues from '@stdlib/utils/values';\nimport mapValues from '@stdlib/utils/map-values';\nimport incrsumabs2 from '@stdlib/stats/incr/sumabs2';\nimport tCDF from '@stdlib/stats/base/dists/t/cdf';\nimport abs from '@stdlib/math/base/special/abs';\nimport sqrt from '@stdlib/math/base/special/sqrt';\nimport mean from '@isle-project/utils/statistic/mean';\nimport Plotly from '@isle-project/components/plotly';\nimport { generateQQPlotConfig } from '@isle-project/components/plots/qqplot';\nimport by2 from '@isle-project/utils/by2';\nimport by from '@isle-project/utils/by';\nimport { withPropCheck } from '@isle-project/utils/prop-check';\nimport { Factor } from '@isle-project/utils/factor-variable';\n\n\n// VARIABLES //\n\nlet COUNTER = 0;\nconst T = 't';\n\n\n// FUNCTIONS //\n\nfunction calculateCoefficients( x, y ) {\n\tconst xmu = mean( x );\n\tconst ymu = mean( y );\n\tlet C1 = 0;\n\tlet C2 = 0;\n\tconst len = x.length;\n\tfor ( let i = 0; i < len; i++ ) {\n\t\tlet xdelta = x[ i ] - xmu;\n\t\tlet ydelta = y[ i ] - ymu;\n\t\tC1 += xdelta * xdelta;\n\t\tC2 += xdelta * ydelta;\n\t}\n\tconst slope = C2 / C1;\n\tconst yint = ymu - slope*xmu;\n\treturn { yint, slope, xg: x, yg: y };\n}\n\nfunction isMissing( x ) {\n\treturn isnan( x ) || isUndefinedOrNull( x );\n}\n\nfunction isNonMissingNumber( x ) {\n\treturn isNumber( x ) && !isnan( x );\n}\n\nfunction extractValues({ x, y, data, group, omitMissing }) {\n\tconst xd = data[ x ];\n\tconst yd = data[ y ];\n\tconst groups = data[ group ];\n\tif ( omitMissing ) {\n\t\tconst xvals = [];\n\t\tconst yvals = [];\n\t\tconst groupvals = [];\n\t\tif ( groups ) {\n\t\t\tfor ( let i = 0; i < xd.length; i++ ) {\n\t\t\t\tif (\n\t\t\t\t\t!isMissing( groups[ i ] ) &&\n\t\t\t\t\tisNonMissingNumber( xd[ i ] ) &&\n\t\t\t\t\tisNonMissingNumber( yd[ i ] )\n\t\t\t\t) {\n\t\t\t\t\txvals.push( xd[ i ] );\n\t\t\t\t\tyvals.push( yd[ i ] );\n\t\t\t\t\tgroupvals.push( groups[ i ] );\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tfor ( let i = 0; i < xd.length; i++ ) {\n\t\t\t\tif (\n\t\t\t\t\tisNonMissingNumber( xd[ i ] ) &&\n\t\t\t\t\tisNonMissingNumber( yd[ i ] )\n\t\t\t\t) {\n\t\t\t\t\txvals.push( xd[ i ] );\n\t\t\t\t\tyvals.push( yd[ i ] );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn {\n\t\t\txd: xvals,\n\t\t\tyd: yvals,\n\t\t\tgroups: groupvals\n\t\t};\n\t}\n\treturn {\n\t\txd: xd,\n\t\tyd: yd,\n\t\tgroups: groups\n\t};\n}\n\n\n// MAIN //\n\n/**\n* Simple linear regression.\n*\n* @property {Object} data - object of value arrays\n* @property {string} x - explanatory variable\n* @property {string} y - response variable\n* @property {(string|Factor)} group - grouping variable\n* @property {boolean} omitMissing - controls whether to omit missing values in model fitting\n* @property {Function} onDiagnostics - callback invoked with diagnostic plots\n* @property {Function} onPredict - callback invoked with fitted values and residuals\n*/\nclass SimpleLinearRegression extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tCOUNTER += 1;\n\t\tconst { x, y, data, group, omitMissing } = props;\n\t\tthis.state = extractValues({ x, y, data, group, omitMissing });\n\t}\n\n\tstatic getDerivedStateFromProps( nextProps, prevState ) {\n\t\tif (\n\t\t\tnextProps.data !== prevState.data ||\n\t\t\tnextProps.x !== prevState.x ||\n\t\t\tnextProps.y !== prevState.y ||\n\t\t\tnextProps.group !== prevState.group ||\n\t\t\tnextProps.omitMissing !== prevState.omitMissing\n\t\t) {\n\t\t\tconst { x, y, intercept, omitMissing, data, group } = nextProps;\n\t\t\treturn extractValues({ x, y, intercept, omitMissing, data, group } );\n\t\t}\n\t\treturn null;\n\t}\n\n\trender() {\n\t\tconst { xd, yd, groups } = this.state;\n\t\tconst { x, y, group, data, t } = this.props;\n\t\tlet output;\n\t\ttry {\n\t\t\tif ( group ) {\n\t\t\t\tconst xmeans = by( xd, groups, mean );\n\t\t\t\tconst res = by2( xd, yd, groups, calculateCoefficients );\n\t\t\t\toutput = <div style={{ overflowX: 'auto', width: '100%' }}>\n\t\t\t\t\t<label>{t('regression-y-on-x', { x, y })}</label>\n\t\t\t\t\t<p>\n\t\t\t\t\t\t<i>{t('grouped-by')} {group}:</i>\n\t\t\t\t\t</p>\n\t\t\t\t\t{objectValues( mapValues( res, ( elem, key ) => {\n\t\t\t\t\t\tconst { yint, slope, xg, yg } = elem;\n\t\t\t\t\t\tconst resAcc = incrsumabs2();\n\t\t\t\t\t\tconst x2Acc = incrsumabs2();\n\t\t\t\t\t\tconst x2mmAcc = incrsumabs2();\n\t\t\t\t\t\tconst cdf = tCDF.factory( yg.length - 2 );\n\t\t\t\t\t\tfor ( let i = 0; i < yg.length; i++ ) {\n\t\t\t\t\t\t\tconst pred = yint + slope * xg[ i ];\n\t\t\t\t\t\t\tresAcc( pred - yg[ i ] );\n\t\t\t\t\t\t\tx2Acc( xg[ i ] );\n\t\t\t\t\t\t\tx2mmAcc( xg[ i ] - xmeans[ key ] );\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst sigma2 = resAcc() / ( yg.length - 2 );\n\t\t\t\t\t\tconst slopeVar = sigma2 / x2mmAcc();\n\t\t\t\t\t\tconst slopeSE = sqrt( slopeVar );\n\t\t\t\t\t\tconst interceptVar = ( (1/yg.length) * sigma2 * x2Acc() ) / x2mmAcc();\n\t\t\t\t\t\tconst interceptSE = sqrt( interceptVar );\n\t\t\t\t\t\tconst tSlope = slope / slopeSE;\n\t\t\t\t\t\tconst tIntercept = yint / interceptSE;\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div key={`group-${key}`} >\n\t\t\t\t\t\t\t\t<label>{key}:</label>\n\t\t\t\t\t\t\t\t<Table bordered size=\"sm\" >\n\t\t\t\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t<th>{t('variable')}</th>\n\t\t\t\t\t\t\t\t\t\t\t<th>{t('coefficient')}</th>\n\t\t\t\t\t\t\t\t\t\t\t<th>{t('std-error')}</th>\n\t\t\t\t\t\t\t\t\t\t\t<th>{T}</th>\n\t\t\t\t\t\t\t\t\t\t\t<th>{t('p-value')}</th>\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t<td>{t('intercept')}</td>\n\t\t\t\t\t\t\t\t\t\t\t<td>{yint.toFixed( 4 )}</td>\n\t\t\t\t\t\t\t\t\t\t\t<td>{interceptSE.toFixed( 4 )}</td>\n\t\t\t\t\t\t\t\t\t\t\t<td>{tIntercept.toFixed( 4 )}</td>\n\t\t\t\t\t\t\t\t\t\t\t<td>{2.0 * (1.0-cdf( abs( tIntercept ) ) ).toFixed( 4 )}</td>\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t<td>{x}</td>\n\t\t\t\t\t\t\t\t\t\t\t<td>{slope.toFixed( 4 )}</td>\n\t\t\t\t\t\t\t\t\t\t\t<td>{slopeSE.toFixed( 4 )}</td>\n\t\t\t\t\t\t\t\t\t\t\t<td>{tSlope.toFixed( 4 )}</td>\n\t\t\t\t\t\t\t\t\t\t\t<td>{2.0 * (1.0-cdf( abs( tSlope ) ) ).toFixed( 4 )}</td>\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t\t</Table>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t}) )}\n\t\t\t\t\t{ this.props.onPredict ? <Tooltip tooltip={t('use-model-to-predict-tooltip')} >\n\t\t\t\t\t\t<Button variant=\"secondary\" size=\"sm\" onClick={() => {\n\t\t\t\t\t\t\tconst xd = data[ x ];\n\t\t\t\t\t\t\tconst yd = data[ y ];\n\t\t\t\t\t\t\tconst yhat = new Float64Array( yd.length );\n\t\t\t\t\t\t\tconst resid = new Float64Array( yd.length );\n\t\t\t\t\t\t\tconst groups = data[ group ];\n\t\t\t\t\t\t\tfor ( let i = 0; i < yhat.length; i++ ) {\n\t\t\t\t\t\t\t\tconst [ yint, slope ] = res[ groups[ i ] ];\n\t\t\t\t\t\t\t\tyhat[ i ] = yint + slope * xd[ i ];\n\t\t\t\t\t\t\t\tresid[ i ] = yd[ i ] - yhat[ i ];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthis.props.onPredict( yhat, resid, COUNTER );\n\t\t\t\t\t\t}}>{this.props.t('use-model-to-predict')}</Button>\n\t\t\t\t\t</Tooltip> : null }\n\t\t\t\t\t{ this.props.onDiagnostics ? <Button variant=\"secondary\" size=\"sm\" style={{ marginLeft: 6 }} onClick={() => {\n\t\t\t\t\t\tconst xd = data[ x ];\n\t\t\t\t\t\tconst yd = data[ y ];\n\t\t\t\t\t\tconst yhat = new Float64Array( yd.length );\n\t\t\t\t\t\tconst resid = new Float64Array( yd.length );\n\t\t\t\t\t\tconst groups = data[ group ];\n\t\t\t\t\t\tfor ( let i = 0; i < yhat.length; i++ ) {\n\t\t\t\t\t\t\tconst [ yint, slope ] = res[ groups[ i ] ];\n\t\t\t\t\t\t\tyhat[ i ] = yint + slope * xd[ i ];\n\t\t\t\t\t\t\tresid[ i ] = yd[ i ] - yhat[ i ];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst qqPlot = {\n\t\t\t\t\t\t\tvariable: t('qq-plot-of-residuals'),\n\t\t\t\t\t\t\ttype: 'Chart',\n\t\t\t\t\t\t\tvalue: <Plotly\n\t\t\t\t\t\t\t\tdraggable\n\t\t\t\t\t\t\t\teditable fit\n\t\t\t\t\t\t\t\t{...generateQQPlotConfig( resid, 'residuals' )}\n\t\t\t\t\t\t\t\tmeta={{ type: 'qqplot of regression residuals', x: xd, y: yd }}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t};\n\t\t\t\t\t\tconst residualPlot = {\n\t\t\t\t\t\t\tvariable: t('residuals-vs-fitted'),\n\t\t\t\t\t\t\ttype: 'Chart',\n\t\t\t\t\t\t\tvalue: <Plotly\n\t\t\t\t\t\t\t\tdraggable editable fit\n\t\t\t\t\t\t\t\tdata={[\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tx: yhat,\n\t\t\t\t\t\t\t\t\t\ty: resid,\n\t\t\t\t\t\t\t\t\t\tmode: 'markers'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\tlayout={{\n\t\t\t\t\t\t\t\t\txaxis: {\n\t\t\t\t\t\t\t\t\t\ttitle: t('fitted-values')\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tyaxis: {\n\t\t\t\t\t\t\t\t\t\ttitle: t('residuals')\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\ttitle: t('residuals-vs-fitted')\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tmeta={{ type: 'regression residuals vs. fitted', x: xd, y: yd }}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t};\n\t\t\t\t\t\tthis.props.onDiagnostics([ qqPlot, residualPlot ]);\n\t\t\t\t\t}} >\n\t\t\t\t\t\t{t('model-diagnostics')}\n\t\t\t\t\t</Button> : null }\n\t\t\t\t</div>;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tconst { yint, slope } = calculateCoefficients( xd, yd );\n\t\t\t\tconst resAcc = incrsumabs2();\n\t\t\t\tconst x2Acc = incrsumabs2();\n\t\t\t\tconst x2mmAcc = incrsumabs2();\n\t\t\t\tconst xmean = mean( xd );\n\t\t\t\tconst cdf = tCDF.factory( yd.length - 2 );\n\t\t\t\tfor ( let i = 0; i < yd.length; i++ ) {\n\t\t\t\t\tconst pred = yint + slope * xd[ i ];\n\t\t\t\t\tresAcc( pred - yd[ i ] );\n\t\t\t\t\tx2Acc( xd[ i ] );\n\t\t\t\t\tx2mmAcc( xd[ i ] - xmean );\n\t\t\t\t}\n\t\t\t\tconst sigma2 = resAcc() / ( yd.length - 2 );\n\t\t\t\tconst slopeVar = sigma2 / x2mmAcc();\n\t\t\t\tconst slopeSE = sqrt( slopeVar );\n\t\t\t\tconst interceptVar = ( (1/yd.length) * sigma2 * x2Acc() ) / x2mmAcc();\n\t\t\t\tconst interceptSE = sqrt( interceptVar );\n\t\t\t\tconst tSlope = slope / slopeSE;\n\t\t\t\tconst tIntercept = yint / interceptSE;\n\t\t\t\toutput = <div style={{ overflowX: 'auto', width: '100%' }} >\n\t\t\t\t\t<label>{t('simple-regression-title', { x, y, counter: COUNTER })}</label>\n\t\t\t\t\t<Table bordered size=\"sm\" >\n\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th>{t('variable')}</th>\n\t\t\t\t\t\t\t\t<th>{t('coefficient')}</th>\n\t\t\t\t\t\t\t\t<th>{t('std-error')}</th>\n\t\t\t\t\t\t\t\t<th>{T}</th>\n\t\t\t\t\t\t\t\t<th>{t('p-value')}</th>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td>{t('intercept')}</td>\n\t\t\t\t\t\t\t\t<td>{yint.toFixed( 4 )}</td>\n\t\t\t\t\t\t\t\t<td>{interceptSE.toFixed( 4 )}</td>\n\t\t\t\t\t\t\t\t<td>{tIntercept.toFixed( 4 )}</td>\n\t\t\t\t\t\t\t\t<td>{2.0 * (1.0-cdf( abs( tIntercept ) ) ).toFixed( 4 )}</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td>{x}</td>\n\t\t\t\t\t\t\t\t<td>{slope.toFixed( 4 )}</td>\n\t\t\t\t\t\t\t\t<td>{slopeSE.toFixed( 4 )}</td>\n\t\t\t\t\t\t\t\t<td>{tSlope.toFixed( 4 )}</td>\n\t\t\t\t\t\t\t\t<td>{2.0 * (1.0-cdf( abs( tSlope ) ) ).toFixed( 4 )}</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</Table>\n\t\t\t\t\t{ this.props.onPredict ? <Tooltip tooltip={t('use-model-to-predict-tooltip')} >\n\t\t\t\t\t\t<Button variant=\"secondary\" size=\"sm\" onClick={() => {\n\t\t\t\t\t\t\tconst xd = data[ x ];\n\t\t\t\t\t\t\tconst yd = data[ y ];\n\t\t\t\t\t\t\tconst yhat = new Array( yd.length );\n\t\t\t\t\t\t\tconst resid = new Array( yd.length );\n\t\t\t\t\t\t\tfor ( let i = 0; i < yhat.length; i++ ) {\n\t\t\t\t\t\t\t\tyhat[ i ] = yint + slope * xd[ i ];\n\t\t\t\t\t\t\t\tresid[ i ] = yd[ i ] - yhat[ i ];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthis.props.onPredict( yhat, resid, COUNTER );\n\t\t\t\t\t\t}}>{this.props.t('use-model-to-predict')}</Button>\n\t\t\t\t\t</Tooltip> : null }\n\t\t\t\t\t{ this.props.onDiagnostics ? <Button variant=\"secondary\" size=\"sm\" style={{ marginLeft: 6 }} onClick={() => {\n\t\t\t\t\t\tconst xd = data[ x ];\n\t\t\t\t\t\tconst yd = data[ y ];\n\t\t\t\t\t\tconst yhat = new Array( yd.length );\n\t\t\t\t\t\tconst resid = new Array( yd.length );\n\t\t\t\t\t\tfor ( let i = 0; i < yhat.length; i++ ) {\n\t\t\t\t\t\t\tyhat[ i ] = yint + slope * xd[ i ];\n\t\t\t\t\t\t\tresid[ i ] = yd[ i ] - yhat[ i ];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst qqPlot = <Plotly\n\t\t\t\t\t\t\tdraggable\n\t\t\t\t\t\t\teditable fit\n\t\t\t\t\t\t\t{...generateQQPlotConfig( resid, 'residuals' )}\n\t\t\t\t\t\t\tmeta={{ type: 'qqplot of regression residuals', x: xd, y: yd }}\n\t\t\t\t\t\t/>;\n\t\t\t\t\t\tconst residualPlot = <Plotly\n\t\t\t\t\t\t\tdraggable editable fit\n\t\t\t\t\t\t\tdata={[\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tx: yhat,\n\t\t\t\t\t\t\t\t\ty: resid,\n\t\t\t\t\t\t\t\t\tmode: 'markers',\n\t\t\t\t\t\t\t\t\ttype: yhat.length > 2000 ? 'scattergl' : 'scatter'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\tlayout={{\n\t\t\t\t\t\t\t\txaxis: {\n\t\t\t\t\t\t\t\t\ttitle: t('fitted-values')\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tyaxis: {\n\t\t\t\t\t\t\t\t\ttitle: t('residuals')\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\ttitle: t('residuals-vs-fitted')\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tmeta={{ type: 'regression residuals vs. fitted', x: xd, y: yd }}\n\t\t\t\t\t\t/>;\n\t\t\t\t\t\tthis.props.onDiagnostics([ qqPlot, residualPlot ]);\n\t\t\t\t\t}} >\n\t\t\t\t\t\t{t('model-diagnostics')}\n\t\t\t\t\t</Button> : null }\n\t\t\t\t</div>;\n\t\t\t}\n\t\t\treturn output;\n\t\t} catch ( _ ) {\n\t\t\treturn <Alert variant=\"danger\">{t('missing-attributes')}</Alert>;\n\t\t}\n\t}\n}\n\n\n// PROPERTIES //\n\nSimpleLinearRegression.defaultProps = {\n\tgroup: null,\n\tomitMissing: false,\n\tonDiagnostics: null,\n\tonPredict: null\n};\n\nSimpleLinearRegression.propTypes = {\n\tdata: PropTypes.object.isRequired,\n\tx: PropTypes.string.isRequired,\n\ty: PropTypes.string.isRequired,\n\tgroup: PropTypes.oneOfType([\n\t\tPropTypes.string,\n\t\tPropTypes.instanceOf( Factor )\n\t]),\n\tomitMissing: PropTypes.bool,\n\tonDiagnostics: PropTypes.func,\n\tonPredict: PropTypes.func\n};\n\n\n// EXPORTS //\n\nexport default withTranslation( [ 'models', 'plotly' ] )( withPropCheck( SimpleLinearRegression ) );\n","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n'use strict';\n/**\n* Compute a sum of squared absolute values incrementally.\n*\n* @module @stdlib/stats/incr/sumabs2\n*\n* @example\n* var incrsumabs2 = require( '@stdlib/stats/incr/sumabs2' );\n*\n* var accumulator = incrsumabs2();\n*\n* var sum = accumulator();\n* // returns null\n*\n* sum = accumulator( 2.0 );\n* // returns 4.0\n*\n* sum = accumulator( -5.0 );\n* // returns 29.0\n*\n* sum = accumulator();\n* // returns 29.0\n*/\n// MODULES //\n\nvar incrsumabs2 = require('./main.js'); // EXPORTS //\n\n\nmodule.exports = incrsumabs2;","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n'use strict'; // MAIN //\n\n/**\n* Returns an accumulator function which incrementally computes a sum of squared absolute values.\n*\n* @returns {Function} accumulator function\n*\n* @example\n* var accumulator = incrsumabs2();\n*\n* var sum = accumulator();\n* // returns null\n*\n* sum = accumulator( 2.0 );\n* // returns 4.0\n*\n* sum = accumulator( -5.0 );\n* // returns 29.0\n*\n* sum = accumulator();\n* // returns 29.0\n*/\n\nfunction incrsumabs2() {\n  var sum = 0.0;\n  var FLG;\n  return accumulator;\n  /**\n  * If provided a value, the accumulator function returns an updated sum. If not provided a value, the accumulator function returns the current sum.\n  *\n  * @private\n  * @param {number} [x] - new value\n  * @returns {(number|null)} sum or null\n  */\n\n  function accumulator(x) {\n    if (arguments.length === 0) {\n      return FLG ? sum : null;\n    }\n\n    FLG = true;\n    sum += x * x;\n    return sum;\n  }\n} // EXPORTS //\n\n\nmodule.exports = incrsumabs2;"],"names":["COUNTER","calculateCoefficients","x","y","xmu","mean","ymu","C1","C2","len","length","i","xdelta","slope","yint","xg","yg","isMissing","isnan","isUndefinedOrNull","isNonMissingNumber","isNumber","extractValues","data","group","omitMissing","xd","yd","groups","xvals","yvals","groupvals","push","SimpleLinearRegression","props","state","output","this","t","xmeans","by","res","by2","style","overflowX","width","objectValues","mapValues","elem","key","resAcc","incrsumabs2","x2Acc","x2mmAcc","cdf","tCDF","sigma2","slopeVar","slopeSE","sqrt","interceptVar","interceptSE","tSlope","tIntercept","bordered","size","toFixed","abs","onPredict","tooltip","variant","onClick","yhat","Float64Array","resid","onDiagnostics","marginLeft","qqPlot","variable","type","value","draggable","editable","fit","generateQQPlotConfig","meta","residualPlot","mode","layout","xaxis","title","yaxis","xmean","counter","Array","_","nextProps","prevState","intercept","Component","defaultProps","withTranslation","withPropCheck","module","exports","FLG","sum","arguments"],"sourceRoot":""}