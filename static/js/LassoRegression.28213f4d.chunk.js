/*! For license information please see LassoRegression.28213f4d.chunk.js.LICENSE.txt */
(self.webpackChunkisle_dashboard=self.webpackChunkisle_dashboard||[]).push([[5474],{85637:function(t,e,r){"use strict";function a(t){throw new TypeError('"'+t+'" is read-only')}r.d(e,{Z:function(){return a}})},92460:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return bt}});var a=r(28991),i=r(6610),n=r(5991),s=r(63349),o=r(10379),u=r(60446),l=r(96156),h=r(41488),c=r(25472),v=r(26881),f=r(33837),d=r.n(f),p=r(70954),m=r.n(p),g=r(37221),b=r.n(g),y=r(48726),w=r.n(y),E=r(33857),Z=r.n(E),x=r(67583),A=r.n(x),T=r(54949),k=r.n(T),q=r(70048),P=r(84972),F=r(83301),V=r(265),N=r.n(V);var S=function(t,e){var r=N()(e);if(!N()(t))throw new TypeError("invalid input argument. Must provide an array. Value: `"+t+"`.");if(!r&&!(0,g.isPrimitive)(e))throw new TypeError("invalid input argument. Second argument must either be an array or number primitive. Value: `"+e+"`.");var a=t.length,i=new Array(a);if(r){if(a!==e.length)throw new Error("invalid input argument. Array to be multiplied must have a length equal to that of the input array.");for(var n=0;n<a;n++)i[n]=t[n]*e[n]}else for(var s=0;s<a;s++)i[s]=t[s]*e;return i},_=r(85637),z=r(75127),C=r(13579),K=r(95130),M=r.n(K);var D=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=(0,z.Z)(t),i=(0,C.Z)(t),n=t.length,s=new Array(n);if(e)if(r)for(var o=0;o<n;o++)s[o]=(t[o]-a)/i;else for(var u=0;u<n;u++)s[u]=t[u]-a;else if(r)for(var l=0;l<n;l++)s[l]=t[l]/i;else t.slice(),(0,_.Z)("out");return M()(s,"mu",a),M()(s,"sigma",i),s},W=r(41993),X=(r(51702),r(10077)),j=r.n(X),B=r(61727),G=r.n(B),H=r(52618),I=r.n(H),J=r(82764),L=r.n(J),O=r(96485),Q=r.n(O),R=r(54743),U=r.n(R),Y=r(59755),$=r.n(Y),tt=r(28135),et=r.n(tt),rt=r(24250),at=r(65734),it=r(55659);var nt=function(t,e,r){var a=N()(e);if(!N()(t))throw new TypeError("invalid input argument. Must provide an array. Value: `"+t+"`.");if(!a&&!(0,g.isPrimitive)(e))throw new TypeError("invalid input argument. Second argument must either be an array or number primitive. Value: `"+e+"`.");var i=t.length,n=new Array(i);if(a){if(i!==e.length)throw new Error("invalid input argument. Array to be divided must have a length equal to that of the input array.");for(var s=0;s<i;s++)n[s]=t[s]/e[s]}else for(var o=0;o<i;o++)n[o]=t[o]/e;return n};var st=function(t,e,r){for(var a=0,i=t.shape[0],n=0;n<i;n++){var s=t.get(n,r),o=e.get(n,r);0!==s&&0!==o&&(a+=s*o)}return a};var ot=function(t,e){for(var r=t.length,a=0,i=0;i<r;i++)a+=t[i]*e[i];return a};var ut=function(t,e){return t>e?t-e:t<-e?t+e:0},lt=j()("isle:lasso"),ht=1e-9,ct=function(t,e){for(var r=new Float64Array(t.shape[0]),a=0;a<r.length;a++)r[a]=t.get(a,e);return r};function vt(t,e,r){var a=this;this.y=t,this.x=e,this.lambda=r,this.N=e.shape[0],this.p=e.shape[1],this.beta=new Float64Array(this.p),this.betast=new Float64Array(this.p),this.active=G()(0,this.beta.length,1),this.nonactive=[],this.presid=U()("float64",new Float64Array(e._buffer.length),e.shape,e.strides,e.offset,e.order),this.init=function(){a.iteration=0,a.iterate()},this.init()}vt.prototype.testKKT=function(){for(var t=this.beta,e=this.N,r=this.x,a=this.y,i=(0,it.Z)(a,(0,rt.Z)(r,t)),n=nt((0,rt.Z)((0,at.Z)(r),i),e),s=0;s<t.length;s++)if(0===t[s]){if(et()(n[s])>this.lambda+ht)return!1}else if(t[s]>0&&n[s]-this.lambda*I()(t[s])>ht)return!1;return!0},vt.prototype.testActiveSet=function(){for(var t=!1,e=this.predict(this.x).residuals,r=0;r<this.nonactive.length;r++){var a=this.nonactive[r],i=ct(this.x,a);et()(ot(i,e))/this.N>this.lambda&&(this.active.push(a),this.nonactive.splice(r,1),t=!0)}return lt("Active set changes..."),t},vt.prototype.iterate=function(){var t=this.N,e=this.p,r=this.x,a=this.y;if(this.iteration+=1,!(this.iteration>1e4)){for(var i=!0,n=0;n<this.active.length;n++){for(var s=this.active[n],o=0;o<t;o++){for(var u=a[o],l=0;l<e;l++)u-=s!==l?r.get(o,l)*this.beta[l]:0;this.presid.set(o,s,u)}this.betast[s]=1/t*st(r,this.presid,s);var h=this.beta[s],c=ut(this.betast[s],this.lambda);et()(c-h)>ht&&(i=!1),this.beta[s]=c}for(var v=this.active.length-1;v>=0;v--){var f=this.active[v];et()(this.beta[f])<ht&&(this.active.splice(v,1),this.nonactive.push(f))}(!1===i||this.testActiveSet())&&this.iterate()}},vt.prototype.predict=function(t){L()(t)&&(t=$()(t));for(var e=(0,rt.Z)(t,this.beta),r=new Array(this.N),a=0;a<this.N;a++)r[a]=this.y[a]-e[a];return{fitted:e,residuals:r}};var ft=function(t,e,r){if(!b())throw new TypeError("invalid input argument. The third argument must be a number primitive. Value: `"+r+"`");if(!N()(e))throw new TypeError("invalid input argument. The second argument must be array-like. Value: `"+e+"`");if(L()(t))t=$()(t);else if(!Q()(t)){throw new TypeError("invalid input argument. The first argument must be a matrix or an array-of-arrays. Value: `"+t+"`")}return new vt(e,t,r)},dt=0;function pt(t,e,r,a){m()(t)||(t=[t]);for(var i=[],n=[],s={},o={},u={},l=e[t[0]].length,h=0;h<t.length;h++)if(d()(r,t[h])){var c=D(e[t[h]]);o[t[h]]=c,n.push(t[h])}else{for(var v=e[t[h]],f=w()(v,Z()),p=t[h].categories||A()(f),g=a?1:0;g<p.length;g++){var b="".concat(t[h],"_").concat(p[g]);n.push(b);var y=f[p[g]]/l;u[b]={mu:y,sigma:k()(y*(1-y))}}s[t[h]]=p}for(var E=0;E<l;E++){var x=[];a&&x.push(1);for(var T=0;T<t.length;T++)if(d()(r,t[T])){var q=o[t[T]];x.push(q[E])}else for(var P=e[t[T]],F=s[t[T]],V=P[E],N=a?1:0;N<F.length;N++){var S=u["".concat(t[T],"_").concat(F[N])],_=S.mu,z=S.sigma;x.push(V===F[N]?(1-_)/z:-_/z)}i.push(x)}return{matrix:i,predictors:n,categoricalStats:u,standardized:o}}var mt=function(t){var e=t.x,r=t.y,a=t.lambda,i=t.data,n=t.quantitative,s=t.intercept;try{var o=i[r];o=D(o,!1,!0);var u=pt(e,i,n,s),l=u.matrix,h=u.predictors,c=u.categoricalStats,v=u.standardized,f=new ft(l,o,a);if(s){for(var p=0,m=1;m<f.beta.length;m++){var g=h[m-1];d()(n,g)?(f.beta[m]*=o.sigma/v[g].sigma,p+=f.beta[m]*v[g].mu):(f.beta[m]*=o.sigma/c[g].sigma,p+=f.beta[m]*c[g].mu)}f.beta[0]=o.mu-p}else for(var b=0;b<f.beta.length;b++){var y=h[b];d()(n,y)?f.beta[b]*=o.sigma/v[y].sigma:f.beta[b]*=o.sigma/c[y].sigma}return{predictors:h,result:f,yvalues:o}}catch(w){return{}}},gt=function(t){(0,o.Z)(r,t);var e=(0,u.Z)(r);function r(t){var n;(0,i.Z)(this,r),n=e.call(this,t),(0,l.Z)((0,s.Z)(n),"handlePredict",(function(){var t=pt(n.props.x,n.props.data,n.props.quantitative,n.props.intercept).matrix,e=n.state.result.predict(t),r=e.fitted,a=e.residuals;r=S(r,n.state.yvalues.sigma),a=S(a,-n.state.yvalues.sigma),n.props.onPredict(r,a,dt)})),dt+=1;var o=t.x,u=t.y,h=t.lambda,c=t.data,v=t.quantitative,f=t.intercept;return n.state=(0,a.Z)((0,a.Z)({},mt({x:o,y:u,lambda:h,data:c,quantitative:v,intercept:f})),t),n}return(0,n.Z)(r,[{key:"render",value:function(){var t=this.props,e=t.y,r=t.intercept,a=t.lambda,i=t.onPredict,n=t.t,s=this.state,o=s.result,u=s.predictors;return o?(0,g.isPrimitive)(a)?h.createElement("div",{style:{overflowX:"auto",width:"100%"}},h.createElement("span",{className:"title"},n("lasso-title",{y:e,lambda:a.toFixed(4),counter:dt})),function(t,e,r,a){return h.createElement(F.Z,{bordered:!0,size:"sm"},h.createElement("thead",null,h.createElement("tr",null,h.createElement("th",null,a("predictor")),h.createElement("th",null,a("coefficient")))),h.createElement("tbody",null,e?h.createElement("tr",null,h.createElement("th",null,a("intercept")),h.createElement("td",null,r.beta[0].toFixed(6))):null,t.map((function(t,a){return h.createElement("tr",{key:a},h.createElement("th",null,t),h.createElement("td",null,r.beta[a+Number(e)].toFixed(6)))}))))}(u,r,o,n),h.createElement("p",null,o.testKKT()?n("kkt-satisfied"):n("kkt-not-satisfied")),i?h.createElement(P.Z,{tooltip:n("use-model-to-predict-tooltip")},h.createElement(q.Z,{variant:"secondary",size:"sm",onClick:this.handlePredict},this.props.t("use-model-to-predict"))):null):h.createElement(v.Z,{variant:"danger"},n("lambda-not-number")):h.createElement(v.Z,{variant:"danger"},n("missing-attributes"))}}],[{key:"getDerivedStateFromProps",value:function(t,e){if(t.data!==e.data||t.quantitative!==e.quantitative||t.x!==e.x||t.y!==e.y||t.intercept!==e.intercept||t.lambda!==e.lambda){var r=t.x,i=t.y,n=t.lambda,s=t.data,o=t.quantitative,u=t.intercept;return(0,a.Z)((0,a.Z)({},mt({x:r,y:i,lambda:n,data:s,quantitative:o,intercept:u})),t)}return null}}]),r}(h.Component);gt.defaultProps={lambda:.001,intercept:!0,onPredict:function(){}};var bt=(0,c.Z)("models")((0,W.W)(gt))},24250:function(t,e){"use strict";e.Z=function(t,e){for(var r=t.shape[0],a=t.shape[1],i=new Float64Array(r),n=0;n<r;n++){for(var s=0,o=0;o<a;o++)s+=t.get(n,o)*e[o];i[n]=s}return i}},55659:function(t,e,r){"use strict";var a=r(265),i=r.n(a),n=r(37221);e.Z=function(t,e){var r=i()(e);if(!i()(t))throw new TypeError("invalid input argument. Must provide an array. Value: `"+t+"`.");if(!r&&!(0,n.isPrimitive)(e))throw new TypeError("invalid input argument. Second argument must either be an array or number primitive. Value: `"+e+"`.");var a=t.length,s=new Array(a);if(r){if(a!==e.length)throw new Error("invalid input argument. Array to be added must have a length equal to that of the input array.");for(var o=0;o<a;o++)s[o]=t[o]-e[o]}else for(var u=0;u<a;u++)s[u]=t[u]-e;return s}},65734:function(t,e,r){"use strict";var a=r(54743),i=r.n(a);e.Z=function(t){var e=[t.shape[1],t.shape[0]],r=[t.strides[1],t.strides[0]],a=t.offset,n=t.order;return i()("float64",t._buffer,e,r,a,n)}},82764:function(t,e,r){"use strict";var a=r(60116);t.exports=a},60116:function(t,e,r){"use strict";var a=r(83936)(r(70954));t.exports=a},95130:function(t,e,r){"use strict";var a=r(31144);t.exports=a},31144:function(t,e,r){"use strict";var a=r(45591);t.exports=function(t,e,r){a(t,e,{configurable:!0,enumerable:!1,writable:!0,value:r})}}}]);
//# sourceMappingURL=LassoRegression.28213f4d.chunk.js.map