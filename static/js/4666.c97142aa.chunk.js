/*! For license information please see 4666.c97142aa.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkisle_dashboard=self.webpackChunkisle_dashboard||[]).push([[4666],{7861:function(e,t,a){a.r(t);var r=a(38603),n=a(91532),o=a.n(n),s=a(58651),l=a(53697),i=a.n(l),c=a(12630),d=a(12908),m=a(69977),p=a(88928),u=a.n(p),h=a(37933),f=a(31617),g=a(76470),v=a(34668),D=a(27925),b=a(33547),x=a(65307),C=a(76282);function y(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Z extends r.Component{constructor(e){super(e),y(this,"createColumns",(()=>{const{t:e}=this.props;let t=0;const a=this.props.admin.cohorts;let n=u(),o=0;for(let r=0;r<a.length;r++){const e=a[r].members.length;e&&e>t&&(t=e),a[r].startDate>o&&(o=a[r].startDate),a[r].endDate>o&&(o=a[r].endDate),a[r].startDate<n&&(n=a[r].startDate),a[r].endDate<n&&(n=a[r].endDate)}return o=i()(o),n=i()(n),[(0,C.Z)({Header:e("common:title"),id:"title",accessor:"title",maxWidth:200,style:{marginTop:"8px",color:"darkslategrey"}}),(0,C.Z)({Header:e("common:course"),id:"namespace",accessor:"namespace.title",maxWidth:200,style:{marginTop:"8px",color:"darkslategrey"}}),(0,C.Z)({Header:e("namespace:email-filter"),id:"emailFilter",accessor:"emailFilter",maxWidth:200,style:{marginTop:"8px",color:"darkslategrey"}}),(0,D.Z)({Header:e("enrollment"),accessor:"private",trueLabel:e("open-enrollment"),falseLabel:e("manual-enrollment"),printLabels:!0}),(0,x.Z)({Header:e("start-date"),accessor:"startDate",startDate:n,endDate:o,t:e}),(0,x.Z)({Header:e("end-date"),accessor:"endDate",startDate:n,endDate:o,t:e}),(0,b.Z)({Header:e("common:number-of-students"),accessor:"members.length",style:{marginTop:"2px",color:"darkslategrey"},maxWidth:150,minValue:0,maxValue:t}),{Header:e("common:actions"),Cell:t=>r.createElement("div",null,r.createElement(d.Z,{placement:"bottom",overlay:r.createElement(m.Z,{id:"delete_cohort"},e("namespace:delete-cohort"))},r.createElement(c.Z,{variant:"outline-secondary",style:{marginLeft:8},onClick:this.askToDeleteSelectedCohortFactory(t.row._original),"aria-label":e("namespace:delete-cohort")},r.createElement("div",{className:"fa fa-trash-alt"})))),resizable:!1,filterable:!1,sortable:!1}]})),y(this,"askToDeleteSelectedCohortFactory",(e=>()=>{this.setState({showDeleteModal:!this.state.showDeleteModal,selectedCohort:e})})),y(this,"deleteSelectedCohort",(()=>{this.setState({showDeleteModal:!1},(async()=>{await this.props.deleteCohort(this.state.selectedCohort._id),this.props.getAllCohorts()}))})),y(this,"toggleDeleteModal",(()=>{this.setState({showDeleteModal:!this.state.showDeleteModal})})),y(this,"toggleExplorer",(()=>{this.setState({showExplorer:!this.state.showExplorer})})),this.state={selectedCohort:null,showDeleteModal:!1,columns:this.createColumns()}}componentDidMount(){this.props.getAllCohorts()}componentDidUpdate(e){e.admin.cohorts!==this.props.admin.cohorts&&this.setState({columns:this.createColumns()})}render(){const{t:e}=this.props;if(this.state.showExplorer){const t=this.props.admin.cohorts;let a=[];for(let e=0;e<t.length;e++){const r=t[e],n={};n.title=r.title,n.members=r.members.length,n.namespace=r.namespace?r.namespace.title:null,n.private=r.private,n.emailFilter=r.emailFilter?r.emailFilter:null,n.startDate=r.startDate,n.endDate=r.endDate,a.push(n)}return a=(0,g.Z)(a),r.createElement(v.Z,{title:e("explorer-cohorts-title"),data:a,categorical:["title","namespace","private","startDate","endDate","emailFilter"],quantitative:["members"],close:this.toggleExplorer})}return r.createElement(r.Fragment,null,r.createElement(f.Z,{data:this.props.admin.cohorts,columns:this.state.columns,onButtonClick:this.toggleExplorer,t:this.props.t}),this.state.showDeleteModal?r.createElement(h.Z,{title:e("namespace:delete-cohort"),message:r.createElement("span",null,e("namespace:delete-cohort-confirm"),r.createElement("span",{style:{color:"red"}},this.state.selectedCohort.title)),close:this.toggleDeleteModal,show:this.state.showDeleteModal,onConfirm:this.deleteSelectedCohort}):null)}}Z.propTypes={admin:o().object.isRequired,deleteCohort:o().func.isRequired,getAllCohorts:o().func.isRequired,t:o().func.isRequired},t.default=(0,s.Z)(["admin","namespace","common"])(Z)},37933:function(e,t,a){var r=a(38603),n=a(91532),o=a.n(n),s=a(58651),l=a(12630),i=a(14704);const c=e=>r.createElement(i.Z,{show:e.show,onHide:e.close},r.createElement(i.Z.Header,null,r.createElement(i.Z.Title,{as:"h3"},e.title)),r.createElement(i.Z.Body,null,e.message),r.createElement(i.Z.Footer,null,r.createElement(l.Z,{onClick:e.close},e.t("cancel")),r.createElement(l.Z,{variant:"danger",onClick:e.onConfirm},e.t("confirm"))));c.propTypes={close:o().func,message:o().node,onConfirm:o().func,show:o().bool,title:o().string},c.defaultProps={close(){},message:"",onConfirm(){},show:!1,title:""},t.Z=(0,s.Z)(["common"])(c)},31617:function(e,t,a){a.d(t,{Z:function(){return u}});var r=a(38603),n=a(91532),o=a.n(n),s=a(90037),l=a(12630),i=a(60805),c=a(12908),d=a(69977);a(3100);function m(){return m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},m.apply(this,arguments)}class p extends r.Component{constructor(...e){var t,a,r;super(...e),r=()=>({id:this.props.id||"dashboard-table"}),(a="getProps")in(t=this)?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r}render(){const{t:e}=this.props;return r.createElement(r.Fragment,null,r.createElement(s.Z,m({},this.props,{filterable:!0,className:`dashboard-table ${this.props.className}`,data:this.props.data,columns:this.props.columns,previousText:e("common:previous"),nextText:e("common:next"),loadingText:e("common:loading"),noDataText:e("common:no-rows-found"),pageText:e("common:page"),ofText:e("common:of"),rowsText:e("common:rows"),ref:e=>{this.table=e},getProps:this.getProps})),this.props.onButtonClick?r.createElement(i.Z,{vertical:!0,style:{float:"right",marginRight:-9}},r.createElement(c.Z,{placement:"left",overlay:r.createElement(d.Z,{id:"explorer-tooltip"},e("common:data-explorer"))},r.createElement(l.Z,{"aria-label":e("common:data-explorer"),variant:"primary",style:{marginBottom:8},onClick:this.props.onButtonClick},r.createElement("i",{className:"fas fa-chart-bar"})))):null)}}p.propTypes={className:o().string,columns:o().array.isRequired,data:o().oneOfType([o().object,o().array]).isRequired,onButtonClick:o().func.isRequired,t:o().func},p.defaultProps={className:"",t(){}};var u=p},34668:function(e,t,a){const r=(0,a(221).Z)((()=>Promise.all([a.e(8504),a.e(6351)]).then(a.bind(a,27248))));t.Z=r},27925:function(e,t,a){var r=a(38603);t.Z=function({Header:e,accessor:t,trueLabel:a,falseLabel:n,printLabels:o=!1,maxWidth:s=150}){let l,i;return o?(l=e=>!0===e.value?a:!1===e.value?n:null,i={marginTop:"8px",color:"darkslategrey"}):(l=e=>e.value?r.createElement("i",{className:"far fa-check-square"}):null,i={marginTop:"2px",color:"darkslategrey",fontSize:24,textAlign:"center"}),{Header:e,accessor:t,style:i,Cell:l,filterMethod:(e,t)=>{if("all"===e.value)return!0;const a=e.pivotId||e.id;return void 0===t[a]||String(t[a])===e.value},Filter:({filter:e,onChange:t})=>{const o=e=>{const a=e.target.value;t(a)};let s;return s=e?e.value:"all",r.createElement("select",{onBlur:o,onChange:o,style:{width:"100%",backgroundColor:"ghostwhite"},value:s},r.createElement("option",{value:"all"},"Show All"),r.createElement("option",{value:!0},a),r.createElement("option",{value:!1},n))},maxWidth:s}}},65307:function(e,t,a){var r=a(38603),n=a(52089),o=a(12908),s=a(5610),l=a(12630);a(77511);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class c extends r.Component{constructor(e){super(e),i(this,"handleDatesChange",(({startDate:e,endDate:t})=>{this.setState({startDate:e,endDate:t},(()=>{this.props.onDatesChange(this.state)}))})),i(this,"handleReset",(()=>{this.setState({startDate:this.props.minDate,endDate:this.props.maxDate},(()=>{this.props.onDatesChange(this.state)}))})),this.state={startDate:e.startDate,endDate:e.endDate}}componentDidUpdate(e){this.props.startDate===e.startDate&&this.props.endDate===e.endDate||this.setState({startDate:this.props.startDate,endDate:this.props.endDate})}render(){return r.createElement(r.Fragment,null,r.createElement(n.DateRangePicker,{startDate:this.state.startDate,endDate:this.state.endDate,startDateId:"start_date_input",endDateId:"end_date_input",onDatesChange:this.handleDatesChange,focusedInput:this.state.focusedInput,onFocusChange:e=>this.setState({focusedInput:e}),isOutsideRange:()=>!1}),r.createElement(l.Z,{"aria-label":this.props.t("common:close"),variant:"warning",onClick:this.handleReset,style:{paddingTop:8,paddingLeft:16,paddingRight:16,paddingBottom:8,fontSize:20}},"x"))}}const d=e=>new Date(e.value).toLocaleString();t.Z=function({Header:e,accessor:t,Cell:a,style:n,startDate:i,endDate:m,t:p,maxWidth:u=150}){return{Header:e,accessor:t,style:n,Cell:a||d,filterMethod:(e,t)=>{if(!e.value)return!0;const{startDate:a,endDate:r}=e.value,n=t[e.pivotId||e.id].getTime();return a&&r?n>=a.valueOf()&&n<=r.valueOf():a?n>=a.valueOf():!r||n<=r.valueOf()},Filter:({filter:e,onChange:t})=>{const a=e&&e.value||{},n=r.createElement(s.Z,{id:"popover-data",style:{maxWidth:400}},r.createElement(s.Z.Title,{as:"h3"},p("common:dates")),r.createElement(s.Z.Content,{style:{backgroundColor:"grey"}},r.createElement(c,{startDate:a.startDate||i,minDate:i,maxDate:m,endDate:a.endDate||m,onDatesChange:({startDate:e,endDate:a})=>{t({startDate:e,endDate:a})},t:p})));return r.createElement(o.Z,{trigger:"click",placement:"right",overlay:n},r.createElement(l.Z,{"aria-label":p("common:toggle-calendar"),size:"sm",style:{float:"left",marginLeft:6},variant:"secondary"},r.createElement("i",{className:"far fa-calendar-alt"})))},maxWidth:u}}},33547:function(e,t,a){var r=a(38603),n=a(94688),o=a.n(n),s=a(83087),l=a.n(s),i=a(64817),c=a.n(i),d=a(21598),m=a.n(d);a(5541);const p=(e,t)=>{const a=t[e.pivotId||e.id];return a>=e.value.min&&a<=e.value.max},u=e=>m()(e,-2);t.Z=function({Header:e,accessor:t,Cell:a,minValue:n=0,maxValue:s=1,maxWidth:i=150,filterMethod:d,formatLabel:h}){const f=`header-${c()(l()(e," ","-"))}`;return{Header:r.createElement("span",{id:f},e),accessor:t,Cell:a||(e=>e.value?`${m()(e.value,-3)}`:"NA"),filterMethod:d||p,Filter:({filter:e,onChange:t})=>{n===s&&(s=n+=1);const a={max:s,min:n};return r.createElement("div",{style:{paddingLeft:"4px",paddingRight:"4px",paddingTop:"8px"}},r.createElement(o(),{ariaLabelledby:f,ariaControls:"dashboard-table",allowSameValues:!0,maxValue:s,minValue:n,step:.1,value:e?e.value:a,onChange:e=>{t(e)},formatLabel:h||u}))},maxWidth:i}}},76282:function(e,t,a){var r=a(38603),n=a(87078),o=a(72868);t.Z=function({id:e,Header:t,Cell:a,accessor:s,maxWidth:l=150,minWidth:i,filterMethod:c}){i>l&&(l=i);const d={id:e,Header:t,accessor:s,Cell:a,filterMethod:c||o.Z,Filter:({filter:e,onChange:a})=>r.createElement(n.Z,{"aria-label":t,autoComplete:"none",onChange:e=>{a(e.target.value)}})};return l&&(d.maxWidth=l),i&&(d.minWidth=i),d}},72868:function(e,t,a){var r=a(89506),n=a.n(r),o=a(64817),s=a.n(o);t.Z=(e,t)=>{const a=t[e.id]||"";return n()(s()(a),s()(e.value))}},47259:function(e){e.exports=9007199254740991},77025:function(e,t,a){var r=a(46788);e.exports=r},46788:function(e,t,a){var r=a(88928),n=a(24469);e.exports=function(e){return e===r||e===n}},48207:function(e,t,a){var r=a(42560);e.exports=r},42560:function(e){e.exports=function(e){return Math.abs(e)}},43273:function(e,t,a){var r=a(87462),n=a(63366),o=a(68761),s=a.n(o),l=a(38603),i=a(91532),c=a.n(i),d=["as","className","type","tooltip"],m={type:c().string,tooltip:c().bool,as:c().elementType},p=l.forwardRef((function(e,t){var a=e.as,o=void 0===a?"div":a,i=e.className,c=e.type,m=void 0===c?"valid":c,p=e.tooltip,u=void 0!==p&&p,h=(0,n.Z)(e,d);return l.createElement(o,(0,r.Z)({},h,{ref:t,className:s()(i,m+"-"+(u?"tooltip":"feedback"))}))}));p.displayName="Feedback",p.propTypes=m,t.Z=p},53913:function(e,t,a){var r=a(38603).createContext({controlId:void 0});t.Z=r},87078:function(e,t,a){var r=a(87462),n=a(63366),o=a(68761),s=a.n(o),l=(a(61009),a(38603)),i=(a(14180),a(43273)),c=a(53913),d=a(54447),m=["bsPrefix","bsCustomPrefix","type","size","htmlSize","id","className","isValid","isInvalid","plaintext","readOnly","custom","as"],p=l.forwardRef((function(e,t){var a,o,i=e.bsPrefix,p=e.bsCustomPrefix,u=e.type,h=e.size,f=e.htmlSize,g=e.id,v=e.className,D=e.isValid,b=void 0!==D&&D,x=e.isInvalid,C=void 0!==x&&x,y=e.plaintext,Z=e.readOnly,E=e.custom,w=e.as,k=void 0===w?"input":w,T=(0,n.Z)(e,m),N=(0,l.useContext)(c.Z).controlId,S=E?[p,"custom"]:[i,"form-control"],F=S[0],P=S[1];if(i=(0,d.vE)(F,P),y)(o={})[i+"-plaintext"]=!0,a=o;else if("file"===u){var H;(H={})[i+"-file"]=!0,a=H}else if("range"===u){var M;(M={})[i+"-range"]=!0,a=M}else if("select"===k&&E){var R;(R={})[i+"-select"]=!0,R[i+"-select-"+h]=h,a=R}else{var O;(O={})[i]=!0,O[i+"-"+h]=h,a=O}return l.createElement(k,(0,r.Z)({},T,{type:u,size:f,ref:t,readOnly:Z,id:g||N,className:s()(v,a,b&&"is-valid",C&&"is-invalid")}))}));p.displayName="FormControl",t.Z=Object.assign(p,{Feedback:i.Z})},51906:function(e,t,a){a.d(t,{Z:function(){return m}});var r=a(87462),n=a(63366),o=a(68761),s=a.n(o),l=a(62489),i=a(38603),c=a(54447),d=["className","bsPrefix","as"];function m(e,t){var a,o=void 0===t?{}:t,m=o.displayName,p=void 0===m?(a=e)[0].toUpperCase()+(0,l.Z)(a).slice(1):m,u=o.Component,h=o.defaultProps,f=i.forwardRef((function(t,a){var o=t.className,l=t.bsPrefix,m=t.as,p=void 0===m?u||"div":m,h=(0,n.Z)(t,d),f=(0,c.vE)(l,e);return i.createElement(p,(0,r.Z)({ref:a,className:s()(o,f)},h))}));return f.defaultProps=h,f.displayName=p,f}},5541:function(){}}]);
//# sourceMappingURL=4666.c97142aa.chunk.js.map