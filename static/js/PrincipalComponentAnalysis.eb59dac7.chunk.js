"use strict";(self.webpackChunkisle_dashboard=self.webpackChunkisle_dashboard||[]).push([[6588],{39346:function(t,e,r){r.r(e),r.d(e,{default:function(){return G}});var a=r(1413),s=r(15671),n=r(43144),o=r(60136),i=r(29388),u=r(41488),f=r(3840),h=r(89472),l=r(27853),c=r(84531),g=r(61502),v=r(78932),m=r(56362),d=function(t){(0,v.Z)(r,t);var e=(0,m.Z)(r);function r(t){return(0,l.Z)(this,r),e.call(this,t,t.columns,t.rows)}return(0,c.Z)(r,[{key:"set",value:function(t,e,r){return this.matrix.set(e,t,r),this}},{key:"get",value:function(t,e){return this.matrix.get(e,t)}}]),r}(function(t){(0,v.Z)(r,t);var e=(0,m.Z)(r);function r(t,a,s){var n;return(0,l.Z)(this,r),(n=e.call(this)).matrix=t,n.rows=a,n.columns=s,n}return r}(g.X)),b=r(25554),p=r(57706),M=r(45016),y=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,l.Z)(this,t);var a=r.assumeSymmetric,s=void 0!==a&&a;if(!(e=p.Z.checkMatrix(e)).isSquare())throw new Error("Matrix is not a square matrix");if(e.isEmpty())throw new Error("Matrix must be non-empty");var n,o,i=e.columns,u=new g.Z(i,i),f=new Float64Array(i),h=new Float64Array(i),c=e;if(!!s||e.isSymmetric()){for(n=0;n<i;n++)for(o=0;o<i;o++)u.set(n,o,c.get(n,o));w(i,h,f,u),Z(i,h,f,u)}else{var v=new g.Z(i,i),m=new Float64Array(i);for(o=0;o<i;o++)for(n=0;n<i;n++)v.set(n,o,c.get(n,o));k(i,v,m,u),x(i,h,f,u,v)}this.n=i,this.e=h,this.d=f,this.V=u}return(0,c.Z)(t,[{key:"realEigenvalues",get:function(){return Array.from(this.d)}},{key:"imaginaryEigenvalues",get:function(){return Array.from(this.e)}},{key:"eigenvectorMatrix",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){var t,e,r=this.n,a=this.e,s=this.d,n=new g.Z(r,r);for(t=0;t<r;t++){for(e=0;e<r;e++)n.set(t,e,0);n.set(t,t,s[t]),a[t]>0?n.set(t,t+1,a[t]):a[t]<0&&n.set(t,t-1,a[t])}return n}}]),t}();function w(t,e,r,a){var s,n,o,i,u,f,h,l;for(u=0;u<t;u++)r[u]=a.get(t-1,u);for(i=t-1;i>0;i--){for(l=0,o=0,f=0;f<i;f++)l+=Math.abs(r[f]);if(0===l)for(e[i]=r[i-1],u=0;u<i;u++)r[u]=a.get(i-1,u),a.set(i,u,0),a.set(u,i,0);else{for(f=0;f<i;f++)r[f]/=l,o+=r[f]*r[f];for(s=r[i-1],n=Math.sqrt(o),s>0&&(n=-n),e[i]=l*n,o-=s*n,r[i-1]=s-n,u=0;u<i;u++)e[u]=0;for(u=0;u<i;u++){for(s=r[u],a.set(u,i,s),n=e[u]+a.get(u,u)*s,f=u+1;f<=i-1;f++)n+=a.get(f,u)*r[f],e[f]+=a.get(f,u)*s;e[u]=n}for(s=0,u=0;u<i;u++)e[u]/=o,s+=e[u]*r[u];for(h=s/(o+o),u=0;u<i;u++)e[u]-=h*r[u];for(u=0;u<i;u++){for(s=r[u],n=e[u],f=u;f<=i-1;f++)a.set(f,u,a.get(f,u)-(s*e[f]+n*r[f]));r[u]=a.get(i-1,u),a.set(i,u,0)}}r[i]=o}for(i=0;i<t-1;i++){if(a.set(t-1,i,a.get(i,i)),a.set(i,i,1),0!==(o=r[i+1])){for(f=0;f<=i;f++)r[f]=a.get(f,i+1)/o;for(u=0;u<=i;u++){for(n=0,f=0;f<=i;f++)n+=a.get(f,i+1)*a.get(f,u);for(f=0;f<=i;f++)a.set(f,u,a.get(f,u)-n*r[f])}}for(f=0;f<=i;f++)a.set(f,i+1,0)}for(u=0;u<t;u++)r[u]=a.get(t-1,u),a.set(t-1,u,0);a.set(t-1,t-1,1),e[0]=0}function Z(t,e,r,a){var s,n,o,i,u,f,h,l,c,g,v,m,d,b,p,y;for(o=1;o<t;o++)e[o-1]=e[o];e[t-1]=0;var w=0,Z=0,k=Number.EPSILON;for(f=0;f<t;f++){for(Z=Math.max(Z,Math.abs(r[f])+Math.abs(e[f])),h=f;h<t&&!(Math.abs(e[h])<=k*Z);)h++;if(h>f){0;do{for(1,s=r[f],l=(r[f+1]-s)/(2*e[f]),c=(0,M.G)(l,1),l<0&&(c=-c),r[f]=e[f]/(l+c),r[f+1]=e[f]*(l+c),g=r[f+1],n=s-r[f],o=f+2;o<t;o++)r[o]-=n;for(w+=n,l=r[h],m=v=1,d=v,b=e[f+1],p=0,y=0,o=h-1;o>=f;o--)for(d=m,m=v,y=p,s=v*e[o],n=v*l,c=(0,M.G)(l,e[o]),e[o+1]=p*c,p=e[o]/c,l=(v=l/c)*r[o]-p*s,r[o+1]=n+p*(v*s+p*r[o]),u=0;u<t;u++)n=a.get(u,o+1),a.set(u,o+1,p*a.get(u,o)+v*n),a.set(u,o,v*a.get(u,o)-p*n);l=-p*y*d*b*e[f]/g,e[f]=p*l,r[f]=v*l}while(Math.abs(e[f])>k*Z)}r[f]=r[f]+w,e[f]=0}for(o=0;o<t-1;o++){for(u=o,l=r[o],i=o+1;i<t;i++)r[i]<l&&(u=i,l=r[i]);if(u!==o)for(r[u]=r[o],r[o]=l,i=0;i<t;i++)l=a.get(i,o),a.set(i,o,a.get(i,u)),a.set(i,u,l)}}function k(t,e,r,a){var s,n,o,i,u,f,h,l=t-1;for(f=1;f<=l-1;f++){for(h=0,i=f;i<=l;i++)h+=Math.abs(e.get(i,f-1));if(0!==h){for(o=0,i=l;i>=f;i--)r[i]=e.get(i,f-1)/h,o+=r[i]*r[i];for(n=Math.sqrt(o),r[f]>0&&(n=-n),o-=r[f]*n,r[f]=r[f]-n,u=f;u<t;u++){for(s=0,i=l;i>=f;i--)s+=r[i]*e.get(i,u);for(s/=o,i=f;i<=l;i++)e.set(i,u,e.get(i,u)-s*r[i])}for(i=0;i<=l;i++){for(s=0,u=l;u>=f;u--)s+=r[u]*e.get(i,u);for(s/=o,u=f;u<=l;u++)e.set(i,u,e.get(i,u)-s*r[u])}r[f]=h*r[f],e.set(f,f-1,h*n)}}for(i=0;i<t;i++)for(u=0;u<t;u++)a.set(i,u,i===u?1:0);for(f=l-1;f>=1;f--)if(0!==e.get(f,f-1)){for(i=f+1;i<=l;i++)r[i]=e.get(i,f-1);for(u=f;u<=l;u++){for(n=0,i=f;i<=l;i++)n+=r[i]*a.get(i,u);for(n=n/r[f]/e.get(f,f-1),i=f;i<=l;i++)a.set(i,u,a.get(i,u)+n*r[i])}}}function x(t,e,r,a,s){var n,o,i,u,f,h,l,c,g,v,m,d,b,p,M,y=t-1,w=t-1,Z=Number.EPSILON,k=0,x=0,E=0,V=0,C=0,A=0,N=0,U=0;for(n=0;n<t;n++)for((n<0||n>w)&&(r[n]=s.get(n,n),e[n]=0),o=Math.max(n-1,0);o<t;o++)x+=Math.abs(s.get(n,o));for(;y>=0;){for(u=y;u>0&&(0===(A=Math.abs(s.get(u-1,u-1))+Math.abs(s.get(u,u)))&&(A=x),!(Math.abs(s.get(u,u-1))<Z*A));)u--;if(u===y)s.set(y,y,s.get(y,y)+k),r[y]=s.get(y,y),e[y]=0,y--,U=0;else if(u===y-1){if(l=s.get(y,y-1)*s.get(y-1,y),V=(E=(s.get(y-1,y-1)-s.get(y,y))/2)*E+l,N=Math.sqrt(Math.abs(V)),s.set(y,y,s.get(y,y)+k),s.set(y-1,y-1,s.get(y-1,y-1)+k),c=s.get(y,y),V>=0){for(N=E>=0?E+N:E-N,r[y-1]=c+N,r[y]=r[y-1],0!==N&&(r[y]=c-l/N),e[y-1]=0,e[y]=0,E=(c=s.get(y,y-1))/(A=Math.abs(c)+Math.abs(N)),V=N/A,E/=C=Math.sqrt(E*E+V*V),V/=C,o=y-1;o<t;o++)N=s.get(y-1,o),s.set(y-1,o,V*N+E*s.get(y,o)),s.set(y,o,V*s.get(y,o)-E*N);for(n=0;n<=y;n++)N=s.get(n,y-1),s.set(n,y-1,V*N+E*s.get(n,y)),s.set(n,y,V*s.get(n,y)-E*N);for(n=0;n<=w;n++)N=a.get(n,y-1),a.set(n,y-1,V*N+E*a.get(n,y)),a.set(n,y,V*a.get(n,y)-E*N)}else r[y-1]=c+E,r[y]=c+E,e[y-1]=N,e[y]=-N;y-=2,U=0}else{if(c=s.get(y,y),g=0,l=0,u<y&&(g=s.get(y-1,y-1),l=s.get(y,y-1)*s.get(y-1,y)),10===U){for(k+=c,n=0;n<=y;n++)s.set(n,n,s.get(n,n)-c);c=g=.75*(A=Math.abs(s.get(y,y-1))+Math.abs(s.get(y-1,y-2))),l=-.4375*A*A}if(30===U&&(A=(A=(g-c)/2)*A+l)>0){for(A=Math.sqrt(A),g<c&&(A=-A),A=c-l/((g-c)/2+A),n=0;n<=y;n++)s.set(n,n,s.get(n,n)-A);k+=A,c=g=l=.964}for(U+=1,f=y-2;f>=u&&(E=((C=c-(N=s.get(f,f)))*(A=g-N)-l)/s.get(f+1,f)+s.get(f,f+1),V=s.get(f+1,f+1)-N-C-A,C=s.get(f+2,f+1),E/=A=Math.abs(E)+Math.abs(V)+Math.abs(C),V/=A,C/=A,f!==u)&&!(Math.abs(s.get(f,f-1))*(Math.abs(V)+Math.abs(C))<Z*(Math.abs(E)*(Math.abs(s.get(f-1,f-1))+Math.abs(N)+Math.abs(s.get(f+1,f+1)))));)f--;for(n=f+2;n<=y;n++)s.set(n,n-2,0),n>f+2&&s.set(n,n-3,0);for(i=f;i<=y-1&&(p=i!==y-1,i!==f&&(E=s.get(i,i-1),V=s.get(i+1,i-1),C=p?s.get(i+2,i-1):0,0!==(c=Math.abs(E)+Math.abs(V)+Math.abs(C))&&(E/=c,V/=c,C/=c)),0!==c);i++)if(A=Math.sqrt(E*E+V*V+C*C),E<0&&(A=-A),0!==A){for(i!==f?s.set(i,i-1,-A*c):u!==f&&s.set(i,i-1,-s.get(i,i-1)),c=(E+=A)/A,g=V/A,N=C/A,V/=E,C/=E,o=i;o<t;o++)E=s.get(i,o)+V*s.get(i+1,o),p&&(E+=C*s.get(i+2,o),s.set(i+2,o,s.get(i+2,o)-E*N)),s.set(i,o,s.get(i,o)-E*c),s.set(i+1,o,s.get(i+1,o)-E*g);for(n=0;n<=Math.min(y,i+3);n++)E=c*s.get(n,i)+g*s.get(n,i+1),p&&(E+=N*s.get(n,i+2),s.set(n,i+2,s.get(n,i+2)-E*C)),s.set(n,i,s.get(n,i)-E),s.set(n,i+1,s.get(n,i+1)-E*V);for(n=0;n<=w;n++)E=c*a.get(n,i)+g*a.get(n,i+1),p&&(E+=N*a.get(n,i+2),a.set(n,i+2,a.get(n,i+2)-E*C)),a.set(n,i,a.get(n,i)-E),a.set(n,i+1,a.get(n,i+1)-E*V)}}}if(0!==x){for(y=t-1;y>=0;y--)if(E=r[y],0===(V=e[y]))for(u=y,s.set(y,y,1),n=y-1;n>=0;n--){for(l=s.get(n,n)-E,C=0,o=u;o<=y;o++)C+=s.get(n,o)*s.get(o,y);if(e[n]<0)N=l,A=C;else if(u=n,0===e[n]?s.set(n,y,0!==l?-C/l:-C/(Z*x)):(c=s.get(n,n+1),g=s.get(n+1,n),h=(c*A-N*C)/(V=(r[n]-E)*(r[n]-E)+e[n]*e[n]),s.set(n,y,h),s.set(n+1,y,Math.abs(c)>Math.abs(N)?(-C-l*h)/c:(-A-g*h)/N)),Z*(h=Math.abs(s.get(n,y)))*h>1)for(o=n;o<=y;o++)s.set(o,y,s.get(o,y)/h)}else if(V<0)for(u=y-1,Math.abs(s.get(y,y-1))>Math.abs(s.get(y-1,y))?(s.set(y-1,y-1,V/s.get(y,y-1)),s.set(y-1,y,-(s.get(y,y)-E)/s.get(y,y-1))):(M=S(0,-s.get(y-1,y),s.get(y-1,y-1)-E,V),s.set(y-1,y-1,M[0]),s.set(y-1,y,M[1])),s.set(y,y-1,0),s.set(y,y,1),n=y-2;n>=0;n--){for(v=0,m=0,o=u;o<=y;o++)v+=s.get(n,o)*s.get(o,y-1),m+=s.get(n,o)*s.get(o,y);if(l=s.get(n,n)-E,e[n]<0)N=l,C=v,A=m;else if(u=n,0===e[n]?(M=S(-v,-m,l,V),s.set(n,y-1,M[0]),s.set(n,y,M[1])):(c=s.get(n,n+1),g=s.get(n+1,n),d=(r[n]-E)*(r[n]-E)+e[n]*e[n]-V*V,b=2*(r[n]-E)*V,0===d&&0===b&&(d=Z*x*(Math.abs(l)+Math.abs(V)+Math.abs(c)+Math.abs(g)+Math.abs(N))),M=S(c*C-N*v+V*m,c*A-N*m-V*v,d,b),s.set(n,y-1,M[0]),s.set(n,y,M[1]),Math.abs(c)>Math.abs(N)+Math.abs(V)?(s.set(n+1,y-1,(-v-l*s.get(n,y-1)+V*s.get(n,y))/c),s.set(n+1,y,(-m-l*s.get(n,y)-V*s.get(n,y-1))/c)):(M=S(-C-g*s.get(n,y-1),-A-g*s.get(n,y),N,V),s.set(n+1,y-1,M[0]),s.set(n+1,y,M[1]))),Z*(h=Math.max(Math.abs(s.get(n,y-1)),Math.abs(s.get(n,y))))*h>1)for(o=n;o<=y;o++)s.set(o,y-1,s.get(o,y-1)/h),s.set(o,y,s.get(o,y)/h)}for(n=0;n<t;n++)if(n<0||n>w)for(o=n;o<t;o++)a.set(n,o,s.get(n,o));for(o=t-1;o>=0;o--)for(n=0;n<=w;n++){for(N=0,i=0;i<=Math.min(o,w);i++)N+=a.get(n,i)*s.get(i,o);a.set(n,o,N)}}}function S(t,e,r,a){var s,n;return Math.abs(r)>Math.abs(a)?[(t+(s=a/r)*e)/(n=r+s*a),(e-s*t)/n]:[((s=r/a)*t+e)/(n=a+s*r),(s*e-t)/n]}var E=function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,l.Z)(this,t),e=p.Z.checkMatrix(e);var a,s=r.Y,n=r.scaleScores,o=void 0!==n&&n,i=r.maxIterations,u=void 0===i?1e3:i,f=r.terminationCriteria,h=void 0===f?1e-10:f;if(s){if((s=Array.isArray(s)&&"number"===typeof s[0]?g.Z.columnVector(s):p.Z.checkMatrix(s)).rows!==e.rows)throw new Error("Y should have the same number of rows as X");a=s.getColumnVector(0)}else a=e.getColumnVector(0);for(var c,v,m,d,b=1,M=0;M<u&&b>h;M++)m=(m=e.transpose().mmul(a).div(a.transpose().mmul(a).get(0,0))).div(m.norm()),c=e.mmul(m).div(m.transpose().mmul(m).get(0,0)),M>0&&(b=c.clone().sub(d).pow(2).sum()),d=c.clone(),s?(v=(v=s.transpose().mmul(c).div(c.transpose().mmul(c).get(0,0))).div(v.norm()),a=s.mmul(v).div(v.transpose().mmul(v).get(0,0))):a=c;if(s){var y=e.transpose().mmul(c).div(c.transpose().mmul(c).get(0,0));y=y.div(y.norm());var w=e.clone().sub(c.clone().mmul(y.transpose())),Z=a.transpose().mmul(c).div(c.transpose().mmul(c).get(0,0)),k=s.clone().sub(c.clone().mulS(Z.get(0,0)).mmul(v.transpose()));this.t=c,this.p=y.transpose(),this.w=m.transpose(),this.q=v,this.u=a,this.s=c.transpose().mmul(c),this.xResidual=w,this.yResidual=k,this.betas=Z}else this.w=m.transpose(),this.s=c.transpose().mmul(c).sqrt(),this.t=o?c.clone().div(this.s.get(0,0)):c,this.xResidual=e.sub(c.mmul(m.transpose()))},V=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((0,l.Z)(this,t),!0===e){var a=r;return this.center=a.center,this.scale=a.scale,this.means=a.means,this.stdevs=a.stdevs,this.U=g.Z.checkMatrix(a.U),this.S=a.S,this.R=a.R,void(this.excludedFeatures=a.excludedFeatures||[])}e=new g.Z(e);var s=r.isCovarianceMatrix,n=void 0!==s&&s,o=r.method,i=void 0===o?"SVD":o,u=r.nCompNIPALS,f=void 0===u?2:u,c=r.center,v=void 0===c||c,m=r.scale,p=void 0!==m&&m,M=r.ignoreZeroVariance,y=void 0!==M&&M;if(this.center=v,this.scale=p,this.means=null,this.stdevs=null,this.excludedFeatures=[],n)this._computeFromCovarianceMatrix(e);else switch(this._adjust(e,y),i){case"covarianceMatrix":var w=new d(e).mmul(e).div(e.rows-1);this._computeFromCovarianceMatrix(w);break;case"NIPALS":this._computeWithNIPALS(e,f);break;case"SVD":var Z=new b.Z(e,{computeLeftSingularVectors:!1,computeRightSingularVectors:!0,autoTranspose:!0});this.U=Z.rightSingularVectors;var k,x=Z.diagonal,S=[],E=(0,h.Z)(x);try{for(E.s();!(k=E.n()).done;){var V=k.value;S.push(V*V/(e.rows-1))}}catch(C){E.e(C)}finally{E.f()}this.S=S;break;default:throw new Error("unknown method: ".concat(i))}}return(0,c.Z)(t,[{key:"predict",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.nComponents,a=void 0===r?this.U.columns:r;if(t=new g.Z(t),this.center&&(t.subRowVector(this.means),this.scale)){var s,n=(0,h.Z)(this.excludedFeatures);try{for(n.s();!(s=n.n()).done;){var o=s.value;t.removeColumn(o)}}catch(u){n.e(u)}finally{n.f()}t.divRowVector(this.stdevs)}var i=t.mmul(this.U);return i.subMatrix(0,i.rows-1,0,a-1)}},{key:"invert",value:function(t){var e=(t=g.Z.checkMatrix(t)).mmul(this.U.transpose());return this.center&&(this.scale&&e.mulRowVector(this.stdevs),e.addRowVector(this.means)),e}},{key:"getExplainedVariance",value:function(){var t,e=0,r=(0,h.Z)(this.S);try{for(r.s();!(t=r.n()).done;){var a=t.value;e+=a}}catch(s){r.e(s)}finally{r.f()}return this.S.map((function(t){return t/e}))}},{key:"getCumulativeVariance",value:function(){for(var t=this.getExplainedVariance(),e=1;e<t.length;e++)t[e]+=t[e-1];return t}},{key:"getEigenvectors",value:function(){return this.U}},{key:"getEigenvalues",value:function(){return this.S}},{key:"getStandardDeviations",value:function(){return this.S.map((function(t){return Math.sqrt(t)}))}},{key:"getLoadings",value:function(){return this.U.transpose()}},{key:"toJSON",value:function(){return{name:"PCA",center:this.center,scale:this.scale,means:this.means,stdevs:this.stdevs,U:this.U,S:this.S,excludedFeatures:this.excludedFeatures}}},{key:"_adjust",value:function(t,e){if(this.center){var r=t.mean("column"),a=this.scale?t.standardDeviation("column",{mean:r}):null;if(this.means=r,t.subRowVector(r),this.scale){for(var s=0;s<a.length;s++)if(0===a[s]){if(!e)throw new RangeError("Cannot scale the dataset (standard deviation is zero at index ".concat(s));t.removeColumn(s),a.splice(s,1),this.excludedFeatures.push(s),s--}this.stdevs=a,t.divRowVector(a)}}}},{key:"_computeFromCovarianceMatrix",value:function(t){var e=new y(t,{assumeSymmetric:!0});this.U=e.eigenvectorMatrix,this.U.flipRows(),this.S=e.realEigenvalues,this.S.reverse()}},{key:"_computeWithNIPALS",value:function(t,e){this.U=new g.Z(e,t.columns),this.S=[];for(var r=t,a=0;a<e;a++){var s=new E(r);this.U.setRow(a,s.w.transpose()),this.S.push(Math.pow(s.s.get(0,0),2)),r=s.xResidual}this.U=this.U.transpose()}}],[{key:"load",value:function(e){if("string"!==typeof e.name)throw new TypeError("model must have a name property");if("PCA"!==e.name)throw new RangeError("invalid model: ".concat(e.name));return new t(!0,e)}}]),t}(),C=r(25472),A=r(83301),N=r(61727),U=r.n(N),F=r(37221),R=r(31495),I=r.n(R),q=r(4827),L=r(41993);var P=function(t){var e,r=t.data,a=t.variables,s=t.scale,n=t.center,o=t.noComponents;try{for(var i=[],u=r[a[0]].length,f=0;f<u;f++){for(var h=[],l=!1,c=0;c<a.length;c++){var g=r[a[c]][f];if(e=g,!(0,F.isPrimitive)(e)||I()(e)){l=!0;break}h.push(g)}l||i.push(h)}var v=new V(i,{center:n,scale:s}),m=v.predict(i,{noComponents:o});return{pca:v,components:m}}catch(d){return{}}},_=function(t){(0,o.Z)(r,t);var e=(0,i.Z)(r);function r(t){var n;(0,s.Z)(this,r),n=e.call(this,t);var o=t.data,i=t.variables,u=t.scale,f=t.center,h=t.noComponents,l=P({data:o,variables:i,scale:u,center:f,noComponents:h}),c=l.pca,g=l.components;return n.state=(0,a.Z)({pca:c,components:g},t),c&&t.onResult(n.state.pca,n.state.components),n}return(0,n.Z)(r,[{key:"render",value:function(){var t=this.state.pca,e=this.props.t;if(!t)return u.createElement(f.Z,{variant:"danger"},e("missing-attributes"));var r=t.getStandardDeviations(),a=t.getExplainedVariance(),s=t.getCumulativeVariance(),n={x:U()(0,a.length,1),y:a,type:"scatter",name:e("proportion-of-variance")};return u.createElement("div",{style:{overflowX:"auto",width:"100%"}},u.createElement("span",{className:"title"},e("pca-summary")),function(t,e,r,a){return u.createElement(A.Z,{bordered:!0,size:"sm"},u.createElement("thead",null,u.createElement("tr",null,u.createElement("th",null),u.createElement("th",null,a("standard-deviation")),u.createElement("th",null,a("proportion-of-variance")),u.createElement("th",null,a("cumulative-variance")))),u.createElement("tbody",null,t.map((function(t,a){return u.createElement("tr",{key:a},u.createElement("th",null," ","PC".concat(a+1)," "),u.createElement("td",null," ",t.toFixed(3)," "),u.createElement("td",null," ",e[a].toFixed(3)," "),u.createElement("td",null," ",r[a].toFixed(3)," "))}))))}(r,a,s,e),u.createElement(q.Z,{editable:!0,data:[n],layout:{xaxis:{title:e("principal-component")},yaxis:{title:e("explained-proportion")}}}))}}],[{key:"getDerivedStateFromProps",value:function(t,e){if(t.data!==e.data||t.variables!==e.variables){var r=t.data,s=t.variables,n=t.scale,o=t.center,i=t.noComponents,u=(0,a.Z)((0,a.Z)({},P({data:r,variables:s,scale:n,center:o,noComponents:i})),t);return u.pca&&t.onResult(u.pca,u.components),u}return null}}]),r}(u.Component);_.defaultProps={center:!0,scale:!1,noComponents:0,onResult:function(){}};var G=(0,C.Z)("models")((0,L.W)(_))},25554:function(t,e,r){r.d(e,{Z:function(){return u}});var a=r(27853),s=r(84531),n=r(61502),o=r(57706),i=r(45016),u=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((0,a.Z)(this,t),(e=o.Z.checkMatrix(e)).isEmpty())throw new Error("Matrix must be non-empty");var s,u=e.rows,f=e.columns,h=r.computeLeftSingularVectors,l=void 0===h||h,c=r.computeRightSingularVectors,g=void 0===c||c,v=r.autoTranspose,m=void 0!==v&&v,d=Boolean(l),b=Boolean(g),p=!1;if(u<f)if(m){u=(s=e.transpose()).rows,f=s.columns,p=!0;var M=d;d=b,b=M}else s=e.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else s=e.clone();for(var y=Math.min(u,f),w=Math.min(u+1,f),Z=new Float64Array(w),k=new n.Z(u,y),x=new n.Z(f,f),S=new Float64Array(f),E=new Float64Array(u),V=new Float64Array(w),C=0;C<w;C++)V[C]=C;for(var A=Math.min(u-1,f),N=Math.max(0,Math.min(f-2,u)),U=Math.max(A,N),F=0;F<U;F++){if(F<A){Z[F]=0;for(var R=F;R<u;R++)Z[F]=(0,i.G)(Z[F],s.get(R,F));if(0!==Z[F]){s.get(F,F)<0&&(Z[F]=-Z[F]);for(var I=F;I<u;I++)s.set(I,F,s.get(I,F)/Z[F]);s.set(F,F,s.get(F,F)+1)}Z[F]=-Z[F]}for(var q=F+1;q<f;q++){if(F<A&&0!==Z[F]){for(var L=0,P=F;P<u;P++)L+=s.get(P,F)*s.get(P,q);L=-L/s.get(F,F);for(var _=F;_<u;_++)s.set(_,q,s.get(_,q)+L*s.get(_,F))}S[q]=s.get(F,q)}if(d&&F<A)for(var G=F;G<u;G++)k.set(G,F,s.get(G,F));if(F<N){S[F]=0;for(var D=F+1;D<f;D++)S[F]=(0,i.G)(S[F],S[D]);if(0!==S[F]){S[F+1]<0&&(S[F]=0-S[F]);for(var O=F+1;O<f;O++)S[O]/=S[F];S[F+1]+=1}if(S[F]=-S[F],F+1<u&&0!==S[F]){for(var j=F+1;j<u;j++)E[j]=0;for(var T=F+1;T<u;T++)for(var z=F+1;z<f;z++)E[T]+=S[z]*s.get(T,z);for(var X=F+1;X<f;X++)for(var W=-S[X]/S[F+1],B=F+1;B<u;B++)s.set(B,X,s.get(B,X)+W*E[B])}if(b)for(var Y=F+1;Y<f;Y++)x.set(Y,F,S[Y])}}var J=Math.min(f,u+1);if(A<f&&(Z[A]=s.get(A,A)),u<J&&(Z[J-1]=0),N+1<J&&(S[N]=s.get(N,J-1)),S[J-1]=0,d){for(var $=A;$<y;$++){for(var H=0;H<u;H++)k.set(H,$,0);k.set($,$,1)}for(var K=A-1;K>=0;K--)if(0!==Z[K]){for(var Q=K+1;Q<y;Q++){for(var tt=0,et=K;et<u;et++)tt+=k.get(et,K)*k.get(et,Q);tt=-tt/k.get(K,K);for(var rt=K;rt<u;rt++)k.set(rt,Q,k.get(rt,Q)+tt*k.get(rt,K))}for(var at=K;at<u;at++)k.set(at,K,-k.get(at,K));k.set(K,K,1+k.get(K,K));for(var st=0;st<K-1;st++)k.set(st,K,0)}else{for(var nt=0;nt<u;nt++)k.set(nt,K,0);k.set(K,K,1)}}if(b)for(var ot=f-1;ot>=0;ot--){if(ot<N&&0!==S[ot])for(var it=ot+1;it<f;it++){for(var ut=0,ft=ot+1;ft<f;ft++)ut+=x.get(ft,ot)*x.get(ft,it);ut=-ut/x.get(ot+1,ot);for(var ht=ot+1;ht<f;ht++)x.set(ht,it,x.get(ht,it)+ut*x.get(ht,ot))}for(var lt=0;lt<f;lt++)x.set(lt,ot,0);x.set(ot,ot,1)}for(var ct=J-1,gt=Number.EPSILON;J>0;){var vt=void 0,mt=void 0;for(vt=J-2;vt>=-1&&-1!==vt;vt--){var dt=Number.MIN_VALUE+gt*Math.abs(Z[vt]+Math.abs(Z[vt+1]));if(Math.abs(S[vt])<=dt||Number.isNaN(S[vt])){S[vt]=0;break}}if(vt===J-2)mt=4;else{var bt=void 0;for(bt=J-1;bt>=vt&&bt!==vt;bt--){var pt=(bt!==J?Math.abs(S[bt]):0)+(bt!==vt+1?Math.abs(S[bt-1]):0);if(Math.abs(Z[bt])<=gt*pt){Z[bt]=0;break}}bt===vt?mt=3:bt===J-1?mt=1:(mt=2,vt=bt)}switch(vt++,mt){case 1:var Mt=S[J-2];S[J-2]=0;for(var yt=J-2;yt>=vt;yt--){var wt=(0,i.G)(Z[yt],Mt),Zt=Z[yt]/wt,kt=Mt/wt;if(Z[yt]=wt,yt!==vt&&(Mt=-kt*S[yt-1],S[yt-1]=Zt*S[yt-1]),b)for(var xt=0;xt<f;xt++)wt=Zt*x.get(xt,yt)+kt*x.get(xt,J-1),x.set(xt,J-1,-kt*x.get(xt,yt)+Zt*x.get(xt,J-1)),x.set(xt,yt,wt)}break;case 2:var St=S[vt-1];S[vt-1]=0;for(var Et=vt;Et<J;Et++){var Vt=(0,i.G)(Z[Et],St),Ct=Z[Et]/Vt,At=St/Vt;if(Z[Et]=Vt,St=-At*S[Et],S[Et]=Ct*S[Et],d)for(var Nt=0;Nt<u;Nt++)Vt=Ct*k.get(Nt,Et)+At*k.get(Nt,vt-1),k.set(Nt,vt-1,-At*k.get(Nt,Et)+Ct*k.get(Nt,vt-1)),k.set(Nt,Et,Vt)}break;case 3:var Ut=Math.max(Math.abs(Z[J-1]),Math.abs(Z[J-2]),Math.abs(S[J-2]),Math.abs(Z[vt]),Math.abs(S[vt])),Ft=Z[J-1]/Ut,Rt=Z[J-2]/Ut,It=S[J-2]/Ut,qt=Z[vt]/Ut,Lt=S[vt]/Ut,Pt=((Rt+Ft)*(Rt-Ft)+It*It)/2,_t=Ft*It*(Ft*It),Gt=0;0===Pt&&0===_t||(Gt=_t/(Pt+(Gt=Pt<0?0-Math.sqrt(Pt*Pt+_t):Math.sqrt(Pt*Pt+_t))));for(var Dt=(qt+Ft)*(qt-Ft)+Gt,Ot=qt*Lt,jt=vt;jt<J-1;jt++){var Tt=(0,i.G)(Dt,Ot);0===Tt&&(Tt=Number.MIN_VALUE);var zt=Dt/Tt,Xt=Ot/Tt;if(jt!==vt&&(S[jt-1]=Tt),Dt=zt*Z[jt]+Xt*S[jt],S[jt]=zt*S[jt]-Xt*Z[jt],Ot=Xt*Z[jt+1],Z[jt+1]=zt*Z[jt+1],b)for(var Wt=0;Wt<f;Wt++)Tt=zt*x.get(Wt,jt)+Xt*x.get(Wt,jt+1),x.set(Wt,jt+1,-Xt*x.get(Wt,jt)+zt*x.get(Wt,jt+1)),x.set(Wt,jt,Tt);if(0===(Tt=(0,i.G)(Dt,Ot))&&(Tt=Number.MIN_VALUE),zt=Dt/Tt,Xt=Ot/Tt,Z[jt]=Tt,Dt=zt*S[jt]+Xt*Z[jt+1],Z[jt+1]=-Xt*S[jt]+zt*Z[jt+1],Ot=Xt*S[jt+1],S[jt+1]=zt*S[jt+1],d&&jt<u-1)for(var Bt=0;Bt<u;Bt++)Tt=zt*k.get(Bt,jt)+Xt*k.get(Bt,jt+1),k.set(Bt,jt+1,-Xt*k.get(Bt,jt)+zt*k.get(Bt,jt+1)),k.set(Bt,jt,Tt)}S[J-2]=Dt,1;break;case 4:if(Z[vt]<=0&&(Z[vt]=Z[vt]<0?-Z[vt]:0,b))for(var Yt=0;Yt<=ct;Yt++)x.set(Yt,vt,-x.get(Yt,vt));for(;vt<ct&&!(Z[vt]>=Z[vt+1]);){var Jt=Z[vt];if(Z[vt]=Z[vt+1],Z[vt+1]=Jt,b&&vt<f-1)for(var $t=0;$t<f;$t++)Jt=x.get($t,vt+1),x.set($t,vt+1,x.get($t,vt)),x.set($t,vt,Jt);if(d&&vt<u-1)for(var Ht=0;Ht<u;Ht++)Jt=k.get(Ht,vt+1),k.set(Ht,vt+1,k.get(Ht,vt)),k.set(Ht,vt,Jt);vt++}0,J--}}if(p){var Kt=x;x=k,k=Kt}this.m=u,this.n=f,this.s=Z,this.U=k,this.V=x}return(0,s.Z)(t,[{key:"solve",value:function(t){for(var e=t,r=this.threshold,a=this.s.length,s=n.Z.zeros(a,a),o=0;o<a;o++)Math.abs(this.s[o])<=r?s.set(o,o,0):s.set(o,o,1/this.s[o]);for(var i=this.U,u=this.rightSingularVectors,f=u.mmul(s),h=u.rows,l=i.rows,c=n.Z.zeros(h,l),g=0;g<h;g++)for(var v=0;v<l;v++){for(var m=0,d=0;d<a;d++)m+=f.get(g,d)*i.get(v,d);c.set(g,v,m)}return c.mmul(e)}},{key:"solveForDiagonal",value:function(t){return this.solve(n.Z.diag(t))}},{key:"inverse",value:function(){for(var t=this.V,e=this.threshold,r=t.rows,a=t.columns,s=new n.Z(r,this.s.length),o=0;o<r;o++)for(var i=0;i<a;i++)Math.abs(this.s[i])>e&&s.set(o,i,t.get(o,i)/this.s[i]);for(var u=this.U,f=u.rows,h=u.columns,l=new n.Z(r,f),c=0;c<r;c++)for(var g=0;g<f;g++){for(var v=0,m=0;m<h;m++)v+=s.get(c,m)*u.get(g,m);l.set(c,g,v)}return l}},{key:"condition",get:function(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}},{key:"norm2",get:function(){return this.s[0]}},{key:"rank",get:function(){for(var t=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,e=0,r=this.s,a=0,s=r.length;a<s;a++)r[a]>t&&e++;return e}},{key:"diagonal",get:function(){return Array.from(this.s)}},{key:"threshold",get:function(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}},{key:"leftSingularVectors",get:function(){return this.U}},{key:"rightSingularVectors",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){return n.Z.diag(this.s)}}]),t}()},45016:function(t,e,r){function a(t,e){var r=0;return Math.abs(t)>Math.abs(e)?(r=e/t,Math.abs(t)*Math.sqrt(1+r*r)):0!==e?(r=t/e,Math.abs(e)*Math.sqrt(1+r*r)):0}r.d(e,{G:function(){return a}})},57706:function(t,e,r){r.d(e,{Z:function(){return i}});var a=r(27853),s=r(84531),n=r(78932),o=r(56362),i=function(t){(0,n.Z)(r,t);var e=(0,o.Z)(r);function r(t){var s;return(0,a.Z)(this,r),(s=e.call(this)).data=t,s.rows=t.length,s.columns=t[0].length,s}return(0,s.Z)(r,[{key:"set",value:function(t,e,r){return this.data[t][e]=r,this}},{key:"get",value:function(t,e){return this.data[t][e]}}]),r}(r(61502).X)},24400:function(t,e,r){function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,a=new Array(e);r<e;r++)a[r]=t[r];return a}r.d(e,{Z:function(){return a}})},89472:function(t,e,r){r.d(e,{Z:function(){return s}});var a=r(72327);function s(t,e){var r;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=(0,a.Z)(t))||e&&t&&"number"===typeof t.length){r&&(t=r);var s=0,n=function(){};return{s:n,n:function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return i=t.done,t},e:function(t){u=!0,o=t},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw o}}}}},72327:function(t,e,r){r.d(e,{Z:function(){return s}});var a=r(24400);function s(t,e){if(t){if("string"===typeof t)return(0,a.Z)(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?(0,a.Z)(t,e):void 0}}}}]);
//# sourceMappingURL=PrincipalComponentAnalysis.eb59dac7.chunk.js.map