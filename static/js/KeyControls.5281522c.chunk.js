"use strict";(self.webpackChunkisle_dashboard=self.webpackChunkisle_dashboard||[]).push([[7659],{35079:function(e,t,n){n.r(t);var o=n(15671),r=n(43144),a=n(97326),i=n(60136),c=n(29388),s=n(4942),d=n(41488),u=n(15272),v=n(44996),m=n.n(v),p=n(67583),l=n.n(p),f=n(65773),y=n.n(f),g=n(87651),h=m()("isle:key-controls"),k=/^[a-z]$/i,E=["input","textarea"],Z=function(e){(0,i.Z)(n,e);var t=(0,c.Z)(n);function n(e){var r;return(0,o.Z)(this,n),r=t.call(this,e),(0,s.Z)((0,a.Z)(r),"addListeners",(function(){var e=l()(r.props.actions);if(h("Add keydown event listeners for ".concat(r.props.container?"container":"document",": ").concat(e.join(", "))),r.props.container)try{u.findDOMNode(r.props.container).addEventListener("keydown",r.triggerEvent)}catch(t){h(t.message)}else document.addEventListener("keydown",r.triggerDocEvent)})),(0,s.Z)((0,a.Z)(r),"removeListeners",(function(e){var t=l()(r.props.actions);if(h("Remove keydown event listeners for ".concat(e?"container":"document",": ").concat(t.join(", "))),e)try{u.findDOMNode(e).removeEventListener("keydown",r.triggerEvent)}catch(n){h(n.message)}document.removeEventListener("keydown",r.triggerDocEvent)})),(0,s.Z)((0,a.Z)(r),"triggerEvent",(function(e){var t=e.key;h("Received key press for container: ".concat(t));var n=r.props.actions[t],o=e.ctrlKey||e.shiftKey||e.altKey||e.metaKey;if(document.activeElement===r.props.container&&!o&&y()(n)){if(k.test(t)&&document.activeElement!==document.body){var a=document.activeElement;if(a&&(-1!==E.indexOf(a.tagName.toLowerCase())||a.isContentEditable)||"CANVAS"===a.tagName)return}e.preventDefault(),e.stopPropagation(),n(e)}})),(0,s.Z)((0,a.Z)(r),"triggerDocEvent",(function(e){var t=e.key,n=e.ctrlKey||e.shiftKey||e.altKey||e.metaKey;h("Received key press for document: ".concat(t));var o=r.props.actions[t];if(!n&&y()(o)){if(k.test(t)&&document.activeElement!==document.body){var a=document.activeElement;if(a&&(-1!==E.indexOf(a.tagName.toLowerCase())||a.isContentEditable)||"CANVAS"===a.tagName)return}e.preventDefault(),e.stopPropagation(),o(e)}})),r}return(0,r.Z)(n,[{key:"componentDidMount",value:function(){h("Component has mounted..."),this.addListeners()}},{key:"componentDidUpdate",value:function(e){this.props.container!==e.container&&(h("Container has changed, re-attach event listeners..."),this.removeListeners(e.container),this.addListeners())}},{key:"componentWillUnmount",value:function(){h("Component has unmounted..."),this.removeListeners()}},{key:"render",value:function(){return null}}]),n}(d.Component);Z.defaultProps={actions:{},container:null},Z.contextType=g.Z,t.default=Z}}]);
//# sourceMappingURL=KeyControls.5281522c.chunk.js.map