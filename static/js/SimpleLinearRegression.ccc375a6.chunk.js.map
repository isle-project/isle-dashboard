{"version":3,"sources":["../node_modules/@stdlib/stats/incr/sumabs2/lib/index.js","../node_modules/@stdlib/stats/incr/sumabs2/lib/main.js","../node_modules/@isle-project/components/models/simple-linear-regression/main.js"],"names":["data","xd","yd","groups"],"mappings":"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","file":"static/js/SimpleLinearRegression.ccc375a6.chunk.js","sourcesContent":["/**\n* @license Apache-2.0\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n/**\n* Compute a sum of squared absolute values incrementally.\n*\n* @module @stdlib/stats/incr/sumabs2\n*\n* @example\n* var incrsumabs2 = require( '@stdlib/stats/incr/sumabs2' );\n*\n* var accumulator = incrsumabs2();\n*\n* var sum = accumulator();\n* // returns null\n*\n* sum = accumulator( 2.0 );\n* // returns 4.0\n*\n* sum = accumulator( -5.0 );\n* // returns 29.0\n*\n* sum = accumulator();\n* // returns 29.0\n*/\n\n// MODULES //\n\nvar incrsumabs2 = require( './main.js' );\n\n\n// EXPORTS //\n\nmodule.exports = incrsumabs2;\n","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n// MAIN //\n\n/**\n* Returns an accumulator function which incrementally computes a sum of squared absolute values.\n*\n* @returns {Function} accumulator function\n*\n* @example\n* var accumulator = incrsumabs2();\n*\n* var sum = accumulator();\n* // returns null\n*\n* sum = accumulator( 2.0 );\n* // returns 4.0\n*\n* sum = accumulator( -5.0 );\n* // returns 29.0\n*\n* sum = accumulator();\n* // returns 29.0\n*/\nfunction incrsumabs2() {\n\tvar sum = 0.0;\n\tvar FLG;\n\treturn accumulator;\n\n\t/**\n\t* If provided a value, the accumulator function returns an updated sum. If not provided a value, the accumulator function returns the current sum.\n\t*\n\t* @private\n\t* @param {number} [x] - new value\n\t* @returns {(number|null)} sum or null\n\t*/\n\tfunction accumulator( x ) {\n\t\tif ( arguments.length === 0 ) {\n\t\t\treturn ( FLG ) ? sum : null;\n\t\t}\n\t\tFLG = true;\n\t\tsum += x * x;\n\t\treturn sum;\n\t}\n}\n\n\n// EXPORTS //\n\nmodule.exports = incrsumabs2;\n","// MODULES //\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { withTranslation } from 'react-i18next';\nimport Alert from 'react-bootstrap/Alert';\nimport Button from 'react-bootstrap/Button';\nimport Table from '@isle-project/components/table';\nimport Tooltip from '@isle-project/components/tooltip';\nimport objectValues from '@stdlib/utils/values';\nimport mapValues from '@stdlib/utils/map-values';\nimport incrsumabs2 from '@stdlib/stats/incr/sumabs2';\nimport tCDF from '@stdlib/stats/base/dists/t/cdf';\nimport abs from '@stdlib/math/base/special/abs';\nimport sqrt from '@stdlib/math/base/special/sqrt';\nimport mean from '@isle-project/utils/statistic/mean';\nimport Plotly from '@isle-project/components/plotly';\nimport Histogram from '@isle-project/components/plots/histogram';\nimport { generateQQPlotConfig } from '@isle-project/components/plots/qqplot';\nimport by2 from '@isle-project/utils/by2';\nimport by from '@isle-project/utils/by';\nimport { withPropCheck } from '@isle-project/utils/prop-check';\nimport { Factor } from '@isle-project/utils/factor-variable';\nimport isNonMissingNumber from '@isle-project/utils/is-non-missing-number';\nimport isMissing from '@isle-project/utils/is-missing';\n\n\n// VARIABLES //\n\nlet COUNTER = 0;\nconst T = 't';\n\n\n// FUNCTIONS //\n\nfunction calculateCoefficients( x, y ) {\n\tconst xmu = mean( x );\n\tconst ymu = mean( y );\n\tlet C1 = 0;\n\tlet C2 = 0;\n\tconst len = x.length;\n\tfor ( let i = 0; i < len; i++ ) {\n\t\tlet xdelta = x[ i ] - xmu;\n\t\tlet ydelta = y[ i ] - ymu;\n\t\tC1 += xdelta * xdelta;\n\t\tC2 += xdelta * ydelta;\n\t}\n\tconst slope = C2 / C1;\n\tconst yint = ymu - slope*xmu;\n\treturn { yint, slope, xg: x, yg: y };\n}\n\nfunction extractValues({ x, y, data, group, omitMissing }) {\n\tconst xd = data[ x ];\n\tconst yd = data[ y ];\n\tconst groups = data[ group ];\n\tif ( omitMissing ) {\n\t\tconst xvals = [];\n\t\tconst yvals = [];\n\t\tconst groupvals = [];\n\t\tif ( groups ) {\n\t\t\tfor ( let i = 0; i < xd.length; i++ ) {\n\t\t\t\tif (\n\t\t\t\t\t!isMissing( groups[ i ] ) &&\n\t\t\t\t\tisNonMissingNumber( xd[ i ] ) &&\n\t\t\t\t\tisNonMissingNumber( yd[ i ] )\n\t\t\t\t) {\n\t\t\t\t\txvals.push( xd[ i ] );\n\t\t\t\t\tyvals.push( yd[ i ] );\n\t\t\t\t\tgroupvals.push( groups[ i ] );\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tfor ( let i = 0; i < xd.length; i++ ) {\n\t\t\t\tif (\n\t\t\t\t\tisNonMissingNumber( xd[ i ] ) &&\n\t\t\t\t\tisNonMissingNumber( yd[ i ] )\n\t\t\t\t) {\n\t\t\t\t\txvals.push( xd[ i ] );\n\t\t\t\t\tyvals.push( yd[ i ] );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn {\n\t\t\txd: xvals,\n\t\t\tyd: yvals,\n\t\t\tgroups: groupvals\n\t\t};\n\t}\n\treturn {\n\t\txd: xd,\n\t\tyd: yd,\n\t\tgroups: groups\n\t};\n}\n\n\n// MAIN //\n\n/**\n* Simple linear regression.\n*\n* @property {Object} data - object of value arrays\n* @property {string} x - explanatory variable\n* @property {string} y - response variable\n* @property {(string|Factor)} group - grouping variable\n* @property {boolean} omitMissing - controls whether to omit missing values in model fitting\n* @property {Function} onDiagnostics - callback invoked with diagnostic plots\n* @property {Function} onPredict - callback invoked with a predict function to make predictions for new data\n*/\nclass SimpleLinearRegression extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tCOUNTER += 1;\n\t\tconst { x, y, data, group, omitMissing } = props;\n\t\tthis.state = extractValues({ x, y, data, group, omitMissing });\n\t}\n\n\tstatic getDerivedStateFromProps( nextProps, prevState ) {\n\t\tif (\n\t\t\tnextProps.data !== prevState.data ||\n\t\t\tnextProps.x !== prevState.x ||\n\t\t\tnextProps.y !== prevState.y ||\n\t\t\tnextProps.group !== prevState.group ||\n\t\t\tnextProps.omitMissing !== prevState.omitMissing\n\t\t) {\n\t\t\tconst { x, y, intercept, omitMissing, data, group } = nextProps;\n\t\t\treturn extractValues({ x, y, intercept, omitMissing, data, group } );\n\t\t}\n\t\treturn null;\n\t}\n\n\trender() {\n\t\tconst { xd, yd, groups } = this.state;\n\t\tconst { x, y, group, data, t } = this.props;\n\t\tlet output;\n\t\ttry {\n\t\t\tif ( group ) {\n\t\t\t\tconst xmeans = by( xd, groups, mean );\n\t\t\t\tconst res = by2( xd, yd, groups, calculateCoefficients );\n\t\t\t\toutput = <div style={{ overflowX: 'auto', width: '100%' }}>\n\t\t\t\t\t<label>{t('regression-y-on-x', { x, y })}</label>\n\t\t\t\t\t<p>\n\t\t\t\t\t\t<i>{t('grouped-by')} {group}:</i>\n\t\t\t\t\t</p>\n\t\t\t\t\t{objectValues( mapValues( res, ( elem, key ) => {\n\t\t\t\t\t\tconst { yint, slope, xg, yg } = elem;\n\t\t\t\t\t\tconst resAcc = incrsumabs2();\n\t\t\t\t\t\tconst x2Acc = incrsumabs2();\n\t\t\t\t\t\tconst x2mmAcc = incrsumabs2();\n\t\t\t\t\t\tconst cdf = tCDF.factory( yg.length - 2 );\n\t\t\t\t\t\tfor ( let i = 0; i < yg.length; i++ ) {\n\t\t\t\t\t\t\tconst pred = yint + slope * xg[ i ];\n\t\t\t\t\t\t\tresAcc( pred - yg[ i ] );\n\t\t\t\t\t\t\tx2Acc( xg[ i ] );\n\t\t\t\t\t\t\tx2mmAcc( xg[ i ] - xmeans[ key ] );\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst sigma2 = resAcc() / ( yg.length - 2 );\n\t\t\t\t\t\tconst slopeVar = sigma2 / x2mmAcc();\n\t\t\t\t\t\tconst slopeSE = sqrt( slopeVar );\n\t\t\t\t\t\tconst interceptVar = ( (1/yg.length) * sigma2 * x2Acc() ) / x2mmAcc();\n\t\t\t\t\t\tconst interceptSE = sqrt( interceptVar );\n\t\t\t\t\t\tconst tSlope = slope / slopeSE;\n\t\t\t\t\t\tconst tIntercept = yint / interceptSE;\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div key={`group-${key}`} >\n\t\t\t\t\t\t\t\t<label>{key}:</label>\n\t\t\t\t\t\t\t\t<Table bordered size=\"sm\" >\n\t\t\t\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t<th>{t('variable')}</th>\n\t\t\t\t\t\t\t\t\t\t\t<th>{t('coefficient')}</th>\n\t\t\t\t\t\t\t\t\t\t\t<th>{t('std-error')}</th>\n\t\t\t\t\t\t\t\t\t\t\t<th>{T}</th>\n\t\t\t\t\t\t\t\t\t\t\t<th>{t('p-value')}</th>\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t<td>{t('intercept')}</td>\n\t\t\t\t\t\t\t\t\t\t\t<td>{yint.toFixed( 4 )}</td>\n\t\t\t\t\t\t\t\t\t\t\t<td>{interceptSE.toFixed( 4 )}</td>\n\t\t\t\t\t\t\t\t\t\t\t<td>{tIntercept.toFixed( 4 )}</td>\n\t\t\t\t\t\t\t\t\t\t\t<td>{2.0 * (1.0-cdf( abs( tIntercept ) ) ).toFixed( 4 )}</td>\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t<td>{x}</td>\n\t\t\t\t\t\t\t\t\t\t\t<td>{slope.toFixed( 4 )}</td>\n\t\t\t\t\t\t\t\t\t\t\t<td>{slopeSE.toFixed( 4 )}</td>\n\t\t\t\t\t\t\t\t\t\t\t<td>{tSlope.toFixed( 4 )}</td>\n\t\t\t\t\t\t\t\t\t\t\t<td>{2.0 * (1.0-cdf( abs( tSlope ) ) ).toFixed( 4 )}</td>\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t\t</Table>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t}) )}\n\t\t\t\t\t{ this.props.onPredict ? <Tooltip tooltip={t('use-model-to-predict-tooltip')} >\n\t\t\t\t\t\t<Button variant=\"secondary\" size=\"sm\" onClick={() => {\n\t\t\t\t\t\t\tconst predict = ( data ) => {\n\t\t\t\t\t\t\t\tconst xd = data[ x ];\n\t\t\t\t\t\t\t\tconst yd = data[ y ];\n\t\t\t\t\t\t\t\tconst fitted = new Float64Array( yd.length );\n\t\t\t\t\t\t\t\tconst residuals = new Float64Array( yd.length );\n\t\t\t\t\t\t\t\tconst groups = data[ group ];\n\t\t\t\t\t\t\t\tfor ( let i = 0; i < fitted.length; i++ ) {\n\t\t\t\t\t\t\t\t\tconst { yint, slope } = res[ groups[ i ] ];\n\t\t\t\t\t\t\t\t\tfitted[ i ] = yint + slope * xd[ i ];\n\t\t\t\t\t\t\t\t\tresiduals[ i ] = yd[ i ] - fitted[ i ];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn { fitted, residuals };\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tthis.props.onPredict( predict, COUNTER );\n\t\t\t\t\t\t}}>{this.props.t('use-model-to-predict')}</Button>\n\t\t\t\t\t</Tooltip> : null }\n\t\t\t\t\t{ this.props.onDiagnostics ? <Button variant=\"secondary\" size=\"sm\" style={{ marginLeft: 6 }} onClick={() => {\n\t\t\t\t\t\tconst xd = data[ x ];\n\t\t\t\t\t\tconst yd = data[ y ];\n\t\t\t\t\t\tconst fitted = new Float64Array( yd.length );\n\t\t\t\t\t\tconst residuals = new Float64Array( yd.length );\n\t\t\t\t\t\tconst groups = data[ group ];\n\t\t\t\t\t\tfor ( let i = 0; i < fitted.length; i++ ) {\n\t\t\t\t\t\t\tconst { yint, slope } = res[ groups[ i ] ];\n\t\t\t\t\t\t\tfitted[ i ] = yint + slope * xd[ i ];\n\t\t\t\t\t\t\tresiduals[ i ] = yd[ i ] - fitted[ i ];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst qqPlot = <Plotly\n\t\t\t\t\t\t\tdraggable\n\t\t\t\t\t\t\teditable fit\n\t\t\t\t\t\t\t{...generateQQPlotConfig( residuals, 'residuals' )}\n\t\t\t\t\t\t\tmeta={{ type: 'qqplot of regression residuals', x: xd, y: yd }}\n\t\t\t\t\t\t/>;\n\t\t\t\t\t\tconst residualPlot = <Plotly\n\t\t\t\t\t\t\tdraggable editable fit\n\t\t\t\t\t\t\tdata={[\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tx: fitted,\n\t\t\t\t\t\t\t\t\ty: residuals,\n\t\t\t\t\t\t\t\t\tmode: 'markers'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\tlayout={{\n\t\t\t\t\t\t\t\txaxis: {\n\t\t\t\t\t\t\t\t\ttitle: t('fitted-values')\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tyaxis: {\n\t\t\t\t\t\t\t\t\ttitle: t('residuals')\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\ttitle: t('residuals-vs-fitted')\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tmeta={{ type: 'regression residuals vs. fitted', x: xd, y: yd }}\n\t\t\t\t\t\t/>;\n\t\t\t\t\t\tconst hist = <Histogram\n\t\t\t\t\t\t\tdata={{ 'Residuals': residuals }}\n\t\t\t\t\t\t\tvariable=\"Residuals\"\n\t\t\t\t\t\t\ttitle={t('plotly:histogram-title', { x: 'Residuals' })}\n\t\t\t\t\t\t/>;\n\t\t\t\t\t\tthis.props.onDiagnostics([ qqPlot, hist, residualPlot ]);\n\t\t\t\t\t}} >\n\t\t\t\t\t\t{t('model-diagnostics')}\n\t\t\t\t\t</Button> : null }\n\t\t\t\t</div>;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tconst { yint, slope } = calculateCoefficients( xd, yd );\n\t\t\t\tconst resAcc = incrsumabs2();\n\t\t\t\tconst x2Acc = incrsumabs2();\n\t\t\t\tconst x2mmAcc = incrsumabs2();\n\t\t\t\tconst xmean = mean( xd );\n\t\t\t\tconst cdf = tCDF.factory( yd.length - 2 );\n\t\t\t\tfor ( let i = 0; i < yd.length; i++ ) {\n\t\t\t\t\tconst pred = yint + slope * xd[ i ];\n\t\t\t\t\tresAcc( pred - yd[ i ] );\n\t\t\t\t\tx2Acc( xd[ i ] );\n\t\t\t\t\tx2mmAcc( xd[ i ] - xmean );\n\t\t\t\t}\n\t\t\t\tconst sigma2 = resAcc() / ( yd.length - 2 );\n\t\t\t\tconst slopeVar = sigma2 / x2mmAcc();\n\t\t\t\tconst slopeSE = sqrt( slopeVar );\n\t\t\t\tconst interceptVar = ( (1/yd.length) * sigma2 * x2Acc() ) / x2mmAcc();\n\t\t\t\tconst interceptSE = sqrt( interceptVar );\n\t\t\t\tconst tSlope = slope / slopeSE;\n\t\t\t\tconst tIntercept = yint / interceptSE;\n\t\t\t\toutput = <div style={{ overflowX: 'auto', width: '100%' }} >\n\t\t\t\t\t<label>{t('simple-regression-title', { x, y, counter: COUNTER })}</label>\n\t\t\t\t\t<Table bordered size=\"sm\" >\n\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th>{t('variable')}</th>\n\t\t\t\t\t\t\t\t<th>{t('coefficient')}</th>\n\t\t\t\t\t\t\t\t<th>{t('std-error')}</th>\n\t\t\t\t\t\t\t\t<th>{T}</th>\n\t\t\t\t\t\t\t\t<th>{t('p-value')}</th>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td>{t('intercept')}</td>\n\t\t\t\t\t\t\t\t<td>{yint.toFixed( 4 )}</td>\n\t\t\t\t\t\t\t\t<td>{interceptSE.toFixed( 4 )}</td>\n\t\t\t\t\t\t\t\t<td>{tIntercept.toFixed( 4 )}</td>\n\t\t\t\t\t\t\t\t<td>{2.0 * (1.0-cdf( abs( tIntercept ) ) ).toFixed( 4 )}</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td>{x}</td>\n\t\t\t\t\t\t\t\t<td>{slope.toFixed( 4 )}</td>\n\t\t\t\t\t\t\t\t<td>{slopeSE.toFixed( 4 )}</td>\n\t\t\t\t\t\t\t\t<td>{tSlope.toFixed( 4 )}</td>\n\t\t\t\t\t\t\t\t<td>{2.0 * (1.0-cdf( abs( tSlope ) ) ).toFixed( 4 )}</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</Table>\n\t\t\t\t\t{ this.props.onPredict ? <Tooltip tooltip={t('use-model-to-predict-tooltip')} >\n\t\t\t\t\t\t<Button variant=\"secondary\" size=\"sm\" onClick={() => {\n\t\t\t\t\t\t\tconst predict = ( data ) => {\n\t\t\t\t\t\t\t\tconst xd = data[ x ];\n\t\t\t\t\t\t\t\tconst yd = data[ y ];\n\t\t\t\t\t\t\t\tconst fitted = new Array( yd.length );\n\t\t\t\t\t\t\t\tconst residuals = new Array( yd.length );\n\t\t\t\t\t\t\t\tfor ( let i = 0; i < fitted.length; i++ ) {\n\t\t\t\t\t\t\t\t\tfitted[ i ] = yint + slope * xd[ i ];\n\t\t\t\t\t\t\t\t\tresiduals[ i ] = yd[ i ] - fitted[ i ];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn { fitted, residuals };\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tthis.props.onPredict( predict, COUNTER );\n\t\t\t\t\t\t}}>{this.props.t('use-model-to-predict')}</Button>\n\t\t\t\t\t</Tooltip> : null }\n\t\t\t\t\t{ this.props.onDiagnostics ? <Button variant=\"secondary\" size=\"sm\" style={{ marginLeft: 6 }} onClick={() => {\n\t\t\t\t\t\tconst xd = data[ x ];\n\t\t\t\t\t\tconst yd = data[ y ];\n\t\t\t\t\t\tconst yhat = new Array( yd.length );\n\t\t\t\t\t\tconst resid = new Array( yd.length );\n\t\t\t\t\t\tfor ( let i = 0; i < yhat.length; i++ ) {\n\t\t\t\t\t\t\tyhat[ i ] = yint + slope * xd[ i ];\n\t\t\t\t\t\t\tresid[ i ] = yd[ i ] - yhat[ i ];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst qqPlot = <Plotly\n\t\t\t\t\t\t\tdraggable\n\t\t\t\t\t\t\teditable fit\n\t\t\t\t\t\t\t{...generateQQPlotConfig( resid, 'residuals' )}\n\t\t\t\t\t\t\tmeta={{ type: 'qqplot of regression residuals', x: xd, y: yd }}\n\t\t\t\t\t\t/>;\n\t\t\t\t\t\tconst hist = <Histogram\n\t\t\t\t\t\t\tdata={{ 'Residuals': resid }}\n\t\t\t\t\t\t\tvariable=\"Residuals\"\n\t\t\t\t\t\t\ttitle={t('plotly:histogram-title', { x: 'Residuals' })}\n\t\t\t\t\t\t/>;\n\t\t\t\t\t\tconst residualPlot = <Plotly\n\t\t\t\t\t\t\tdraggable editable fit\n\t\t\t\t\t\t\tdata={[\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tx: yhat,\n\t\t\t\t\t\t\t\t\ty: resid,\n\t\t\t\t\t\t\t\t\tmode: 'markers',\n\t\t\t\t\t\t\t\t\ttype: yhat.length > 2000 ? 'scattergl' : 'scatter'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\tlayout={{\n\t\t\t\t\t\t\t\txaxis: {\n\t\t\t\t\t\t\t\t\ttitle: t('fitted-values')\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tyaxis: {\n\t\t\t\t\t\t\t\t\ttitle: t('residuals')\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\ttitle: t('residuals-vs-fitted')\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tmeta={{ type: 'regression residuals vs. fitted', x: xd, y: yd }}\n\t\t\t\t\t\t/>;\n\t\t\t\t\t\tthis.props.onDiagnostics([ qqPlot, hist, residualPlot ]);\n\t\t\t\t\t}} >\n\t\t\t\t\t\t{t('model-diagnostics')}\n\t\t\t\t\t</Button> : null }\n\t\t\t\t</div>;\n\t\t\t}\n\t\t\treturn output;\n\t\t} catch ( _ ) {\n\t\t\treturn <Alert variant=\"danger\">{t('missing-attributes')}</Alert>;\n\t\t}\n\t}\n}\n\n\n// PROPERTIES //\n\nSimpleLinearRegression.defaultProps = {\n\tgroup: null,\n\tomitMissing: false,\n\tonDiagnostics: null,\n\tonPredict: null\n};\n\nSimpleLinearRegression.propTypes = {\n\tdata: PropTypes.object.isRequired,\n\tx: PropTypes.string.isRequired,\n\ty: PropTypes.string.isRequired,\n\tgroup: PropTypes.oneOfType([\n\t\tPropTypes.string,\n\t\tPropTypes.instanceOf( Factor )\n\t]),\n\tomitMissing: PropTypes.bool,\n\tonDiagnostics: PropTypes.func,\n\tonPredict: PropTypes.func\n};\n\n\n// EXPORTS //\n\nexport default withTranslation( [ 'models', 'plotly' ] )( withPropCheck( SimpleLinearRegression ) );\n"],"sourceRoot":""}