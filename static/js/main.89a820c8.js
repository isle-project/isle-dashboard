(self.webpackChunkisle_dashboard=self.webpackChunkisle_dashboard||[]).push([[179],{53322:function(e,t,a){"use strict";a.d(t,{MP:function(){return p},sY:function(){return m},GI:function(){return g},Qr:function(){return y}});var n=a(98816),s=a.n(n),o=a(2561),r=a.n(o),c=a(63022),i=a(76417),l=a(96162);const u=r()("isle-dashboard:actions:authentication"),d=(e,t)=>{try{return s().post(c.ZP+"/sanitize_user",{id:t.id})}catch(a){return(0,i.EG)(e,a),null}},p=e=>async t=>await d(e,t),m=async(e,t)=>{u("Fetch user credentials..."),localStorage.setItem("ISLE_USER_"+c.ZP,JSON.stringify(t));try{let a=(await s().post(c.ZP+"/credentials_dashboard",{id:t.id})).data;a.picture&&(a.picture=c.ZP+"/avatar/"+a.picture),a={...t,...a};let[n,o]=(e=>{const t=e.ownedNamespaces,a=[];let n=new Set;for(let c=0;c<t.length;c++)n.has(t[c]._id)||(n.add(t[c]._id),a.push(t[c]));const s=e.enrolledNamespaces,o=[];n=new Set;for(let c=0;c<s.length;c++)n.has(s[c]._id)||(n.add(s[c]._id),o.push(s[c]));const r=a.length!==t.length||o.length!==s.length;return r&&(e.ownedNamespaces=a,e.enrolledNamespaces=o),u("Does user need sanitizing? "+r),[e,r]})(a);return e((0,l.Pl)(a)),o&&d(e,t),n}catch(a){return(0,i.EG)(e,a),null}},g=e=>async t=>await m(e,t),y=e=>async({eppn:t,name:a,affil:n,time:o,salt:r,token:u})=>{const d=await(async(e,{eppn:t,name:a,affil:n,time:o,salt:r,token:u})=>{try{const i=await s().post(c.ZP+"/shibboleth",{eppn:t,name:a,affil:n,time:o,salt:r,token:u});return e((0,l.zu)(i.data)),i}catch(d){return(0,i.EG)(e,d),null}})(e,{eppn:t,name:a,affil:n,time:o,salt:r,token:u});return d}},39285:function(e,t,a){"use strict";a.d(t,{Wp:function(){return h},R9:function(){return f},k$:function(){return E},Yc:function(){return b},p6:function(){return _},CA:function(){return N},nm:function(){return A},YV:function(){return D}});var n=a(38603),s=a(98816),o=a.n(s),r=a(14065),c=a(2561),i=a.n(c),l=a(67361),u=a(63022),d=a(39029),p=a(76417),m=a(1209);const g=i()("isle-dashboard:actions:cohorts");function y(e,t){return{type:m.G7,payload:{cohorts:e,user:t}}}const h=async(e,t)=>{try{const a=(await o().get(u.ZP+"/get_enrollable_cohorts")).data.cohorts;g("Retrieved "+a.length+" cohorts..."),e(y(a,t))}catch(a){(0,p.EG)(e,a)}},f=e=>async t=>{await h(e,t)},E=async(e,{namespaceID:t})=>{try{const s=await o().get(u.ZP+"/get_cohorts?"+r.stringify({namespaceID:t}));e((a=s.data.cohorts,{type:m.$L,payload:{cohorts:a,user:n}}))}catch(s){(0,p.EG)(e,s)}var a,n},w=async(e,t,a)=>{try{const n=await o().post(u.ZP+"/add_to_cohort",{cohortID:t});(0,p.wN)(e,{message:n.data.message,level:"success"}),e(function({title:e,owners:t,description:a,_id:n}){return{type:m.Kx,payload:{title:e,description:a,owners:t,_id:n}}}(a));const s=a.title;(0,d.tj)(e,s)}catch(n){(0,p.EG)(e,n)}},b=e=>async(t,a)=>{await w(e,t,a)},_=e=>async(t,a)=>{await(async(e,t,a)=>{try{const n=await o().post(u.ZP+"/delete_cohort",{_id:t});(0,p.wN)(e,{message:n.data.message,level:"success"}),e(y(null)),a&&E(e,{namespaceID:a})}catch(n){(0,p.EG)(e,n)}})(e,t,a)},N=e=>async(t,a)=>{await(async(e,t,a)=>{try{const n=await o().post(u.ZP+"/create_cohort",t);(0,p.wN)(e,{message:n.data.message,level:"success"}),e(y(null)),E(e,{namespaceID:a})}catch(n){(0,p.EG)(e,n)}})(e,t,a)},A=e=>async(t,a)=>{await(async(e,t,a)=>{try{const s=await o().post(u.ZP+"/update_cohort",{cohort:t});let r,c=s.data.message;r=s.data.newEmails&&s.data.newEmails.length>0?{children:n.createElement("div",null,n.createElement("p",null,c),n.createElement("p",null,l.Z.t("common:email-invitations-sent")),n.createElement("p",null,s.data.newEmails.join("\n"))),level:"success",autoDismiss:0,dismissible:"button"}:{message:c,level:"success"},(0,p.wN)(e,r),e(y(null)),E(e,{namespaceID:a})}catch(s){(0,p.EG)(e,s)}})(e,t,a)},T=async e=>{try{const a=await o().get(u.ZP+"/get_all_cohorts");e((t=a.data.cohorts,{type:m.Rr,payload:{cohorts:t}}))}catch(a){(0,p.EG)(e,a)}var t},D=e=>async()=>{await T(e)}},39029:function(e,t,a){"use strict";a.d(t,{ft:function(){return p},h7:function(){return g},OD:function(){return y},tj:function(){return h},Hy:function(){return f},Vo:function(){return E},Ao:function(){return w},q2:function(){return b},IH:function(){return _},kl:function(){return N},to:function(){return A},Ek:function(){return T},WU:function(){return D},SX:function(){return v},BO:function(){return S},Qj:function(){return P}});var n=a(98816),s=a.n(n),o=a(14065),r=a(63022),c=a(36223),i=a(76417),l=a(1209);function u(e){return{type:l.Nh,payload:{lessonName:e}}}function d(e,t){return{type:l.lo,payload:{lessonName:e,props:t}}}function p({lessons:e,namespaceName:t}){return{type:l.qv,payload:{lessons:e,namespaceName:t}}}const m=async e=>{try{const a=await s().get(r.ZP+"/get_public_lessons");e((t=a.data.lessons,{type:l.QI,payload:{lessons:t}}))}catch(a){(0,i.EG)(e,a)}var t},g=e=>async()=>{await m(e)},y=e=>async({lessonName:t,namespaceName:a})=>{const n=await(async(e,{lessonName:t,namespaceName:a})=>{try{return(await s().get(r.ZP+"/get_isle_file?"+o.stringify({lessonName:t,namespaceName:a}))).data}catch(n){return(0,i.EG)(e,n),null}})(e,{lessonName:t,namespaceName:a});return n},h=async(e,t)=>{if(t)try{let a=(await s().get(r.ZP+"/get_lessons?"+o.stringify({namespaceName:t}))).data.lessons;a=a.map(((e,a)=>(e.colorIndex=a%20,e.url=r.ZP+"/"+t+"/"+e.title,e.lockUntil&&(e.lockUntil=new Date(e.lockUntil.time)),e.createdAt||(e.createdAt=new Date(0).toLocaleString()),e.updatedAt||(e.updatedAt=e.createdAt),e))),e(p({lessons:a,namespaceName:t}))}catch(a){(0,i.EG)(e,a)}},f=e=>async t=>{await h(e,t)},E=e=>async({sourceName:t,target:a,targetName:n,source:o})=>{await(async(e,{sourceName:t,target:a,targetName:n,source:o})=>{if(t&&a&&o)try{const c=await s().post(r.ZP+"/copy_lesson",{target:a,source:o,sourceName:t,targetName:n});return(0,i.wN)(e,{message:c.data.message,level:"success"}),c}catch(c){return(0,i.EG)(e,c),c}})(e,{sourceName:t,target:a,targetName:n,source:o})},w=e=>async({target:t,source:a})=>{const n=await(async(e,{target:t,source:a})=>{try{const n=await s().post(r.ZP+"/copy_namespace_lessons",{target:t,source:a});return(0,i.wN)(e,{message:n.data.message,level:"success"}),n}catch(n){return(0,i.EG)(e,n),n}})(e,{target:t,source:a});return n},b=e=>async({lessonName:t,namespaceName:a})=>{await(async(e,{lessonName:t,namespaceName:a})=>{if(!a||!t){const t=new Error("Missing `namespaceName` or `lessonName`.");return(0,i.EG)(e,t),t}try{const n=await s().post(r.ZP+"/delete_lesson",{namespaceName:a,lessonName:t});return e(u(t)),(0,i.wN)(e,{message:n.data.message,level:"success"}),n}catch(n){return(0,i.EG)(e,n),n}})(e,{lessonName:t,namespaceName:a})},_=e=>async({lessonName:t,namespaceName:a})=>{await(async(e,{lessonName:t,namespaceName:a})=>{try{const n=await s().post(r.ZP+"/show_lesson",{namespaceName:a,lessonName:t});(0,i.wN)(e,{message:n.data.message,level:"success"}),e(d(t,{public:!0}))}catch(n){(0,i.EG)(e,n)}})(e,{lessonName:t,namespaceName:a})},N=e=>async({lessonName:t,namespaceName:a})=>{await(async(e,{lessonName:t,namespaceName:a})=>{try{const n=await s().post(r.ZP+"/hide_lesson",{namespaceName:a,lessonName:t});(0,i.wN)(e,{message:n.data.message,level:"success"}),e(d(t,{public:!1}))}catch(n){(0,i.EG)(e,n)}})(e,{lessonName:t,namespaceName:a})},A=e=>async({lessonName:t,namespaceName:a})=>{await(async(e,{lessonName:t,namespaceName:a})=>{try{const n=await s().post(r.ZP+"/activate_lesson?",{namespaceName:a,lessonName:t});(0,i.wN)(e,{message:n.data.message,level:"success"}),e(d(t,{active:!0}))}catch(n){(0,i.EG)(e,n)}})(e,{lessonName:t,namespaceName:a})},T=e=>async({lessonName:t,namespaceName:a})=>{await(async(e,{lessonName:t,namespaceName:a})=>{try{const n=await s().post(r.ZP+"/deactivate_lesson",{namespaceName:a,lessonName:t});(0,i.wN)(e,{message:n.data.message,level:"success"}),e(d(t,{active:!1}))}catch(n){(0,i.EG)(e,n)}})(e,{lessonName:t,namespaceName:a})},D=e=>async({lessonName:t,namespaceName:a,newTitle:n,newDescription:o,lockAfter:l,lockUntil:d,hideFromDashboard:p,template:m})=>{const g=await(async(e,{lessonName:t,namespaceName:a,newTitle:n,newDescription:o,lockAfter:l,lockUntil:d,template:p,hideFromDashboard:m})=>{if(a&&t)try{const g={namespaceName:a,lessonName:t,newTitle:n,newDescription:o,lockAfter:l,lockUntil:d,hideFromDashboard:m};(0,c.isPrimitive)(p)&&(g.template=p);const y=await s().post(r.ZP+"/update_lesson",g);return e(u(t)),(0,i.wN)(e,{message:y.data.message,level:"success"}),h(e,a),!0}catch(g){return(0,i.EG)(e,g),!1}return!1})(e,{lessonName:t,namespaceName:a,newTitle:n,newDescription:o,lockAfter:l,lockUntil:d,hideFromDashboard:p,template:m});return g},O=async e=>{try{const a=await s().get(r.ZP+"/get_all_lessons");e((t=a.data.lessons,{type:l.oJ,payload:{lessons:t}}))}catch(a){(0,i.EG)(e,a)}var t},v=e=>async()=>{await O(e)},k=async e=>{try{const a=await s().get(r.ZP+"/get_template_lessons");e((t=a.data.lessons,{type:l.LJ,payload:{templateLessons:t}}))}catch(a){(0,i.EG)(e,a)}var t},S=e=>async()=>{await k(e)},I=async e=>{try{const a=await s().get(r.ZP+"/get_open_rooms");e((t=a.data.rooms,{type:l.tM,payload:{rooms:t}}))}catch(a){(0,i.EG)(e,a)}var t},P=e=>async()=>{await I(e)}},76417:function(e,t,a){"use strict";a.d(t,{wN:function(){return s},pP:function(){return o},EG:function(){return r}});var n=a(1209);function s(e,t){e({type:n.Dv,payload:t})}const o=e=>t=>{s(e,t)};function r(e,t){let a;t.response?(a="Server response: "+t.response.status+".\n",a+=t.response.data):a=t.message,e({type:n.xe,payload:a})}},33799:function(e,t,a){"use strict";a.d(t,{px:function(){return l},SK:function(){return u},Pj:function(){return d},qn:function(){return p},XE:function(){return m},Jw:function(){return g}});a(38603);var n=a(98816),s=a.n(n),o=a(63022),r=a(67361),c=a(76417),i=a(1209);const l=e=>async()=>{await(async e=>{try{const t=await s().get(o.ZP+"/get_settings");e({type:i.pV,payload:t.data})}catch(t){return(0,c.EG)(e,t)}})(e)},u=e=>async()=>{await(async e=>{try{const t=await s().get(o.ZP+"/get_public_settings");e({type:i.RJ,payload:t.data})}catch(t){return(0,c.EG)(e,t)}})(e)},d=e=>async(t,a)=>{await(async(e,t,a)=>{try{const n=await s().post(o.ZP+"/update_settings",{name:t,value:a});(0,c.wN)(e,{title:r.Z.t("common:updated"),message:n.data.message,level:"success"}),e({type:i.TH,payload:n.data})}catch(n){return(0,c.EG)(e,n)}})(e,t,a)},p=e=>async({language:t,ns:a,key:n,value:l})=>{const u=await(async(e,{language:t,ns:a,key:n,value:l})=>{try{const u=await s().post(o.ZP+"/add_custom_translation",{language:t,ns:a,key:n,value:l});return(0,c.wN)(e,{title:r.Z.t("common:updated"),message:u.data.message,level:"success"}),e({type:i.Ki,payload:u.data}),u}catch(u){return(0,c.EG)(e,u),u}})(e,{language:t,ns:a,key:n,value:l});return u},m=e=>async()=>{await(async e=>{try{const t=await s().get(o.ZP+"/get_translations");e({type:i.oi,payload:t.data})}catch(t){return(0,c.EG)(e,t)}})(e)},g=e=>async({language:t,ns:a,key:n})=>{const l=await(async(e,{language:t,ns:a,key:n})=>{try{const l=await s().post(o.ZP+"/remove_custom_translation",{language:t,ns:a,key:n});return(0,c.wN)(e,{title:r.Z.t("common:removed"),message:l.data.message,level:"success"}),e({type:i.Ki,payload:l.data}),l}catch(l){return(0,c.EG)(e,l),l}})(e,{language:t,ns:a,key:n});return l}},96162:function(e,t,a){"use strict";a.d(t,{Pl:function(){return y},zu:function(){return h},fP:function(){return f},Jv:function(){return E},L$:function(){return w},UA:function(){return _},m8:function(){return A},Vz:function(){return T},vi:function(){return O},r4:function(){return v},IJ:function(){return S},J3:function(){return I},Dv:function(){return P},Pt:function(){return L},b0:function(){return Z},UG:function(){return R},WA:function(){return j},VA:function(){return F}});var n=a(98816),s=a.n(n),o=a(2561),r=a.n(o),c=a(14065),i=a(67361),l=a(63022),u=a(53322),d=a(39285),p=a(76417),m=a(1209);const g=r()("isle-dashboard:actions:user");function y(e){return{type:m.Fw,payload:{email:e.email,verifiedEmail:e.verifiedEmail,name:e.name,enrolledNamespaces:e.enrolledNamespaces,ownedNamespaces:e.ownedNamespaces,organization:e.organization,writeAccess:e.writeAccess,administrator:e.administrator,lessonData:e.lessonData,picture:e.picture,createdAt:e.createdAt,updatedAt:e.updatedAt,score:e.score,spentTime:e.spentTime,licensed:e.licensed,customFields:e.customFields,availableCustomFields:e.availableCustomFields,twoFactorAuth:e.twoFactorAuth}}}function h({token:e,id:t}){return{type:m.CJ,payload:{token:e,id:t}}}const f=e=>async()=>{await(async e=>{try{const t=await s().get(l.ZP+"/get_users");e({type:m.fo,payload:{users:t.data.users}})}catch(t){return(0,p.EG)(e,t)}})(e)},E=e=>async({id:t,password:a})=>{await(async(e,{id:t,password:a})=>{g("Impersonating user with id "+t);try{const n=await s().post(l.ZP+"/impersonate",{id:t,password:a}),o=await(0,u.sY)(e,{id:n.data.id}),r={token:n.data.token,id:n.data.id},c="ISLE_USER_"+l.ZP;localStorage.setItem(c,JSON.stringify(r)),o&&(0,d.Wp)(e,o)}catch(n){(0,p.EG)(e,n)}})(e,{id:t,password:a})},w=e=>async({id:t})=>{await(async(e,{id:t})=>{try{const a=await s().post(l.ZP+"/delete_user",{id:t});(0,p.wN)(e,{title:i.Z.t("common:deleted"),message:a.data.message,level:"success"}),e({type:m.Gp,payload:{id:t}})}catch(a){(0,p.EG)(e,a)}})(e,{id:t})},b=async(e,{avatarData:t,thumbnailData:a})=>{try{let o=await s().post(l.ZP+"/upload_profile_pic",t);const r=o.data.message;let c=o.data.filename;c=l.ZP+"/avatar/"+c,e((n=c,{type:m.bM,payload:{picture:n}})),o=await s().post(l.ZP+"/upload_thumbnail_pic",a),(0,p.wN)(e,{title:i.Z.t("profile-pic-title"),message:r,level:"success",position:"tl"})}catch(o){(0,p.EG)(e,o)}var n},_=e=>async({avatarData:t,thumbnailData:a})=>{await b(e,{avatarData:t,thumbnailData:a})},N=async(e,{writeAccessToken:t})=>{try{const a=await s().post(l.ZP+"/set_write_access",{token:t});return e({type:m.tl}),(0,p.wN)(e,{message:a.data.message+" You can now create your own courses on ISLE and have access to the gallery of public lessons.",level:"success",autoDismiss:10}),!0}catch(a){return(0,p.EG)(e,a),!1}},A=e=>async({writeAccessToken:t})=>await N(e,{writeAccessToken:t}),T=e=>async({email:t})=>{await(async(e,{email:t})=>{try{await s().get(l.ZP+"/forgot_password?"+c.stringify({email:t})),(0,p.wN)(e,{message:"Check your email inbox for a link to choose a new password.",level:"success"})}catch(a){(0,p.EG)(e,a)}})(e,{email:t})},D=async(e,t)=>{try{const a=await s().post(l.ZP+"/update_user",t);e((({name:e,organization:t})=>({type:m.hO,payload:{name:e,organization:t}}))({name:t.name,organization:t.organization,customFields:t.customFields})),(0,p.wN)(e,{message:a.data.message,level:"success"})}catch(a){(0,p.EG)(e,a)}},O=e=>async({name:t,organization:a,password:n,customFields:s})=>{await D(e,{name:t,organization:a,password:n,customFields:s})},v=e=>s().post(l.ZP+"/create_user",e),k=async(e,t)=>{const a=await s().post(l.ZP+"/login",t);return"finish-login-via-tfa"===a.data.message?e(function({email:e,password:t}){return{type:m.Jb,payload:{email:e,password:t}}}(a.data)):e(h(a.data)),a},S=e=>async t=>await k(e,t),I=e=>async t=>{const a=await(async(e,t)=>{try{const a=await s().post(l.ZP+"/login_tfa",t);return e(h(a.data)),a}catch(a){return(0,p.EG)(e,a),a}})(e,t);return a},P=e=>t=>{((e,t)=>{e(y(t))})(e,t)},C=e=>{g("Logging out the current user..."),localStorage.removeItem("ISLE_USER_"+l.ZP),e({type:m.E7})},L=e=>()=>{C(e)},Z=e=>async t=>{await(async(e,t)=>{try{const a=await s().get(l.ZP+"/user_update_check?"+c.stringify({updatedAt:t.updatedAt}));if(g("Received response: "+a.data),!a.data.hasMostRecent){let a=(await s().post(l.ZP+"/credentials_dashboard",{id:t.id})).data;a.picture&&(a.picture=l.ZP+"/avatar/"+a.picture),a={id:t.id,token:t.token,...a},g("Updated user data..."),e(y(a))}}catch(a){(0,p.EG)(e,a)}})(e,t)},R=async e=>{try{return(await s().post(l.ZP+"/confirm_email",{token:e})).data.message}catch(t){return t.response&&t.response.data?t.response.data:t.message}},j=e=>async t=>{await(async(e,t)=>{try{await s().post(l.ZP+"/resend_confirm_email"),(0,p.wN)(e,{title:"Email sent",message:i.Z.t("common:verification-email-sent"),level:"success",position:"tl"})}catch(a){(0,p.EG)(e,a)}})(e)},G=async(e,t)=>{try{const n=await s().post(l.ZP+"/admin_update_user",t);(0,p.wN)(e,{message:n.data.message,level:"success"}),e((a=t,{type:m.Wh,payload:a}))}catch(n){(0,p.EG)(e,n)}var a},F=e=>async t=>{await G(e,t)}},221:function(e,t,a){"use strict";a.d(t,{Z:function(){return o}});var n=a(38603);var s=()=>n.createElement("div",{className:"sk-cube-grid"},n.createElement("div",{className:"sk-cube sk-cube1"}),n.createElement("div",{className:"sk-cube sk-cube2"}),n.createElement("div",{className:"sk-cube sk-cube3"}),n.createElement("div",{className:"sk-cube sk-cube4"}),n.createElement("div",{className:"sk-cube sk-cube5"}),n.createElement("div",{className:"sk-cube sk-cube6"}),n.createElement("div",{className:"sk-cube sk-cube7"}),n.createElement("div",{className:"sk-cube sk-cube8"}),n.createElement("div",{className:"sk-cube sk-cube9"}));var o=function(e){class t extends n.Component{constructor(e){super(e),this.state={component:null}}async componentDidMount(){const{default:t}=await e();this.setState({component:t})}render(){const e=this.state.component;return e?n.createElement(e,this.props):n.createElement(s,null)}}return t}},1209:function(e,t,a){"use strict";a.d(t,{Kx:function(){return n},xe:function(){return s},Dv:function(){return o},$8:function(){return r},tl:function(){return c},WF:function(){return i},H0:function(){return l},Hs:function(){return u},uv:function(){return d},_R:function(){return p},NH:function(){return m},pA:function(){return g},ke:function(){return y},CH:function(){return h},jm:function(){return f},Rm:function(){return E},Nh:function(){return w},s_:function(){return b},SZ:function(){return _},Gp:function(){return N},wd:function(){return A},oF:function(){return T},wx:function(){return D},E4:function(){return O},rh:function(){return v},S5:function(){return k},Rr:function(){return S},ci:function(){return I},oJ:function(){return P},XM:function(){return C},Qd:function(){return L},MI:function(){return Z},fM:function(){return R},rq:function(){return j},W1:function(){return G},C3:function(){return F},oi:function(){return U},Te:function(){return W},oP:function(){return x},Pq:function(){return M},tM:function(){return J},pV:function(){return q},RJ:function(){return z},LJ:function(){return V},Bu:function(){return H},fo:function(){return B},cv:function(){return K},gH:function(){return $},i9:function(){return X},Ze:function(){return Q},kn:function(){return Y},aM:function(){return ee},CJ:function(){return te},Ug:function(){return ae},Jb:function(){return ne},Z9:function(){return se},$L:function(){return oe},qv:function(){return re},QI:function(){return ce},X5:function(){return ie},mI:function(){return le},wL:function(){return ue},JB:function(){return de},B2:function(){return pe},kO:function(){return me},lo:function(){return ge},Rg:function(){return ye},Fw:function(){return he},E7:function(){return fe},hO:function(){return Ee},Wh:function(){return we},bM:function(){return be},eu:function(){return _e},Py:function(){return Ne},TH:function(){return Ae},LX:function(){return Te},Ki:function(){return De},G7:function(){return Oe}});const n="ADD_ENROLLED_NAMESPACE",s="ADD_ERROR_NOTIFICATION",o="ADD_NOTIFICATION",r="APPEND_CREATED_NAMESPACE",c="AUTHENTICATED",i="CHANGED_NAMESPACE",l="CREATED_ANNOUNCEMENT",u="CREATED_CUSTOM_FIELD",d="CREATED_BACKUP",p="CREATED_ROLE",m="CREATED_TICKET",g="DELETED_BACKUP",y="DELETED_CURRENT_NAMESPACE",h="DELETED_CUSTOM_FIELD",f="DELETED_EVENT",E="DELETED_FILE",w="DELETED_LESSON",b="DELETED_ROLE",_="DELETED_TICKET",N="DELETED_USER",A="DELETED_ANNOUNCEMENT",T="DISABLED_TFA",D="EDITED_ANNOUNCEMENT",O="ENABLED_TFA",v="FIELD_POSITION_DECREMENTED",k="FIELD_POSITION_INCREMENTED",S="GET_ALL_COHORTS",I="GET_ALL_FILES",P="GET_ALL_LESSONS",C="GET_ALL_NAMESPACES",L="GET_ALL_ROLES",Z="GET_BACKUPS",R="GET_EVENTS",j="GET_ALL_TICKETS",G="GET_COURSE_TICKETS",F="GET_CUSTOM_FIELDS",U="GET_CUSTOM_TRANSLATIONS",W="GET_OVERVIEW_STATISTICS",x="GET_HISTORICAL_OVERVIEW_STATISTICS",M="GET_REQUEST_STATISTICS",J="GET_ROOMS",q="GET_SETTINGS",z="GET_SETTINGS_PUBLIC",V="GET_TEMPLATE_LESSONS",H="GET_TFA_QRCODE",B="GET_USERS",K="GET_USER_TICKETS",$="LESSON_ORDER",X="LESSON_ORDER_DIRECTION",Q="RECEIVED_FILES",Y="RECEIVED_LICENSE",ee="RECEIVED_NAMESPACE_FILES",te="RECEIVED_TOKEN",ae="REMOVED_LICENSE",ne="REQUEST_TFA",se="RETRIEVED_BADGES",oe="RETRIEVED_COHORTS",re="RETRIEVED_LESSONS",ce="RETRIEVED_PUBLIC_LESSONS",ie="SEARCH_PHRASE_SET",le="TICKET_CLOSED",ue="TICKET_OPENED",de="TICKET_MESSAGE_ADDED",pe="TICKET_PRIORITY_UPDATED",me="TRIGGERED_EVENT",ge="UPDATED_LESSON",ye="UPDATED_OWNED_NAMESPACE",he="LOGGED_IN",fe="LOGGED_OUT",Ee="USER_UPDATED",we="USER_UPDATED_BY_ADMIN",be="USER_PICTURE_MODIFIED",_e="USER_RECEIVED_BADGES",Ne="UPDATED_ROLE",Ae="UPDATED_SETTINGS",Te="UPDATED_STUDENT_PROGRESS",De="UPDATED_TRANSLATIONS",Oe="RETRIEVED_ENROLLABLE_COHORTS"},63022:function(e,t,a){"use strict";a.d(t,{ZP:function(){return s}});JSON.parse('{"$":"https://isle.heinz.cmu.edu"}').$;let n;n=window.location.origin;var s=n},94883:function(e,t,a){"use strict";a.d(t,{eC:function(){return u},Yy:function(){return d}});var n=a(98816),s=a.n(n),o=a(44128),r=a(50346);s().interceptors.request.use((e=>{e.headers["Accept-Language"]=o.Z.language;const t=r.h.getState().user.token;return t&&(e.headers.Authorization=`JWT ${t}`),e}));const c=s().create();c.interceptors.request.use((e=>{e.headers["Accept-Language"]=o.Z.language;const t=r.h.getState(),a=t.user.token;a&&(e.headers.Authorization=`JWT ${a}`),e.headers["X-Context-Level"]="namespace";const n=e.data.namespaceID||e.params.namespaceID||t.namespace._id;return e.headers["X-Context-Target"]=n,e}));s().create();const i=s().create();i.interceptors.request.use((e=>{e.headers["Accept-Language"]=o.Z.language;const t=r.h.getState(),a=t.user.token;a&&(e.headers.Authorization=`JWT ${a}`),e.headers["X-Context-Level"]="lesson";let n=e.data.lessonID||e.params.lessonID;return n+=t.namespace._id,e.headers["X-Context-Target"]=n,e}));const l=s().create();l.interceptors.request.use((e=>{e.headers["Accept-Language"]=o.Z.language;const t=r.h.getState().user.token;return t&&(e.headers.Authorization=`JWT ${t}`),e.headers["X-Context-Level"]="global",e.headers["X-Context-Target"]=!0,e}));const u=c,d=l},44128:function(e,t,a){"use strict";var n=a(67361),s=a(13570),o=a(49406),r=a(39265),c=a.n(r),i=a(13629),l=a(63022),u=a(50346);n.Z.use(i.Z).use(o.Z).use(s.Db).init({debug:!1,lng:localStorage.getItem("i18nextLng")||"en",fallbackLng:"en",backend:{backends:[c(),c(),c()],backendOptions:[{loadPath:"./locales/{{lng}}/{{ns}}.json"},{loadPath:l.ZP+"/locales/{{lng}}/{{ns}}.json"},{loadPath:"https://cdn.jsdelivr.net/npm/@isle-project/locales/components/{{ns}}/{{lng}}.json"}]},react:{useSuspense:!1},interpolation:{escapeValue:!1}}),n.Z.store.on("added",(function(e,t){const a=u.h.getState().translations[e][t];if(a){const s=Object.keys(a);n.Z.store.data[e][t+"_ORIGINAL"]||(n.Z.store.data[e][t+"_ORIGINAL"]={});for(let o=0;o<s.length;o++)n.Z.store.data[e][t+"_ORIGINAL"][s[o]]=n.Z.store.data[e][t][s[o]],n.Z.store.data[e][t][s[o]]=a[s[o]]}})),t.Z=n.Z},50346:function(e,t,a){"use strict";a.d(t,{h:function(){return nt}});a(30752);var n=a(38603),s=a(32906),o=a(42690),r=a.n(o),c=a(30322),i=a(46770),l=a(63243),u=a(45265),d=a(16767),p=a(3712),m=a(27149),g=a(45014),y=a.n(g),h=a(1209);const f={cohorts:[],events:[],files:[],lessons:[],lessonsMap:{},namespaces:[],roles:[],rooms:[],tickets:[],users:[],statistics:{},requestStatistics:[],historicalStatistics:[],backups:[],license:null,settings:{}};function E(e=f,t){switch(t.type){case h.fo:{let a=t.payload.users;return a=a.map((e=>{const t=y()(e.lessonData);let a=0,n=0;for(let s=0;s<t.length;s++){const o=t[s];a+=e.lessonData[o].chatMessages;const r=y()(e.lessonData[o].actionTypes);for(let t=0;t<r.length;t++)n+=e.lessonData[o].actionTypes[r[t]]}return e.nActions=n,e.chatMessages=a,e.createdAt=new Date(e.createdAt),e.updatedAt=new Date(e.updatedAt),e})),Object.assign({},e,{users:a})}case h.Rr:{let a=t.payload.cohorts;return a=a.map((e=>(e.startDate=new Date(e.startDate),e.endDate=new Date(e.endDate),e))),Object.assign({},e,{cohorts:a})}case h.ci:{let a=t.payload.files;return a=a.map((e=>(e.updatedAt=new Date(e.updatedAt),e))),Object.assign({},e,{files:a})}case h.Rm:{const a=e.files.filter((e=>e._id!==t.payload.id));return Object.assign({},e,{files:a})}case h.oJ:{let a=t.payload.lessons;const n={...e.lessonsMap};return a=a.map((e=>(e.createdAt=new Date(e.createdAt),e.updatedAt=new Date(e.updatedAt),n[e._id]=e.title,e))),Object.assign({},e,{lessons:a,lessonsMap:n})}case h.XM:{let a=t.payload.namespaces;return a=a.map((e=>(e.createdAt=new Date(e.createdAt),e.updatedAt=new Date(e.updatedAt),e))),Object.assign({},e,{namespaces:a})}case h.fM:{let a=t.payload.events;return a=a.map((e=>(e.time=new Date(e.time),e))),Object.assign({},e,{events:a})}case h.tM:{let a=t.payload.rooms;return a=a.map((e=>(e.startTime=new Date(e.startTime),e))),Object.assign({},e,{rooms:a})}case h.jm:{const a=e.events.filter((e=>e._id!==t.payload.id));return Object.assign({},e,{events:a})}case h.Gp:{const a=e.users.filter((e=>e._id!==t.payload.id));return Object.assign({},e,{users:a})}case h.kO:{const a=e.events.slice();for(let e=0;e<a.length;e++)a[e]._id===t.payload.id&&(a[e].done=!0);return Object.assign({},e,{events:a})}case h.Wh:{let a=e.users.slice();for(let e=0;e<a.length;e++){const n=a[e];if(n._id===t.payload.id){const e=y()(t.payload);for(let a=0;a<e.length;a++){const s=e[a];"id"!==s&&(n[s]=t.payload[s])}}}return Object.assign({},e,{users:a})}case h.Te:return Object.assign({},e,{statistics:t.payload.statistics});case h.rq:{let a=t.payload.tickets;return a=a.map((e=>(e.createdAt=new Date(e.createdAt),e.updatedAt=new Date(e.updatedAt),e))),Object.assign({},e,{tickets:a})}case h.SZ:{const a=e.tickets.filter((e=>e._id!==t.payload.id));return Object.assign({},e,{tickets:a})}case h.wL:{const a=e.tickets.map((e=>(e._id===t.payload.id&&(e.done=!1),e)));return Object.assign({},e,{tickets:a})}case h.B2:{const a=e.tickets.map((e=>(e._id===t.payload.id&&(e.priority=t.payload.priority),e)));return Object.assign({},e,{tickets:a})}case h.mI:{const a=e.tickets.map((e=>(e._id===t.payload.id&&(e.done=!0),e)));return Object.assign({},e,{tickets:a})}case h.JB:{const a=e.tickets.map((e=>{if(e._id===t.payload.id){const a=t.payload.message;a.picture=a.picture.substring(a.picture.lastIndexOf("/")+1),e.messages.unshift(a)}return e}));return Object.assign({},e,{tickets:a})}case h.kn:return Object.assign({},e,{license:t.payload.license});case h.Ug:return Object.assign({},e,{license:null});case h.oP:{const a=t.payload.statistics.map((e=>(e.createdAt=e.createdAt.substring(0,e.createdAt.indexOf("T")),e)));return Object.assign({},e,{historicalStatistics:a})}case h.Pq:return Object.assign({},e,{requestStatistics:t.payload.statistics});case h.MI:return Object.assign({},e,{backups:t.payload.backups});case h.uv:{const a=e.backups.slice();return a.push(t.payload.backup),Object.assign({},e,{backups:a})}case h.pA:{const a=e.backups.filter((e=>e._id!==t.payload.id));return Object.assign({},e,{backups:a})}case h.pV:return Object.assign({},e,{settings:t.payload});case h.TH:return Object.assign({},e,{settings:t.payload.settings});case h.Qd:{const a=t.payload.roles;return Object.assign({},e,{roles:a})}case h._R:{const a=e.roles.slice();return a.push(t.payload.role),Object.assign({},e,{roles:a})}case h.s_:{const a=e.roles.filter((e=>e._id!==t.payload.id));return Object.assign({},e,{roles:a})}case h.Py:{const{role:a}=t.payload,n=e.roles.map((e=>a._id===e._id?a:e));return Object.assign({},e,{roles:n})}default:return e}}function w(e=null,t){return t.type===h.Z9?t.payload.badges:e}var b=a(22949),_=a.n(b),N=a(28494),A=a.n(N),T=a(43392),D=a.n(T),O=a(89506),v=a.n(O);function k(e,t){return(""+e.title).localeCompare(t.title)}function S(e=null,t){if(t.type===h.G7){let e=t.payload.cohorts;return _()(e)?(e=e.filter((e=>{let a=e.emailFilter||"";return A()(a)?(a=D()(a),a.test(t.payload.user.email)):v()(t.payload.user.email,a||"")})),e.sort(k)):e}return e}var I=a(74802),P=a.n(I);function C(e,t){return(""+e.title).localeCompare(t.title)}const L={_id:null,title:"",description:"",owners:"",enableTicketing:!1,announcements:[],lessons:[],cohorts:[],files:[],ownerFiles:[],tickets:[]};function Z(e=L,t){switch(t.type){case h.WF:return Object.assign({},e,{_id:t.payload._id,title:t.payload.title,description:t.payload.description,announcements:t.payload.announcements,enableTicketing:t.payload.enableTicketing,owners:t.payload.owners,cohorts:t.payload.cohorts});case h.ke:return L;case h.LX:{const{cohort:a,email:n,lessonID:s,progress:o}=t.payload,r=e.cohorts;for(let e=0;e<r.length;e++)if(r[e].title===a){const t=r[e].members;for(let e=0;e<t.length;e++)if(t[e].email===n){t[e].lessonData[s].progress=o/100;break}break}return Object.assign({},e,{cohorts:r})}case h.qv:return t.payload.namespaceName===e.title?Object.assign({},e,{lessons:t.payload.lessons}):e;case h.$L:return Object.assign({},e,{cohorts:t.payload.cohorts.sort(C)});case h.Nh:{let a=e.lessons.slice();return a=a.filter((e=>e.title!==t.payload.lessonName)),Object.assign({},e,{lessons:a})}case h.lo:{let a=e.lessons.slice();const{props:n,lessonName:s}=t.payload;for(let e=0;e<a.length;e++)if(a[e].title===s){for(let t in n)P()(n,t)&&(a[e][t]=n[t]);break}return Object.assign({},e,{lessons:a})}case h.aM:{let a=e.lessons,n=t.payload.files;n=n.map((e=>{e.updatedAt=new Date(e.updatedAt);for(let t=0;t<a.length;t++)if(a[t]._id===e.lesson){e.lesson=a[t];break}return e}));const s={};return t.payload.owner?s.ownerFiles=n:s.files=n,Object.assign({},e,s)}case h.wx:{const a=e.announcements.slice();for(let e=0;e<a.length;e++)a[e].createdAt===t.payload.announcement.createdAt&&(a[e]=t.payload.announcement);return Object.assign({},e,{announcements:a})}case h.H0:{const a=e.announcements.slice();return a.unshift(t.payload.announcement),Object.assign({},e,{announcements:a})}case h.wd:{const a=e.announcements.slice();return a.splice(t.payload.index,1),Object.assign({},e,{announcements:a})}case h.W1:{let a=t.payload.tickets;return a=a.map((e=>(e.createdAt=new Date(e.createdAt),e))),Object.assign({},e,{tickets:a})}case h.wL:{const a=e.tickets.map((e=>(e._id===t.payload.id&&(e.done=!1),e)));return Object.assign({},e,{tickets:a})}case h.mI:{const a=e.tickets.map((e=>(e._id===t.payload.id&&(e.done=!0),e)));return Object.assign({},e,{tickets:a})}case h.B2:{const a=e.tickets.map((e=>(e._id===t.payload.id&&(e.priority=t.payload.priority),e)));return Object.assign({},e,{tickets:a})}case h.JB:{const a=e.tickets.map((e=>{if(e._id===t.payload.id){const a=t.payload.message;a.picture=a.picture.substring(a.picture.lastIndexOf("/")+1),e.messages.unshift(a)}return e}));return Object.assign({},e,{tickets:a})}case h.E7:return L;default:return e}}const R={message:"",level:"",position:"tl",children:null,time:null,autoDismiss:5};function j(e=R,t){switch(t.type){case h.Dv:return Object.assign({},R,{...t.payload,time:new Date});case h.xe:return{title:"Error encountered",message:t.payload,level:"error",position:"tl",autoDismiss:5,time:new Date};default:return e}}const G={};function F(e=G,t){switch(t.type){case h.oi:return Object.assign({},e,t.payload);case h.Ki:return Object.assign({},e,t.payload.translations);default:return e}}const U={};function W(e=U,t){switch(t.type){case h.RJ:return Object.assign({},e,t.payload);case h.TH:return Object.assign({},e,t.payload.settings);default:return e}}var x=a(63022);const M={lessons:null};function J(e=M,t){if(t.type===h.QI){let a=t.payload.lessons;return a=a.map(((e,t)=>(e.colorIndex=t%20,e.url=x.ZP+"/"+e.namespace+"/"+e.title,e.createdAt||(e.createdAt=new Date(0).toLocaleString()),e.updatedAt||(e.updatedAt=e.createdAt),e))),Object.assign({},e,{lessons:a})}return e}var q=a(34113),z=a(64817),V=a.n(z);const H={phrase:null,type:"sequentially",direction:"ascending"};function B(e=H,t){switch(t.type){case h.X5:return Object.assign({},e,{phrase:V()(t.payload.phrase)});case h.gH:return Object.assign({},e,{type:t.payload.type});case h.i9:return Object.assign({},e,{direction:t.payload.direction});case h.E7:case q.nk:return H;default:return e}}var K=a(92552),$=a.n(K),X=a(63041),Q=a.n(X);const Y={loggedIn:!1,email:"",verifiedEmail:!1,name:"",organization:"",writeAccess:!1,administrator:!1,enrolledNamespaces:[],ownedNamespaces:[],lessonData:{},picture:null,createdAt:null,updatedAt:null,score:null,spentTime:null,files:null,badges:null,id:null,token:null,tickets:[],licensed:!1,customFields:null,availableCustomFields:[],twoFactorAuth:!1,requestTFA:null,templateLessons:[]};function ee(e,t){for(let a=0;a<e.length;a++)if(e[a].title===t)return e[a];return null}function te(e=Y,t){switch(t.type){case h.CJ:return Object.assign({},e,{token:t.payload.token,id:t.payload.id});case h.Fw:return Object.assign({},e,{email:t.payload.email,verifiedEmail:t.payload.verifiedEmail,name:t.payload.name,enrolledNamespaces:t.payload.enrolledNamespaces,ownedNamespaces:t.payload.ownedNamespaces,organization:t.payload.organization,writeAccess:t.payload.writeAccess,administrator:t.payload.administrator,picture:t.payload.picture,lessonData:t.payload.lessonData,createdAt:t.payload.createdAt,updatedAt:t.payload.updatedAt,score:t.payload.score,spentTime:t.payload.spentTime,licensed:t.payload.licensed,customFields:t.payload.customFields,availableCustomFields:t.payload.availableCustomFields,twoFactorAuth:t.payload.twoFactorAuth,loggedIn:!0});case h.tl:return Object.assign({},e,{writeAccess:!0});case h.E7:return Y;case h.hO:return Object.assign({},e,{name:t.payload.name,organization:t.payload.organization,customFields:t.payload.customFields});case h.bM:return Object.assign({},e,{picture:t.payload.picture});case h.$8:{const a=e.ownedNamespaces.slice();return a.push(t.payload.namespace),Object.assign({},e,{ownedNamespaces:a})}case h.ke:{const a=[];for(let n=0;n<e.ownedNamespaces.length;n++){const s=e.ownedNamespaces[n];s._id!==t.payload.id&&a.push(s)}return Object.assign({},e,{ownedNamespaces:a})}case h.qv:{const a=e.enrolledNamespaces.slice();for(let e=0;e<a.length;e++){a[e].title===t.payload.namespaceName&&(a[e].lessons=t.payload.lessons)}return Object.assign({},e,{enrolledNamespaces:a})}case h.Rg:{const a=e.ownedNamespaces.slice();for(let e=0;e<a.length;e++){const n=a[e];n._id===t.payload._id?a[e]=t.payload:a[e]=n}return Object.assign({},e,{ownedNamespaces:a})}case h.Kx:{const a=e.enrolledNamespaces.slice();return a.push(t.payload),Object.assign({},e,{enrolledNamespaces:a})}case h.H0:{const a=t.payload.namespaceName,n=Q()(e.enrolledNamespaces);let s=ee(n,a);s&&s.announcements.unshift(t.payload.announcement);const o=Q()(e.ownedNamespaces);return s=ee(o,a),s&&s.announcements.unshift(t.payload.announcement),Object.assign({},e,{enrolledNamespaces:n,ownedNamespaces:o})}case h.wx:{const a=t.payload.namespaceName,n=t.payload.announcement,s=n.createdAt,o=Q()(e.enrolledNamespaces);let r=ee(o,a);if(r)for(let e=0;e<r.announcements.length;e++)r.announcements[e].createdAt===s&&(r.announcements[e]=n);const c=Q()(e.ownedNamespaces);if(r=ee(c,a),r)for(let e=0;e<r.announcements.length;e++)r.announcements[e].createdAt===s&&(r.announcements[e]=n);return Object.assign({},e,{enrolledNamespaces:o,ownedNamespaces:c})}case h.wd:{const a=t.payload.namespaceName,n=Q()(e.enrolledNamespaces);let s=ee(n,a);s&&s.announcements.splice(t.payload.index,1);const o=Q()(e.ownedNamespaces);return s=ee(o,a),s&&s.announcements.splice(t.payload.index,1),Object.assign({},e,{enrolledNamespaces:n,ownedNamespaces:o})}case h.Ze:return Object.assign({},e,{files:$()(t.payload.files,(e=>e.namespace))});case h.cv:{let a=t.payload.tickets;return a=a.map((e=>(e.createdAt=new Date(e.createdAt),e))),Object.assign({},e,{tickets:a})}case h.NH:{const a=e.tickets.slice();return a.push({...t.payload,messages:[],user:{picture:e.picture.substring(e.picture.lastIndexOf("/")+1),name:e.name,email:e.email}}),Object.assign({},e,{tickets:a})}case h.wL:{const a=e.tickets.map((e=>(e._id===t.payload.id&&(e.done=!1),e)));return Object.assign({},e,{tickets:a})}case h.mI:{const a=e.tickets.map((e=>(e._id===t.payload.id&&(e.done=!0),e)));return Object.assign({},e,{tickets:a})}case h.JB:{const a=e.tickets.map((e=>{if(e._id===t.payload.id){const a=t.payload.message;a.picture=a.picture.substring(a.picture.lastIndexOf("/")+1),e.messages.unshift(a)}return e}));return Object.assign({},e,{tickets:a})}case h.eu:return Object.assign({},e,{badges:t.payload.badges});case h.C3:case h.rh:case h.S5:return Object.assign({},e,{availableCustomFields:t.payload.customFields});case h.CH:{const a=[];for(let n=0;n<e.availableCustomFields.length;n++){const s=e.availableCustomFields[n];s._id!==t.payload.id&&a.push(s)}return Object.assign({},e,{availableCustomFields:a})}case h.Hs:{const a=e.availableCustomFields.slice();return a.push({...t.payload}),Object.assign({},e,{availableCustomFields:a})}case h.E4:return Object.assign({},e,{twoFactorAuth:t.payload.verified});case h.oF:return Object.assign({},e,{twoFactorAuth:!t.payload.disabled});case h.Jb:return Object.assign({},e,{requestTFA:{email:t.payload.email,password:t.payload.password}});case h.LJ:return Object.assign({},e,{templateLessons:t.payload.templateLessons});default:return e}}var ae=a(91532),ne=a.n(ae),se=a(2561),oe=a.n(se),re=a(22109),ce=a(83064),ie=a(92290),le=a.n(ie),ue=a(98816),de=a.n(ue),pe=a(221),me=a(53322),ge=a(39285),ye=a(33799),he=a(96162),fe=a(82892),Ee=a.n(fe);const we={NotificationItem:{DefaultStyle:{margin:"20px 2px 2px 1px"},info:{color:"black",backgroundColor:"white",boxShadow:"0 0 4px darkslategray",height:"400px",width:"400px",borderTop:"none"}}};class be extends n.Component{constructor(e){super(e)}componentDidUpdate(e,t){const a=this.props.notification;e.notification.time!==a.time&&this.notificationSystem.addNotification(a)}render(){return n.createElement(Ee(),{style:we,ref:e=>{this.notificationSystem=e}})}}be.propTypes={notification:ne().object.isRequired};var _e=(0,c.$j)((function(e){return{notification:e.notification}}))(be);const Ne=(0,pe.Z)((()=>Promise.all([a.e(4763),a.e(6143),a.e(1765),a.e(2797),a.e(3956),a.e(8511)]).then(a.bind(a,38511)))),Ae=(0,pe.Z)((()=>Promise.all([a.e(2342),a.e(3394)]).then(a.bind(a,88513)))),Te=(0,pe.Z)((()=>Promise.all([a.e(2342),a.e(2310)]).then(a.bind(a,93009)))),De=(0,pe.Z)((()=>Promise.all([a.e(351),a.e(6143),a.e(1765),a.e(2797),a.e(560),a.e(7879),a.e(6784)]).then(a.bind(a,46784)))),Oe=(0,pe.Z)((()=>Promise.all([a.e(351),a.e(2454),a.e(924)]).then(a.bind(a,33255)))),ve=(0,pe.Z)((()=>Promise.all([a.e(351),a.e(6143),a.e(2454),a.e(1765),a.e(2797),a.e(2779),a.e(1610),a.e(4466),a.e(637),a.e(6625)]).then(a.bind(a,41156)))),ke=(0,pe.Z)((()=>Promise.all([a.e(4763),a.e(351),a.e(6143),a.e(2454),a.e(1765),a.e(2797),a.e(2779),a.e(1610),a.e(4268),a.e(4466),a.e(637),a.e(4179)]).then(a.bind(a,94803)))),Se=(0,pe.Z)((()=>Promise.all([a.e(4763),a.e(351),a.e(6143),a.e(2454),a.e(1765),a.e(2797),a.e(4945)]).then(a.bind(a,64945)))),Ie=(0,pe.Z)((()=>Promise.all([a.e(4763),a.e(351),a.e(6143),a.e(2454),a.e(1765),a.e(2797),a.e(6210)]).then(a.bind(a,86210)))),Pe=(0,pe.Z)((()=>a.e(2971).then(a.bind(a,2971)))),Ce=(0,pe.Z)((()=>a.e(1426).then(a.bind(a,1426)))),Le=(0,pe.Z)((()=>Promise.all([a.e(351),a.e(6143),a.e(1765),a.e(2797),a.e(1008)]).then(a.bind(a,51008)))),Ze=(0,pe.Z)((()=>Promise.all([a.e(351),a.e(6143),a.e(1765),a.e(2797),a.e(7667)]).then(a.bind(a,87667)))),Re=(0,pe.Z)((()=>Promise.all([a.e(351),a.e(6143),a.e(2454),a.e(1765),a.e(5333)]).then(a.bind(a,99352)))),je=(0,pe.Z)((()=>Promise.all([a.e(351),a.e(2454),a.e(9429)]).then(a.bind(a,84530)))),Ge=(0,pe.Z)((()=>Promise.all([a.e(4763),a.e(351),a.e(6143),a.e(2454),a.e(1765),a.e(2797),a.e(2779),a.e(1610),a.e(6597),a.e(8201)]).then(a.bind(a,38201)))),Fe=(0,pe.Z)((()=>Promise.all([a.e(4763),a.e(351),a.e(6143),a.e(2454),a.e(1765),a.e(2797),a.e(2779),a.e(1610),a.e(9471),a.e(4268),a.e(172),a.e(1598),a.e(4688),a.e(1535),a.e(5230),a.e(560),a.e(1050),a.e(3374),a.e(6815)]).then(a.bind(a,4526)))),Ue=(0,pe.Z)((()=>Promise.all([a.e(4763),a.e(351),a.e(6143),a.e(1765),a.e(2797),a.e(2779),a.e(1610),a.e(9180),a.e(8251)]).then(a.bind(a,8251)))),We=(0,pe.Z)((()=>Promise.all([a.e(4763),a.e(351),a.e(6143),a.e(2454),a.e(1765),a.e(2797),a.e(9180),a.e(2604),a.e(4421)]).then(a.bind(a,74075)))),xe=(0,pe.Z)((()=>Promise.all([a.e(4763),a.e(351),a.e(6143),a.e(2454),a.e(1765),a.e(2797),a.e(2779),a.e(1610),a.e(8046),a.e(3374),a.e(6756)]).then(a.bind(a,49615)))),Me=(0,pe.Z)((()=>Promise.all([a.e(4763),a.e(351),a.e(6143),a.e(9180),a.e(5049)]).then(a.bind(a,45396)))),Je="ISLE_USER_"+x.ZP,qe=["/create-namespace","/edit-namespace/:namespace","/edit-namespace","/namespace-data/:namespace","/profile","/lessons/:namespace","/lessons","/gallery","/enroll","/admin","/admin-settings"],ze=/(?:courses|new-password|complete-registration|confirm-email|shibboleth|signup|login|login-tfa|terms|privacy)/,Ve=oe()("isle-dashboard");class He extends n.Component{async componentDidMount(){const e=this.props.history;if(this.props.getCustomTranslations(),this.props.getPublicSettings(),!this.props.isLoggedIn&&!ze.test(e.location.pathname)){let a=localStorage.getItem(Je);if(a){a=JSON.parse(a);const e=await this.props.fetchCredentials(a);e&&this.props.getEnrollableCohorts(e)}else try{const e=await de().get(x.ZP+"/saml-xmw/session");this.props.dispatch((0,he.zu)(e.data));const t=await this.props.fetchCredentials(e.data);t&&this.props.getEnrollableCohorts(t)}catch(t){e.replace("/login")}}if(this.props.isLoggedIn){Ve("User is logged in, check local storage...");localStorage.getItem(Je)||(Ve("User is logged in, but no local storage found -> write to local storage"),localStorage.setItem(Je,JSON.stringify({token:this.props.user.token,id:this.props.user.id})))}}componentDidUpdate(e){const t=this.props.history,a=e.isLoggedIn&&!this.props.isLoggedIn,n=!e.isLoggedIn&&this.props.isLoggedIn,s=t.location.pathname;if(n)if("/login-tfa"===s){const e=this.props.user.writeAccess?"/lessons":"/profile";t.push(e)}else if(s&&"/"!==s&&"/login"!==s&&"/shibboleth"!==s)Ve("User has logged in, redirecting to: "+s),t.push(t.location.pathname);else{const e=this.props.user.writeAccess?"/lessons":"/profile";Ve("User has logged in, redirecting to default page: "+s),t.push(e)}else if(a)t.push("/login");else if(this.props.isLoggedIn&&s&&("/"===s||"/login"===s||"/login-tfa"===s||"/shibboleth"===s)){const e=this.props.user.writeAccess?"/lessons":"/profile";t.push(e)}}render(){const{settings:e}=this.props;let t=null;return this.props.isLoggedIn&&(t=n.createElement(n.Fragment,null,n.createElement(re.AW,{path:qe,component:De,history:this.props.history}),n.createElement(re.AW,{path:"/create-namespace",component:ve}),n.createElement(re.AW,{path:"/edit-namespace/:namespace",component:ke}),n.createElement(re.AW,{path:"/namespace-data/:namespace",exact:!0,component:Fe}),n.createElement(re.AW,{path:"/namespace-data/:namespace/:subpage",component:Fe}),n.createElement(re.AW,{path:"/profile",component:xe}),n.createElement(re.AW,{path:"/lessons",exact:!0,component:We}),n.createElement(re.AW,{path:"/lessons/:namespace",component:We}),n.createElement(re.AW,{path:"/gallery",component:Ue}),n.createElement(re.AW,{path:"/enroll",component:Me}),n.createElement(re.AW,{path:"/admin",exact:!0,component:Le}),n.createElement(re.AW,{path:"/admin/:subpage",component:Le}),n.createElement(re.AW,{path:"/admin/settings",exact:!0,component:Ze}),n.createElement(re.AW,{path:"/admin/settings/:subpage",component:Ze}))),n.createElement(ce.B,null,n.createElement(m.xI,{history:this.props.history},n.createElement("div",{className:"App"},t,n.createElement(ce.q,null,n.createElement("title",null,function(){console.log(window.location.hash);const e=le()(window.location.hash.replace(/^\//,""));return console.log(e),`${e} | ISLE Dashboard`}())),n.createElement(re.AW,{path:"/*",component:Ne,history:this.props.history}),n.createElement(re.AW,{exact:!0,path:"/",component:Re}),n.createElement(re.AW,{path:"/login",component:Re}),n.createElement(re.AW,{path:"/login-tfa",component:je}),n.createElement(re.AW,{path:"/new-password",component:Se}),n.createElement(re.AW,{path:"/complete-registration",component:Ie}),n.createElement(re.AW,{path:"/confirm-email",component:Pe}),n.createElement(re.AW,{path:"/shibboleth",component:Ce}),e.allowUserRegistrations?n.createElement(re.AW,{path:"/signup",component:Ge}):null,n.createElement(re.AW,{path:"/forgot-password",component:Oe}),n.createElement(re.AW,{path:"/terms",component:Ae}),n.createElement(re.AW,{path:"/privacy",component:Te}),n.createElement(_e,null))))}}He.propTypes={dispatch:ne().func.isRequired,fetchCredentials:ne().func.isRequired,getCustomTranslations:ne().func.isRequired,getEnrollableCohorts:ne().func.isRequired,getPublicSettings:ne().func.isRequired,history:ne().object.isRequired,isLoggedIn:ne().bool.isRequired,settings:ne().object.isRequired,user:ne().object.isRequired};var Be=(0,c.$j)((function(e){return{isLoggedIn:e.user.loggedIn,user:e.user,settings:e.settings}}),(function(e){return{dispatch:e,fetchCredentials:(0,me.GI)(e),getCustomTranslations:(0,ye.XE)(e),getPublicSettings:(0,ye.SK)(e),getEnrollableCohorts:(0,ge.R9)(e)}}))(He);const Ke=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function $e(e,t){navigator.serviceWorker.register(e).then((e=>{e.onupdatefound=()=>{const a=e.installing;null!==a&&(a.onstatechange=()=>{"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((e=>{console.error("Error during service worker registration:",e)}))}a(94883);const Xe={key:"root",blacklist:["router","license","requestTFA"],storage:r()},Qe=(0,u.q_)(),Ye=(et=Qe,(0,d.UY)({admin:E,badges:w,cohorts:S,gallery:J,namespace:Z,notification:j,router:(0,m.iz)(et),search:B,settings:W,translations:F,user:te}));var et;const tt=(0,i.OJ)(Xe,Ye),at=(0,p.Z)(Qe),nt=(0,d.MT)(tt,(0,d.md)(at)),st=(0,i.p5)(nt);var ot;s.render(n.createElement(c.zt,{store:nt},n.createElement(l.r,{loading:null,persistor:st},n.createElement(Be,{history:Qe}))),document.getElementById("root")),"serviceWorker"in navigator&&window.addEventListener("load",(()=>{const e=`${window.location.origin}${window.location.pathname}service-worker.js`;Ke?(function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((a=>{const n=a.headers.get("content-type");404===a.status||null!==n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((e=>{e.unregister().then((()=>{window.location.reload()}))})):$e(e,t)})).catch((()=>{console.log("No internet connection found. App is running in offline mode.")}))}(e,ot),navigator.serviceWorker.ready.then((()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):$e(e,ot)}))},24654:function(){}},function(e){e.O(0,[2298],(function(){return t=50346,e(e.s=t);var t}));e.O()}]);
//# sourceMappingURL=main.89a820c8.js.map