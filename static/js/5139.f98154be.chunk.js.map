{"version":3,"sources":["../node_modules/@isle-project/components/models/decision-tree/fullscreen_button.js","../node_modules/@isle-project/components/models/decision-tree/tree_plot.js","../node_modules/@isle-project/components/models/decision-tree/split.js","../node_modules/@isle-project/components/models/decision-tree/tree.js","../node_modules/html-to-image/lib/applyStyleWithOptions.js","../node_modules/html-to-image/lib/cloneNode.js","../node_modules/html-to-image/lib/clonePseudoElements.js","../node_modules/html-to-image/lib/embedImages.js","../node_modules/html-to-image/lib/embedResources.js","../node_modules/html-to-image/lib/embedWebFonts.js","../node_modules/html-to-image/lib/getBlobFromURL.js","../node_modules/html-to-image/lib/index.js","../node_modules/html-to-image/lib/util.js"],"names":["mostFrequentValue","entropy","mean","nobs","_a"],"mappings":"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","file":"static/js/5139.f98154be.chunk.js","sourcesContent":["// MODULES //\n\nimport React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { withTranslation } from 'react-i18next';\nimport Button from 'react-bootstrap/Button';\nimport Modal from 'react-bootstrap/Modal';\nimport Tooltip from '@isle-project/components/tooltip';\n\n\n// MAIN //\n\nclass FullscreenButton extends Component {\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis.state = {\n\t\t\tfullscreen: false\n\t\t};\n\t}\n\n\ttoggleFullscreen = () => {\n\t\tthis.setState({\n\t\t\tfullscreen: !this.state.fullscreen\n\t\t});\n\t};\n\n\trender() {\n\t\tconst { t } = this.props;\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<Tooltip\n\t\t\t\t\tid=\"fullscreen_tooltip\"\n\t\t\t\t\tplacement=\"bottom\"\n\t\t\t\t\ttooltip={t('toggle-fullscreen')}\n\t\t\t\t>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant=\"outline-danger\"\n\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\tonClick={this.toggleFullscreen}\n\t\t\t\t\t\tstyle={{ position: 'absolute', top: '10px', right: '32px' }}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"fa fa-window-maximize\" />\n\t\t\t\t\t</Button>\n\t\t\t\t</Tooltip>\n\t\t\t\t<Modal\n\t\t\t\t\tshow={this.state.fullscreen}\n\t\t\t\t\tonHide={this.toggleFullscreen}\n\t\t\t\t\tdialogClassName=\"modal-100w\"\n\t\t\t\t>\n\t\t\t\t\t<Modal.Header closeButton>\n\t\t\t\t\t\t<Modal.Title as=\"h1\">\n\t\t\t\t\t\t\t{t('decision-tree')}\n\t\t\t\t\t\t</Modal.Title>\n\t\t\t\t\t</Modal.Header>\n\t\t\t\t\t<Modal.Body\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\theight: 0.75 * window.innerHeight,\n\t\t\t\t\t\t\twidth: '100%',\n\t\t\t\t\t\t\tfontSize: 32,\n\t\t\t\t\t\t\toverflow: 'scroll'\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"decision-tree decision-tree-fullscreen\">\n\t\t\t\t\t\t\t{this.props.tree}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Modal.Body>\n\t\t\t\t\t<Modal.Footer>\n\t\t\t\t\t\t<Button onClick={this.toggleFullscreen}>{t('close')}</Button>\n\t\t\t\t\t</Modal.Footer>\n\t\t\t\t</Modal>\n\t\t\t</Fragment>\n\t\t);\n\t}\n}\n\n\n// PROPERTIES //\n\nFullscreenButton.propTypes = {\n\ttree: PropTypes.node.isRequired\n};\n\n\n// EXPORTS //\n\nexport default withTranslation( 'models' )( FullscreenButton );\n","// MODULES //\n\nimport React, { Component } from 'react';\nimport { withTranslation } from 'react-i18next';\nimport { toJpeg } from 'html-to-image';\nimport { isPrimitive as isNumber } from '@stdlib/assert/is-number';\nimport isInteger from '@stdlib/assert/is-integer';\nimport randomstring from '@isle-project/utils/randomstring/alphanumeric';\nimport html2clipboard from '@isle-project/utils/html-to-clipboard';\nimport FullscreenButton from './fullscreen_button';\nimport './tree.css';\n\n\n// VARIABLES //\n\nconst RE_NUMBER = /^[+-]?[\\d.]+e?[+-]?\\d*$/;\n\n\n// FUNCTIONS //\n\nfunction treeToHtml( tree, t ) {\n\tif ( !tree ) {\n\t\treturn null;\n\t}\n\tif ( tree.category ) {\n\t\tlet value = tree.category;\n\t\tif ( isNumber( value ) || RE_NUMBER.test( value ) ) {\n\t\t\tvalue = Number( value );\n\t\t\tif ( !isInteger( value ) ) {\n\t\t\t\tvalue = value.toFixed( 6 );\n\t\t\t}\n\t\t}\n\t\treturn (\n\t\t\t<ul>\n\t\t\t\t<li >\n\t\t\t\t\t<span className=\"decision-tree-leaf\" >{t('predict')}: {value} </span>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t);\n\t}\n\treturn (\n\t\t<ul>\n\t\t\t<li>\n\t\t\t\t<span><b> {tree.attribute} {tree.predicateName} {tree.pivot} ?</b></span>\n\t\t\t\t<ul>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<span>{t('no')} ( {tree.notMatchedCount} {t('obs')}) </span>\n\t\t\t\t\t\t{treeToHtml( tree.notMatch, t )}\n\t\t\t\t\t</li>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<span>{t('yes')} ( {tree.matchedCount} {t('obs')}) </span>\n\t\t\t\t\t\t{treeToHtml( tree.match, t )}\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</li>\n\t\t</ul>\n\t);\n}\n\n\n// MAIN //\n\nclass TreePlot extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tthis.state = {\n\t\t\tplotValue: null,\n\t\t\tplotKey: null,\n\t\t\tfullscreen: false\n\t\t};\n\t}\n\n\tcomponentDidMount() {\n\t\tif ( !this.tree ) {\n\t\t\treturn;\n\t\t}\n\t\tthis.treeWrapper.scrollLeft = 0.4 * this.tree.clientWidth;\n\t\ttoJpeg( this.tree, {\n\t\t\tbackgroundColor: 'white',\n\t\t\tstyle: {\n\t\t\t\tfontSize: 22\n\t\t\t}\n\t\t}).then( ( data ) => {\n\t\t\tconst value = `<img src=\"${data}\" style=\"display: block; margin: 0 auto; max-width: 100%; max-height: 100%\" />`;\n\t\t\tthis.setState({\n\t\t\t\tplotKey: `<!--IMAGE_LOG:${randomstring( 6 )}_${randomstring( 6 )}-->`,\n\t\t\t\tplotValue: value\n\t\t\t});\n\t\t});\n\t}\n\n\trender() {\n\t\tconst { t } = this.props;\n\t\tconst tree = treeToHtml( this.props.tree, t );\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName=\"decision-tree-wrapper\"\n\t\t\t\tref={( div ) => {\n\t\t\t\t\tthis.treeWrapper = div;\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"decision-tree-draggable-bar\"\n\t\t\t\t\tdraggable=\"true\"\n\t\t\t\t\tonDragStart={( ev ) => {\n\t\t\t\t\t\tev.dataTransfer.setData( 'text/html', this.state.plotValue );\n\t\t\t\t\t\tev.dataTransfer.setData( 'text/plain', this.state.plotKey );\n\t\t\t\t\t}}\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\thtml2clipboard( this.state.plotValue );\n\t\t\t\t\t}}\n\t\t\t\t\tstyle={{ float: 'left' }}\n\t\t\t\t>{t('drag-plot')}</button>\n\t\t\t\t<FullscreenButton\n\t\t\t\t\tvariant=\"outline-danger\"\n\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tthis.setState({ fullscreen: !this.state.fullscreen });\n\t\t\t\t\t}}\n\t\t\t\t\ttree={tree}\n\t\t\t\t>\n\t\t\t\t\t<div className=\"fa fa-times\" />\n\t\t\t\t</FullscreenButton>\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"decision-tree\"\n\t\t\t\t\tref={( div ) => {\n\t\t\t\t\t\tthis.tree = div;\n\t\t\t\t\t}}\n\t\t\t\t>{tree}</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\n\n// EXPORTS //\n\nexport default withTranslation( 'models' )( TreePlot );\n","// MAIN //\n\n/**\n* Splitting observations using specific predicate and pivot.\n*/\nfunction split( data, indices, attr, predicate, pivot ) {\n\tconst match = [];\n\tconst notMatch = [];\n\tconst values = data[ attr ];\n\n\tfor ( let i = indices.length - 1; i >= 0; i-- ) {\n\t\tconst idx = indices[ i ];\n\t\tconst attrValue = values[ idx ];\n\t\tif ( predicate( attrValue, pivot ) ) {\n\t\t\tmatch.push( idx );\n\t\t} else {\n\t\t\tnotMatch.push( idx );\n\t\t}\n\t}\n\treturn {\n\t\tmatch: match,\n\t\tnotMatch: notMatch\n\t};\n}\n\n\n// EXPORTS //\n\nexport default split;\n","\n/**\n* Contains MIT-licensed code:\n*\n* The MIT License (MIT)\n*\n* Copyright (c) 2013 Yurii Lahodiuk\n*\n* Permission is hereby granted, free of charge, to any person obtaining a copy of\n* this software and associated documentation files (the \"Software\"), to deal in\n* the Software without restriction, including without limitation the rights to\n* use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of\n* the Software, and to permit persons to whom the Software is furnished to do so,\n* subject to the following conditions:\n*\n* The above copyright notice and this permission notice shall be included in all\n* copies or substantial portions of the Software.\n*\n* THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n* IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS\n* FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR\n* COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\n* IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\n* CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n*/\n\n// MODULES //\n\nimport sample from '@stdlib/random/sample';\nimport contains from '@stdlib/assert/contains';\nimport hasOwnProp from '@stdlib/assert/has-own-property';\nimport ln from '@stdlib/math/base/special/ln';\nimport round from '@stdlib/math/base/special/round';\nimport incrspace from '@stdlib/array/incrspace';\nimport Plot from './tree_plot.js';\nimport split from './split.js';\n\n\n// FUNCTIONS //\n\n/**\n * Calculating how many elements have the same values.\n *\n * @private\n * @param {Array} values - array of values\n * @param {Array} indices - array of indices\n * @returns {Object} object with counts\n */\nfunction countUniqueValues( values, indices ) {\n\tconst counter = {};\n\n\t// Detect different values of attribute:\n\tfor ( let i = indices.length - 1; i >= 0; i--) {\n\t\tconst idx = indices[ i ];\n\t\tcounter[ values[ idx ] ] = 0;\n\t}\n\n\t// Count number of occurrences of each of value:\n\tfor ( let i = indices.length - 1; i >= 0; i--) {\n\t\tconst idx = indices[ i ];\n\t\tcounter[ values[ idx ] ] += 1;\n\t}\n\treturn counter;\n}\n\n/**\n * Finding value which is most frequent in an array.\n *\n * @private\n * @param {Array} values - array of values\n * @param {Array} indices - array of indices\n * @returns {number} most frequent value\n */\nfunction mostFrequentValue( values, indices ) {\n\t// Counting number of occurrences:\n\tconst counter = countUniqueValues( values, indices );\n\n\tlet mostFrequentCount = 0;\n\tlet mostFrequentValue;\n\tfor ( let value in counter ) {\n\t\tif ( counter[ value ] > mostFrequentCount ) {\n\t\t\tmostFrequentCount = counter[ value ];\n\t\t\tmostFrequentValue = value;\n\t\t}\n\t}\n\treturn mostFrequentValue;\n}\n\n/**\n * Calculates the GINI coefficient for the given values.\n *\n * @private\n * @param {Array} values - array of values\n * @param {Array} indices - array of indices\n * @returns {number} GINI coefficient\n */\nfunction gini( values, indices ) {\n\tconst counter = countUniqueValues( values, indices );\n\tlet out = 0;\n\tfor ( let i in counter ) {\n\t\tif ( hasOwnProp( counter, i ) ) {\n\t\t\tconst p = counter[i] / indices.length;\n\t\t\tout += p * (1-p);\n\t\t}\n\t}\n\treturn out;\n}\n\n/**\n * Calculating entropy of a variable.\n *\n * @private\n * @param {Array} values - array of values\n * @param {Array} indices - array of indices\n * @returns {number} entropy value\n */\nfunction entropy( values, indices ) {\n\t// Count number of occurrences of each value:\n\tconst counter = countUniqueValues( values, indices );\n\tlet entropy = 0;\n\tfor ( let i in counter ) {\n\t\tif ( hasOwnProp( counter, i ) ) {\n\t\t\tconst p = counter[i] / indices.length;\n\t\t\tentropy += -p * ln(p);\n\t\t}\n\t}\n\treturn entropy;\n}\n\n/**\n * Calculates the variance of a variable.\n *\n * @private\n * @param {Array} values - array of values\n * @param {Array} indices - array of indices\n * @returns {number} variance\n */\nfunction variance( values, indices ) {\n\tconst len = indices.length;\n\tlet delta = 0;\n\tlet mean = 0;\n\tlet M2 = 0;\n\tlet N = 0;\n\n\tif ( !len ) {\n\t\treturn null;\n\t}\n\tif ( len < 2 ) {\n\t\treturn 0;\n\t}\n\tfor ( let i = 0; i < len; i++ ) {\n\t\tconst idx = indices[ i ];\n\t\tconst x = values[ idx ];\n\t\tN += 1;\n\t\tdelta = x - mean;\n\t\tmean += delta / N;\n\t\tM2 += delta * ( x - mean );\n\t}\n\treturn M2 / ( N - 1 );\n}\n\n/**\n * Calculates the mean of a variable.\n *\n * @private\n * @param {Array} values - array of values\n * @param {Array} indices - array of indices\n * @returns {number} mean value\n */\nfunction mean( values, indices ) {\n\tconst len = indices.length;\n\tif ( !len ) {\n\t\treturn null;\n\t}\n\tlet mu = 0;\n\tfor ( let i = 0; i < len; i++ ) {\n\t\tconst idx = indices[ i ];\n\t\tconst delta = values[ idx ] - mu;\n\t\tmu += delta / (i+1);\n\t}\n\treturn mu;\n}\n\n\n// VARIABLES //\n\nconst predicates = {\n\t'==': ( a, b ) => a == b, // eslint-disable-line eqeqeq\n\t'>=': ( a, b ) => a >= b\n};\n\n\n// MAIN //\n\n/**\n* Creates an instance of a decision tree for classification problems.\n*\n* @constructor\n* @param opts - contains training set and some configuration parameters\n*/\nfunction ClassificationTreeConstructor( opts ) {\n\tconst nobs = opts.data[ opts.response ].length;\n\n\tthis.importances = {};\n\tfor ( let j = 0; j < opts.predictors.length; j++ ) {\n\t\tthis.importances[ opts.predictors[ j ] ] = 0;\n\t}\n\tthis.root = buildClassificationTree({\n\t\tdata: opts.data,\n\t\tresponse: opts.response,\n\t\tpredictors: opts.predictors,\n\t\tindices: opts.indices ? opts.indices : incrspace( 0, nobs, 1 ),\n\t\tminItemsCount: opts.minItemsCount || 50,\n\t\tminBucket: opts.minBucket || ( round( ( opts.minItemsCount || 50 ) / 3 )),\n\t\tscoreThreshold: opts.scoreThreshold || 0.01,\n\t\tmaxTreeDepth: opts.maxTreeDepth || 20,\n\t\tquantitative: opts.quantitative,\n\t\tcriterion: opts.criterion === 'gini' ? gini : entropy\n\t}, this.importances );\n\n\tthis.predict = ( data, idx ) => {\n\t\tif ( idx === void 0 ) {\n\t\t\tconst nobs = data[ opts.predictors[ 0 ] ].length;\n\t\t\tconst out = new Array( nobs );\n\t\t\tfor ( let i = 0; i < nobs; i++ ) {\n\t\t\t\tout[ i ] = predict( this.root, data, i );\n\t\t\t}\n\t\t\treturn out;\n\t\t}\n\t\treturn predict( this.root, data, idx );\n\t};\n\n\tthis.type = 'classification';\n\tthis.response = opts.response;\n}\n\n/**\n * Creates an instance of DecisionTree\n *\n * @constructor\n * @param builder - contains training set and\n *                  some configuration parameters\n */\nfunction RegressionTreeConstructor( opts ) {\n\tconst nobs = opts.data[ opts.response ].length;\n\n\tthis.root = buildRegressionTree({\n\t\tdata: opts.data,\n\t\tresponse: opts.response,\n\t\tpredictors: opts.predictors,\n\t\tindices: opts.indices ? opts.indices : incrspace( 0, nobs, 1 ),\n\t\tminItemsCount: opts.minItemsCount || 50,\n\t\tminBucket: opts.minBucket || ( round( ( opts.minItemsCount || 50 ) / 3 )),\n\t\tscoreThreshold: opts.scoreThreshold || 0.01,\n\t\tmaxTreeDepth: opts.maxTreeDepth || 20,\n\t\tquantitative: opts.quantitative\n\t});\n\n\tthis.predict = ( data, idx ) => {\n\t\tif ( idx === void 0 ) {\n\t\t\tconst nobs = data[ opts.predictors[ 0 ] ].length;\n\t\t\tconst out = new Array( nobs );\n\t\t\tfor ( let i = 0; i < nobs; i++ ) {\n\t\t\t\tout[ i ] = Number( predict( this.root, data, i ) );\n\t\t\t}\n\t\t\treturn out;\n\t\t}\n\t\treturn Number( predict( this.root, data, idx ) );\n\t};\n\n\tthis.type = 'regression';\n\tthis.response = opts.response;\n}\n\n/**\n* Creates an instance of RandomForest with specific number of trees.\n*\n* @constructor\n* @param opts - contains configuration parameters for building decision trees\n*/\nfunction RandomForestClassifierConstructor( opts ) {\n\tthis.trees = buildRandomForestClassifier( opts );\n\tthis.importances = {};\n\tfor ( let i = 0; i < opts.predictors.length; i++ ) {\n\t\tconst attr = opts.predictors[ i ];\n\t\tthis.importances[ attr ] = 0;\n\t\tfor ( let j = 0; j < this.trees.length; j++ ) {\n\t\t\tthis.importances[ attr ] += this.trees[ j ].importances[ attr ];\n\t\t}\n\t\tthis.importances[ attr ] /= this.trees.length;\n\t}\n\tthis.predict = ( data, idx ) => {\n\t\tif ( idx === void 0 ) {\n\t\t\tconst nobs = data[ opts.predictors[ 0 ] ].length;\n\t\t\tconst out = new Array( nobs );\n\t\t\tfor ( let i = 0; i < nobs; i++ ) {\n\t\t\t\tout[ i ] = predictRandomForest( this.trees, data, i );\n\t\t\t}\n\t\t\treturn out;\n\t\t}\n\t\treturn predictRandomForest( this.trees, data, idx );\n\t};\n\tthis.type = 'classification';\n\tthis.response = opts.response;\n}\n\n/**\n* Function for building classification decision tree.\n*/\nfunction buildClassificationTree( opts, importances ) {\n\tconst {\n\t\tdata, predictors, indices, response,\n\t\tminItemsCount, scoreThreshold, maxTreeDepth,\n\t\tquantitative, criterion, minBucket, nTry\n\t} = opts;\n\tconst nobs = indices.length;\n\tif ( ( maxTreeDepth === 0 ) || ( nobs <= minItemsCount ) ) {\n\t\t// Restriction by maximal depth of tree or size of training set is to small so we have to terminate process of building tree...\n\t\treturn {\n\t\t\tcategory: mostFrequentValue( data[ response ], indices )\n\t\t};\n\t}\n\tconst initialScore = criterion( data[ response ], indices );\n\n\t// Used as hash-set for avoiding the checking of split by rules with the same 'attribute-predicate-pivot' more than once\n\tconst alreadyChecked = {};\n\n\tlet bestSplit = {\n\t\tgain: 0\n\t};\n\tif ( nTry ) {\n\t\tpredictors = sample( predictors, { size: nTry });\n\t}\n\tfor ( let i = nobs - 1; i >= 0; i-- ) {\n\t\tconst idx = indices[ i ];\n\t\tfor ( let j = 0; j < predictors.length; j++ ) {\n\t\t\tconst attr = predictors[ j ];\n\n\t\t\t// Let the value of current attribute be the pivot:\n\t\t\tconst pivot = data[ attr ][ idx ];\n\n\t\t\t// Pick the predicate depending on the type of the attribute value...\n\t\t\tlet predicateName;\n\t\t\tif ( contains( quantitative, attr ) ) {\n\t\t\t\tpredicateName = '>=';\n\t\t\t} else {\n\t\t\t\t// No sense to compare non-numeric attributes so we will check only equality of such attributes...\n\t\t\t\tpredicateName = '==';\n\t\t\t}\n\n\t\t\tconst attrPredPivot = attr + predicateName + pivot;\n\t\t\tif ( alreadyChecked[attrPredPivot] ) {\n\t\t\t\t// Skip such pairs of 'attribute-predicate-pivot' which have been already checked...\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\talreadyChecked[ attrPredPivot ] = true;\n\t\t\tconst predicate = predicates[ predicateName ];\n\n\t\t\t// Splitting training set by given 'attribute-predicate-value':\n\t\t\tconst currSplit = split( data, indices, attr, predicate, pivot );\n\n\t\t\t// Recursively calculating for subsets:\n\t\t\tconst matchEntropy = criterion( data[ response ], currSplit.match );\n\t\t\tconst notMatchEntropy = criterion( data[ response ], currSplit.notMatch );\n\n\t\t\t// Calculating gain:\n\t\t\tlet newScore = 0;\n\t\t\tnewScore += matchEntropy * currSplit.match.length;\n\t\t\tnewScore += notMatchEntropy * currSplit.notMatch.length;\n\t\t\tnewScore /= nobs;\n\t\t\tconst currGain = initialScore - newScore;\n\t\t\tif (\n\t\t\t\tcurrGain > bestSplit.gain &&\n\t\t\t\tcurrSplit.match.length > minBucket &&\n\t\t\t\tcurrSplit.notMatch.length > minBucket\n\t\t\t) {\n\t\t\t\t// Remember pairs 'attribute-predicate-value' which provide gain...\n\t\t\t\tbestSplit = currSplit;\n\t\t\t\tbestSplit.predicateName = predicateName;\n\t\t\t\tbestSplit.predicate = predicate;\n\t\t\t\tbestSplit.attribute = attr;\n\t\t\t\tbestSplit.pivot = pivot;\n\t\t\t\tbestSplit.gain = currGain;\n\t\t\t}\n\t\t}\n\t}\n\tif ( !bestSplit.gain || ( bestSplit.gain / initialScore ) < scoreThreshold ) {\n\t\treturn { category: mostFrequentValue( data[ response ], indices ) };\n\t}\n\t// Building sub-trees:\n\topts.maxTreeDepth = maxTreeDepth - 1;\n\n\timportances[ bestSplit.attribute ] += bestSplit.gain;\n\n\topts.indices = bestSplit.match;\n\tconst matchSubTree = buildClassificationTree( opts, importances );\n\n\topts.indices = bestSplit.notMatch;\n\tconst notMatchSubTree = buildClassificationTree( opts, importances );\n\n\treturn {\n\t\tattribute: bestSplit.attribute,\n\t\tpredicate: bestSplit.predicate,\n\t\tpredicateName: bestSplit.predicateName,\n\t\tpivot: bestSplit.pivot,\n\t\tmatch: matchSubTree,\n\t\tnotMatch: notMatchSubTree,\n\t\tmatchedCount: bestSplit.match.length,\n\t\tnotMatchedCount: bestSplit.notMatch.length\n\t};\n}\n\n/**\n* Function for building classification decision tree.\n*/\nfunction buildRegressionTree( opts ) {\n\tconst {\n\t\tdata, predictors, indices, response,\n\t\tminItemsCount, scoreThreshold, maxTreeDepth,\n\t\tquantitative, minBucket, nTry\n\t} = opts;\n\n\tconst nobs = indices.length;\n\tif ((maxTreeDepth === 0) || ( nobs <= minItemsCount)) {\n\t\t// restriction by maximal depth of tree\n\t\t// or size of training set is to small\n\t\t// so we have to terminate process of building tree\n\t\treturn {\n\t\t\tcategory: mean( data[ response ], indices )\n\t\t};\n\t}\n\n\tconst initialScore = variance( data[ response ], indices );\n\n\t// used as hash-set for avoiding the checking of split by rules\n\t// with the same 'attribute-predicate-pivot' more than once\n\tconst alreadyChecked = {};\n\n\t// this variable expected to contain rule, which splits training set\n\t// into subsets with smaller values of entropy (produces informational gain)\n\tlet bestSplit = {\n\t\tgain: 0\n\t};\n\n\tif ( nTry ) {\n\t\tpredictors = sample( predictors, { size: nTry });\n\t}\n\tfor ( let i = nobs - 1; i >= 0; i-- ) {\n\t\tconst idx = indices[ i ];\n\n\t\t// iterating over all attributes of item\n\t\tfor ( let j = 0; j < predictors.length; j++ ) {\n\t\t\tconst attr = predictors[ j ];\n\n\t\t\t// let the value of current attribute be the pivot\n\t\t\tconst pivot = data[ attr ][ idx ];\n\n\t\t\t// Pick the predicate depending on the type of the attribute value:\n\t\t\tlet predicateName;\n\t\t\tif ( contains( quantitative, attr ) ) {\n\t\t\t\tpredicateName = '>=';\n\t\t\t} else {\n\t\t\t\t// There is no sense to compare non-numeric attributes so we will check only equality of such attributes...\n\t\t\t\tpredicateName = '==';\n\t\t\t}\n\n\t\t\tconst attrPredPivot = attr + predicateName + pivot;\n\t\t\tif ( alreadyChecked[attrPredPivot] ) {\n\t\t\t\t// skip such pairs of 'attribute-predicate-pivot',\n\t\t\t\t// which been already checked\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\talreadyChecked[ attrPredPivot ] = true;\n\n\t\t\tconst predicate = predicates[ predicateName ];\n\n\t\t\t// splitting training set by given 'attribute-predicate-value'\n\t\t\tconst currSplit = split( data, indices, attr, predicate, pivot );\n\n\t\t\t// calculating for subsets:\n\t\t\tconst matchEntropy = variance( data[ response ], currSplit.match );\n\t\t\tconst notMatchEntropy = variance( data[ response ], currSplit.notMatch );\n\n\t\t\t// calculating informational gain\n\t\t\tlet newScore = 0;\n\t\t\tnewScore += matchEntropy * currSplit.match.length;\n\t\t\tnewScore += notMatchEntropy * currSplit.notMatch.length;\n\t\t\tnewScore /= nobs;\n\t\t\tconst currGain = initialScore - newScore;\n\t\t\tif (\n\t\t\t\tcurrGain > bestSplit.gain &&\n\t\t\t\tcurrSplit.match.length > minBucket &&\n\t\t\t\tcurrSplit.notMatch.length > minBucket\n\t\t\t) {\n\t\t\t\tbestSplit = currSplit;\n\t\t\t\tbestSplit.predicateName = predicateName;\n\t\t\t\tbestSplit.predicate = predicate;\n\t\t\t\tbestSplit.attribute = attr;\n\t\t\t\tbestSplit.pivot = pivot;\n\t\t\t\tbestSplit.gain = currGain;\n\t\t\t}\n\t\t}\n\t}\n\tif ( !bestSplit.gain || ( bestSplit.gain / initialScore ) < scoreThreshold ) {\n\t\treturn { category: mean( data[ response ], indices ) };\n\t}\n\n\t// Building sub-trees:\n\topts.maxTreeDepth = maxTreeDepth - 1;\n\n\topts.indices = bestSplit.match;\n\tconst matchSubTree = buildRegressionTree( opts );\n\n\topts.indices = bestSplit.notMatch;\n\tconst notMatchSubTree = buildRegressionTree( opts );\n\n\treturn {\n\t\tattribute: bestSplit.attribute,\n\t\tpredicate: bestSplit.predicate,\n\t\tpredicateName: bestSplit.predicateName,\n\t\tpivot: bestSplit.pivot,\n\t\tmatch: matchSubTree,\n\t\tnotMatch: notMatchSubTree,\n\t\tmatchedCount: bestSplit.match.length,\n\t\tnotMatchedCount: bestSplit.notMatch.length\n\t};\n}\n\n/**\n* Returns the predicted value for the i-th observation using the decision tree.\n*/\nfunction predict( tree, data, i ) {\n\t// Traversing tree from the root to leaf:\n\twhile ( true ) {\n\t\tif ( tree.category ) {\n\t\t\t// Only leafs contains predicted category...\n\t\t\treturn tree.category;\n\t\t}\n\t\tconst attr = tree.attribute;\n\t\tconst value = data[ attr ][ i ];\n\t\tconst predicate = tree.predicate;\n\t\tconst pivot = tree.pivot;\n\n\t\t// Move to one of the sub-trees:\n\t\tif ( predicate( value, pivot ) ) {\n\t\t\ttree = tree.match;\n\t\t} else {\n\t\t\ttree = tree.notMatch;\n\t\t}\n\t}\n}\n\n/**\n* Building array of decision trees.\n*/\nfunction buildRandomForestClassifier( opts ) {\n\t// Creating training sets for each tree:\n\tconst trainingSets = [];\n\tconst nobs = opts.data[ opts.response ].length;\n\tconst indices = incrspace( 0, nobs, 1 );\n\tfor ( let t = 0; t < opts.nTrees; t++ ) {\n\t\ttrainingSets[ t ] = sample( indices );\n\t}\n\tconst forest = [];\n\tfor ( let t = 0; t < opts.nTrees; t++ ) {\n\t\topts.indices = trainingSets[ t ];\n\t\tconst tree = new ClassificationTreeConstructor( opts );\n\t\tforest.push( tree );\n\t}\n\treturn forest;\n}\n\n/**\n* Returns the majority vote prediction for the chosen item.\n*/\nfunction predictRandomForest( forest, data, idx ) {\n\tconst result = {};\n\tfor ( let i = 0; i < forest.length; i++ ) {\n\t\tconst tree = forest[ i ];\n\t\tconst prediction = tree.predict( data, idx );\n\t\tresult[ prediction ] = result[ prediction ] ? result[ prediction ] + 1 : 1;\n\t}\n\tlet max = -1;\n\tlet out;\n\tfor ( let key in result ) {\n\t\tif ( hasOwnProp( result, key ) ) {\n\t\t\tif ( result[ key ] > max ) {\n\t\t\t\tmax = result[ key ];\n\t\t\t\tout = key;\n\t\t\t}\n\t\t}\n\t}\n\treturn out;\n}\n\n\n// EXPORTS //\n\nexport const ClassificationTree = ClassificationTreeConstructor;\nexport const RegressionTree = RegressionTreeConstructor;\nexport const RandomForestClassifier = RandomForestClassifierConstructor;\nexport const TreePlot = Plot;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.applyStyleWithOptions = void 0;\nfunction applyStyleWithOptions(node, options) {\n    var style = node.style;\n    if (options.backgroundColor) {\n        style.backgroundColor = options.backgroundColor;\n    }\n    if (options.width) {\n        style.width = options.width + \"px\";\n    }\n    if (options.height) {\n        style.height = options.height + \"px\";\n    }\n    var manual = options.style;\n    if (manual != null) {\n        Object.keys(manual).forEach(function (key) {\n            style[key] = manual[key];\n        });\n    }\n    return node;\n}\nexports.applyStyleWithOptions = applyStyleWithOptions;\n//# sourceMappingURL=applyStyleWithOptions.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.cloneNode = void 0;\nvar getBlobFromURL_1 = require(\"./getBlobFromURL\");\nvar clonePseudoElements_1 = require(\"./clonePseudoElements\");\nvar util_1 = require(\"./util\");\nfunction cloneCanvasElement(node) {\n    return __awaiter(this, void 0, void 0, function () {\n        var dataURL;\n        return __generator(this, function (_a) {\n            dataURL = node.toDataURL();\n            if (dataURL === 'data:,') {\n                return [2 /*return*/, Promise.resolve(node.cloneNode(false))];\n            }\n            return [2 /*return*/, (0, util_1.createImage)(dataURL)];\n        });\n    });\n}\nfunction cloneVideoElement(node, options) {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            return [2 /*return*/, Promise.resolve(node.poster)\n                    .then(function (url) { return (0, getBlobFromURL_1.getBlobFromURL)(url, options); })\n                    .then(function (data) {\n                    return (0, util_1.makeDataUrl)(data.blob, (0, util_1.getMimeType)(node.poster) || data.contentType);\n                })\n                    .then(function (dataURL) { return (0, util_1.createImage)(dataURL); })];\n        });\n    });\n}\nfunction cloneSingleNode(node, options) {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            if (node instanceof HTMLCanvasElement) {\n                return [2 /*return*/, cloneCanvasElement(node)];\n            }\n            if (node instanceof HTMLVideoElement && node.poster) {\n                return [2 /*return*/, cloneVideoElement(node, options)];\n            }\n            return [2 /*return*/, Promise.resolve(node.cloneNode(false))];\n        });\n    });\n}\nvar isSlotElement = function (node) {\n    return node.tagName != null && node.tagName.toUpperCase() === 'SLOT';\n};\nfunction cloneChildren(nativeNode, clonedNode, options) {\n    var _a;\n    return __awaiter(this, void 0, void 0, function () {\n        var children;\n        return __generator(this, function (_b) {\n            children = isSlotElement(nativeNode) && nativeNode.assignedNodes\n                ? (0, util_1.toArray)(nativeNode.assignedNodes())\n                : (0, util_1.toArray)(((_a = nativeNode.shadowRoot) !== null && _a !== void 0 ? _a : nativeNode).childNodes);\n            if (children.length === 0 || nativeNode instanceof HTMLVideoElement) {\n                return [2 /*return*/, Promise.resolve(clonedNode)];\n            }\n            return [2 /*return*/, children\n                    .reduce(function (deferred, child) {\n                    return deferred\n                        // eslint-disable-next-line no-use-before-define\n                        .then(function () { return cloneNode(child, options); })\n                        .then(function (clonedChild) {\n                        // eslint-disable-next-line promise/always-return\n                        if (clonedChild) {\n                            clonedNode.appendChild(clonedChild);\n                        }\n                    });\n                }, Promise.resolve())\n                    .then(function () { return clonedNode; })];\n        });\n    });\n}\nfunction cloneCSSStyle(nativeNode, clonedNode) {\n    var source = window.getComputedStyle(nativeNode);\n    var target = clonedNode.style;\n    if (!target) {\n        return;\n    }\n    if (source.cssText) {\n        target.cssText = source.cssText;\n    }\n    else {\n        (0, util_1.toArray)(source).forEach(function (name) {\n            target.setProperty(name, source.getPropertyValue(name), source.getPropertyPriority(name));\n        });\n    }\n}\nfunction cloneInputValue(nativeNode, clonedNode) {\n    if (nativeNode instanceof HTMLTextAreaElement) {\n        clonedNode.innerHTML = nativeNode.value;\n    }\n    if (nativeNode instanceof HTMLInputElement) {\n        clonedNode.setAttribute('value', nativeNode.value);\n    }\n}\nfunction decorate(nativeNode, clonedNode) {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            if (!(clonedNode instanceof Element)) {\n                return [2 /*return*/, Promise.resolve(clonedNode)];\n            }\n            return [2 /*return*/, Promise.resolve()\n                    .then(function () { return cloneCSSStyle(nativeNode, clonedNode); })\n                    .then(function () { return (0, clonePseudoElements_1.clonePseudoElements)(nativeNode, clonedNode); })\n                    .then(function () { return cloneInputValue(nativeNode, clonedNode); })\n                    .then(function () { return clonedNode; })];\n        });\n    });\n}\nfunction cloneNode(node, options, isRoot) {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            if (!isRoot && options.filter && !options.filter(node)) {\n                return [2 /*return*/, Promise.resolve(null)];\n            }\n            return [2 /*return*/, Promise.resolve(node)\n                    .then(function (clonedNode) { return cloneSingleNode(clonedNode, options); })\n                    .then(function (clonedNode) { return cloneChildren(node, clonedNode, options); })\n                    .then(function (clonedNode) { return decorate(node, clonedNode); })];\n        });\n    });\n}\nexports.cloneNode = cloneNode;\n//# sourceMappingURL=cloneNode.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.clonePseudoElements = void 0;\nvar util_1 = require(\"./util\");\nfunction formatCSSText(style) {\n    var content = style.getPropertyValue('content');\n    return style.cssText + \" content: '\" + content.replace(/'|\"/g, '') + \"';\";\n}\nfunction formatCSSProperties(style) {\n    return (0, util_1.toArray)(style)\n        .map(function (name) {\n        var value = style.getPropertyValue(name);\n        var priority = style.getPropertyPriority(name);\n        return name + \": \" + value + (priority ? ' !important' : '') + \";\";\n    })\n        .join(' ');\n}\nfunction getPseudoElementStyle(className, pseudo, style) {\n    var selector = \".\" + className + \":\" + pseudo;\n    var cssText = style.cssText\n        ? formatCSSText(style)\n        : formatCSSProperties(style);\n    return document.createTextNode(selector + \"{\" + cssText + \"}\");\n}\nfunction clonePseudoElement(nativeNode, clonedNode, pseudo) {\n    var style = window.getComputedStyle(nativeNode, pseudo);\n    var content = style.getPropertyValue('content');\n    if (content === '' || content === 'none') {\n        return;\n    }\n    var className = (0, util_1.uuid)();\n    try {\n        clonedNode.className = clonedNode.className + \" \" + className;\n    }\n    catch (err) {\n        return;\n    }\n    var styleElement = document.createElement('style');\n    styleElement.appendChild(getPseudoElementStyle(className, pseudo, style));\n    clonedNode.appendChild(styleElement);\n}\nfunction clonePseudoElements(nativeNode, clonedNode) {\n    clonePseudoElement(nativeNode, clonedNode, ':before');\n    clonePseudoElement(nativeNode, clonedNode, ':after');\n}\nexports.clonePseudoElements = clonePseudoElements;\n//# sourceMappingURL=clonePseudoElements.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.embedImages = void 0;\nvar getBlobFromURL_1 = require(\"./getBlobFromURL\");\nvar embedResources_1 = require(\"./embedResources\");\nvar util_1 = require(\"./util\");\nfunction embedBackground(clonedNode, options) {\n    var _a;\n    return __awaiter(this, void 0, void 0, function () {\n        var background;\n        return __generator(this, function (_b) {\n            background = (_a = clonedNode.style) === null || _a === void 0 ? void 0 : _a.getPropertyValue('background');\n            if (!background) {\n                return [2 /*return*/, Promise.resolve(clonedNode)];\n            }\n            return [2 /*return*/, Promise.resolve(background)\n                    .then(function (cssString) { return (0, embedResources_1.embedResources)(cssString, null, options); })\n                    .then(function (cssString) {\n                    clonedNode.style.setProperty('background', cssString, clonedNode.style.getPropertyPriority('background'));\n                    return clonedNode;\n                })];\n        });\n    });\n}\nfunction embedImageNode(clonedNode, options) {\n    return __awaiter(this, void 0, void 0, function () {\n        var src;\n        return __generator(this, function (_a) {\n            if (!(clonedNode instanceof HTMLImageElement && !(0, util_1.isDataUrl)(clonedNode.src)) &&\n                !(clonedNode instanceof SVGImageElement &&\n                    !(0, util_1.isDataUrl)(clonedNode.href.baseVal))) {\n                return [2 /*return*/, Promise.resolve(clonedNode)];\n            }\n            src = clonedNode instanceof HTMLImageElement\n                ? clonedNode.src\n                : clonedNode.href.baseVal;\n            return [2 /*return*/, Promise.resolve(src)\n                    .then(function (url) { return (0, getBlobFromURL_1.getBlobFromURL)(url, options); })\n                    .then(function (data) {\n                    return (0, util_1.makeDataUrl)(data.blob, (0, util_1.getMimeType)(src) || data.contentType);\n                })\n                    .then(function (dataURL) {\n                    return new Promise(function (resolve, reject) {\n                        clonedNode.onload = resolve;\n                        clonedNode.onerror = reject;\n                        if (clonedNode instanceof HTMLImageElement) {\n                            clonedNode.srcset = '';\n                            clonedNode.src = dataURL;\n                        }\n                        else {\n                            clonedNode.href.baseVal = dataURL;\n                        }\n                    });\n                })\n                    .then(function () { return clonedNode; }, function () { return clonedNode; })];\n        });\n    });\n}\nfunction embedChildren(clonedNode, options) {\n    return __awaiter(this, void 0, void 0, function () {\n        var children, deferreds;\n        return __generator(this, function (_a) {\n            children = (0, util_1.toArray)(clonedNode.childNodes);\n            deferreds = children.map(function (child) { return embedImages(child, options); });\n            return [2 /*return*/, Promise.all(deferreds).then(function () { return clonedNode; })];\n        });\n    });\n}\nfunction embedImages(clonedNode, options) {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            if (!(clonedNode instanceof Element)) {\n                return [2 /*return*/, Promise.resolve(clonedNode)];\n            }\n            return [2 /*return*/, Promise.resolve(clonedNode)\n                    .then(function (node) { return embedBackground(node, options); })\n                    .then(function (node) { return embedImageNode(node, options); })\n                    .then(function (node) { return embedChildren(node, options); })];\n        });\n    });\n}\nexports.embedImages = embedImages;\n//# sourceMappingURL=embedImages.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.embedResources = exports.shouldEmbed = exports.embed = exports.parseURLs = exports.toRegex = void 0;\nvar getBlobFromURL_1 = require(\"./getBlobFromURL\");\nvar util_1 = require(\"./util\");\nvar URL_REGEX = /url\\((['\"]?)([^'\"]+?)\\1\\)/g;\nvar URL_WITH_FORMAT_REGEX = /url\\([^)]+\\)\\s*format\\(([\"'])([^\"']+)\\1\\)/g;\nvar FONT_SRC_REGEX = /src:\\s*(?:url\\([^)]+\\)\\s*format\\([^)]+\\)[,;]\\s*)+/g;\nfunction toRegex(url) {\n    // eslint-disable-next-line no-useless-escape\n    var escaped = url.replace(/([.*+?^${}()|\\[\\]\\/\\\\])/g, '\\\\$1');\n    return new RegExp(\"(url\\\\(['\\\"]?)(\" + escaped + \")(['\\\"]?\\\\))\", 'g');\n}\nexports.toRegex = toRegex;\nfunction parseURLs(cssText) {\n    var result = [];\n    cssText.replace(URL_REGEX, function (raw, quotation, url) {\n        result.push(url);\n        return raw;\n    });\n    return result.filter(function (url) { return !(0, util_1.isDataUrl)(url); });\n}\nexports.parseURLs = parseURLs;\nfunction embed(cssText, resourceURL, baseURL, options, get) {\n    var resolvedURL = baseURL ? (0, util_1.resolveUrl)(resourceURL, baseURL) : resourceURL;\n    return Promise.resolve(resolvedURL)\n        .then(function (url) {\n        return get ? get(url) : (0, getBlobFromURL_1.getBlobFromURL)(url, options);\n    })\n        .then(function (data) {\n        if (typeof data === 'string') {\n            return (0, util_1.makeDataUrl)(data, (0, util_1.getMimeType)(resourceURL));\n        }\n        return (0, util_1.makeDataUrl)(data.blob, (0, util_1.getMimeType)(resourceURL) || data.contentType);\n    })\n        .then(function (dataURL) { return cssText.replace(toRegex(resourceURL), \"$1\" + dataURL + \"$3\"); })\n        .then(function (content) { return content; }, function () { return resolvedURL; });\n}\nexports.embed = embed;\nfunction filterPreferredFontFormat(str, _a) {\n    var preferredFontFormat = _a.preferredFontFormat;\n    return !preferredFontFormat\n        ? str\n        : str.replace(FONT_SRC_REGEX, function (match) {\n            // eslint-disable-next-line no-constant-condition\n            while (true) {\n                var _a = URL_WITH_FORMAT_REGEX.exec(match) || [], src = _a[0], format = _a[2];\n                if (!format) {\n                    return '';\n                }\n                if (format === preferredFontFormat) {\n                    return \"src: \" + src + \";\";\n                }\n            }\n        });\n}\nfunction shouldEmbed(url) {\n    return url.search(URL_REGEX) !== -1;\n}\nexports.shouldEmbed = shouldEmbed;\nfunction embedResources(cssText, baseUrl, options) {\n    return __awaiter(this, void 0, void 0, function () {\n        var filteredCSSText;\n        return __generator(this, function (_a) {\n            if (!shouldEmbed(cssText)) {\n                return [2 /*return*/, Promise.resolve(cssText)];\n            }\n            filteredCSSText = filterPreferredFontFormat(cssText, options);\n            return [2 /*return*/, Promise.resolve(filteredCSSText)\n                    .then(parseURLs)\n                    .then(function (urls) {\n                    return urls.reduce(function (deferred, url) {\n                        // eslint-disable-next-line promise/no-nesting\n                        return deferred.then(function (css) { return embed(css, url, baseUrl, options); });\n                    }, Promise.resolve(filteredCSSText));\n                })];\n        });\n    });\n}\nexports.embedResources = embedResources;\n//# sourceMappingURL=embedResources.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.embedWebFonts = exports.getWebFontCSS = void 0;\nvar util_1 = require(\"./util\");\nvar embedResources_1 = require(\"./embedResources\");\nvar cssFetchCache = {};\nfunction fetchCSS(url) {\n    var cache = cssFetchCache[url];\n    if (cache != null) {\n        return cache;\n    }\n    var deferred = window.fetch(url).then(function (res) { return ({\n        url: url,\n        cssText: res.text(),\n    }); });\n    cssFetchCache[url] = deferred;\n    return deferred;\n}\nfunction embedFonts(meta) {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            return [2 /*return*/, meta.cssText.then(function (raw) {\n                    var cssText = raw;\n                    var regexUrl = /url\\([\"']?([^\"')]+)[\"']?\\)/g;\n                    var fontLocs = cssText.match(/url\\([^)]+\\)/g) || [];\n                    var loadFonts = fontLocs.map(function (location) {\n                        var url = location.replace(regexUrl, '$1');\n                        if (!url.startsWith('https://')) {\n                            url = new URL(url, meta.url).href;\n                        }\n                        // eslint-disable-next-line promise/no-nesting\n                        return window\n                            .fetch(url)\n                            .then(function (res) { return res.blob(); })\n                            .then(function (blob) {\n                            return new Promise(function (resolve, reject) {\n                                var reader = new FileReader();\n                                reader.onloadend = function () {\n                                    // Side Effect\n                                    cssText = cssText.replace(location, \"url(\" + reader.result + \")\");\n                                    resolve([location, reader.result]);\n                                };\n                                reader.onerror = reject;\n                                reader.readAsDataURL(blob);\n                            });\n                        });\n                    });\n                    // eslint-disable-next-line promise/no-nesting\n                    return Promise.all(loadFonts).then(function () { return cssText; });\n                })];\n        });\n    });\n}\nfunction parseCSS(source) {\n    if (source == null) {\n        return [];\n    }\n    var result = [];\n    var commentsRegex = /(\\/\\*[\\s\\S]*?\\*\\/)/gi;\n    // strip out comments\n    var cssText = source.replace(commentsRegex, '');\n    var keyframesRegex = new RegExp('((@.*?keyframes [\\\\s\\\\S]*?){([\\\\s\\\\S]*?}\\\\s*?)})', 'gi');\n    // eslint-disable-next-line no-constant-condition\n    while (true) {\n        var matches = keyframesRegex.exec(cssText);\n        if (matches === null) {\n            break;\n        }\n        result.push(matches[0]);\n    }\n    cssText = cssText.replace(keyframesRegex, '');\n    var importRegex = /@import[\\s\\S]*?url\\([^)]*\\)[\\s\\S]*?;/gi;\n    // to match css & media queries together\n    var combinedCSSRegex = '((\\\\s*?(?:\\\\/\\\\*[\\\\s\\\\S]*?\\\\*\\\\/)?\\\\s*?@media[\\\\s\\\\S]' +\n        '*?){([\\\\s\\\\S]*?)}\\\\s*?})|(([\\\\s\\\\S]*?){([\\\\s\\\\S]*?)})';\n    // unified regex\n    var unifiedRegex = new RegExp(combinedCSSRegex, 'gi');\n    // eslint-disable-next-line no-constant-condition\n    while (true) {\n        var matches = importRegex.exec(cssText);\n        if (matches === null) {\n            matches = unifiedRegex.exec(cssText);\n            if (matches === null) {\n                break;\n            }\n            else {\n                importRegex.lastIndex = unifiedRegex.lastIndex;\n            }\n        }\n        else {\n            unifiedRegex.lastIndex = importRegex.lastIndex;\n        }\n        result.push(matches[0]);\n    }\n    return result;\n}\nfunction getCSSRules(styleSheets) {\n    return __awaiter(this, void 0, void 0, function () {\n        var ret, deferreds;\n        return __generator(this, function (_a) {\n            ret = [];\n            deferreds = [];\n            // First loop inlines imports\n            styleSheets.forEach(function (sheet) {\n                if ('cssRules' in sheet) {\n                    try {\n                        (0, util_1.toArray)(sheet.cssRules).forEach(function (item, index) {\n                            if (item.type === CSSRule.IMPORT_RULE) {\n                                var importIndex_1 = index + 1;\n                                var url = item.href;\n                                var deferred = fetchCSS(url)\n                                    .then(function (metadata) { return (metadata ? embedFonts(metadata) : ''); })\n                                    .then(function (cssText) {\n                                    return parseCSS(cssText).forEach(function (rule) {\n                                        try {\n                                            sheet.insertRule(rule, rule.startsWith('@import')\n                                                ? (importIndex_1 += 1)\n                                                : sheet.cssRules.length);\n                                        }\n                                        catch (error) {\n                                            console.error('Error inserting rule from remote css', {\n                                                rule: rule,\n                                                error: error,\n                                            });\n                                        }\n                                    });\n                                })\n                                    .catch(function (e) {\n                                    console.error('Error loading remote css', e.toString());\n                                });\n                                deferreds.push(deferred);\n                            }\n                        });\n                    }\n                    catch (e) {\n                        var inline_1 = styleSheets.find(function (a) { return a.href == null; }) || document.styleSheets[0];\n                        if (sheet.href != null) {\n                            deferreds.push(fetchCSS(sheet.href)\n                                .then(function (metadata) { return (metadata ? embedFonts(metadata) : ''); })\n                                .then(function (cssText) {\n                                return parseCSS(cssText).forEach(function (rule) {\n                                    inline_1.insertRule(rule, sheet.cssRules.length);\n                                });\n                            })\n                                .catch(function (err) {\n                                console.error('Error loading remote stylesheet', err.toString());\n                            }));\n                        }\n                        console.error('Error inlining remote css file', e.toString());\n                    }\n                }\n            });\n            return [2 /*return*/, Promise.all(deferreds).then(function () {\n                    // Second loop parses rules\n                    styleSheets.forEach(function (sheet) {\n                        if ('cssRules' in sheet) {\n                            try {\n                                (0, util_1.toArray)(sheet.cssRules).forEach(function (item) {\n                                    ret.push(item);\n                                });\n                            }\n                            catch (e) {\n                                console.error(\"Error while reading CSS rules from \" + sheet.href, e.toString());\n                            }\n                        }\n                    });\n                    return ret;\n                })];\n        });\n    });\n}\nfunction getWebFontRules(cssRules) {\n    return cssRules\n        .filter(function (rule) { return rule.type === CSSRule.FONT_FACE_RULE; })\n        .filter(function (rule) { return (0, embedResources_1.shouldEmbed)(rule.style.getPropertyValue('src')); });\n}\nfunction parseWebFontRules(node) {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            return [2 /*return*/, new Promise(function (resolve, reject) {\n                    if (node.ownerDocument == null) {\n                        reject(new Error('Provided element is not within a Document'));\n                    }\n                    resolve((0, util_1.toArray)(node.ownerDocument.styleSheets));\n                })\n                    .then(function (styleSheets) { return getCSSRules(styleSheets); })\n                    .then(getWebFontRules)];\n        });\n    });\n}\nfunction getWebFontCSS(node, options) {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            return [2 /*return*/, parseWebFontRules(node)\n                    .then(function (rules) {\n                    return Promise.all(rules.map(function (rule) {\n                        var baseUrl = rule.parentStyleSheet\n                            ? rule.parentStyleSheet.href\n                            : null;\n                        return (0, embedResources_1.embedResources)(rule.cssText, baseUrl, options);\n                    }));\n                })\n                    .then(function (cssTexts) { return cssTexts.join('\\n'); })];\n        });\n    });\n}\nexports.getWebFontCSS = getWebFontCSS;\nfunction embedWebFonts(clonedNode, options) {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            return [2 /*return*/, (options.fontEmbedCSS != null\n                    ? Promise.resolve(options.fontEmbedCSS)\n                    : getWebFontCSS(clonedNode, options)).then(function (cssText) {\n                    var styleNode = document.createElement('style');\n                    var sytleContent = document.createTextNode(cssText);\n                    styleNode.appendChild(sytleContent);\n                    if (clonedNode.firstChild) {\n                        clonedNode.insertBefore(styleNode, clonedNode.firstChild);\n                    }\n                    else {\n                        clonedNode.appendChild(styleNode);\n                    }\n                    return clonedNode;\n                })];\n        });\n    });\n}\nexports.embedWebFonts = embedWebFonts;\n//# sourceMappingURL=embedWebFonts.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getBlobFromURL = void 0;\nvar util_1 = require(\"./util\");\nvar cache = {};\nfunction getCacheKey(url) {\n    var key = url.replace(/\\?.*/, '');\n    // font resourse\n    if (/ttf|otf|eot|woff2?/i.test(key)) {\n        key = key.replace(/.*\\//, '');\n    }\n    return key;\n}\nfunction getBlobFromURL(url, options) {\n    var cacheKey = getCacheKey(url);\n    if (cache[cacheKey] != null) {\n        return cache[cacheKey];\n    }\n    // cache bypass so we dont have CORS issues with cached images\n    // ref: https://developer.mozilla.org/en/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest#Bypassing_the_cache\n    if (options.cacheBust) {\n        // eslint-disable-next-line no-param-reassign\n        url += (/\\?/.test(url) ? '&' : '?') + new Date().getTime();\n    }\n    var failed = function (reason) {\n        var placeholder = '';\n        if (options.imagePlaceholder) {\n            var parts = options.imagePlaceholder.split(/,/);\n            if (parts && parts[1]) {\n                placeholder = parts[1];\n            }\n        }\n        var msg = \"Failed to fetch resource: \" + url;\n        if (reason) {\n            msg = typeof reason === 'string' ? reason : reason.message;\n        }\n        if (msg) {\n            console.error(msg);\n        }\n        return {\n            blob: placeholder,\n            contentType: '',\n        };\n    };\n    var deferred = window\n        .fetch(url)\n        .then(function (res) {\n        // eslint-disable-next-line promise/no-nesting\n        return res.blob().then(function (blob) { return ({\n            blob: blob,\n            contentType: res.headers.get('Content-Type') || '',\n        }); });\n    })\n        .then(function (_a) {\n        var blob = _a.blob, contentType = _a.contentType;\n        return new Promise(function (resolve, reject) {\n            var reader = new FileReader();\n            reader.onloadend = function () {\n                return resolve({\n                    contentType: contentType,\n                    blob: reader.result,\n                });\n            };\n            reader.onerror = reject;\n            reader.readAsDataURL(blob);\n        });\n    })\n        .then(function (_a) {\n        var blob = _a.blob, contentType = _a.contentType;\n        return ({\n            contentType: contentType,\n            blob: (0, util_1.parseDataUrlContent)(blob),\n        });\n    })\n        // on failed\n        .catch(failed);\n    // cache result\n    cache[cacheKey] = deferred;\n    return deferred;\n}\nexports.getBlobFromURL = getBlobFromURL;\n//# sourceMappingURL=getBlobFromURL.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getFontEmbedCSS = exports.toBlob = exports.toJpeg = exports.toPng = exports.toPixelData = exports.toCanvas = exports.toSvg = void 0;\nvar cloneNode_1 = require(\"./cloneNode\");\nvar embedImages_1 = require(\"./embedImages\");\nvar applyStyleWithOptions_1 = require(\"./applyStyleWithOptions\");\nvar embedWebFonts_1 = require(\"./embedWebFonts\");\nvar util_1 = require(\"./util\");\nfunction getImageSize(node, options) {\n    if (options === void 0) { options = {}; }\n    var width = options.width || (0, util_1.getNodeWidth)(node);\n    var height = options.height || (0, util_1.getNodeHeight)(node);\n    return { width: width, height: height };\n}\nfunction toSvg(node, options) {\n    if (options === void 0) { options = {}; }\n    return __awaiter(this, void 0, void 0, function () {\n        var _a, width, height;\n        return __generator(this, function (_b) {\n            _a = getImageSize(node, options), width = _a.width, height = _a.height;\n            return [2 /*return*/, Promise.resolve(node)\n                    .then(function (nativeNode) { return (0, cloneNode_1.cloneNode)(nativeNode, options, true); })\n                    .then(function (clonedNode) { return (0, embedWebFonts_1.embedWebFonts)(clonedNode, options); })\n                    .then(function (clonedNode) { return (0, embedImages_1.embedImages)(clonedNode, options); })\n                    .then(function (clonedNode) { return (0, applyStyleWithOptions_1.applyStyleWithOptions)(clonedNode, options); })\n                    .then(function (clonedNode) { return (0, util_1.nodeToDataURL)(clonedNode, width, height); })];\n        });\n    });\n}\nexports.toSvg = toSvg;\nvar dimensionCanvasLimit = 16384; // as per https://developer.mozilla.org/en-US/docs/Web/HTML/Element/canvas#maximum_canvas_size\nfunction checkCanvasDimensions(canvas) {\n    if (canvas.width > dimensionCanvasLimit ||\n        canvas.height > dimensionCanvasLimit) {\n        if (canvas.width > dimensionCanvasLimit &&\n            canvas.height > dimensionCanvasLimit) {\n            if (canvas.width > canvas.height) {\n                canvas.height *= dimensionCanvasLimit / canvas.width;\n                canvas.width = dimensionCanvasLimit;\n            }\n            else {\n                canvas.width *= dimensionCanvasLimit / canvas.height;\n                canvas.height = dimensionCanvasLimit;\n            }\n        }\n        else if (canvas.width > dimensionCanvasLimit) {\n            canvas.height *= dimensionCanvasLimit / canvas.width;\n            canvas.width = dimensionCanvasLimit;\n        }\n        else {\n            canvas.width *= dimensionCanvasLimit / canvas.height;\n            canvas.height = dimensionCanvasLimit;\n        }\n    }\n}\nfunction toCanvas(node, options) {\n    if (options === void 0) { options = {}; }\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            return [2 /*return*/, toSvg(node, options)\n                    .then(util_1.createImage)\n                    .then(function (img) {\n                    var canvas = document.createElement('canvas');\n                    var context = canvas.getContext('2d');\n                    var ratio = options.pixelRatio || (0, util_1.getPixelRatio)();\n                    var _a = getImageSize(node, options), width = _a.width, height = _a.height;\n                    var canvasWidth = options.canvasWidth || width;\n                    var canvasHeight = options.canvasHeight || height;\n                    canvas.width = canvasWidth * ratio;\n                    canvas.height = canvasHeight * ratio;\n                    if (!options.skipAutoScale) {\n                        checkCanvasDimensions(canvas);\n                    }\n                    canvas.style.width = \"\" + canvasWidth;\n                    canvas.style.height = \"\" + canvasHeight;\n                    if (options.backgroundColor) {\n                        context.fillStyle = options.backgroundColor;\n                        context.fillRect(0, 0, canvas.width, canvas.height);\n                    }\n                    context.drawImage(img, 0, 0, canvas.width, canvas.height);\n                    return canvas;\n                })];\n        });\n    });\n}\nexports.toCanvas = toCanvas;\nfunction toPixelData(node, options) {\n    if (options === void 0) { options = {}; }\n    return __awaiter(this, void 0, void 0, function () {\n        var _a, width, height;\n        return __generator(this, function (_b) {\n            _a = getImageSize(node, options), width = _a.width, height = _a.height;\n            return [2 /*return*/, toCanvas(node, options).then(function (canvas) {\n                    var ctx = canvas.getContext('2d');\n                    return ctx.getImageData(0, 0, width, height).data;\n                })];\n        });\n    });\n}\nexports.toPixelData = toPixelData;\nfunction toPng(node, options) {\n    if (options === void 0) { options = {}; }\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            return [2 /*return*/, toCanvas(node, options).then(function (canvas) { return canvas.toDataURL(); })];\n        });\n    });\n}\nexports.toPng = toPng;\nfunction toJpeg(node, options) {\n    if (options === void 0) { options = {}; }\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            return [2 /*return*/, toCanvas(node, options).then(function (canvas) {\n                    return canvas.toDataURL('image/jpeg', options.quality || 1);\n                })];\n        });\n    });\n}\nexports.toJpeg = toJpeg;\nfunction toBlob(node, options) {\n    if (options === void 0) { options = {}; }\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            return [2 /*return*/, toCanvas(node, options).then(util_1.canvasToBlob)];\n        });\n    });\n}\nexports.toBlob = toBlob;\nfunction getFontEmbedCSS(node, options) {\n    if (options === void 0) { options = {}; }\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            return [2 /*return*/, (0, embedWebFonts_1.getWebFontCSS)(node, options)];\n        });\n    });\n}\nexports.getFontEmbedCSS = getFontEmbedCSS;\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.nodeToDataURL = exports.svgToDataURL = exports.createImage = exports.canvasToBlob = exports.getPixelRatio = exports.getNodeHeight = exports.getNodeWidth = exports.toArray = exports.delay = exports.uuid = exports.parseDataUrlContent = exports.makeDataUrl = exports.isDataUrl = exports.resolveUrl = exports.getMimeType = exports.getExtension = void 0;\nvar WOFF = 'application/font-woff';\nvar JPEG = 'image/jpeg';\nvar mimes = {\n    woff: WOFF,\n    woff2: WOFF,\n    ttf: 'application/font-truetype',\n    eot: 'application/vnd.ms-fontobject',\n    png: 'image/png',\n    jpg: JPEG,\n    jpeg: JPEG,\n    gif: 'image/gif',\n    tiff: 'image/tiff',\n    svg: 'image/svg+xml',\n};\nfunction getExtension(url) {\n    var match = /\\.([^./]*?)$/g.exec(url);\n    return match ? match[1] : '';\n}\nexports.getExtension = getExtension;\nfunction getMimeType(url) {\n    var extension = getExtension(url).toLowerCase();\n    return mimes[extension] || '';\n}\nexports.getMimeType = getMimeType;\nfunction resolveUrl(url, baseUrl) {\n    // url is absolute already\n    if (url.match(/^[a-z]+:\\/\\//i)) {\n        return url;\n    }\n    // url is absolute already, without protocol\n    if (url.match(/^\\/\\//)) {\n        return window.location.protocol + url;\n    }\n    // dataURI, mailto:, tel:, etc.\n    if (url.match(/^[a-z]+:/i)) {\n        return url;\n    }\n    var doc = document.implementation.createHTMLDocument();\n    var base = doc.createElement('base');\n    var a = doc.createElement('a');\n    doc.head.appendChild(base);\n    doc.body.appendChild(a);\n    if (baseUrl) {\n        base.href = baseUrl;\n    }\n    a.href = url;\n    return a.href;\n}\nexports.resolveUrl = resolveUrl;\nfunction isDataUrl(url) {\n    return url.search(/^(data:)/) !== -1;\n}\nexports.isDataUrl = isDataUrl;\nfunction makeDataUrl(content, mimeType) {\n    return \"data:\" + mimeType + \";base64,\" + content;\n}\nexports.makeDataUrl = makeDataUrl;\nfunction parseDataUrlContent(dataURL) {\n    return dataURL.split(/,/)[1];\n}\nexports.parseDataUrlContent = parseDataUrlContent;\nexports.uuid = (function uuid() {\n    // generate uuid for className of pseudo elements.\n    // We should not use GUIDs, otherwise pseudo elements sometimes cannot be captured.\n    var counter = 0;\n    // ref: http://stackoverflow.com/a/6248722/2519373\n    var random = function () {\n        // eslint-disable-next-line no-bitwise\n        return (\"0000\" + ((Math.random() * Math.pow(36, 4)) << 0).toString(36)).slice(-4);\n    };\n    return function () {\n        counter += 1;\n        return \"u\" + random() + counter;\n    };\n})();\nvar delay = function (ms) {\n    return function (args) {\n        return new Promise(function (resolve) { return setTimeout(function () { return resolve(args); }, ms); });\n    };\n};\nexports.delay = delay;\nfunction toArray(arrayLike) {\n    var arr = [];\n    for (var i = 0, l = arrayLike.length; i < l; i += 1) {\n        arr.push(arrayLike[i]);\n    }\n    return arr;\n}\nexports.toArray = toArray;\nfunction px(node, styleProperty) {\n    var val = window.getComputedStyle(node).getPropertyValue(styleProperty);\n    return parseFloat(val.replace('px', ''));\n}\nfunction getNodeWidth(node) {\n    var leftBorder = px(node, 'border-left-width');\n    var rightBorder = px(node, 'border-right-width');\n    return node.clientWidth + leftBorder + rightBorder;\n}\nexports.getNodeWidth = getNodeWidth;\nfunction getNodeHeight(node) {\n    var topBorder = px(node, 'border-top-width');\n    var bottomBorder = px(node, 'border-bottom-width');\n    return node.clientHeight + topBorder + bottomBorder;\n}\nexports.getNodeHeight = getNodeHeight;\nfunction getPixelRatio() {\n    var ratio;\n    var FINAL_PROCESS;\n    try {\n        FINAL_PROCESS = process;\n    }\n    catch (e) {\n        // pass\n    }\n    var val = FINAL_PROCESS && FINAL_PROCESS.env\n        ? FINAL_PROCESS.env.devicePixelRatio\n        : null;\n    if (val) {\n        ratio = parseInt(val, 10);\n        if (Number.isNaN(ratio)) {\n            ratio = 1;\n        }\n    }\n    return ratio || window.devicePixelRatio || 1;\n}\nexports.getPixelRatio = getPixelRatio;\nfunction canvasToBlob(canvas) {\n    if (canvas.toBlob) {\n        return new Promise(function (resolve) { return canvas.toBlob(resolve); });\n    }\n    return new Promise(function (resolve) {\n        var binaryString = window.atob(canvas.toDataURL().split(',')[1]);\n        var len = binaryString.length;\n        var binaryArray = new Uint8Array(len);\n        for (var i = 0; i < len; i += 1) {\n            binaryArray[i] = binaryString.charCodeAt(i);\n        }\n        resolve(new Blob([binaryArray], { type: 'image/png' }));\n    });\n}\nexports.canvasToBlob = canvasToBlob;\nfunction createImage(url) {\n    return new Promise(function (resolve, reject) {\n        var img = new Image();\n        img.onload = function () { return resolve(img); };\n        img.onerror = reject;\n        img.crossOrigin = 'anonymous';\n        img.decoding = 'sync';\n        img.src = url;\n    });\n}\nexports.createImage = createImage;\nfunction svgToDataURL(svg) {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            return [2 /*return*/, Promise.resolve()\n                    .then(function () { return new XMLSerializer().serializeToString(svg); })\n                    .then(encodeURIComponent)\n                    .then(function (html) { return \"data:image/svg+xml;charset=utf-8,\" + html; })];\n        });\n    });\n}\nexports.svgToDataURL = svgToDataURL;\nfunction nodeToDataURL(node, width, height) {\n    return __awaiter(this, void 0, void 0, function () {\n        var xmlns, svg, foreignObject;\n        return __generator(this, function (_a) {\n            xmlns = 'http://www.w3.org/2000/svg';\n            svg = document.createElementNS(xmlns, 'svg');\n            foreignObject = document.createElementNS(xmlns, 'foreignObject');\n            svg.setAttribute('width', \"\" + width);\n            svg.setAttribute('height', \"\" + height);\n            svg.setAttribute('viewBox', \"0 0 \" + width + \" \" + height);\n            foreignObject.setAttribute('width', '100%');\n            foreignObject.setAttribute('height', '100%');\n            foreignObject.setAttribute('x', '0');\n            foreignObject.setAttribute('y', '0');\n            foreignObject.setAttribute('externalResourcesRequired', 'true');\n            svg.appendChild(foreignObject);\n            foreignObject.appendChild(node);\n            return [2 /*return*/, svgToDataURL(svg)];\n        });\n    });\n}\nexports.nodeToDataURL = nodeToDataURL;\n//# sourceMappingURL=util.js.map"],"sourceRoot":""}