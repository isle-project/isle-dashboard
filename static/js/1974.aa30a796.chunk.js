"use strict";(self.webpackChunkisle_dashboard=self.webpackChunkisle_dashboard||[]).push([[1974],{23218:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Ib:function(){return changedNamespace},Ll:function(){return createNamespaceInjector},kC:function(){return deleteCurrentNamespaceInjector},J3:function(){return updateCurrentNamespaceInjector},qw:function(){return getNamespaceActionsInjector},Tm:function(){return adjustProgressInjector},hA:function(){return getAllNamespacesInjector},Vw:function(){return setLessonOrderInjector}});var axios__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(9669),axios__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_0__),querystring__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(17673),i18next__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(41631),utils_file_saver_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(19446),constants_server__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(94204),actions_notification__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(16120),actions_cohort__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(72371),constants_action_types_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(84499),__async=(__this,__arguments,generator)=>new Promise((resolve,reject)=>{var fulfilled=value=>{try{step(generator.next(value))}catch(e){reject(e)}},rejected=value=>{try{step(generator.throw(value))}catch(e){reject(e)}},step=x=>x.done?resolve(x.value):Promise.resolve(x.value).then(fulfilled,rejected);step((generator=generator.apply(__this,__arguments)).next())});function appendCreatedNamespace(namespace){return{type:constants_action_types_js__WEBPACK_IMPORTED_MODULE_6__.$8,payload:{namespace}}}function changedNamespace({title,owners,announcements=[],cohorts=[],description,enableTicketing,_id}){return{type:constants_action_types_js__WEBPACK_IMPORTED_MODULE_6__.WF,payload:{title,announcements,cohorts,description,enableTicketing,owners,_id}}}function deletedCurrentNamespace(id){return{type:constants_action_types_js__WEBPACK_IMPORTED_MODULE_6__.ke,payload:{id}}}function updateStudentProgress({email,lessonID,progress,cohort}){return{type:constants_action_types_js__WEBPACK_IMPORTED_MODULE_6__.LX,payload:{email,lessonID,progress,cohort}}}function updatedOwnedNamespace({title,owners,description,enableTicketing,_id}){return{type:constants_action_types_js__WEBPACK_IMPORTED_MODULE_6__.Rg,payload:{title,description,owners,enableTicketing,_id}}}const createNamespace=(_0,_1)=>__async(void 0,[_0,_1],function*(dispatch,{title,description,owners,props}){try{const res=yield axios__WEBPACK_IMPORTED_MODULE_0___default().post(constants_server__WEBPACK_IMPORTED_MODULE_4__.ZP+"/create_namespace",{title,description,owners});if(!res.data.successful)return(0,actions_notification__WEBPACK_IMPORTED_MODULE_7__.EG)(dispatch,new Error(res.data.message));const namespace=res.data.namespace;props.onNamespace(namespace),dispatch(appendCreatedNamespace(namespace)),props.history.replace("/lessons"),(0,actions_notification__WEBPACK_IMPORTED_MODULE_7__.wN)(dispatch,{message:res.data.message,level:res.data.successful?"success":"error"})}catch(err){(0,actions_notification__WEBPACK_IMPORTED_MODULE_7__.EG)(dispatch,err)}}),createNamespaceInjector=dispatch=>_0=>__async(void 0,[_0],function*({title,description,owners,props}){yield createNamespace(dispatch,{title,description,owners,props})}),deleteCurrentNamespace=(dispatch,id,history)=>__async(void 0,null,function*(){try{const res=yield axios__WEBPACK_IMPORTED_MODULE_0___default().post(constants_server__WEBPACK_IMPORTED_MODULE_4__.ZP+"/delete_namespace",{id});history&&history.replace("/lessons"),dispatch(deletedCurrentNamespace(id)),(0,actions_notification__WEBPACK_IMPORTED_MODULE_7__.wN)(dispatch,{message:res.data.message,level:"success"})}catch(err){return(0,actions_notification__WEBPACK_IMPORTED_MODULE_7__.EG)(dispatch,err)}}),deleteCurrentNamespaceInjector=dispatch=>(id,history)=>__async(void 0,null,function*(){yield deleteCurrentNamespace(dispatch,id,history)}),updateCurrentNamespace=(dispatch,ns)=>__async(void 0,null,function*(){try{const res=yield axios__WEBPACK_IMPORTED_MODULE_0___default().post(constants_server__WEBPACK_IMPORTED_MODULE_4__.ZP+"/update_namespace",{ns});dispatch(changedNamespace(res.data.namespace)),dispatch(updatedOwnedNamespace(res.data.namespace)),(0,actions_notification__WEBPACK_IMPORTED_MODULE_7__.wN)(dispatch,{message:res.data.message,level:"success"}),(0,actions_cohort__WEBPACK_IMPORTED_MODULE_5__.k$)(dispatch,{namespaceID:ns._id})}catch(err){(0,actions_notification__WEBPACK_IMPORTED_MODULE_7__.EG)(dispatch,err)}}),updateCurrentNamespaceInjector=dispatch=>(id,ns)=>__async(void 0,null,function*(){yield updateCurrentNamespace(dispatch,id,ns)}),getNamespaceActions=(_0,_1)=>__async(void 0,[_0,_1],function*(dispatch,{namespaceID,namespaceTitle}){try{const res=yield axios__WEBPACK_IMPORTED_MODULE_0___default().get(constants_server__WEBPACK_IMPORTED_MODULE_4__.ZP+"/get_namespace_actions?"+querystring__WEBPACK_IMPORTED_MODULE_1__.stringify({namespaceID})),blob=new Blob([res.data],{type:"application/json"}),name=`actions_${namespaceTitle}.json`;(0,utils_file_saver_js__WEBPACK_IMPORTED_MODULE_3__.Z)(blob,name)}catch(err){(0,actions_notification__WEBPACK_IMPORTED_MODULE_7__.EG)(dispatch,err)}}),getNamespaceActionsInjector=dispatch=>_0=>__async(void 0,[_0],function*({namespaceID,namespaceTitle}){yield getNamespaceActions(dispatch,{namespaceID,namespaceTitle})}),adjustProgress=(_0,_1)=>__async(void 0,[_0,_1],function*(dispatch,{email,lessonID,namespaceID,progress,cohort}){const res=yield axios__WEBPACK_IMPORTED_MODULE_0___default().post(constants_server__WEBPACK_IMPORTED_MODULE_4__.ZP+"/user_adjust_progress",{email,lessonID,namespaceID,progress});(0,actions_notification__WEBPACK_IMPORTED_MODULE_7__.wN)(dispatch,{title:i18next__WEBPACK_IMPORTED_MODULE_2__.ZP.t("common:updated"),message:res.data.message,level:"success"}),dispatch(updateStudentProgress({email,lessonID,progress,cohort}))}),adjustProgressInjector=dispatch=>_0=>__async(void 0,[_0],function*({email,lessonID,namespaceID,progress,cohort}){yield adjustProgress(dispatch,{email,lessonID,namespaceID,progress,cohort})}),getAllNamespaces=dispatch=>__async(void 0,null,function*(){try{const res=yield axios__WEBPACK_IMPORTED_MODULE_0___default().get(constants_server__WEBPACK_IMPORTED_MODULE_4__.ZP+"/get_all_namespaces");dispatch({type:constants_action_types_js__WEBPACK_IMPORTED_MODULE_6__.XM,payload:{namespaces:res.data.namespaces}})}catch(err){return(0,actions_notification__WEBPACK_IMPORTED_MODULE_7__.EG)(dispatch,err)}}),getAllNamespacesInjector=dispatch=>()=>__async(void 0,null,function*(){yield getAllNamespaces(dispatch)}),setLessonOrder=(_0,_1)=>__async(void 0,[_0,_1],function*(dispatch,{lessons,id}){try{yield axios__WEBPACK_IMPORTED_MODULE_0___default().post(constants_server__WEBPACK_IMPORTED_MODULE_4__.ZP+"/set_lesson_order",{lessons,id})}catch(err){return(0,actions_notification__WEBPACK_IMPORTED_MODULE_7__.EG)(dispatch,err)}}),setLessonOrderInjector=dispatch=>_0=>__async(void 0,[_0],function*({lessons,id}){yield setLessonOrder(dispatch,{lessons,id})})},15052:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(67294),components_spinner__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(72885),__defProp=Object.defineProperty,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(obj,key,value)=>key in obj?__defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value}):obj[key]=value,__spreadValues=(a,b)=>{for(var prop in b||(b={}))__hasOwnProp.call(b,prop)&&__defNormalProp(a,prop,b[prop]);if(__getOwnPropSymbols)for(var prop of __getOwnPropSymbols(b))__propIsEnum.call(b,prop)&&__defNormalProp(a,prop,b[prop]);return a},__async=(__this,__arguments,generator)=>new Promise((resolve,reject)=>{var fulfilled=value=>{try{step(generator.next(value))}catch(e){reject(e)}},rejected=value=>{try{step(generator.throw(value))}catch(e){reject(e)}},step=x=>x.done?resolve(x.value):Promise.resolve(x.value).then(fulfilled,rejected);step((generator=generator.apply(__this,__arguments)).next())});function asyncComponent(importComponent){class AsyncComponent extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props);this.state={component:null}}componentDidMount(){return __async(this,null,function*(){const{default:component}=yield importComponent();this.setState({component})})}render(){const C=this.state.component;return C?react__WEBPACK_IMPORTED_MODULE_0__.createElement(C,__spreadValues({},this.props)):react__WEBPACK_IMPORTED_MODULE_0__.createElement(components_spinner__WEBPACK_IMPORTED_MODULE_1__.Z,null)}}return AsyncComponent}__webpack_exports__.Z=asyncComponent},76780:function(__unused_webpack_module,__webpack_exports__){const COLORS=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#c49c94","#e377c2","#17becf","#aec7e8","#ffbb78","#ff9896","#98df8a","#7f7f7f","#c5b0d5","#f7b6d2","#bcbd22","#c7c7c7","#dbdb8d","#9edae5"];__webpack_exports__.Z=COLORS},45717:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:function(){return visible_lessons_page}});var react=__webpack_require__(67294),lib=__webpack_require__(37424),browser=__webpack_require__(11227),browser_default=__webpack_require__.n(browser),commonjs=__webpack_require__(81468),prop_types=__webpack_require__(45697),prop_types_default=__webpack_require__.n(prop_types),react_grid_layout=__webpack_require__(69968),Button=__webpack_require__(89876),Button_default=__webpack_require__.n(Button),OverlayTrigger=__webpack_require__(99201),OverlayTrigger_default=__webpack_require__.n(OverlayTrigger),Tooltip=__webpack_require__(18868),Tooltip_default=__webpack_require__.n(Tooltip),is_array_lib=__webpack_require__(76266),is_array_lib_default=__webpack_require__.n(is_array_lib),contains_lib=__webpack_require__(61635),contains_lib_default=__webpack_require__.n(contains_lib),lowercase_lib=__webpack_require__(86361),lowercase_lib_default=__webpack_require__.n(lowercase_lib),pluck_lib=__webpack_require__(60149),pluck_lib_default=__webpack_require__.n(pluck_lib),floor_lib=__webpack_require__(78113),floor_lib_default=__webpack_require__.n(floor_lib),components_async=__webpack_require__(15052),lesson_creator=(0,components_async.Z)(()=>__webpack_require__.e(2022).then(__webpack_require__.bind(__webpack_require__,2022))),lesson=__webpack_require__(36189);function mapStateToProps(state){return{admin:state.admin,user:state.user}}function mapDispatchToProps(dispatch){return{copyLesson:(0,lesson.Vo)(dispatch)}}var containers_lesson_creator=(0,lib.connect)(mapStateToProps,mapDispatchToProps)(lesson_creator),Badge=__webpack_require__(86100),Badge_default=__webpack_require__.n(Badge),ButtonGroup=__webpack_require__(63319),ButtonGroup_default=__webpack_require__.n(ButtonGroup),ButtonToolbar=__webpack_require__(71507),ButtonToolbar_default=__webpack_require__.n(ButtonToolbar),Card=__webpack_require__(51889),Card_default=__webpack_require__.n(Card),clipboard_copy=__webpack_require__(66485),clipboard_copy_default=__webpack_require__.n(clipboard_copy),FormControl=__webpack_require__(26199),FormControl_default=__webpack_require__.n(FormControl),FormLabel=__webpack_require__(65903),FormLabel_default=__webpack_require__.n(FormLabel),FormGroup=__webpack_require__(34168),FormGroup_default=__webpack_require__.n(FormGroup),Form=__webpack_require__(17383),Form_default=__webpack_require__.n(Form),Modal=__webpack_require__(89194),Modal_default=__webpack_require__.n(Modal),entry=__webpack_require__(38591),is_empty_object_lib=__webpack_require__(83966),is_empty_object_lib_default=__webpack_require__.n(is_empty_object_lib),server=__webpack_require__(94204),__defProp=Object.defineProperty,__defNormalProp=(obj,key,value)=>key in obj?__defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value}):obj[key]=value,__publicField=(obj,key,value)=>(__defNormalProp(obj,typeof key!="symbol"?key+"":key,value),value);const debug=browser_default()("isle-dashboard");function preventPropagation(event){event.stopPropagation()}class DetailsModal extends react.Component{constructor(props){super(props);__publicField(this,"handleInputChange",event=>{const target=event.target,value=target.value,name=target.name;debug(`Input field ${name} changed to ${value}`),this.setState({[name]:value},()=>{this.state.title.length>=3&&this.state.description.length>0?this.setState({disabled:!1}):this.setState({disabled:!0})})}),__publicField(this,"handleUnlockChange",event=>{this.setState({unlockLesson:event.target.checked})}),__publicField(this,"handleLockChange",event=>{this.setState({lockLesson:event.target.checked})}),__publicField(this,"handleTimeUntilChange",value=>{this.setState({lockUntil:value})}),__publicField(this,"handleTimeAfterChange",value=>{this.setState({lockAfter:value})}),__publicField(this,"handleTemplateChange",event=>{this.setState({template:event.target.checked,changedTemplate:!0})}),__publicField(this,"hideFromDashboardChange",event=>{this.setState({hideFromDashboard:event.target.checked})}),__publicField(this,"onSubmit",evt=>{evt.preventDefault();const details={newTitle:this.state.title,newDescription:this.state.description};this.state.unlockLesson&&(details.lockUntil=this.state.lockUntil),this.state.lockLesson&&(details.lockAfter=this.state.lockAfter),this.state.hideFromDashboard!==this.props.hideFromDashboard&&(details.hideFromDashboard=this.state.hideFromDashboard),this.state.changedTemplate&&(details.template=this.state.template),this.props.update(details)});let unlockLesson,lockLesson,lockUntil,lockAfter;props.lockUntil?(unlockLesson=!0,lockUntil=props.lockUntil):(unlockLesson=!1,lockUntil=new Date),props.lockAfter?(lockLesson=!0,lockAfter=props.lockAfter):(lockLesson=!1,lockAfter=new Date),this.state={title:props.title,description:props.description,disabled:!1,hideFromDashboard:props.hideFromDashboard,template:props.template,changedTemplate:!1,unlockLesson,lockUntil,lockLesson,lockAfter}}componentDidUpdate(prevProps){const newState={};prevProps.title!==this.props.title&&(newState.title=this.props.title),prevProps.description!==this.props.description&&(newState.description=this.props.description),prevProps.template!==this.props.template&&(newState.template=this.props.template),prevProps.lockUntil!==this.props.lockUntil&&(this.props.lockUntil?(newState.unlockLesson=!0,newState.lockUntil=this.props.lockUntil):(newState.unlockLesson=!1,newState.lockUntil=new Date)),prevProps.lockAfter!==this.props.lockAfter&&(this.props.lockAfter?(newState.lockLesson=!0,newState.lockAfter=this.props.lockAfter):(newState.lockLesson=!1,newState.lockAfter=new Date)),is_empty_object_lib_default()(newState)||this.setState(newState)}render(){const{t}=this.props;return react.createElement(Modal_default(),{show:this.props.show,onHide:this.props.close},react.createElement(Form_default(),{action:server.ZP,method:"get",onSubmit:this.onSubmit,onKeyDown:preventPropagation},react.createElement(Modal_default().Header,null,react.createElement(Modal_default().Title,{as:"h3"},t("lesson-details"))),react.createElement(Modal_default().Body,{className:"d-grid gap-2"},react.createElement(FormGroup_default(),null,react.createElement(FormLabel_default(),null,t("common:title")),react.createElement(FormControl_default(),{name:"title",type:"title",onChange:this.handleInputChange,defaultValue:this.state.title})),react.createElement(FormGroup_default(),null,react.createElement(FormLabel_default(),null,t("common:description")),react.createElement(FormControl_default(),{name:"description",type:"description",onChange:this.handleInputChange,defaultValue:this.state.description})),react.createElement(FormGroup_default(),null,react.createElement(Form_default().Check,{type:"checkbox",label:t("common:lock-until"),checked:this.state.unlockLesson,onChange:this.handleUnlockChange}),react.createElement("div",null,this.state.unlockLesson?react.createElement(entry.Z,{minDate:new Date,onChange:this.handleTimeUntilChange,value:this.state.lockUntil,clearIcon:null}):null)),react.createElement(FormGroup_default(),null,react.createElement(Form_default().Check,{type:"checkbox",label:t("common:lock-after"),checked:this.state.lockLesson,onChange:this.handleLockChange}),react.createElement("div",null,this.state.lockLesson?react.createElement(entry.Z,{minDate:new Date,onChange:this.handleTimeAfterChange,value:this.state.lockAfter,clearIcon:null}):null)),react.createElement(FormGroup_default(),null,react.createElement(Form_default().Check,{type:"checkbox",label:t("common:hide-from-dashboard"),checked:this.state.hideFromDashboard,onChange:this.hideFromDashboardChange})),this.props.user.administrator?react.createElement(FormGroup_default(),null,react.createElement(Form_default().Check,{type:"checkbox",label:t("provide-as-template"),checked:this.state.template,onChange:this.handleTemplateChange})):null),react.createElement(Modal_default().Footer,null,react.createElement(Button_default(),{onClick:this.props.close},t("common:cancel")),react.createElement(Button_default(),{variant:"success",type:"submit",disabled:this.state.disabled},t("common:save")))))}}DetailsModal.propTypes={close:prop_types_default().func.isRequired,description:prop_types_default().string.isRequired,hideFromDashboard:prop_types_default().bool,lockAfter:prop_types_default().instanceOf(Date),lockUntil:prop_types_default().instanceOf(Date),show:prop_types_default().bool.isRequired,template:prop_types_default().bool,title:prop_types_default().string.isRequired,update:prop_types_default().func.isRequired,user:prop_types_default().object.isRequired},DetailsModal.defaultProps={hideFromDashboard:!1,lockAfter:null,lockUntil:null,template:null};var details_modal=DetailsModal;const DeleteModal=props=>react.createElement(Modal_default(),{show:props.show,onHide:props.close},react.createElement(Modal_default().Header,null,react.createElement(Modal_default().Title,null,props.t("common:delete"),"?")),react.createElement(Modal_default().Body,null,props.t("delete-modal-body",{name:props.title})),react.createElement(Modal_default().Footer,null,react.createElement(Button_default(),{onClick:props.close},props.t("common:cancel")),react.createElement(Button_default(),{variant:"danger",onClick:props.delete},props.t("common:delete"))));DeleteModal.propTypes={close:prop_types_default().func.isRequired,delete:prop_types_default().func.isRequired,show:prop_types_default().bool.isRequired,t:prop_types_default().func.isRequired,title:prop_types_default().string.isRequired};var delete_modal=DeleteModal,colors=__webpack_require__(76780),architecture=__webpack_require__(27316),upload=__webpack_require__(30573),lesson_defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,lesson_defNormalProp=(obj,key,value)=>key in obj?lesson_defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value}):obj[key]=value,__spreadValues=(a,b)=>{for(var prop in b||(b={}))__hasOwnProp.call(b,prop)&&lesson_defNormalProp(a,prop,b[prop]);if(__getOwnPropSymbols)for(var prop of __getOwnPropSymbols(b))__propIsEnum.call(b,prop)&&lesson_defNormalProp(a,prop,b[prop]);return a},__spreadProps=(a,b)=>__defProps(a,__getOwnPropDescs(b)),lesson_publicField=(obj,key,value)=>(lesson_defNormalProp(obj,typeof key!="symbol"?key+"":key,value),value),__async=(__this,__arguments,generator)=>new Promise((resolve,reject)=>{var fulfilled=value=>{try{step(generator.next(value))}catch(e){reject(e)}},rejected=value=>{try{step(generator.throw(value))}catch(e){reject(e)}},step=x=>x.done?resolve(x.value):Promise.resolve(x.value).then(fulfilled,rejected);step((generator=generator.apply(__this,__arguments)).next())});const DEFAULT_DESCRIPTION="No description supplied.",lesson_debug=browser_default()("isle:lessons-page:lesson"),IS_IOS=isIOS();function isIOS(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}class Lesson extends react.Component{constructor(props){super(props);lesson_publicField(this,"toggleLessonState",()=>{const query={lessonName:this.props.title,namespaceName:this.props.namespace};this.props.active?this.props.deactivateLesson(query):this.props.activateLesson(query)}),lesson_publicField(this,"toggleLessonVisibility",()=>{const query={lessonName:this.props.title,namespaceName:this.props.namespace};this.props.public?this.props.hideLessonInGallery(query):this.props.showLessonInGallery(query)}),lesson_publicField(this,"delete",()=>{this.props.deleteLesson({lessonName:this.props.title,namespaceName:this.props.namespace}),this.closeDeleteModal()}),lesson_publicField(this,"update",_0=>__async(this,[_0],function*({newTitle,newDescription,lockAfter,lockUntil,hideFromDashboard,template}){(yield this.props.updateLesson({lessonName:this.props.title,namespaceName:this.props.namespace,newTitle,newDescription,template,lockAfter:lockAfter?lockAfter.getTime():null,lockUntil:lockUntil?lockUntil.getTime():null,hideFromDashboard}))&&this.closeDetailsModal()})),lesson_publicField(this,"showDeleteModal",()=>{this.setState({showDeleteModal:!0})}),lesson_publicField(this,"showDetailsModal",()=>{this.setState({showDetailsModal:!0})}),lesson_publicField(this,"closeDeleteModal",()=>{this.setState({showDeleteModal:!1})}),lesson_publicField(this,"closeDetailsModal",()=>{this.setState({showDetailsModal:!1})}),lesson_publicField(this,"getIsleFile",()=>__async(this,null,function*(){if(lesson_debug("Request ISLE source code from server..."),!this.state.isleFile){const data=yield this.props.getIsleFile({lessonName:this.props.title,namespaceName:this.props.namespace});data&&this.setState({isleFile:data})}})),lesson_publicField(this,"copyIsleFileToClipboard",()=>{if(!this.state.isleFile)return this.props.addNotification({message:this.props.t("source-file-error"),level:"error"});clipboard_copy_default()(this.state.isleFile).then(()=>{this.props.addNotification({message:this.props.t("source-file-copied"),level:"success"})}).catch(err=>{this.props.addNotification({message:err.message,level:"error"})})}),lesson_publicField(this,"copyLinkToClipboard",()=>{clipboard_copy_default()(this.props.url).then(()=>{this.props.addNotification({message:this.props.t("link-copied"),level:"success"})}).catch(err=>{this.props.addNotification({message:err.message,level:"error"})})}),lesson_publicField(this,"copyNameToClipboard",event=>{event.stopPropagation(),clipboard_copy_default()(this.props.title).then(()=>{this.props.addNotification({message:this.props.t("name-copied"),level:"success"})}).catch(err=>{this.props.addNotification({message:err.message,level:"error"})})}),lesson_publicField(this,"openLesson",()=>{IS_IOS?window.location=this.props.url:window.open(this.props.url,"_blank").focus()}),this.state={showDeleteModal:!1,showDetailsModal:!1,isleFile:null}}renderButtonToolbarDate(){const{t}=this.props;let updated=new Date(this.props.updatedAt);updated=updated.toLocaleDateString();let date=new Date(this.props.createdAt);return date=date.toLocaleDateString(),react.createElement("span",{className:"lessons-upload"},react.createElement(OverlayTrigger_default(),{placement:"top",overlay:react.createElement(Tooltip_default(),{id:"toggle_visibility"},t("created-at"))},react.createElement("span",{className:"lessons-uploaded-image"},react.createElement("img",{alt:"Upload Date Icon",style:{stroke:"white",fill:"red"},src:upload}))),react.createElement(OverlayTrigger_default(),{placement:"top",overlay:react.createElement(Tooltip_default(),{id:"toggle_visibility"},t("last-updated"),updated)},react.createElement("span",{className:"lessons-uploaded"},date)))}renderActivateButton(){const{lockUntil,t}=this.props,activeStyle=this.props.active===!0?"success":"warning";return lockUntil?react.createElement(OverlayTrigger_default(),{placement:"top",overlay:react.createElement(Tooltip_default(),{id:"lockUntil_disabled"},t("scheduled-at",{date:lockUntil.toLocaleString()}))},react.createElement(Badge_default(),{className:"lessons-status",bg:activeStyle,style:{opacity:.3}},this.props.active?t("active"):t("inactive"))):react.createElement(OverlayTrigger_default(),{placement:"top",overlay:react.createElement(Tooltip_default(),{id:"toggle_availability"},this.props.active?t("disable-lesson"):t("activate-lesson"))},react.createElement(Badge_default(),{className:"lessons-status",onClick:this.toggleLessonState,bg:activeStyle},this.props.active?t("active"):t("inactive")))}renderButtonToolbar(){const{t}=this.props,publicStyle=this.props.public===!0?"success":"warning";return react.createElement(ButtonToolbar_default(),{className:"lesson-button-toolbar"},react.createElement(ButtonGroup_default(),{style:{marginRight:"2px"}},react.createElement(OverlayTrigger_default(),{placement:"top",overlay:react.createElement(Tooltip_default(),{id:"open_details"},t("open-details"))},react.createElement(Button_default(),{size:"sm",variant:"secondary",onClick:this.showDetailsModal,"aria-label":t("open-details")},react.createElement("i",{className:"fa fa-cog"}))),react.createElement(OverlayTrigger_default(),{placement:"top",overlay:react.createElement(Tooltip_default(),{id:"delete_lesson"},t("delete-lesson"))},react.createElement(Button_default(),{size:"sm",variant:"secondary",onClick:this.showDeleteModal,"aria-label":t("delete-lesson")},react.createElement("i",{className:"fa fa-trash-alt"}))),react.createElement(OverlayTrigger_default(),{placement:"top",overlay:react.createElement(Tooltip_default(),{id:"isle-file"},t("copy-file"))},react.createElement(Button_default(),{variant:"secondary",size:"sm",onFocus:this.getIsleFile,onMouseEnter:this.getIsleFile,onClick:this.copyIsleFileToClipboard,style:{float:"right"},"aria-label":t("copy-file")},react.createElement("i",{className:"fa fa-clipboard"})))),this.renderActivateButton(),react.createElement(OverlayTrigger_default(),{placement:"top",overlay:react.createElement(Tooltip_default(),{id:"toggle_visibility"},this.props.public?t("remove-from-gallery"):t("show-in-gallery"))},react.createElement(Badge_default(),{className:"lessons-status",onClick:this.toggleLessonVisibility,bg:publicStyle},this.props.public?t("public"):t("private"))),this.renderButtonToolbarDate())}renderModals(){return react.createElement(react.Fragment,null,react.createElement(delete_modal,__spreadProps(__spreadValues({},this.props),{show:this.state.showDeleteModal,close:this.closeDeleteModal,delete:this.delete})),this.state.showDetailsModal?react.createElement(details_modal,__spreadProps(__spreadValues({},this.props),{show:this.state.showDetailsModal,close:this.closeDetailsModal,update:this.update})):null)}render(){const{t}=this.props;return react.createElement(Card_default(),{className:"animated-lesson-card"},react.createElement(Card_default().Body,{style:{padding:0,opacity:this.props.hideFromDashboard?.6:1}},react.createElement("div",{style:{filter:"grayscale(30%)",background:colors.Z[this.props.colorIndex]},className:"hovereffect"},react.createElement("img",{className:"img-responsive",src:architecture,ref:div=>{this.img=div},alt:"Tile background",style:{width:"100%",height:180}}),react.createElement("div",{className:"overlay",style:{cursor:"cell"}},react.createElement("h2",null,react.createElement(OverlayTrigger_default(),{placement:"top",overlay:react.createElement(Tooltip_default(),{id:"copy_name"},t("common:copy-name"))},react.createElement("span",{className:"lesson-title-button",role:"button",tabIndex:0,onClick:this.copyNameToClipboard,onKeyPress:this.copyNameToClipboard},this.props.title))),this.props.description!==DEFAULT_DESCRIPTION?react.createElement("h3",null,this.props.description):null,react.createElement("span",{ref:link=>{this.link=link},className:"info",onClick:this.openLesson,onKeyPress:this.openLesson,tabIndex:0,role:"button"},t("open-lesson")))),react.createElement(OverlayTrigger_default(),{placement:"top",overlay:react.createElement(Tooltip_default(),{id:"copy_link"},t("common:copy-link"))},react.createElement("i",{role:"button",tabIndex:0,className:"lesson-link-icon fas fa-external-link-alt",onClick:this.copyLinkToClipboard,onKeyPress:this.copyLinkToClipboard,"aria-label":t("common:copy-link")})),this.renderButtonToolbar(),this.renderModals()))}}Lesson.propTypes={activateLesson:prop_types_default().func.isRequired,active:prop_types_default().bool.isRequired,addNotification:prop_types_default().func.isRequired,colorIndex:prop_types_default().number.isRequired,createdAt:prop_types_default().any.isRequired,deactivateLesson:prop_types_default().func.isRequired,deleteLesson:prop_types_default().func.isRequired,description:prop_types_default().string.isRequired,getIsleFile:prop_types_default().func.isRequired,getLessons:prop_types_default().func.isRequired,hideFromDashboard:prop_types_default().bool,hideLessonInGallery:prop_types_default().func.isRequired,lockAfter:prop_types_default().instanceOf(Date),lockUntil:prop_types_default().instanceOf(Date),namespace:prop_types_default().string.isRequired,public:prop_types_default().bool.isRequired,showLessonInGallery:prop_types_default().func.isRequired,title:prop_types_default().string.isRequired,updateLesson:prop_types_default().func.isRequired,updatedAt:prop_types_default().any.isRequired,url:prop_types_default().string.isRequired,user:prop_types_default().object.isRequired},Lesson.defaultProps={hideFromDashboard:!1,lockAfter:null,lockUntil:null};var lessons_page_lesson=(0,commonjs.Zh)(["lesson","common"])(Lesson),ProgressBar=__webpack_require__(82082),ProgressBar_default=__webpack_require__.n(ProgressBar),round_lib=__webpack_require__(55809),round_lib_default=__webpack_require__.n(round_lib),min_lib=__webpack_require__(27813),min_lib_default=__webpack_require__.n(min_lib),format_time=__webpack_require__(27505),enrolled_lesson_defProp=Object.defineProperty,enrolled_lesson_defProps=Object.defineProperties,enrolled_lesson_getOwnPropDescs=Object.getOwnPropertyDescriptors,enrolled_lesson_getOwnPropSymbols=Object.getOwnPropertySymbols,enrolled_lesson_hasOwnProp=Object.prototype.hasOwnProperty,enrolled_lesson_propIsEnum=Object.prototype.propertyIsEnumerable,enrolled_lesson_defNormalProp=(obj,key,value)=>key in obj?enrolled_lesson_defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value}):obj[key]=value,enrolled_lesson_spreadValues=(a,b)=>{for(var prop in b||(b={}))enrolled_lesson_hasOwnProp.call(b,prop)&&enrolled_lesson_defNormalProp(a,prop,b[prop]);if(enrolled_lesson_getOwnPropSymbols)for(var prop of enrolled_lesson_getOwnPropSymbols(b))enrolled_lesson_propIsEnum.call(b,prop)&&enrolled_lesson_defNormalProp(a,prop,b[prop]);return a},enrolled_lesson_spreadProps=(a,b)=>enrolled_lesson_defProps(a,enrolled_lesson_getOwnPropDescs(b));function addDefaultSrc(event){event.target.src=architecture}function LessonProgress(props){let progress;if(props.metadata&&props.metadata.hideProgressBar===!0)return react.createElement("div",{className:"enrolled-lesson-progress"});const data=props.user.lessonData[props._id];data?(progress=data.progress,progress*=100,progress=min_lib_default()(round_lib_default()(progress),100)):progress=0;const{t}=props;return react.createElement("div",{className:"enrolled-lesson-progress"},react.createElement(OverlayTrigger_default(),{placement:"top",overlay:react.createElement(Tooltip_default(),{id:"open_details"},t("your-progress"))},react.createElement(ProgressBar_default(),{"aria-label":t("your-progress"),variant:"success",now:progress,label:`${progress}%`})))}function LessonInfo(props){let duration;const data=props.user.lessonData[props._id];data?duration=data.spentTime:duration=0;const{t}=props;return react.createElement(ButtonToolbar_default(),{style:{position:"absolute",top:180,width:"100%",height:"36px",background:"rgba(0, 0, 0, 0.75)"}},react.createElement(LessonProgress,enrolled_lesson_spreadProps(enrolled_lesson_spreadValues({},props),{t})),react.createElement("div",{className:"enrolled-lesson-time",style:{width:"35%",height:"100%"}},react.createElement(OverlayTrigger_default(),{placement:"top",overlay:react.createElement(Tooltip_default(),{id:"open_details"},t("time-format"))},react.createElement("span",null,t("time-spent"),": ",(0,format_time.Z)(duration)))))}const enrolled_lesson_DEFAULT_DESCRIPTION="No description supplied.",EnrolledLesson=props=>{const{t}=(0,commonjs.$G)(["lesson","common"]),imgRef=(0,react.useRef)(),openLesson=()=>{window.open(props.url,"_blank").focus()},showPreviewImage=()=>{imgRef.current.src=props.url+"/preview.jpg"},copyLinkToClipboard=()=>{clipboard_copy_default()(props.url).then(()=>{props.addNotification({message:t("link-copied"),level:"success"})}).catch(err=>{props.addNotification({message:err.message,level:"error"})})};return react.createElement(Card_default(),{className:"animated-lesson-card"},react.createElement(Card_default().Body,{style:{padding:0}},react.createElement("div",{style:{filter:"grayscale(30%)",background:colors.Z[props.colorIndex]},onMouseOver:showPreviewImage,onFocus:showPreviewImage,className:"hovereffect"},react.createElement("img",{className:"img-responsive",src:architecture,ref:imgRef,alt:"",style:{width:"100%",height:180},onError:addDefaultSrc}),react.createElement("div",{className:"overlay"},react.createElement("h2",null,props.title),props.description!==enrolled_lesson_DEFAULT_DESCRIPTION?react.createElement("h3",null,props.description):null,react.createElement("span",{className:"info",role:"button",tabIndex:0,onClick:openLesson,onKeyPress:openLesson},t("open-lesson")))),react.createElement(OverlayTrigger_default(),{placement:"top",overlay:react.createElement(Tooltip_default(),{id:"copy_link"},t("common:copy-link"))},react.createElement("i",{role:"button",tabIndex:0,className:"lesson-link-icon fas fa-external-link-alt",onClick:copyLinkToClipboard,onKeyPress:copyLinkToClipboard,"aria-label":t("common:copy-link")})),react.createElement(LessonInfo,enrolled_lesson_spreadProps(enrolled_lesson_spreadValues({},props),{t}))))};EnrolledLesson.propTypes={_id:prop_types_default().string.isRequired,addNotification:prop_types_default().func.isRequired,colorIndex:prop_types_default().number.isRequired,description:prop_types_default().string.isRequired,metadata:prop_types_default().object,title:prop_types_default().string.isRequired,url:prop_types_default().string.isRequired,user:prop_types_default().object.isRequired},EnrolledLesson.defaultProps={metadata:null};var enrolled_lesson=EnrolledLesson,no_course_banner=props=>{const{user}=props,{t}=(0,commonjs.$G)(["lessons_page","common"]);let appendix=null;return user.writeAccess?appendix=react.createElement("span",null,t("create-new-one"),react.createElement("i",{className:"fa fa-pencil-alt"}),"."):appendix=" .",react.createElement("div",{className:"jumbotron lessons-jumbotron"},react.createElement("h1",null,t("common:no-course-selected")),react.createElement("p",null,t("no-course-description"),react.createElement("i",{className:"fa fa-align-justify"}),appendix))},no_lesson_banner=({user})=>{const{t}=(0,commonjs.$G)(["lessons_page","common"]);let description=t("no-lessons");return user.writeAccess&&(description+=t("upload-from-editor")),react.createElement("div",{className:"jumbotron lessons-jumbotron"},react.createElement("h1",null,t("no-lessons-found")),react.createElement("p",null,description))},sort_lessons=__webpack_require__(56335),is_owner=__webpack_require__(35611),css_image=__webpack_require__(64731),styles=__webpack_require__(56045),css_styles=__webpack_require__(16065),lessons_page_defProp=Object.defineProperty,lessons_page_defProps=Object.defineProperties,lessons_page_getOwnPropDescs=Object.getOwnPropertyDescriptors,lessons_page_getOwnPropSymbols=Object.getOwnPropertySymbols,lessons_page_hasOwnProp=Object.prototype.hasOwnProperty,lessons_page_propIsEnum=Object.prototype.propertyIsEnumerable,lessons_page_defNormalProp=(obj,key,value)=>key in obj?lessons_page_defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value}):obj[key]=value,lessons_page_spreadValues=(a,b)=>{for(var prop in b||(b={}))lessons_page_hasOwnProp.call(b,prop)&&lessons_page_defNormalProp(a,prop,b[prop]);if(lessons_page_getOwnPropSymbols)for(var prop of lessons_page_getOwnPropSymbols(b))lessons_page_propIsEnum.call(b,prop)&&lessons_page_defNormalProp(a,prop,b[prop]);return a},lessons_page_spreadProps=(a,b)=>lessons_page_defProps(a,lessons_page_getOwnPropDescs(b)),lessons_page_publicField=(obj,key,value)=>(lessons_page_defNormalProp(obj,typeof key!="symbol"?key+"":key,value),value);const lessons_page_debug=browser_default()("isle-dashboard:lessons-page"),ResponsiveReactGridLayout=(0,react_grid_layout.WidthProvider)(react_grid_layout.Responsive);function searchLessons(lessons,phrase){if(!phrase)return lessons;const filteredLessons=[];if(is_array_lib_default()(lessons))for(let i=0;i<lessons.length;i++)(contains_lib_default()(lowercase_lib_default()(lessons[i].title),phrase)||contains_lib_default()(lowercase_lib_default()(lessons[i].description),phrase))&&filteredLessons.push(lessons[i]);return filteredLessons}function createLayout(lessons){lessons_page_debug("Create layout...");const elemH=3.52;let layouts=lessons.map((e,i)=>({lg:{i:`cell-${e.title}-${i}`,x:i*4%24,y:floor_lib_default()(i/6)*elemH,w:4,h:elemH},md:{i:`cell-${e.title}-${i}`,x:i*4%20,y:floor_lib_default()(i/5)*elemH,w:4,h:elemH},sm:{i:`cell-${e.title}-${i}`,x:i*4%16,y:floor_lib_default()(i/4)*elemH,w:4,h:elemH},xs:{i:`cell-${e.title}-${i}`,x:i*4%12,y:floor_lib_default()(i/3)*elemH,w:4,h:elemH},xxs:{i:`cell-${e.title}-${i}`,x:i*4%8,y:floor_lib_default()(i/2)*elemH,w:4,h:elemH},tiny:{i:`cell-${e.title}-${i}`,x:i*4%4,y:floor_lib_default()(i/1)*elemH,w:4,h:elemH}}));return layouts={lg:pluck_lib_default()(layouts,"lg"),md:pluck_lib_default()(layouts,"md"),sm:pluck_lib_default()(layouts,"sm"),xs:pluck_lib_default()(layouts,"xs"),xxs:pluck_lib_default()(layouts,"xxs"),tiny:pluck_lib_default()(layouts,"tiny")},layouts}class LessonsPage extends react.Component{constructor(props){super(props);lessons_page_publicField(this,"preventOpeningLink",event=>{event.preventDefault()}),lessons_page_publicField(this,"handlePositionChangeFactory",idx=>event=>{let bool=!1;switch(event.code){case"ArrowLeft":bool=!0,this.repositionLessons(idx,"left");break;case"ArrowRight":bool=!0,this.repositionLessons(idx,"right");break}bool&&(event.preventDefault(),event.stopPropagation())}),lessons_page_publicField(this,"toggleCreator",()=>{this.props.getTemplateLessons(),this.setState({showLessonCreator:!this.state.showLessonCreator})}),lessons_page_publicField(this,"handleCreate",()=>{this.setState({showLessonCreator:!1});const course=this.props.namespace;course.title&&(lessons_page_debug("Fetch lessons..."),this.props.getLessons(course.title))});let lessons=props.namespace.lessons;(0,is_owner.Z)(props.user,props.namespace)||(lessons_page_debug("Filter out inactive or hidden lessons for enrolled students..."),lessons=lessons.filter(e=>e.active===!0&&e.hideFromDashboard!==!0)),this.state={filteredLessons:searchLessons(lessons,props.search.phrase),layouts:createLayout(lessons),unfilteredLessons:lessons,search:props.search,activeElement:null,showLessonCreator:!1}}static getDerivedStateFromProps(nextProps,prevState){if(nextProps.namespace.lessons!==prevState.unfilteredLessons||nextProps.search.phrase!==prevState.search.phrase||nextProps.search.direction!==prevState.search.direction||nextProps.search.type!==prevState.search.type){lessons_page_debug("Get derived state...");let lessons=nextProps.namespace.lessons||[];(0,is_owner.Z)(nextProps.user,nextProps.namespace)||(lessons_page_debug("Filter out inactive or hidden lessons for enrolled students..."),lessons=lessons.filter(e=>e.active===!0&&e.hideFromDashboard!==!0));const filteredLessons=searchLessons(lessons,nextProps.search.phrase);(0,sort_lessons.Z)(filteredLessons,nextProps.search);const layouts=createLayout(filteredLessons);return{filteredLessons,layouts,unfilteredLessons:nextProps.namespace.lessons,search:nextProps.search}}return null}componentDidMount(){lessons_page_debug("Component did mount...");const course=this.props.namespace;course.title&&(lessons_page_debug("Fetch lessons..."),this.props.getLessons(course.title))}shouldComponentUpdate(nextProps,nextState){return nextProps.search.direction!==this.props.search.direction||nextProps.search.type!==this.props.search.type||nextState.filteredLessons!==this.state.filteredLessons||nextState.showLessonCreator!==this.state.showLessonCreator?(lessons_page_debug("Should update page..."),!0):!1}repositionLessons(idx,direction){const unfilteredLessons=this.state.unfilteredLessons.slice();if(direction==="left"){if(idx>0){const lesson2=unfilteredLessons[idx],left=unfilteredLessons[idx-1],tmp=left.pos;left.pos=lesson2.pos,lesson2.pos=tmp}}else if(direction==="right"&&idx<unfilteredLessons.length-1){const lesson2=unfilteredLessons[idx],right=unfilteredLessons[idx+1],tmp=right.pos;right.pos=lesson2.pos,lesson2.pos=tmp}const filteredLessons=searchLessons(unfilteredLessons,this.props.search.phrase);(0,sort_lessons.Z)(filteredLessons,this.props.search);const layouts=createLayout(filteredLessons);this.setState({filteredLessons,layouts,unfilteredLessons},this.forceUpdate),this.props.setLessonOrder({id:this.props.namespace._id,lessons:unfilteredLessons.map(x=>x._id)})}renderLessons(){let lessons=this.state.filteredLessons;return(0,is_owner.Z)(this.props.user,this.props.namespace)?lessons.map((e,i)=>{const lesson2=react.createElement(lessons_page_lesson,lessons_page_spreadProps(lessons_page_spreadValues({},lessons[i]),{addNotification:this.props.addNotification,deleteLesson:this.props.deleteLesson,updateLesson:this.props.updateLesson,deactivateLesson:this.props.deactivateLesson,activateLesson:this.props.activateLesson,showLessonInGallery:this.props.showLessonInGallery,hideLessonInGallery:this.props.hideLessonInGallery,getLessons:this.props.getLessons,getIsleFile:this.props.getIsleFile,user:this.props.user}));return this.props.search.type==="sequentially"?react.createElement("div",{className:"lesson-grid-item",key:`cell-${e.title}-${i}`,tabIndex:0,role:"button",ref:input=>(input&&this.state.activeElement===e.title&&input.focus(),input),onKeyDown:this.handlePositionChangeFactory(i),onFocus:()=>{this.setState({activeElement:e.title})}},lesson2):react.createElement("div",{className:"lesson-grid-item",key:`cell-${e.title}-${i}`},lesson2)}):lessons.map((e,i)=>react.createElement("div",{className:"lesson-grid-item",key:`cell-${e.title}-${i}`},react.createElement(enrolled_lesson,lessons_page_spreadProps(lessons_page_spreadValues({},lessons[i]),{addNotification:this.props.addNotification,user:this.props.user}))))}render(){if(!this.props.namespace.title)return react.createElement(no_course_banner,{user:this.props.user});let lessons=this.state.filteredLessons;if(is_array_lib_default()(lessons)){const templateButton=react.createElement(OverlayTrigger_default(),{placement:"left",overlay:react.createElement(Tooltip_default(),{id:"create-from-template-tooltip"},this.props.t("create-from-template"))},react.createElement(Button_default(),{"aria-label":this.props.t("create-from-template"),className:"create-from-template-button",onClick:this.toggleCreator},react.createElement("i",{className:"fas fa-plus"})));return lessons.length===0?react.createElement(react.Fragment,null,react.createElement(no_lesson_banner,{user:this.props.user}),templateButton,this.state.showLessonCreator?react.createElement(containers_lesson_creator,{onHide:this.toggleCreator,onCreate:this.handleCreate,namespace:this.props.namespace}):null):react.createElement(react.Fragment,null,react.createElement("div",{className:"lessons-grid-container"},react.createElement(ResponsiveReactGridLayout,{layouts:this.state.layouts,breakpoints:{lg:1800,md:1550,sm:1200,xs:900,xxs:400,tiny:0},cols:{lg:24,md:20,sm:16,xs:12,xxs:8,tiny:4},containerPadding:[10,10],isResizable:!1,isBounded:!0,isDraggable:!1,rowHeight:(0,is_owner.Z)(this.props.user,this.props.namespace)?54.5:55},this.renderLessons()),templateButton),this.state.showLessonCreator?react.createElement(containers_lesson_creator,{onHide:this.toggleCreator,onCreate:this.handleCreate,namespace:this.props.namespace}):null)}}}LessonsPage.propTypes={activateLesson:prop_types_default().func.isRequired,addNotification:prop_types_default().func.isRequired,deactivateLesson:prop_types_default().func.isRequired,deleteLesson:prop_types_default().func.isRequired,getIsleFile:prop_types_default().func.isRequired,getLessons:prop_types_default().func.isRequired,getTemplateLessons:prop_types_default().func.isRequired,hideLessonInGallery:prop_types_default().func.isRequired,namespace:prop_types_default().object.isRequired,search:prop_types_default().object.isRequired,setLessonOrder:prop_types_default().func.isRequired,showLessonInGallery:prop_types_default().func.isRequired,updateLesson:prop_types_default().func.isRequired,url:prop_types_default().string,user:prop_types_default().object.isRequired},LessonsPage.defaultProps={url:null};var lessons_page=(0,commonjs.Zh)(["lessons_page","common"])(LessonsPage),namespace=__webpack_require__(23218),notification=__webpack_require__(16120);const VisibleLessonsPage=(0,lib.connect)(visible_lessons_page_mapStateToProps,visible_lessons_page_mapDispatchToProps)(lessons_page);function visible_lessons_page_mapStateToProps(state){return{search:state.search,user:state.user,namespace:state.namespace}}function visible_lessons_page_mapDispatchToProps(dispatch){return{addNotification:(0,notification.pP)(dispatch),showLessonInGallery:(0,lesson.IH)(dispatch),hideLessonInGallery:(0,lesson.kl)(dispatch),activateLesson:(0,lesson.to)(dispatch),deactivateLesson:(0,lesson.Ek)(dispatch),updateLesson:(0,lesson.WU)(dispatch),deleteLesson:(0,lesson.q2)(dispatch),getLessons:(0,lesson.Hy)(dispatch),getTemplateLessons:(0,lesson.BO)(dispatch),getIsleFile:(0,lesson.OD)(dispatch),setLessonOrder:(0,namespace.Vw)(dispatch)}}var visible_lessons_page=VisibleLessonsPage},19446:function(__unused_webpack_module,__webpack_exports__){const RE_AUTO_BOM=/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i,ARBITRARY_REVOKE_TIMEOUT=1e3*40;function click(node){const event=new MouseEvent("click");node.dispatchEvent(event)}function throwOutside(ex){setImmediate(function(){throw ex},0)}function autoBOM(blob){return RE_AUTO_BOM.test(blob.type)?new Blob([String.fromCharCode(65279),blob],{type:blob.type}):blob}function dispatch(filesaver,eventTypes,event){eventTypes=[].concat(eventTypes);let i=eventTypes.length;for(;i--;){let listener=filesaver["on"+eventTypes[i]];if(typeof listener=="function")try{listener.call(filesaver,event||filesaver)}catch(ex){throwOutside(ex)}}}function saveFactory(view){if(typeof view=="undefined"||typeof navigator!="undefined"&&/MSIE [1-9]\./.test(navigator.userAgent))return;const doc=view.document;function getURL(){return view.URL||view.webkitURL||view}function revoke(file){function revoker(){typeof file=="string"?getURL().revokeObjectURL(file):file.remove()}setTimeout(revoker,ARBITRARY_REVOKE_TIMEOUT)}const saveLink=doc.createElementNS("http://www.w3.org/1999/xhtml","a"),canUseSaveLink="download"in saveLink,isSafari=/constructor/i.test(view.HTMLElement)||view.safari,isChromeIOS=/CriOS\/[\d]+/.test(navigator.userAgent),setImmediate2=view.setImmediate||view.setTimeout,forceSavableType="application/octet-stream";function FileSaver(blob,name,noAutoBOM){noAutoBOM||(blob=autoBOM(blob));const self2=this,force=blob.type===forceSavableType;let objectURL;function dispatchAll(){dispatch(self2,"writestart progress write writeend".split(" "))}function fsError(){if((isChromeIOS||force&&isSafari)&&view.FileReader){const reader=new FileReader;reader.onloadend=function(){let url=isChromeIOS?reader.result:reader.result.replace(/^data:[^;]*;/,"data:attachment/file;");view.open(url,"_blank")||(view.location.href=url),url=void 0,self2.readyState=self2.DONE,dispatchAll()},reader.readAsDataURL(blob),self2.readyState=self2.INIT;return}objectURL||(objectURL=getURL().createObjectURL(blob)),force?view.location.href=objectURL:view.open(objectURL,"_blank")||(view.location.href=objectURL),self2.readyState=self2.DONE,dispatchAll(),revoke(objectURL)}if(self2.readyState=self2.INIT,canUseSaveLink){objectURL=getURL().createObjectURL(blob),setImmediate2(function(){saveLink.href=objectURL,saveLink.download=name,click(saveLink),dispatchAll(),revoke(objectURL),self2.readyState=self2.DONE},0);return}fsError()}const proto=FileSaver.prototype;function saveAs2(blob,name,noAutoBOM){return new FileSaver(blob,name||blob.name||"download",noAutoBOM)}return typeof navigator!="undefined"&&navigator.msSaveOrOpenBlob?function(blob,name,noAutoBOM){return name=name||blob.name||"download",noAutoBOM||(blob=autoBOM(blob)),navigator.msSaveOrOpenBlob(blob,name)}:(proto.abort=function(){},proto.readyState=proto.INIT=0,proto.WRITING=1,proto.DONE=2,proto.error=null,proto.onwritestart=null,proto.onprogress=null,proto.onwrite=null,proto.onabort=null,proto.onerror=null,proto.onwriteend=null,saveAs2)}const saveAs=saveFactory(typeof self!="undefined"&&self||typeof window!="undefined"&&window||(void 0).content);__webpack_exports__.Z=saveAs},27505:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _stdlib_math_base_special_floor__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(78113),_stdlib_math_base_special_floor__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_stdlib_math_base_special_floor__WEBPACK_IMPORTED_MODULE_0__);const formatTime=(time,opts={hours:!0,minutes:!0,seconds:!0})=>{time=time/1e3;const hours=_stdlib_math_base_special_floor__WEBPACK_IMPORTED_MODULE_0___default()(time/(60*60));time=time%(60*60);let minutes=_stdlib_math_base_special_floor__WEBPACK_IMPORTED_MODULE_0___default()(time/60);minutes<10&&(minutes="0"+minutes),time=time%60;let seconds=_stdlib_math_base_special_floor__WEBPACK_IMPORTED_MODULE_0___default()(time);seconds<10&&(seconds="0"+seconds);let out="";return opts.hours&&(out+=hours),opts.minutes&&(out&&(out+=":"),out+=minutes),opts.seconds&&(out&&(out+=":"),out+=seconds),out};__webpack_exports__.Z=formatTime},35611:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _stdlib_assert_is_object__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(21405),_stdlib_assert_is_object__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_stdlib_assert_is_object__WEBPACK_IMPORTED_MODULE_0__);function isOwner(user,namespace){let bool=!1;for(let i=0;i<namespace.owners.length;i++){const owner=namespace.owners[i];_stdlib_assert_is_object__WEBPACK_IMPORTED_MODULE_0___default()(owner)?owner.email===user.email&&(bool=!0):owner===user.id&&(bool=!0)}return bool}__webpack_exports__.Z=isOwner},56335:function(__unused_webpack_module,__webpack_exports__){const OPTS={numeric:!0};function sortLessons(lessons,search){const{type,direction}=search;type==="sequentially"?direction==="ascending"?lessons.sort((a,b)=>a.pos-b.pos):lessons.sort((a,b)=>b.pos-a.pos):type==="alphabetically"?direction==="ascending"?lessons.sort((a,b)=>{const x=a.namespace+a.title,y=b.namespace+b.title;return x.localeCompare(y,void 0,OPTS)}):lessons.sort((a,b)=>{const x=a.namespace+a.title;return(b.namespace+b.title).localeCompare(x,void 0,OPTS)}):type==="created_at"?direction==="ascending"?lessons.sort((a,b)=>a.createdAt.localeCompare(b.createdAt,void 0,OPTS)):lessons.sort((a,b)=>b.createdAt.localeCompare(a.createdAt,void 0,OPTS)):type==="updated_at"&&(direction==="ascending"?lessons.sort((a,b)=>a.updatedAt.localeCompare(b.updatedAt,void 0,OPTS)):lessons.sort((a,b)=>b.updatedAt.localeCompare(a.updatedAt,void 0,OPTS)))}__webpack_exports__.Z=sortLessons},64731:function(){},30573:function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/4da50dc471c73bebdc8e.svg"},27316:function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/c9df90fc9571de99a51f.jpeg"}}]);

//# sourceMappingURL=1974.aa30a796.chunk.js.map