{"version":3,"sources":["../node_modules/@isle-project/components/models/decision-tree/fullscreen_button.js","../node_modules/@isle-project/components/models/decision-tree/tree_plot.js","../node_modules/@isle-project/components/models/decision-tree/split.js","../node_modules/@isle-project/components/models/decision-tree/tree.js","../node_modules/html-to-image/lib/applyStyleWithOptions.js","../node_modules/html-to-image/lib/cloneNode.js","../node_modules/html-to-image/lib/clonePseudoElements.js","../node_modules/html-to-image/lib/embedImages.js","../node_modules/html-to-image/lib/embedResources.js","../node_modules/html-to-image/lib/embedWebFonts.js","../node_modules/html-to-image/lib/getBlobFromURL.js","../node_modules/html-to-image/lib/index.js","../node_modules/html-to-image/lib/util.js"],"names":[],"mappings":"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","file":"static/js/5139.fc21108f.chunk.js","sourcesContent":["// MODULES //\n\nimport React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { withTranslation } from 'react-i18next';\nimport Button from 'react-bootstrap/Button';\nimport Modal from 'react-bootstrap/Modal';\nimport Tooltip from '@isle-project/components/tooltip';\n\n\n// MAIN //\n\nclass FullscreenButton extends Component {\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis.state = {\n\t\t\tfullscreen: false\n\t\t};\n\t}\n\n\ttoggleFullscreen = () => {\n\t\tthis.setState({\n\t\t\tfullscreen: !this.state.fullscreen\n\t\t});\n\t};\n\n\trender() {\n\t\tconst { t } = this.props;\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<Tooltip\n\t\t\t\t\tid=\"fullscreen_tooltip\"\n\t\t\t\t\tplacement=\"bottom\"\n\t\t\t\t\ttooltip={t('toggle-fullscreen')}\n\t\t\t\t>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant=\"outline-danger\"\n\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\tonClick={this.toggleFullscreen}\n\t\t\t\t\t\tstyle={{ position: 'absolute', top: '10px', right: '32px' }}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"fa fa-window-maximize\" />\n\t\t\t\t\t</Button>\n\t\t\t\t</Tooltip>\n\t\t\t\t<Modal\n\t\t\t\t\tshow={this.state.fullscreen}\n\t\t\t\t\tonHide={this.toggleFullscreen}\n\t\t\t\t\tdialogClassName=\"modal-100w\"\n\t\t\t\t>\n\t\t\t\t\t<Modal.Header closeButton>\n\t\t\t\t\t\t<Modal.Title as=\"h1\">\n\t\t\t\t\t\t\t{t('decision-tree')}\n\t\t\t\t\t\t</Modal.Title>\n\t\t\t\t\t</Modal.Header>\n\t\t\t\t\t<Modal.Body\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\theight: 0.75 * window.innerHeight,\n\t\t\t\t\t\t\twidth: '100%',\n\t\t\t\t\t\t\tfontSize: 32,\n\t\t\t\t\t\t\toverflow: 'scroll'\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"decision-tree decision-tree-fullscreen\">\n\t\t\t\t\t\t\t{this.props.tree}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Modal.Body>\n\t\t\t\t\t<Modal.Footer>\n\t\t\t\t\t\t<Button onClick={this.toggleFullscreen}>{t('close')}</Button>\n\t\t\t\t\t</Modal.Footer>\n\t\t\t\t</Modal>\n\t\t\t</Fragment>\n\t\t);\n\t}\n}\n\n\n// PROPERTIES //\n\nFullscreenButton.propTypes = {\n\ttree: PropTypes.node.isRequired\n};\n\n\n// EXPORTS //\n\nexport default withTranslation( 'models' )( FullscreenButton );\n","// MODULES //\n\nimport React, { Component } from 'react';\nimport { withTranslation } from 'react-i18next';\nimport { toJpeg } from 'html-to-image';\nimport { isPrimitive as isNumber } from '@stdlib/assert/is-number';\nimport isInteger from '@stdlib/assert/is-integer';\nimport randomstring from '@isle-project/utils/randomstring/alphanumeric';\nimport html2clipboard from '@isle-project/utils/html-to-clipboard';\nimport FullscreenButton from './fullscreen_button';\nimport './tree.css';\n\n\n// VARIABLES //\n\nconst RE_NUMBER = /^[+-]?[\\d.]+e?[+-]?\\d*$/;\n\n\n// FUNCTIONS //\n\nfunction treeToHtml( tree, t ) {\n\tif ( !tree ) {\n\t\treturn null;\n\t}\n\tif ( tree.category ) {\n\t\tlet value = tree.category;\n\t\tif ( isNumber( value ) || RE_NUMBER.test( value ) ) {\n\t\t\tvalue = Number( value );\n\t\t\tif ( !isInteger( value ) ) {\n\t\t\t\tvalue = value.toFixed( 6 );\n\t\t\t}\n\t\t}\n\t\treturn (\n\t\t\t<ul>\n\t\t\t\t<li >\n\t\t\t\t\t<span className=\"decision-tree-leaf\" >{t('predict')}: {value} </span>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t);\n\t}\n\treturn (\n\t\t<ul>\n\t\t\t<li>\n\t\t\t\t<span><b> {tree.attribute} {tree.predicateName} {tree.pivot} ?</b></span>\n\t\t\t\t<ul>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<span>{t('no')} ( {tree.notMatchedCount} {t('obs')}) </span>\n\t\t\t\t\t\t{treeToHtml( tree.notMatch, t )}\n\t\t\t\t\t</li>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<span>{t('yes')} ( {tree.matchedCount} {t('obs')}) </span>\n\t\t\t\t\t\t{treeToHtml( tree.match, t )}\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</li>\n\t\t</ul>\n\t);\n}\n\n\n// MAIN //\n\nclass TreePlot extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tthis.state = {\n\t\t\tplotValue: null,\n\t\t\tplotKey: null,\n\t\t\tfullscreen: false\n\t\t};\n\t}\n\n\tcomponentDidMount() {\n\t\tif ( !this.tree ) {\n\t\t\treturn;\n\t\t}\n\t\tthis.treeWrapper.scrollLeft = 0.4 * this.tree.clientWidth;\n\t\ttoJpeg( this.tree, {\n\t\t\tbackgroundColor: 'white',\n\t\t\tstyle: {\n\t\t\t\tfontSize: 22\n\t\t\t}\n\t\t}).then( ( data ) => {\n\t\t\tconst value = `<img src=\"${data}\" style=\"display: block; margin: 0 auto; max-width: 100%; max-height: 100%\" />`;\n\t\t\tthis.setState({\n\t\t\t\tplotKey: `<!--IMAGE_LOG:${randomstring( 6 )}_${randomstring( 6 )}-->`,\n\t\t\t\tplotValue: value\n\t\t\t});\n\t\t});\n\t}\n\n\trender() {\n\t\tconst { t } = this.props;\n\t\tconst tree = treeToHtml( this.props.tree, t );\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName=\"decision-tree-wrapper\"\n\t\t\t\tref={( div ) => {\n\t\t\t\t\tthis.treeWrapper = div;\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"decision-tree-draggable-bar\"\n\t\t\t\t\tdraggable=\"true\"\n\t\t\t\t\tonDragStart={( ev ) => {\n\t\t\t\t\t\tev.dataTransfer.setData( 'text/html', this.state.plotValue );\n\t\t\t\t\t\tev.dataTransfer.setData( 'text/plain', this.state.plotKey );\n\t\t\t\t\t}}\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\thtml2clipboard( this.state.plotValue );\n\t\t\t\t\t}}\n\t\t\t\t\tstyle={{ float: 'left' }}\n\t\t\t\t>{t('drag-plot')}</button>\n\t\t\t\t<FullscreenButton\n\t\t\t\t\tvariant=\"outline-danger\"\n\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tthis.setState({ fullscreen: !this.state.fullscreen });\n\t\t\t\t\t}}\n\t\t\t\t\ttree={tree}\n\t\t\t\t>\n\t\t\t\t\t<div className=\"fa fa-times\" />\n\t\t\t\t</FullscreenButton>\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"decision-tree\"\n\t\t\t\t\tref={( div ) => {\n\t\t\t\t\t\tthis.tree = div;\n\t\t\t\t\t}}\n\t\t\t\t>{tree}</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\n\n// EXPORTS //\n\nexport default withTranslation( 'models' )( TreePlot );\n","// MAIN //\n\n/**\n* Splitting observations using specific predicate and pivot.\n*/\nfunction split( data, indices, attr, predicate, pivot ) {\n\tconst match = [];\n\tconst notMatch = [];\n\tconst values = data[ attr ];\n\n\tfor ( let i = indices.length - 1; i >= 0; i-- ) {\n\t\tconst idx = indices[ i ];\n\t\tconst attrValue = values[ idx ];\n\t\tif ( predicate( attrValue, pivot ) ) {\n\t\t\tmatch.push( idx );\n\t\t} else {\n\t\t\tnotMatch.push( idx );\n\t\t}\n\t}\n\treturn {\n\t\tmatch: match,\n\t\tnotMatch: notMatch\n\t};\n}\n\n\n// EXPORTS //\n\nexport default split;\n","\n/**\n* Contains MIT-licensed code:\n*\n* The MIT License (MIT)\n*\n* Copyright (c) 2013 Yurii Lahodiuk\n*\n* Permission is hereby granted, free of charge, to any person obtaining a copy of\n* this software and associated documentation files (the \"Software\"), to deal in\n* the Software without restriction, including without limitation the rights to\n* use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of\n* the Software, and to permit persons to whom the Software is furnished to do so,\n* subject to the following conditions:\n*\n* The above copyright notice and this permission notice shall be included in all\n* copies or substantial portions of the Software.\n*\n* THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n* IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS\n* FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR\n* COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\n* IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\n* CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n*/\n\n// MODULES //\n\nimport sample from '@stdlib/random/sample';\nimport contains from '@stdlib/assert/contains';\nimport hasOwnProp from '@stdlib/assert/has-own-property';\nimport ln from '@stdlib/math/base/special/ln';\nimport round from '@stdlib/math/base/special/round';\nimport incrspace from '@stdlib/array/incrspace';\nimport Plot from './tree_plot.js';\nimport split from './split.js';\n\n\n// FUNCTIONS //\n\n/**\n * Calculating how many elements have the same values.\n *\n * @private\n * @param {Array} values - array of values\n * @param {Array} indices - array of indices\n * @returns {Object} object with counts\n */\nfunction countUniqueValues( values, indices ) {\n\tconst counter = {};\n\n\t// Detect different values of attribute:\n\tfor ( let i = indices.length - 1; i >= 0; i--) {\n\t\tconst idx = indices[ i ];\n\t\tcounter[ values[ idx ] ] = 0;\n\t}\n\n\t// Count number of occurrences of each of value:\n\tfor ( let i = indices.length - 1; i >= 0; i--) {\n\t\tconst idx = indices[ i ];\n\t\tcounter[ values[ idx ] ] += 1;\n\t}\n\treturn counter;\n}\n\n/**\n * Finding value which is most frequent in an array.\n *\n * @private\n * @param {Array} values - array of values\n * @param {Array} indices - array of indices\n * @returns {number} most frequent value\n */\nfunction mostFrequentValue( values, indices ) {\n\t// Counting number of occurrences:\n\tconst counter = countUniqueValues( values, indices );\n\n\tlet mostFrequentCount = 0;\n\tlet mostFrequentValue;\n\tfor ( let value in counter ) {\n\t\tif ( counter[ value ] > mostFrequentCount ) {\n\t\t\tmostFrequentCount = counter[ value ];\n\t\t\tmostFrequentValue = value;\n\t\t}\n\t}\n\treturn mostFrequentValue;\n}\n\n/**\n * Calculates the GINI coefficient for the given values.\n *\n * @private\n * @param {Array} values - array of values\n * @param {Array} indices - array of indices\n * @returns {number} GINI coefficient\n */\nfunction gini( values, indices ) {\n\tconst counter = countUniqueValues( values, indices );\n\tlet out = 0;\n\tfor ( let i in counter ) {\n\t\tif ( hasOwnProp( counter, i ) ) {\n\t\t\tconst p = counter[i] / indices.length;\n\t\t\tout += p * (1-p);\n\t\t}\n\t}\n\treturn out;\n}\n\n/**\n * Calculating entropy of a variable.\n *\n * @private\n * @param {Array} values - array of values\n * @param {Array} indices - array of indices\n * @returns {number} entropy value\n */\nfunction entropy( values, indices ) {\n\t// Count number of occurrences of each value:\n\tconst counter = countUniqueValues( values, indices );\n\tlet entropy = 0;\n\tfor ( let i in counter ) {\n\t\tif ( hasOwnProp( counter, i ) ) {\n\t\t\tconst p = counter[i] / indices.length;\n\t\t\tentropy += -p * ln(p);\n\t\t}\n\t}\n\treturn entropy;\n}\n\n/**\n * Calculates the variance of a variable.\n *\n * @private\n * @param {Array} values - array of values\n * @param {Array} indices - array of indices\n * @returns {number} variance\n */\nfunction variance( values, indices ) {\n\tconst len = indices.length;\n\tlet delta = 0;\n\tlet mean = 0;\n\tlet M2 = 0;\n\tlet N = 0;\n\n\tif ( !len ) {\n\t\treturn null;\n\t}\n\tif ( len < 2 ) {\n\t\treturn 0;\n\t}\n\tfor ( let i = 0; i < len; i++ ) {\n\t\tconst idx = indices[ i ];\n\t\tconst x = values[ idx ];\n\t\tN += 1;\n\t\tdelta = x - mean;\n\t\tmean += delta / N;\n\t\tM2 += delta * ( x - mean );\n\t}\n\treturn M2 / ( N - 1 );\n}\n\n/**\n * Calculates the mean of a variable.\n *\n * @private\n * @param {Array} values - array of values\n * @param {Array} indices - array of indices\n * @returns {number} mean value\n */\nfunction mean( values, indices ) {\n\tconst len = indices.length;\n\tif ( !len ) {\n\t\treturn null;\n\t}\n\tlet mu = 0;\n\tfor ( let i = 0; i < len; i++ ) {\n\t\tconst idx = indices[ i ];\n\t\tconst delta = values[ idx ] - mu;\n\t\tmu += delta / (i+1);\n\t}\n\treturn mu;\n}\n\n\n// VARIABLES //\n\nconst predicates = {\n\t'==': ( a, b ) => a == b, // eslint-disable-line eqeqeq\n\t'>=': ( a, b ) => a >= b\n};\n\n\n// MAIN //\n\n/**\n* Creates an instance of a decision tree for classification problems.\n*\n* @constructor\n* @param opts - contains training set and some configuration parameters\n*/\nfunction ClassificationTreeConstructor( opts ) {\n\tconst nobs = opts.data[ opts.response ].length;\n\n\tthis.importances = {};\n\tfor ( let j = 0; j < opts.predictors.length; j++ ) {\n\t\tthis.importances[ opts.predictors[ j ] ] = 0;\n\t}\n\tthis.root = buildClassificationTree({\n\t\tdata: opts.data,\n\t\tresponse: opts.response,\n\t\tpredictors: opts.predictors,\n\t\tindices: opts.indices ? opts.indices : incrspace( 0, nobs, 1 ),\n\t\tminItemsCount: opts.minItemsCount || 50,\n\t\tminBucket: opts.minBucket || ( round( ( opts.minItemsCount || 50 ) / 3 )),\n\t\tscoreThreshold: opts.scoreThreshold || 0.01,\n\t\tmaxTreeDepth: opts.maxTreeDepth || 20,\n\t\tquantitative: opts.quantitative,\n\t\tcriterion: opts.criterion === 'gini' ? gini : entropy\n\t}, this.importances );\n\n\tthis.predict = ( data, idx ) => {\n\t\tif ( idx === void 0 ) {\n\t\t\tconst nobs = data[ opts.predictors[ 0 ] ].length;\n\t\t\tconst out = new Array( nobs );\n\t\t\tfor ( let i = 0; i < nobs; i++ ) {\n\t\t\t\tout[ i ] = predict( this.root, data, i );\n\t\t\t}\n\t\t\treturn out;\n\t\t}\n\t\treturn predict( this.root, data, idx );\n\t};\n\n\tthis.type = 'classification';\n\tthis.response = opts.response;\n}\n\n/**\n * Creates an instance of DecisionTree\n *\n * @constructor\n * @param builder - contains training set and\n *                  some configuration parameters\n */\nfunction RegressionTreeConstructor( opts ) {\n\tconst nobs = opts.data[ opts.response ].length;\n\n\tthis.root = buildRegressionTree({\n\t\tdata: opts.data,\n\t\tresponse: opts.response,\n\t\tpredictors: opts.predictors,\n\t\tindices: opts.indices ? opts.indices : incrspace( 0, nobs, 1 ),\n\t\tminItemsCount: opts.minItemsCount || 50,\n\t\tminBucket: opts.minBucket || ( round( ( opts.minItemsCount || 50 ) / 3 )),\n\t\tscoreThreshold: opts.scoreThreshold || 0.01,\n\t\tmaxTreeDepth: opts.maxTreeDepth || 20,\n\t\tquantitative: opts.quantitative\n\t});\n\n\tthis.predict = ( data, idx ) => {\n\t\tif ( idx === void 0 ) {\n\t\t\tconst nobs = data[ opts.predictors[ 0 ] ].length;\n\t\t\tconst out = new Array( nobs );\n\t\t\tfor ( let i = 0; i < nobs; i++ ) {\n\t\t\t\tout[ i ] = Number( predict( this.root, data, i ) );\n\t\t\t}\n\t\t\treturn out;\n\t\t}\n\t\treturn Number( predict( this.root, data, idx ) );\n\t};\n\n\tthis.type = 'regression';\n\tthis.response = opts.response;\n}\n\n/**\n* Creates an instance of RandomForest with specific number of trees.\n*\n* @constructor\n* @param opts - contains configuration parameters for building decision trees\n*/\nfunction RandomForestClassifierConstructor( opts ) {\n\tthis.trees = buildRandomForestClassifier( opts );\n\tthis.importances = {};\n\tfor ( let i = 0; i < opts.predictors.length; i++ ) {\n\t\tconst attr = opts.predictors[ i ];\n\t\tthis.importances[ attr ] = 0;\n\t\tfor ( let j = 0; j < this.trees.length; j++ ) {\n\t\t\tthis.importances[ attr ] += this.trees[ j ].importances[ attr ];\n\t\t}\n\t\tthis.importances[ attr ] /= this.trees.length;\n\t}\n\tthis.predict = ( data, idx ) => {\n\t\tif ( idx === void 0 ) {\n\t\t\tconst nobs = data[ opts.predictors[ 0 ] ].length;\n\t\t\tconst out = new Array( nobs );\n\t\t\tfor ( let i = 0; i < nobs; i++ ) {\n\t\t\t\tout[ i ] = predictRandomForest( this.trees, data, i );\n\t\t\t}\n\t\t\treturn out;\n\t\t}\n\t\treturn predictRandomForest( this.trees, data, idx );\n\t};\n\tthis.type = 'classification';\n\tthis.response = opts.response;\n}\n\n/**\n* Function for building classification decision tree.\n*/\nfunction buildClassificationTree( opts, importances ) {\n\tconst {\n\t\tdata, predictors, indices, response,\n\t\tminItemsCount, scoreThreshold, maxTreeDepth,\n\t\tquantitative, criterion, minBucket, nTry\n\t} = opts;\n\tconst nobs = indices.length;\n\tif ( ( maxTreeDepth === 0 ) || ( nobs <= minItemsCount ) ) {\n\t\t// Restriction by maximal depth of tree or size of training set is to small so we have to terminate process of building tree...\n\t\treturn {\n\t\t\tcategory: mostFrequentValue( data[ response ], indices )\n\t\t};\n\t}\n\tconst initialScore = criterion( data[ response ], indices );\n\n\t// Used as hash-set for avoiding the checking of split by rules with the same 'attribute-predicate-pivot' more than once\n\tconst alreadyChecked = {};\n\n\tlet bestSplit = {\n\t\tgain: 0\n\t};\n\tif ( nTry ) {\n\t\tpredictors = sample( predictors, { size: nTry });\n\t}\n\tfor ( let i = nobs - 1; i >= 0; i-- ) {\n\t\tconst idx = indices[ i ];\n\t\tfor ( let j = 0; j < predictors.length; j++ ) {\n\t\t\tconst attr = predictors[ j ];\n\n\t\t\t// Let the value of current attribute be the pivot:\n\t\t\tconst pivot = data[ attr ][ idx ];\n\n\t\t\t// Pick the predicate depending on the type of the attribute value...\n\t\t\tlet predicateName;\n\t\t\tif ( contains( quantitative, attr ) ) {\n\t\t\t\tpredicateName = '>=';\n\t\t\t} else {\n\t\t\t\t// No sense to compare non-numeric attributes so we will check only equality of such attributes...\n\t\t\t\tpredicateName = '==';\n\t\t\t}\n\n\t\t\tconst attrPredPivot = attr + predicateName + pivot;\n\t\t\tif ( alreadyChecked[attrPredPivot] ) {\n\t\t\t\t// Skip such pairs of 'attribute-predicate-pivot' which have been already checked...\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\talreadyChecked[ attrPredPivot ] = true;\n\t\t\tconst predicate = predicates[ predicateName ];\n\n\t\t\t// Splitting training set by given 'attribute-predicate-value':\n\t\t\tconst currSplit = split( data, indices, attr, predicate, pivot );\n\n\t\t\t// Recursively calculating for subsets:\n\t\t\tconst matchEntropy = criterion( data[ response ], currSplit.match );\n\t\t\tconst notMatchEntropy = criterion( data[ response ], currSplit.notMatch );\n\n\t\t\t// Calculating gain:\n\t\t\tlet newScore = 0;\n\t\t\tnewScore += matchEntropy * currSplit.match.length;\n\t\t\tnewScore += notMatchEntropy * currSplit.notMatch.length;\n\t\t\tnewScore /= nobs;\n\t\t\tconst currGain = initialScore - newScore;\n\t\t\tif (\n\t\t\t\tcurrGain > bestSplit.gain &&\n\t\t\t\tcurrSplit.match.length > minBucket &&\n\t\t\t\tcurrSplit.notMatch.length > minBucket\n\t\t\t) {\n\t\t\t\t// Remember pairs 'attribute-predicate-value' which provide gain...\n\t\t\t\tbestSplit = currSplit;\n\t\t\t\tbestSplit.predicateName = predicateName;\n\t\t\t\tbestSplit.predicate = predicate;\n\t\t\t\tbestSplit.attribute = attr;\n\t\t\t\tbestSplit.pivot = pivot;\n\t\t\t\tbestSplit.gain = currGain;\n\t\t\t}\n\t\t}\n\t}\n\tif ( !bestSplit.gain || ( bestSplit.gain / initialScore ) < scoreThreshold ) {\n\t\treturn { category: mostFrequentValue( data[ response ], indices ) };\n\t}\n\t// Building sub-trees:\n\topts.maxTreeDepth = maxTreeDepth - 1;\n\n\timportances[ bestSplit.attribute ] += bestSplit.gain;\n\n\topts.indices = bestSplit.match;\n\tconst matchSubTree = buildClassificationTree( opts, importances );\n\n\topts.indices = bestSplit.notMatch;\n\tconst notMatchSubTree = buildClassificationTree( opts, importances );\n\n\treturn {\n\t\tattribute: bestSplit.attribute,\n\t\tpredicate: bestSplit.predicate,\n\t\tpredicateName: bestSplit.predicateName,\n\t\tpivot: bestSplit.pivot,\n\t\tmatch: matchSubTree,\n\t\tnotMatch: notMatchSubTree,\n\t\tmatchedCount: bestSplit.match.length,\n\t\tnotMatchedCount: bestSplit.notMatch.length\n\t};\n}\n\n/**\n* Function for building classification decision tree.\n*/\nfunction buildRegressionTree( opts ) {\n\tconst {\n\t\tdata, predictors, indices, response,\n\t\tminItemsCount, scoreThreshold, maxTreeDepth,\n\t\tquantitative, minBucket, nTry\n\t} = opts;\n\n\tconst nobs = indices.length;\n\tif ((maxTreeDepth === 0) || ( nobs <= minItemsCount)) {\n\t\t// restriction by maximal depth of tree\n\t\t// or size of training set is to small\n\t\t// so we have to terminate process of building tree\n\t\treturn {\n\t\t\tcategory: mean( data[ response ], indices )\n\t\t};\n\t}\n\n\tconst initialScore = variance( data[ response ], indices );\n\n\t// used as hash-set for avoiding the checking of split by rules\n\t// with the same 'attribute-predicate-pivot' more than once\n\tconst alreadyChecked = {};\n\n\t// this variable expected to contain rule, which splits training set\n\t// into subsets with smaller values of entropy (produces informational gain)\n\tlet bestSplit = {\n\t\tgain: 0\n\t};\n\n\tif ( nTry ) {\n\t\tpredictors = sample( predictors, { size: nTry });\n\t}\n\tfor ( let i = nobs - 1; i >= 0; i-- ) {\n\t\tconst idx = indices[ i ];\n\n\t\t// iterating over all attributes of item\n\t\tfor ( let j = 0; j < predictors.length; j++ ) {\n\t\t\tconst attr = predictors[ j ];\n\n\t\t\t// let the value of current attribute be the pivot\n\t\t\tconst pivot = data[ attr ][ idx ];\n\n\t\t\t// Pick the predicate depending on the type of the attribute value:\n\t\t\tlet predicateName;\n\t\t\tif ( contains( quantitative, attr ) ) {\n\t\t\t\tpredicateName = '>=';\n\t\t\t} else {\n\t\t\t\t// There is no sense to compare non-numeric attributes so we will check only equality of such attributes...\n\t\t\t\tpredicateName = '==';\n\t\t\t}\n\n\t\t\tconst attrPredPivot = attr + predicateName + pivot;\n\t\t\tif ( alreadyChecked[attrPredPivot] ) {\n\t\t\t\t// skip such pairs of 'attribute-predicate-pivot',\n\t\t\t\t// which been already checked\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\talreadyChecked[ attrPredPivot ] = true;\n\n\t\t\tconst predicate = predicates[ predicateName ];\n\n\t\t\t// splitting training set by given 'attribute-predicate-value'\n\t\t\tconst currSplit = split( data, indices, attr, predicate, pivot );\n\n\t\t\t// calculating for subsets:\n\t\t\tconst matchEntropy = variance( data[ response ], currSplit.match );\n\t\t\tconst notMatchEntropy = variance( data[ response ], currSplit.notMatch );\n\n\t\t\t// calculating informational gain\n\t\t\tlet newScore = 0;\n\t\t\tnewScore += matchEntropy * currSplit.match.length;\n\t\t\tnewScore += notMatchEntropy * currSplit.notMatch.length;\n\t\t\tnewScore /= nobs;\n\t\t\tconst currGain = initialScore - newScore;\n\t\t\tif (\n\t\t\t\tcurrGain > bestSplit.gain &&\n\t\t\t\tcurrSplit.match.length > minBucket &&\n\t\t\t\tcurrSplit.notMatch.length > minBucket\n\t\t\t) {\n\t\t\t\tbestSplit = currSplit;\n\t\t\t\tbestSplit.predicateName = predicateName;\n\t\t\t\tbestSplit.predicate = predicate;\n\t\t\t\tbestSplit.attribute = attr;\n\t\t\t\tbestSplit.pivot = pivot;\n\t\t\t\tbestSplit.gain = currGain;\n\t\t\t}\n\t\t}\n\t}\n\tif ( !bestSplit.gain || ( bestSplit.gain / initialScore ) < scoreThreshold ) {\n\t\treturn { category: mean( data[ response ], indices ) };\n\t}\n\n\t// Building sub-trees:\n\topts.maxTreeDepth = maxTreeDepth - 1;\n\n\topts.indices = bestSplit.match;\n\tconst matchSubTree = buildRegressionTree( opts );\n\n\topts.indices = bestSplit.notMatch;\n\tconst notMatchSubTree = buildRegressionTree( opts );\n\n\treturn {\n\t\tattribute: bestSplit.attribute,\n\t\tpredicate: bestSplit.predicate,\n\t\tpredicateName: bestSplit.predicateName,\n\t\tpivot: bestSplit.pivot,\n\t\tmatch: matchSubTree,\n\t\tnotMatch: notMatchSubTree,\n\t\tmatchedCount: bestSplit.match.length,\n\t\tnotMatchedCount: bestSplit.notMatch.length\n\t};\n}\n\n/**\n* Returns the predicted value for the i-th observation using the decision tree.\n*/\nfunction predict( tree, data, i ) {\n\t// Traversing tree from the root to leaf:\n\twhile ( true ) {\n\t\tif ( tree.category ) {\n\t\t\t// Only leafs contains predicted category...\n\t\t\treturn tree.category;\n\t\t}\n\t\tconst attr = tree.attribute;\n\t\tconst value = data[ attr ][ i ];\n\t\tconst predicate = tree.predicate;\n\t\tconst pivot = tree.pivot;\n\n\t\t// Move to one of the sub-trees:\n\t\tif ( predicate( value, pivot ) ) {\n\t\t\ttree = tree.match;\n\t\t} else {\n\t\t\ttree = tree.notMatch;\n\t\t}\n\t}\n}\n\n/**\n* Building array of decision trees.\n*/\nfunction buildRandomForestClassifier( opts ) {\n\t// Creating training sets for each tree:\n\tconst trainingSets = [];\n\tconst nobs = opts.data[ opts.response ].length;\n\tconst indices = incrspace( 0, nobs, 1 );\n\tfor ( let t = 0; t < opts.nTrees; t++ ) {\n\t\ttrainingSets[ t ] = sample( indices );\n\t}\n\tconst forest = [];\n\tfor ( let t = 0; t < opts.nTrees; t++ ) {\n\t\topts.indices = trainingSets[ t ];\n\t\tconst tree = new ClassificationTreeConstructor( opts );\n\t\tforest.push( tree );\n\t}\n\treturn forest;\n}\n\n/**\n* Returns the majority vote prediction for the chosen item.\n*/\nfunction predictRandomForest( forest, data, idx ) {\n\tconst result = {};\n\tfor ( let i = 0; i < forest.length; i++ ) {\n\t\tconst tree = forest[ i ];\n\t\tconst prediction = tree.predict( data, idx );\n\t\tresult[ prediction ] = result[ prediction ] ? result[ prediction ] + 1 : 1;\n\t}\n\tlet max = -1;\n\tlet out;\n\tfor ( let key in result ) {\n\t\tif ( hasOwnProp( result, key ) ) {\n\t\t\tif ( result[ key ] > max ) {\n\t\t\t\tmax = result[ key ];\n\t\t\t\tout = key;\n\t\t\t}\n\t\t}\n\t}\n\treturn out;\n}\n\n\n// EXPORTS //\n\nexport const ClassificationTree = ClassificationTreeConstructor;\nexport const RegressionTree = RegressionTreeConstructor;\nexport const RandomForestClassifier = RandomForestClassifierConstructor;\nexport const TreePlot = Plot;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.applyStyleWithOptions = void 0;\nfunction applyStyleWithOptions(node, options) {\n    var style = node.style;\n    if (options.backgroundColor) {\n        style.backgroundColor = options.backgroundColor;\n    }\n    if (options.width) {\n        style.width = options.width + \"px\";\n    }\n    if (options.height) {\n        style.height = options.height + \"px\";\n    }\n    var manual = options.style;\n    if (manual != null) {\n        Object.keys(manual).forEach(function (key) {\n            style[key] = manual[key];\n        });\n    }\n    return node;\n}\nexports.applyStyleWithOptions = applyStyleWithOptions;\n//# sourceMappingURL=applyStyleWithOptions.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.cloneNode = void 0;\nvar getBlobFromURL_1 = require(\"./getBlobFromURL\");\nvar clonePseudoElements_1 = require(\"./clonePseudoElements\");\nvar util_1 = require(\"./util\");\nfunction cloneCanvasElement(node) {\n    return __awaiter(this, void 0, void 0, function () {\n        var dataURL;\n        return __generator(this, function (_a) {\n            dataURL = node.toDataURL();\n            if (dataURL === 'data:,') {\n                return [2 /*return*/, Promise.resolve(node.cloneNode(false))];\n            }\n            return [2 /*return*/, (0, util_1.createImage)(dataURL)];\n        });\n    });\n}\nfunction cloneVideoElement(node, options) {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            return [2 /*return*/, Promise.resolve(node.poster)\n                    .then(function (url) { return (0, getBlobFromURL_1.getBlobFromURL)(url, options); })\n                    .then(function (data) {\n                    return (0, util_1.makeDataUrl)(data.blob, (0, util_1.getMimeType)(node.poster) || data.contentType);\n                })\n                    .then(function (dataURL) { return (0, util_1.createImage)(dataURL); })];\n        });\n    });\n}\nfunction cloneSingleNode(node, options) {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            if (node instanceof HTMLCanvasElement) {\n                return [2 /*return*/, cloneCanvasElement(node)];\n            }\n            if (node instanceof HTMLVideoElement && node.poster) {\n                return [2 /*return*/, cloneVideoElement(node, options)];\n            }\n            return [2 /*return*/, Promise.resolve(node.cloneNode(false))];\n        });\n    });\n}\nvar isSlotElement = function (node) {\n    return node.tagName != null && node.tagName.toUpperCase() === 'SLOT';\n};\nfunction cloneChildren(nativeNode, clonedNode, options) {\n    var _a;\n    return __awaiter(this, void 0, void 0, function () {\n        var children;\n        return __generator(this, function (_b) {\n            children = isSlotElement(nativeNode) && nativeNode.assignedNodes\n                ? (0, util_1.toArray)(nativeNode.assignedNodes())\n                : (0, util_1.toArray)(((_a = nativeNode.shadowRoot) !== null && _a !== void 0 ? _a : nativeNode).childNodes);\n            if (children.length === 0 || nativeNode instanceof HTMLVideoElement) {\n                return [2 /*return*/, Promise.resolve(clonedNode)];\n            }\n            return [2 /*return*/, children\n                    .reduce(function (deferred, child) {\n                    return deferred\n                        // eslint-disable-next-line no-use-before-define\n                        .then(function () { return cloneNode(child, options); })\n                        .then(function (clonedChild) {\n                        // eslint-disable-next-line promise/always-return\n                        if (clonedChild) {\n                            clonedNode.appendChild(clonedChild);\n                        }\n                    });\n                }, Promise.resolve())\n                    .then(function () { return clonedNode; })];\n        });\n    });\n}\nfunction cloneCSSStyle(nativeNode, clonedNode) {\n    var source = window.getComputedStyle(nativeNode);\n    var target = clonedNode.style;\n    if (!target) {\n        return;\n    }\n    if (source.cssText) {\n        target.cssText = source.cssText;\n    }\n    else {\n        (0, util_1.toArray)(source).forEach(function (name) {\n            target.setProperty(name, source.getPropertyValue(name), source.getPropertyPriority(name));\n        });\n    }\n}\nfunction cloneInputValue(nativeNode, clonedNode) {\n    if (nativeNode instanceof HTMLTextAreaElement) {\n        clonedNode.innerHTML = nativeNode.value;\n    }\n    if (nativeNode instanceof HTMLInputElement) {\n        clonedNode.setAttribute('value', nativeNode.value);\n    }\n}\nfunction decorate(nativeNode, clonedNode) {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            if (!(clonedNode instanceof Element)) {\n                return [2 /*return*/, Promise.resolve(clonedNode)];\n            }\n            return [2 /*return*/, Promise.resolve()\n                    .then(function () { return cloneCSSStyle(nativeNode, clonedNode); })\n                    .then(function () { return (0, clonePseudoElements_1.clonePseudoElements)(nativeNode, clonedNode); })\n                    .then(function () { return cloneInputValue(nativeNode, clonedNode); })\n                    .then(function () { return clonedNode; })];\n        });\n    });\n}\nfunction cloneNode(node, options, isRoot) {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            if (!isRoot && options.filter && !options.filter(node)) {\n                return [2 /*return*/, Promise.resolve(null)];\n            }\n            return [2 /*return*/, Promise.resolve(node)\n                    .then(function (clonedNode) { return cloneSingleNode(clonedNode, options); })\n                    .then(function (clonedNode) { return cloneChildren(node, clonedNode, options); })\n                    .then(function (clonedNode) { return decorate(node, clonedNode); })];\n        });\n    });\n}\nexports.cloneNode = cloneNode;\n//# sourceMappingURL=cloneNode.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.clonePseudoElements = void 0;\nvar util_1 = require(\"./util\");\nfunction formatCSSText(style) {\n    var content = style.getPropertyValue('content');\n    return style.cssText + \" content: '\" + content.replace(/'|\"/g, '') + \"';\";\n}\nfunction formatCSSProperties(style) {\n    return (0, util_1.toArray)(style)\n        .map(function (name) {\n        var value = style.getPropertyValue(name);\n        var priority = style.getPropertyPriority(name);\n        return name + \": \" + value + (priority ? ' !important' : '') + \";\";\n    })\n        .join(' ');\n}\nfunction getPseudoElementStyle(className, pseudo, style) {\n    var selector = \".\" + className + \":\" + pseudo;\n    var cssText = style.cssText\n        ? formatCSSText(style)\n        : formatCSSProperties(style);\n    return document.createTextNode(selector + \"{\" + cssText + \"}\");\n}\nfunction clonePseudoElement(nativeNode, clonedNode, pseudo) {\n    var style = window.getComputedStyle(nativeNode, pseudo);\n    var content = style.getPropertyValue('content');\n    if (content === '' || content === 'none') {\n        return;\n    }\n    var className = (0, util_1.uuid)();\n    try {\n        clonedNode.className = clonedNode.className + \" \" + className;\n    }\n    catch (err) {\n        return;\n    }\n    var styleElement = document.createElement('style');\n    styleElement.appendChild(getPseudoElementStyle(className, pseudo, style));\n    clonedNode.appendChild(styleElement);\n}\nfunction clonePseudoElements(nativeNode, clonedNode) {\n    clonePseudoElement(nativeNode, clonedNode, ':before');\n    clonePseudoElement(nativeNode, clonedNode, ':after');\n}\nexports.clonePseudoElements = clonePseudoElements;\n//# sourceMappingURL=clonePseudoElements.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.embedImages = void 0;\nvar getBlobFromURL_1 = require(\"./getBlobFromURL\");\nvar embedResources_1 = require(\"./embedResources\");\nvar util_1 = require(\"./util\");\nfunction embedBackground(clonedNode, options) {\n    var _a;\n    return __awaiter(this, void 0, void 0, function () {\n        var background;\n        return __generator(this, function (_b) {\n            background = (_a = clonedNode.style) === null || _a === void 0 ? void 0 : _a.getPropertyValue('background');\n            if (!background) {\n                return [2 /*return*/, Promise.resolve(clonedNode)];\n            }\n            return [2 /*return*/, Promise.resolve(background)\n                    .then(function (cssString) { return (0, embedResources_1.embedResources)(cssString, null, options); })\n                    .then(function (cssString) {\n                    clonedNode.style.setProperty('background', cssString, clonedNode.style.getPropertyPriority('background'));\n                    return clonedNode;\n                })];\n        });\n    });\n}\nfunction embedImageNode(clonedNode, options) {\n    return __awaiter(this, void 0, void 0, function () {\n        var src;\n        return __generator(this, function (_a) {\n            if (!(clonedNode instanceof HTMLImageElement && !(0, util_1.isDataUrl)(clonedNode.src)) &&\n                !(clonedNode instanceof SVGImageElement &&\n                    !(0, util_1.isDataUrl)(clonedNode.href.baseVal))) {\n                return [2 /*return*/, Promise.resolve(clonedNode)];\n            }\n            src = clonedNode instanceof HTMLImageElement\n                ? clonedNode.src\n                : clonedNode.href.baseVal;\n            return [2 /*return*/, Promise.resolve(src)\n                    .then(function (url) { return (0, getBlobFromURL_1.getBlobFromURL)(url, options); })\n                    .then(function (data) {\n                    return (0, util_1.makeDataUrl)(data.blob, (0, util_1.getMimeType)(src) || data.contentType);\n                })\n                    .then(function (dataURL) {\n                    return new Promise(function (resolve, reject) {\n                        clonedNode.onload = resolve;\n                        clonedNode.onerror = reject;\n                        if (clonedNode instanceof HTMLImageElement) {\n                            clonedNode.srcset = '';\n                            clonedNode.src = dataURL;\n                        }\n                        else {\n                            clonedNode.href.baseVal = dataURL;\n                        }\n                    });\n                })\n                    .then(function () { return clonedNode; }, function () { return clonedNode; })];\n        });\n    });\n}\nfunction embedChildren(clonedNode, options) {\n    return __awaiter(this, void 0, void 0, function () {\n        var children, deferreds;\n        return __generator(this, function (_a) {\n            children = (0, util_1.toArray)(clonedNode.childNodes);\n            deferreds = children.map(function (child) { return embedImages(child, options); });\n            return [2 /*return*/, Promise.all(deferreds).then(function () { return clonedNode; })];\n        });\n    });\n}\nfunction embedImages(clonedNode, options) {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            if (!(clonedNode instanceof Element)) {\n                return [2 /*return*/, Promise.resolve(clonedNode)];\n            }\n            return [2 /*return*/, Promise.resolve(clonedNode)\n                    .then(function (node) { return embedBackground(node, options); })\n                    .then(function (node) { return embedImageNode(node, options); })\n                    .then(function (node) { return embedChildren(node, options); })];\n        });\n    });\n}\nexports.embedImages = embedImages;\n//# sourceMappingURL=embedImages.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.embedResources = exports.shouldEmbed = exports.embed = exports.parseURLs = exports.toRegex = void 0;\nvar getBlobFromURL_1 = require(\"./getBlobFromURL\");\nvar util_1 = require(\"./util\");\nvar URL_REGEX = /url\\((['\"]?)([^'\"]+?)\\1\\)/g;\nvar URL_WITH_FORMAT_REGEX = /url\\([^)]+\\)\\s*format\\(([\"'])([^\"']+)\\1\\)/g;\nvar FONT_SRC_REGEX = /src:\\s*(?:url\\([^)]+\\)\\s*format\\([^)]+\\)[,;]\\s*)+/g;\nfunction toRegex(url) {\n    // eslint-disable-next-line no-useless-escape\n    var escaped = url.replace(/([.*+?^${}()|\\[\\]\\/\\\\])/g, '\\\\$1');\n    return new RegExp(\"(url\\\\(['\\\"]?)(\" + escaped + \")(['\\\"]?\\\\))\", 'g');\n}\nexports.toRegex = toRegex;\nfunction parseURLs(cssText) {\n    var result = [];\n    cssText.replace(URL_REGEX, function (raw, quotation, url) {\n        result.push(url);\n        return raw;\n    });\n    return result.filter(function (url) { return !(0, util_1.isDataUrl)(url); });\n}\nexports.parseURLs = parseURLs;\nfunction embed(cssText, resourceURL, baseURL, options, get) {\n    var resolvedURL = baseURL ? (0, util_1.resolveUrl)(resourceURL, baseURL) : resourceURL;\n    return Promise.resolve(resolvedURL)\n        .then(function (url) {\n        return get ? get(url) : (0, getBlobFromURL_1.getBlobFromURL)(url, options);\n    })\n        .then(function (data) {\n        if (typeof data === 'string') {\n            return (0, util_1.makeDataUrl)(data, (0, util_1.getMimeType)(resourceURL));\n        }\n        return (0, util_1.makeDataUrl)(data.blob, (0, util_1.getMimeType)(resourceURL) || data.contentType);\n    })\n        .then(function (dataURL) { return cssText.replace(toRegex(resourceURL), \"$1\" + dataURL + \"$3\"); })\n        .then(function (content) { return content; }, function () { return resolvedURL; });\n}\nexports.embed = embed;\nfunction filterPreferredFontFormat(str, _a) {\n    var preferredFontFormat = _a.preferredFontFormat;\n    return !preferredFontFormat\n        ? str\n        : str.replace(FONT_SRC_REGEX, function (match) {\n            // eslint-disable-next-line no-constant-condition\n            while (true) {\n                var _a = URL_WITH_FORMAT_REGEX.exec(match) || [], src = _a[0], format = _a[2];\n                if (!format) {\n                    return '';\n                }\n                if (format === preferredFontFormat) {\n                    return \"src: \" + src + \";\";\n                }\n            }\n        });\n}\nfunction shouldEmbed(url) {\n    return url.search(URL_REGEX) !== -1;\n}\nexports.shouldEmbed = shouldEmbed;\nfunction embedResources(cssText, baseUrl, options) {\n    return __awaiter(this, void 0, void 0, function () {\n        var filteredCSSText;\n        return __generator(this, function (_a) {\n            if (!shouldEmbed(cssText)) {\n                return [2 /*return*/, Promise.resolve(cssText)];\n            }\n            filteredCSSText = filterPreferredFontFormat(cssText, options);\n            return [2 /*return*/, Promise.resolve(filteredCSSText)\n                    .then(parseURLs)\n                    .then(function (urls) {\n                    return urls.reduce(function (deferred, url) {\n                        // eslint-disable-next-line promise/no-nesting\n                        return deferred.then(function (css) { return embed(css, url, baseUrl, options); });\n                    }, Promise.resolve(filteredCSSText));\n                })];\n        });\n    });\n}\nexports.embedResources = embedResources;\n//# sourceMappingURL=embedResources.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.embedWebFonts = exports.getWebFontCSS = void 0;\nvar util_1 = require(\"./util\");\nvar embedResources_1 = require(\"./embedResources\");\nvar cssFetchCache = {};\nfunction fetchCSS(url) {\n    var cache = cssFetchCache[url];\n    if (cache != null) {\n        return cache;\n    }\n    var deferred = window.fetch(url).then(function (res) { return ({\n        url: url,\n        cssText: res.text(),\n    }); });\n    cssFetchCache[url] = deferred;\n    return deferred;\n}\nfunction embedFonts(meta) {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            return [2 /*return*/, meta.cssText.then(function (raw) {\n                    var cssText = raw;\n                    var regexUrl = /url\\([\"']?([^\"')]+)[\"']?\\)/g;\n                    var fontLocs = cssText.match(/url\\([^)]+\\)/g) || [];\n                    var loadFonts = fontLocs.map(function (location) {\n                        var url = location.replace(regexUrl, '$1');\n                        if (!url.startsWith('https://')) {\n                            url = new URL(url, meta.url).href;\n                        }\n                        // eslint-disable-next-line promise/no-nesting\n                        return window\n                            .fetch(url)\n                            .then(function (res) { return res.blob(); })\n                            .then(function (blob) {\n                            return new Promise(function (resolve, reject) {\n                                var reader = new FileReader();\n                                reader.onloadend = function () {\n                                    // Side Effect\n                                    cssText = cssText.replace(location, \"url(\" + reader.result + \")\");\n                                    resolve([location, reader.result]);\n                                };\n                                reader.onerror = reject;\n                                reader.readAsDataURL(blob);\n                            });\n                        });\n                    });\n                    // eslint-disable-next-line promise/no-nesting\n                    return Promise.all(loadFonts).then(function () { return cssText; });\n                })];\n        });\n    });\n}\nfunction parseCSS(source) {\n    if (source == null) {\n        return [];\n    }\n    var result = [];\n    var commentsRegex = /(\\/\\*[\\s\\S]*?\\*\\/)/gi;\n    // strip out comments\n    var cssText = source.replace(commentsRegex, '');\n    var keyframesRegex = new RegExp('((@.*?keyframes [\\\\s\\\\S]*?){([\\\\s\\\\S]*?}\\\\s*?)})', 'gi');\n    // eslint-disable-next-line no-constant-condition\n    while (true) {\n        var matches = keyframesRegex.exec(cssText);\n        if (matches === null) {\n            break;\n        }\n        result.push(matches[0]);\n    }\n    cssText = cssText.replace(keyframesRegex, '');\n    var importRegex = /@import[\\s\\S]*?url\\([^)]*\\)[\\s\\S]*?;/gi;\n    // to match css & media queries together\n    var combinedCSSRegex = '((\\\\s*?(?:\\\\/\\\\*[\\\\s\\\\S]*?\\\\*\\\\/)?\\\\s*?@media[\\\\s\\\\S]' +\n        '*?){([\\\\s\\\\S]*?)}\\\\s*?})|(([\\\\s\\\\S]*?){([\\\\s\\\\S]*?)})';\n    // unified regex\n    var unifiedRegex = new RegExp(combinedCSSRegex, 'gi');\n    // eslint-disable-next-line no-constant-condition\n    while (true) {\n        var matches = importRegex.exec(cssText);\n        if (matches === null) {\n            matches = unifiedRegex.exec(cssText);\n            if (matches === null) {\n                break;\n            }\n            else {\n                importRegex.lastIndex = unifiedRegex.lastIndex;\n            }\n        }\n        else {\n            unifiedRegex.lastIndex = importRegex.lastIndex;\n        }\n        result.push(matches[0]);\n    }\n    return result;\n}\nfunction getCSSRules(styleSheets) {\n    return __awaiter(this, void 0, void 0, function () {\n        var ret, deferreds;\n        return __generator(this, function (_a) {\n            ret = [];\n            deferreds = [];\n            // First loop inlines imports\n            styleSheets.forEach(function (sheet) {\n                if ('cssRules' in sheet) {\n                    try {\n                        (0, util_1.toArray)(sheet.cssRules).forEach(function (item, index) {\n                            if (item.type === CSSRule.IMPORT_RULE) {\n                                var importIndex_1 = index + 1;\n                                var url = item.href;\n                                var deferred = fetchCSS(url)\n                                    .then(function (metadata) { return (metadata ? embedFonts(metadata) : ''); })\n                                    .then(function (cssText) {\n                                    return parseCSS(cssText).forEach(function (rule) {\n                                        try {\n                                            sheet.insertRule(rule, rule.startsWith('@import')\n                                                ? (importIndex_1 += 1)\n                                                : sheet.cssRules.length);\n                                        }\n                                        catch (error) {\n                                            console.error('Error inserting rule from remote css', {\n                                                rule: rule,\n                                                error: error,\n                                            });\n                                        }\n                                    });\n                                })\n                                    .catch(function (e) {\n                                    console.error('Error loading remote css', e.toString());\n                                });\n                                deferreds.push(deferred);\n                            }\n                        });\n                    }\n                    catch (e) {\n                        var inline_1 = styleSheets.find(function (a) { return a.href == null; }) || document.styleSheets[0];\n                        if (sheet.href != null) {\n                            deferreds.push(fetchCSS(sheet.href)\n                                .then(function (metadata) { return (metadata ? embedFonts(metadata) : ''); })\n                                .then(function (cssText) {\n                                return parseCSS(cssText).forEach(function (rule) {\n                                    inline_1.insertRule(rule, sheet.cssRules.length);\n                                });\n                            })\n                                .catch(function (err) {\n                                console.error('Error loading remote stylesheet', err.toString());\n                            }));\n                        }\n                        console.error('Error inlining remote css file', e.toString());\n                    }\n                }\n            });\n            return [2 /*return*/, Promise.all(deferreds).then(function () {\n                    // Second loop parses rules\n                    styleSheets.forEach(function (sheet) {\n                        if ('cssRules' in sheet) {\n                            try {\n                                (0, util_1.toArray)(sheet.cssRules).forEach(function (item) {\n                                    ret.push(item);\n                                });\n                            }\n                            catch (e) {\n                                console.error(\"Error while reading CSS rules from \" + sheet.href, e.toString());\n                            }\n                        }\n                    });\n                    return ret;\n                })];\n        });\n    });\n}\nfunction getWebFontRules(cssRules) {\n    return cssRules\n        .filter(function (rule) { return rule.type === CSSRule.FONT_FACE_RULE; })\n        .filter(function (rule) { return (0, embedResources_1.shouldEmbed)(rule.style.getPropertyValue('src')); });\n}\nfunction parseWebFontRules(node) {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            return [2 /*return*/, new Promise(function (resolve, reject) {\n                    if (node.ownerDocument == null) {\n                        reject(new Error('Provided element is not within a Document'));\n                    }\n                    resolve((0, util_1.toArray)(node.ownerDocument.styleSheets));\n                })\n                    .then(function (styleSheets) { return getCSSRules(styleSheets); })\n                    .then(getWebFontRules)];\n        });\n    });\n}\nfunction getWebFontCSS(node, options) {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            return [2 /*return*/, parseWebFontRules(node)\n                    .then(function (rules) {\n                    return Promise.all(rules.map(function (rule) {\n                        var baseUrl = rule.parentStyleSheet\n                            ? rule.parentStyleSheet.href\n                            : null;\n                        return (0, embedResources_1.embedResources)(rule.cssText, baseUrl, options);\n                    }));\n                })\n                    .then(function (cssTexts) { return cssTexts.join('\\n'); })];\n        });\n    });\n}\nexports.getWebFontCSS = getWebFontCSS;\nfunction embedWebFonts(clonedNode, options) {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            return [2 /*return*/, (options.fontEmbedCSS != null\n                    ? Promise.resolve(options.fontEmbedCSS)\n                    : getWebFontCSS(clonedNode, options)).then(function (cssText) {\n                    var styleNode = document.createElement('style');\n                    var sytleContent = document.createTextNode(cssText);\n                    styleNode.appendChild(sytleContent);\n                    if (clonedNode.firstChild) {\n                        clonedNode.insertBefore(styleNode, clonedNode.firstChild);\n                    }\n                    else {\n                        clonedNode.appendChild(styleNode);\n                    }\n                    return clonedNode;\n                })];\n        });\n    });\n}\nexports.embedWebFonts = embedWebFonts;\n//# sourceMappingURL=embedWebFonts.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getBlobFromURL = void 0;\nvar util_1 = require(\"./util\");\nvar cache = {};\nfunction getCacheKey(url) {\n    var key = url.replace(/\\?.*/, '');\n    // font resourse\n    if (/ttf|otf|eot|woff2?/i.test(key)) {\n        key = key.replace(/.*\\//, '');\n    }\n    return key;\n}\nfunction getBlobFromURL(url, options) {\n    var cacheKey = getCacheKey(url);\n    if (cache[cacheKey] != null) {\n        return cache[cacheKey];\n    }\n    // cache bypass so we dont have CORS issues with cached images\n    // ref: https://developer.mozilla.org/en/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest#Bypassing_the_cache\n    if (options.cacheBust) {\n        // eslint-disable-next-line no-param-reassign\n        url += (/\\?/.test(url) ? '&' : '?') + new Date().getTime();\n    }\n    var failed = function (reason) {\n        var placeholder = '';\n        if (options.imagePlaceholder) {\n            var parts = options.imagePlaceholder.split(/,/);\n            if (parts && parts[1]) {\n                placeholder = parts[1];\n            }\n        }\n        var msg = \"Failed to fetch resource: \" + url;\n        if (reason) {\n            msg = typeof reason === 'string' ? reason : reason.message;\n        }\n        if (msg) {\n            console.error(msg);\n        }\n        return {\n            blob: placeholder,\n            contentType: '',\n        };\n    };\n    var deferred = window\n        .fetch(url)\n        .then(function (res) {\n        // eslint-disable-next-line promise/no-nesting\n        return res.blob().then(function (blob) { return ({\n            blob: blob,\n            contentType: res.headers.get('Content-Type') || '',\n        }); });\n    })\n        .then(function (_a) {\n        var blob = _a.blob, contentType = _a.contentType;\n        return new Promise(function (resolve, reject) {\n            var reader = new FileReader();\n            reader.onloadend = function () {\n                return resolve({\n                    contentType: contentType,\n                    blob: reader.result,\n                });\n            };\n            reader.onerror = reject;\n            reader.readAsDataURL(blob);\n        });\n    })\n        .then(function (_a) {\n        var blob = _a.blob, contentType = _a.contentType;\n        return ({\n            contentType: contentType,\n            blob: (0, util_1.parseDataUrlContent)(blob),\n        });\n    })\n        // on failed\n        .catch(failed);\n    // cache result\n    cache[cacheKey] = deferred;\n    return deferred;\n}\nexports.getBlobFromURL = getBlobFromURL;\n//# sourceMappingURL=getBlobFromURL.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getFontEmbedCSS = exports.toBlob = exports.toJpeg = exports.toPng = exports.toPixelData = exports.toCanvas = exports.toSvg = void 0;\nvar cloneNode_1 = require(\"./cloneNode\");\nvar embedImages_1 = require(\"./embedImages\");\nvar applyStyleWithOptions_1 = require(\"./applyStyleWithOptions\");\nvar embedWebFonts_1 = require(\"./embedWebFonts\");\nvar util_1 = require(\"./util\");\nfunction getImageSize(node, options) {\n    if (options === void 0) { options = {}; }\n    var width = options.width || (0, util_1.getNodeWidth)(node);\n    var height = options.height || (0, util_1.getNodeHeight)(node);\n    return { width: width, height: height };\n}\nfunction toSvg(node, options) {\n    if (options === void 0) { options = {}; }\n    return __awaiter(this, void 0, void 0, function () {\n        var _a, width, height;\n        return __generator(this, function (_b) {\n            _a = getImageSize(node, options), width = _a.width, height = _a.height;\n            return [2 /*return*/, Promise.resolve(node)\n                    .then(function (nativeNode) { return (0, cloneNode_1.cloneNode)(nativeNode, options, true); })\n                    .then(function (clonedNode) { return (0, embedWebFonts_1.embedWebFonts)(clonedNode, options); })\n                    .then(function (clonedNode) { return (0, embedImages_1.embedImages)(clonedNode, options); })\n                    .then(function (clonedNode) { return (0, applyStyleWithOptions_1.applyStyleWithOptions)(clonedNode, options); })\n                    .then(function (clonedNode) { return (0, util_1.nodeToDataURL)(clonedNode, width, height); })];\n        });\n    });\n}\nexports.toSvg = toSvg;\nvar dimensionCanvasLimit = 16384; // as per https://developer.mozilla.org/en-US/docs/Web/HTML/Element/canvas#maximum_canvas_size\nfunction checkCanvasDimensions(canvas) {\n    if (canvas.width > dimensionCanvasLimit ||\n        canvas.height > dimensionCanvasLimit) {\n        if (canvas.width > dimensionCanvasLimit &&\n            canvas.height > dimensionCanvasLimit) {\n            if (canvas.width > canvas.height) {\n                canvas.height *= dimensionCanvasLimit / canvas.width;\n                canvas.width = dimensionCanvasLimit;\n            }\n            else {\n                canvas.width *= dimensionCanvasLimit / canvas.height;\n                canvas.height = dimensionCanvasLimit;\n            }\n        }\n        else if (canvas.width > dimensionCanvasLimit) {\n            canvas.height *= dimensionCanvasLimit / canvas.width;\n            canvas.width = dimensionCanvasLimit;\n        }\n        else {\n            canvas.width *= dimensionCanvasLimit / canvas.height;\n            canvas.height = dimensionCanvasLimit;\n        }\n    }\n}\nfunction toCanvas(node, options) {\n    if (options === void 0) { options = {}; }\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            return [2 /*return*/, toSvg(node, options)\n                    .then(util_1.createImage)\n                    .then(function (img) {\n                    var canvas = document.createElement('canvas');\n                    var context = canvas.getContext('2d');\n                    var ratio = options.pixelRatio || (0, util_1.getPixelRatio)();\n                    var _a = getImageSize(node, options), width = _a.width, height = _a.height;\n                    var canvasWidth = options.canvasWidth || width;\n                    var canvasHeight = options.canvasHeight || height;\n                    canvas.width = canvasWidth * ratio;\n                    canvas.height = canvasHeight * ratio;\n                    if (!options.skipAutoScale) {\n                        checkCanvasDimensions(canvas);\n                    }\n                    canvas.style.width = \"\" + canvasWidth;\n                    canvas.style.height = \"\" + canvasHeight;\n                    if (options.backgroundColor) {\n                        context.fillStyle = options.backgroundColor;\n                        context.fillRect(0, 0, canvas.width, canvas.height);\n                    }\n                    context.drawImage(img, 0, 0, canvas.width, canvas.height);\n                    return canvas;\n                })];\n        });\n    });\n}\nexports.toCanvas = toCanvas;\nfunction toPixelData(node, options) {\n    if (options === void 0) { options = {}; }\n    return __awaiter(this, void 0, void 0, function () {\n        var _a, width, height;\n        return __generator(this, function (_b) {\n            _a = getImageSize(node, options), width = _a.width, height = _a.height;\n            return [2 /*return*/, toCanvas(node, options).then(function (canvas) {\n                    var ctx = canvas.getContext('2d');\n                    return ctx.getImageData(0, 0, width, height).data;\n                })];\n        });\n    });\n}\nexports.toPixelData = toPixelData;\nfunction toPng(node, options) {\n    if (options === void 0) { options = {}; }\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            return [2 /*return*/, toCanvas(node, options).then(function (canvas) { return canvas.toDataURL(); })];\n        });\n    });\n}\nexports.toPng = toPng;\nfunction toJpeg(node, options) {\n    if (options === void 0) { options = {}; }\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            return [2 /*return*/, toCanvas(node, options).then(function (canvas) {\n                    return canvas.toDataURL('image/jpeg', options.quality || 1);\n                })];\n        });\n    });\n}\nexports.toJpeg = toJpeg;\nfunction toBlob(node, options) {\n    if (options === void 0) { options = {}; }\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            return [2 /*return*/, toCanvas(node, options).then(util_1.canvasToBlob)];\n        });\n    });\n}\nexports.toBlob = toBlob;\nfunction getFontEmbedCSS(node, options) {\n    if (options === void 0) { options = {}; }\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            return [2 /*return*/, (0, embedWebFonts_1.getWebFontCSS)(node, options)];\n        });\n    });\n}\nexports.getFontEmbedCSS = getFontEmbedCSS;\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.nodeToDataURL = exports.svgToDataURL = exports.createImage = exports.canvasToBlob = exports.getPixelRatio = exports.getNodeHeight = exports.getNodeWidth = exports.toArray = exports.delay = exports.uuid = exports.parseDataUrlContent = exports.makeDataUrl = exports.isDataUrl = exports.resolveUrl = exports.getMimeType = exports.getExtension = void 0;\nvar WOFF = 'application/font-woff';\nvar JPEG = 'image/jpeg';\nvar mimes = {\n    woff: WOFF,\n    woff2: WOFF,\n    ttf: 'application/font-truetype',\n    eot: 'application/vnd.ms-fontobject',\n    png: 'image/png',\n    jpg: JPEG,\n    jpeg: JPEG,\n    gif: 'image/gif',\n    tiff: 'image/tiff',\n    svg: 'image/svg+xml',\n};\nfunction getExtension(url) {\n    var match = /\\.([^./]*?)$/g.exec(url);\n    return match ? match[1] : '';\n}\nexports.getExtension = getExtension;\nfunction getMimeType(url) {\n    var extension = getExtension(url).toLowerCase();\n    return mimes[extension] || '';\n}\nexports.getMimeType = getMimeType;\nfunction resolveUrl(url, baseUrl) {\n    // url is absolute already\n    if (url.match(/^[a-z]+:\\/\\//i)) {\n        return url;\n    }\n    // url is absolute already, without protocol\n    if (url.match(/^\\/\\//)) {\n        return window.location.protocol + url;\n    }\n    // dataURI, mailto:, tel:, etc.\n    if (url.match(/^[a-z]+:/i)) {\n        return url;\n    }\n    var doc = document.implementation.createHTMLDocument();\n    var base = doc.createElement('base');\n    var a = doc.createElement('a');\n    doc.head.appendChild(base);\n    doc.body.appendChild(a);\n    if (baseUrl) {\n        base.href = baseUrl;\n    }\n    a.href = url;\n    return a.href;\n}\nexports.resolveUrl = resolveUrl;\nfunction isDataUrl(url) {\n    return url.search(/^(data:)/) !== -1;\n}\nexports.isDataUrl = isDataUrl;\nfunction makeDataUrl(content, mimeType) {\n    return \"data:\" + mimeType + \";base64,\" + content;\n}\nexports.makeDataUrl = makeDataUrl;\nfunction parseDataUrlContent(dataURL) {\n    return dataURL.split(/,/)[1];\n}\nexports.parseDataUrlContent = parseDataUrlContent;\nexports.uuid = (function uuid() {\n    // generate uuid for className of pseudo elements.\n    // We should not use GUIDs, otherwise pseudo elements sometimes cannot be captured.\n    var counter = 0;\n    // ref: http://stackoverflow.com/a/6248722/2519373\n    var random = function () {\n        // eslint-disable-next-line no-bitwise\n        return (\"0000\" + ((Math.random() * Math.pow(36, 4)) << 0).toString(36)).slice(-4);\n    };\n    return function () {\n        counter += 1;\n        return \"u\" + random() + counter;\n    };\n})();\nvar delay = function (ms) {\n    return function (args) {\n        return new Promise(function (resolve) { return setTimeout(function () { return resolve(args); }, ms); });\n    };\n};\nexports.delay = delay;\nfunction toArray(arrayLike) {\n    var arr = [];\n    for (var i = 0, l = arrayLike.length; i < l; i += 1) {\n        arr.push(arrayLike[i]);\n    }\n    return arr;\n}\nexports.toArray = toArray;\nfunction px(node, styleProperty) {\n    var val = window.getComputedStyle(node).getPropertyValue(styleProperty);\n    return parseFloat(val.replace('px', ''));\n}\nfunction getNodeWidth(node) {\n    var leftBorder = px(node, 'border-left-width');\n    var rightBorder = px(node, 'border-right-width');\n    return node.clientWidth + leftBorder + rightBorder;\n}\nexports.getNodeWidth = getNodeWidth;\nfunction getNodeHeight(node) {\n    var topBorder = px(node, 'border-top-width');\n    var bottomBorder = px(node, 'border-bottom-width');\n    return node.clientHeight + topBorder + bottomBorder;\n}\nexports.getNodeHeight = getNodeHeight;\nfunction getPixelRatio() {\n    var ratio;\n    var FINAL_PROCESS;\n    try {\n        FINAL_PROCESS = process;\n    }\n    catch (e) {\n        // pass\n    }\n    var val = FINAL_PROCESS && FINAL_PROCESS.env\n        ? FINAL_PROCESS.env.devicePixelRatio\n        : null;\n    if (val) {\n        ratio = parseInt(val, 10);\n        if (Number.isNaN(ratio)) {\n            ratio = 1;\n        }\n    }\n    return ratio || window.devicePixelRatio || 1;\n}\nexports.getPixelRatio = getPixelRatio;\nfunction canvasToBlob(canvas) {\n    if (canvas.toBlob) {\n        return new Promise(function (resolve) { return canvas.toBlob(resolve); });\n    }\n    return new Promise(function (resolve) {\n        var binaryString = window.atob(canvas.toDataURL().split(',')[1]);\n        var len = binaryString.length;\n        var binaryArray = new Uint8Array(len);\n        for (var i = 0; i < len; i += 1) {\n            binaryArray[i] = binaryString.charCodeAt(i);\n        }\n        resolve(new Blob([binaryArray], { type: 'image/png' }));\n    });\n}\nexports.canvasToBlob = canvasToBlob;\nfunction createImage(url) {\n    return new Promise(function (resolve, reject) {\n        var img = new Image();\n        img.onload = function () { return resolve(img); };\n        img.onerror = reject;\n        img.crossOrigin = 'anonymous';\n        img.decoding = 'sync';\n        img.src = url;\n    });\n}\nexports.createImage = createImage;\nfunction svgToDataURL(svg) {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            return [2 /*return*/, Promise.resolve()\n                    .then(function () { return new XMLSerializer().serializeToString(svg); })\n                    .then(encodeURIComponent)\n                    .then(function (html) { return \"data:image/svg+xml;charset=utf-8,\" + html; })];\n        });\n    });\n}\nexports.svgToDataURL = svgToDataURL;\nfunction nodeToDataURL(node, width, height) {\n    return __awaiter(this, void 0, void 0, function () {\n        var xmlns, svg, foreignObject;\n        return __generator(this, function (_a) {\n            xmlns = 'http://www.w3.org/2000/svg';\n            svg = document.createElementNS(xmlns, 'svg');\n            foreignObject = document.createElementNS(xmlns, 'foreignObject');\n            svg.setAttribute('width', \"\" + width);\n            svg.setAttribute('height', \"\" + height);\n            svg.setAttribute('viewBox', \"0 0 \" + width + \" \" + height);\n            foreignObject.setAttribute('width', '100%');\n            foreignObject.setAttribute('height', '100%');\n            foreignObject.setAttribute('x', '0');\n            foreignObject.setAttribute('y', '0');\n            foreignObject.setAttribute('externalResourcesRequired', 'true');\n            svg.appendChild(foreignObject);\n            foreignObject.appendChild(node);\n            return [2 /*return*/, svgToDataURL(svg)];\n        });\n    });\n}\nexports.nodeToDataURL = nodeToDataURL;\n//# sourceMappingURL=util.js.map"],"sourceRoot":""}