{"version":3,"sources":["../node_modules/@stdlib/math/base/assert/is-negative-zero/lib/index.js","../node_modules/@stdlib/math/base/assert/is-negative-zero/lib/main.js","../node_modules/@stdlib/math/base/special/min/lib/index.js","../node_modules/@stdlib/math/base/special/min/lib/min.js","../node_modules/@stdlib/math/base/special/round/lib/index.js","../node_modules/@stdlib/math/base/special/round/lib/round.js","actions/namespace.js","components/async/index.js","constants/colors.js","ev/components/lesson-creator/index.js","ev/containers/lesson-creator/index.js","components/lessons-page/details_modal.js","components/lessons-page/delete_modal.js","components/lessons-page/lesson.js","components/lessons-page/enrolled_lesson.js","components/lessons-page/no_course_banner.js","components/lessons-page/no_lesson_banner.js","components/lessons-page/index.js","containers/visible-lessons-page/index.js","utils/file_saver.js","utils/format_time.js","utils/is_owner.js","utils/sort_lessons.js","../node_modules/react-bootstrap/cjs/ButtonToolbar.js","../node_modules/react-bootstrap/cjs/ProgressBar.js"],"names":["lesson","setImmediate","self","saveAs","nodeInterop"],"mappings":"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","file":"static/js/3980.f970ad4b.chunk.js","sourcesContent":["/**\n* @license Apache-2.0\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n/**\n* Test if a double-precision floating-point numeric value is negative zero.\n*\n* @module @stdlib/math/base/assert/is-negative-zero\n*\n* @example\n* var isNegativeZero = require( '@stdlib/math/base/assert/is-negative-zero' );\n*\n* var bool = isNegativeZero( -0.0 );\n* // returns true\n*\n* bool = isNegativeZero( 0.0 );\n* // returns false\n*/\n\n// MODULES //\n\nvar isNegativeZero = require( './main.js' );\n\n\n// EXPORTS //\n\nmodule.exports = isNegativeZero;\n","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n// MODULES //\n\nvar NINF = require( '@stdlib/constants/float64/ninf' );\n\n\n// MAIN //\n\n/**\n* Tests if a double-precision floating-point numeric value is negative zero.\n*\n* @param {number} x - value to test\n* @returns {boolean} boolean indicating whether the value is negative zero\n*\n* @example\n* var bool = isNegativeZero( -0.0 );\n* // returns true\n*\n* @example\n* var bool = isNegativeZero( 0.0 );\n* // returns false\n*/\nfunction isNegativeZero( x ) {\n\treturn (x === 0.0 && 1.0/x === NINF);\n}\n\n\n// EXPORTS //\n\nmodule.exports = isNegativeZero;\n","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n/**\n* Return the minimum value.\n*\n* @module @stdlib/math/base/special/min\n*\n* @example\n* var min = require( '@stdlib/math/base/special/min' );\n*\n* var v = min( 3.14, 4.2 );\n* // returns 3.14\n*\n* v = min( 5.9, 3.14, 4.2 );\n* // returns 3.14\n*\n* v = min( 3.14, NaN );\n* // returns NaN\n*\n* v = min( +0.0, -0.0 );\n* // returns -0.0\n*/\n\n// MODULES //\n\nvar min = require( './min.js' );\n\n\n// EXPORTS //\n\nmodule.exports = min;\n","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n// MODULES //\n\nvar isNegativeZero = require( './../../../../base/assert/is-negative-zero' );\nvar isnan = require( './../../../../base/assert/is-nan' );\nvar NINF = require( '@stdlib/constants/float64/ninf' );\nvar PINF = require( '@stdlib/constants/float64/pinf' );\n\n\n// MAIN //\n\n/**\n* Returns the minimum value.\n*\n* @param {number} [x] - first number\n* @param {number} [y] - second number\n* @param {...number} [args] - numbers\n* @returns {number} minimum value\n*\n* @example\n* var v = min( 3.14, 4.2 );\n* // returns 3.14\n*\n* @example\n* var v = min( 5.9, 3.14, 4.2 );\n* // returns 3.14\n*\n* @example\n* var v = min( 3.14, NaN );\n* // returns NaN\n*\n* @example\n* var v = min( +0.0, -0.0 );\n* // returns -0.0\n*/\nfunction min( x, y ) {\n\tvar len;\n\tvar m;\n\tvar v;\n\tvar i;\n\n\tlen = arguments.length;\n\tif ( len === 2 ) {\n\t\tif ( isnan( x ) || isnan( y ) ) {\n\t\t\treturn NaN;\n\t\t}\n\t\tif ( x === NINF || y === NINF ) {\n\t\t\treturn NINF;\n\t\t}\n\t\tif ( x === y && x === 0.0 ) {\n\t\t\tif ( isNegativeZero( x ) ) {\n\t\t\t\treturn x;\n\t\t\t}\n\t\t\treturn y;\n\t\t}\n\t\tif ( x < y ) {\n\t\t\treturn x;\n\t\t}\n\t\treturn y;\n\t}\n\tm = PINF;\n\tfor ( i = 0; i < len; i++ ) {\n\t\tv = arguments[ i ];\n\t\tif ( isnan( v ) || v === NINF ) {\n\t\t\treturn v;\n\t\t}\n\t\tif ( v < m ) {\n\t\t\tm = v;\n\t\t} else if (\n\t\t\tv === m &&\n\t\t\tv === 0.0 &&\n\t\t\tisNegativeZero( v )\n\t\t) {\n\t\t\tm = v;\n\t\t}\n\t}\n\treturn m;\n}\n\n\n// EXPORTS //\n\nmodule.exports = min;\n","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n// TODO: implementation\n\n/**\n* Round a numeric value to the nearest integer.\n*\n* @module @stdlib/math/base/special/round\n*\n* @example\n* var round = require( '@stdlib/math/base/special/round' );\n*\n* var v = round( -4.2 );\n* // returns -4.0\n*\n* v = round( -4.5 );\n* // returns -4.0\n*\n* v = round( -4.6 );\n* // returns -5.0\n*\n* v = round( 9.99999 );\n* // returns 10.0\n*\n* v = round( 9.5 );\n* // returns 10.0\n*\n* v = round( 9.2 );\n* // returns 9.0\n*\n* v = round( 0.0 );\n* // returns 0.0\n*\n* v = round( -0.0 );\n* // returns -0.0\n*\n* v = round( Infinity );\n* // returns Infinity\n*\n* v = round( -Infinity );\n* // returns -Infinity\n*\n* v = round( NaN );\n* // returns NaN\n*/\n\n// MODULES //\n\nvar round = require( './round.js' );\n\n\n// EXPORTS //\n\nmodule.exports = round;\n","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n// TODO: implementation\n\n/**\n* Rounds a numeric value to the nearest integer.\n*\n* @param {number} x - input value\n* @returns {number} function value\n*\n* @example\n* var v = round( -4.2 );\n* // returns -4.0\n*\n* @example\n* var v = round( -4.5 );\n* // returns -4.0\n*\n* @example\n* var v = round( -4.6 );\n* // returns -5.0\n*\n* @example\n* var v = round( 9.99999 );\n* // returns 10.0\n*\n* @example\n* var v = round( 9.5 );\n* // returns 10.0\n*\n* @example\n* var v = round( 9.2 );\n* // returns 9.0\n*\n* @example\n* var v = round( 0.0 );\n* // returns 0.0\n*\n* @example\n* var v = round( -0.0 );\n* // returns -0.0\n*\n* @example\n* var v = round( Infinity );\n* // returns Infinity\n*\n* @example\n* var v = round( -Infinity );\n* // returns -Infinity\n*\n* @example\n* var v = round( NaN );\n* // returns NaN\n*/\nvar round = Math.round; // eslint-disable-line stdlib/no-builtin-math\n\n\n// EXPORTS //\n\nmodule.exports = round;\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport axios from 'axios';\nimport qs from 'querystring';\nimport i18next from 'i18next';\nimport { isPrimitive as isString } from '@stdlib/assert/is-string';\nimport saveAs from 'utils/file_saver.js';\nimport server from 'constants/server';\nimport { addNotification, addErrorNotification } from 'actions/notification';\nimport { getCohorts } from 'actions/cohort';\nimport { APPEND_CREATED_NAMESPACE, CHANGED_NAMESPACE, DELETED_CURRENT_NAMESPACE, GET_ALL_NAMESPACES, UPDATED_OWNED_NAMESPACE, UPDATED_STUDENT_PROGRESS } from 'constants/action_types.js';\n\n\n// EXPORTS //\n\n/**\n * Returns an action object to be used in signalling that a namespace has been created.\n *\n * @param {Object} namespace - the created namespace\n * @returns {Object} the action object\n */\nexport function appendCreatedNamespace( namespace ) {\n\treturn {\n\t\ttype: APPEND_CREATED_NAMESPACE,\n\t\tpayload: {\n\t\t\tnamespace\n\t\t}\n\t};\n}\n\n/**\n * Returns an action object to be used in signalling that a namespace has been changed.\n *\n * @param {Object} namespace - the changed namespace\n * @param {string} namespace.title - namespace title\n * @param {Array} namespace.owners - ids of owners\n * @param {Array} namespace.announcements - announcements\n * @param {Array} namespace.cohorts - cohorts\n * @param {string} namespace.description - namespace description\n * @param {boolean} namespace.enableTicketing - controls if ticketing is enabled for the namespace\n * @param {string} namespace._id - id of the namespace\n * @param {Array} namespace.completions - array of completion metric objects associated with the namespace\n * @returns {Object} the action object\n */\nexport function changedNamespace({ title, owners, announcements = [], cohorts = [], description, enableTicketing, _id, completions }) {\n\treturn {\n\t\ttype: CHANGED_NAMESPACE,\n\t\tpayload: {\n\t\t\ttitle,\n\t\t\tannouncements,\n\t\t\tcohorts,\n\t\t\tdescription,\n\t\t\tenableTicketing,\n\t\t\towners,\n\t\t\tcompletions,\n\t\t\t_id\n\t\t}\n\t};\n}\n\n/**\n * Returns an action object to be used in signalling that a namespace has been deleted.\n *\n * @param {string} id - the id of the namespace to be deleted\n * @returns {Object} the action object\n */\nexport function deletedCurrentNamespace( id ) {\n\treturn {\n\t\ttype: DELETED_CURRENT_NAMESPACE,\n\t\tpayload: {\n\t\t\tid\n\t\t}\n\t};\n}\n\n/**\n * Returns an action object to be used in signalling that a student's progress has been updated.\n *\n * @param {Object} options - progress of the student\n * @param {string} options.email - email of the student\n * @param {string} options.lessonId - lesson id\n * @param {number} options.progress - progress of the student\n * @param {Object} options.cohort - cohort of the student\n */\nexport function updateStudentProgress({ email, lessonID, progress, cohort }) {\n\treturn {\n\t\ttype: UPDATED_STUDENT_PROGRESS,\n\t\tpayload: {\n\t\t\temail, lessonID, progress, cohort\n\t\t}\n\t};\n}\n\n/**\n * Returns an action object to be used in signalling that an owned namespace has been updated.\n *\n * @param {Object} namespace - the updated namespace\n * @param {string} namespace.title - namespace title\n * @param {Array} namespace.owners - ids of owners\n * @param {Array} namespace.enableTicketing - controls if ticketing is enabled for the namespace\n * @param {string} namespace._id - id of the namespace\n * @returns {Object} the action object\n */\nexport function updatedOwnedNamespace({ title, owners, description, enableTicketing, _id }) {\n\treturn {\n\t\ttype: UPDATED_OWNED_NAMESPACE,\n\t\tpayload: {\n\t\t\ttitle,\n\t\t\tdescription,\n\t\t\towners,\n\t\t\tenableTicketing,\n\t\t\t_id\n\t\t}\n\t};\n}\n\n/**\n * Makes a POST request to create a new namespace.\n *\n * @param {Function} dispatch - dispatch function\n * @param {Object} namespace - the new namespace\n * @param {string} namespace.title - namespace title\n * @param {Array} namespace.description - namespace description\n * @param {string} namespace.tag - a completion category associated with the namespace\n * @param {Array} namespace.owners - ids of owners\n * @param {Object} namespace.props - properties of the invoking component\n */\nexport const createNamespace = async ( dispatch, { title, description, tag, owners, props }) => {\n\ttry {\n\t\tconst body = {\n\t\t\ttitle,\n\t\t\tdescription,\n\t\t\towners,\n\t\t\t...(isString( tag ) && tag !== '_default_tag' && { tag })\n\t\t};\n\t\tconst res = await axios.post( server+'/create_namespace', body );\n\t\tif ( !res.data.successful ) {\n\t\t\treturn addErrorNotification( dispatch, new Error( res.data.message ));\n\t\t}\n\t\tconst namespace = res.data.namespace;\n\t\t// props.onNamespace( namespace );\n\t\tdispatch( appendCreatedNamespace( namespace ) );\n\t\twindow.location.replace( '/dashboard/lessons/'+title );\n\t\taddNotification( dispatch, {\n\t\t\tmessage: res.data.message,\n\t\t\tlevel: res.data.successful ? 'success' : 'error'\n\t\t});\n\t} catch ( err ) {\n\t\taddErrorNotification( dispatch, err );\n\t}\n};\n\n/**\n * Returns a function to make a POST request to create a new namespace.\n *\n * @param {Function} dispatch - dispatch function\n * @returns {Function} function to make the POST request to create a new namespace\n */\nexport const createNamespaceInjector = dispatch => {\n\treturn async ({ title, description, tag, owners, props }) => {\n\t\tawait createNamespace( dispatch, { title, description, tag, owners, props } );\n\t};\n};\n\n/**\n * Makes a POST request to delete a namespace.\n *\n * @param {Function} dispatch - dispatch function\n * @param {string} id - the id of the namespace to be deleted\n * @returns {void}\n */\nexport const deleteCurrentNamespace = async ( dispatch, id ) => {\n\ttry {\n\t\tconst res = await axios.post( server+'/delete_namespace', { id });\n\t\tdispatch( deletedCurrentNamespace( id ) );\n\t\taddNotification( dispatch, {\n\t\t\tmessage: res.data.message,\n\t\t\tlevel: 'success'\n\t\t});\n\t} catch ( err ) {\n\t\treturn addErrorNotification( dispatch, err );\n\t}\n};\n\n/**\n * Returns a function to make a POST request to delete a namespace.\n *\n * @param {Function} dispatch - dispatch function\n * @returns {Function} function to make the POST request to delete a namespace\n */\nexport const deleteCurrentNamespaceInjector = ( dispatch ) => {\n\treturn async ( id ) => {\n\t\tawait deleteCurrentNamespace( dispatch, id );\n\t};\n};\n\n/**\n * Makes a POST request to update a namespace.\n *\n * @param {Function} dispatch - dispatch function\n * @param {Object} ns - the updated namespace\n */\nexport const updateCurrentNamespace = async ( dispatch, ns ) => {\n\ttry {\n\t\tconst res = await axios.post( server+'/update_namespace', { ns });\n\t\tdispatch( changedNamespace( res.data.namespace ) );\n\t\tdispatch( updatedOwnedNamespace( res.data.namespace ) );\n\t\taddNotification( dispatch, {\n\t\t\tmessage: res.data.message,\n\t\t\tlevel: 'success'\n\t\t});\n\t\tgetCohorts( dispatch, {\n\t\t\tnamespaceID: ns._id\n\t\t});\n\t} catch ( err ) {\n\t\taddErrorNotification( dispatch, err );\n\t}\n};\n\n/**\n * Returns a function to make a POST request to update a namespace.\n *\n * @param {Function} dispatch - dispatch function\n * @returns {Function} function to make the POST request to update a namespace\n */\nexport const updateCurrentNamespaceInjector = ( dispatch ) => {\n\treturn async ( id, ns ) => {\n\t\tawait updateCurrentNamespace( dispatch, id, ns );\n\t};\n};\n\n/**\n * Makes a GET request to get a namespace's actions.\n *\n * @param {Function} dispatch - dispatch function\n * @param {Object} options - request options\n * @param {string} options.namespaceID - id of the namespace\n * @param {string} options.namespaceTitle - title of the namespace\n * @returns {void}\n */\nexport const getNamespaceActions = async ( dispatch, { namespaceID, namespaceTitle } ) => {\n\ttry {\n\t\tconst res = await axios.get( server+'/get_namespace_actions?'+qs.stringify({ namespaceID }) );\n\t\tconst blob = new Blob([ res.data ], {\n\t\t\ttype: 'application/json'\n\t\t});\n\t\tconst name = `actions_${namespaceTitle}.json`;\n\t\tsaveAs( blob, name );\n\t} catch ( err ) {\n\t\taddErrorNotification( dispatch, err );\n\t}\n};\n\n/**\n * Returns a function to make a GET request to get a namespace's actions.\n *\n * @param {Function} dispatch - dispatch function\n * @returns {Function} function to make the GET request to get a namespace's actions\n */\nexport const getNamespaceActionsInjector = ( dispatch ) => {\n\treturn async ({ namespaceID, namespaceTitle }) => {\n\t\tawait getNamespaceActions( dispatch, { namespaceID, namespaceTitle });\n\t};\n};\n\n/**\n * Makes a POST request to update a user's lesson progress.\n *\n * @param {Function} dispatch - dispatch function\n * @param {Object} options - request options\n * @param {string} options.namespaceID - id of the namespace\n * @param {string} options.lessonID - id of the lesson\n * @param {string} options.email - email of the user\n * @param {number} options.progress - progress of the user\n * @param {Object} options.cohort - cohort of the user\n */\nexport const adjustProgress = async ( dispatch, { email, lessonID, namespaceID, progress, cohort }) => {\n\tconst res = await axios.post( server+'/user_adjust_progress', {\n\t\temail, lessonID, namespaceID, progress\n\t});\n\taddNotification( dispatch, {\n\t\ttitle: i18next.t('common:updated'),\n\t\tmessage: res.data.message,\n\t\tlevel: 'success'\n\t});\n\tdispatch( updateStudentProgress({ email, lessonID, progress, cohort }) );\n};\n\n/**\n * Returns a function to make a POST request to update a user's lesson progress.\n *\n * @param {Function} dispatch - dispatch function\n * @returns {Function} function to make the POST request to update a user's lesson progress\n */\nexport const adjustProgressInjector = ( dispatch ) => {\n\treturn async ( { email, lessonID, namespaceID, progress, cohort } ) => {\n\t\tawait adjustProgress( dispatch, { email, lessonID, namespaceID, progress, cohort } );\n\t};\n};\n\n/**\n * Makes a GET request to get a all available namespaces.\n *\n * @param {Function} dispatch - dispatch function\n * @returns {void}\n */\nexport const getAllNamespaces = async ( dispatch ) => {\n\ttry {\n\t\tconst res = await axios.get( server+'/get_all_namespaces' );\n\t\tdispatch({\n\t\t\ttype: GET_ALL_NAMESPACES,\n\t\t\tpayload: {\n\t\t\t\tnamespaces: res.data.namespaces\n\t\t\t}\n\t\t});\n\t} catch ( err ) {\n\t\treturn addErrorNotification( dispatch, err );\n\t}\n};\n\n/**\n * Returns a function to make a GET request to get a all available namespaces.\n *\n * @param {Function} dispatch - dispatch function\n * @returns {Function} function to make the GET request to get a all available namespaces\n */\nexport const getAllNamespacesInjector = ( dispatch ) => {\n\treturn async () => {\n\t\tawait getAllNamespaces( dispatch );\n\t};\n};\n\n/**\n * Makes a POST request to set the order lessons appear on the dashboard.\n *\n * @param {Function} dispatch - dispatch function\n * @param {Object} options - request options\n * @param {Array} options.lessons - lessons of the course in the order to be displayed on the dashboard\n * @param {string} options.id - id of the namespace\n * @returns {void}\n */\nexport const setLessonOrder = async ( dispatch, { lessons, id }) => {\n\ttry {\n\t\tawait axios.post( server+'/set_lesson_order', {\n\t\t\tlessons, id\n\t\t});\n\t} catch ( err ) {\n\t\treturn addErrorNotification( dispatch, err );\n\t}\n};\n\n/**\n * Returns a function to make a POST request to set the order lessons appear on the dashboard.\n *\n * @param {Function} dispatch - dispatch function\n * @returns {Function} function to make the POST request to set the order lessons appear on the dashboard\n */\nexport const setLessonOrderInjector = ( dispatch ) => {\n\treturn async ({ lessons, id }) => {\n\t\tawait setLessonOrder( dispatch, { lessons, id } );\n\t};\n};\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React, { Component } from 'react';\nimport Spinner from 'components/spinner';\n\n\n// MAIN //\n\n/**\n * Adds a spinner to a component for asynchronous loading.\n *\n * @param {Component} importComponent - component to be wrapped\n * @returns {AsyncComponent} wrapped component\n */\nfunction asyncComponent( importComponent ) {\n\tclass AsyncComponent extends Component {\n\t\tconstructor( props ) {\n\t\t\tsuper( props );\n\n\t\t\tthis.state = {\n\t\t\t\tcomponent: null\n\t\t\t};\n\t\t}\n\n\t\tasync componentDidMount() {\n\t\t\tconst { default: component } = await importComponent();\n\t\t\tthis.setState({ // eslint-disable-line react/no-did-mount-set-state\n\t\t\t\tcomponent: component\n\t\t\t});\n\t\t}\n\n\t\trender() {\n\t\t\tconst C = this.state.component;\n\t\t\treturn C ? <C {...this.props} /> : <Spinner />;\n\t\t}\n\t}\n\treturn AsyncComponent;\n}\n\n\n// EXPORTS //\n\nexport default asyncComponent;\n","/**\r\n* Copyright (C) 2016-present The ISLE Authors\r\n*\r\n* The isle-dashboard program is free software: you can redistribute it and/or modify\r\n* it under the terms of the GNU Affero General Public License as\r\n* published by the Free Software Foundation, either version 3 of the\r\n* License, or (at your option) any later version.\r\n*\r\n* This program is distributed in the hope that it will be useful,\r\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n* GNU Affero General Public License for more details.\r\n*\r\n* You should have received a copy of the GNU Affero General Public License\r\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\r\n*/\r\n\r\n// MAIN //\r\n\r\nconst COLORS = [\r\n\t'#1f77b4',\r\n\t'#ff7f0e',\r\n\t'#2ca02c',\r\n\t'#d62728',\r\n\t'#9467bd',\r\n\t'#8c564b',\r\n\t'#c49c94',\r\n\t'#e377c2',\r\n\t'#17becf',\r\n\t'#aec7e8',\r\n\t'#ffbb78',\r\n\t'#ff9896',\r\n\t'#98df8a',\r\n\t'#7f7f7f',\r\n\t'#c5b0d5',\r\n\t'#f7b6d2',\r\n\t'#bcbd22',\r\n\t'#c7c7c7',\r\n\t'#dbdb8d',\r\n\t'#9edae5'\r\n];\r\n\r\n\r\n// EXPORTS //\r\n\r\nexport default COLORS;\r\n","// MODULES //\r\n\r\nimport asyncComponent from 'components/async';\r\n\r\n\r\n// MAIN //\r\n\r\nconst LessonCreator = asyncComponent( () => import( './main.js' ) );\r\n\r\n\r\n// EXPORTS //\r\n\r\nexport default LessonCreator;\r\n","// MODULES //\r\n\r\nimport { connect } from 'react-redux';\r\nimport LessonCreator from 'ev/components/lesson-creator';\r\nimport { copyLessonInjector } from 'actions/lesson';\r\n\r\n\r\n// FUNCTIONS //\r\n\r\nfunction mapStateToProps( state ) {\r\n\treturn {\r\n\t\tadmin: state.admin,\r\n\t\tuser: state.user\r\n\t};\r\n}\r\n\r\nfunction mapDispatchToProps( dispatch ) {\r\n\treturn {\r\n\t\tcopyLesson: copyLessonInjector( dispatch )\r\n\t};\r\n}\r\n\r\n\r\n// MAIN //\r\n\r\nconst VisibleLessonCreator = connect( mapStateToProps, mapDispatchToProps )( LessonCreator );\r\n\r\n\r\n// EXPORTS //\r\n\r\nexport default VisibleLessonCreator;\r\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport logger from 'debug';\nimport Button from 'react-bootstrap/Button';\nimport FormControl from 'react-bootstrap/FormControl';\nimport FormLabel from 'react-bootstrap/FormLabel';\nimport FormGroup from 'react-bootstrap/FormGroup';\nimport Form from 'react-bootstrap/Form';\nimport Modal from 'react-bootstrap/Modal';\nimport DateTimePicker from 'react-datetime-picker';\nimport isEmptyObject from '@stdlib/assert/is-empty-object';\nimport SERVER from 'constants/server';\n\n\n// VARIABLES //\n\nconst debug = logger( 'isle-dashboard' );\n\n\n// FUNCTIONS //\n\nfunction preventPropagation( event ) {\n\tevent.stopPropagation();\n}\n\n\n// MAIN //\n\nclass DetailsModal extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tlet unlockLesson;\n\t\tlet lockLesson;\n\t\tlet lockUntil;\n\t\tlet lockAfter;\n\t\tif ( props.lockUntil ) {\n\t\t\tunlockLesson = true;\n\t\t\tlockUntil = props.lockUntil;\n\t\t} else {\n\t\t\tunlockLesson = false;\n\t\t\tlockUntil = new Date();\n\t\t}\n\t\tif ( props.lockAfter ) {\n\t\t\tlockLesson = true;\n\t\t\tlockAfter = props.lockAfter;\n\t\t} else {\n\t\t\tlockLesson = false;\n\t\t\tlockAfter = new Date();\n\t\t}\n\t\tthis.state = {\n\t\t\ttitle: props.title,\n\t\t\tdescription: props.description,\n\t\t\tdisabled: false,\n\t\t\thideFromDashboard: props.hideFromDashboard,\n\t\t\ttemplate: props.template,\n\t\t\tchangedTemplate: false,\n\t\t\tunlockLesson,\n\t\t\tlockUntil,\n\t\t\tlockLesson,\n\t\t\tlockAfter,\n\t\t\ttag: props.tag\n\t\t};\n\t}\n\n\tcomponentDidUpdate( prevProps ) {\n\t\tconst newState = {};\n\t\tif ( prevProps.title !== this.props.title ) {\n\t\t\tnewState.title = this.props.title;\n\t\t}\n\t\tif ( prevProps.description !== this.props.description ) {\n\t\t\tnewState.description = this.props.description;\n\t\t}\n\t\tif ( prevProps.template !== this.props.template ) {\n\t\t\tnewState.template = this.props.template;\n\t\t}\n\t\tif ( prevProps.tag !== this.props.tag ) {\n\t\t\tnewState.tag = this.props.tag;\n\t\t}\n\t\tif ( prevProps.lockUntil !== this.props.lockUntil ) {\n\t\t\tif ( this.props.lockUntil ) {\n\t\t\t\tnewState.unlockLesson = true;\n\t\t\t\tnewState.lockUntil = this.props.lockUntil;\n\t\t\t} else {\n\t\t\t\tnewState.unlockLesson = false;\n\t\t\t\tnewState.lockUntil = new Date();\n\t\t\t}\n\t\t}\n\t\tif ( prevProps.lockAfter !== this.props.lockAfter ) {\n\t\t\tif ( this.props.lockAfter ) {\n\t\t\t\tnewState.lockLesson = true;\n\t\t\t\tnewState.lockAfter = this.props.lockAfter;\n\t\t\t} else {\n\t\t\t\tnewState.lockLesson = false;\n\t\t\t\tnewState.lockAfter = new Date();\n\t\t\t}\n\t\t}\n\t\tif ( !isEmptyObject( newState ) ) {\n\t\t\tthis.setState( newState );\n\t\t}\n\t}\n\n\thandleInputChange = ( event ) => {\n\t\tconst target = event.target;\n\t\tconst value = target.value;\n\t\tconst name = target.name;\n\t\tdebug( `Input field ${name} changed to ${value}` );\n\t\tthis.setState({\n\t\t\t[ name ]: value\n\t\t}, () => {\n\t\t\tif ( this.state.title.length >= 3 && this.state.description.length > 0 ) {\n\t\t\t\tthis.setState({\n\t\t\t\t\tdisabled: false\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.setState({\n\t\t\t\t\tdisabled: true\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t};\n\n\thandleUnlockChange = ( event ) => {\n\t\tthis.setState({\n\t\t\tunlockLesson: event.target.checked\n\t\t});\n\t};\n\n\thandleLockChange = ( event ) => {\n\t\tthis.setState({\n\t\t\tlockLesson: event.target.checked\n\t\t});\n\t};\n\n\thandleTimeUntilChange = ( value ) => {\n\t\tthis.setState({\n\t\t\tlockUntil: value\n\t\t});\n\t};\n\n\thandleTimeAfterChange = ( value ) => {\n\t\tthis.setState({\n\t\t\tlockAfter: value\n\t\t});\n\t};\n\n\thandleTemplateChange = ( event ) => {\n\t\tthis.setState({\n\t\t\ttemplate: event.target.checked,\n\t\t\tchangedTemplate: true\n\t\t});\n\t};\n\n\thideFromDashboardChange = ( event ) => {\n\t\tthis.setState({\n\t\t\thideFromDashboard: event.target.checked\n\t\t});\n\t};\n\n\tonSubmit = ( evt ) => {\n\t\tevt.preventDefault();\n\t\tconst details = {\n\t\t\tnewTitle: this.state.title,\n\t\t\tnewDescription: this.state.description\n\t\t};\n\t\tif ( this.state.unlockLesson ) {\n\t\t\tdetails.lockUntil = this.state.lockUntil;\n\t\t}\n\t\tif ( this.state.lockLesson ) {\n\t\t\tdetails.lockAfter = this.state.lockAfter;\n\t\t}\n\t\tif ( this.state.hideFromDashboard !== this.props.hideFromDashboard ) {\n\t\t\tdetails.hideFromDashboard = this.state.hideFromDashboard;\n\t\t}\n\t\tif ( this.state.changedTemplate ) {\n\t\t\tdetails.template = this.state.template;\n\t\t}\n\t\tif ( this.state.tag ) {\n\t\t\tdetails.tag = this.state.tag;\n\t\t}\n\t\tthis.props.update( details );\n\t};\n\n\trender() {\n\t\tconst { t } = this.props;\n\t\treturn (\n\t\t\t<Modal show={this.props.show} onHide={this.props.close}>\n\t\t\t\t<Form action={SERVER} method=\"get\" onSubmit={this.onSubmit} onKeyDown={preventPropagation} >\n\t\t\t\t\t<Modal.Header>\n\t\t\t\t\t\t<Modal.Title as=\"h3\">{t('lesson-details')}</Modal.Title>\n\t\t\t\t\t</Modal.Header>\n\t\t\t\t\t<Modal.Body className=\"d-grid gap-2\" >\n\t\t\t\t\t\t<FormGroup>\n\t\t\t\t\t\t\t<FormLabel>{t('common:title')}</FormLabel>\n\t\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\t\tname=\"title\"\n\t\t\t\t\t\t\t\ttype=\"title\"\n\t\t\t\t\t\t\t\tonChange={this.handleInputChange}\n\t\t\t\t\t\t\t\tdefaultValue={this.state.title}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</FormGroup>\n\t\t\t\t\t\t<FormGroup>\n\t\t\t\t\t\t\t<FormLabel>{t('common:description')}</FormLabel>\n\t\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\t\tname=\"description\"\n\t\t\t\t\t\t\t\ttype=\"description\"\n\t\t\t\t\t\t\t\tonChange={this.handleInputChange}\n\t\t\t\t\t\t\t\tdefaultValue={this.state.description}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</FormGroup>\n\t\t\t\t\t\t<FormGroup>\n\t\t\t\t\t\t\t<Form.Check\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\tlabel={t('common:lock-until')}\n\t\t\t\t\t\t\t\tchecked={this.state.unlockLesson}\n\t\t\t\t\t\t\t\tonChange={this.handleUnlockChange}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t{this.state.unlockLesson ? <DateTimePicker\n\t\t\t\t\t\t\t\t\tminDate={new Date()}\n\t\t\t\t\t\t\t\t\tonChange={this.handleTimeUntilChange}\n\t\t\t\t\t\t\t\t\tvalue={this.state.lockUntil}\n\t\t\t\t\t\t\t\t\tclearIcon={null}\n\t\t\t\t\t\t\t\t/> : null }\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</FormGroup>\n\t\t\t\t\t\t<FormGroup>\n\t\t\t\t\t\t\t<Form.Check\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\tlabel={t('common:lock-after')}\n\t\t\t\t\t\t\t\tchecked={this.state.lockLesson}\n\t\t\t\t\t\t\t\tonChange={this.handleLockChange}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t{this.state.lockLesson ? <DateTimePicker\n\t\t\t\t\t\t\t\t\tminDate={new Date()}\n\t\t\t\t\t\t\t\t\tonChange={this.handleTimeAfterChange}\n\t\t\t\t\t\t\t\t\tvalue={this.state.lockAfter}\n\t\t\t\t\t\t\t\t\tclearIcon={null}\n\t\t\t\t\t\t\t\t/> : null }\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</FormGroup>\n\t\t\t\t\t\t<FormGroup>\n\t\t\t\t\t\t\t<Form.Check\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\tlabel={t('common:hide-from-dashboard')}\n\t\t\t\t\t\t\t\tchecked={this.state.hideFromDashboard}\n\t\t\t\t\t\t\t\tonChange={this.hideFromDashboardChange}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</FormGroup>\n\t\t\t\t\t\t{ this.props.user.administrator ? <FormGroup>\n\t\t\t\t\t\t\t<Form.Check\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\tlabel={t('provide-as-template')}\n\t\t\t\t\t\t\t\tchecked={this.state.template}\n\t\t\t\t\t\t\t\tonChange={this.handleTemplateChange}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</FormGroup> : null}\n\t\t\t\t\t\t<FormGroup>\n\t\t\t\t\t\t\t<FormLabel>{t('common:tag')}</FormLabel>\n\t\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\t\tname=\"tag\"\n\t\t\t\t\t\t\t\ttype=\"tag\"\n\t\t\t\t\t\t\t\tonChange={this.handleInputChange}\n\t\t\t\t\t\t\t\tdefaultValue={this.state.tag}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</FormGroup>\n\t\t\t\t\t</Modal.Body>\n\t\t\t\t\t<Modal.Footer>\n\t\t\t\t\t\t<Button onClick={this.props.close}>{t('common:cancel')}</Button>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant=\"success\"\n\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\tdisabled={this.state.disabled}\n\t\t\t\t\t\t>{t('common:save')}</Button>\n\t\t\t\t\t</Modal.Footer>\n\t\t\t\t</Form>\n\t\t\t</Modal>\n\t\t);\n\t}\n}\n\n\n// PROPERTIES //\n\nDetailsModal.propTypes = {\n\tclose: PropTypes.func.isRequired,\n\tdescription: PropTypes.string.isRequired,\n\thideFromDashboard: PropTypes.bool,\n\tlockAfter: PropTypes.instanceOf( Date ),\n\tlockUntil: PropTypes.instanceOf( Date ),\n\tshow: PropTypes.bool.isRequired,\n\ttag: PropTypes.string,\n\ttemplate: PropTypes.bool,\n\ttitle: PropTypes.string.isRequired,\n\tupdate: PropTypes.func.isRequired,\n\tuser: PropTypes.object.isRequired\n};\n\nDetailsModal.defaultProps = {\n\thideFromDashboard: false,\n\tlockAfter: null,\n\tlockUntil: null,\n\ttag: null,\n\ttemplate: null\n};\n\n\n// EXPORTS //\n\nexport default DetailsModal;\n","/**\r\n* Copyright (C) 2016-present The ISLE Authors\r\n*\r\n* The isle-dashboard program is free software: you can redistribute it and/or modify\r\n* it under the terms of the GNU Affero General Public License as\r\n* published by the Free Software Foundation, either version 3 of the\r\n* License, or (at your option) any later version.\r\n*\r\n* This program is distributed in the hope that it will be useful,\r\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n* GNU Affero General Public License for more details.\r\n*\r\n* You should have received a copy of the GNU Affero General Public License\r\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\r\n*/\r\n\r\n// MODULES //\r\n\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Button from 'react-bootstrap/Button';\r\nimport Modal from 'react-bootstrap/Modal';\r\n\r\n\r\n// MAIN //\r\n\r\n/**\r\n * Delete modal component.\r\n *\r\n * @param {Object} props - component properties\r\n * @param {boolean} props.show - boolean indicating if the modal is visible\r\n * @param {Function} props.close - callback to invoke when the modal is closed\r\n * @param {Function} props.delete - callback to invoke when the delete button is clicked\r\n * @param {string} props.title - lesson title\r\n * @param {Function} props.t - i18n translate function\r\n * @returns {ReactElement} delete modal\r\n */\r\nconst DeleteModal = ( props ) => (\r\n\t<Modal show={props.show} onHide={props.close}>\r\n\t\t<Modal.Header>\r\n\t\t\t<Modal.Title>{props.t('common:delete')}?</Modal.Title>\r\n\t\t</Modal.Header>\r\n\t\t<Modal.Body>\r\n\t\t\t{props.t('delete-modal-body', { name: props.title })}\r\n\t\t</Modal.Body>\r\n\t\t<Modal.Footer>\r\n\t\t\t<Button onClick={props.close}>{props.t('common:cancel')}</Button>\r\n\t\t\t<Button variant=\"danger\" onClick={props.delete} >{props.t('common:delete')}</Button>\r\n\t\t</Modal.Footer>\r\n\t</Modal>\r\n);\r\n\r\n\r\n// PROPERTIES //\r\n\r\nDeleteModal.propTypes = {\r\n\tclose: PropTypes.func.isRequired,\r\n\tdelete: PropTypes.func.isRequired,\r\n\tshow: PropTypes.bool.isRequired,\r\n\tt: PropTypes.func.isRequired,\r\n\ttitle: PropTypes.string.isRequired\r\n};\r\n\r\n\r\n// EXPORTS //\r\n\r\nexport default DeleteModal;\r\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport logger from 'debug';\nimport { withTranslation } from 'react-i18next';\nimport Badge from 'react-bootstrap/Badge';\nimport Button from 'react-bootstrap/Button';\nimport ButtonGroup from 'react-bootstrap/ButtonGroup';\nimport ButtonToolbar from 'react-bootstrap/ButtonToolbar';\nimport Card from 'react-bootstrap/Card';\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\nimport Tooltip from 'react-bootstrap/Tooltip';\nimport copyToClipboard from 'clipboard-copy';\nimport DetailsModal from './details_modal.js';\nimport DeleteModal from './delete_modal.js';\nimport COLORS from 'constants/colors';\nimport background from './architecture.jpeg';\nimport upload from './upload.svg';\nimport './lesson.css';\n\n\n// VARIABLES //\n\nconst DEFAULT_DESCRIPTION = 'No description supplied.';\nconst debug = logger( 'isle:lessons-page:lesson' );\nconst IS_IOS = isIOS();\n\n\n// FUNCTIONS //\n\nfunction isIOS() {\n\treturn [\n\t\t'iPad Simulator',\n\t\t'iPhone Simulator',\n\t\t'iPod Simulator',\n\t\t'iPad',\n\t\t'iPhone',\n\t\t'iPod'\n\t].includes( navigator.platform ) ||\n\t(\n\t\tnavigator.userAgent.includes('Mac') &&\n\t\t'ontouchend' in document\n\t);\n}\n\n\n// MAIN //\n\nclass Lesson extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tthis.state = {\n\t\t\tshowDeleteModal: false,\n\t\t\tshowDetailsModal: false,\n\t\t\tisleFile: null\n\t\t};\n\t}\n\n\ttoggleLessonState = () => {\n\t\tconst query = {\n\t\t\tlessonName: this.props.title,\n\t\t\tnamespaceName: this.props.namespace\n\t\t};\n\t\tif ( this.props.active ) {\n\t\t\tthis.props.deactivateLesson( query );\n\t\t} else {\n\t\t\tthis.props.activateLesson( query );\n\t\t}\n\t};\n\n\ttoggleLessonVisibility = () => {\n\t\tconst query = {\n\t\t\tlessonName: this.props.title,\n\t\t\tnamespaceName: this.props.namespace\n\t\t};\n\t\tif ( this.props.public ) {\n\t\t\tthis.props.hideLessonInGallery( query );\n\t\t} else {\n\t\t\tthis.props.showLessonInGallery( query );\n\t\t}\n\t};\n\n\tdelete = () => {\n\t\tthis.props.deleteLesson({\n\t\t\tlessonName: this.props.title,\n\t\t\tnamespaceName: this.props.namespace\n\t\t});\n\t\tthis.closeDeleteModal();\n\t};\n\n\tupdate = async ({ newTitle, newDescription, lockAfter, lockUntil, hideFromDashboard, tag, template }) => {\n\t\tconst bool = await this.props.updateLesson({\n\t\t\tlessonName: this.props.title,\n\t\t\tnamespaceName: this.props.namespace,\n\t\t\tnewTitle,\n\t\t\tnewDescription,\n\t\t\ttag,\n\t\t\ttemplate,\n\t\t\tlockAfter: lockAfter ? lockAfter.getTime() : null,\n\t\t\tlockUntil: lockUntil ? lockUntil.getTime() : null,\n\t\t\thideFromDashboard\n\t\t});\n\t\tif ( bool ) {\n\t\t\tthis.closeDetailsModal();\n\t\t}\n\t};\n\n\tshowDeleteModal = () => {\n\t\tthis.setState({ showDeleteModal: true });\n\t};\n\n\tshowDetailsModal = () => {\n\t\tthis.setState({ showDetailsModal: true });\n\t};\n\n\tcloseDeleteModal = () => {\n\t\tthis.setState({ showDeleteModal: false });\n\t};\n\n\tcloseDetailsModal = () => {\n\t\tthis.setState({ showDetailsModal: false });\n\t};\n\n\tgetIsleFile = async () => {\n\t\tdebug( 'Request ISLE source code from server...' );\n\t\tif ( !this.state.isleFile ) {\n\t\t\tconst data = await this.props.getIsleFile({\n\t\t\t\tlessonName: this.props.title,\n\t\t\t\tnamespaceName: this.props.namespace\n\t\t\t});\n\t\t\tif ( data ) {\n\t\t\t\tthis.setState({\n\t\t\t\t\tisleFile: data\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t};\n\n\tcopyIsleFileToClipboard = () => {\n\t\tif ( !this.state.isleFile ) {\n\t\t\treturn this.props.addNotification({\n\t\t\t\tmessage: this.props.t('source-file-error'),\n\t\t\t\tlevel: 'error'\n\t\t\t});\n\t\t}\n\t\tconst promise = copyToClipboard( this.state.isleFile );\n\t\tpromise.then( () => {\n\t\t\tthis.props.addNotification({\n\t\t\t\tmessage: this.props.t('source-file-copied'),\n\t\t\t\tlevel: 'success'\n\t\t\t});\n\t\t}).catch( err => {\n\t\t\tthis.props.addNotification({\n\t\t\t\tmessage: err.message,\n\t\t\t\tlevel: 'error'\n\t\t\t});\n\t\t});\n\t};\n\n\tcopyLinkToClipboard = () => {\n\t\tconst promise = copyToClipboard( this.props.url );\n\t\tpromise.then( () => {\n\t\t\tthis.props.addNotification({\n\t\t\t\tmessage: this.props.t('link-copied'),\n\t\t\t\tlevel: 'success'\n\t\t\t});\n\t\t}).catch( err => {\n\t\t\tthis.props.addNotification({\n\t\t\t\tmessage: err.message,\n\t\t\t\tlevel: 'error'\n\t\t\t});\n\t\t});\n\t};\n\n\tcopyNameToClipboard = ( event ) => {\n\t\tevent.stopPropagation();\n\t\tconst promise = copyToClipboard( this.props.title );\n\t\tpromise.then( () => {\n\t\t\tthis.props.addNotification({\n\t\t\t\tmessage: this.props.t('name-copied'),\n\t\t\t\tlevel: 'success'\n\t\t\t});\n\t\t}).catch( err => {\n\t\t\tthis.props.addNotification({\n\t\t\t\tmessage: err.message,\n\t\t\t\tlevel: 'error'\n\t\t\t});\n\t\t});\n\t};\n\n\topenLesson = () => {\n\t\tif ( IS_IOS ) {\n\t\t\twindow.location = this.props.url;\n\t\t} else {\n\t\t\tconst win = window.open( this.props.url, '_blank' );\n\t\t\twin.focus();\n\t\t}\n\t};\n\n\trenderButtonToolbarDate() {\n\t\tconst { t } = this.props;\n\n\t\tlet updated = new Date( this.props.updatedAt );\n\t\tupdated = updated.toLocaleDateString();\n\n\t\tlet date = new Date( this.props.createdAt );\n\t\tdate = date.toLocaleDateString();\n\t\treturn (\n\t\t\t<span className=\"lessons-upload\">\n\t\t\t<OverlayTrigger placement=\"top\" overlay={<Tooltip id=\"toggle_visibility\">{t('created-at')}</Tooltip>}>\n\t\t\t\t<span className=\"lessons-uploaded-image\">\n\t\t\t\t\t<img alt=\"Upload Date Icon\" style={{ stroke: 'white', fill: 'red' }} src={upload} />\n\t\t\t\t</span>\n\t\t\t</OverlayTrigger>\n\t\t\t<OverlayTrigger placement=\"top\" overlay={<Tooltip id=\"toggle_visibility\">{t('last-updated')}{updated}</Tooltip>}>\n\t\t\t\t<span className=\"lessons-uploaded\">{date}</span>\n\t\t\t</OverlayTrigger>\n\t\t</span>\n\t\t);\n\t}\n\n\trenderActivateButton() {\n\t\tconst { lockUntil, t } = this.props;\n\t\tconst activeStyle = this.props.active === true ? 'success' : 'warning';\n\t\tif ( lockUntil ) {\n\t\t\treturn ( <OverlayTrigger placement=\"top\" overlay={<Tooltip id=\"lockUntil_disabled\">\n\t\t\t\t{t('scheduled-at', { date: lockUntil.toLocaleString() })}\n\t\t\t</Tooltip>} >\n\t\t\t\t<Badge\n\t\t\t\t\tclassName=\"lessons-status\"\n\t\t\t\t\tbg={activeStyle}\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\topacity: 0.3\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{this.props.active ? t('active') : t('inactive')}\n\t\t\t\t</Badge>\n\t\t\t</OverlayTrigger> );\n\t\t}\n\t\treturn (\n\t\t\t<OverlayTrigger placement=\"top\" overlay={<Tooltip id=\"toggle_availability\">{this.props.active ? t('disable-lesson') : t('activate-lesson')}</Tooltip>}>\n\t\t\t\t<Badge\n\t\t\t\t\tclassName=\"lessons-status\"\n\t\t\t\t\tonClick={this.toggleLessonState}\n\t\t\t\t\tbg={activeStyle}\n\t\t\t\t>\n\t\t\t\t\t{this.props.active ? t('active') : t('inactive')}\n\t\t\t\t</Badge>\n\t\t\t</OverlayTrigger>\n\t\t);\n\t}\n\n\trenderButtonToolbar() {\n\t\tconst { t } = this.props;\n\t\tconst publicStyle = this.props.public === true ? 'success' : 'warning';\n\t\treturn ( <ButtonToolbar className=\"lesson-button-toolbar\">\n\t\t\t<ButtonGroup style={{ marginRight: '2px' }} >\n\t\t\t\t<OverlayTrigger placement=\"top\" overlay={<Tooltip id=\"open_details\">{t('open-details')}</Tooltip>}>\n\t\t\t\t\t<Button size=\"sm\" variant=\"secondary\" onClick={this.showDetailsModal} aria-label={t('open-details')} >\n\t\t\t\t\t\t<i className=\"fa fa-cog\"></i>\n\t\t\t\t\t</Button>\n\t\t\t\t</OverlayTrigger>\n\t\t\t\t<OverlayTrigger placement=\"top\" overlay={<Tooltip id=\"delete_lesson\">{t('delete-lesson')}</Tooltip>}>\n\t\t\t\t\t<Button size=\"sm\" variant=\"secondary\" onClick={this.showDeleteModal} aria-label={t('delete-lesson')} >\n\t\t\t\t\t\t<i className=\"fa fa-trash-alt\"></i>\n\t\t\t\t\t</Button>\n\t\t\t\t</OverlayTrigger>\n\t\t\t\t<OverlayTrigger placement=\"top\" overlay={<Tooltip id=\"isle-file\">{t('copy-file')}</Tooltip>}>\n\t\t\t\t\t<Button variant=\"secondary\" size=\"sm\" onFocus={this.getIsleFile} onMouseEnter={this.getIsleFile}\n\t\t\t\t\t\tonClick={this.copyIsleFileToClipboard} style={{ float: 'right' }}\n\t\t\t\t\t\taria-label={t('copy-file')}\n\t\t\t\t\t>\n\t\t\t\t\t\t<i className=\"fa fa-clipboard\"></i>\n\t\t\t\t\t</Button>\n\t\t\t\t</OverlayTrigger>\n\t\t\t</ButtonGroup>\n\t\t\t{this.renderActivateButton()}\n\t\t\t<OverlayTrigger placement=\"top\" overlay={<Tooltip id=\"toggle_visibility\">{this.props.public ? t('remove-from-gallery') : t('show-in-gallery') }</Tooltip>}>\n\t\t\t\t<Badge className=\"lessons-status\" onClick={this.toggleLessonVisibility} bg={publicStyle}>{this.props.public ? t(('public')) : t('private')}</Badge>\n\t\t\t</OverlayTrigger>\n\t\t\t{ this.renderButtonToolbarDate() }\n\t\t</ButtonToolbar> );\n\t}\n\n\trenderModals() {\n\t\treturn ( <Fragment>\n\t\t\t<DeleteModal {...this.props} show={this.state.showDeleteModal} close={this.closeDeleteModal} delete={this.delete} />\n\t\t\t{ this.state.showDetailsModal ?\n\t\t\t\t<DetailsModal {...this.props} show={this.state.showDetailsModal} close={this.closeDetailsModal} update={this.update} /> :\n\t\t\t\tnull\n\t\t\t}\n\t\t</Fragment> );\n\t}\n\n\trender() {\n\t\tconst { t } = this.props;\n\t\treturn (\n\t\t\t<Card className=\"animated-lesson-card\">\n\t\t\t\t<Card.Body style={{ padding: 0, opacity: this.props.hideFromDashboard ? 0.6 : 1.0 }}>\n\t\t\t\t\t<div\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tfilter: 'grayscale(30%)',\n\t\t\t\t\t\t\tbackground: COLORS[ this.props.colorIndex ]\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tclassName=\"hovereffect\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tclassName=\"img-responsive\"\n\t\t\t\t\t\t\tsrc={background}\n\t\t\t\t\t\t\tref={( div ) => {\n\t\t\t\t\t\t\t\tthis.img = div;\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\talt=\"Tile background\"\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\twidth: '100%',\n\t\t\t\t\t\t\t\theight: 180\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName=\"overlay\"\n\t\t\t\t\t\t\tstyle={{ cursor: 'cell' }}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<h2>\n\t\t\t\t\t\t\t\t<OverlayTrigger\n\t\t\t\t\t\t\t\t\tplacement=\"top\"\n\t\t\t\t\t\t\t\t\toverlay={<Tooltip id=\"copy_name\">\n\t\t\t\t\t\t\t\t\t\t{t('common:copy-name')\n\t\t\t\t\t\t\t\t\t}</Tooltip>}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\tclassName=\"lesson-title-button\"\n\t\t\t\t\t\t\t\t\t\trole=\"button\" tabIndex={0}\n\t\t\t\t\t\t\t\t\t\tonClick={this.copyNameToClipboard}\n\t\t\t\t\t\t\t\t\t\tonKeyPress={this.copyNameToClipboard}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{this.props.title}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</OverlayTrigger>\n\t\t\t\t\t\t\t</h2>\n\t\t\t\t\t\t\t{this.props.description !== DEFAULT_DESCRIPTION ?\n\t\t\t\t\t\t\t\t<h3>{this.props.description}</h3> :\n\t\t\t\t\t\t\t\tnull\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\tref={( link ) => {\n\t\t\t\t\t\t\t\t\tthis.link = link;\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tclassName=\"info\"\n\t\t\t\t\t\t\t\tonClick={this.openLesson} onKeyPress={this.openLesson}\n\t\t\t\t\t\t\t\ttabIndex={0} role=\"button\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{t('open-lesson')}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<OverlayTrigger placement=\"top\" overlay={<Tooltip id=\"copy_link\">{t('common:copy-link')}</Tooltip>}>\n\t\t\t\t\t\t<i\n\t\t\t\t\t\t\trole=\"button\" tabIndex={0}\n\t\t\t\t\t\t\tclassName=\"lesson-link-icon fas fa-external-link-alt\"\n\t\t\t\t\t\t\tonClick={this.copyLinkToClipboard}\n\t\t\t\t\t\t\tonKeyPress={this.copyLinkToClipboard}\n\t\t\t\t\t\t\taria-label={t('common:copy-link')}\n\t\t\t\t\t\t></i>\n\t\t\t\t\t</OverlayTrigger>\n\t\t\t\t\t{this.renderButtonToolbar()}\n\t\t\t\t\t{this.renderModals()}\n\t\t\t\t</Card.Body>\n\t\t\t</Card>\n\t\t);\n\t}\n}\n\n\n// PROPERTIES //\n\nLesson.propTypes = {\n\tactivateLesson: PropTypes.func.isRequired,\n\tactive: PropTypes.bool.isRequired,\n\taddNotification: PropTypes.func.isRequired,\n\tcolorIndex: PropTypes.number.isRequired,\n\tcreatedAt: PropTypes.any.isRequired,\n\tdeactivateLesson: PropTypes.func.isRequired,\n\tdeleteLesson: PropTypes.func.isRequired,\n\tdescription: PropTypes.string.isRequired,\n\tgetIsleFile: PropTypes.func.isRequired,\n\tgetLessons: PropTypes.func.isRequired,\n\thideFromDashboard: PropTypes.bool,\n\thideLessonInGallery: PropTypes.func.isRequired,\n\tlockAfter: PropTypes.instanceOf( Date ),\n\tlockUntil: PropTypes.instanceOf( Date ),\n\tnamespace: PropTypes.string.isRequired,\n\tpublic: PropTypes.bool.isRequired,\n\tshowLessonInGallery: PropTypes.func.isRequired,\n\ttitle: PropTypes.string.isRequired,\n\tupdateLesson: PropTypes.func.isRequired,\n\tupdatedAt: PropTypes.any.isRequired,\n\turl: PropTypes.string.isRequired,\n\tuser: PropTypes.object.isRequired\n};\n\nLesson.defaultProps = {\n\thideFromDashboard: false,\n\tlockAfter: null,\n\tlockUntil: null\n};\n\n\n// EXPORTS //\n\nexport default withTranslation( [ 'lesson', 'common' ] )( Lesson );\n","/**\r\n* Copyright (C) 2016-present The ISLE Authors\r\n*\r\n* The isle-dashboard program is free software: you can redistribute it and/or modify\r\n* it under the terms of the GNU Affero General Public License as\r\n* published by the Free Software Foundation, either version 3 of the\r\n* License, or (at your option) any later version.\r\n*\r\n* This program is distributed in the hope that it will be useful,\r\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n* GNU Affero General Public License for more details.\r\n*\r\n* You should have received a copy of the GNU Affero General Public License\r\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\r\n*/\r\n\r\n// MODULES //\r\n\r\nimport React, { useRef } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { useTranslation } from 'react-i18next';\r\nimport Card from 'react-bootstrap/Card';\r\nimport ButtonToolbar from 'react-bootstrap/ButtonToolbar';\r\nimport ProgressBar from 'react-bootstrap/ProgressBar';\r\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\r\nimport Tooltip from 'react-bootstrap/Tooltip';\r\nimport copyToClipboard from 'clipboard-copy';\r\nimport round from '@stdlib/math/base/special/round';\r\nimport min from '@stdlib/math/base/special/min';\r\nimport COLORS from 'constants/colors';\r\nimport formatTime from 'utils/format_time.js';\r\nimport background from './architecture.jpeg';\r\nimport './lessons.css';\r\n\r\n\r\n// FUNCTIONS //\r\n\r\n/**\r\n * Adds a default background image to the card.\r\n *\r\n * @private\r\n * @param {Event} event - event object\r\n * @returns {void}\r\n */\r\nfunction addDefaultSrc( event ) {\r\n\tevent.target.src = background;\r\n}\r\n\r\n/**\r\n * Renders user progress.\r\n *\r\n * @private\r\n * @param {Object} props - component properties\r\n * @param {Object} props.user - user object\r\n * @param {string} props._id - id of the lesson\r\n * @param {Object} props.metadata - metadata associated with the lesson\r\n * @param {Function} props.t - i18n translation function\r\n * @returns {ReactElement} component\r\n */\r\nfunction LessonProgress( props ) {\r\n\tlet progress;\r\n\tif ( props.metadata && props.metadata.hideProgressBar === true ) {\r\n\t\treturn <div className=\"enrolled-lesson-progress\"></div>;\r\n\t}\r\n\tconst lessonData = props.user.lessonData;\r\n\tconst data = lessonData[ props._id ];\r\n\tif ( data ) {\r\n\t\tprogress = data.progress;\r\n\t\tprogress *= 100;\r\n\t\tprogress = min( round( progress ), 100.0 );\r\n\t} else {\r\n\t\tprogress = 0;\r\n\t}\r\n\tconst { t } = props;\r\n\treturn ( <div className=\"enrolled-lesson-progress\">\r\n\t\t<OverlayTrigger placement=\"top\" overlay={<Tooltip id=\"open_details\">{t('your-progress')}</Tooltip>}>\r\n\t\t\t<ProgressBar aria-label={t('your-progress')} variant='success' now={progress} label={`${progress}%`} />\r\n\t\t</OverlayTrigger>\r\n\t</div> );\r\n}\r\n\r\n/**\r\n * Renders user progress and information about the lesson.\r\n *\r\n * @private\r\n * @param {Object} props - component properties\r\n * @param {Object} props.user - user object\r\n * @param {string} props._id - id of the lesson\r\n * @param {Object} props.metadata - metadata associated with the lesson\r\n * @param {Function} props.t - i18n translation function\r\n * @returns {ReactElement} component\r\n */\r\nfunction LessonInfo( props ) {\r\n\tlet duration;\r\n\tconst lessonData = props.user.lessonData;\r\n\tconst data = lessonData[ props._id ];\r\n\tif ( data ) {\r\n\t\tduration = data.spentTime;\r\n\t} else {\r\n\t\tduration = 0;\r\n\t}\r\n\tconst { t } = props;\r\n\treturn (\r\n\t\t<ButtonToolbar style={{\r\n\t\t\tposition: 'absolute',\r\n\t\t\ttop: 180,\r\n\t\t\twidth: '100%',\r\n\t\t\theight: '36px',\r\n\t\t\tbackground: 'rgba(0, 0, 0, 0.75)'\r\n\t\t}}>\r\n\t\t\t<LessonProgress {...props} t={t} />\r\n\t\t\t<div className=\"enrolled-lesson-time\" style={{ width: '35%', height: '100%' }} >\r\n\t\t\t\t<OverlayTrigger placement=\"top\" overlay={<Tooltip id=\"open_details\">{t('time-format')}</Tooltip>}>\r\n\t\t\t\t\t<span>{t('time-spent')}: {formatTime( duration )}</span>\r\n\t\t\t\t</OverlayTrigger>\r\n\t\t\t</div>\r\n\t\t</ButtonToolbar>\r\n\t);\r\n}\r\n\r\n\r\n// VARIABLES //\r\n\r\nconst DEFAULT_DESCRIPTION = 'No description supplied.';\r\n\r\n\r\n// MAIN //\r\n\r\n/**\r\n * A component which displays a lesson that the user has enrolled in.\r\n *\r\n * @param {Object} props - component properties\r\n * @param {string} props.title - title of the lesson\r\n * @param {string} props.description - description of the lesson\r\n * @param {string} props._id - id of the lesson\r\n * @param {string} props.url - URL of the lesson\r\n * @param {Object} props.metadata - metadata associated with the lesson\r\n * @param {number} props.colorIndex - color index associated with the lesson\r\n * @param {Object} props.user - user object\r\n * @param {Function} props.addNotification - function to add a notification\r\n * @returns {ReactElement} lesson component\r\n */\r\nconst EnrolledLesson = ( props ) => {\r\n\tconst { t } = useTranslation( [ 'lesson', 'common' ] );\r\n\tconst imgRef = useRef();\r\n\tconst openLesson = () => {\r\n\t\tconst win = window.open( props.url, '_blank' );\r\n\t\twin.focus();\r\n\t};\r\n\tconst showPreviewImage = () => {\r\n\t\timgRef.current.src = props.url+'/preview.jpg';\r\n\t};\r\n\tconst copyLinkToClipboard = () => {\r\n\t\tconst promise = copyToClipboard( props.url );\r\n\t\tpromise.then( () => {\r\n\t\t\tprops.addNotification({\r\n\t\t\t\tmessage: t('link-copied'),\r\n\t\t\t\tlevel: 'success'\r\n\t\t\t});\r\n\t\t}).catch( err => {\r\n\t\t\tprops.addNotification({\r\n\t\t\t\tmessage: err.message,\r\n\t\t\t\tlevel: 'error'\r\n\t\t\t});\r\n\t\t});\r\n\t};\r\n\treturn (\r\n\t\t<Card className=\"animated-lesson-card\">\r\n\t\t\t<Card.Body style={{ padding: 0 }}>\r\n\t\t\t\t<div style={{\r\n\t\t\t\t\tfilter: 'grayscale(30%)',\r\n\t\t\t\t\tbackground: COLORS[ props.colorIndex ]\r\n\t\t\t\t}} onMouseOver={showPreviewImage} onFocus={showPreviewImage}\r\n\t\t\t\t\tclassName=\"hovereffect\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<img\r\n\t\t\t\t\t\tclassName=\"img-responsive\"\r\n\t\t\t\t\t\tsrc={background}\r\n\t\t\t\t\t\tref={imgRef}\r\n\t\t\t\t\t\talt=\"\"\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\twidth: '100%',\r\n\t\t\t\t\t\t\theight: 180\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonError={addDefaultSrc}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<div className=\"overlay\" >\r\n\t\t\t\t\t\t<h2>{props.title}</h2>\r\n\t\t\t\t\t\t{props.description !== DEFAULT_DESCRIPTION ?\r\n\t\t\t\t\t\t\t<h3>{props.description}</h3> :\r\n\t\t\t\t\t\t\tnull\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\tclassName=\"info\"\r\n\t\t\t\t\t\t\trole=\"button\" tabIndex={0}\r\n\t\t\t\t\t\t\tonClick={openLesson} onKeyPress={openLesson}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{t('open-lesson')}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<OverlayTrigger placement=\"top\" overlay={<Tooltip id=\"copy_link\">{t('common:copy-link')}</Tooltip>}>\r\n\t\t\t\t\t<i\r\n\t\t\t\t\t\trole=\"button\" tabIndex={0}\r\n\t\t\t\t\t\tclassName=\"lesson-link-icon fas fa-external-link-alt\"\r\n\t\t\t\t\t\tonClick={copyLinkToClipboard}\r\n\t\t\t\t\t\tonKeyPress={copyLinkToClipboard}\r\n\t\t\t\t\t\taria-label={t('common:copy-link')}\r\n\t\t\t\t\t></i>\r\n\t\t\t\t</OverlayTrigger>\r\n\t\t\t\t<LessonInfo {...props} t={t} />\r\n\t\t\t</Card.Body>\r\n\t\t</Card>\r\n\t);\r\n};\r\n\r\n\r\n// PROPERTIES //\r\n\r\nEnrolledLesson.propTypes = {\r\n\t'_id': PropTypes.string.isRequired,\r\n\taddNotification: PropTypes.func.isRequired,\r\n\tcolorIndex: PropTypes.number.isRequired,\r\n\tdescription: PropTypes.string.isRequired,\r\n\tmetadata: PropTypes.object,\r\n\ttitle: PropTypes.string.isRequired,\r\n\turl: PropTypes.string.isRequired,\r\n\tuser: PropTypes.object.isRequired\r\n};\r\n\r\nEnrolledLesson.defaultProps = {\r\n\tmetadata: null\r\n};\r\n\r\n\r\n// EXPORTS //\r\n\r\nexport default EnrolledLesson;\r\n","/**\r\n* Copyright (C) 2016-present The ISLE Authors\r\n*\r\n* The isle-dashboard program is free software: you can redistribute it and/or modify\r\n* it under the terms of the GNU Affero General Public License as\r\n* published by the Free Software Foundation, either version 3 of the\r\n* License, or (at your option) any later version.\r\n*\r\n* This program is distributed in the hope that it will be useful,\r\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n* GNU Affero General Public License for more details.\r\n*\r\n* You should have received a copy of the GNU Affero General Public License\r\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\r\n*/\r\n\r\n// MODULES //\r\n\r\nimport React from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\n\r\n\r\n// MAIN //\r\n\r\n/**\r\n * A component which displays a message to the user indicating that they have not selected a course.\r\n *\r\n * @param {Object} props - component properties\r\n * @param {Object} props.t - i18next translation function\r\n * @param {Object} props.user - user object\r\n * @returns {ReactElement} banner component\r\n */\r\nconst NoCourseBanner = ( props ) => {\r\n\tconst { user } = props;\r\n\tconst { t } = useTranslation( [ 'lessons_page', 'common' ] );\r\n\tlet appendix = null;\r\n\tif ( user.writeAccess ) {\r\n\t\tappendix = <span>{t('create-new-one')}<i className=\"fa fa-pencil-alt\"></i>.</span>;\r\n\t} else {\r\n\t\tappendix = ' .';\r\n\t}\r\n\treturn ( <div className=\"jumbotron lessons-jumbotron\" >\r\n\t\t<h1>{t('common:no-course-selected')}</h1>\r\n\t\t<p>{t('no-course-description')}<i className=\"fa fa-align-justify\"></i>{appendix}\r\n\t\t</p>\r\n\t</div> );\r\n};\r\n\r\n\r\n// EXPORTS //\r\n\r\nexport default NoCourseBanner;\r\n","/**\r\n* Copyright (C) 2016-present The ISLE Authors\r\n*\r\n* The isle-dashboard program is free software: you can redistribute it and/or modify\r\n* it under the terms of the GNU Affero General Public License as\r\n* published by the Free Software Foundation, either version 3 of the\r\n* License, or (at your option) any later version.\r\n*\r\n* This program is distributed in the hope that it will be useful,\r\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n* GNU Affero General Public License for more details.\r\n*\r\n* You should have received a copy of the GNU Affero General Public License\r\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\r\n*/\r\n\r\n// MODULES //\r\n\r\nimport React from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\n\r\n\r\n// MAIN //\r\n\r\n/**\r\n * A banner displayed for a course that has no lessons.\r\n *\r\n * @param {Object} props - component props\r\n * @param {Object} props.user - user object\r\n * @returns {ReactElement} banner\r\n */\r\nconst NoLessonBanner = ({ user }) => {\r\n\tconst { t } = useTranslation( [ 'lessons_page', 'common' ] );\r\n\tlet description = t('no-lessons');\r\n\tif ( user.writeAccess ) {\r\n\t\tdescription += t('upload-from-editor');\r\n\t}\r\n\treturn ( <div className=\"jumbotron lessons-jumbotron\">\r\n\t\t<h1>{t('no-lessons-found')}</h1>\r\n\t\t<p>{description}</p>\r\n\t</div> );\r\n};\r\n\r\n\r\n// EXPORTS //\r\n\r\nexport default NoLessonBanner;\r\n\r\n","/**\r\n* Copyright (C) 2016-present The ISLE Authors\r\n*\r\n* The isle-dashboard program is free software: you can redistribute it and/or modify\r\n* it under the terms of the GNU Affero General Public License as\r\n* published by the Free Software Foundation, either version 3 of the\r\n* License, or (at your option) any later version.\r\n*\r\n* This program is distributed in the hope that it will be useful,\r\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n* GNU Affero General Public License for more details.\r\n*\r\n* You should have received a copy of the GNU Affero General Public License\r\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\r\n*/\r\n\r\n// MODULES //\r\n\r\nimport React, { Component, Fragment } from 'react';\r\nimport logger from 'debug';\r\nimport { withTranslation } from 'react-i18next';\r\nimport PropTypes from 'prop-types';\r\nimport { Responsive, WidthProvider } from 'react-grid-layout';\r\nimport Button from 'react-bootstrap/Button';\r\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\r\nimport Tooltip from 'react-bootstrap/Tooltip';\r\nimport isArray from '@stdlib/assert/is-array';\r\nimport contains from '@stdlib/assert/contains';\r\nimport lowercase from '@stdlib/string/lowercase';\r\nimport pluck from '@stdlib/utils/pluck';\r\nimport floor from '@stdlib/math/base/special/floor';\r\nimport LessonCreator from 'ev/containers/lesson-creator';\r\nimport Lesson from './lesson.js';\r\nimport EnrolledLesson from './enrolled_lesson.js';\r\nimport NoCourseBanner from './no_course_banner.js';\r\nimport NoLessonBanner from './no_lesson_banner.js';\r\nimport sortLessons from 'utils/sort_lessons.js';\r\nimport isOwner from 'utils/is_owner.js';\r\nimport 'css/image.css';\r\nimport 'react-grid-layout/css/styles.css';\r\nimport 'react-resizable/css/styles.css';\r\nimport './lessons.css';\r\n\r\n\r\n// VARIABLES //\r\n\r\nconst debug = logger( 'isle-dashboard:lessons-page' );\r\nconst ResponsiveReactGridLayout = WidthProvider( Responsive );\r\n\r\n\r\n// FUNCTIONS //\r\n\r\nfunction searchLessons( lessons, phrase ) {\r\n\tif ( !phrase ) {\r\n\t\treturn lessons;\r\n\t}\r\n\tconst filteredLessons = [];\r\n\tif ( isArray( lessons ) ) {\r\n\t\tfor ( let i = 0; i < lessons.length; i++ ) {\r\n\t\t\tif (\r\n\t\t\t\tcontains( lowercase( lessons[ i ].title ), phrase ) ||\r\n\t\t\t\tcontains( lowercase( lessons[ i ].description ), phrase )\r\n\t\t\t) {\r\n\t\t\t\tfilteredLessons.push( lessons[ i ] );\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn filteredLessons;\r\n}\r\n\r\nfunction createLayout( lessons ) {\r\n\tdebug( 'Create layout...' );\r\n\tconst elemH = 3.52;\r\n\tlet layouts = lessons.map( ( e, i ) => {\r\n\t\treturn {\r\n\t\t\tlg: { i: `cell-${e.title}-${i}`, x: i*4 % 24, y: floor( i / 6 ) * elemH, w: 4, h: elemH },\r\n\t\t\tmd: { i: `cell-${e.title}-${i}`, x: i*4 % 20, y: floor( i / 5 ) * elemH, w: 4, h: elemH },\r\n\t\t\tsm: { i: `cell-${e.title}-${i}`, x: i*4 % 16, y: floor( i / 4 ) * elemH, w: 4, h: elemH },\r\n\t\t\txs: { i: `cell-${e.title}-${i}`, x: i*4 % 12, y: floor( i / 3 ) * elemH, w: 4, h: elemH },\r\n\t\t\txxs: { i: `cell-${e.title}-${i}`, x: i*4 % 8, y: floor( i / 2 ) * elemH, w: 4, h: elemH },\r\n\t\t\ttiny: { i: `cell-${e.title}-${i}`, x: i*4 % 4, y: floor( i / 1 ) * elemH, w: 4, h: elemH }\r\n\t\t};\r\n\t});\r\n\tlayouts = {\r\n\t\tlg: pluck( layouts, 'lg' ),\r\n\t\tmd: pluck( layouts, 'md' ),\r\n\t\tsm: pluck( layouts, 'sm' ),\r\n\t\txs: pluck( layouts, 'xs' ),\r\n\t\txxs: pluck( layouts, 'xxs' ),\r\n\t\ttiny: pluck( layouts, 'tiny' )\r\n\t};\r\n\treturn layouts;\r\n}\r\n\r\n\r\n// MAIN //\r\n\r\nclass LessonsPage extends Component {\r\n\tconstructor( props ) {\r\n\t\tsuper( props );\r\n\r\n\t\tlet lessons = props.namespace.lessons;\r\n\t\tif ( !isOwner( props.user, props.namespace ) ) {\r\n\t\t\tdebug( 'Filter out inactive or hidden lessons for enrolled students...' );\r\n\t\t\tlessons = lessons.filter( e => e.active === true && e.hideFromDashboard !== true );\r\n\t\t}\r\n\t\tthis.state = {\r\n\t\t\tfilteredLessons: searchLessons( lessons, props.search.phrase ),\r\n\t\t\tlayouts: createLayout( lessons ),\r\n\t\t\tunfilteredLessons: lessons,\r\n\t\t\tsearch: props.search,\r\n\t\t\tactiveElement: null,\r\n\t\t\tshowLessonCreator: false\r\n\t\t};\r\n\t}\r\n\r\n\tstatic getDerivedStateFromProps( nextProps, prevState ) {\r\n\t\tif (\r\n\t\t\tnextProps.namespace.lessons !== prevState.unfilteredLessons ||\r\n\t\t\tnextProps.search.phrase !== prevState.search.phrase ||\r\n\t\t\tnextProps.search.direction !== prevState.search.direction ||\r\n\t\t\tnextProps.search.type !== prevState.search.type\r\n\t\t) {\r\n\t\t\tdebug( 'Get derived state...' );\r\n\t\t\tlet lessons = nextProps.namespace.lessons || [];\r\n\t\t\tif ( !isOwner( nextProps.user, nextProps.namespace ) ) {\r\n\t\t\t\tdebug( 'Filter out inactive or hidden lessons for enrolled students...' );\r\n\t\t\t\tlessons = lessons.filter( e => e.active === true && e.hideFromDashboard !== true );\r\n\t\t\t}\r\n\t\t\tconst filteredLessons = searchLessons( lessons, nextProps.search.phrase );\r\n\t\t\tsortLessons( filteredLessons, nextProps.search );\r\n\t\t\tconst layouts = createLayout( filteredLessons );\r\n\t\t\treturn {\r\n\t\t\t\tfilteredLessons,\r\n\t\t\t\tlayouts,\r\n\t\t\t\tunfilteredLessons: nextProps.namespace.lessons,\r\n\t\t\t\tsearch: nextProps.search\r\n\t\t\t};\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tdebug( 'Component did mount...' );\r\n\t\tconst course = this.props.namespace;\r\n\t\tif ( course.title ) {\r\n\t\t\tdebug( 'Fetch lessons...' );\r\n\t\t\tthis.props.getLessons( course.title );\r\n\t\t}\r\n\t}\r\n\r\n\tshouldComponentUpdate( nextProps, nextState ) {\r\n\t\tif (\r\n\t\t\tnextProps.search.direction !== this.props.search.direction ||\r\n\t\t\tnextProps.search.type !== this.props.search.type ||\r\n\t\t\tnextState.filteredLessons !== this.state.filteredLessons ||\r\n\t\t\tnextState.showLessonCreator !== this.state.showLessonCreator\r\n\t\t) {\r\n\t\t\tdebug( 'Should update page...' );\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tpreventOpeningLink = ( event ) => {\r\n\t\tevent.preventDefault();\r\n\t};\r\n\r\n\trepositionLessons( idx, direction ) {\r\n\t\tconst unfilteredLessons = this.state.unfilteredLessons.slice();\r\n\t\tif ( direction === 'left' ) {\r\n\t\t\tif ( idx > 0 ) {\r\n\t\t\t\tconst lesson = unfilteredLessons[ idx ];\r\n\t\t\t\tconst left = unfilteredLessons[ idx - 1 ];\r\n\t\t\t\tconst tmp = left.pos;\r\n\t\t\t\tleft.pos = lesson.pos;\r\n\t\t\t\tlesson.pos = tmp;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if ( direction === 'right' ) {\r\n\t\t\tif ( idx < unfilteredLessons.length - 1 ) {\r\n\t\t\t\tconst lesson = unfilteredLessons[ idx ];\r\n\t\t\t\tconst right = unfilteredLessons[ idx + 1 ];\r\n\t\t\t\tconst tmp = right.pos;\r\n\t\t\t\tright.pos = lesson.pos;\r\n\t\t\t\tlesson.pos = tmp;\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst filteredLessons = searchLessons( unfilteredLessons, this.props.search.phrase );\r\n\t\tsortLessons( filteredLessons, this.props.search );\r\n\t\tconst layouts = createLayout( filteredLessons );\r\n\t\tthis.setState({\r\n\t\t\tfilteredLessons,\r\n\t\t\tlayouts,\r\n\t\t\tunfilteredLessons\r\n\t\t}, this.forceUpdate );\r\n\t\tthis.props.setLessonOrder({\r\n\t\t\tid: this.props.namespace._id,\r\n\t\t\tlessons: unfilteredLessons.map( x => x._id )\r\n\t\t});\r\n\t}\r\n\r\n\thandlePositionChangeFactory = ( idx ) => {\r\n\t\treturn ( event ) => {\r\n\t\t\tlet bool = false;\r\n\t\t\tswitch ( event.code ) {\r\n\t\t\t\tcase 'ArrowLeft':\r\n\t\t\t\t\tbool = true;\r\n\t\t\t\t\tthis.repositionLessons( idx, 'left' );\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'ArrowRight':\r\n\t\t\t\t\tbool = true;\r\n\t\t\t\t\tthis.repositionLessons( idx, 'right' );\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tif ( bool ) {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tevent.stopPropagation();\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n\r\n\ttoggleCreator = () => {\r\n\t\tthis.props.getTemplateLessons();\r\n\t\tthis.setState({ showLessonCreator: !this.state.showLessonCreator });\r\n\t};\r\n\r\n\thandleCreate = () => {\r\n\t\tthis.setState({ showLessonCreator: false });\r\n\t\tconst course = this.props.namespace;\r\n\t\tif ( course.title ) {\r\n\t\t\tdebug( 'Fetch lessons...' );\r\n\t\t\tthis.props.getLessons( course.title );\r\n\t\t}\r\n\t};\r\n\r\n\trenderLessons() {\r\n\t\tlet lessons = this.state.filteredLessons;\r\n\t\tif ( !isOwner( this.props.user, this.props.namespace ) ) {\r\n\t\t\treturn lessons.map( ( e, i ) => {\r\n\t\t\t\treturn (<div className=\"lesson-grid-item\" key={`cell-${e.title}-${i}`}>\r\n\t\t\t\t\t<EnrolledLesson\r\n\t\t\t\t\t\t{...lessons[ i ]}\r\n\t\t\t\t\t\taddNotification={this.props.addNotification}\r\n\t\t\t\t\t\tuser={this.props.user}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>);\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn (\r\n\t\t\tlessons.map( ( e, i ) => {\r\n\t\t\t\tconst lesson = <Lesson\r\n\t\t\t\t\t{...lessons[ i ]}\r\n\t\t\t\t\taddNotification={this.props.addNotification}\r\n\t\t\t\t\tdeleteLesson={this.props.deleteLesson}\r\n\t\t\t\t\tupdateLesson={this.props.updateLesson}\r\n\t\t\t\t\tdeactivateLesson={this.props.deactivateLesson}\r\n\t\t\t\t\tactivateLesson={this.props.activateLesson}\r\n\t\t\t\t\tshowLessonInGallery={this.props.showLessonInGallery}\r\n\t\t\t\t\thideLessonInGallery={this.props.hideLessonInGallery}\r\n\t\t\t\t\tgetLessons={this.props.getLessons}\r\n\t\t\t\t\tgetIsleFile={this.props.getIsleFile}\r\n\t\t\t\t\tuser={this.props.user}\r\n\t\t\t\t/>;\r\n\t\t\t\tif ( this.props.search.type === 'sequentially' ) {\r\n\t\t\t\t\treturn ( <div\r\n\t\t\t\t\t\tclassName=\"lesson-grid-item\"\r\n\t\t\t\t\t\tkey={`cell-${e.title}-${i}`}\r\n\t\t\t\t\t\ttabIndex={0} role=\"button\"\r\n\t\t\t\t\t\tref={input => {\r\n\t\t\t\t\t\t\tif ( input && this.state.activeElement === e.title ) {\r\n\t\t\t\t\t\t\t\tinput.focus();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn input;\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tonKeyDown={this.handlePositionChangeFactory( i )}\r\n\t\t\t\t\t\tonFocus={() => {\r\n\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\tactiveElement: e.title\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{lesson}\r\n\t\t\t\t\t</div> );\r\n\t\t\t\t}\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName=\"lesson-grid-item\" key={`cell-${e.title}-${i}`}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{lesson}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t})\r\n\t\t);\r\n\t}\r\n\r\n\trender() {\r\n\t\tif ( !this.props.namespace.title ) {\r\n\t\t\treturn <NoCourseBanner user={this.props.user} />;\r\n\t\t}\r\n\t\tlet lessons = this.state.filteredLessons;\r\n\t\tif ( isArray( lessons ) ) {\r\n\t\t\tconst templateButton = <OverlayTrigger placement=\"left\" overlay={<Tooltip id=\"create-from-template-tooltip\">{this.props.t('create-from-template')}</Tooltip>}>\r\n\t\t\t\t<Button aria-label={this.props.t('create-from-template')} className=\"create-from-template-button\" onClick={this.toggleCreator} >\r\n\t\t\t\t\t<i className=\"fas fa-plus\" />\r\n\t\t\t\t</Button>\r\n\t\t\t</OverlayTrigger>;\r\n\t\t\tif ( lessons.length === 0 ) {\r\n\t\t\t\treturn ( <Fragment>\r\n\t\t\t\t\t<NoLessonBanner user={this.props.user} />\r\n\t\t\t\t\t{templateButton}\r\n\t\t\t\t\t{this.state.showLessonCreator ? <LessonCreator\r\n\t\t\t\t\t\tonHide={this.toggleCreator}\r\n\t\t\t\t\t\tonCreate={this.handleCreate}\r\n\t\t\t\t\t\tnamespace={this.props.namespace}\r\n\t\t\t\t\t/> : null}\r\n\t\t\t\t</Fragment> );\r\n\t\t\t}\r\n\t\t\treturn (\r\n\t\t\t\t<Fragment>\r\n\t\t\t\t\t<div className=\"lessons-grid-container\">\r\n\t\t\t\t\t\t<ResponsiveReactGridLayout\r\n\t\t\t\t\t\t\tlayouts={this.state.layouts}\r\n\t\t\t\t\t\t\tbreakpoints={{ lg: 1800, md: 1550, sm: 1200, xs: 900, xxs: 400, tiny: 0 }}\r\n\t\t\t\t\t\t\tcols={{ lg: 24, md: 20, sm: 16, xs: 12, xxs: 8, tiny: 4 }}\r\n\t\t\t\t\t\t\tcontainerPadding={[10, 10]}\r\n\t\t\t\t\t\t\tisResizable={false}\r\n\t\t\t\t\t\t\tisBounded={true}\r\n\t\t\t\t\t\t\tisDraggable={false}\r\n\t\t\t\t\t\t\trowHeight={isOwner( this.props.user, this.props.namespace ) ? 54.5 : 55}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{this.renderLessons()}\r\n\t\t\t\t\t\t</ResponsiveReactGridLayout>\r\n\t\t\t\t\t\t{templateButton}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{this.state.showLessonCreator ? <LessonCreator\r\n\t\t\t\t\t\tonHide={this.toggleCreator}\r\n\t\t\t\t\t\tonCreate={this.handleCreate}\r\n\t\t\t\t\t\tnamespace={this.props.namespace}\r\n\t\t\t\t\t/> : null}\r\n\t\t\t\t</Fragment>\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n}\r\n\r\n\r\n// PROPERTIES //\r\n\r\nLessonsPage.propTypes = {\r\n\tactivateLesson: PropTypes.func.isRequired,\r\n\taddNotification: PropTypes.func.isRequired,\r\n\tdeactivateLesson: PropTypes.func.isRequired,\r\n\tdeleteLesson: PropTypes.func.isRequired,\r\n\tgetIsleFile: PropTypes.func.isRequired,\r\n\tgetLessons: PropTypes.func.isRequired,\r\n\tgetTemplateLessons: PropTypes.func.isRequired,\r\n\thideLessonInGallery: PropTypes.func.isRequired,\r\n\tnamespace: PropTypes.object.isRequired,\r\n\tsearch: PropTypes.object.isRequired,\r\n\tsetLessonOrder: PropTypes.func.isRequired,\r\n\tshowLessonInGallery: PropTypes.func.isRequired,\r\n\tupdateLesson: PropTypes.func.isRequired,\r\n\turl: PropTypes.string,\r\n\tuser: PropTypes.object.isRequired\r\n};\r\n\r\nLessonsPage.defaultProps = {\r\n\turl: null\r\n};\r\n\r\n\r\n// EXPORTS //\r\n\r\nexport default withTranslation( [ 'lessons_page', 'common' ] )( LessonsPage );\r\n","/**\r\n* Copyright (C) 2016-present The ISLE Authors\r\n*\r\n* The isle-dashboard program is free software: you can redistribute it and/or modify\r\n* it under the terms of the GNU Affero General Public License as\r\n* published by the Free Software Foundation, either version 3 of the\r\n* License, or (at your option) any later version.\r\n*\r\n* This program is distributed in the hope that it will be useful,\r\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n* GNU Affero General Public License for more details.\r\n*\r\n* You should have received a copy of the GNU Affero General Public License\r\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\r\n*/\r\n\r\n// MODULES //\r\n\r\nimport React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport LessonsPage from 'components/lessons-page';\r\nimport { setLessonOrderInjector } from 'actions/namespace';\r\nimport { activateLessonInjector, deactivateLessonInjector, deleteLessonInjector, getIsleFileInjector, getLessonsInjector, getTemplateLessonsInjector,\r\n\tshowLessonInGalleryInjector, hideLessonInGalleryInjector, updateLessonInjector } from 'actions/lesson';\r\nimport { addNotificationInjector } from 'actions/notification';\r\n\r\n\r\n// EXPORTS //\r\n\r\nconst VisibleLessonsPage = connect( mapStateToProps, mapDispatchToProps )( LessonsPage );\r\n\r\nfunction mapStateToProps( state ) {\r\n\treturn {\r\n\t\tsearch: state.search,\r\n\t\tuser: state.user,\r\n\t\tnamespace: state.namespace\r\n\t};\r\n}\r\n\r\nfunction mapDispatchToProps( dispatch ) {\r\n\treturn {\r\n\t\taddNotification: addNotificationInjector( dispatch ),\r\n\t\tshowLessonInGallery: showLessonInGalleryInjector( dispatch ),\r\n\t\thideLessonInGallery: hideLessonInGalleryInjector( dispatch ),\r\n\t\tactivateLesson: activateLessonInjector( dispatch ),\r\n\t\tdeactivateLesson: deactivateLessonInjector( dispatch ),\r\n\t\tupdateLesson: updateLessonInjector( dispatch ),\r\n\t\tdeleteLesson: deleteLessonInjector( dispatch ),\r\n\t\tgetLessons: getLessonsInjector( dispatch ),\r\n\t\tgetTemplateLessons: getTemplateLessonsInjector( dispatch ),\r\n\t\tgetIsleFile: getIsleFileInjector( dispatch ),\r\n\t\tsetLessonOrder: setLessonOrderInjector( dispatch )\r\n\t};\r\n}\r\n\r\nexport default VisibleLessonsPage;\r\n","/*\r\n* Adapted from:\r\n*\r\n* FileSaver.js\r\n* A saveAs() FileSaver implementation.\r\n* 1.3.8\r\n* 2018-03-22 14:03:47\r\n*\r\n* By Eli Grey, https://eligrey.com\r\n* License: MIT\r\n*   See https://github.com/eligrey/FileSaver.js/blob/master/LICENSE.md\r\n*\r\n* @source http://purl.eligrey.com/github/FileSaver.js/blob/master/src/FileSaver.js\r\n*/\r\n\r\n// VARIABLES //\r\n\r\nconst RE_AUTO_BOM = /^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i;\r\nconst ARBITRARY_REVOKE_TIMEOUT = 1000 * 40; // Time in ms\r\n\r\n\r\n// FUNCTIONS //\r\n\r\nfunction click(node) {\r\n\tconst event = new MouseEvent( 'click' );\r\n\tnode.dispatchEvent( event );\r\n}\r\n\r\nfunction throwOutside( ex ) {\r\n\tsetImmediate(function throwEx() {\r\n\t\tthrow ex;\r\n\t}, 0 );\r\n}\r\n\r\nfunction autoBOM( blob ) {\r\n\t// Prepend BOM for UTF-8 XML and text/* types (including HTML). Note: your browser will automatically convert UTF-16 U+FEFF to EF BB BF\r\n\tif ( RE_AUTO_BOM.test( blob.type ) ) {\r\n\t\treturn new Blob([ String.fromCharCode( 0xFEFF ), blob ], {\r\n\t\t\ttype: blob.type\r\n\t\t});\r\n\t}\r\n\treturn blob;\r\n}\r\n\r\nfunction dispatch( filesaver, eventTypes, event ) {\r\n\teventTypes = [].concat( eventTypes );\r\n\tlet i = eventTypes.length;\r\n\twhile ( i-- ) {\r\n\t\tlet listener = filesaver[ 'on' + eventTypes[i] ];\r\n\t\tif ( typeof listener === 'function' ) {\r\n\t\t\ttry {\r\n\t\t\t\tlistener.call( filesaver, event || filesaver );\r\n\t\t\t} catch ( ex ) {\r\n\t\t\t\tthrowOutside( ex );\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\n\r\n// MAIN //\r\n\r\nfunction saveFactory( view ) {\r\n\tif (\r\n\t\ttypeof view === 'undefined' ||\r\n\t\ttypeof navigator !== 'undefined' &&\r\n\t\t/MSIE [1-9]\\./.test( navigator.userAgent )\r\n\t) {\r\n\t\treturn;\r\n\t}\r\n\tconst doc = view.document;\r\n\r\n\t// Only get URL when necessary in case Blob.js hasn't overridden it yet:\r\n\tfunction getURL() {\r\n\t\treturn view.URL || view.webkitURL || view;\r\n\t}\r\n\tfunction revoke( file ) {\r\n\t\tfunction revoker() {\r\n\t\t\tif ( typeof file === 'string' ) { // File is an object URL...\r\n\t\t\t\tgetURL().revokeObjectURL(file);\r\n\t\t\t} else { // File is a File...\r\n\t\t\t\tfile.remove();\r\n\t\t\t}\r\n\t\t}\r\n\t\tsetTimeout( revoker, ARBITRARY_REVOKE_TIMEOUT );\r\n\t}\r\n\r\n\tconst saveLink = doc.createElementNS( 'http://www.w3.org/1999/xhtml', 'a' );\r\n\tconst canUseSaveLink = 'download' in saveLink;\r\n\tconst isSafari = /constructor/i.test( view.HTMLElement ) || view.safari;\r\n\tconst isChromeIOS =/CriOS\\/[\\d]+/.test( navigator.userAgent );\r\n\tconst setImmediate = view.setImmediate || view.setTimeout;\r\n\tconst forceSavableType = 'application/octet-stream';\r\n\r\n\tfunction FileSaver(blob, name, noAutoBOM ) {\r\n\t\tif ( !noAutoBOM ) {\r\n\t\t\tblob = autoBOM(blob);\r\n\t\t}\r\n\t\t// First try a.download, then web filesystem, then object URLs\r\n\t\tconst self = this;\r\n\t\tconst type = blob.type;\r\n\t\tconst force = type === forceSavableType;\r\n\t\tlet objectURL;\r\n\t\tfunction dispatchAll() {\r\n\t\t\tdispatch( self, 'writestart progress write writeend'.split(' ') );\r\n\t\t}\r\n\t\t// On any filesystem errors, revert to saving with object URLs:\r\n\t\tfunction fsError() {\r\n\t\t\tif ((isChromeIOS || (force && isSafari)) && view.FileReader) {\r\n\t\t\t\t// Safari doesn't allow downloading of blob urls\r\n\t\t\t\tconst reader = new FileReader();\r\n\t\t\t\treader.onloadend = function onLoadEnd() {\r\n\t\t\t\t\tlet url = isChromeIOS ? reader.result : reader.result.replace(/^data:[^;]*;/, 'data:attachment/file;');\r\n\t\t\t\t\tconst popup = view.open(url, '_blank');\r\n\t\t\t\t\tif ( !popup ) {\r\n\t\t\t\t\t\tview.location.href = url;\r\n\t\t\t\t\t}\r\n\t\t\t\t\turl = void 0; // Release reference before dispatching...\r\n\t\t\t\t\tself.readyState = self.DONE;\r\n\t\t\t\t\tdispatchAll();\r\n\t\t\t\t};\r\n\t\t\t\treader.readAsDataURL(blob);\r\n\t\t\t\tself.readyState = self.INIT;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t// Don't create more object URLs than needed:\r\n\t\t\tif ( !objectURL ) {\r\n\t\t\t\tobjectURL = getURL().createObjectURL( blob );\r\n\t\t\t}\r\n\t\t\tif ( force ) {\r\n\t\t\t\tview.location.href = objectURL;\r\n\t\t\t} else {\r\n\t\t\t\tconst opened = view.open( objectURL, '_blank' );\r\n\t\t\t\tif ( !opened ) {\r\n\t\t\t\t\t// Apple does not allow window.open, see https://developer.apple.com/library/safari/documentation/Tools/Conceptual/SafariExtensionGuide/WorkingwithWindowsandTabs/WorkingwithWindowsandTabs.html\r\n\t\t\t\t\tview.location.href = objectURL;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tself.readyState = self.DONE;\r\n\t\t\tdispatchAll();\r\n\t\t\trevoke( objectURL );\r\n\t\t}\r\n\t\tself.readyState = self.INIT;\r\n\r\n\t\tif ( canUseSaveLink ) {\r\n\t\t\tobjectURL = getURL().createObjectURL(blob);\r\n\t\t\tsetImmediate(function save() {\r\n\t\t\t\tsaveLink.href = objectURL;\r\n\t\t\t\tsaveLink.download = name;\r\n\t\t\t\tclick( saveLink );\r\n\t\t\t\tdispatchAll();\r\n\t\t\t\trevoke( objectURL );\r\n\t\t\t\tself.readyState = self.DONE;\r\n\t\t\t}, 0);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tfsError();\r\n\t}\r\n\tconst proto = FileSaver.prototype;\r\n\tfunction saveAs( blob, name, noAutoBOM ) {\r\n\t\treturn new FileSaver( blob, name || blob.name || 'download', noAutoBOM );\r\n\t}\r\n\r\n\t// IE 10+ (native saveAs)\r\n\tif ( typeof navigator !== 'undefined' && navigator.msSaveOrOpenBlob ) {\r\n\t\treturn function saveAs( blob, name, noAutoBOM ) {\r\n\t\t\tname = name || blob.name || 'download';\r\n\t\t\tif ( !noAutoBOM ) {\r\n\t\t\t\tblob = autoBOM( blob );\r\n\t\t\t}\r\n\t\t\treturn navigator.msSaveOrOpenBlob(blob, name);\r\n\t\t};\r\n\t}\r\n\r\n\tproto.abort = function abort() {};\r\n\tproto.readyState = proto.INIT = 0;\r\n\tproto.WRITING = 1;\r\n\tproto.DONE = 2;\r\n\r\n\tproto.error = null;\r\n\tproto.onwritestart = null;\r\n\tproto.onprogress = null;\r\n\tproto.onwrite = null;\r\n\tproto.onabort = null;\r\n\tproto.onerror = null;\r\n\tproto.onwriteend = null;\r\n\r\n\treturn saveAs;\r\n}\r\n\r\nconst saveAs = saveFactory(\r\n\ttypeof self !== 'undefined' && self ||\r\n\ttypeof window !== 'undefined' && window ||\r\n\tthis.content\r\n);\r\n\r\n\r\n// EXPORTS //\r\n\r\nexport default saveAs;\r\n","/**\r\n* Copyright (C) 2016-present The ISLE Authors\r\n*\r\n* The isle-dashboard program is free software: you can redistribute it and/or modify\r\n* it under the terms of the GNU Affero General Public License as\r\n* published by the Free Software Foundation, either version 3 of the\r\n* License, or (at your option) any later version.\r\n*\r\n* This program is distributed in the hope that it will be useful,\r\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n* GNU Affero General Public License for more details.\r\n*\r\n* You should have received a copy of the GNU Affero General Public License\r\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\r\n*/\r\n\r\n// MODULES //\r\n\r\nimport floor from '@stdlib/math/base/special/floor';\r\n\r\n\r\n// MAIN //\r\n\r\n/**\r\n* Formats a timestamp in a human readable format.\r\n*\r\n* @param {number} timestamp - timestamp\r\n* @param {Object} [opts] - options\r\n* @param {string} [opts.hours] - hours\r\n* @param {string} [opts.minutes] - minutes\r\n* @param {string} [opts.seconds] - seconds\r\n* @returns {string} formatted timestamp\r\n*/\r\nconst formatTime = ( time, opts = { hours: true, minutes: true, seconds: true }) => {\r\n\ttime = time / 1000;\r\n\tconst hours = floor( time / ( 60*60 ) );\r\n\ttime = time % ( 60*60 );\r\n\tlet minutes = floor( time / 60 );\r\n\tif ( minutes < 10 ) {\r\n\t\tminutes = '0'+minutes;\r\n\t}\r\n\ttime = time % 60;\r\n\tlet seconds = floor( time );\r\n\tif ( seconds < 10 ) {\r\n\t\tseconds = '0'+seconds;\r\n\t}\r\n\tlet out = '';\r\n\tif ( opts.hours ) {\r\n\t\tout += hours;\r\n\t}\r\n\tif ( opts.minutes ) {\r\n\t\tif ( out ) {\r\n\t\t\tout += ':';\r\n\t\t}\r\n\t\tout += minutes;\r\n\t}\r\n\tif ( opts.seconds ) {\r\n\t\tif ( out ) {\r\n\t\t\tout += ':';\r\n\t\t}\r\n\t\tout += seconds;\r\n\t}\r\n\treturn out;\r\n};\r\n\r\n\r\n// EXPORTS //\r\n\r\nexport default formatTime;\r\n","/**\r\n* Copyright (C) 2016-present The ISLE Authors\r\n*\r\n* The isle-dashboard program is free software: you can redistribute it and/or modify\r\n* it under the terms of the GNU Affero General Public License as\r\n* published by the Free Software Foundation, either version 3 of the\r\n* License, or (at your option) any later version.\r\n*\r\n* This program is distributed in the hope that it will be useful,\r\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n* GNU Affero General Public License for more details.\r\n*\r\n* You should have received a copy of the GNU Affero General Public License\r\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\r\n*/\r\n\r\n// MODULES //\r\n\r\nimport isObject from '@stdlib/assert/is-object';\r\n\r\n\r\n// MAIN //\r\n\r\n/**\r\n* Validates if a user is an owner of the specified namespace.\r\n*\r\n* @param {Object} user - user object\r\n* @param {Object} namespace - namespace object\r\n* @returns {boolean} boolean indicating if the user is an owner of the namespace\r\n*/\r\nfunction isOwner( user, namespace ) {\r\n\tlet bool = false;\r\n\tfor ( let i = 0; i < namespace.owners.length; i++ ) {\r\n\t\tconst owner = namespace.owners[ i ];\r\n\t\tif ( isObject( owner ) ) {\r\n\t\t\tif ( owner.email === user.email ) {\r\n\t\t\t\tbool = true;\r\n\t\t\t}\r\n\t\t} else if ( owner === user.id ) {\r\n\t\t\t// Case: Owners array is not yet populated but contains only string IDs:\r\n\t\t\tbool = true;\r\n\t\t}\r\n\t}\r\n\treturn bool;\r\n}\r\n\r\n\r\n// EXPORTS //\r\n\r\nexport default isOwner;\r\n","/**\r\n* Copyright (C) 2016-present The ISLE Authors\r\n*\r\n* The isle-dashboard program is free software: you can redistribute it and/or modify\r\n* it under the terms of the GNU Affero General Public License as\r\n* published by the Free Software Foundation, either version 3 of the\r\n* License, or (at your option) any later version.\r\n*\r\n* This program is distributed in the hope that it will be useful,\r\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n* GNU Affero General Public License for more details.\r\n*\r\n* You should have received a copy of the GNU Affero General Public License\r\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\r\n*/\r\n\r\n// VARIABLES //\r\n\r\nconst OPTS = {\r\n\tnumeric: true // Use numeric collation such that \"1\" < \"2\" < \"10\"...\r\n};\r\n\r\n\r\n// MAIN //\r\n\r\n/**\r\n* Sorts lessons according to the `search` object in place.\r\n*\r\n* @param {Array} lessons - a list of lessons\r\n* @param {Object} search - search object\r\n* @param {string} search.type - either `sequentially`, `alphabetically`, `created_at`, or `updated_at`\r\n* @param {string} search.direction - either `ascending` or `descending`\r\n*/\r\nfunction sortLessons( lessons, search ) {\r\n\tconst { type, direction } = search;\r\n\tif ( type === 'sequentially' ) {\r\n\t\tif ( direction === 'ascending' ) {\r\n\t\t\tlessons.sort( ( a, b ) => {\r\n\t\t\t\treturn a.pos - b.pos;\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tlessons.sort( ( a, b ) => {\r\n\t\t\t\treturn b.pos - a.pos;\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\telse if ( type === 'alphabetically' ) {\r\n\t\tif ( direction === 'ascending' ) {\r\n\t\t\tlessons.sort( ( a, b ) => {\r\n\t\t\t\tconst x = a.namespace + a.title;\r\n\t\t\t\tconst y = b.namespace + b.title;\r\n\t\t\t\treturn x.localeCompare( y, void 0, OPTS );\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tlessons.sort( ( a, b ) => {\r\n\t\t\t\tconst x = a.namespace + a.title;\r\n\t\t\t\tconst y = b.namespace + b.title;\r\n\t\t\t\treturn y.localeCompare( x, void 0, OPTS );\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\telse if ( type === 'created_at' ) {\r\n\t\tif ( direction === 'ascending' ) {\r\n\t\t\tlessons.sort( ( a, b ) => {\r\n\t\t\t\treturn a.createdAt.localeCompare( b.createdAt, void 0, OPTS );\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tlessons.sort( ( a, b ) => {\r\n\t\t\t\treturn b.createdAt.localeCompare( a.createdAt, void 0, OPTS );\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\telse if ( type === 'updated_at' ) {\r\n\t\tif ( direction === 'ascending' ) {\r\n\t\t\tlessons.sort( ( a, b ) => {\r\n\t\t\t\treturn a.updatedAt.localeCompare( b.updatedAt, void 0, OPTS );\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tlessons.sort( ( a, b ) => {\r\n\t\t\t\treturn b.updatedAt.localeCompare( a.updatedAt, void 0, OPTS );\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n}\r\n\r\n\r\n// EXPORTS //\r\n\r\nexport default sortLessons;\r\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _ThemeProvider = require(\"./ThemeProvider\");\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nconst defaultProps = {\n  role: 'toolbar'\n};\nconst ButtonToolbar = /*#__PURE__*/React.forwardRef(({\n  bsPrefix,\n  className,\n  ...props\n}, ref) => {\n  const prefix = (0, _ThemeProvider.useBootstrapPrefix)(bsPrefix, 'btn-toolbar');\n  return /*#__PURE__*/(0, _jsxRuntime.jsx)(\"div\", { ...props,\n    ref: ref,\n    className: (0, _classnames.default)(className, prefix)\n  });\n});\nButtonToolbar.displayName = 'ButtonToolbar';\nButtonToolbar.defaultProps = defaultProps;\nvar _default = ButtonToolbar;\nexports.default = _default;\nmodule.exports = exports.default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _ThemeProvider = require(\"./ThemeProvider\");\n\nvar _ElementChildren = require(\"./ElementChildren\");\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nconst ROUND_PRECISION = 1000;\n/**\n * Validate that children, if any, are instances of `<ProgressBar>`.\n */\n\nfunction onlyProgressBar(props, propName, componentName) {\n  const children = props[propName];\n\n  if (!children) {\n    return null;\n  }\n\n  let error = null;\n  React.Children.forEach(children, child => {\n    if (error) {\n      return;\n    }\n    /**\n     * Compare types in a way that works with libraries that patch and proxy\n     * components like react-hot-loader.\n     *\n     * see https://github.com/gaearon/react-hot-loader#checking-element-types\n     */\n    // eslint-disable-next-line @typescript-eslint/no-use-before-define\n\n\n    const element = /*#__PURE__*/(0, _jsxRuntime.jsx)(ProgressBar, {});\n    if (child.type === element.type) return;\n    const childType = child.type;\n    const childIdentifier = /*#__PURE__*/React.isValidElement(child) ? childType.displayName || childType.name || childType : child;\n    error = new Error(`Children of ${componentName} can contain only ProgressBar ` + `components. Found ${childIdentifier}.`);\n  });\n  return error;\n}\n\nconst defaultProps = {\n  min: 0,\n  max: 100,\n  animated: false,\n  isChild: false,\n  visuallyHidden: false,\n  striped: false\n};\n\nfunction getPercentage(now, min, max) {\n  const percentage = (now - min) / (max - min) * 100;\n  return Math.round(percentage * ROUND_PRECISION) / ROUND_PRECISION;\n}\n\nfunction renderProgressBar({\n  min,\n  now,\n  max,\n  label,\n  visuallyHidden,\n  striped,\n  animated,\n  className,\n  style,\n  variant,\n  bsPrefix,\n  ...props\n}, ref) {\n  return /*#__PURE__*/(0, _jsxRuntime.jsx)(\"div\", {\n    ref: ref,\n    ...props,\n    role: \"progressbar\",\n    className: (0, _classnames.default)(className, `${bsPrefix}-bar`, {\n      [`bg-${variant}`]: variant,\n      [`${bsPrefix}-bar-animated`]: animated,\n      [`${bsPrefix}-bar-striped`]: animated || striped\n    }),\n    style: {\n      width: `${getPercentage(now, min, max)}%`,\n      ...style\n    },\n    \"aria-valuenow\": now,\n    \"aria-valuemin\": min,\n    \"aria-valuemax\": max,\n    children: visuallyHidden ? /*#__PURE__*/(0, _jsxRuntime.jsx)(\"span\", {\n      className: \"visually-hidden\",\n      children: label\n    }) : label\n  });\n}\n\nconst ProgressBar = /*#__PURE__*/React.forwardRef(({\n  isChild,\n  ...props\n}, ref) => {\n  props.bsPrefix = (0, _ThemeProvider.useBootstrapPrefix)(props.bsPrefix, 'progress');\n\n  if (isChild) {\n    return renderProgressBar(props, ref);\n  }\n\n  const {\n    min,\n    now,\n    max,\n    label,\n    visuallyHidden,\n    striped,\n    animated,\n    bsPrefix,\n    variant,\n    className,\n    children,\n    ...wrapperProps\n  } = props;\n  return /*#__PURE__*/(0, _jsxRuntime.jsx)(\"div\", {\n    ref: ref,\n    ...wrapperProps,\n    className: (0, _classnames.default)(className, bsPrefix),\n    children: children ? (0, _ElementChildren.map)(children, child => /*#__PURE__*/(0, React.cloneElement)(child, {\n      isChild: true\n    })) : renderProgressBar({\n      min,\n      now,\n      max,\n      label,\n      visuallyHidden,\n      striped,\n      animated,\n      bsPrefix,\n      variant\n    }, ref)\n  });\n});\nProgressBar.displayName = 'ProgressBar';\nProgressBar.defaultProps = defaultProps;\nvar _default = ProgressBar;\nexports.default = _default;\nmodule.exports = exports.default;"],"sourceRoot":""}