/*! For license information please see 4758.b8d6eef0.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkisle_dashboard=self.webpackChunkisle_dashboard||[]).push([[4758],{77914:function(e,t,a){a.r(t);var r=a(38603),n=a(91532),s=a.n(n),l=a(2561),o=a.n(l),i=a(58651),c=a(12908),d=a(5610),m=a(12630),u=a(69977),p=a(31617),h=a(51530),f=a.n(h),v=a(63022),g=a(37933),E=a(27925),y=a(76282),b=a(65307),D=a(76470),Z=a(34668);function x(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const C=o()("isle-dashboard:admin");class w extends r.Component{constructor(e){super(e),x(this,"createColumns",(()=>{const{t:e}=this.props;return[(0,y.Z)({Header:e("common:type"),id:"type",accessor:"type",maxWidth:200,style:{marginTop:"8px",color:"darkslategrey"}}),(0,b.Z)({Header:e("common:time"),accessor:"time",style:{marginTop:"2px",color:"darkslategrey"},maxWidth:150,t:e}),{Header:e("common:data"),accessor:"data",style:{marginTop:"2px",color:"darkslategrey",fontSize:24,textAlign:"center",cursor:"pointer"},Cell:e=>{if(e.value){const t=r.createElement(d.Z,{id:"popover-data",style:{maxWidth:400}},r.createElement(d.Z.Title,{as:"h3"},"Data"),r.createElement(d.Z.Content,{style:{backgroundColor:"lightblue"}},r.createElement("pre",null,JSON.stringify(e.value,null,2))));return r.createElement(c.Z,{trigger:"click",placement:"right",overlay:t},r.createElement("i",{className:"data-icon fas fa-tablet-alt"}))}return null},maxWidth:120,resizable:!1,filterable:!1,sortable:!1},(0,E.Z)({Header:e("common:done"),accessor:"done",trueLabel:e("common:done"),falseLabel:e("common:not-done")}),{Header:"Pic",accessor:"user.picture",Cell:e=>r.createElement("img",{className:"table-pic",src:`${v.ZP}/thumbnail/${e.value}`,alt:"Profile Pic"}),style:{marginTop:"8px",color:"darkslategrey"},maxWidth:46,minWidth:46,filterable:!1,resizable:!1,sortable:!1},(0,y.Z)({Header:e("common:name"),accessor:"user.name",style:{marginTop:"8px",color:"darkslategrey"}}),(0,y.Z)({Header:e("common:email"),accessor:"user.email",style:{marginTop:"8px",color:"darkslategrey"}}),{Header:e("common:actions"),Cell:t=>r.createElement("div",null,r.createElement(c.Z,{placement:"bottom",overlay:r.createElement(u.Z,{id:"delete_event"},e("delete-event"))},r.createElement(m.Z,{variant:"outline-secondary",style:{marginLeft:8},onClick:this.askToDeleteSelectedEventFactory(t.row._original),"aria-label":e("delete-event")},r.createElement("div",{className:"fa fa-trash-alt"}))),r.createElement(c.Z,{placement:"bottom",overlay:r.createElement(u.Z,{id:"trigger_event"},e("trigger-event"))},r.createElement(m.Z,{variant:"outline-secondary",style:{marginLeft:8},onClick:this.triggerEventFactory(t.row._original),"aria-label":e("trigger-event")},r.createElement("div",{className:"fas fa-share-square"})))),resizable:!1,filterable:!1,sortable:!1}]})),x(this,"triggerEventFactory",(e=>()=>{this.props.triggerEvent(e._id)})),x(this,"askToDeleteSelectedEventFactory",(e=>()=>{this.setState({showDeleteModal:!this.state.showDeleteModal,selectedEvent:e})})),x(this,"deleteSelectedEvent",(()=>{this.setState({showDeleteModal:!1},(async()=>{C(`Delete event with id ${this.state.selectedEvent._id}...`),await this.props.deleteEvent(this.state.selectedEvent._id),C("Retrieve events from server..."),this.props.getEvents()}))})),x(this,"toggleDeleteModal",(()=>{this.setState({showDeleteModal:!this.state.showDeleteModal})})),x(this,"toggleExplorer",(()=>{this.setState({showExplorer:!this.state.showExplorer})})),this.columns=this.createColumns(),this.state={showDeleteModal:!1,selectedEvent:null,showExplorer:!1}}componentDidMount(){this.props.getEvents()}render(){const{t:e}=this.props;if(this.state.showExplorer){const t=["user","done","time","type"];let a=(0,D.Z)(this.props.admin.events);return a=f()(a,t),a.user=a.user.map((e=>e?e.email:null)),r.createElement(Z.Z,{title:e("explorer-events-title"),data:a,categorical:t,quantitative:[],close:this.toggleExplorer})}return r.createElement(r.Fragment,null,r.createElement(p.Z,{data:this.props.admin.events,columns:this.columns,onButtonClick:this.toggleExplorer,t:this.props.t}),this.state.showDeleteModal?r.createElement(g.Z,{title:e("delete-event"),message:r.createElement("span",null,e("delete-event-confirm")),close:this.toggleDeleteModal,show:this.state.showDeleteModal,onConfirm:this.deleteSelectedEvent}):null)}}w.propTypes={admin:s().object.isRequired,deleteEvent:s().func.isRequired,getEvents:s().func.isRequired,t:s().func.isRequired,triggerEvent:s().func.isRequired},t.default=(0,i.Z)(["admin","common"])(w)},37933:function(e,t,a){var r=a(38603),n=a(91532),s=a.n(n),l=a(58651),o=a(12630),i=a(14704);const c=e=>r.createElement(i.Z,{show:e.show,onHide:e.close},r.createElement(i.Z.Header,null,r.createElement(i.Z.Title,{as:"h3"},e.title)),r.createElement(i.Z.Body,null,e.message),r.createElement(i.Z.Footer,null,r.createElement(o.Z,{onClick:e.close},e.t("cancel")),r.createElement(o.Z,{variant:"danger",onClick:e.onConfirm},e.t("confirm"))));c.propTypes={close:s().func,message:s().node,onConfirm:s().func,show:s().bool,title:s().string},c.defaultProps={close(){},message:"",onConfirm(){},show:!1,title:""},t.Z=(0,l.Z)(["common"])(c)},31617:function(e,t,a){a.d(t,{Z:function(){return p}});var r=a(38603),n=a(91532),s=a.n(n),l=a(90037),o=a(12630),i=a(60805),c=a(12908),d=a(69977);a(3100);function m(){return m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},m.apply(this,arguments)}class u extends r.Component{constructor(...e){var t,a,r;super(...e),r=()=>({id:this.props.id||"dashboard-table"}),(a="getProps")in(t=this)?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r}render(){const{t:e}=this.props;return r.createElement(r.Fragment,null,r.createElement(l.Z,m({},this.props,{filterable:!0,className:`dashboard-table ${this.props.className}`,data:this.props.data,columns:this.props.columns,previousText:e("common:previous"),nextText:e("common:next"),loadingText:e("common:loading"),noDataText:e("common:no-rows-found"),pageText:e("common:page"),ofText:e("common:of"),rowsText:e("common:rows"),ref:e=>{this.table=e},getProps:this.getProps})),this.props.onButtonClick?r.createElement(i.Z,{vertical:!0,style:{float:"right",marginRight:-9}},r.createElement(c.Z,{placement:"left",overlay:r.createElement(d.Z,{id:"explorer-tooltip"},e("common:data-explorer"))},r.createElement(o.Z,{"aria-label":e("common:data-explorer"),variant:"primary",style:{marginBottom:8},onClick:this.props.onButtonClick},r.createElement("i",{className:"fas fa-chart-bar"})))):null)}}u.propTypes={className:s().string,columns:s().array.isRequired,data:s().oneOfType([s().object,s().array]).isRequired,onButtonClick:s().func.isRequired,t:s().func},u.defaultProps={className:"",t(){}};var p=u},34668:function(e,t,a){const r=(0,a(221).Z)((()=>Promise.all([a.e(8504),a.e(6351)]).then(a.bind(a,27248))));t.Z=r},27925:function(e,t,a){var r=a(38603);t.Z=function({Header:e,accessor:t,trueLabel:a,falseLabel:n,printLabels:s=!1,maxWidth:l=150}){let o,i;return s?(o=e=>!0===e.value?a:!1===e.value?n:null,i={marginTop:"8px",color:"darkslategrey"}):(o=e=>e.value?r.createElement("i",{className:"far fa-check-square"}):null,i={marginTop:"2px",color:"darkslategrey",fontSize:24,textAlign:"center"}),{Header:e,accessor:t,style:i,Cell:o,filterMethod:(e,t)=>{if("all"===e.value)return!0;const a=e.pivotId||e.id;return void 0===t[a]||String(t[a])===e.value},Filter:({filter:e,onChange:t})=>{const s=e=>{const a=e.target.value;t(a)};let l;return l=e?e.value:"all",r.createElement("select",{onBlur:s,onChange:s,style:{width:"100%",backgroundColor:"ghostwhite"},value:l},r.createElement("option",{value:"all"},"Show All"),r.createElement("option",{value:!0},a),r.createElement("option",{value:!1},n))},maxWidth:l}}},65307:function(e,t,a){var r=a(38603),n=a(52089),s=a(12908),l=a(5610),o=a(12630);a(77511);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class c extends r.Component{constructor(e){super(e),i(this,"handleDatesChange",(({startDate:e,endDate:t})=>{this.setState({startDate:e,endDate:t},(()=>{this.props.onDatesChange(this.state)}))})),i(this,"handleReset",(()=>{this.setState({startDate:this.props.minDate,endDate:this.props.maxDate},(()=>{this.props.onDatesChange(this.state)}))})),this.state={startDate:e.startDate,endDate:e.endDate}}componentDidUpdate(e){this.props.startDate===e.startDate&&this.props.endDate===e.endDate||this.setState({startDate:this.props.startDate,endDate:this.props.endDate})}render(){return r.createElement(r.Fragment,null,r.createElement(n.DateRangePicker,{startDate:this.state.startDate,endDate:this.state.endDate,startDateId:"start_date_input",endDateId:"end_date_input",onDatesChange:this.handleDatesChange,focusedInput:this.state.focusedInput,onFocusChange:e=>this.setState({focusedInput:e}),isOutsideRange:()=>!1}),r.createElement(o.Z,{"aria-label":this.props.t("common:close"),variant:"warning",onClick:this.handleReset,style:{paddingTop:8,paddingLeft:16,paddingRight:16,paddingBottom:8,fontSize:20}},"x"))}}const d=e=>new Date(e.value).toLocaleString();t.Z=function({Header:e,accessor:t,Cell:a,style:n,startDate:i,endDate:m,t:u,maxWidth:p=150}){return{Header:e,accessor:t,style:n,Cell:a||d,filterMethod:(e,t)=>{if(!e.value)return!0;const{startDate:a,endDate:r}=e.value,n=t[e.pivotId||e.id].getTime();return a&&r?n>=a.valueOf()&&n<=r.valueOf():a?n>=a.valueOf():!r||n<=r.valueOf()},Filter:({filter:e,onChange:t})=>{const a=e&&e.value||{},n=r.createElement(l.Z,{id:"popover-data",style:{maxWidth:400}},r.createElement(l.Z.Title,{as:"h3"},u("common:dates")),r.createElement(l.Z.Content,{style:{backgroundColor:"grey"}},r.createElement(c,{startDate:a.startDate||i,minDate:i,maxDate:m,endDate:a.endDate||m,onDatesChange:({startDate:e,endDate:a})=>{t({startDate:e,endDate:a})},t:u})));return r.createElement(s.Z,{trigger:"click",placement:"right",overlay:n},r.createElement(o.Z,{"aria-label":u("common:toggle-calendar"),size:"sm",style:{float:"left",marginLeft:6},variant:"secondary"},r.createElement("i",{className:"far fa-calendar-alt"})))},maxWidth:p}}},76282:function(e,t,a){var r=a(38603),n=a(87078),s=a(72868);t.Z=function({id:e,Header:t,Cell:a,accessor:l,maxWidth:o=150,minWidth:i,filterMethod:c}){i>o&&(o=i);const d={id:e,Header:t,accessor:l,Cell:a,filterMethod:c||s.Z,Filter:({filter:e,onChange:a})=>r.createElement(n.Z,{"aria-label":t,autoComplete:"none",onChange:e=>{a(e.target.value)}})};return o&&(d.maxWidth=o),i&&(d.minWidth=i),d}},72868:function(e,t,a){var r=a(89506),n=a.n(r),s=a(64817),l=a.n(s);t.Z=(e,t)=>{const a=t[e.id]||"";return n()(l()(a),l()(e.value))}},13561:function(e,t,a){var r=a(93165),n=a(73830),s=a(24500),l=n(s);r(l,"primitives",n(s.isPrimitive)),r(l,"objects",n(s.isObject)),e.exports=l},51530:function(e,t,a){var r=a(52765);e.exports=r},52765:function(e,t,a){var r=a(24500).isPrimitive,n=a(13561).primitives,s=a(74802);e.exports=function(e,t){var a,l,o;if("object"!==typeof e||null===e)throw new TypeError("invalid argument. First argument must be an object. Value: `"+e+"`.");if(a={},r(t))return s(e,t)&&(a[t]=e[t]),a;if(n(t)){for(o=0;o<t.length;o++)l=t[o],s(e,l)&&(a[l]=e[l]);return a}throw new TypeError("invalid argument. Second argument must be either a string primitive or an array of string primitives. Value: `"+t+"`.")}},43273:function(e,t,a){var r=a(87462),n=a(63366),s=a(68761),l=a.n(s),o=a(38603),i=a(91532),c=a.n(i),d=["as","className","type","tooltip"],m={type:c().string,tooltip:c().bool,as:c().elementType},u=o.forwardRef((function(e,t){var a=e.as,s=void 0===a?"div":a,i=e.className,c=e.type,m=void 0===c?"valid":c,u=e.tooltip,p=void 0!==u&&u,h=(0,n.Z)(e,d);return o.createElement(s,(0,r.Z)({},h,{ref:t,className:l()(i,m+"-"+(p?"tooltip":"feedback"))}))}));u.displayName="Feedback",u.propTypes=m,t.Z=u},53913:function(e,t,a){var r=a(38603).createContext({controlId:void 0});t.Z=r},87078:function(e,t,a){var r=a(87462),n=a(63366),s=a(68761),l=a.n(s),o=(a(61009),a(38603)),i=(a(14180),a(43273)),c=a(53913),d=a(54447),m=["bsPrefix","bsCustomPrefix","type","size","htmlSize","id","className","isValid","isInvalid","plaintext","readOnly","custom","as"],u=o.forwardRef((function(e,t){var a,s,i=e.bsPrefix,u=e.bsCustomPrefix,p=e.type,h=e.size,f=e.htmlSize,v=e.id,g=e.className,E=e.isValid,y=void 0!==E&&E,b=e.isInvalid,D=void 0!==b&&b,Z=e.plaintext,x=e.readOnly,C=e.custom,w=e.as,k=void 0===w?"input":w,T=(0,n.Z)(e,m),N=(0,o.useContext)(c.Z).controlId,P=C?[u,"custom"]:[i,"form-control"],S=P[0],O=P[1];if(i=(0,d.vE)(S,O),Z)(s={})[i+"-plaintext"]=!0,a=s;else if("file"===p){var R;(R={})[i+"-file"]=!0,a=R}else if("range"===p){var F;(F={})[i+"-range"]=!0,a=F}else if("select"===k&&C){var H;(H={})[i+"-select"]=!0,H[i+"-select-"+h]=h,a=H}else{var M;(M={})[i]=!0,M[i+"-"+h]=h,a=M}return o.createElement(k,(0,r.Z)({},T,{type:p,size:f,ref:t,readOnly:x,id:v||N,className:l()(g,a,y&&"is-valid",D&&"is-invalid")}))}));u.displayName="FormControl",t.Z=Object.assign(u,{Feedback:i.Z})},51906:function(e,t,a){a.d(t,{Z:function(){return m}});var r=a(87462),n=a(63366),s=a(68761),l=a.n(s),o=a(62489),i=a(38603),c=a(54447),d=["className","bsPrefix","as"];function m(e,t){var a,s=void 0===t?{}:t,m=s.displayName,u=void 0===m?(a=e)[0].toUpperCase()+(0,o.Z)(a).slice(1):m,p=s.Component,h=s.defaultProps,f=i.forwardRef((function(t,a){var s=t.className,o=t.bsPrefix,m=t.as,u=void 0===m?p||"div":m,h=(0,n.Z)(t,d),f=(0,c.vE)(o,e);return i.createElement(u,(0,r.Z)({ref:a,className:l()(s,f)},h))}));return f.defaultProps=h,f.displayName=u,f}}}]);
//# sourceMappingURL=4758.b8d6eef0.chunk.js.map