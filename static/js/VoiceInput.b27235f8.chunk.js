"use strict";(self.webpackChunkisle_dashboard=self.webpackChunkisle_dashboard||[]).push([[4331],{48630:function(e,t,n){n.r(t),n.d(t,{default:function(){return E}});var o=n(1413),r=n(4942),a=n(70885),l=n(41488),i=n(44996),c=n.n(i),s=n(26180),u=n(8680),d=n(49659),m=n(87651),f=n(70870),h=n(15671),p=n(43144),g=n(60136),v=n(29388),w=n(52734),k=function(e){(0,g.Z)(n,e);var t=(0,v.Z)(n);function n(){return(0,h.Z)(this,n),t.apply(this,arguments)}return(0,p.Z)(n,[{key:"render",value:function(){return l.createElement("button",{onClick:this.props.onClick})}}]),n}(l.Component);k.defaultProps={onClick:function(){}};var b=w||k,C=c()("isle:voice-input");var y=function(e){var t=e.autorecord,i=e.bind,c=e.defaultValue,h=e.grammars,p=e.id,g=e.maxAlternatives,v=e.remote,w=e.startTooltip,k=e.stopTooltip,y=e.speechInterface,E=e.onChange,S=e.onClick,N=e.onFinalText,Z=e.onRecordingStart,x=e.onRecordingStop,R=e.onSegment,T=e.onSubmit,F=e.timeout,A=(0,l.useState)(t),P=(0,a.Z)(A,2),I=P[0],V=P[1],Y=(0,l.useContext)(m.Z),_=(0,s.$)("input").t,B=(0,l.useState)(i&&Y.state?Y.state[i]:c),D=(0,a.Z)(B,2),G=D[0],K=D[1],L=(0,l.useRef)(),$=(0,l.useRef)(),j=(0,l.useCallback)((function(e){var t=e.target.value;K(t),E(t),i&&n.g.lesson.setState((0,r.Z)({},i,t))}),[i,E]),q=(0,l.useCallback)((function(e){if(13===e.keyCode)T(G)}),[G,T]),z=(0,l.useCallback)((function(){C("Set `isRecording` to false..."),V(!1),L.current&&L.current.stop(),x()}),[x]),H=(0,l.useCallback)((function(){L.current=null;var e=window.SpeechRecognition||window.webkitSpeechRecognition;if(e){var t=new e;t.lang=f.a.language,t.continuous=!0,t.interimResults=!0,t.maxAlternatives=g,t.grammars=function(e){for(var t=t||webkitSpeechGrammarList,n=new t,o=0;o<e.length;o++){var r=e[o],a=r.src,l=r.weight;n.addFromString(a,l)}return n}(h),t.onerror=function(e){if(C("Encountered an error..."),"not-allowed"===e.error||"service-not-allowed"===e.error)return V(!1),Y.addNotification({title:"Not allowed",message:"No permission to use the speech recognition service",level:"error",position:"tr"});try{t.start()}catch(n){C(n)}},t.onend=function(){C("onend: %s",p),I&&t.start()},t.onstart=function(){C("onstart: %s",p),Z()},t.onresult=function(e){if(C("Processing result..."),"undefined"!==typeof e.results)for(var t=e.resultIndex;t<e.results.length;++t){var n=e.results[t];if(e.results[t].isFinal){F&&($.current=setTimeout(z,F)),C("Received final text");var o=void 0;if(g>1){o=new Array(n.length);for(var r=0;r<n.length;r++)o[r]=n[r].transcript}else o=n[0].transcript;K(o),N(o),y&&y.check(o,{onStart:function(){z()},onEnd:function(){H()}})}else{$.current&&clearTimeout($.current);var a=void 0;if(g>1){a=new Array(n.length);for(var l=0;l<n.length;l++)a[l]=n[l].transcript}else a=n[0].transcript;K(a),R(a)}}else C("Something went wrong...")},t.start(),L.current=t}C("Set `isRecording` to true..."),V(!0)}),[h,p,I,g,Z,Y,y,z,F,N,R]),J=(0,l.useCallback)((function(e){return e?!0===I?k||_("click-to-stop-recording"):w||_("click-to-start-recording"):"Your browser does not support voice recognition. You may use the Chrome Browser instead"}),[I,w,k,_]);(0,l.useEffect)((function(){v&&(window.onkeydown=function(e){switch(e.keyCode){case v.stop:z();break;case v.start:I||H();break;case v.toggle:I?z():H()}}),t&&(C("Should record voice..."),H())}),[t,v,I,H,z]);var M=(0,l.useCallback)((function(e){S(e),I?z():H()}),[I,H,z,S]),O="voice-microphone";!0===I&&(O="voice-microphone voice-recording");var Q=J(function(){try{var e=e||webkitSpeechRecognition;return!!e}catch(t){return!1}}()),U=l.createElement(u.Z,{id:"".concat(e.id,"-voice-input-tooltip")},Q);switch(e.mode){case"full":return l.createElement(l.Fragment,null,e.legend?l.createElement("label",null,e.legend):null,l.createElement("div",{className:"input voice-input ".concat(e.className),style:(0,o.Z)({height:e.height,width:e.width},e.style)},l.createElement("input",{className:"voice-input-text",type:"text",onKeyDown:q,onChange:j,placeholder:null!==e.placeholder?e.placeholder:_("enter-text"),value:G}),l.createElement(d.Z,{placement:e.tooltipPlacement,overlay:U},l.createElement(b,{onClick:M,className:O}))));case"status":return l.createElement(l.Fragment,null,e.legend?l.createElement("label",null,e.legend):null,l.createElement("div",{className:"voice-input-status-text ".concat(e.className),style:(0,o.Z)({height:e.height,width:e.width},e.style)},l.createElement("div",{className:"voice-input-status"},G),l.createElement(d.Z,{placement:"bottom",overlay:U},l.createElement(b,{onClick:M,className:O}))));case"microphone":return l.createElement(l.Fragment,null,e.legend?l.createElement("label",null,e.legend):null,l.createElement("div",{className:"voice-solo-microphone ".concat(e.className),style:(0,o.Z)({height:e.height,width:e.width},e.style)},l.createElement(d.Z,{placement:"bottom",overlay:U},l.createElement(b,{onClick:M,className:O}))));case"none":return null}};y.defaultProps={autorecord:!1,defaultValue:"",grammars:[],legend:"",mode:"full",maxAlternatives:1,onChange:function(){},onClick:function(){},onFinalText:function(){},onSegment:function(){},onRecordingStart:function(){},onRecordingStop:function(){},onSubmit:function(){},placeholder:null,remote:null,className:"",style:{},timeout:null,stopTooltip:null,startTooltip:null,tooltipPlacement:"left",width:500,height:36};var E=y},52734:function(e,t,n){e.exports=n.p+"static/media/83859f4256064fcaae00.svg"}}]);
//# sourceMappingURL=VoiceInput.b27235f8.chunk.js.map