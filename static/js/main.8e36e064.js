(self.webpackChunkisle_dashboard=self.webpackChunkisle_dashboard||[]).push([[179],{77703:function(e,t,n){"use strict";n.d(t,{MP:function(){return E},sY:function(){return w},GI:function(){return y},Qr:function(){return k}});var r=n(70885),a=n(1413),s=n(87757),c=n.n(s),u=n(15861),o=n(86072),i=n.n(o),p=n(10077),l=n.n(p),f=n(63834),d=n(41985),m=n(60299),v=l()("isle-dashboard:actions:authentication"),h=function(e){for(var t=e.ownedNamespaces,n=[],r=new Set,a=0;a<t.length;a++)r.has(t[a]._id)||(r.add(t[a]._id),n.push(t[a]));var s=e.enrolledNamespaces,c=[];r=new Set;for(var u=0;u<s.length;u++)r.has(s[u]._id)||(r.add(s[u]._id),c.push(s[u]));var o=n.length!==t.length||c.length!==s.length;return o&&(e.ownedNamespaces=n,e.enrolledNamespaces=c),v("Does user need sanitizing? "+o),[e,o]},g=function(e,t){try{return i().post(f.ZP+"/sanitize_user",{id:t.id})}catch(n){return(0,d.EG)(e,n),null}},E=function(e){return function(){var t=(0,u.Z)(c().mark((function t(n){var r;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g(e,n);case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},w=function(){var e=(0,u.Z)(c().mark((function e(t,n){var s,u,o,p,l,E;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v("Fetch user credentials..."),localStorage.setItem("ISLE_USER_"+f.ZP,JSON.stringify(n)),e.prev=2,e.next=5,i().post(f.ZP+"/credentials_dashboard",{id:n.id});case 5:return s=e.sent,(u=s.data).picture&&(u.picture=f.ZP+"/avatar/"+u.picture),u=(0,a.Z)((0,a.Z)({},n),u),o=h(u),p=(0,r.Z)(o,2),l=p[0],E=p[1],t((0,m.Pl)(u)),E&&g(t,n),e.abrupt("return",l);case 15:return e.prev=15,e.t0=e.catch(2),(0,d.EG)(t,e.t0),e.abrupt("return",null);case 19:case"end":return e.stop()}}),e,null,[[2,15]])})));return function(t,n){return e.apply(this,arguments)}}(),y=function(e){return function(){var t=(0,u.Z)(c().mark((function t(n){var r;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w(e,n);case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},b=function(){var e=(0,u.Z)(c().mark((function e(t,n){var r,a,s,u,o,p,l;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.eppn,a=n.name,s=n.affil,u=n.time,o=n.salt,p=n.token,e.prev=1,e.next=4,i().post(f.ZP+"/shibboleth",{eppn:r,name:a,affil:s,time:u,salt:o,token:p});case 4:return l=e.sent,t((0,m.zu)(l.data)),e.abrupt("return",l);case 9:return e.prev=9,e.t0=e.catch(1),(0,d.EG)(t,e.t0),e.abrupt("return",null);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}(),k=function(e){return function(){var t=(0,u.Z)(c().mark((function t(n){var r,a,s,u,o,i,p;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.eppn,a=n.name,s=n.affil,u=n.time,o=n.salt,i=n.token,t.next=3,b(e,{eppn:r,name:a,affil:s,time:u,salt:o,token:i});case 3:return p=t.sent,t.abrupt("return",p);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},58713:function(e,t,n){"use strict";n.d(t,{Wp:function(){return w},R9:function(){return y},k$:function(){return b},Yc:function(){return x},p6:function(){return N},CA:function(){return A},nm:function(){return D},YV:function(){return S}});var r=n(87757),a=n.n(r),s=n(15861),c=n(41488),u=n(86072),o=n.n(u),i=n(67403),p=n(10077),l=n.n(p),f=n(98695),d=n(63834),m=n(38315),v=n(41985),h=n(33357),g=l()("isle-dashboard:actions:cohorts");function E(e,t){return{type:h.G7,payload:{cohorts:e,user:t}}}var w=function(){var e=(0,s.Z)(a().mark((function e(t,n){var r,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o().get(d.ZP+"/get_enrollable_cohorts");case 3:r=e.sent,s=r.data.cohorts,g("Retrieved "+s.length+" cohorts..."),t(E(s,n)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),(0,v.EG)(t,e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),y=function(e){return function(){var t=(0,s.Z)(a().mark((function t(n){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w(e,n);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},b=function(){var e=(0,s.Z)(a().mark((function e(t,n){var r,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.namespaceID,e.prev=1,e.next=4,o().get(d.ZP+"/get_cohorts?"+i.stringify({namespaceID:r}));case 4:s=e.sent,t((a=s.data.cohorts,c=void 0,{type:h.$L,payload:{cohorts:a,user:c}})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),(0,v.EG)(t,e.t0);case 11:case"end":return e.stop()}var a,c}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}(),k=function(){var e=(0,s.Z)(a().mark((function e(t,n,r){var s,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o().post(d.ZP+"/add_to_cohort",{cohortID:n});case 3:s=e.sent,(0,v.wN)(t,{message:s.data.message,level:"success"}),t((u=void 0,i=void 0,p=void 0,l=void 0,u=(a=r).title,i=a.owners,p=a.description,l=a._id,{type:h.Kx,payload:{title:u,description:p,owners:i,_id:l}})),c=r.title,(0,m.tj)(t,c),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),(0,v.EG)(t,e.t0);case 13:case"end":return e.stop()}var a,u,i,p,l}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),x=function(e){return function(){var t=(0,s.Z)(a().mark((function t(n,r){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k(e,n,r);case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},_=function(){var e=(0,s.Z)(a().mark((function e(t,n,r){var s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o().post(d.ZP+"/delete_cohort",{_id:n});case 3:s=e.sent,(0,v.wN)(t,{message:s.data.message,level:"success"}),t(E(null)),r&&b(t,{namespaceID:r}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),(0,v.EG)(t,e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n,r){return e.apply(this,arguments)}}(),N=function(e){return function(){var t=(0,s.Z)(a().mark((function t(n,r){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_(e,n,r);case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},Z=function(){var e=(0,s.Z)(a().mark((function e(t,n,r){var s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o().post(d.ZP+"/create_cohort",n);case 3:s=e.sent,(0,v.wN)(t,{message:s.data.message,level:"success"}),t(E(null)),b(t,{namespaceID:r}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),(0,v.EG)(t,e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n,r){return e.apply(this,arguments)}}(),A=function(e){return function(){var t=(0,s.Z)(a().mark((function t(n,r){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Z(e,n,r);case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},T=function(){var e=(0,s.Z)(a().mark((function e(t,n,r){var s,u,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o().post(d.ZP+"/update_cohort",{cohort:n});case 3:s=e.sent,u=s.data.message,i=s.data.newEmails&&s.data.newEmails.length>0?{children:c.createElement("div",null,c.createElement("p",null,u),c.createElement("p",null,f.Z.t("common:email-invitations-sent")),c.createElement("p",null,s.data.newEmails.join("\n"))),level:"success",autoDismiss:0,dismissible:"button"}:{message:u,level:"success"},(0,v.wN)(t,i),t(E(null)),b(t,{namespaceID:r}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),(0,v.EG)(t,e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n,r){return e.apply(this,arguments)}}(),D=function(e){return function(){var t=(0,s.Z)(a().mark((function t(n,r){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T(e,n,r);case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},O=function(){var e=(0,s.Z)(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o().get(d.ZP+"/get_all_cohorts");case 3:n=e.sent,t((r=n.data.cohorts,{type:h.Rr,payload:{cohorts:r}})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),(0,v.EG)(t,e.t0);case 10:case"end":return e.stop()}var r}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),S=function(e){return(0,s.Z)(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O(e);case 2:case"end":return t.stop()}}),t)})))}},38315:function(e,t,n){"use strict";n.d(t,{ft:function(){return v},h7:function(){return g},OD:function(){return w},tj:function(){return y},Hy:function(){return b},Vo:function(){return x},Ao:function(){return N},q2:function(){return A},IH:function(){return D},kl:function(){return S},to:function(){return P},Ek:function(){return C},WU:function(){return R},SX:function(){return U},BO:function(){return W},Qj:function(){return J}});var r=n(87757),a=n.n(r),s=n(15861),c=n(86072),u=n.n(c),o=n(67403),i=n(63834),p=n(18306),l=n(41985),f=n(33357);function d(e){return{type:f.Nh,payload:{lessonName:e}}}function m(e,t){return{type:f.lo,payload:{lessonName:e,props:t}}}function v(e){var t=e.lessons,n=e.namespaceName;return{type:f.qv,payload:{lessons:t,namespaceName:n}}}var h=function(){var e=(0,s.Z)(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u().get(i.ZP+"/get_public_lessons");case 3:n=e.sent,t((r=n.data.lessons,{type:f.QI,payload:{lessons:r}})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),(0,l.EG)(t,e.t0);case 10:case"end":return e.stop()}var r}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),g=function(e){return(0,s.Z)(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h(e);case 2:case"end":return t.stop()}}),t)})))},E=function(){var e=(0,s.Z)(a().mark((function e(t,n){var r,s,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.lessonName,s=n.namespaceName,e.prev=1,e.next=4,u().get(i.ZP+"/get_isle_file?"+o.stringify({lessonName:r,namespaceName:s}));case 4:return c=e.sent,e.abrupt("return",c.data);case 8:return e.prev=8,e.t0=e.catch(1),(0,l.EG)(t,e.t0),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}(),w=function(e){return function(){var t=(0,s.Z)(a().mark((function t(n){var r,s,c;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.lessonName,s=n.namespaceName,t.next=3,E(e,{lessonName:r,namespaceName:s});case 3:return c=t.sent,t.abrupt("return",c);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},y=function(){var e=(0,s.Z)(a().mark((function e(t,n){var r,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=13;break}return e.prev=1,e.next=4,u().get(i.ZP+"/get_lessons?"+o.stringify({namespaceName:n}));case 4:r=e.sent,s=(s=r.data.lessons).map((function(e,t){return e.colorIndex=t%20,e.url=i.ZP+"/"+n+"/"+e.title,e.lockUntil&&(e.lockUntil=new Date(e.lockUntil.time)),e.createdAt||(e.createdAt=new Date(0).toLocaleString()),e.updatedAt||(e.updatedAt=e.createdAt),e})),t(v({lessons:s,namespaceName:n})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),(0,l.EG)(t,e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}(),b=function(e){return function(){var t=(0,s.Z)(a().mark((function t(n){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y(e,n);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},k=function(){var e=(0,s.Z)(a().mark((function e(t,n){var r,s,c,o,p;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.sourceName,s=n.target,c=n.targetName,o=n.source,!(r&&s&&o)){e.next=14;break}return e.prev=2,e.next=5,u().post(i.ZP+"/copy_lesson",{target:s,source:o,sourceName:r,targetName:c});case 5:return p=e.sent,(0,l.wN)(t,{message:p.data.message,level:"success"}),e.abrupt("return",p);case 10:return e.prev=10,e.t0=e.catch(2),(0,l.EG)(t,e.t0),e.abrupt("return",e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n){return e.apply(this,arguments)}}(),x=function(e){return function(){var t=(0,s.Z)(a().mark((function t(n){var r,s,c,u;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.sourceName,s=n.target,c=n.targetName,u=n.source,t.next=3,k(e,{sourceName:r,target:s,targetName:c,source:u});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},_=function(){var e=(0,s.Z)(a().mark((function e(t,n){var r,s,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.target,s=n.source,e.prev=1,e.next=4,u().post(i.ZP+"/copy_namespace_lessons",{target:r,source:s});case 4:return c=e.sent,(0,l.wN)(t,{message:c.data.message,level:"success"}),e.abrupt("return",c);case 9:return e.prev=9,e.t0=e.catch(1),(0,l.EG)(t,e.t0),e.abrupt("return",e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}(),N=function(e){return function(){var t=(0,s.Z)(a().mark((function t(n){var r,s,c;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.target,s=n.source,t.next=3,_(e,{target:r,source:s});case 3:return c=t.sent,t.abrupt("return",c);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Z=function(){var e=(0,s.Z)(a().mark((function e(t,n){var r,s,c,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.lessonName,(s=n.namespaceName)&&r){e.next=5;break}return c=new Error("Missing `namespaceName` or `lessonName`."),(0,l.EG)(t,c),e.abrupt("return",c);case 5:return e.prev=5,e.next=8,u().post(i.ZP+"/delete_lesson",{namespaceName:s,lessonName:r});case 8:return o=e.sent,t(d(r)),(0,l.wN)(t,{message:o.data.message,level:"success"}),e.abrupt("return",o);case 14:return e.prev=14,e.t0=e.catch(5),(0,l.EG)(t,e.t0),e.abrupt("return",e.t0);case 18:case"end":return e.stop()}}),e,null,[[5,14]])})));return function(t,n){return e.apply(this,arguments)}}(),A=function(e){return function(){var t=(0,s.Z)(a().mark((function t(n){var r,s;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.lessonName,s=n.namespaceName,t.next=3,Z(e,{lessonName:r,namespaceName:s});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},T=function(){var e=(0,s.Z)(a().mark((function e(t,n){var r,s,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.lessonName,s=n.namespaceName,e.prev=1,e.next=4,u().post(i.ZP+"/show_lesson",{namespaceName:s,lessonName:r});case 4:c=e.sent,(0,l.wN)(t,{message:c.data.message,level:"success"}),t(m(r,{public:!0})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),(0,l.EG)(t,e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}(),D=function(e){return function(){var t=(0,s.Z)(a().mark((function t(n){var r,s;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.lessonName,s=n.namespaceName,t.next=3,T(e,{lessonName:r,namespaceName:s});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},O=function(){var e=(0,s.Z)(a().mark((function e(t,n){var r,s,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.lessonName,s=n.namespaceName,e.prev=1,e.next=4,u().post(i.ZP+"/hide_lesson",{namespaceName:s,lessonName:r});case 4:c=e.sent,(0,l.wN)(t,{message:c.data.message,level:"success"}),t(m(r,{public:!1})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),(0,l.EG)(t,e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}(),S=function(e){return function(){var t=(0,s.Z)(a().mark((function t(n){var r,s;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.lessonName,s=n.namespaceName,t.next=3,O(e,{lessonName:r,namespaceName:s});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},I=function(){var e=(0,s.Z)(a().mark((function e(t,n){var r,s,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.lessonName,s=n.namespaceName,e.prev=1,e.next=4,u().post(i.ZP+"/activate_lesson?",{namespaceName:s,lessonName:r});case 4:c=e.sent,(0,l.wN)(t,{message:c.data.message,level:"success"}),t(m(r,{active:!0})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),(0,l.EG)(t,e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}(),P=function(e){return function(){var t=(0,s.Z)(a().mark((function t(n){var r,s;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.lessonName,s=n.namespaceName,t.next=3,I(e,{lessonName:r,namespaceName:s});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},L=function(){var e=(0,s.Z)(a().mark((function e(t,n){var r,s,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.lessonName,s=n.namespaceName,e.prev=1,e.next=4,u().post(i.ZP+"/deactivate_lesson",{namespaceName:s,lessonName:r});case 4:c=e.sent,(0,l.wN)(t,{message:c.data.message,level:"success"}),t(m(r,{active:!1})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),(0,l.EG)(t,e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}(),C=function(e){return function(){var t=(0,s.Z)(a().mark((function t(n){var r,s;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.lessonName,s=n.namespaceName,t.next=3,L(e,{lessonName:r,namespaceName:s});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},j=function(){var e=(0,s.Z)(a().mark((function e(t,n){var r,s,c,o,f,m,v,h;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.lessonName,s=n.namespaceName,c=n.newTitle,o=n.newDescription,f=n.lockUntil,m=n.template,!s||!r){e.next=18;break}return e.prev=2,v={namespaceName:s,lessonName:r,newTitle:c,newDescription:o,lockUntil:f},(0,p.isPrimitive)(m)&&(v.template=m),e.next=7,u().post(i.ZP+"/update_lesson",v);case 7:return h=e.sent,t(d(r)),(0,l.wN)(t,{message:h.data.message,level:"success"}),y(t,s),e.abrupt("return",!0);case 14:return e.prev=14,e.t0=e.catch(2),(0,l.EG)(t,e.t0),e.abrupt("return",!1);case 18:return e.abrupt("return",!1);case 19:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(t,n){return e.apply(this,arguments)}}(),R=function(e){return function(){var t=(0,s.Z)(a().mark((function t(n){var r,s,c,u,o,i,p;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.lessonName,s=n.namespaceName,c=n.newTitle,u=n.newDescription,o=n.lockUntil,i=n.template,t.next=3,j(e,{lessonName:r,namespaceName:s,newTitle:c,newDescription:u,lockUntil:o,template:i});case 3:return p=t.sent,t.abrupt("return",p);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},G=function(){var e=(0,s.Z)(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u().get(i.ZP+"/get_all_lessons");case 3:n=e.sent,t((r=n.data.lessons,{type:f.oJ,payload:{lessons:r}})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),(0,l.EG)(t,e.t0);case 10:case"end":return e.stop()}var r}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),U=function(e){return(0,s.Z)(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,G(e);case 2:case"end":return t.stop()}}),t)})))},F=function(){var e=(0,s.Z)(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u().get(i.ZP+"/get_template_lessons");case 3:n=e.sent,t((r=n.data.lessons,{type:f.LJ,payload:{templateLessons:r}})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),(0,l.EG)(t,e.t0);case 10:case"end":return e.stop()}var r}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),W=function(e){return(0,s.Z)(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,F(e);case 2:case"end":return t.stop()}}),t)})))},M=function(){var e=(0,s.Z)(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u().get(i.ZP+"/get_open_rooms");case 3:n=e.sent,t((r=n.data.rooms,{type:f.tM,payload:{rooms:r}})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),(0,l.EG)(t,e.t0);case 10:case"end":return e.stop()}var r}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),J=function(e){return(0,s.Z)(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M(e);case 2:case"end":return t.stop()}}),t)})))}},41985:function(e,t,n){"use strict";n.d(t,{wN:function(){return a},pP:function(){return s},EG:function(){return c}});var r=n(33357);function a(e,t){e({type:r.Dv,payload:t})}var s=function(e){return function(t){a(e,t)}};function c(e,t){var n;t.response?(n="Server response: "+t.response.status+".\n",n+=t.response.data):n=t.message,e({type:r.xe,payload:n})}},36387:function(e,t,n){"use strict";n.d(t,{px:function(){return d},SK:function(){return v},Pj:function(){return g},qn:function(){return w},XE:function(){return b},Jw:function(){return x}});var r=n(87757),a=n.n(r),s=n(15861),c=(n(41488),n(86072)),u=n.n(c),o=n(63834),i=n(98695),p=n(41985),l=n(33357),f=function(){var e=(0,s.Z)(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u().get(o.ZP+"/get_settings");case 3:n=e.sent,t({type:l.pV,payload:n.data}),e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",(0,p.EG)(t,e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),d=function(e){return(0,s.Z)(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f(e);case 2:case"end":return t.stop()}}),t)})))},m=function(){var e=(0,s.Z)(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u().get(o.ZP+"/get_public_settings");case 3:n=e.sent,t({type:l.RJ,payload:n.data}),e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",(0,p.EG)(t,e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),v=function(e){return(0,s.Z)(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m(e);case 2:case"end":return t.stop()}}),t)})))},h=function(){var e=(0,s.Z)(a().mark((function e(t,n,r){var s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u().post(o.ZP+"/update_settings",{name:n,value:r});case 3:s=e.sent,(0,p.wN)(t,{title:i.Z.t("common:updated"),message:s.data.message,level:"success"}),t({type:l.TH,payload:s.data}),e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",(0,p.EG)(t,e.t0));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n,r){return e.apply(this,arguments)}}(),g=function(e){return function(){var t=(0,s.Z)(a().mark((function t(n,r){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h(e,n,r);case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},E=function(){var e=(0,s.Z)(a().mark((function e(t,n){var r,s,c,f,d;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.language,s=n.ns,c=n.key,f=n.value,e.prev=1,e.next=4,u().post(o.ZP+"/add_custom_translation",{language:r,ns:s,key:c,value:f});case 4:return d=e.sent,(0,p.wN)(t,{title:i.Z.t("common:updated"),message:d.data.message,level:"success"}),t({type:l.Ki,payload:d.data}),e.abrupt("return",d);case 10:return e.prev=10,e.t0=e.catch(1),(0,p.EG)(t,e.t0),e.abrupt("return",e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}(),w=function(e){return function(){var t=(0,s.Z)(a().mark((function t(n){var r,s,c,u,o;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.language,s=n.ns,c=n.key,u=n.value,t.next=3,E(e,{language:r,ns:s,key:c,value:u});case 3:return o=t.sent,t.abrupt("return",o);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},y=function(){var e=(0,s.Z)(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u().get(o.ZP+"/get_translations");case 3:n=e.sent,t({type:l.oi,payload:n.data}),e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",(0,p.EG)(t,e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),b=function(e){return(0,s.Z)(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y(e);case 2:case"end":return t.stop()}}),t)})))},k=function(){var e=(0,s.Z)(a().mark((function e(t,n){var r,s,c,f;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.language,s=n.ns,c=n.key,e.prev=1,e.next=4,u().post(o.ZP+"/remove_custom_translation",{language:r,ns:s,key:c});case 4:return f=e.sent,(0,p.wN)(t,{title:i.Z.t("common:removed"),message:f.data.message,level:"success"}),t({type:l.Ki,payload:f.data}),e.abrupt("return",f);case 10:return e.prev=10,e.t0=e.catch(1),(0,p.EG)(t,e.t0),e.abrupt("return",e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}(),x=function(e){return function(){var t=(0,s.Z)(a().mark((function t(n){var r,s,c,u;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.language,s=n.ns,c=n.key,t.next=3,k(e,{language:r,ns:s,key:c});case 3:return u=t.sent,t.abrupt("return",u);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},60299:function(e,t,n){"use strict";n.d(t,{Pl:function(){return w},zu:function(){return y},fP:function(){return k},Jv:function(){return _},L$:function(){return Z},UA:function(){return T},m8:function(){return O},Vz:function(){return I},vi:function(){return L},r4:function(){return C},IJ:function(){return R},J3:function(){return U},Dv:function(){return F},Pt:function(){return M},b0:function(){return V},UG:function(){return H},WA:function(){return B},VA:function(){return q}});var r=n(1413),a=n(87757),s=n.n(a),c=n(15861),u=n(86072),o=n.n(u),i=n(10077),p=n.n(i),l=n(67403),f=n(98695),d=n(63834),m=n(77703),v=n(58713),h=n(41985),g=n(33357),E=p()("isle-dashboard:actions:user");function w(e){return{type:g.Fw,payload:{email:e.email,verifiedEmail:e.verifiedEmail,name:e.name,enrolledNamespaces:e.enrolledNamespaces,ownedNamespaces:e.ownedNamespaces,organization:e.organization,writeAccess:e.writeAccess,administrator:e.administrator,lessonData:e.lessonData,picture:e.picture,createdAt:e.createdAt,updatedAt:e.updatedAt,score:e.score,spentTime:e.spentTime,licensed:e.licensed,customFields:e.customFields,availableCustomFields:e.availableCustomFields,twoFactorAuth:e.twoFactorAuth}}}function y(e){var t=e.token,n=e.id;return{type:g.CJ,payload:{token:t,id:n}}}var b=function(){var e=(0,c.Z)(s().mark((function e(t){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o().get(d.ZP+"/get_users");case 3:n=e.sent,t({type:g.fo,payload:{users:n.data.users}}),e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",(0,h.EG)(t,e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),k=function(e){return(0,c.Z)(s().mark((function t(){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b(e);case 2:case"end":return t.stop()}}),t)})))},x=function(){var e=(0,c.Z)(s().mark((function e(t,n){var r,a,c,u,i,p;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.id,a=n.password,E("Impersonating user with id "+r),e.prev=2,e.next=5,o().post(d.ZP+"/impersonate",{id:r,password:a});case 5:return c=e.sent,e.next=8,(0,m.sY)(t,{id:c.data.id});case 8:u=e.sent,i={token:c.data.token,id:c.data.id},p="ISLE_USER_"+d.ZP,localStorage.setItem(p,JSON.stringify(i)),u&&(0,v.Wp)(t,u),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(2),(0,h.EG)(t,e.t0);case 18:case"end":return e.stop()}}),e,null,[[2,15]])})));return function(t,n){return e.apply(this,arguments)}}(),_=function(e){return function(){var t=(0,c.Z)(s().mark((function t(n){var r,a;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.id,a=n.password,t.next=3,x(e,{id:r,password:a});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},N=function(){var e=(0,c.Z)(s().mark((function e(t,n){var r,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.id,e.prev=1,e.next=4,o().post(d.ZP+"/delete_user",{id:r});case 4:a=e.sent,(0,h.wN)(t,{title:f.Z.t("common:deleted"),message:a.data.message,level:"success"}),t({type:g.Gp,payload:{id:r}}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),(0,h.EG)(t,e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}(),Z=function(e){return function(){var t=(0,c.Z)(s().mark((function t(n){var r;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.id,t.next=3,N(e,{id:r});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},A=function(){var e=(0,c.Z)(s().mark((function e(t,n){var r,a,c,u,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.avatarData,a=n.thumbnailData,e.prev=1,e.next=4,o().post(d.ZP+"/upload_profile_pic",r);case 4:return c=e.sent,u=c.data.message,i=c.data.filename,i=d.ZP+"/avatar/"+i,t((s=i,{type:g.bM,payload:{picture:s}})),e.next=11,o().post(d.ZP+"/upload_thumbnail_pic",a);case 11:c=e.sent,(0,h.wN)(t,{title:f.Z.t("profile-pic-title"),message:u,level:"success",position:"tl"}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),(0,h.EG)(t,e.t0);case 18:case"end":return e.stop()}var s}),e,null,[[1,15]])})));return function(t,n){return e.apply(this,arguments)}}(),T=function(e){return function(){var t=(0,c.Z)(s().mark((function t(n){var r,a;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.avatarData,a=n.thumbnailData,t.next=3,A(e,{avatarData:r,thumbnailData:a});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},D=function(){var e=(0,c.Z)(s().mark((function e(t,n){var r,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.writeAccessToken,e.prev=1,e.next=4,o().post(d.ZP+"/set_write_access",{token:r});case 4:return a=e.sent,t({type:g.tl}),(0,h.wN)(t,{message:a.data.message+" You can now create your own courses on ISLE and have access to the gallery of public lessons.",level:"success",autoDismiss:10}),e.abrupt("return",!0);case 10:return e.prev=10,e.t0=e.catch(1),(0,h.EG)(t,e.t0),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}(),O=function(e){return function(){var t=(0,c.Z)(s().mark((function t(n){var r,a;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.writeAccessToken,t.next=3,D(e,{writeAccessToken:r});case 3:return a=t.sent,t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},S=function(){var e=(0,c.Z)(s().mark((function e(t,n){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.email,e.prev=1,e.next=4,o().get(d.ZP+"/forgot_password?"+l.stringify({email:r}));case 4:(0,h.wN)(t,{message:"Check your email inbox for a link to choose a new password.",level:"success"}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),(0,h.EG)(t,e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,n){return e.apply(this,arguments)}}(),I=function(e){return function(){var t=(0,c.Z)(s().mark((function t(n){var r;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.email,t.next=3,S(e,{email:r});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},P=function(){var e=(0,c.Z)(s().mark((function e(t,n){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o().post(d.ZP+"/update_user",n);case 3:r=e.sent,t((a={name:n.name,organization:n.organization,customFields:n.customFields},s=void 0,c=void 0,s=a.name,c=a.organization,{type:g.hO,payload:{name:s,organization:c}})),(0,h.wN)(t,{message:r.data.message,level:"success"}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),(0,h.EG)(t,e.t0);case 11:case"end":return e.stop()}var a,s,c}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}(),L=function(e){return function(){var t=(0,c.Z)(s().mark((function t(n){var r,a,c,u;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.name,a=n.organization,c=n.password,u=n.customFields,t.next=3,P(e,{name:r,organization:a,password:c,customFields:u});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},C=function(e){return o().post(d.ZP+"/create_user",e)},j=function(){var e=(0,c.Z)(s().mark((function e(t,n){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o().post(d.ZP+"/login",n);case 2:return"finish-login-via-tfa"===(r=e.sent).data.message?t((a=r.data,s=void 0,c=void 0,s=a.email,c=a.password,{type:g.Jb,payload:{email:s,password:c}})):t(y(r.data)),e.abrupt("return",r);case 5:case"end":return e.stop()}var a,s,c}),e)})));return function(t,n){return e.apply(this,arguments)}}(),R=function(e){return function(){var t=(0,c.Z)(s().mark((function t(n){var r;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j(e,n);case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},G=function(){var e=(0,c.Z)(s().mark((function e(t,n){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o().post(d.ZP+"/login_tfa",n);case 3:return r=e.sent,t(y(r.data)),e.abrupt("return",r);case 8:return e.prev=8,e.t0=e.catch(0),(0,h.EG)(t,e.t0),e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}(),U=function(e){return function(){var t=(0,c.Z)(s().mark((function t(n){var r;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,G(e,n);case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},F=function(e){return function(t){!function(e,t){e(w(t))}(e,t)}},W=function(e){E("Logging out the current user..."),localStorage.removeItem("ISLE_USER_"+d.ZP),e({type:g.E7})},M=function(e){return function(){W(e)}},J=function(){var e=(0,c.Z)(s().mark((function e(t,n){var a,c,u;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o().get(d.ZP+"/user_update_check?"+l.stringify({updatedAt:n.updatedAt}));case 3:if(a=e.sent,E("Received response: "+a.data),a.data.hasMostRecent){e.next=14;break}return e.next=8,o().post(d.ZP+"/credentials_dashboard",{id:n.id});case 8:c=e.sent,(u=c.data).picture&&(u.picture=d.ZP+"/avatar/"+u.picture),u=(0,r.Z)({id:n.id,token:n.token},u),E("Updated user data..."),t(w(u));case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),(0,h.EG)(t,e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t,n){return e.apply(this,arguments)}}(),V=function(e){return function(){var t=(0,c.Z)(s().mark((function t(n){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,J(e,n);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},H=function(){var e=(0,c.Z)(s().mark((function e(t){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o().post(d.ZP+"/confirm_email",{token:t});case 3:return n=e.sent,e.abrupt("return",n.data.message);case 7:if(e.prev=7,e.t0=e.catch(0),!e.t0.response||!e.t0.response.data){e.next=11;break}return e.abrupt("return",e.t0.response.data);case 11:return e.abrupt("return",e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=(0,c.Z)(s().mark((function e(t,n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o().post(d.ZP+"/resend_confirm_email");case 3:(0,h.wN)(t,{title:"Email sent",message:f.Z.t("common:verification-email-sent"),level:"success",position:"tl"}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),(0,h.EG)(t,e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),B=function(e){return function(){var t=(0,c.Z)(s().mark((function t(n){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z(e,n);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},K=function(){var e=(0,c.Z)(s().mark((function e(t,n){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o().post(d.ZP+"/admin_update_user",n);case 3:r=e.sent,(0,h.wN)(t,{message:r.data.message,level:"success"}),t((a=n,{type:g.Wh,payload:a})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),(0,h.EG)(t,e.t0);case 11:case"end":return e.stop()}var a}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}(),q=function(e){return function(){var t=(0,c.Z)(s().mark((function t(n){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,K(e,n);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},31835:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var r=n(87757),a=n.n(r),s=n(15861),c=n(15671),u=n(43144),o=n(60136),i=n(29388),p=n(41488),l=function(){return p.createElement("div",{className:"sk-cube-grid"},p.createElement("div",{className:"sk-cube sk-cube1"}),p.createElement("div",{className:"sk-cube sk-cube2"}),p.createElement("div",{className:"sk-cube sk-cube3"}),p.createElement("div",{className:"sk-cube sk-cube4"}),p.createElement("div",{className:"sk-cube sk-cube5"}),p.createElement("div",{className:"sk-cube sk-cube6"}),p.createElement("div",{className:"sk-cube sk-cube7"}),p.createElement("div",{className:"sk-cube sk-cube8"}),p.createElement("div",{className:"sk-cube sk-cube9"}))};var f=function(e){var t=function(t){(0,o.Z)(f,t);var n,r=(0,i.Z)(f);function f(e){var t;return(0,c.Z)(this,f),(t=r.call(this,e)).state={component:null},t}return(0,u.Z)(f,[{key:"componentDidMount",value:(n=(0,s.Z)(a().mark((function t(){var n,r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e();case 2:n=t.sent,r=n.default,this.setState({component:r});case 5:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"render",value:function(){var e=this.state.component;return e?p.createElement(e,this.props):p.createElement(l,null)}}]),f}(p.Component);return t}},33357:function(e,t,n){"use strict";n.d(t,{Kx:function(){return r},xe:function(){return a},Dv:function(){return s},$8:function(){return c},tl:function(){return u},WF:function(){return o},H0:function(){return i},Hs:function(){return p},uv:function(){return l},_R:function(){return f},NH:function(){return d},pA:function(){return m},ke:function(){return v},CH:function(){return h},jm:function(){return g},Rm:function(){return E},Nh:function(){return w},s_:function(){return y},SZ:function(){return b},Gp:function(){return k},wd:function(){return x},oF:function(){return _},wx:function(){return N},E4:function(){return Z},rh:function(){return A},S5:function(){return T},Rr:function(){return D},ci:function(){return O},oJ:function(){return S},XM:function(){return I},Qd:function(){return P},MI:function(){return L},fM:function(){return C},rq:function(){return j},W1:function(){return R},C3:function(){return G},oi:function(){return U},Te:function(){return F},oP:function(){return W},Pq:function(){return M},tM:function(){return J},pV:function(){return V},RJ:function(){return H},LJ:function(){return z},Bu:function(){return B},fo:function(){return K},cv:function(){return q},gH:function(){return X},i9:function(){return $},Ze:function(){return Q},kn:function(){return Y},aM:function(){return ee},CJ:function(){return te},Ug:function(){return ne},Jb:function(){return re},Z9:function(){return ae},$L:function(){return se},qv:function(){return ce},QI:function(){return ue},X5:function(){return oe},mI:function(){return ie},wL:function(){return pe},JB:function(){return le},B2:function(){return fe},kO:function(){return de},lo:function(){return me},Rg:function(){return ve},Fw:function(){return he},E7:function(){return ge},hO:function(){return Ee},Wh:function(){return we},bM:function(){return ye},eu:function(){return be},Py:function(){return ke},TH:function(){return xe},LX:function(){return _e},Ki:function(){return Ne},G7:function(){return Ze}});var r="ADD_ENROLLED_NAMESPACE",a="ADD_ERROR_NOTIFICATION",s="ADD_NOTIFICATION",c="APPEND_CREATED_NAMESPACE",u="AUTHENTICATED",o="CHANGED_NAMESPACE",i="CREATED_ANNOUNCEMENT",p="CREATED_CUSTOM_FIELD",l="CREATED_BACKUP",f="CREATED_ROLE",d="CREATED_TICKET",m="DELETED_BACKUP",v="DELETED_CURRENT_NAMESPACE",h="DELETED_CUSTOM_FIELD",g="DELETED_EVENT",E="DELETED_FILE",w="DELETED_LESSON",y="DELETED_ROLE",b="DELETED_TICKET",k="DELETED_USER",x="DELETED_ANNOUNCEMENT",_="DISABLED_TFA",N="EDITED_ANNOUNCEMENT",Z="ENABLED_TFA",A="FIELD_POSITION_DECREMENTED",T="FIELD_POSITION_INCREMENTED",D="GET_ALL_COHORTS",O="GET_ALL_FILES",S="GET_ALL_LESSONS",I="GET_ALL_NAMESPACES",P="GET_ALL_ROLES",L="GET_BACKUPS",C="GET_EVENTS",j="GET_ALL_TICKETS",R="GET_COURSE_TICKETS",G="GET_CUSTOM_FIELDS",U="GET_CUSTOM_TRANSLATIONS",F="GET_OVERVIEW_STATISTICS",W="GET_HISTORICAL_OVERVIEW_STATISTICS",M="GET_REQUEST_STATISTICS",J="GET_ROOMS",V="GET_SETTINGS",H="GET_SETTINGS_PUBLIC",z="GET_TEMPLATE_LESSONS",B="GET_TFA_QRCODE",K="GET_USERS",q="GET_USER_TICKETS",X="LESSON_ORDER",$="LESSON_ORDER_DIRECTION",Q="RECEIVED_FILES",Y="RECEIVED_LICENSE",ee="RECEIVED_NAMESPACE_FILES",te="RECEIVED_TOKEN",ne="REMOVED_LICENSE",re="REQUEST_TFA",ae="RETRIEVED_BADGES",se="RETRIEVED_COHORTS",ce="RETRIEVED_LESSONS",ue="RETRIEVED_PUBLIC_LESSONS",oe="SEARCH_PHRASE_SET",ie="TICKET_CLOSED",pe="TICKET_OPENED",le="TICKET_MESSAGE_ADDED",fe="TICKET_PRIORITY_UPDATED",de="TRIGGERED_EVENT",me="UPDATED_LESSON",ve="UPDATED_OWNED_NAMESPACE",he="LOGGED_IN",ge="LOGGED_OUT",Ee="USER_UPDATED",we="USER_UPDATED_BY_ADMIN",ye="USER_PICTURE_MODIFIED",be="USER_RECEIVED_BADGES",ke="UPDATED_ROLE",xe="UPDATED_SETTINGS",_e="UPDATED_STUDENT_PROGRESS",Ne="UPDATED_TRANSLATIONS",Ze="RETRIEVED_ENROLLABLE_COHORTS"},63834:function(e,t,n){"use strict";n.d(t,{ZP:function(){return r}});JSON.parse('{"$":"https://optum.kymetis.com"}').$;var r=window.location.origin},605:function(e,t,n){"use strict";n.d(t,{eC:function(){return p},Yy:function(){return l}});var r=n(86072),a=n.n(r),s=n(24868),c=n(96797);a().interceptors.request.use((function(e){e.headers["Accept-Language"]=s.Z.language;var t=c.h.getState().user.token;return t&&(e.headers.Authorization="JWT ".concat(t)),e}));var u=a().create();u.interceptors.request.use((function(e){e.headers["Accept-Language"]=s.Z.language;var t=c.h.getState(),n=t.user.token;n&&(e.headers.Authorization="JWT ".concat(n)),e.headers["X-Context-Level"]="namespace";var r=e.data.namespaceID||e.params.namespaceID||t.namespace._id;return e.headers["X-Context-Target"]=r,e}));a().create();var o=a().create();o.interceptors.request.use((function(e){e.headers["Accept-Language"]=s.Z.language;var t=c.h.getState(),n=t.user.token;n&&(e.headers.Authorization="JWT ".concat(n)),e.headers["X-Context-Level"]="lesson";var r=e.data.lessonID||e.params.lessonID;return r+=t.namespace._id,e.headers["X-Context-Target"]=r,e}));var i=a().create();i.interceptors.request.use((function(e){e.headers["Accept-Language"]=s.Z.language;var t=c.h.getState().user.token;return t&&(e.headers.Authorization="JWT ".concat(t)),e.headers["X-Context-Level"]="global",e.headers["X-Context-Target"]=!0,e}));var p=u,l=i},24868:function(e,t,n){"use strict";var r=n(98695),a=n(6244),s=n(71294),c=n(23543),u=n.n(c),o=n(89044),i=n(63834),p=n(96797);r.Z.use(o.Z).use(s.Z).use(a.Db).init({debug:!1,lng:localStorage.getItem("i18nextLng")||"en",fallbackLng:"en",backend:{backends:[u(),u(),u()],backendOptions:[{loadPath:"./locales/{{lng}}/{{ns}}.json"},{loadPath:i.ZP+"/locales/{{lng}}/{{ns}}.json"},{loadPath:"https://cdn.jsdelivr.net/npm/@isle-project/locales/components/{{ns}}/{{lng}}.json"}]},react:{useSuspense:!1},interpolation:{escapeValue:!1}}),r.Z.store.on("added",(function(e,t){var n=p.h.getState().translations[e][t];if(n){var a=Object.keys(n);r.Z.store.data[e][t+"_ORIGINAL"]||(r.Z.store.data[e][t+"_ORIGINAL"]={});for(var s=0;s<a.length;s++)r.Z.store.data[e][t+"_ORIGINAL"][a[s]]=r.Z.store.data[e][t][a[s]],r.Z.store.data[e][t][a[s]]=n[a[s]]}})),t.Z=r.Z},96797:function(e,t,n){"use strict";n.d(t,{h:function(){return at}});n(60354);var r=n(41488),a=n(15272),s=n(63833),c=n.n(s),u=n(29236),o=n(30754),i=n(29503),p=n(86358),l=n(59392),f=n(98203),d=n(89868),m=n(1413),v=n(67583),h=n.n(v),g=n(33357),E={cohorts:[],events:[],files:[],lessons:[],lessonsMap:{},namespaces:[],roles:[],rooms:[],tickets:[],users:[],statistics:{},requestStatistics:[],historicalStatistics:[],backups:[],license:null,settings:{}};function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g.fo:var n=t.payload.users;return n=n.map((function(e){for(var t=h()(e.lessonData),n=0,r=0,a=0;a<t.length;a++){var s=t[a];n+=e.lessonData[s].chatMessages;for(var c=h()(e.lessonData[s].actionTypes),u=0;u<c.length;u++)r+=e.lessonData[s].actionTypes[c[u]]}return e.nActions=r,e.chatMessages=n,e.createdAt=new Date(e.createdAt),e.updatedAt=new Date(e.updatedAt),e})),Object.assign({},e,{users:n});case g.Rr:var r=t.payload.cohorts;return r=r.map((function(e){return e.startDate=new Date(e.startDate),e.endDate=new Date(e.endDate),e})),Object.assign({},e,{cohorts:r});case g.ci:var a=t.payload.files;return a=a.map((function(e){return e.updatedAt=new Date(e.updatedAt),e})),Object.assign({},e,{files:a});case g.Rm:var s=e.files.filter((function(e){return e._id!==t.payload.id}));return Object.assign({},e,{files:s});case g.oJ:var c=t.payload.lessons,u=(0,m.Z)({},e.lessonsMap);return c=c.map((function(e){return e.createdAt=new Date(e.createdAt),e.updatedAt=new Date(e.updatedAt),u[e._id]=e.title,e})),Object.assign({},e,{lessons:c,lessonsMap:u});case g.XM:var o=t.payload.namespaces;return o=o.map((function(e){return e.createdAt=new Date(e.createdAt),e.updatedAt=new Date(e.updatedAt),e})),Object.assign({},e,{namespaces:o});case g.fM:var i=t.payload.events;return i=i.map((function(e){return e.time=new Date(e.time),e})),Object.assign({},e,{events:i});case g.tM:var p=t.payload.rooms;return p=p.map((function(e){return e.startTime=new Date(e.startTime),e})),Object.assign({},e,{rooms:p});case g.jm:var l=e.events.filter((function(e){return e._id!==t.payload.id}));return Object.assign({},e,{events:l});case g.Gp:var f=e.users.filter((function(e){return e._id!==t.payload.id}));return Object.assign({},e,{users:f});case g.kO:for(var d=e.events.slice(),v=0;v<d.length;v++)d[v]._id===t.payload.id&&(d[v].done=!0);return Object.assign({},e,{events:d});case g.Wh:for(var w=e.users.slice(),y=0;y<w.length;y++){var b=w[y];if(b._id===t.payload.id)for(var k=h()(t.payload),x=0;x<k.length;x++){var _=k[x];"id"!==_&&(b[_]=t.payload[_])}}return Object.assign({},e,{users:w});case g.Te:return Object.assign({},e,{statistics:t.payload.statistics});case g.rq:var N=t.payload.tickets;return N=N.map((function(e){return e.createdAt=new Date(e.createdAt),e.updatedAt=new Date(e.updatedAt),e})),Object.assign({},e,{tickets:N});case g.SZ:var Z=e.tickets.filter((function(e){return e._id!==t.payload.id}));return Object.assign({},e,{tickets:Z});case g.wL:var A=e.tickets.map((function(e){return e._id===t.payload.id&&(e.done=!1),e}));return Object.assign({},e,{tickets:A});case g.B2:var T=e.tickets.map((function(e){return e._id===t.payload.id&&(e.priority=t.payload.priority),e}));return Object.assign({},e,{tickets:T});case g.mI:var D=e.tickets.map((function(e){return e._id===t.payload.id&&(e.done=!0),e}));return Object.assign({},e,{tickets:D});case g.JB:var O=e.tickets.map((function(e){if(e._id===t.payload.id){var n=t.payload.message;n.picture=n.picture.substring(n.picture.lastIndexOf("/")+1),e.messages.unshift(n)}return e}));return Object.assign({},e,{tickets:O});case g.kn:return Object.assign({},e,{license:t.payload.license});case g.Ug:return Object.assign({},e,{license:null});case g.oP:var S=t.payload.statistics.map((function(e){return e.createdAt=e.createdAt.substring(0,e.createdAt.indexOf("T")),e}));return Object.assign({},e,{historicalStatistics:S});case g.Pq:return Object.assign({},e,{requestStatistics:t.payload.statistics});case g.MI:return Object.assign({},e,{backups:t.payload.backups});case g.uv:var I=e.backups.slice();return I.push(t.payload.backup),Object.assign({},e,{backups:I});case g.pA:var P=e.backups.filter((function(e){return e._id!==t.payload.id}));return Object.assign({},e,{backups:P});case g.pV:return Object.assign({},e,{settings:t.payload});case g.TH:return Object.assign({},e,{settings:t.payload.settings});case g.Qd:var L=t.payload.roles;return Object.assign({},e,{roles:L});case g._R:var C=e.roles.slice();return C.push(t.payload.role),Object.assign({},e,{roles:C});case g.s_:var j=e.roles.filter((function(e){return e._id!==t.payload.id}));return Object.assign({},e,{roles:j});case g.Py:var R=t.payload.role,G=e.roles.map((function(e){return R._id===e._id?R:e}));return Object.assign({},e,{roles:G});default:return e}}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return t.type===g.Z9?t.payload.badges:e}var b=n(70954),k=n.n(b),x=n(100),_=n.n(x),N=n(18484),Z=n.n(N),A=n(33837),T=n.n(A);function D(e,t){return(""+e.title).localeCompare(t.title)}function O(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;if(t.type===g.G7){var n=t.payload.cohorts;return k()(n)?(n=n.filter((function(e){var n=e.emailFilter||"";return _()(n)?(n=Z()(n)).test(t.payload.user.email):T()(t.payload.user.email,n||"")}))).sort(D):n}return e}var S=n(12087),I=n.n(S);function P(e,t){return(""+e.title).localeCompare(t.title)}var L={_id:null,title:"",description:"",owners:"",enableTicketing:!1,announcements:[],lessons:[],cohorts:[],files:[],ownerFiles:[],tickets:[]};function C(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g.WF:return Object.assign({},e,{_id:t.payload._id,title:t.payload.title,description:t.payload.description,announcements:t.payload.announcements,enableTicketing:t.payload.enableTicketing,owners:t.payload.owners,cohorts:t.payload.cohorts});case g.ke:return L;case g.LX:for(var n=t.payload,r=n.cohort,a=n.email,s=n.lessonID,c=n.progress,u=e.cohorts,o=0;o<u.length;o++)if(u[o].title===r){for(var i=u[o].members,p=0;p<i.length;p++)if(i[p].email===a){var l=i[p];l.lessonData[s].progress=c/100;break}break}return Object.assign({},e,{cohorts:u});case g.qv:return t.payload.namespaceName===e.title?Object.assign({},e,{lessons:t.payload.lessons}):e;case g.$L:return Object.assign({},e,{cohorts:t.payload.cohorts.sort(P)});case g.Nh:var f=e.lessons.slice();return f=f.filter((function(e){return e.title!==t.payload.lessonName})),Object.assign({},e,{lessons:f});case g.lo:for(var d=e.lessons.slice(),m=t.payload,v=m.props,h=m.lessonName,E=0;E<d.length;E++)if(d[E].title===h){for(var w in v)I()(v,w)&&(d[E][w]=v[w]);break}return Object.assign({},e,{lessons:d});case g.aM:var y=e.lessons,b=t.payload.files;b=b.map((function(e){e.updatedAt=new Date(e.updatedAt);for(var t=0;t<y.length;t++)if(y[t]._id===e.lesson){e.lesson=y[t];break}return e}));var k={};return t.payload.owner?k.ownerFiles=b:k.files=b,Object.assign({},e,k);case g.wx:for(var x=e.announcements.slice(),_=0;_<x.length;_++)x[_].createdAt===t.payload.announcement.createdAt&&(x[_]=t.payload.announcement);return Object.assign({},e,{announcements:x});case g.H0:var N=e.announcements.slice();return N.unshift(t.payload.announcement),Object.assign({},e,{announcements:N});case g.wd:var Z=e.announcements.slice();return Z.splice(t.payload.index,1),Object.assign({},e,{announcements:Z});case g.W1:var A=t.payload.tickets;return A=A.map((function(e){return e.createdAt=new Date(e.createdAt),e})),Object.assign({},e,{tickets:A});case g.wL:var T=e.tickets.map((function(e){return e._id===t.payload.id&&(e.done=!1),e}));return Object.assign({},e,{tickets:T});case g.mI:var D=e.tickets.map((function(e){return e._id===t.payload.id&&(e.done=!0),e}));return Object.assign({},e,{tickets:D});case g.B2:var O=e.tickets.map((function(e){return e._id===t.payload.id&&(e.priority=t.payload.priority),e}));return Object.assign({},e,{tickets:O});case g.JB:var S=e.tickets.map((function(e){if(e._id===t.payload.id){var n=t.payload.message;n.picture=n.picture.substring(n.picture.lastIndexOf("/")+1),e.messages.unshift(n)}return e}));return Object.assign({},e,{tickets:S});case g.E7:return L;default:return e}}var j={message:"",level:"",position:"tl",children:null,time:null,autoDismiss:5};function R(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g.Dv:return Object.assign({},j,(0,m.Z)((0,m.Z)({},t.payload),{},{time:new Date}));case g.xe:return{title:"Error encountered",message:t.payload,level:"error",position:"tl",autoDismiss:5,time:new Date};default:return e}}var G={};function U(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g.oi:return Object.assign({},e,t.payload);case g.Ki:return Object.assign({},e,t.payload.translations);default:return e}}var F={};function W(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g.RJ:return Object.assign({},e,t.payload);case g.TH:return Object.assign({},e,t.payload.settings);default:return e}}var M=n(63834),J={lessons:null};function V(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;if(t.type===g.QI){var n=t.payload.lessons;return n=n.map((function(e,t){return e.colorIndex=t%20,e.url=M.ZP+"/"+e.namespace+"/"+e.title,e.createdAt||(e.createdAt=new Date(0).toLocaleString()),e.updatedAt||(e.updatedAt=e.createdAt),e})),Object.assign({},e,{lessons:n})}return e}var H=n(49777),z=n(12699),B=n.n(z),K={phrase:null,type:"sequentially",direction:"ascending"};function q(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g.X5:return Object.assign({},e,{phrase:B()(t.payload.phrase)});case g.gH:return Object.assign({},e,{type:t.payload.type});case g.i9:return Object.assign({},e,{direction:t.payload.direction});case g.E7:case H.nk:return K;default:return e}}var X=n(13708),$=n.n(X),Q=n(97623),Y=n.n(Q),ee={loggedIn:!1,email:"",verifiedEmail:!1,name:"",organization:"",writeAccess:!1,administrator:!1,enrolledNamespaces:[],ownedNamespaces:[],lessonData:{},picture:null,createdAt:null,updatedAt:null,score:null,spentTime:null,files:null,badges:null,id:null,token:null,tickets:[],licensed:!1,customFields:null,availableCustomFields:[],twoFactorAuth:!1,requestTFA:null,templateLessons:[]};function te(e,t){for(var n=0;n<e.length;n++)if(e[n].title===t)return e[n];return null}function ne(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g.CJ:return Object.assign({},e,{token:t.payload.token,id:t.payload.id});case g.Fw:return Object.assign({},e,{email:t.payload.email,verifiedEmail:t.payload.verifiedEmail,name:t.payload.name,enrolledNamespaces:t.payload.enrolledNamespaces,ownedNamespaces:t.payload.ownedNamespaces,organization:t.payload.organization,writeAccess:t.payload.writeAccess,administrator:t.payload.administrator,picture:t.payload.picture,lessonData:t.payload.lessonData,createdAt:t.payload.createdAt,updatedAt:t.payload.updatedAt,score:t.payload.score,spentTime:t.payload.spentTime,licensed:t.payload.licensed,customFields:t.payload.customFields,availableCustomFields:t.payload.availableCustomFields,twoFactorAuth:t.payload.twoFactorAuth,loggedIn:!0});case g.tl:return Object.assign({},e,{writeAccess:!0});case g.E7:return ee;case g.hO:return Object.assign({},e,{name:t.payload.name,organization:t.payload.organization,customFields:t.payload.customFields});case g.bM:return Object.assign({},e,{picture:t.payload.picture});case g.$8:var n=e.ownedNamespaces.slice();return n.push(t.payload.namespace),Object.assign({},e,{ownedNamespaces:n});case g.ke:for(var r=[],a=0;a<e.ownedNamespaces.length;a++){var s=e.ownedNamespaces[a];s._id!==t.payload.id&&r.push(s)}return Object.assign({},e,{ownedNamespaces:r});case g.qv:for(var c=e.enrolledNamespaces.slice(),u=0;u<c.length;u++){var o=c[u];o.title===t.payload.namespaceName&&(c[u].lessons=t.payload.lessons)}return Object.assign({},e,{enrolledNamespaces:c});case g.Rg:for(var i=e.ownedNamespaces.slice(),p=0;p<i.length;p++){var l=i[p];l._id===t.payload._id?i[p]=t.payload:i[p]=l}return Object.assign({},e,{ownedNamespaces:i});case g.Kx:var f=e.enrolledNamespaces.slice();return f.push(t.payload),Object.assign({},e,{enrolledNamespaces:f});case g.H0:var d=t.payload.namespaceName,v=Y()(e.enrolledNamespaces),h=te(v,d);h&&h.announcements.unshift(t.payload.announcement);var E=Y()(e.ownedNamespaces);return(h=te(E,d))&&h.announcements.unshift(t.payload.announcement),Object.assign({},e,{enrolledNamespaces:v,ownedNamespaces:E});case g.wx:var w=t.payload.namespaceName,y=t.payload.announcement,b=y.createdAt,k=Y()(e.enrolledNamespaces),x=te(k,w);if(x)for(var _=0;_<x.announcements.length;_++)x.announcements[_].createdAt===b&&(x.announcements[_]=y);var N=Y()(e.ownedNamespaces);if(x=te(N,w))for(var Z=0;Z<x.announcements.length;Z++)x.announcements[Z].createdAt===b&&(x.announcements[Z]=y);return Object.assign({},e,{enrolledNamespaces:k,ownedNamespaces:N});case g.wd:var A=t.payload.namespaceName,T=Y()(e.enrolledNamespaces),D=te(T,A);D&&D.announcements.splice(t.payload.index,1);var O=Y()(e.ownedNamespaces);return(D=te(O,A))&&D.announcements.splice(t.payload.index,1),Object.assign({},e,{enrolledNamespaces:T,ownedNamespaces:O});case g.Ze:return Object.assign({},e,{files:$()(t.payload.files,(function(e){return e.namespace}))});case g.cv:var S=t.payload.tickets;return S=S.map((function(e){return e.createdAt=new Date(e.createdAt),e})),Object.assign({},e,{tickets:S});case g.NH:var I=e.tickets.slice();return I.push((0,m.Z)((0,m.Z)({},t.payload),{},{messages:[],user:{picture:e.picture.substring(e.picture.lastIndexOf("/")+1),name:e.name,email:e.email}})),Object.assign({},e,{tickets:I});case g.wL:var P=e.tickets.map((function(e){return e._id===t.payload.id&&(e.done=!1),e}));return Object.assign({},e,{tickets:P});case g.mI:var L=e.tickets.map((function(e){return e._id===t.payload.id&&(e.done=!0),e}));return Object.assign({},e,{tickets:L});case g.JB:var C=e.tickets.map((function(e){if(e._id===t.payload.id){var n=t.payload.message;n.picture=n.picture.substring(n.picture.lastIndexOf("/")+1),e.messages.unshift(n)}return e}));return Object.assign({},e,{tickets:C});case g.eu:return Object.assign({},e,{badges:t.payload.badges});case g.C3:case g.rh:case g.S5:return Object.assign({},e,{availableCustomFields:t.payload.customFields});case g.CH:for(var j=[],R=0;R<e.availableCustomFields.length;R++){var G=e.availableCustomFields[R];G._id!==t.payload.id&&j.push(G)}return Object.assign({},e,{availableCustomFields:j});case g.Hs:var U=e.availableCustomFields.slice();return U.push((0,m.Z)({},t.payload)),Object.assign({},e,{availableCustomFields:U});case g.E4:return Object.assign({},e,{twoFactorAuth:t.payload.verified});case g.oF:return Object.assign({},e,{twoFactorAuth:!t.payload.disabled});case g.Jb:return Object.assign({},e,{requestTFA:{email:t.payload.email,password:t.payload.password}});case g.LJ:return Object.assign({},e,{templateLessons:t.payload.templateLessons});default:return e}}var re=n(87757),ae=n.n(re),se=n(15861),ce=n(15671),ue=n(43144),oe=n(60136),ie=n(29388),pe=n(10077),le=n.n(pe),fe=n(59486),de=n(31835),me=n(77703),ve=n(58713),he=n(36387),ge=n(45365),Ee=n.n(ge),we={NotificationItem:{DefaultStyle:{margin:"20px 2px 2px 1px"},info:{color:"black",backgroundColor:"white",boxShadow:"0 0 4px darkslategray",height:"400px",width:"400px",borderTop:"none"}}},ye=function(e){(0,oe.Z)(n,e);var t=(0,ie.Z)(n);function n(e){return(0,ce.Z)(this,n),t.call(this,e)}return(0,ue.Z)(n,[{key:"componentDidUpdate",value:function(e,t){var n=this.props.notification;e.notification.time!==n.time&&this.notificationSystem.addNotification(n)}},{key:"render",value:function(){var e=this;return r.createElement(Ee(),{style:we,ref:function(t){e.notificationSystem=t}})}}]),n}(r.Component);var be=(0,u.$j)((function(e){return{notification:e.notification}}))(ye),ke=(0,de.Z)((function(){return Promise.all([n.e(6774),n.e(133),n.e(2277),n.e(3884),n.e(1207),n.e(1842)]).then(n.bind(n,81842))})),xe=(0,de.Z)((function(){return Promise.all([n.e(175),n.e(2136)]).then(n.bind(n,65681))})),_e=(0,de.Z)((function(){return Promise.all([n.e(175),n.e(6641)]).then(n.bind(n,99790))})),Ne=(0,de.Z)((function(){return Promise.all([n.e(133),n.e(2277),n.e(3884),n.e(1207),n.e(2855),n.e(7920),n.e(905),n.e(6174)]).then(n.bind(n,96174))})),Ze=(0,de.Z)((function(){return Promise.all([n.e(133),n.e(6659),n.e(4311)]).then(n.bind(n,6611))})),Ae=(0,de.Z)((function(){return Promise.all([n.e(133),n.e(2277),n.e(6659),n.e(3884),n.e(1207),n.e(9494),n.e(3422),n.e(9772),n.e(905),n.e(5363)]).then(n.bind(n,41706))})),Te=(0,de.Z)((function(){return Promise.all([n.e(6774),n.e(133),n.e(2277),n.e(6659),n.e(3884),n.e(1207),n.e(9494),n.e(3422),n.e(1070),n.e(9772),n.e(7249),n.e(905),n.e(2645)]).then(n.bind(n,82578))})),De=(0,de.Z)((function(){return Promise.all([n.e(6774),n.e(133),n.e(2277),n.e(6659),n.e(3884),n.e(1207),n.e(994),n.e(2831)]).then(n.bind(n,41641))})),Oe=(0,de.Z)((function(){return Promise.all([n.e(6774),n.e(133),n.e(2277),n.e(6659),n.e(3884),n.e(1207),n.e(994),n.e(3444)]).then(n.bind(n,70744))})),Se=(0,de.Z)((function(){return Promise.all([n.e(994),n.e(1343)]).then(n.bind(n,77880))})),Ie=(0,de.Z)((function(){return Promise.all([n.e(994),n.e(1281)]).then(n.bind(n,63956))})),Pe=(0,de.Z)((function(){return Promise.all([n.e(133),n.e(2277),n.e(3884),n.e(1207),n.e(2003),n.e(905),n.e(4025),n.e(7011)]).then(n.bind(n,27011))})),Le=(0,de.Z)((function(){return Promise.all([n.e(133),n.e(2277),n.e(3884),n.e(1207),n.e(2003),n.e(6872)]).then(n.bind(n,86872))})),Ce=(0,de.Z)((function(){return Promise.all([n.e(133),n.e(2277),n.e(6659),n.e(3884),n.e(3518)]).then(n.bind(n,37483))})),je=(0,de.Z)((function(){return Promise.all([n.e(133),n.e(6659),n.e(21)]).then(n.bind(n,86307))})),Re=(0,de.Z)((function(){return Promise.all([n.e(6774),n.e(133),n.e(2277),n.e(6659),n.e(3884),n.e(1207),n.e(9494),n.e(3422),n.e(5088),n.e(3980)]).then(n.bind(n,63980))})),Ge=(0,de.Z)((function(){return Promise.all([n.e(6774),n.e(133),n.e(2277),n.e(6659),n.e(3884),n.e(1207),n.e(9494),n.e(3422),n.e(8748),n.e(1070),n.e(4502),n.e(2488),n.e(4846),n.e(1706),n.e(2003),n.e(2410),n.e(2855),n.e(905),n.e(4025),n.e(7653),n.e(2263)]).then(n.bind(n,72159))})),Ue=(0,de.Z)((function(){return Promise.all([n.e(6774),n.e(133),n.e(2277),n.e(3884),n.e(1207),n.e(9494),n.e(3422),n.e(6363),n.e(4832)]).then(n.bind(n,4832))})),Fe=(0,de.Z)((function(){return Promise.all([n.e(6774),n.e(133),n.e(2277),n.e(6659),n.e(3884),n.e(1207),n.e(6363),n.e(1902),n.e(905),n.e(2118)]).then(n.bind(n,69540))})),We=(0,de.Z)((function(){return Promise.all([n.e(6774),n.e(133),n.e(2277),n.e(6659),n.e(3884),n.e(1207),n.e(9494),n.e(3422),n.e(2003),n.e(454),n.e(4025),n.e(5627)]).then(n.bind(n,35627))})),Me=(0,de.Z)((function(){return Promise.all([n.e(6774),n.e(133),n.e(2277),n.e(6363),n.e(5606)]).then(n.bind(n,99046))})),Je="ISLE_USER_"+M.ZP,Ve=["/create-namespace","/edit-namespace/:namespace","/edit-namespace","/namespace-data/:namespace","/profile","/lessons/:namespace","/lessons","/gallery","/enroll","/admin","/admin-settings"],He=/(?:courses|new-password|complete-registration|confirm-email|shibboleth|signup|login|login-tfa|terms|privacy)/,ze=le()("isle-dashboard"),Be=function(e){(0,oe.Z)(a,e);var t,n=(0,ie.Z)(a);function a(){return(0,ce.Z)(this,a),n.apply(this,arguments)}return(0,ue.Z)(a,[{key:"componentDidMount",value:(t=(0,se.Z)(ae().mark((function e(){var t,n,r;return ae().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.history,this.props.getCustomTranslations(),this.props.getPublicSettings(),this.props.isLoggedIn||He.test(t.location.pathname)){e.next=14;break}if(!(n=localStorage.getItem(Je))){e.next=13;break}return n=JSON.parse(n),e.next=9,this.props.fetchCredentials(n);case 9:(r=e.sent)&&this.props.getEnrollableCohorts(r),e.next=14;break;case 13:t.replace("/login");case 14:this.props.isLoggedIn&&(ze("User is logged in, check local storage..."),localStorage.getItem(Je)||(ze("User is logged in, but no local storage found -> write to local storage"),localStorage.setItem(Je,JSON.stringify({token:this.props.user.token,id:this.props.user.id}))));case 15:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"componentDidUpdate",value:function(e){var t=this.props.history,n=e.isLoggedIn&&!this.props.isLoggedIn,r=!e.isLoggedIn&&this.props.isLoggedIn,a=t.location.pathname;if(r)if("/login-tfa"===a){var s=this.props.user.writeAccess?"/lessons":"/profile";t.push(s)}else if(a&&"/"!==a&&"/login"!==a&&"/shibboleth"!==a)ze("User has logged in, redirecting to: "+a),t.push(t.location.pathname);else{var c=this.props.user.writeAccess?"/lessons":"/profile";ze("User has logged in, redirecting to default page: "+a),t.push(c)}else if(n)t.push("/login");else if(this.props.isLoggedIn&&a&&("/"===a||"/login"===a||"/login-tfa"===a||"/shibboleth"===a)){var u=this.props.user.writeAccess?"/lessons":"/profile";t.push(u)}}},{key:"render",value:function(){var e=this.props.settings,t=null;return this.props.isLoggedIn&&(t=r.createElement(r.Fragment,null,r.createElement(fe.AW,{path:Ve,component:Ne,history:this.props.history}),r.createElement(fe.AW,{path:"/create-namespace",component:Ae}),r.createElement(fe.AW,{path:"/edit-namespace/:namespace",component:Te}),r.createElement(fe.AW,{path:"/namespace-data/:namespace",exact:!0,component:Ge}),r.createElement(fe.AW,{path:"/namespace-data/:namespace/:subpage",component:Ge}),r.createElement(fe.AW,{path:"/profile",component:We}),r.createElement(fe.AW,{path:"/lessons",exact:!0,component:Fe}),r.createElement(fe.AW,{path:"/lessons/:namespace",component:Fe}),r.createElement(fe.AW,{path:"/gallery",component:Ue}),r.createElement(fe.AW,{path:"/enroll",component:Me}),r.createElement(fe.AW,{path:"/admin",exact:!0,component:Pe}),r.createElement(fe.AW,{path:"/admin/:subpage",component:Pe}),r.createElement(fe.AW,{path:"/admin/settings",exact:!0,component:Le}),r.createElement(fe.AW,{path:"/admin/settings/:subpage",component:Le}))),r.createElement(d.xI,{history:this.props.history},r.createElement("div",{className:"App"},t,r.createElement(fe.AW,{path:"/*",component:ke,history:this.props.history}),r.createElement(fe.AW,{exact:!0,path:"/",component:Ce}),r.createElement(fe.AW,{path:"/login",component:Ce}),r.createElement(fe.AW,{path:"/login-tfa",component:je}),r.createElement(fe.AW,{path:"/new-password",component:De}),r.createElement(fe.AW,{path:"/complete-registration",component:Oe}),r.createElement(fe.AW,{path:"/confirm-email",component:Se}),r.createElement(fe.AW,{path:"/shibboleth",component:Ie}),e.allowUserRegistrations?r.createElement(fe.AW,{path:"/signup",component:Re}):null,r.createElement(fe.AW,{path:"/forgot-password",component:Ze}),r.createElement(fe.AW,{path:"/terms",component:xe}),r.createElement(fe.AW,{path:"/privacy",component:_e}),r.createElement(be,null)))}}]),a}(r.Component),Ke=(0,u.$j)((function(e){return{isLoggedIn:e.user.loggedIn,user:e.user,settings:e.settings}}),(function(e){return{fetchCredentials:(0,me.GI)(e),getCustomTranslations:(0,he.XE)(e),getPublicSettings:(0,he.SK)(e),getEnrollableCohorts:(0,ve.R9)(e)}}))(Be);var qe=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Xe(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!==n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}n(605);var $e,Qe,Ye={key:"root",blacklist:["router","license","requestTFA"],storage:c()},et=(0,p.q_)(),tt=($e=et,(0,l.UY)({admin:w,badges:y,cohorts:O,gallery:V,namespace:C,notification:R,router:(0,d.iz)($e),search:q,settings:W,translations:U,user:ne})),nt=(0,o.OJ)(Ye,tt),rt=(0,f.Z)(et),at=(0,l.MT)(nt,(0,l.md)(rt)),st=(0,o.p5)(at);a.render(r.createElement(u.zt,{store:at},r.createElement(i.r,{loading:null,persistor:st},r.createElement(Ke,{history:et}))),document.getElementById("root")),"serviceWorker"in navigator&&window.addEventListener("load",(function(){var e="".concat(window.location.origin).concat(window.location.pathname,"service-worker.js");qe?(function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!==r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Xe(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e,Qe),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Xe(e,Qe)}))},24654:function(){}},function(e){e.O(0,[1908],(function(){return t=96797,e(e.s=t);var t}));e.O()}]);
//# sourceMappingURL=main.8e36e064.js.map