"use strict";(self.webpackChunkisle_dashboard=self.webpackChunkisle_dashboard||[]).push([[2118],{44593:function(e,t){t.Z=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#c49c94","#e377c2","#17becf","#aec7e8","#ffbb78","#ff9896","#98df8a","#7f7f7f","#c5b0d5","#f7b6d2","#bcbd22","#c7c7c7","#dbdb8d","#9edae5"]},69540:function(e,t,s){s.r(t),s.d(t,{default:function(){return Te}});var n=s(41488),a=s(9251),o=s(87462),l=s(15671),r=s(43144),i=s(97326),c=s(60136),p=s(29388),u=s(4942),d=s(10077),m=s.n(d),h=s(25472),f=s(910),v=s(70048),g=s(66734),Z=s(47701),y=s(70954),E=s.n(y),k=s(33837),b=s.n(k),w=s(12699),L=s.n(w),C=s(89161),N=s.n(C),D=s(42339),x=s.n(D),I=(0,s(31835).Z)((function(){return s.e(8833).then(s.bind(s,28833))})),P=s(38315);var T=(0,a.$j)((function(e){return{admin:e.admin,user:e.user}}),(function(e){return{copyLesson:(0,P.Vo)(e)}}))(I),F=s(87757),S=s.n(F),M=s(15861),_=s(52785),U=s(87095),A=s(57690),B=s(29530),G=s(33606),H=s.n(G),j=s(75018),K=s(54012),O=s(73230),V=s(52787),R=s(85840),q=s(45309),z=s(90485),W=s.n(z),$=s(84078),J=m()("isle-dashboard");function Q(e){e.stopPropagation()}var X=function(e){(0,c.Z)(s,e);var t=(0,p.Z)(s);function s(e){var n,a,o;return(0,l.Z)(this,s),n=t.call(this,e),(0,u.Z)((0,i.Z)(n),"handleInputChange",(function(e){var t=e.target,s=t.value,a=t.name;J("Input field ".concat(a," changed to ").concat(s)),n.setState((0,u.Z)({},a,s),(function(){n.state.title.length>=3&&n.state.description.length>0?n.setState({disabled:!1}):n.setState({disabled:!0})}))})),(0,u.Z)((0,i.Z)(n),"handleLockChange",(function(e){n.setState({lockLesson:e.target.checked})})),(0,u.Z)((0,i.Z)(n),"handleTimeChange",(function(e){n.setState({lockUntil:e})})),(0,u.Z)((0,i.Z)(n),"handleTemplateChange",(function(e){n.setState({template:e.target.checked,changedTemplate:!0})})),(0,u.Z)((0,i.Z)(n),"onSubmit",(function(e){e.preventDefault();var t={newTitle:n.state.title,newDescription:n.state.description};n.state.lockLesson&&(t.lockUntil=n.state.lockUntil),n.state.changedTemplate&&(t.template=n.state.template),n.props.update(t)})),e.lockUntil?(a=!0,o=e.lockUntil):(a=!1,o=new Date),n.state={title:e.title,description:e.description,disabled:!1,template:e.template,changedTemplate:!1,lockLesson:a,lockUntil:o},n}return(0,r.Z)(s,[{key:"componentDidUpdate",value:function(e){var t={};e.title!==this.props.title&&(t.title=this.props.title),e.description!==this.props.description&&(t.description=this.props.description),e.template!==this.props.template&&(t.template=this.props.template),e.lockUntil!==this.props.lockUntil&&(this.props.lockUntil?(t.lockLesson=!0,t.lockUntil=this.props.lockUntil):(t.lockLesson=!1,t.lockUntil=new Date)),W()(t)||this.setState(t)}},{key:"render",value:function(){var e=this.props.t;return n.createElement(R.Z,{show:this.props.show,onHide:this.props.close},n.createElement(V.Z,{action:$.ZP,method:"get",onSubmit:this.onSubmit,onKeyDown:Q},n.createElement(R.Z.Header,null,n.createElement(R.Z.Title,{as:"h3"},e("lesson-details"))),n.createElement(R.Z.Body,null,n.createElement(O.Z,null,n.createElement(K.Z,null,e("common:title")),n.createElement(j.Z,{name:"title",type:"title",onChange:this.handleInputChange,defaultValue:this.state.title})),n.createElement(O.Z,null,n.createElement(K.Z,null,e("common:description")),n.createElement(j.Z,{name:"description",type:"description",onChange:this.handleInputChange,defaultValue:this.state.description})),n.createElement(O.Z,null,n.createElement(V.Z.Check,{type:"checkbox",label:e("common:lock-until"),checked:this.state.lockLesson,onChange:this.handleLockChange}),n.createElement("div",null,this.state.lockLesson?n.createElement(q.Z,{minDate:new Date,onChange:this.handleTimeChange,value:this.state.lockUntil,clearIcon:null}):null)),this.props.user.administrator?n.createElement(O.Z,null,n.createElement(V.Z.Check,{type:"checkbox",label:e("provide-as-template"),checked:this.state.template,onChange:this.handleTemplateChange})):null),n.createElement(R.Z.Footer,null,n.createElement(v.Z,{onClick:this.props.close},e("common:cancel")),n.createElement(v.Z,{variant:"success",type:"submit",disabled:this.state.disabled},e("common:save")))))}}]),s}(n.Component);X.defaultProps={lockUntil:null,template:null};var Y=X,ee=function(e){return n.createElement(R.Z,{show:e.show,onHide:e.close},n.createElement(R.Z.Header,null,n.createElement(R.Z.Title,null,e.t("common:delete"),"?")),n.createElement(R.Z.Body,null,e.t("delete-modal-body",{name:e.title})),n.createElement(R.Z.Footer,null,n.createElement(v.Z,{onClick:e.close},e.t("common:cancel")),n.createElement(v.Z,{variant:"danger",onClick:e.delete},e.t("common:delete"))))},te=s(44593),se=s(27316),ne=s(30573),ae=m()("isle:lessons-page:lesson"),oe=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document;function le(e){e.target.src=se}var re=function(e){(0,c.Z)(s,e);var t=(0,p.Z)(s);function s(e){var n;return(0,l.Z)(this,s),n=t.call(this,e),(0,u.Z)((0,i.Z)(n),"toggleLessonState",(function(){var e={lessonName:n.props.title,namespaceName:n.props.namespace};n.props.active?n.props.deactivateLesson(e):n.props.activateLesson(e)})),(0,u.Z)((0,i.Z)(n),"toggleLessonVisibility",(function(){var e={lessonName:n.props.title,namespaceName:n.props.namespace};n.props.public?n.props.hideLessonInGallery(e):n.props.showLessonInGallery(e)})),(0,u.Z)((0,i.Z)(n),"delete",(function(){n.props.deleteLesson({lessonName:n.props.title,namespaceName:n.props.namespace}),n.closeDeleteModal()})),(0,u.Z)((0,i.Z)(n),"update",function(){var e=(0,M.Z)(S().mark((function e(t){var s,a,o,l;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.newTitle,a=t.newDescription,o=t.lockUntil,l=t.template,e.next=3,n.props.updateLesson({lessonName:n.props.title,namespaceName:n.props.namespace,newTitle:s,newDescription:a,template:l,lockUntil:o?o.getTime():null});case 3:e.sent&&n.closeDetailsModal();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,u.Z)((0,i.Z)(n),"showDeleteModal",(function(){n.setState({showDeleteModal:!0})})),(0,u.Z)((0,i.Z)(n),"showDetailsModal",(function(){n.setState({showDetailsModal:!0})})),(0,u.Z)((0,i.Z)(n),"closeDeleteModal",(function(){n.setState({showDeleteModal:!1})})),(0,u.Z)((0,i.Z)(n),"closeDetailsModal",(function(){n.setState({showDetailsModal:!1})})),(0,u.Z)((0,i.Z)(n),"getIsleFile",(0,M.Z)(S().mark((function e(){var t;return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ae("Request ISLE source code from server..."),n.state.isleFile){e.next=6;break}return e.next=4,n.props.getIsleFile({lessonName:n.props.title,namespaceName:n.props.namespace});case 4:(t=e.sent)&&n.setState({isleFile:t});case 6:case"end":return e.stop()}}),e)})))),(0,u.Z)((0,i.Z)(n),"copyIsleFileToClipboard",(function(){if(!n.state.isleFile)return n.props.addNotification({message:n.props.t("source-file-error"),level:"error"});H()(n.state.isleFile).then((function(){n.props.addNotification({message:n.props.t("source-file-copied"),level:"success"})})).catch((function(e){n.props.addNotification({message:e.message,level:"error"})}))})),(0,u.Z)((0,i.Z)(n),"copyLinkToClipboard",(function(){H()(n.props.url).then((function(){n.props.addNotification({message:n.props.t("link-copied"),level:"success"})})).catch((function(e){n.props.addNotification({message:e.message,level:"error"})}))})),(0,u.Z)((0,i.Z)(n),"copyNameToClipboard",(function(e){e.stopPropagation(),H()(n.props.title).then((function(){n.props.addNotification({message:n.props.t("name-copied"),level:"success"})})).catch((function(e){n.props.addNotification({message:e.message,level:"error"})}))})),(0,u.Z)((0,i.Z)(n),"showPreviewImage",(function(){n.img.src=n.props.url+"/preview.jpg"})),(0,u.Z)((0,i.Z)(n),"openLesson",(function(){oe?window.location=n.props.url:window.open(n.props.url,"_blank").focus()})),n.state={showDeleteModal:!1,showDetailsModal:!1,isleFile:null},n}return(0,r.Z)(s,[{key:"renderButtonToolbarDate",value:function(){var e=this.props.t,t=new Date(this.props.updatedAt);t=t.toLocaleDateString();var s=new Date(this.props.createdAt);return s=s.toLocaleDateString(),n.createElement("span",{className:"lessons-upload"},n.createElement(g.Z,{placement:"top",overlay:n.createElement(Z.Z,{id:"toggle_visibility"},e("created-at"))},n.createElement("span",{className:"lessons-uploaded-image"},n.createElement("img",{alt:"Upload Date Icon",style:{stroke:"white",fill:"red"},src:ne}))),n.createElement(g.Z,{placement:"top",overlay:n.createElement(Z.Z,{id:"toggle_visibility"},e("last-updated"),t)},n.createElement("span",{className:"lessons-uploaded"},s)))}},{key:"renderActivateButton",value:function(){var e=this.props,t=e.lockUntil,s=e.t,a=!0===this.props.active?"success":"warning";return t?n.createElement(g.Z,{placement:"top",overlay:n.createElement(Z.Z,{id:"lockUntil_disabled"},s("scheduled-at",{date:t.toLocaleString()}))},n.createElement(_.Z,{className:"lessons-status",variant:a,style:{opacity:.3}},this.props.active?s("active"):s("inactive"))):n.createElement(g.Z,{placement:"top",overlay:n.createElement(Z.Z,{id:"toggle_availability"},this.props.active?s("disable-lesson"):s("activate-lesson"))},n.createElement(_.Z,{className:"lessons-status",onClick:this.toggleLessonState,variant:a},this.props.active?s("active"):s("inactive")))}},{key:"renderButtonToolbar",value:function(){var e=this.props.t,t=!0===this.props.public?"success":"warning";return n.createElement(A.Z,{className:"lesson-button-toolbar"},n.createElement(U.Z,{style:{marginRight:"5px"}},n.createElement(g.Z,{placement:"top",overlay:n.createElement(Z.Z,{id:"open_details"},e("open-details"))},n.createElement(v.Z,{size:"sm",variant:"secondary",onClick:this.showDetailsModal,"aria-label":e("open-details")},n.createElement("i",{className:"fa fa-cog"}))),n.createElement(g.Z,{placement:"top",overlay:n.createElement(Z.Z,{id:"delete_lesson"},e("delete-lesson"))},n.createElement(v.Z,{size:"sm",variant:"secondary",onClick:this.showDeleteModal,"aria-label":e("delete-lesson")},n.createElement("i",{className:"fa fa-trash-alt"}))),n.createElement(g.Z,{placement:"top",overlay:n.createElement(Z.Z,{id:"isle-file"},e("copy-file"))},n.createElement(v.Z,{variant:"secondary",size:"sm",onFocus:this.getIsleFile,onMouseEnter:this.getIsleFile,onClick:this.copyIsleFileToClipboard,style:{float:"right"},"aria-label":e("copy-file")},n.createElement("i",{className:"fa fa-clipboard"})))),this.renderActivateButton(),n.createElement(g.Z,{placement:"top",overlay:n.createElement(Z.Z,{id:"toggle_visibility"},this.props.public?e("remove-from-gallery"):e("show-in-gallery"))},n.createElement(_.Z,{className:"lessons-status",onClick:this.toggleLessonVisibility,variant:t},this.props.public?e("public"):e("private"))),this.renderButtonToolbarDate())}},{key:"renderModals",value:function(){return n.createElement(n.Fragment,null,n.createElement(ee,(0,o.Z)({},this.props,{show:this.state.showDeleteModal,close:this.closeDeleteModal,delete:this.delete})),this.state.showDetailsModal?n.createElement(Y,(0,o.Z)({},this.props,{show:this.state.showDetailsModal,close:this.closeDetailsModal,update:this.update})):null)}},{key:"render",value:function(){var e=this,t=this.props.t;return n.createElement(B.Z,{className:"animated-lesson-card"},n.createElement(B.Z.Body,{style:{padding:0}},n.createElement("div",{style:{filter:"grayscale(30%)",background:te.Z[this.props.colorIndex]},className:"hovereffect",onMouseOver:this.showPreviewImage,onFocus:this.showPreviewImage},n.createElement("img",{className:"img-responsive",src:se,ref:function(t){e.img=t},alt:"",style:{width:"100%",height:180},onError:le}),n.createElement("div",{className:"overlay",style:{cursor:"cell"}},n.createElement("h2",null,n.createElement(g.Z,{placement:"top",overlay:n.createElement(Z.Z,{id:"copy_name"},t("common:copy-name"))},n.createElement("span",{className:"lesson-title-button",role:"button",tabIndex:0,onClick:this.copyNameToClipboard,onKeyPress:this.copyNameToClipboard},this.props.title))),"No description supplied."!==this.props.description?n.createElement("h3",null,this.props.description):null,n.createElement("span",{ref:function(t){e.link=t},className:"info",onClick:this.openLesson,onKeyPress:this.openLesson,tabIndex:0,role:"button"},t("open-lesson")))),n.createElement(g.Z,{placement:"top",overlay:n.createElement(Z.Z,{id:"copy_link"},t("common:copy-link"))},n.createElement("i",{role:"button",tabIndex:0,className:"lesson-link-icon fas fa-external-link-alt",onClick:this.copyLinkToClipboard,onKeyPress:this.copyLinkToClipboard,"aria-label":t("common:copy-link")})),this.renderButtonToolbar(),this.renderModals()))}}]),s}(n.Component);re.defaultProps={lockUntil:null};var ie=(0,h.Z)(["lesson","common"])(re),ce=s(66310),pe=s(7131),ue=s.n(pe),de=s(74321),me=s.n(de),he=s(75033);function fe(e){e.target.src=se}var ve=function(e){(0,c.Z)(s,e);var t=(0,p.Z)(s);function s(e){var n;return(0,l.Z)(this,s),n=t.call(this,e),(0,u.Z)((0,i.Z)(n),"showPreviewImage",(function(){n.img.src=n.props.url+"/preview.jpg"})),(0,u.Z)((0,i.Z)(n),"openLesson",(function(){window.open(n.props.url,"_blank").focus()})),(0,u.Z)((0,i.Z)(n),"copyLinkToClipboard",(function(){H()(n.props.url).then((function(){n.props.addNotification({message:n.props.t("link-copied"),level:"success"})})).catch((function(e){n.props.addNotification({message:e.message,level:"error"})}))})),n.state={},n}return(0,r.Z)(s,[{key:"renderProgress",value:function(){var e;if(this.props.metadata&&!0===this.props.metadata.hideProgressBar)return n.createElement("div",{className:"enrolled-lesson-progress"});var t=this.props.user.lessonData[this.props._id];t?(e=t.progress,e*=100,e=me()(ue()(e),100)):e=0;var s=this.props.t;return n.createElement("div",{className:"enrolled-lesson-progress"},n.createElement(g.Z,{placement:"top",overlay:n.createElement(Z.Z,{id:"open_details"},s("your-progress"))},n.createElement(ce.Z,{"aria-label":s("your-progress"),variant:"success",now:e,label:"".concat(e,"%")})))}},{key:"renderButtonToolbar",value:function(){var e,t=this.props.user.lessonData[this.props._id];e=t?t.spentTime:0;var s=this.props.t;return n.createElement(A.Z,{style:{position:"absolute",top:180,width:"100%",height:"36px",background:"rgba(0, 0, 0, 0.75)"}},this.renderProgress(),n.createElement("div",{className:"enrolled-lesson-time",style:{width:"35%",height:"100%"}},n.createElement(g.Z,{placement:"top",overlay:n.createElement(Z.Z,{id:"open_details"},s("time-format"))},n.createElement("span",null,s("time-spent"),": ",(0,he.Z)(e)))))}},{key:"render",value:function(){var e=this,t=this.props.t;return n.createElement(B.Z,{className:"animated-lesson-card"},n.createElement(B.Z.Body,{style:{padding:0}},n.createElement("div",{style:{filter:"grayscale(30%)",background:te.Z[this.props.colorIndex]},onMouseOver:this.showPreviewImage,onFocus:this.showPreviewImage,className:"hovereffect"},n.createElement("img",{className:"img-responsive",src:se,ref:function(t){e.img=t},alt:"",style:{width:"100%",height:180},onError:fe}),n.createElement("div",{className:"overlay"},n.createElement("h2",null,this.props.title),"No description supplied."!==this.props.description?n.createElement("h3",null,this.props.description):null,n.createElement("span",{ref:function(t){e.link=t},className:"info",role:"button",tabIndex:0,onClick:this.openLesson,onKeyPress:this.openLesson},t("open-lesson")))),n.createElement(g.Z,{placement:"top",overlay:n.createElement(Z.Z,{id:"copy_link"},t("common:copy-link"))},n.createElement("i",{role:"button",tabIndex:0,className:"lesson-link-icon fas fa-external-link-alt",onClick:this.copyLinkToClipboard,onKeyPress:this.copyLinkToClipboard,"aria-label":t("common:copy-link")})),this.renderButtonToolbar()))}}]),s}(n.Component);ve.defaultProps={metadata:null};var ge=(0,h.Z)(["lesson","common"])(ve),Ze=s(62300),ye=(0,h.Z)(["lessons_page","common"])((function(e){var t=e.user,s=e.t,a=null;return a=t.writeAccess?n.createElement("span",null,s("create-new-one"),n.createElement("i",{className:"fa fa-pencil-alt"}),"."):" .",n.createElement(Ze.Z,{className:"lessons-jumbotron"},n.createElement("h1",null,s("common:no-course-selected")),n.createElement("p",null,s("no-course-description"),n.createElement("i",{className:"fa fa-align-justify"}),a))})),Ee=(0,h.Z)(["lessons_page","common"])((function(e){var t=e.user,s=e.t,a=s("no-lessons");return t.writeAccess&&(a+=s("upload-from-editor")),n.createElement(Ze.Z,{className:"lessons-jumbotron"},n.createElement("h1",null,s("no-lessons-found")),n.createElement("p",null,a))})),ke=s(68692),be=s(8819),we=(s(54584),s(77551),s(89471),m()("isle-dashboard:lessons-page")),Le=(0,f.WidthProvider)(f.Responsive);function Ce(e,t){if(!t)return e;var s=[];if(E()(e))for(var n=0;n<e.length;n++)(b()(L()(e[n].title),t)||b()(L()(e[n].description),t))&&s.push(e[n]);return s}function Ne(e){we("Create layout...");var t=3.52,s=e.map((function(e,s){return{lg:{i:"cell-".concat(e.title,"-").concat(s),x:4*s%24,y:x()(s/6)*t,w:4,h:t},md:{i:"cell-".concat(e.title,"-").concat(s),x:4*s%20,y:x()(s/5)*t,w:4,h:t},sm:{i:"cell-".concat(e.title,"-").concat(s),x:4*s%16,y:x()(s/4)*t,w:4,h:t},xs:{i:"cell-".concat(e.title,"-").concat(s),x:4*s%12,y:x()(s/3)*t,w:4,h:t},xxs:{i:"cell-".concat(e.title,"-").concat(s),x:4*s%8,y:x()(s/2)*t,w:4,h:t},tiny:{i:"cell-".concat(e.title,"-").concat(s),x:4*s%4,y:x()(s/1)*t,w:4,h:t}}}));return s={lg:N()(s,"lg"),md:N()(s,"md"),sm:N()(s,"sm"),xs:N()(s,"xs"),xxs:N()(s,"xxs"),tiny:N()(s,"tiny")}}var De=function(e){(0,c.Z)(s,e);var t=(0,p.Z)(s);function s(e){var n;(0,l.Z)(this,s),n=t.call(this,e),(0,u.Z)((0,i.Z)(n),"preventOpeningLink",(function(e){e.preventDefault()})),(0,u.Z)((0,i.Z)(n),"handlePositionChangeFactory",(function(e){return function(t){var s=!1;switch(t.code){case"ArrowLeft":s=!0,n.repositionLessons(e,"left");break;case"ArrowRight":s=!0,n.repositionLessons(e,"right")}s&&(t.preventDefault(),t.stopPropagation())}})),(0,u.Z)((0,i.Z)(n),"toggleCreator",(function(){n.props.getTemplateLessons(),n.setState({showLessonCreator:!n.state.showLessonCreator})})),(0,u.Z)((0,i.Z)(n),"handleCreate",(function(){n.setState({showLessonCreator:!1});var e=n.props.namespace;e.title&&(we("Fetch lessons..."),n.props.getLessons(e.title))}));var a=e.namespace.lessons;return(0,be.Z)(e.user,e.namespace)||(we("Filter out inactive lessons for enrolled students..."),a=a.filter((function(e){return!0===e.active}))),n.state={filteredLessons:Ce(a,e.search.phrase),layouts:Ne(a),unfilteredLessons:a,search:e.search,activeElement:null,showLessonCreator:!1},n}return(0,r.Z)(s,[{key:"componentDidMount",value:function(){we("Component did mount...");var e=this.props.namespace;e.title&&(we("Fetch lessons..."),this.props.getLessons(e.title))}},{key:"shouldComponentUpdate",value:function(e,t){return(e.search.direction!==this.props.search.direction||e.search.type!==this.props.search.type||t.filteredLessons!==this.state.filteredLessons||t.showLessonCreator!==this.state.showLessonCreator)&&(we("Should update page..."),!0)}},{key:"repositionLessons",value:function(e,t){var s=this.state.unfilteredLessons.slice();if("left"===t){if(e>0){var n=s[e],a=s[e-1],o=a.pos;a.pos=n.pos,n.pos=o}}else if("right"===t&&e<s.length-1){var l=s[e],r=s[e+1],i=r.pos;r.pos=l.pos,l.pos=i}var c=Ce(s,this.props.search.phrase);(0,ke.Z)(c,this.props.search);var p=Ne(c);this.setState({filteredLessons:c,layouts:p,unfilteredLessons:s},this.forceUpdate),this.props.setLessonOrder({id:this.props.namespace._id,lessons:s.map((function(e){return e._id}))})}},{key:"renderLessons",value:function(){var e=this,t=this.state.filteredLessons;return(0,be.Z)(this.props.user,this.props.namespace)?t.map((function(s,a){var l=n.createElement(ie,(0,o.Z)({},t[a],{addNotification:e.props.addNotification,deleteLesson:e.props.deleteLesson,updateLesson:e.props.updateLesson,deactivateLesson:e.props.deactivateLesson,activateLesson:e.props.activateLesson,showLessonInGallery:e.props.showLessonInGallery,hideLessonInGallery:e.props.hideLessonInGallery,getLessons:e.props.getLessons,getIsleFile:e.props.getIsleFile,user:e.props.user}));return"sequentially"===e.props.search.type?n.createElement("div",{className:"lesson-grid-item",key:"cell-".concat(s.title,"-").concat(a),tabIndex:0,role:"button",ref:function(t){return t&&e.state.activeElement===s.title&&t.focus(),t},onKeyDown:e.handlePositionChangeFactory(a),onFocus:function(){e.setState({activeElement:s.title})}},l):n.createElement("div",{className:"lesson-grid-item",key:"cell-".concat(s.title,"-").concat(a)},l)})):t.map((function(s,a){return n.createElement("div",{className:"lesson-grid-item",key:"cell-".concat(s.title,"-").concat(a)},n.createElement(ge,(0,o.Z)({},t[a],{addNotification:e.props.addNotification,user:e.props.user})))}))}},{key:"render",value:function(){if(!this.props.namespace.title)return n.createElement(ye,{user:this.props.user});var e=this.state.filteredLessons;if(E()(e)){var t=n.createElement(g.Z,{placement:"left",overlay:n.createElement(Z.Z,{id:"create-from-template-tooltip"},this.props.t("create-from-template"))},n.createElement(v.Z,{"aria-label":this.props.t("create-from-template"),className:"create-from-template-button",onClick:this.toggleCreator},n.createElement("i",{className:"fas fa-plus"})));return 0===e.length?n.createElement(n.Fragment,null,n.createElement(Ee,{user:this.props.user}),t,this.state.showLessonCreator?n.createElement(T,{onHide:this.toggleCreator,onCreate:this.handleCreate,namespace:this.props.namespace}):null):n.createElement(n.Fragment,null,n.createElement("div",{className:"lessons-grid-container"},n.createElement(Le,{layouts:this.state.layouts,breakpoints:{lg:1800,md:1550,sm:1200,xs:900,xxs:400,tiny:0},cols:{lg:24,md:20,sm:16,xs:12,xxs:8,tiny:4},containerPadding:[10,10],isResizable:!1,isBounded:!0,isDraggable:!1,rowHeight:(0,be.Z)(this.props.user,this.props.namespace)?54.5:55},this.renderLessons()),t),this.state.showLessonCreator?n.createElement(T,{onHide:this.toggleCreator,onCreate:this.handleCreate,namespace:this.props.namespace}):null)}}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(e.namespace.lessons!==t.unfilteredLessons||e.search.phrase!==t.search.phrase||e.search.direction!==t.search.direction||e.search.type!==t.search.type){we("Get derived state...");var s=e.namespace.lessons||[];(0,be.Z)(e.user,e.namespace)||(we("Filter out inactive lessons for enrolled students..."),s=s.filter((function(e){return!0===e.active})));var n=Ce(s,e.search.phrase);return(0,ke.Z)(n,e.search),{filteredLessons:n,layouts:Ne(n),unfilteredLessons:e.namespace.lessons,search:e.search}}return null}}]),s}(n.Component);De.defaultProps={url:null};var xe=(0,h.Z)(["lessons_page","common"])(De),Ie=s(905),Pe=s(41985);var Te=(0,a.$j)((function(e){return{search:e.search,user:e.user,namespace:e.namespace}}),(function(e){return{addNotification:(0,Pe.pP)(e),showLessonInGallery:(0,P.IH)(e),hideLessonInGallery:(0,P.kl)(e),activateLesson:(0,P.to)(e),deactivateLesson:(0,P.Ek)(e),updateLesson:(0,P.WU)(e),deleteLesson:(0,P.q2)(e),getLessons:(0,P.Hy)(e),getTemplateLessons:(0,P.BO)(e),getIsleFile:(0,P.OD)(e),setLessonOrder:(0,Ie.Vw)(e)}}))(xe)},75033:function(e,t,s){var n=s(42339),a=s.n(n);t.Z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{hours:!0,minutes:!0,seconds:!0};e/=1e3;var s=a()(e/3600);e%=3600;var n=a()(e/60);n<10&&(n="0"+n),e%=60;var o=a()(e);o<10&&(o="0"+o);var l="";return t.hours&&(l+=s),t.minutes&&(l&&(l+=":"),l+=n),t.seconds&&(l&&(l+=":"),l+=o),l}},8819:function(e,t,s){var n=s(86890),a=s.n(n);t.Z=function(e,t){for(var s=!1,n=0;n<t.owners.length;n++){var o=t.owners[n];a()(o)?o.email===e.email&&(s=!0):o===e.id&&(s=!0)}return s}},68692:function(e,t){var s={numeric:!0};t.Z=function(e,t){var n=t.type,a=t.direction;"sequentially"===n?"ascending"===a?e.sort((function(e,t){return e.pos-t.pos})):e.sort((function(e,t){return t.pos-e.pos})):"alphabetically"===n?"ascending"===a?e.sort((function(e,t){var n=e.namespace+e.title,a=t.namespace+t.title;return n.localeCompare(a,void 0,s)})):e.sort((function(e,t){var n=e.namespace+e.title;return(t.namespace+t.title).localeCompare(n,void 0,s)})):"created_at"===n?"ascending"===a?e.sort((function(e,t){return e.createdAt.localeCompare(t.createdAt,void 0,s)})):e.sort((function(e,t){return t.createdAt.localeCompare(e.createdAt,void 0,s)})):"updated_at"===n&&("ascending"===a?e.sort((function(e,t){return e.updatedAt.localeCompare(t.updatedAt,void 0,s)})):e.sort((function(e,t){return t.updatedAt.localeCompare(e.updatedAt,void 0,s)})))}},54584:function(){},30573:function(e,t,s){e.exports=s.p+"static/media/4da50dc471c73bebdc8e.svg"},27316:function(e,t,s){e.exports=s.p+"static/media/c9df90fc9571de99a51f.jpeg"}}]);
//# sourceMappingURL=2118.033866f9.chunk.js.map