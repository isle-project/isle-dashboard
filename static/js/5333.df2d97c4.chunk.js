"use strict";(self.webpackChunkisle_dashboard=self.webpackChunkisle_dashboard||[]).push([[5333],{99352:function(e,t,n){n.r(t),n.d(t,{default:function(){return x}});var r=n(38603),a=n(30322),o=n(91532),s=n.n(o),l=n(58651),i=n(12630),c=n(14224),u=n(30528),m=n(20328),d=n(47331),f=n(87078),p=n(56233),v=n(72454),h=n(81395),g=n(5610),E=n(57927);n(22086);function Z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class y extends r.Component{constructor(e){super(e),Z(this,"handleSubmit",(async e=>{e.preventDefault();const t={password:this.state.password,email:this.state.email};if(""===t.email)this.setState({showInputOverlay:!0,overlayTarget:this.emailInput,invalidInputMessage:"Enter your email address."});else if(""===t.password)this.setState({showInputOverlay:!0,overlayTarget:this.passwordInput,invalidInputMessage:"Enter your password."});else try{const e=await this.props.handleLogin(t),{message:n}=e.data;if("finish-login-via-tfa"===n)this.props.history.push("/login-tfa");else if("ok"===n){const{token:t,id:n}=e.data,r=await this.props.fetchCredentials({token:t,id:n});r&&this.props.getEnrollableCohorts(r)}}catch(n){const e=n.response?n.response.data:n.message;this.setState({showInputOverlay:!0,overlayTarget:"Password is not correct."===e?this.passwordInput:this.emailInput,invalidInputMessage:e},(()=>{setTimeout((()=>{this.setState({showInputOverlay:!1})}),4e3)}))}})),Z(this,"handleInputChange",(e=>{const t=e.target,n=t.value,r=t.name;this.setState({[r]:n})})),this.state={email:"",password:""}}componentDidMount(){const{user:e}=this.props;e&&e.loggedIn&&(this.props.restoreLogin(e),this.props.getEnrollableCohorts(e))}render(){const{t:e,settings:t}=this.props;return r.createElement(r.Fragment,null,r.createElement("div",{className:"login"},r.createElement(c.Z,{className:"login-panel"},r.createElement(c.Z.Header,null,r.createElement(c.Z.Title,{as:"h1",style:{textAlign:"center"}},r.createElement("img",{alt:"ISLE Logo",className:"login-isle-logo",src:"img/isle_logo.svg"}),"ISLE ",r.createElement("small",null,t.siteTitle))),r.createElement(c.Z.Body,null,r.createElement(v.Z,null,r.createElement(p.Z,{controlId:"form-email"},r.createElement(m.Z,null,r.createElement(u.Z,{sm:3},r.createElement(d.Z,null,e("common:email"))),r.createElement(u.Z,{sm:9},r.createElement(f.Z,{name:"email",type:"email",autoComplete:"isle-email",placeholder:e("common:email"),onChange:this.handleInputChange,ref:e=>{this.emailInput=e}})))),r.createElement(p.Z,{controlId:"form-password"},r.createElement(m.Z,null,r.createElement(u.Z,{sm:3},r.createElement(d.Z,null,e("common:password"))),r.createElement(u.Z,{sm:9},r.createElement(f.Z,{name:"password",type:"password",autoComplete:"isle-password",placeholder:e("common:password"),onChange:this.handleInputChange,ref:e=>{this.passwordInput=e}})))),r.createElement(p.Z,null,r.createElement(i.Z,{className:"centered",variant:"primary",onClick:this.handleSubmit,type:"submit"},e("common:login"))))),r.createElement(c.Z.Footer,{style:{background:"rgba(255,255,255,0.6)",textAlign:"right"}},r.createElement(E.rU,{to:"/forgot-password"},e("common:forgot-password")),t.allowUserRegistrations?r.createElement(r.Fragment,null,r.createElement("span",null," | "),r.createElement(E.rU,{to:"/signup"},e("common:register"))):null)),t.brandingLogo?r.createElement("img",{className:"login-branding-logo",src:t.brandingLogo,alt:"Branded Logo"}):null),r.createElement(h.Z,{show:this.state.showInputOverlay,target:this.state.overlayTarget,placement:"right",containerPadding:20},r.createElement(g.Z,{id:"popover-contained",title:"Not valid"},this.state.invalidInputMessage)))}}y.propTypes={fetchCredentials:s().func.isRequired,getEnrollableCohorts:s().func.isRequired,handleLogin:s().func.isRequired,restoreLogin:s().func.isRequired,settings:s().object,user:s().object.isRequired},y.defaultProps={settings:{}};var b=(0,l.Z)(["login","common"])(y),w=n(53322),C=n(39285),N=n(96162);var x=(0,a.$j)((function(e){return{user:e.user,settings:e.settings}}),(function(e){return{handleLogin:(0,N.IJ)(e),restoreLogin:(0,N.Dv)(e),fetchCredentials:(0,w.GI)(e),getEnrollableCohorts:(0,C.R9)(e)}}))(b)},62489:function(e,t,n){n.d(t,{Z:function(){return a}});var r=/-(.)/g;function a(e){return e.replace(r,(function(e,t){return t.toUpperCase()}))}},14224:function(e,t,n){n.d(t,{Z:function(){return P}});var r=n(87462),a=n(63366),o=n(68761),s=n.n(o),l=n(38603),i=n(54447),c=n(51906),u=n(49132),m=n(65044),d=["bsPrefix","className","variant","as"],f=l.forwardRef((function(e,t){var n=e.bsPrefix,o=e.className,c=e.variant,u=e.as,m=void 0===u?"img":u,f=(0,a.Z)(e,d),p=(0,i.vE)(n,"card-img");return l.createElement(m,(0,r.Z)({ref:t,className:s()(c?p+"-"+c:p,o)},f))}));f.displayName="CardImg",f.defaultProps={variant:null};var p=f,v=["bsPrefix","className","bg","text","border","body","children","as"],h=(0,u.Z)("h5"),g=(0,u.Z)("h6"),E=(0,c.Z)("card-body"),Z=(0,c.Z)("card-title",{Component:h}),y=(0,c.Z)("card-subtitle",{Component:g}),b=(0,c.Z)("card-link",{Component:"a"}),w=(0,c.Z)("card-text",{Component:"p"}),C=(0,c.Z)("card-header"),N=(0,c.Z)("card-footer"),x=(0,c.Z)("card-img-overlay"),I=l.forwardRef((function(e,t){var n=e.bsPrefix,o=e.className,c=e.bg,u=e.text,d=e.border,f=e.body,p=e.children,h=e.as,g=void 0===h?"div":h,Z=(0,a.Z)(e,v),y=(0,i.vE)(n,"card"),b=(0,l.useMemo)((function(){return{cardHeaderBsPrefix:y+"-header"}}),[y]);return l.createElement(m.Z.Provider,{value:b},l.createElement(g,(0,r.Z)({ref:t},Z,{className:s()(o,y,c&&"bg-"+c,u&&"text-"+u,d&&"border-"+d)}),f?l.createElement(E,null,p):p))}));I.displayName="Card",I.defaultProps={body:!1},I.Img=p,I.Title=Z,I.Subtitle=y,I.Body=E,I.Link=b,I.Text=w,I.Header=C,I.Footer=N,I.ImgOverlay=x;var P=I},65044:function(e,t,n){var r=n(38603).createContext(null);r.displayName="CardContext",t.Z=r},5610:function(e,t,n){n.d(t,{Z:function(){return v}});var r=n(87462),a=n(63366),o=n(68761),s=n.n(o),l=n(38603),i=(n(17339),n(54447)),c=["as","bsPrefix","className","children"],u=l.forwardRef((function(e,t){var n=e.as,o=void 0===n?"div":n,u=e.bsPrefix,m=e.className,d=e.children,f=(0,a.Z)(e,c);return u=(0,i.vE)(u,"popover-header"),l.createElement(o,(0,r.Z)({ref:t},f,{className:s()(u,m)}),d)})),m=["as","bsPrefix","className","children"],d=l.forwardRef((function(e,t){var n=e.as,o=void 0===n?"div":n,c=e.bsPrefix,u=e.className,d=e.children,f=(0,a.Z)(e,m);return c=(0,i.vE)(c,"popover-body"),l.createElement(o,(0,r.Z)({ref:t},f,{className:s()(u,c)}),d)})),f=["bsPrefix","placement","className","style","children","content","arrowProps","popper","show"],p=l.forwardRef((function(e,t){var n=e.bsPrefix,o=e.placement,c=e.className,u=e.style,m=e.children,p=e.content,v=e.arrowProps,h=(e.popper,e.show,(0,a.Z)(e,f)),g=(0,i.vE)(n,"popover"),E=((null==o?void 0:o.split("-"))||[])[0];return l.createElement("div",(0,r.Z)({ref:t,role:"tooltip",style:u,"x-placement":E,className:s()(c,g,E&&"bs-popover-"+E)},h),l.createElement("div",(0,r.Z)({className:"arrow"},v)),p?l.createElement(d,null,m):m)}));p.defaultProps={placement:"right"},p.Title=u,p.Content=d;var v=p},20328:function(e,t,n){var r=n(87462),a=n(63366),o=n(68761),s=n.n(o),l=n(38603),i=n(54447),c=["bsPrefix","className","noGutters","as"],u=["xl","lg","md","sm","xs"],m=l.forwardRef((function(e,t){var n=e.bsPrefix,o=e.className,m=e.noGutters,d=e.as,f=void 0===d?"div":d,p=(0,a.Z)(e,c),v=(0,i.vE)(n,"row"),h=v+"-cols",g=[];return u.forEach((function(e){var t,n=p[e];delete p[e];var r="xs"!==e?"-"+e:"";null!=(t=null!=n&&"object"===typeof n?n.cols:n)&&g.push(""+h+r+"-"+t)})),l.createElement(f,(0,r.Z)({ref:t},p,{className:s().apply(void 0,[o,v,m&&"no-gutters"].concat(g))}))}));m.displayName="Row",m.defaultProps={noGutters:!1},t.Z=m},49132:function(e,t,n){var r=n(87462),a=n(38603),o=n(68761),s=n.n(o);t.Z=function(e){return a.forwardRef((function(t,n){return a.createElement("div",(0,r.Z)({},t,{ref:n,className:s()(t.className,e)}))}))}},57927:function(e,t,n){n.d(t,{rU:function(){return v}});var r=n(22109),a=n(94578),o=n(38603),s=n(45265),l=(n(91532),n(87462)),i=n(63366),c=n(69223);o.Component;o.Component;var u=function(e,t){return"function"===typeof e?e(t):e},m=function(e,t){return"string"===typeof e?(0,s.ob)(e,null,null,t):e},d=function(e){return e},f=o.forwardRef;"undefined"===typeof f&&(f=d);var p=f((function(e,t){var n=e.innerRef,r=e.navigate,a=e.onClick,s=(0,i.Z)(e,["innerRef","navigate","onClick"]),c=s.target,u=(0,l.Z)({},s,{onClick:function(e){try{a&&a(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||c&&"_self"!==c||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),r())}});return u.ref=d!==f&&t||n,o.createElement("a",u)}));var v=f((function(e,t){var n=e.component,a=void 0===n?p:n,v=e.replace,h=e.to,g=e.innerRef,E=(0,i.Z)(e,["component","replace","to","innerRef"]);return o.createElement(r.s6.Consumer,null,(function(e){e||(0,c.Z)(!1);var n=e.history,r=m(u(h,e.location),e.location),i=r?n.createHref(r):"",p=(0,l.Z)({},E,{href:i,navigate:function(){var t=u(h,e.location),r=(0,s.Ep)(e.location)===(0,s.Ep)(m(t));(v||r?n.replace:n.push)(t)}});return d!==f?p.ref=t||g:p.innerRef=g,o.createElement(a,p)}))})),h=function(e){return e},g=o.forwardRef;"undefined"===typeof g&&(g=h);g((function(e,t){var n=e["aria-current"],a=void 0===n?"page":n,s=e.activeClassName,d=void 0===s?"active":s,f=e.activeStyle,p=e.className,E=e.exact,Z=e.isActive,y=e.location,b=e.sensitive,w=e.strict,C=e.style,N=e.to,x=e.innerRef,I=(0,i.Z)(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return o.createElement(r.s6.Consumer,null,(function(e){e||(0,c.Z)(!1);var n=y||e.location,s=m(u(N,n),n),i=s.pathname,P=i&&i.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),R=P?(0,r.LX)(n.pathname,{path:P,exact:E,sensitive:b,strict:w}):null,k=!!(Z?Z(R,n):R),L="function"===typeof p?p(k):p,S="function"===typeof C?C(k):C;k&&(L=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(L,d),S=(0,l.Z)({},S,f));var T=(0,l.Z)({"aria-current":k&&a||null,className:L,style:S,to:s},I);return h!==g?T.ref=t||x:T.innerRef=x,o.createElement(v,T)}))}))},22086:function(){}}]);
//# sourceMappingURL=5333.df2d97c4.chunk.js.map