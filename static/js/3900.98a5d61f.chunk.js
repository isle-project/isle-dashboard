/*! For license information please see 3900.98a5d61f.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkisle_dashboard=self.webpackChunkisle_dashboard||[]).push([[3900],{23218:function(e,t,a){a.r(t);var n=a(87757),r=a.n(n),o=a(15861),l=a(15671),i=a(43144),s=a(97326),c=a(60136),u=a(29388),d=a(4942),m=a(41488),p=a(10077),f=a.n(p),v=a(25472),h=a(93391),g=a(9050),Z=a(70048),E=a(47701),y=a(47355),D=a(35683),x=a.n(D),b=a(63834),C=a(42263),k=a(96027),w=a(37122),T=a(25991),N=a(98032),S=a(52428),P=f()("isle-dashboard:admin"),F=function(e){(0,c.Z)(a,e);var t=(0,u.Z)(a);function a(e){var n;return(0,l.Z)(this,a),n=t.call(this,e),(0,d.Z)((0,s.Z)(n),"createColumns",(function(){var e=n.props.t;return[(0,w.Z)({Header:e("common:type"),id:"type",accessor:"type",maxWidth:200,style:{marginTop:"8px",color:"darkslategrey"}}),(0,T.Z)({Header:e("common:time"),accessor:"time",style:{marginTop:"2px",color:"darkslategrey"},maxWidth:150,t:e}),{Header:e("common:data"),accessor:"data",style:{marginTop:"2px",color:"darkslategrey",fontSize:24,textAlign:"center",cursor:"pointer"},Cell:function(e){if(e.value){var t=m.createElement(g.Z,{id:"popover-data",style:{maxWidth:400}},m.createElement(g.Z.Title,{as:"h3"},"Data"),m.createElement(g.Z.Content,{style:{backgroundColor:"lightblue"}},m.createElement("pre",null,JSON.stringify(e.value,null,2))));return m.createElement(h.Z,{trigger:"click",placement:"right",overlay:t},m.createElement("i",{className:"data-icon fas fa-tablet-alt"}))}return null},maxWidth:120,resizable:!1,filterable:!1,sortable:!1},(0,k.Z)({Header:e("common:done"),accessor:"done",trueLabel:e("common:done"),falseLabel:e("common:not-done")}),{Header:"Pic",accessor:"user.picture",Cell:function(e){return m.createElement("img",{className:"table-pic",src:"".concat(b.ZP,"/thumbnail/").concat(e.value),alt:"Profile Pic"})},style:{marginTop:"8px",color:"darkslategrey"},maxWidth:46,minWidth:46,filterable:!1,resizable:!1,sortable:!1},(0,w.Z)({Header:e("common:name"),accessor:"user.name",style:{marginTop:"8px",color:"darkslategrey"}}),(0,w.Z)({Header:e("common:email"),accessor:"user.email",style:{marginTop:"8px",color:"darkslategrey"}}),{Header:e("common:actions"),Cell:function(t){return m.createElement("div",null,m.createElement(h.Z,{placement:"bottom",overlay:m.createElement(E.Z,{id:"delete_event"},e("delete-event"))},m.createElement(Z.Z,{variant:"outline-secondary",style:{marginLeft:8},onClick:n.askToDeleteSelectedEventFactory(t.row._original),"aria-label":e("delete-event")},m.createElement("div",{className:"fa fa-trash-alt"}))),m.createElement(h.Z,{placement:"bottom",overlay:m.createElement(E.Z,{id:"trigger_event"},e("trigger-event"))},m.createElement(Z.Z,{variant:"outline-secondary",style:{marginLeft:8},onClick:n.triggerEventFactory(t.row._original),"aria-label":e("trigger-event")},m.createElement("div",{className:"fas fa-share-square"}))))},resizable:!1,filterable:!1,sortable:!1}]})),(0,d.Z)((0,s.Z)(n),"triggerEventFactory",(function(e){return function(){n.props.triggerEvent(e._id)}})),(0,d.Z)((0,s.Z)(n),"askToDeleteSelectedEventFactory",(function(e){return function(){n.setState({showDeleteModal:!n.state.showDeleteModal,selectedEvent:e})}})),(0,d.Z)((0,s.Z)(n),"deleteSelectedEvent",(function(){n.setState({showDeleteModal:!1},(0,o.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P("Delete event with id ".concat(n.state.selectedEvent._id,"...")),e.next=3,n.props.deleteEvent(n.state.selectedEvent._id);case 3:P("Retrieve events from server..."),n.props.getEvents();case 5:case"end":return e.stop()}}),e)}))))})),(0,d.Z)((0,s.Z)(n),"toggleDeleteModal",(function(){n.setState({showDeleteModal:!n.state.showDeleteModal})})),(0,d.Z)((0,s.Z)(n),"toggleExplorer",(function(){n.setState({showExplorer:!n.state.showExplorer})})),n.columns=n.createColumns(),n.state={showDeleteModal:!1,selectedEvent:null,showExplorer:!1},n}return(0,i.Z)(a,[{key:"componentDidMount",value:function(){this.props.getEvents()}},{key:"render",value:function(){var e=this.props.t;if(this.state.showExplorer){var t=["user","done","time","type"],a=(0,N.Z)(this.props.admin.events);return(a=x()(a,t)).user=a.user.map((function(e){return e?e.email:null})),m.createElement(S.Z,{title:e("explorer-events-title"),data:a,categorical:t,quantitative:[],close:this.toggleExplorer})}return m.createElement(m.Fragment,null,m.createElement(y.Z,{data:this.props.admin.events,columns:this.columns,onButtonClick:this.toggleExplorer,t:this.props.t}),this.state.showDeleteModal?m.createElement(C.Z,{title:e("delete-event"),message:m.createElement("span",null,e("delete-event-confirm")),close:this.toggleDeleteModal,show:this.state.showDeleteModal,onConfirm:this.deleteSelectedEvent}):null)}}]),a}(m.Component);t.default=(0,v.Z)(["admin","common"])(F)},42263:function(e,t,a){var n=a(41488),r=a(25472),o=a(70048),l=a(3252),i=function(e){return n.createElement(l.Z,{show:e.show,onHide:e.close},n.createElement(l.Z.Header,null,n.createElement(l.Z.Title,{as:"h3"},e.title)),n.createElement(l.Z.Body,null,e.message),n.createElement(l.Z.Footer,null,n.createElement(o.Z,{onClick:e.close},e.t("cancel")),n.createElement(o.Z,{variant:"danger",onClick:e.onConfirm},e.t("confirm"))))};i.defaultProps={close:function(){},message:"",onConfirm:function(){},show:!1,title:""},t.Z=(0,r.Z)(["common"])(i)},47355:function(e,t,a){a.d(t,{Z:function(){return g}});var n=a(87462),r=a(15671),o=a(43144),l=a(97326),i=a(60136),s=a(29388),c=a(4942),u=a(41488),d=a(75742),m=a(70048),p=a(87095),f=a(93391),v=a(47701),h=(a(36561),function(e){(0,i.Z)(a,e);var t=(0,s.Z)(a);function a(){var e;(0,r.Z)(this,a);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),(0,c.Z)((0,l.Z)(e),"getProps",(function(){return{id:e.props.id||"dashboard-table"}})),e}return(0,o.Z)(a,[{key:"render",value:function(){var e=this,t=this.props.t;return u.createElement(u.Fragment,null,u.createElement(d.Z,(0,n.Z)({},this.props,{filterable:!0,className:"dashboard-table ".concat(this.props.className),data:this.props.data,columns:this.props.columns,previousText:t("common:previous"),nextText:t("common:next"),loadingText:t("common:loading"),noDataText:t("common:no-rows-found"),pageText:t("common:page"),ofText:t("common:of"),rowsText:t("common:rows"),ref:function(t){e.table=t},getProps:this.getProps})),this.props.onButtonClick?u.createElement(p.Z,{vertical:!0,style:{float:"right",marginRight:-9}},u.createElement(f.Z,{placement:"left",overlay:u.createElement(v.Z,{id:"explorer-tooltip"},t("common:data-explorer"))},u.createElement(m.Z,{"aria-label":t("common:data-explorer"),variant:"primary",style:{marginBottom:8},onClick:this.props.onButtonClick},u.createElement("i",{className:"fas fa-chart-bar"})))):null)}}]),a}(u.Component));h.defaultProps={className:"",t:function(){}};var g=h},52428:function(e,t,a){var n=(0,a(31835).Z)((function(){return Promise.all([a.e(7704),a.e(5999)]).then(a.bind(a,45369))}));t.Z=n},96027:function(e,t,a){var n=a(41488);t.Z=function(e){var t,a,r=e.Header,o=e.accessor,l=e.trueLabel,i=e.falseLabel,s=e.printLabels,c=void 0!==s&&s,u=e.maxWidth;return c?(t=function(e){return!0===e.value?l:!1===e.value?i:null},a={marginTop:"8px",color:"darkslategrey"}):(t=function(e){return e.value?n.createElement("i",{className:"far fa-check-square"}):null},a={marginTop:"2px",color:"darkslategrey",fontSize:24,textAlign:"center"}),{Header:r,accessor:o,style:a,Cell:t,filterMethod:function(e,t){if("all"===e.value)return!0;var a=e.pivotId||e.id;return void 0===t[a]||String(t[a])===e.value},Filter:function(e){var t,a=e.filter,r=e.onChange,o=function(e){var t=e.target.value;r(t)};return t=a?a.value:"all",n.createElement("select",{onBlur:o,onChange:o,style:{width:"100%",backgroundColor:"ghostwhite"},value:t},n.createElement("option",{value:"all"},"Show All"),n.createElement("option",{value:!0},l),n.createElement("option",{value:!1},i))},maxWidth:void 0===u?150:u}}},25991:function(e,t,a){var n=a(15671),r=a(43144),o=a(97326),l=a(60136),i=a(29388),s=a(4942),c=a(41488),u=a(34513),d=a(93391),m=a(9050),p=a(70048),f=(a(92545),function(e){(0,l.Z)(a,e);var t=(0,i.Z)(a);function a(e){var r;return(0,n.Z)(this,a),r=t.call(this,e),(0,s.Z)((0,o.Z)(r),"handleDatesChange",(function(e){var t=e.startDate,a=e.endDate;r.setState({startDate:t,endDate:a},(function(){r.props.onDatesChange(r.state)}))})),(0,s.Z)((0,o.Z)(r),"handleReset",(function(){r.setState({startDate:r.props.minDate,endDate:r.props.maxDate},(function(){r.props.onDatesChange(r.state)}))})),r.state={startDate:e.startDate,endDate:e.endDate},r}return(0,r.Z)(a,[{key:"componentDidUpdate",value:function(e){this.props.startDate===e.startDate&&this.props.endDate===e.endDate||this.setState({startDate:this.props.startDate,endDate:this.props.endDate})}},{key:"render",value:function(){var e=this;return c.createElement(c.Fragment,null,c.createElement(u.DateRangePicker,{startDate:this.state.startDate,endDate:this.state.endDate,startDateId:"start_date_input",endDateId:"end_date_input",onDatesChange:this.handleDatesChange,focusedInput:this.state.focusedInput,onFocusChange:function(t){return e.setState({focusedInput:t})},isOutsideRange:function(){return!1}}),c.createElement(p.Z,{"aria-label":this.props.t("common:close"),variant:"warning",onClick:this.handleReset,style:{paddingTop:8,paddingLeft:16,paddingRight:16,paddingBottom:8,fontSize:20}},"x"))}}]),a}(c.Component)),v=function(e){return new Date(e.value).toLocaleString()};t.Z=function(e){var t=e.Header,a=e.accessor,n=e.Cell,r=e.style,o=e.startDate,l=e.endDate,i=e.t,s=e.maxWidth;return{Header:t,accessor:a,style:r,Cell:n||v,filterMethod:function(e,t){if(!e.value)return!0;var a=e.value,n=a.startDate,r=a.endDate,o=t[e.pivotId||e.id].getTime();return n&&r?o>=n.valueOf()&&o<=r.valueOf():n?o>=n.valueOf():!r||o<=r.valueOf()},Filter:function(e){var t=e.filter,a=e.onChange,n=t&&t.value||{},r=c.createElement(m.Z,{id:"popover-data",style:{maxWidth:400}},c.createElement(m.Z.Title,{as:"h3"},i("common:dates")),c.createElement(m.Z.Content,{style:{backgroundColor:"grey"}},c.createElement(f,{startDate:n.startDate||o,minDate:o,maxDate:l,endDate:n.endDate||l,onDatesChange:function(e){var t=e.startDate,n=e.endDate;a({startDate:t,endDate:n})},t:i})));return c.createElement(d.Z,{trigger:"click",placement:"right",overlay:r},c.createElement(p.Z,{"aria-label":i("common:toggle-calendar"),size:"sm",style:{float:"left",marginLeft:6},variant:"secondary"},c.createElement("i",{className:"far fa-calendar-alt"})))},maxWidth:void 0===s?150:s}}},37122:function(e,t,a){var n=a(41488),r=a(75018),o=a(76594);t.Z=function(e){var t=e.id,a=e.Header,l=e.Cell,i=e.accessor,s=e.maxWidth,c=void 0===s?150:s,u=e.minWidth,d=e.filterMethod;u>c&&(c=u);var m={id:t,Header:a,accessor:i,Cell:l,filterMethod:d||o.Z,Filter:function(e){e.filter;var t=e.onChange;return n.createElement(r.Z,{"aria-label":a,autoComplete:"none",onChange:function(e){t(e.target.value)}})}};return c&&(m.maxWidth=c),u&&(m.minWidth=u),m}},76594:function(e,t,a){var n=a(33837),r=a.n(n),o=a(12699),l=a.n(o);t.Z=function(e,t){var a=t[e.id]||"";return r()(l()(a),l()(e.value))}},34867:function(e,t,a){var n=a(55037),r=a(83936),o=a(20842),l=r(o);n(l,"primitives",r(o.isPrimitive)),n(l,"objects",r(o.isObject)),e.exports=l},35683:function(e,t,a){var n=a(43805);e.exports=n},43805:function(e,t,a){var n=a(20842).isPrimitive,r=a(34867).primitives,o=a(12087);e.exports=function(e,t){var a,l,i;if("object"!==typeof e||null===e)throw new TypeError("invalid argument. First argument must be an object. Value: `"+e+"`.");if(a={},n(t))return o(e,t)&&(a[t]=e[t]),a;if(r(t)){for(i=0;i<t.length;i++)l=t[i],o(e,l)&&(a[l]=e[l]);return a}throw new TypeError("invalid argument. Second argument must be either a string primitive or an array of string primitives. Value: `"+t+"`.")}},61422:function(e,t,a){var n=a(87462),r=a(63366),o=a(78265),l=a.n(o),i=a(41488),s=a(83603),c=a.n(s),u=["as","className","type","tooltip"],d={type:c().string,tooltip:c().bool,as:c().elementType},m=i.forwardRef((function(e,t){var a=e.as,o=void 0===a?"div":a,s=e.className,c=e.type,d=void 0===c?"valid":c,m=e.tooltip,p=void 0!==m&&m,f=(0,r.Z)(e,u);return i.createElement(o,(0,n.Z)({},f,{ref:t,className:l()(s,d+"-"+(p?"tooltip":"feedback"))}))}));m.displayName="Feedback",m.propTypes=d,t.Z=m},67064:function(e,t,a){var n=a(41488).createContext({controlId:void 0});t.Z=n},75018:function(e,t,a){var n=a(87462),r=a(63366),o=a(78265),l=a.n(o),i=(a(84910),a(41488)),s=(a(47815),a(61422)),c=a(67064),u=a(38674),d=["bsPrefix","bsCustomPrefix","type","size","htmlSize","id","className","isValid","isInvalid","plaintext","readOnly","custom","as"],m=i.forwardRef((function(e,t){var a,o,s=e.bsPrefix,m=e.bsCustomPrefix,p=e.type,f=e.size,v=e.htmlSize,h=e.id,g=e.className,Z=e.isValid,E=void 0!==Z&&Z,y=e.isInvalid,D=void 0!==y&&y,x=e.plaintext,b=e.readOnly,C=e.custom,k=e.as,w=void 0===k?"input":k,T=(0,r.Z)(e,d),N=(0,i.useContext)(c.Z).controlId,S=C?[m,"custom"]:[s,"form-control"],P=S[0],F=S[1];if(s=(0,u.vE)(P,F),x)(o={})[s+"-plaintext"]=!0,a=o;else if("file"===p){var H;(H={})[s+"-file"]=!0,a=H}else if("range"===p){var M;(M={})[s+"-range"]=!0,a=M}else if("select"===w&&C){var W;(W={})[s+"-select"]=!0,W[s+"-select-"+f]=f,a=W}else{var _;(_={})[s]=!0,_[s+"-"+f]=f,a=_}return i.createElement(w,(0,n.Z)({},T,{type:p,size:v,ref:t,readOnly:b,id:h||N,className:l()(g,a,E&&"is-valid",D&&"is-invalid")}))}));m.displayName="FormControl",t.Z=Object.assign(m,{Feedback:s.Z})},25237:function(e,t,a){a.d(t,{Z:function(){return d}});var n=a(87462),r=a(63366),o=a(78265),l=a.n(o),i=a(96358),s=a(41488),c=a(38674),u=["className","bsPrefix","as"];function d(e,t){var a,o=void 0===t?{}:t,d=o.displayName,m=void 0===d?(a=e)[0].toUpperCase()+(0,i.Z)(a).slice(1):d,p=o.Component,f=o.defaultProps,v=s.forwardRef((function(t,a){var o=t.className,i=t.bsPrefix,d=t.as,m=void 0===d?p||"div":d,f=(0,r.Z)(t,u),v=(0,c.vE)(i,e);return s.createElement(m,(0,n.Z)({ref:a,className:l()(o,v)},f))}));return v.defaultProps=f,v.displayName=m,v}}}]);
//# sourceMappingURL=3900.98a5d61f.chunk.js.map