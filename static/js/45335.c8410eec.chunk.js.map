{"version":3,"sources":["components/profile-page/profile_pic_modal.js","../node_modules/react-avatar-editor/dist/index.js"],"names":["ProfilePicModal","props","ext","editor","canvas","getImageScaledToCanvas","toBlob","img","avatarData","FormData","thumbnailData","newWidth","newHeight","tmpCanvas","document","createElement","width","height","getContext","drawImage","getResizedCanvas","thumbnail","id","user","filename","state","zoom","rotate","thumbnailName","append","uploadProfilePic","e","file","target","files","path","name","setState","actualFile","Number","value","t","Fragment","className","ref","image","border","crossOrigin","color","scale","as","Row","controlId","column","sm","step","type","defaultValue","min","max","onChange","changeZoom","degrees","picture","substr","lastIndexOf","prevProps","this","onHide","show","dialogClassName","closeButton","style","paddingBottom","marginBottom","htmlFor","cursor","variant","display","handleFileSelection","accept","paddingLeft","renderAvatarEditor","block","onClick","rotateFactory","float","handleUpload","Component","module","exports","o","default","n","i","r","length","enumerable","configurable","writable","Object","defineProperty","key","s","u","assign","arguments","prototype","hasOwnProperty","call","apply","a","keys","getOwnPropertySymbols","filter","getOwnPropertyDescriptor","push","y","forEach","getOwnPropertyDescriptors","defineProperties","h","setPrototypeOf","getPrototypeOf","__proto__","c","l","indexOf","propertyIsEnumerable","d","ReferenceError","p","Reflect","construct","sham","Proxy","Date","toString","constructor","m","Array","isArray","Symbol","iterator","next","done","return","g","TypeError","f","slice","from","test","v","Promise","Image","onload","onerror","match","src","b","w","window","navigator","msMaxTouchPoints","M","File","O","touch","react","down","mouseDown","drag","move","mouseMove","up","mouseUp","native","desktop","I","P","devicePixelRatio","C","x","create","my","mx","getInitialSize","resource","backgroundColor","onImageReady","onLoadSuccess","clearRect","event","preventDefault","onMouseUp","targetTouches","pageX","clientX","pageY","clientY","getCroppingRect","Math","PI","cos","sin","getXScale","getYScale","onPositionChange","onMouseMove","disableHiDPIScaling","loadImage","paint","get","addEventListener","removeEventListener","passive","handleMouseMove","handleMouseUp","clearImage","paintImage","position","onImageChange","disableCanvasRotation","getBorders","isVertical","translate","fillStyle","fillRect","getDimensions","disableBoundaryChecks","loadingImage","FileReader","result","readAsDataURL","then","handleImageReady","catch","onLoadFailure","calculatePosition","save","globalCompositeOperation","restore","join","borderRadius","beginPath","rect","arc","lineTo","fill","touchAction","handleMouseDown","setCanvas","number","oneOfType","string","concat","instanceOf","arrayOf","shape","oneOf","func","bool"],"mappings":"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","file":"static/js/45335.c8410eec.chunk.js","sourcesContent":["/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport path from 'path';\nimport Badge from 'react-bootstrap/Badge';\nimport Button from 'react-bootstrap/Button';\nimport Modal from 'react-bootstrap/Modal';\nimport Form from 'react-bootstrap/Form';\nimport FormControl from 'react-bootstrap/FormControl';\nimport Col from 'react-bootstrap/Col';\nimport Row from 'react-bootstrap/Row';\nimport AvatarEditor from 'react-avatar-editor';\n\n\n// FUNCTIONS //\n\nfunction getResizedCanvas( canvas, newWidth, newHeight ) {\n\tconst tmpCanvas = document.createElement( 'canvas' );\n\ttmpCanvas.width = newWidth;\n\ttmpCanvas.height = newHeight;\n\tconst ctx = tmpCanvas.getContext( '2d' );\n\tctx.drawImage( canvas, 0, 0, canvas.width, canvas.height, 0, 0, newWidth, newHeight );\n\treturn tmpCanvas;\n}\n\n\n// MAIN //\n\nclass ProfilePicModal extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tlet ext;\n\t\tif ( props.user.picture ) {\n\t\t\text = props.user.picture.substr( props.user.picture.lastIndexOf( '.' ) );\n\t\t} else {\n\t\t\text = null;\n\t\t}\n\t\tthis.state = {\n\t\t\tactualFile: props.user.picture,\n\t\t\tzoom: 1.2,\n\t\t\text,\n\t\t\trotate: 0\n\t\t};\n\t}\n\n\tcomponentDidUpdate( prevProps ) {\n\t\tif ( this.props.user.picture !== prevProps.user.picture ) {\n\t\t\tthis.setState({\n\t\t\t\tactualFile: this.props.user.picture,\n\t\t\t\trotate: 0,\n\t\t\t\tzoom: 1.2\n\t\t\t});\n\t\t}\n\t}\n\n\thandleUpload = () => {\n\t\tif ( this.editor ) {\n\t\t\tconst canvas = this.editor.getImageScaledToCanvas();\n\t\t\tcanvas.toBlob( img => {\n\t\t\t\tconst avatarData = new FormData();\n\t\t\t\tconst thumbnailData = new FormData();\n\t\t\t\tconst tn = getResizedCanvas( canvas, 80, 80 );\n\t\t\t\ttn.toBlob( thumbnail => {\n\t\t\t\t\tconst id = this.props.user.id;\n\t\t\t\t\tconst filename = `${id}_${this.state.zoom}_${this.state.rotate}${this.state.ext}`;\n\t\t\t\t\tconst thumbnailName = filename;\n\t\t\t\t\tavatarData.append( 'avatar', img, filename );\n\t\t\t\t\tthumbnailData.append( 'thumbnail', thumbnail, thumbnailName );\n\t\t\t\t\tthis.props.uploadProfilePic({\n\t\t\t\t\t\tavatarData: avatarData,\n\t\t\t\t\t\tthumbnailData: thumbnailData\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n\n\thandleFileSelection = (e) => {\n\t\tconst file = e.target.files[ 0 ];\n\t\tif ( file ) {\n\t\t\tconst ext = path.extname( file.name );\n\t\t\tthis.setState({\n\t\t\t\tactualFile: file,\n\t\t\t\text: ext\n\t\t\t});\n\t\t}\n\t}\n\n\tchangeZoom = (e) => {\n\t\tthis.setState({\n\t\t\tzoom: Number( e.target.value )\n\t\t});\n\t}\n\n\trenderAvatarEditor = () => {\n\t\tconst t = this.props.t;\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<AvatarEditor\n\t\t\t\t\tclassName=\"avatarEditor\"\n\t\t\t\t\tref={(editor) => {\n\t\t\t\t\t\tthis.editor = editor;\n\t\t\t\t\t}}\n\t\t\t\t\timage={this.state.actualFile}\n\t\t\t\t\twidth={200}\n\t\t\t\t\theight={200}\n\t\t\t\t\tborder={[80, 50]}\n\t\t\t\t\tcrossOrigin='anonymous'\n\t\t\t\t\tcolor={[110, 98, 98, 0.29]} // RGBA\n\t\t\t\t\tscale={this.state.zoom}\n\t\t\t\t\trotate={this.state.rotate}\n\t\t\t\t/>\n\t\t\t\t<Form.Group as={Row} controlId=\"form-zoom\">\n\t\t\t\t\t<Form.Label column sm=\"2\">{t('zoom')}</Form.Label>\n\t\t\t\t\t<Col sm=\"10\">\n\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\tstep={0.05}\n\t\t\t\t\t\t\ttype=\"range\"\n\t\t\t\t\t\t\tdefaultValue={1} min={0.5} max={3}\n\t\t\t\t\t\t\tonChange={this.changeZoom}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Col>\n\t\t\t\t</Form.Group>\n\t\t\t</Fragment>\n\t\t);\n\t}\n\n\trotateFactory = ( degrees ) => {\n\t\treturn () => {\n\t\t\tthis.setState({\n\t\t\t\trotate: this.state.rotate + degrees\n\t\t\t});\n\t\t};\n\t}\n\n\trender() {\n\t\tconst { t } = this.props;\n\t\treturn (\n\t\t\t<Modal\n\t\t\t\tonHide={this.props.onHide}\n\t\t\t\tshow={this.props.show}\n\t\t\t\tdialogClassName=\"profile-pic-modal\"\n\t\t\t>\n\t\t\t\t<Modal.Header closeButton >\n\t\t\t\t\t<Modal.Title as=\"h3\">{t('profile-picture')}</Modal.Title>\n\t\t\t\t</Modal.Header>\n\t\t\t\t<Modal.Body style={{ paddingBottom: 0 }}>\n\t\t\t\t\t<Form.Group style={{ marginBottom: 0 }}>\n\t\t\t\t\t\t<Form.Label htmlFor=\"imageUpload\" style={{ cursor: 'pointer' }}>\n\t\t\t\t\t\t\t<h3><Badge variant=\"success\">{t('select-file')}</Badge></h3>\n\t\t\t\t\t\t</Form.Label>\n\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\tid=\"imageUpload\"\n\t\t\t\t\t\t\tstyle={{ display: 'none' }}\n\t\t\t\t\t\t\ttype=\"file\"\n\t\t\t\t\t\t\tonChange={this.handleFileSelection}\n\t\t\t\t\t\t\taccept=\"image/*\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<span style={{ paddingLeft: 10 }}>\n\t\t\t\t\t\t\t{t('click-to-upload')}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</Form.Group>\n\t\t\t\t\t{ this.renderAvatarEditor() }\n\t\t\t\t\t<Form.Group as={Row} controlId=\"form-rotate\">\n\t\t\t\t\t\t<Form.Label column sm=\"2\">{t('rotate')}</Form.Label>\n\t\t\t\t\t\t<Col sm=\"5\">\n\t\t\t\t\t\t\t<Button block variant=\"secondary\" onClick={this.rotateFactory( -90 )}>\n\t\t\t\t\t\t\t\t{t('left')}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t<Col sm=\"5\">\n\t\t\t\t\t\t\t<Button block variant=\"secondary\" style={{ float: 'right' }} onClick={this.rotateFactory( 90 )}>\n\t\t\t\t\t\t\t\t{t('right')}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t</Form.Group>\n\t\t\t\t</Modal.Body>\n\t\t\t\t<Modal.Footer>\n\t\t\t\t\t<Button onClick={this.handleUpload}>\n\t\t\t\t\t\t{t('save-and-close')}\n\t\t\t\t\t</Button>\n\t\t\t\t</Modal.Footer>\n\t\t\t</Modal>\n\t\t);\n\t}\n}\n\n\n// PROPERTIES //\n\nProfilePicModal.propTypes = {\n\tonHide: PropTypes.func.isRequired,\n\tshow: PropTypes.bool.isRequired,\n\tt: PropTypes.func.isRequired,\n\tuploadProfilePic: PropTypes.func.isRequired,\n\tuser: PropTypes.object.isRequired\n};\n\n\n// EXPORTS //\n\nexport default ProfilePicModal;\n","!function (e, t) {\n  \"object\" == typeof exports && \"undefined\" != typeof module ? module.exports = t(require(\"prop-types\"), require(\"react\")) : \"function\" == typeof define && define.amd ? define([\"prop-types\", \"react\"], t) : (e = \"undefined\" != typeof globalThis ? globalThis : e || self).AvatarEditor = t(e.PropTypes, e.React);\n}(this, function (e, t) {\n  \"use strict\";\n\n  function o(e) {\n    return e && \"object\" == typeof e && \"default\" in e ? e : {\n      default: e\n    };\n  }\n\n  var n = o(e),\n      i = o(t);\n\n  function r(e, t) {\n    for (var o = 0; o < t.length; o++) {\n      var n = t[o];\n      n.enumerable = n.enumerable || !1, n.configurable = !0, \"value\" in n && (n.writable = !0), Object.defineProperty(e, n.key, n);\n    }\n  }\n\n  function s(e, t, o) {\n    return t in e ? Object.defineProperty(e, t, {\n      value: o,\n      enumerable: !0,\n      configurable: !0,\n      writable: !0\n    }) : e[t] = o, e;\n  }\n\n  function u() {\n    return (u = Object.assign || function (e) {\n      for (var t = 1; t < arguments.length; t++) {\n        var o = arguments[t];\n\n        for (var n in o) {\n          Object.prototype.hasOwnProperty.call(o, n) && (e[n] = o[n]);\n        }\n      }\n\n      return e;\n    }).apply(this, arguments);\n  }\n\n  function a(t, e) {\n    var o,\n        n = Object.keys(t);\n    return Object.getOwnPropertySymbols && (o = Object.getOwnPropertySymbols(t), e && (o = o.filter(function (e) {\n      return Object.getOwnPropertyDescriptor(t, e).enumerable;\n    })), n.push.apply(n, o)), n;\n  }\n\n  function y(t) {\n    for (var e = 1; e < arguments.length; e++) {\n      var o = null != arguments[e] ? arguments[e] : {};\n      e % 2 ? a(Object(o), !0).forEach(function (e) {\n        s(t, e, o[e]);\n      }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(o)) : a(Object(o)).forEach(function (e) {\n        Object.defineProperty(t, e, Object.getOwnPropertyDescriptor(o, e));\n      });\n    }\n\n    return t;\n  }\n\n  function h(e) {\n    return (h = Object.setPrototypeOf ? Object.getPrototypeOf : function (e) {\n      return e.__proto__ || Object.getPrototypeOf(e);\n    })(e);\n  }\n\n  function c(e, t) {\n    return (c = Object.setPrototypeOf || function (e, t) {\n      return e.__proto__ = t, e;\n    })(e, t);\n  }\n\n  function l(e, t) {\n    if (null == e) return {};\n\n    var o,\n        n = function (e, t) {\n      if (null == e) return {};\n\n      for (var o, n = {}, a = Object.keys(e), r = 0; r < a.length; r++) {\n        o = a[r], 0 <= t.indexOf(o) || (n[o] = e[o]);\n      }\n\n      return n;\n    }(e, t);\n\n    if (Object.getOwnPropertySymbols) for (var a = Object.getOwnPropertySymbols(e), r = 0; r < a.length; r++) {\n      o = a[r], 0 <= t.indexOf(o) || Object.prototype.propertyIsEnumerable.call(e, o) && (n[o] = e[o]);\n    }\n    return n;\n  }\n\n  function d(e) {\n    if (void 0 === e) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    return e;\n  }\n\n  function p(r) {\n    var i = function () {\n      if (\"undefined\" == typeof Reflect || !Reflect.construct) return !1;\n      if (Reflect.construct.sham) return !1;\n      if (\"function\" == typeof Proxy) return !0;\n\n      try {\n        return Date.prototype.toString.call(Reflect.construct(Date, [], function () {})), !0;\n      } catch (e) {\n        return !1;\n      }\n    }();\n\n    return function () {\n      var e,\n          t,\n          o,\n          n,\n          a = h(r);\n      return t = i ? (e = h(this).constructor, Reflect.construct(a, arguments, e)) : a.apply(this, arguments), o = this, !(n = t) || \"object\" != typeof n && \"function\" != typeof n ? d(o) : n;\n    };\n  }\n\n  function m(e, t) {\n    return function (e) {\n      if (Array.isArray(e)) return e;\n    }(e) || function (e, t) {\n      if (\"undefined\" == typeof Symbol || !(Symbol.iterator in Object(e))) return;\n      var o = [],\n          n = !0,\n          a = !1,\n          r = void 0;\n\n      try {\n        for (var i, s = e[Symbol.iterator](); !(n = (i = s.next()).done) && (o.push(i.value), !t || o.length !== t); n = !0) {\n          ;\n        }\n      } catch (e) {\n        a = !0, r = e;\n      } finally {\n        try {\n          n || null == s.return || s.return();\n        } finally {\n          if (a) throw r;\n        }\n      }\n\n      return o;\n    }(e, t) || g(e, t) || function () {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n    }();\n  }\n\n  function g(e, t) {\n    if (e) {\n      if (\"string\" == typeof e) return f(e, t);\n      var o = Object.prototype.toString.call(e).slice(8, -1);\n      return \"Object\" === o && e.constructor && (o = e.constructor.name), \"Map\" === o || \"Set\" === o ? Array.from(e) : \"Arguments\" === o || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o) ? f(e, t) : void 0;\n    }\n  }\n\n  function f(e, t) {\n    (null == t || t > e.length) && (t = e.length);\n\n    for (var o = 0, n = new Array(t); o < t; o++) {\n      n[o] = e[o];\n    }\n\n    return n;\n  }\n\n  function v(a, r) {\n    return new Promise(function (e, t) {\n      var o,\n          n = new Image();\n      n.onload = function () {\n        return e(n);\n      }, n.onerror = t, !1 == (null !== (o = a) && !!o.match(/^\\s*data:([a-z]+\\/[a-z]+(;[a-z-]+=[a-z-]+)?)?(;base64)?,[a-z0-9!$&',()*+;=\\-._~:@/?%\\s]*\\s*$/i)) && r && (n.crossOrigin = r), n.src = a;\n    });\n  }\n\n  var b,\n      w = !(\"undefined\" == typeof window || \"undefined\" == typeof navigator || !(\"ontouchstart\" in window || 0 < navigator.msMaxTouchPoints)),\n      M = \"undefined\" != typeof File,\n      O = {\n    touch: {\n      react: {\n        down: \"onTouchStart\",\n        mouseDown: \"onMouseDown\",\n        drag: \"onTouchMove\",\n        move: \"onTouchMove\",\n        mouseMove: \"onMouseMove\",\n        up: \"onTouchEnd\",\n        mouseUp: \"onMouseUp\"\n      },\n      native: {\n        down: \"touchstart\",\n        mouseDown: \"mousedown\",\n        drag: \"touchmove\",\n        move: \"touchmove\",\n        mouseMove: \"mousemove\",\n        up: \"touchend\",\n        mouseUp: \"mouseup\"\n      }\n    },\n    desktop: {\n      react: {\n        down: \"onMouseDown\",\n        drag: \"onDragOver\",\n        move: \"onMouseMove\",\n        up: \"onMouseUp\"\n      },\n      native: {\n        down: \"mousedown\",\n        drag: \"dragStart\",\n        move: \"mousemove\",\n        up: \"mouseup\"\n      }\n    }\n  },\n      I = w ? O.touch : O.desktop,\n      P = \"undefined\" != typeof window && window.devicePixelRatio ? window.devicePixelRatio : 1,\n      C = {\n    x: .5,\n    y: .5\n  },\n      x = function () {\n    !function (e, t) {\n      if (\"function\" != typeof t && null !== t) throw new TypeError(\"Super expression must either be null or a function\");\n      e.prototype = Object.create(t && t.prototype, {\n        constructor: {\n          value: e,\n          writable: !0,\n          configurable: !0\n        }\n      }), t && c(e, t);\n    }(a, i[\"default\"].Component);\n    var e,\n        t,\n        o,\n        n = p(a);\n\n    function a(e) {\n      var v;\n      return function (e, t) {\n        if (!(e instanceof t)) throw new TypeError(\"Cannot call a class as a function\");\n      }(this, a), s(d(v = n.call(this, e)), \"state\", {\n        drag: !1,\n        my: null,\n        mx: null,\n        image: C\n      }), s(d(v), \"handleImageReady\", function (e) {\n        var t = v.getInitialSize(e.width, e.height);\n        t.resource = e, t.x = .5, t.y = .5, t.backgroundColor = v.props.backgroundColor, v.setState({\n          drag: !1,\n          image: t\n        }, v.props.onImageReady), v.props.onLoadSuccess(t);\n      }), s(d(v), \"clearImage\", function () {\n        v.canvas.getContext(\"2d\").clearRect(0, 0, v.canvas.width, v.canvas.height), v.setState({\n          image: C\n        });\n      }), s(d(v), \"handleMouseDown\", function (e) {\n        (e = e || window.event).preventDefault(), v.setState({\n          drag: !0,\n          mx: null,\n          my: null\n        });\n      }), s(d(v), \"handleMouseUp\", function () {\n        v.state.drag && (v.setState({\n          drag: !1\n        }), v.props.onMouseUp());\n      }), s(d(v), \"handleMouseMove\", function (e) {\n        var t, o, n, a, r, i, s, u, h, c, l, d, p, g, f, m;\n        e = e || window.event, !1 !== v.state.drag && (e.preventDefault(), n = {\n          mx: t = e.targetTouches ? e.targetTouches[0].pageX : e.clientX,\n          my: o = e.targetTouches ? e.targetTouches[0].pageY : e.clientY\n        }, m = v.props.rotate, m = (m %= 360) < 0 ? m + 360 : m, v.state.mx && v.state.my && (a = v.state.mx - t, r = v.state.my - o, i = v.state.image.width * v.props.scale, s = v.state.image.height * v.props.scale, h = (u = v.getCroppingRect()).x, c = u.y, h *= i, c *= s, l = function l(e) {\n          return e * (Math.PI / 180);\n        }, d = Math.cos(l(m)), g = c + -a * (p = Math.sin(l(m))) + r * d, f = {\n          x: (h + a * d + r * p) / i + 1 / v.props.scale * v.getXScale() / 2,\n          y: g / s + 1 / v.props.scale * v.getYScale() / 2\n        }, v.props.onPositionChange(f), n.image = y(y({}, v.state.image), f)), v.setState(n), v.props.onMouseMove(e));\n      }), s(d(v), \"setCanvas\", function (e) {\n        v.canvas = e;\n      }), v.canvas = null, v;\n    }\n\n    return e = a, (t = [{\n      key: \"componentDidMount\",\n      value: function value() {\n        this.props.disableHiDPIScaling && (P = 1);\n        var e,\n            t,\n            o = this.canvas.getContext(\"2d\");\n        this.props.image && this.loadImage(this.props.image), this.paint(o), document && (e = !!function () {\n          var t = !1;\n\n          try {\n            var e = Object.defineProperty({}, \"passive\", {\n              get: function get() {\n                t = !0;\n              }\n            });\n            window.addEventListener(\"test\", e, e), window.removeEventListener(\"test\", e, e);\n          } catch (e) {\n            t = !1;\n          }\n\n          return t;\n        }() && {\n          passive: !1\n        }, t = I.native, document.addEventListener(t.move, this.handleMouseMove, e), document.addEventListener(t.up, this.handleMouseUp, e), w && (document.addEventListener(t.mouseMove, this.handleMouseMove, e), document.addEventListener(t.mouseUp, this.handleMouseUp, e)));\n      }\n    }, {\n      key: \"componentDidUpdate\",\n      value: function value(e, t) {\n        this.props.image && this.props.image !== e.image || this.props.width !== e.width || this.props.height !== e.height || this.props.backgroundColor !== e.backgroundColor ? this.loadImage(this.props.image) : this.props.image || t.image === C || this.clearImage();\n        var o = this.canvas.getContext(\"2d\");\n        o.clearRect(0, 0, this.canvas.width, this.canvas.height), this.paint(o), this.paintImage(o, this.state.image, this.props.border), e.image === this.props.image && e.width === this.props.width && e.height === this.props.height && e.position === this.props.position && e.scale === this.props.scale && e.rotate === this.props.rotate && t.my === this.state.my && t.mx === this.state.mx && t.image.x === this.state.image.x && t.image.y === this.state.image.y && t.backgroundColor === this.state.backgroundColor || this.props.onImageChange();\n      }\n    }, {\n      key: \"componentWillUnmount\",\n      value: function value() {\n        var e;\n        document && (e = I.native, document.removeEventListener(e.move, this.handleMouseMove, !1), document.removeEventListener(e.up, this.handleMouseUp, !1), w && (document.removeEventListener(e.mouseMove, this.handleMouseMove, !1), document.removeEventListener(e.mouseUp, this.handleMouseUp, !1)));\n      }\n    }, {\n      key: \"isVertical\",\n      value: function value() {\n        return !this.props.disableCanvasRotation && this.props.rotate % 180 != 0;\n      }\n    }, {\n      key: \"getBorders\",\n      value: function value(e) {\n        var t = 0 < arguments.length && void 0 !== e ? e : this.props.border;\n        return Array.isArray(t) ? t : [t, t];\n      }\n    }, {\n      key: \"getDimensions\",\n      value: function value() {\n        var e = this.props,\n            t = e.width,\n            o = e.height,\n            n = e.rotate,\n            a = e.border,\n            r = {},\n            i = m(this.getBorders(a), 2),\n            s = i[0],\n            u = i[1],\n            h = t,\n            c = o;\n        return this.isVertical() ? (r.width = c, r.height = h) : (r.width = h, r.height = c), r.width += 2 * s, r.height += 2 * u, {\n          canvas: r,\n          rotate: n,\n          width: t,\n          height: o,\n          border: a\n        };\n      }\n    }, {\n      key: \"getImage\",\n      value: function value() {\n        var e = this.getCroppingRect(),\n            t = this.state.image;\n        e.x *= t.resource.width, e.y *= t.resource.height, e.width *= t.resource.width, e.height *= t.resource.height;\n        var o = document.createElement(\"canvas\");\n        this.isVertical() ? (o.width = e.height, o.height = e.width) : (o.width = e.width, o.height = e.height);\n        var n = o.getContext(\"2d\");\n        return n.translate(o.width / 2, o.height / 2), n.rotate(this.props.rotate * Math.PI / 180), n.translate(-o.width / 2, -o.height / 2), this.isVertical() && n.translate((o.width - o.height) / 2, (o.height - o.width) / 2), t.backgroundColor && (n.fillStyle = t.backgroundColor, n.fillRect(-e.x, -e.y, t.resource.width, t.resource.height)), n.drawImage(t.resource, -e.x, -e.y), o;\n      }\n    }, {\n      key: \"getImageScaledToCanvas\",\n      value: function value() {\n        var e = this.getDimensions(),\n            t = e.width,\n            o = e.height,\n            n = document.createElement(\"canvas\");\n        return this.isVertical() ? (n.width = o, n.height = t) : (n.width = t, n.height = o), this.paintImage(n.getContext(\"2d\"), this.state.image, 0, 1), n;\n      }\n    }, {\n      key: \"getXScale\",\n      value: function value() {\n        var e = this.props.width / this.props.height,\n            t = this.state.image.width / this.state.image.height;\n        return Math.min(1, e / t);\n      }\n    }, {\n      key: \"getYScale\",\n      value: function value() {\n        var e = this.props.height / this.props.width,\n            t = this.state.image.height / this.state.image.width;\n        return Math.min(1, e / t);\n      }\n    }, {\n      key: \"getCroppingRect\",\n      value: function value() {\n        var e = this.props.position || {\n          x: this.state.image.x,\n          y: this.state.image.y\n        },\n            t = 1 / this.props.scale * this.getXScale(),\n            o = 1 / this.props.scale * this.getYScale(),\n            n = {\n          x: e.x - t / 2,\n          y: e.y - o / 2,\n          width: t,\n          height: o\n        },\n            a = 0,\n            r = 1 - n.width,\n            i = 0,\n            s = 1 - n.height;\n        return (this.props.disableBoundaryChecks || 1 < t || 1 < o) && (a = -n.width, i = -n.height, s = r = 1), y(y({}, n), {}, {\n          x: Math.max(a, Math.min(n.x, r)),\n          y: Math.max(i, Math.min(n.y, s))\n        });\n      }\n    }, {\n      key: \"loadImage\",\n      value: function value(e) {\n        var t;\n        M && e instanceof File ? this.loadingImage = (t = e, new Promise(function (o, n) {\n          var e = new FileReader();\n          e.onload = function (e) {\n            try {\n              var t = v(e.target.result);\n              o(t);\n            } catch (e) {\n              n(e);\n            }\n          }, e.readAsDataURL(t);\n        }).then(this.handleImageReady).catch(this.props.onLoadFailure)) : \"string\" == typeof e && (this.loadingImage = v(e, this.props.crossOrigin).then(this.handleImageReady).catch(this.props.onLoadFailure));\n      }\n    }, {\n      key: \"getInitialSize\",\n      value: function value(e, t) {\n        var o,\n            n,\n            a = this.getDimensions();\n        return t / e < a.height / a.width ? n = e * ((o = this.getDimensions().height) / t) : o = t * ((n = this.getDimensions().width) / e), {\n          height: o,\n          width: n\n        };\n      }\n    }, {\n      key: \"paintImage\",\n      value: function value(e, t, o, n) {\n        var a,\n            r = 3 < arguments.length && void 0 !== n ? n : P;\n        t.resource && (a = this.calculatePosition(t, o), e.save(), e.translate(e.canvas.width / 2, e.canvas.height / 2), e.rotate(this.props.rotate * Math.PI / 180), e.translate(-e.canvas.width / 2, -e.canvas.height / 2), this.isVertical() && e.translate((e.canvas.width - e.canvas.height) / 2, (e.canvas.height - e.canvas.width) / 2), e.scale(r, r), e.globalCompositeOperation = \"destination-over\", e.drawImage(t.resource, a.x, a.y, a.width, a.height), t.backgroundColor && (e.fillStyle = t.backgroundColor, e.fillRect(a.x, a.y, a.width, a.height)), e.restore());\n      }\n    }, {\n      key: \"calculatePosition\",\n      value: function value(e, t) {\n        e = e || this.state.image;\n        var o = m(this.getBorders(t), 2),\n            n = o[0],\n            a = o[1],\n            r = this.getCroppingRect(),\n            i = e.width * this.props.scale,\n            s = e.height * this.props.scale,\n            u = -r.x * i,\n            h = -r.y * s;\n        return this.isVertical() ? (u += a, h += n) : (u += n, h += a), {\n          x: u,\n          y: h,\n          height: s,\n          width: i\n        };\n      }\n    }, {\n      key: \"paint\",\n      value: function value(e) {\n        e.save(), e.scale(P, P), e.translate(0, 0), e.fillStyle = \"rgba(\" + this.props.color.slice(0, 4).join(\",\") + \")\";\n        var t,\n            o,\n            n,\n            a,\n            r,\n            i,\n            s,\n            u,\n            h = this.props.borderRadius,\n            c = this.getDimensions(),\n            l = m(this.getBorders(c.border), 2),\n            d = l[0],\n            p = l[1],\n            g = c.canvas.height,\n            f = c.canvas.width,\n            h = Math.max(h, 0);\n        h = Math.min(h, f / 2 - d, g / 2 - p), e.beginPath(), t = e, a = f - 2 * (o = d), r = g - 2 * (n = p), 0 === (i = h) ? t.rect(o, n, a, r) : (s = a - i, u = r - i, t.translate(o, n), t.arc(i, i, i, Math.PI, 1.5 * Math.PI), t.lineTo(s, 0), t.arc(s, i, i, 1.5 * Math.PI, 2 * Math.PI), t.lineTo(a, u), t.arc(s, u, i, 2 * Math.PI, .5 * Math.PI), t.lineTo(i, r), t.arc(i, u, i, .5 * Math.PI, Math.PI), t.translate(-o, -n)), e.rect(f, 0, -f, g), e.fill(\"evenodd\"), e.restore();\n      }\n    }, {\n      key: \"render\",\n      value: function value() {\n        var e = this.props,\n            t = (e.scale, e.rotate, e.image, e.border, e.borderRadius, e.width, e.height, e.position, e.color, e.backgroundColor, e.style),\n            o = (e.crossOrigin, e.onLoadFailure, e.onLoadSuccess, e.onImageReady, e.onImageChange, e.onMouseUp, e.onMouseMove, e.onPositionChange, e.disableBoundaryChecks, e.disableHiDPIScaling, e.disableCanvasRotation, l(e, [\"scale\", \"rotate\", \"image\", \"border\", \"borderRadius\", \"width\", \"height\", \"position\", \"color\", \"backgroundColor\", \"style\", \"crossOrigin\", \"onLoadFailure\", \"onLoadSuccess\", \"onImageReady\", \"onImageChange\", \"onMouseUp\", \"onMouseMove\", \"onPositionChange\", \"disableBoundaryChecks\", \"disableHiDPIScaling\", \"disableCanvasRotation\"])),\n            n = this.getDimensions(),\n            a = {\n          width: n.canvas.width,\n          height: n.canvas.height,\n          cursor: this.state.drag ? \"grabbing\" : \"grab\",\n          touchAction: \"none\"\n        },\n            r = {\n          width: n.canvas.width * P,\n          height: n.canvas.height * P,\n          style: y(y({}, a), t)\n        };\n        return r[I.react.down] = this.handleMouseDown, w && (r[I.react.mouseDown] = this.handleMouseDown), i.default.createElement(\"canvas\", u({\n          ref: this.setCanvas\n        }, r, o));\n      }\n    }]) && r(e.prototype, t), o && r(e, o), a;\n  }();\n\n  return s(x, \"propTypes\", {\n    scale: n.default.number,\n    rotate: n.default.number,\n    image: n.default.oneOfType([n.default.string].concat(function (e) {\n      if (Array.isArray(e)) return f(e);\n    }(b = M ? [n.default.instanceOf(File)] : []) || function (e) {\n      if (\"undefined\" != typeof Symbol && Symbol.iterator in Object(e)) return Array.from(e);\n    }(b) || g(b) || function () {\n      throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n    }())),\n    border: n.default.oneOfType([n.default.number, n.default.arrayOf(n.default.number)]),\n    borderRadius: n.default.number,\n    width: n.default.number,\n    height: n.default.number,\n    position: n.default.shape({\n      x: n.default.number,\n      y: n.default.number\n    }),\n    color: n.default.arrayOf(n.default.number),\n    backgroundColor: n.default.string,\n    crossOrigin: n.default.oneOf([\"\", \"anonymous\", \"use-credentials\"]),\n    onLoadFailure: n.default.func,\n    onLoadSuccess: n.default.func,\n    onImageReady: n.default.func,\n    onImageChange: n.default.func,\n    onMouseUp: n.default.func,\n    onMouseMove: n.default.func,\n    onPositionChange: n.default.func,\n    disableBoundaryChecks: n.default.bool,\n    disableHiDPIScaling: n.default.bool,\n    disableCanvasRotation: n.default.bool\n  }), s(x, \"defaultProps\", {\n    scale: 1,\n    rotate: 0,\n    border: 25,\n    borderRadius: 0,\n    width: 200,\n    height: 200,\n    color: [0, 0, 0, .5],\n    onLoadFailure: function onLoadFailure() {},\n    onLoadSuccess: function onLoadSuccess() {},\n    onImageReady: function onImageReady() {},\n    onImageChange: function onImageChange() {},\n    onMouseUp: function onMouseUp() {},\n    onMouseMove: function onMouseMove() {},\n    onPositionChange: function onPositionChange() {},\n    disableBoundaryChecks: !1,\n    disableHiDPIScaling: !1,\n    disableCanvasRotation: !0\n  }), x;\n});"],"sourceRoot":""}