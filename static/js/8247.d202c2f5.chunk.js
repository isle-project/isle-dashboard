/*! For license information please see 8247.d202c2f5.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkisle_dashboard=self.webpackChunkisle_dashboard||[]).push([[8247],{6426:function(e,t,a){a.r(t);var n=a(87757),r=a.n(n),o=a(15861),l=a(15671),s=a(43144),i=a(97326),c=a(60136),d=a(29388),u=a(4942),m=a(41488),p=a(10077),f=a.n(p),h=a(25472),v=a(51527),g=a.n(v),Z=a(70048),D=a(93391),E=a(47701),x=a(9050),y=a(62234),b=a.n(y),C=a(14444),k=a.n(C),w=a(98032),A=a(47355),L=a(52428),T=a(42263),S=a(63834),M=a(96027),N=a(25991),H=a(76594),P=f()("isle-dashboard:admin"),F=function(e){(0,c.Z)(a,e);var t=(0,d.Z)(a);function a(e){var n;return(0,l.Z)(this,a),n=t.call(this,e),(0,u.Z)((0,i.Z)(n),"createColumns",(function(){for(var e=n.props.t,t=n.props.admin.lessons,a=k(),r=0,o=0;o<t.length;o++)t[o].createdAt>r&&(r=t[o].createdAt),t[o].updatedAt>r&&(r=t[o].updatedAt),t[o].createdAt<a&&(a=t[o].createdAt),t[o].updatedAt<a&&(a=t[o].updatedAt);return r=g()(r),a=g()(a),[{Header:e("common:title"),id:"title",accessor:"title",maxWidth:200,style:{marginTop:"8px",color:"darkslategrey"},filterMethod:H.Z,Cell:function(e){return m.createElement("a",{href:"".concat(S.ZP,"/").concat(e.original.namespace.title,"/").concat(e.original.title)},e.original.title)}},{Header:e("common:course"),id:"namespace",accessor:"namespace.title",maxWidth:200,style:{marginTop:"8px",color:"darkslategrey"},filterMethod:H.Z},{Header:e("common:description"),id:"description",accessor:"description",maxWidth:200,style:{marginTop:"8px",color:"darkslategrey"},filterMethod:H.Z},(0,M.Z)({Header:b()(e("lesson:active")),accessor:"active",trueLabel:e("lesson:active"),falseLabel:e("lesson:inactive")}),(0,M.Z)({Header:b()(e("lesson:public")),accessor:"public",trueLabel:e("lesson:public"),falseLabel:e("lesson:private")}),(0,N.Z)({Header:e("last-updated"),accessor:"updatedAt",startDate:a,endDate:r,t:e}),(0,N.Z)({Header:e("created-at"),accessor:"createdAt",startDate:a,endDate:r,t:e}),{Header:e("metadata"),accessor:"metadata",style:{marginTop:"2px",color:"darkslategrey",fontSize:24,textAlign:"center",cursor:"pointer"},Cell:function(e){if(e.value){var t=m.createElement(x.Z,{id:"popover-data",style:{maxWidth:400}},m.createElement(x.Z.Title,{as:"h3"},"Data"),m.createElement(x.Z.Content,{style:{backgroundColor:"lightblue"}},m.createElement("pre",null,JSON.stringify(e.value,null,2))));return m.createElement(D.Z,{trigger:"click",placement:"right",overlay:t},m.createElement("i",{className:"data-icon fas fa-tablet-alt"}))}return null},maxWidth:120,resizable:!1,filterable:!1,sortable:!1},{Header:e("common:actions"),Cell:function(t){return m.createElement("div",null,m.createElement(D.Z,{placement:"bottom",overlay:m.createElement(E.Z,{id:"delete_lesson"},e("lesson:delete-lesson"))},m.createElement(Z.Z,{variant:"outline-secondary",style:{marginLeft:8},onClick:n.askToDeleteSelectedLessonFactory(t.row._original),"aria-label":e("lesson:delete-lesson")},m.createElement("div",{className:"fa fa-trash-alt"}))))},resizable:!1,filterable:!1,sortable:!1}]})),(0,u.Z)((0,i.Z)(n),"askToDeleteSelectedLessonFactory",(function(e){return function(){n.setState({showDeleteModal:!n.state.showDeleteModal,selectedLesson:e})}})),(0,u.Z)((0,i.Z)(n),"deleteSelectedLesson",(function(){var e=n.state.selectedLesson.title,t=n.state.selectedLesson.namespace.title;P("Delete lesson ".concat(e," of course ").concat(t,".")),n.setState({showDeleteModal:!1},(0,o.Z)(r().mark((function a(){return r().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,n.props.deleteLesson({lessonName:e,namespaceName:t});case 2:n.props.getAllLessons();case 3:case"end":return a.stop()}}),a)}))))})),(0,u.Z)((0,i.Z)(n),"toggleDeleteModal",(function(){n.setState({showDeleteModal:!n.state.showDeleteModal})})),(0,u.Z)((0,i.Z)(n),"toggleExplorer",(function(){n.setState({showExplorer:!n.state.showExplorer})})),n.state={selectedLesson:null,showDeleteModal:!1,columns:n.createColumns(),showExplorer:!1},n}return(0,s.Z)(a,[{key:"componentDidMount",value:function(){this.props.getAllLessons()}},{key:"componentDidUpdate",value:function(e){e.admin.lessons!==this.props.admin.lessons&&this.setState({columns:this.createColumns()})}},{key:"render",value:function(){var e=this.props.t;if(this.state.showExplorer){for(var t=this.props.admin.lessons,a=[],n=0;n<t.length;n++){var r=t[n],o={};o.title=r.title,o.namespace=r.namespace?r.namespace.title:null,o.description=r.description,o.active=r.active,o.public=r.public,o.createdAt=r.createdAt,o.updatedAt=r.updatedAt,a.push(o)}return a=(0,w.Z)(a),m.createElement(L.Z,{title:e("explorer-lessons-title"),data:a,categorical:["title","namespace","active","public","createdAt","updatedAt"],quantitative:[],close:this.toggleExplorer})}return m.createElement(m.Fragment,null,m.createElement(A.Z,{data:this.props.admin.lessons,columns:this.state.columns,onButtonClick:this.toggleExplorer,t:e}),this.state.showDeleteModal?m.createElement(T.Z,{title:e("lesson:delete-lesson"),message:m.createElement("span",null,e("lesson:delete-modal-body",{name:this.state.selectedLesson.title})),close:this.toggleDeleteModal,show:this.state.showDeleteModal,onConfirm:this.deleteSelectedLesson}):null)}}]),a}(m.Component);t.default=(0,h.Z)(["admin","lesson","common"])(F)},42263:function(e,t,a){var n=a(41488),r=a(25472),o=a(70048),l=a(3252),s=function(e){return n.createElement(l.Z,{show:e.show,onHide:e.close},n.createElement(l.Z.Header,null,n.createElement(l.Z.Title,{as:"h3"},e.title)),n.createElement(l.Z.Body,null,e.message),n.createElement(l.Z.Footer,null,n.createElement(o.Z,{onClick:e.close},e.t("cancel")),n.createElement(o.Z,{variant:"danger",onClick:e.onConfirm},e.t("confirm"))))};s.defaultProps={close:function(){},message:"",onConfirm:function(){},show:!1,title:""},t.Z=(0,r.Z)(["common"])(s)},47355:function(e,t,a){a.d(t,{Z:function(){return g}});var n=a(87462),r=a(15671),o=a(43144),l=a(97326),s=a(60136),i=a(29388),c=a(4942),d=a(41488),u=a(75742),m=a(70048),p=a(87095),f=a(93391),h=a(47701),v=(a(36561),function(e){(0,s.Z)(a,e);var t=(0,i.Z)(a);function a(){var e;(0,r.Z)(this,a);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o)),(0,c.Z)((0,l.Z)(e),"getProps",(function(){return{id:e.props.id||"dashboard-table"}})),e}return(0,o.Z)(a,[{key:"render",value:function(){var e=this,t=this.props.t;return d.createElement(d.Fragment,null,d.createElement(u.Z,(0,n.Z)({},this.props,{filterable:!0,className:"dashboard-table ".concat(this.props.className),data:this.props.data,columns:this.props.columns,previousText:t("common:previous"),nextText:t("common:next"),loadingText:t("common:loading"),noDataText:t("common:no-rows-found"),pageText:t("common:page"),ofText:t("common:of"),rowsText:t("common:rows"),ref:function(t){e.table=t},getProps:this.getProps})),this.props.onButtonClick?d.createElement(p.Z,{vertical:!0,style:{float:"right",marginRight:-9}},d.createElement(f.Z,{placement:"left",overlay:d.createElement(h.Z,{id:"explorer-tooltip"},t("common:data-explorer"))},d.createElement(m.Z,{"aria-label":t("common:data-explorer"),variant:"primary",style:{marginBottom:8},onClick:this.props.onButtonClick},d.createElement("i",{className:"fas fa-chart-bar"})))):null)}}]),a}(d.Component));v.defaultProps={className:"",t:function(){}};var g=v},52428:function(e,t,a){var n=(0,a(31835).Z)((function(){return Promise.all([a.e(7704),a.e(5999)]).then(a.bind(a,45369))}));t.Z=n},96027:function(e,t,a){var n=a(41488);t.Z=function(e){var t,a,r=e.Header,o=e.accessor,l=e.trueLabel,s=e.falseLabel,i=e.printLabels,c=void 0!==i&&i,d=e.maxWidth;return c?(t=function(e){return!0===e.value?l:!1===e.value?s:null},a={marginTop:"8px",color:"darkslategrey"}):(t=function(e){return e.value?n.createElement("i",{className:"far fa-check-square"}):null},a={marginTop:"2px",color:"darkslategrey",fontSize:24,textAlign:"center"}),{Header:r,accessor:o,style:a,Cell:t,filterMethod:function(e,t){if("all"===e.value)return!0;var a=e.pivotId||e.id;return void 0===t[a]||String(t[a])===e.value},Filter:function(e){var t,a=e.filter,r=e.onChange,o=function(e){var t=e.target.value;r(t)};return t=a?a.value:"all",n.createElement("select",{onBlur:o,onChange:o,style:{width:"100%",backgroundColor:"ghostwhite"},value:t},n.createElement("option",{value:"all"},"Show All"),n.createElement("option",{value:!0},l),n.createElement("option",{value:!1},s))},maxWidth:void 0===d?150:d}}},25991:function(e,t,a){var n=a(15671),r=a(43144),o=a(97326),l=a(60136),s=a(29388),i=a(4942),c=a(41488),d=a(34513),u=a(93391),m=a(9050),p=a(70048),f=(a(92545),function(e){(0,l.Z)(a,e);var t=(0,s.Z)(a);function a(e){var r;return(0,n.Z)(this,a),r=t.call(this,e),(0,i.Z)((0,o.Z)(r),"handleDatesChange",(function(e){var t=e.startDate,a=e.endDate;r.setState({startDate:t,endDate:a},(function(){r.props.onDatesChange(r.state)}))})),(0,i.Z)((0,o.Z)(r),"handleReset",(function(){r.setState({startDate:r.props.minDate,endDate:r.props.maxDate},(function(){r.props.onDatesChange(r.state)}))})),r.state={startDate:e.startDate,endDate:e.endDate},r}return(0,r.Z)(a,[{key:"componentDidUpdate",value:function(e){this.props.startDate===e.startDate&&this.props.endDate===e.endDate||this.setState({startDate:this.props.startDate,endDate:this.props.endDate})}},{key:"render",value:function(){var e=this;return c.createElement(c.Fragment,null,c.createElement(d.DateRangePicker,{startDate:this.state.startDate,endDate:this.state.endDate,startDateId:"start_date_input",endDateId:"end_date_input",onDatesChange:this.handleDatesChange,focusedInput:this.state.focusedInput,onFocusChange:function(t){return e.setState({focusedInput:t})},isOutsideRange:function(){return!1}}),c.createElement(p.Z,{"aria-label":this.props.t("common:close"),variant:"warning",onClick:this.handleReset,style:{paddingTop:8,paddingLeft:16,paddingRight:16,paddingBottom:8,fontSize:20}},"x"))}}]),a}(c.Component)),h=function(e){return new Date(e.value).toLocaleString()};t.Z=function(e){var t=e.Header,a=e.accessor,n=e.Cell,r=e.style,o=e.startDate,l=e.endDate,s=e.t,i=e.maxWidth;return{Header:t,accessor:a,style:r,Cell:n||h,filterMethod:function(e,t){if(!e.value)return!0;var a=e.value,n=a.startDate,r=a.endDate,o=t[e.pivotId||e.id].getTime();return n&&r?o>=n.valueOf()&&o<=r.valueOf():n?o>=n.valueOf():!r||o<=r.valueOf()},Filter:function(e){var t=e.filter,a=e.onChange,n=t&&t.value||{},r=c.createElement(m.Z,{id:"popover-data",style:{maxWidth:400}},c.createElement(m.Z.Title,{as:"h3"},s("common:dates")),c.createElement(m.Z.Content,{style:{backgroundColor:"grey"}},c.createElement(f,{startDate:n.startDate||o,minDate:o,maxDate:l,endDate:n.endDate||l,onDatesChange:function(e){var t=e.startDate,n=e.endDate;a({startDate:t,endDate:n})},t:s})));return c.createElement(u.Z,{trigger:"click",placement:"right",overlay:r},c.createElement(p.Z,{"aria-label":s("common:toggle-calendar"),size:"sm",style:{float:"left",marginLeft:6},variant:"secondary"},c.createElement("i",{className:"far fa-calendar-alt"})))},maxWidth:void 0===i?150:i}}},76594:function(e,t,a){var n=a(33837),r=a.n(n),o=a(12699),l=a.n(o);t.Z=function(e,t){var a=t[e.id]||"";return r()(l()(a),l()(e.value))}},34220:function(e,t,a){var n=a(20842).isPrimitive;e.exports=function(e){if(!n(e))throw new TypeError("invalid argument. First argument must be a string primitive. Value: `"+e+"`.");return""===e?"":e.charAt(0).toUpperCase()+e.slice(1)}},62234:function(e,t,a){var n=a(34220);e.exports=n},25237:function(e,t,a){a.d(t,{Z:function(){return u}});var n=a(87462),r=a(63366),o=a(78265),l=a.n(o),s=a(96358),i=a(41488),c=a(38674),d=["className","bsPrefix","as"];function u(e,t){var a,o=void 0===t?{}:t,u=o.displayName,m=void 0===u?(a=e)[0].toUpperCase()+(0,s.Z)(a).slice(1):u,p=o.Component,f=o.defaultProps,h=i.forwardRef((function(t,a){var o=t.className,s=t.bsPrefix,u=t.as,m=void 0===u?p||"div":u,f=(0,r.Z)(t,d),h=(0,c.vE)(s,e);return i.createElement(m,(0,n.Z)({ref:a,className:l()(o,h)},f))}));return h.defaultProps=f,h.displayName=m,h}}}]);
//# sourceMappingURL=8247.d202c2f5.chunk.js.map