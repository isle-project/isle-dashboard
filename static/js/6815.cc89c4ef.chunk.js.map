{"version":3,"file":"static/js/6815.cc89c4ef.chunk.js","mappings":"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","sources":["actions/namespace.js","components/confirm-modal/index.js","components/dashboard-table/index.js","components/namespace-data/files_page.js","components/namespace-data/announcements_page.js","components/namespace-data/editable_progress.js","components/namespace-data/progress_page.js","components/namespace-data/cohorts_page.js","components/namespace-data/grades_page.js","components/namespace-data/actions_page.js","components/namespace-data/tickets_page.js","components/namespace-data/index.js","actions/announcement.js","containers/visible-namespace-data/index.js","ev/components/data-explorer/index.js","utils/create_boolean_column.js","utils/create_categorical_column.js","utils/create_date_column.js","utils/create_numeric_column.js","utils/create_text_column.js","utils/file_saver.js","utils/text_filter.js"],"sourcesContent":["/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport axios from 'axios';\nimport qs from 'querystring';\nimport i18next from 'i18next';\nimport saveAs from 'utils/file_saver.js';\nimport server from 'constants/server';\nimport { addNotification, addErrorNotification } from 'actions/notification';\nimport { getCohorts } from 'actions/cohort';\nimport { APPEND_CREATED_NAMESPACE, CHANGED_NAMESPACE, DELETED_CURRENT_NAMESPACE, GET_ALL_NAMESPACES, UPDATED_OWNED_NAMESPACE, UPDATED_STUDENT_PROGRESS } from 'constants/action_types.js';\n\n\n// EXPORTS //\n\n/**\n * Returns an action object to be used in signalling that a namespace has been created.\n *\n * @param {Object} namespace - the created namespace\n * @returns {Object} the action object\n */\nexport function appendCreatedNamespace( namespace ) {\n\treturn {\n\t\ttype: APPEND_CREATED_NAMESPACE,\n\t\tpayload: {\n\t\t\tnamespace\n\t\t}\n\t};\n}\n\n/**\n * Returns an action object to be used in signalling that a namespace has been changed.\n *\n * @param {Object} namespace - the changed namespace\n * @param {string} namespace.title - namespace title\n * @param {Array} namespace.owners - ids of owners\n * @param {Array} namespace.announcements - announcements\n * @param {Array} namespace.cohorts - cohorts\n * @param {string} namespace.description - namespace description\n * @param {boolean} namespace.enableTicketing - controls if ticketing is enabled for the namespace\n * @param {string} namespace._id - id of the namespace\n * @returns {Object} the action object\n */\nexport function changedNamespace({ title, owners, announcements = [], cohorts = [], description, enableTicketing, _id }) {\n\treturn {\n\t\ttype: CHANGED_NAMESPACE,\n\t\tpayload: {\n\t\t\ttitle,\n\t\t\tannouncements,\n\t\t\tcohorts,\n\t\t\tdescription,\n\t\t\tenableTicketing,\n\t\t\towners,\n\t\t\t_id\n\t\t}\n\t};\n}\n\n/**\n * Returns an action object to be used in signalling that a namespace has been deleted.\n *\n * @param {string} id - the id of the namespace to be deleted\n * @returns {Object} the action object\n */\nexport function deletedCurrentNamespace( id ) {\n\treturn {\n\t\ttype: DELETED_CURRENT_NAMESPACE,\n\t\tpayload: {\n\t\t\tid\n\t\t}\n\t};\n}\n\n/**\n * Returns an action object to be used in signalling that a student's progress has been updated.\n *\n * @param {Object} options - progress of the student\n * @param {string} options.email - email of the student\n * @param {string} options.lessonId - lesson id\n * @param {number} options.progress - progress of the student\n * @param {Object} options.cohort - cohort of the student\n */\nexport function updateStudentProgress({ email, lessonID, progress, cohort }) {\n\treturn {\n\t\ttype: UPDATED_STUDENT_PROGRESS,\n\t\tpayload: {\n\t\t\temail, lessonID, progress, cohort\n\t\t}\n\t};\n}\n\n/**\n * Returns an action object to be used in signalling that an owned namespace has been updated.\n *\n * @param {Object} namespace - the updated namespace\n * @param {string} namespace.title - namespace title\n * @param {Array} namespace.owners - ids of owners\n * @param {Array} namespace.enableTicketing - controls if ticketing is enabled for the namespace\n * @param {string} namespace._id - id of the namespace\n * @returns {Object} the action object\n */\nexport function updatedOwnedNamespace({ title, owners, description, enableTicketing, _id }) {\n\treturn {\n\t\ttype: UPDATED_OWNED_NAMESPACE,\n\t\tpayload: {\n\t\t\ttitle,\n\t\t\tdescription,\n\t\t\towners,\n\t\t\tenableTicketing,\n\t\t\t_id\n\t\t}\n\t};\n}\n\n/**\n * Makes a POST request to create a new namespace.\n *\n * @param {Function} dispatch - dispatch function\n * @param {Object} namespace - the new namespace\n * @param {string} namespace.title - namespace title\n * @param {Array} namespace.description - namespace description\n * @param {Array} namespace.owners - ids of owners\n * @param {Object} namespace.props - properties of the invoking component\n */\nexport const createNamespace = async ( dispatch, { title, description, owners, props }) => {\n\ttry {\n\t\tconst res = await axios.post( server+'/create_namespace', { title, description, owners });\n\t\tif ( !res.data.successful ) {\n\t\t\treturn addErrorNotification( dispatch, new Error( res.data.message ));\n\t\t}\n\t\tconst namespace = res.data.namespace;\n\t\tprops.onNamespace( namespace );\n\t\tdispatch( appendCreatedNamespace( namespace ) );\n\t\tprops.history.replace( '/lessons' );\n\t\taddNotification( dispatch, {\n\t\t\tmessage: res.data.message,\n\t\t\tlevel: res.data.successful ? 'success' : 'error'\n\t\t});\n\t} catch ( err ) {\n\t\taddErrorNotification( dispatch, err );\n\t}\n};\n\n/**\n * Returns a function to make a POST request to create a new namespace.\n *\n * @param {Function} dispatch - dispatch function\n * @returns {Function} function to make the POST request to create a new namespace\n */\nexport const createNamespaceInjector = dispatch => {\n\treturn async ({ title, description, owners, props }) => {\n\t\tawait createNamespace( dispatch, { title, description, owners, props } );\n\t};\n};\n\n/**\n * Makes a POST request to delete a namespace.\n *\n * @param {Function} dispatch - dispatch function\n * @param {string} id - the id of the namespace to be deleted\n * @param {Object} history - browser history object\n * @returns {void}\n */\nexport const deleteCurrentNamespace = async ( dispatch, id, history ) => {\n\ttry {\n\t\tconst res = await axios.post( server+'/delete_namespace', { id });\n\t\tif ( history ) {\n\t\t\thistory.replace( '/lessons' );\n\t\t}\n\t\tdispatch( deletedCurrentNamespace( id ) );\n\t\taddNotification( dispatch, {\n\t\t\tmessage: res.data.message,\n\t\t\tlevel: 'success'\n\t\t});\n\t} catch ( err ) {\n\t\treturn addErrorNotification( dispatch, err );\n\t}\n};\n\n/**\n * Returns a function to make a POST request to delete a namespace.\n *\n * @param {Function} dispatch - dispatch function\n * @returns {Function} function to make the POST request to delete a namespace\n */\nexport const deleteCurrentNamespaceInjector = ( dispatch ) => {\n\treturn async ( id, history ) => {\n\t\tawait deleteCurrentNamespace( dispatch, id, history );\n\t};\n};\n\n/**\n * Makes a POST request to update a namespace.\n *\n * @param {Function} dispatch - dispatch function\n * @param {Object} ns - the updated namespace\n */\nexport const updateCurrentNamespace = async ( dispatch, ns ) => {\n\ttry {\n\t\tconst res = await axios.post( server+'/update_namespace', { ns });\n\t\tdispatch( changedNamespace( res.data.namespace ) );\n\t\tdispatch( updatedOwnedNamespace( res.data.namespace ) );\n\t\taddNotification( dispatch, {\n\t\t\tmessage: res.data.message,\n\t\t\tlevel: 'success'\n\t\t});\n\t\tgetCohorts( dispatch, {\n\t\t\tnamespaceID: ns._id\n\t\t});\n\t} catch ( err ) {\n\t\taddErrorNotification( dispatch, err );\n\t}\n};\n\n/**\n * Returns a function to make a POST request to update a namespace.\n *\n * @param {Function} dispatch - dispatch function\n * @returns {Function} function to make the POST request to update a namespace\n */\nexport const updateCurrentNamespaceInjector = ( dispatch ) => {\n\treturn async ( id, ns ) => {\n\t\tawait updateCurrentNamespace( dispatch, id, ns );\n\t};\n};\n\n/**\n * Makes a GET request to get a namespace's actions.\n *\n * @param {Function} dispatch - dispatch function\n * @param {Object} options - request options\n * @param {string} options.namespaceID - id of the namespace\n * @param {string} options.namespaceTitle - title of the namespace\n * @returns {void}\n */\nexport const getNamespaceActions = async ( dispatch, { namespaceID, namespaceTitle } ) => {\n\ttry {\n\t\tconst res = await axios.get( server+'/get_namespace_actions?'+qs.stringify({ namespaceID }) );\n\t\tconst blob = new Blob([ res.data ], {\n\t\t\ttype: 'application/json'\n\t\t});\n\t\tconst name = `actions_${namespaceTitle}.json`;\n\t\tsaveAs( blob, name );\n\t} catch ( err ) {\n\t\taddErrorNotification( dispatch, err );\n\t}\n};\n\n/**\n * Returns a function to make a GET request to get a namespace's actions.\n *\n * @param {Function} dispatch - dispatch function\n * @returns {Function} function to make the GET request to get a namespace's actions\n */\nexport const getNamespaceActionsInjector = ( dispatch ) => {\n\treturn async ({ namespaceID, namespaceTitle }) => {\n\t\tawait getNamespaceActions( dispatch, { namespaceID, namespaceTitle });\n\t};\n};\n\n/**\n * Makes a POST request to update a user's lesson progress.\n *\n * @param {Function} dispatch - dispatch function\n * @param {Object} options - request options\n * @param {string} options.namespaceID - id of the namespace\n * @param {string} options.lessonID - id of the lesson\n * @param {string} options.email - email of the user\n * @param {number} options.progress - progress of the user\n * @param {Object} options.cohort - cohort of the user\n */\nexport const adjustProgress = async ( dispatch, { email, lessonID, namespaceID, progress, cohort }) => {\n\tconst res = await axios.post( server+'/user_adjust_progress', {\n\t\temail, lessonID, namespaceID, progress\n\t});\n\taddNotification( dispatch, {\n\t\ttitle: i18next.t('common:updated'),\n\t\tmessage: res.data.message,\n\t\tlevel: 'success'\n\t});\n\tdispatch( updateStudentProgress({ email, lessonID, progress, cohort }) );\n};\n\n/**\n * Returns a function to make a POST request to update a user's lesson progress.\n *\n * @param {Function} dispatch - dispatch function\n * @returns {Function} function to make the POST request to update a user's lesson progress\n */\nexport const adjustProgressInjector = ( dispatch ) => {\n\treturn async ( { email, lessonID, namespaceID, progress, cohort } ) => {\n\t\tawait adjustProgress( dispatch, { email, lessonID, namespaceID, progress, cohort } );\n\t};\n};\n\n/**\n * Makes a GET request to get a all available namespaces.\n *\n * @param {Function} dispatch - dispatch function\n * @returns {void}\n */\nexport const getAllNamespaces = async ( dispatch ) => {\n\ttry {\n\t\tconst res = await axios.get( server+'/get_all_namespaces' );\n\t\tdispatch({\n\t\t\ttype: GET_ALL_NAMESPACES,\n\t\t\tpayload: {\n\t\t\t\tnamespaces: res.data.namespaces\n\t\t\t}\n\t\t});\n\t} catch ( err ) {\n\t\treturn addErrorNotification( dispatch, err );\n\t}\n};\n\n/**\n * Returns a function to make a GET request to get a all available namespaces.\n *\n * @param {Function} dispatch - dispatch function\n * @returns {Function} function to make the GET request to get a all available namespaces\n */\nexport const getAllNamespacesInjector = ( dispatch ) => {\n\treturn async () => {\n\t\tawait getAllNamespaces( dispatch );\n\t};\n};\n\n/**\n * Makes a POST request to set the order lessons appear on the dashboard.\n *\n * @param {Function} dispatch - dispatch function\n * @param {Object} options - request options\n * @param {Array} options.lessons - lessons of the course in the order to be displayed on the dashboard\n * @param {string} options.id - id of the namespace\n * @returns {void}\n */\nexport const setLessonOrder = async ( dispatch, { lessons, id }) => {\n\ttry {\n\t\tawait axios.post( server+'/set_lesson_order', {\n\t\t\tlessons, id\n\t\t});\n\t} catch ( err ) {\n\t\treturn addErrorNotification( dispatch, err );\n\t}\n};\n\n/**\n * Returns a function to make a POST request to set the order lessons appear on the dashboard.\n *\n * @param {Function} dispatch - dispatch function\n * @returns {Function} function to make the POST request to set the order lessons appear on the dashboard\n */\nexport const setLessonOrderInjector = ( dispatch ) => {\n\treturn async ({ lessons, id }) => {\n\t\tawait setLessonOrder( dispatch, { lessons, id } );\n\t};\n};\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withTranslation } from 'react-i18next';\nimport Button from 'react-bootstrap/Button';\nimport Modal from 'react-bootstrap/Modal';\n\n\n// MAIN //\n\nconst ConfirmModal = ( props ) => (\n\t<Modal show={props.show} onHide={props.close}>\n\t\t<Modal.Header>\n\t\t\t<Modal.Title as=\"h3\">{props.title}</Modal.Title>\n\t\t</Modal.Header>\n\t\t<Modal.Body>\n\t\t\t{props.message}\n\t\t</Modal.Body>\n\t\t<Modal.Footer>\n\t\t\t<Button onClick={props.close}>{props.t('cancel')}</Button>\n\t\t\t<Button variant=\"danger\" onClick={props.onConfirm}>{props.t('confirm')}</Button>\n\t\t</Modal.Footer>\n\t</Modal>\n);\n\n\n// PROPERTIES //\n\nConfirmModal.propTypes = {\n\tclose: PropTypes.func,\n\tmessage: PropTypes.node,\n\tonConfirm: PropTypes.func,\n\tshow: PropTypes.bool,\n\ttitle: PropTypes.string\n};\n\nConfirmModal.defaultProps = {\n\tclose() {},\n\tmessage: '',\n\tonConfirm() {},\n\tshow: false,\n\ttitle: ''\n};\n\n\n// EXPORTS //\n\nexport default withTranslation( [ 'common' ] )( ConfirmModal );\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n\n// MODULES //\n\nimport React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport ReactTable from 'react-table';\nimport Button from 'react-bootstrap/Button';\nimport ButtonGroup from 'react-bootstrap/ButtonGroup';\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\nimport Tooltip from 'react-bootstrap/Tooltip';\nimport 'react-table/react-table.css';\nimport './table.css';\n\n\n// MAIN //\n\nclass DashboardTable extends Component {\n\tgetProps = () => {\n\t\treturn {\n\t\t\tid: this.props.id || 'dashboard-table'\n\t\t};\n\t};\n\n\trender() {\n\t\tconst { t } = this.props;\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<ReactTable\n\t\t\t\t\t{...this.props}\n\t\t\t\t\tfilterable\n\t\t\t\t\tclassName={`dashboard-table ${this.props.className}`}\n\t\t\t\t\tdata={this.props.data}\n\t\t\t\t\tcolumns={this.props.columns}\n\t\t\t\t\tpreviousText={t('common:previous')}\n\t\t\t\t\tnextText={t('common:next')}\n\t\t\t\t\tloadingText={t('common:loading')}\n\t\t\t\t\tnoDataText={t('common:no-rows-found')}\n\t\t\t\t\tpageText={t('common:page')}\n\t\t\t\t\tofText={t('common:of')}\n\t\t\t\t\trowsText={t('common:rows')}\n\t\t\t\t\tref={( table ) => {\n\t\t\t\t\t\tthis.table = table;\n\t\t\t\t\t}}\n\t\t\t\t\tgetProps={this.getProps}\n\t\t\t\t/>\n\t\t\t\t{this.props.onButtonClick ? <ButtonGroup vertical style={{ float: 'right', marginRight: -9 }} >\n\t\t\t\t\t<OverlayTrigger placement=\"left\" overlay={<Tooltip id=\"explorer-tooltip\">{t('common:data-explorer')}</Tooltip>}>\n\t\t\t\t\t\t<Button aria-label={t('common:data-explorer')} variant=\"primary\" style={{ marginBottom: 8 }} onClick={this.props.onButtonClick} >\n\t\t\t\t\t\t\t<i className=\"fas fa-chart-bar\" ></i>\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</OverlayTrigger>\n\t\t\t\t</ButtonGroup> : null}\n\t\t\t</Fragment>\n\t\t);\n\t}\n}\n\n\n// PROPERTIES //\n\nDashboardTable.propTypes = {\n\tclassName: PropTypes.string,\n\tcolumns: PropTypes.array.isRequired,\n\tdata: PropTypes.oneOfType([\n\t\tPropTypes.object,\n\t\tPropTypes.array\n\t]).isRequired,\n\tonButtonClick: PropTypes.func.isRequired,\n\tt: PropTypes.func\n};\n\nDashboardTable.defaultProps = {\n\tclassName: '',\n\tt() {}\n};\n\n\n// EXPORTS //\n\nexport default DashboardTable;\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport logger from 'debug';\nimport { withTranslation } from 'react-i18next';\nimport stringify from 'csv-stringify';\nimport ButtonGroup from 'react-bootstrap/ButtonGroup';\nimport Button from 'react-bootstrap/Button';\nimport FormLabel from 'react-bootstrap/FormLabel';\nimport FormGroup from 'react-bootstrap/FormGroup';\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\nimport Tooltip from 'react-bootstrap/Tooltip';\nimport Badge from 'react-bootstrap/Badge';\nimport copyToClipboard from 'clipboard-copy';\nimport roundn from '@stdlib/math/base/special/roundn';\nimport ceil from '@stdlib/math/base/special/ceil';\nimport pick from '@stdlib/utils/pick';\nimport contains from '@stdlib/assert/contains';\nimport lowercase from '@stdlib/string/lowercase';\nimport trim from '@stdlib/string/trim';\nimport DashboardDataExplorer from 'ev/components/data-explorer';\nimport obsToVar from '@isle-project/utils/obs-to-var';\nimport DashboardTable from 'components/dashboard-table';\nimport ConfirmModal from 'components/confirm-modal';\nimport server from 'constants/server';\nimport saveAs from 'utils/file_saver.js';\nimport createDateColumn from 'utils/create_date_column.js';\nimport createTextColumn from 'utils/create_text_column.js';\nimport createNumericColumn from 'utils/create_numeric_column.js';\nimport 'css/input_range.css';\nimport './files_page.css';\n\n\n// VARIABLES //\n\nconst EXPORT_COLUMNS = [ 'name', 'email', 'lesson', 'title', 'filename', 'type', 'createdAt', 'updatedAt' ];\nconst debug = logger( 'isle:files-page' );\n\n\n// FUNCTIONS //\n\n/**\n * Keeps the part of the file path after `/media/`.\n *\n * @param {string} filepath - file path\n * @returns {string} part of the file path after `/media/`\n */\nconst getPartAfterMedia = ( filepath ) => {\n\treturn filepath.substring( filepath.indexOf( '/media/' ) + 7 );\n};\n\nconst prepareExportData = ( data ) => {\n\tfor ( let i = 0; i < data.length; i++ ) {\n\t\tconst row = pick( data[ i ], EXPORT_COLUMNS );\n\t\trow.lesson = row.lesson.title;\n\t\trow.filename = server+'/'+row.filename;\n\t\tdata[ i ] = row;\n\t}\n\treturn data;\n};\n\n\n// MAIN //\n\nclass FilesPage extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\t\tthis.state = {\n\t\t\tshowDeleteModal: false,\n\t\t\tdeletionID: null,\n\t\t\tfileMaxSize: 0,\n\t\t\tfileInputKey: 0,\n\t\t\tshowExplorer: false\n\t\t};\n\t\tthis.columns = this.createColumns();\n\t}\n\n\tcomponentDidMount() {\n\t\tdebug( 'Component did mount...' );\n\t\tthis.props.getFiles({\n\t\t\tnamespaceName: this.props.namespace.title\n\t\t});\n\t}\n\n\tcomponentDidUpdate( prevProps ) {\n\t\tif ( prevProps.files !== this.props.files ) {\n\t\t\tconst files = this.props.files;\n\t\t\tlet fileMaxSize = 0;\n\t\t\tfor ( let i = 0; i < files.length; i++ ) {\n\t\t\t\tconst size = files[ i ].size;\n\t\t\t\tif ( size && size > fileMaxSize ) {\n\t\t\t\t\tfileMaxSize = size;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.setState({\n\t\t\t\tfileMaxSize,\n\t\t\t\tfileInputKey: this.state.fileInputKey + 1\n\t\t\t});\n\t\t}\n\t}\n\n\thandleDelete = () => {\n\t\tthis.props.handleFileDeletion( this.state.deletionID, this.props.ownerFiles );\n\t\tthis.toggleDeleteModal();\n\t};\n\n\ttoggleDeleteModal = () => {\n\t\tthis.setState({\n\t\t\tshowDeleteModal: !this.state.showDeleteModal\n\t\t});\n\t};\n\n\tcreateColumns = () => {\n\t\tconst { t } = this.props;\n\t\treturn [\n\t\t\tcreateTextColumn({\n\t\t\t\tHeader: t('common:filename'),\n\t\t\t\taccessor: 'title',\n\t\t\t\tminWidth: 250,\n\t\t\t\tfilterMethod: ( filter, row ) => {\n\t\t\t\t\treturn contains( lowercase( row[ filter.id ] ), lowercase( filter.value ) );\n\t\t\t\t}\n\t\t\t}),\n\t\t\t{\n\t\t\t\tHeader: t('common:open'),\n\t\t\t\taccessor: 'path',\n\t\t\t\tCell: ( row ) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<OverlayTrigger placement=\"left\" overlay={<Tooltip id=\"external-link-tooltip\">{t('open-file')}</Tooltip>}>\n\t\t\t\t\t\t\t<a aria-label={t('open-file')} href={server+'/'+getPartAfterMedia( row.value )} target=\"_blank\" rel=\"noopener noreferrer\" >\n\t\t\t\t\t\t\t\t<Button aria-label={t('open-file')} size=\"sm\" variant=\"outline-secondary\">\n\t\t\t\t\t\t\t\t\t<i className=\"fa fa-external-link-alt\"></i>\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</OverlayTrigger> );\n\t\t\t\t},\n\t\t\t\tresizable: false,\n\t\t\t\tfilterable: false,\n\t\t\t\tsortable: false,\n\t\t\t\twidth: 45\n\t\t\t},\n\t\t\t{\n\t\t\t\tHeader: t('common:copy'),\n\t\t\t\tid: 'copy-path',\n\t\t\t\taccessor: 'path',\n\t\t\t\tCell: ( row ) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<OverlayTrigger placement=\"right\" overlay={<Tooltip id=\"copy-clipboard-tooltip\">{t('common:copy-link')}</Tooltip>}>\n\t\t\t\t\t\t\t<Button aria-label={t('common:copy-link')} variant=\"outline-secondary\" size=\"sm\"\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\tcopyToClipboard( server+'/'+getPartAfterMedia( row.value ) );\n\t\t\t\t\t\t\t\t\tthis.props.addNotification({\n\t\t\t\t\t\t\t\t\t\ttitle: 'Copied',\n\t\t\t\t\t\t\t\t\t\tmessage: 'Link copied to clipboard',\n\t\t\t\t\t\t\t\t\t\tlevel: 'success',\n\t\t\t\t\t\t\t\t\t\tposition: 'tl'\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<i className=\"fa fa-clipboard\"></i>\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</OverlayTrigger>\n\t\t\t\t\t);\n\t\t\t\t},\n\t\t\t\tresizable: false,\n\t\t\t\tfilterable: false,\n\t\t\t\tsortable: false,\n\t\t\t\twidth: 45\n\t\t\t},\n\t\t\tcreateTextColumn({\n\t\t\t\tHeader: t('common:lesson'),\n\t\t\t\taccessor: 'lesson',\n\t\t\t\tmaxWidth: 160,\n\t\t\t\tCell: ( row ) => {\n\t\t\t\t\tif ( !row.row.lesson ) {\n\t\t\t\t\t\treturn <span>{t('no-lesson')}</span>;\n\t\t\t\t\t}\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<OverlayTrigger placement=\"right\" overlay={<Tooltip id=\"open-lesson-tooltip\">{t('open-lesson-new-tab')}</Tooltip>}>\n\t\t\t\t\t\t\t<div style={{ width: '100%', height: '100%' }} >\n\t\t\t\t\t\t\t\t<a aria-label={t('open-lesson-new-tab')} href={row.row.lesson.url} target=\"_blank\" rel=\"noopener noreferrer\" >\n\t\t\t\t\t\t\t\t\t{row.row.lesson.title}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</OverlayTrigger>\n\t\t\t\t\t);\n\t\t\t\t},\n\t\t\t\tfilterMethod: ( filter, row ) => {\n\t\t\t\t\treturn row[ filter.id ].title.startsWith( filter.value );\n\t\t\t\t}\n\t\t\t}),\n\t\t\tcreateTextColumn({\n\t\t\t\tHeader: t('first-name'),\n\t\t\t\tid: 'first_name',\n\t\t\t\taccessor: d => {\n\t\t\t\t\tconst parts = trim( d.name ).split( ' ' );\n\t\t\t\t\tif ( parts.length > 1 ) {\n\t\t\t\t\t\tparts.pop();\n\t\t\t\t\t\treturn parts.join( ' ' );\n\t\t\t\t\t}\n\t\t\t\t\treturn parts[ 0 ];\n\t\t\t\t},\n\t\t\t\tmaxWidth: 75,\n\t\t\t\tfilterMethod: ( filter, row ) => {\n\t\t\t\t\treturn contains( lowercase( row[ filter.id ] ), lowercase( filter.value ) );\n\t\t\t\t}\n\t\t\t}),\n\t\t\tcreateTextColumn({\n\t\t\t\tHeader: t('last-name'),\n\t\t\t\tid: 'last_name',\n\t\t\t\taccessor: d => {\n\t\t\t\t\tconst parts = trim( d.name ).split( ' ' );\n\t\t\t\t\tif ( parts.length > 1 ) {\n\t\t\t\t\t\treturn parts[ parts.length - 1 ];\n\t\t\t\t\t}\n\t\t\t\t\treturn '';\n\t\t\t\t},\n\t\t\t\tmaxWidth: 75,\n\t\t\t\tfilterMethod: ( filter, row ) => {\n\t\t\t\t\treturn contains( lowercase( row[ filter.id ] ), lowercase( filter.value ) );\n\t\t\t\t}\n\t\t\t}),\n\t\t\tcreateTextColumn({\n\t\t\t\tHeader: t('common:email'),\n\t\t\t\taccessor: 'email',\n\t\t\t\tmaxWidth: 160,\n\t\t\t\tfilterMethod: ( filter, row ) => {\n\t\t\t\t\treturn contains( lowercase( row[ filter.id ] ), lowercase( filter.value ) );\n\t\t\t\t}\n\t\t\t}),\n\t\t\tcreateTextColumn({\n\t\t\t\tHeader: t('type'),\n\t\t\t\taccessor: 'type',\n\t\t\t\tfilterMethod: ( filter, row ) => {\n\t\t\t\t\treturn contains( row[ filter.id ], filter.value );\n\t\t\t\t}\n\t\t\t}),\n\t\t\tcreateNumericColumn({\n\t\t\t\tHeader: t('common:size'),\n\t\t\t\taccessor: 'size',\n\t\t\t\tCell: row => row.value ? `${roundn( row.value, -3 )}mb` : 'NA',\n\t\t\t\tfilterMethod: ( filter, row ) => {\n\t\t\t\t\tconst id = filter.pivotId || filter.id;\n\t\t\t\t\tconst size = row[ id ];\n\t\t\t\t\treturn size >= filter.value.min && size <= filter.value.max;\n\t\t\t\t},\n\t\t\t\tformatLabel: value => roundn( value, -2 ),\n\t\t\t\tmaxValue: ceil( this.state.fileMaxSize ) || 1,\n\t\t\t\tminValue: 0\n\t\t\t}),\n\t\t\tcreateDateColumn({\n\t\t\t\tHeader: t('common:date'),\n\t\t\t\taccessor: 'updatedAt',\n\t\t\t\tCell: ( row ) => {\n\t\t\t\t\tif ( row.value && row.value.toLocaleDateString ) {\n\t\t\t\t\t\treturn row.value.toLocaleDateString( 'en-US' );\n\t\t\t\t\t}\n\t\t\t\t\treturn '';\n\t\t\t\t},\n\t\t\t\tmaxWidth: 120,\n\t\t\t\tt: t\n\t\t\t}),\n\t\t\t{\n\t\t\t\tHeader: 'Del',\n\t\t\t\taccessor: '_id',\n\t\t\t\tCell: ( row ) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<OverlayTrigger placement=\"left\" overlay={<Tooltip id=\"delete-file-tooltip\">{t('delete-file-tooltip')}</Tooltip>}>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\taria-label={t('delete-file-tooltip')}\n\t\t\t\t\t\t\t\tsize=\"sm\" variant=\"outline-secondary\"\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\t\tdeletionID: row.value,\n\t\t\t\t\t\t\t\t\tshowDeleteModal: true\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}} >\n\t\t\t\t\t\t\t\t<div className=\"fa fa-trash-alt\" />\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</OverlayTrigger>\n\t\t\t\t\t);\n\t\t\t\t},\n\t\t\t\tresizable: false,\n\t\t\t\tfilterable: false,\n\t\t\t\tsortable: false,\n\t\t\t\twidth: 45\n\t\t\t}\n\t\t];\n\t};\n\n\tsaveJSON = () => {\n\t\tconst currentFiles = this.dashboardTable.table.getResolvedState().sortedData;\n\t\tlet data = prepareExportData( currentFiles );\n\t\tconst blob = new Blob([ JSON.stringify( data ) ], {\n\t\t\ttype: 'application/json'\n\t\t});\n\t\tconst name = `files_${this.props.namespace.title}.json`;\n\t\tsaveAs( blob, name );\n\t};\n\n\tsaveCSV = () => {\n\t\tconst currentFiles = this.dashboardTable.table.getResolvedState().sortedData;\n\t\tlet data = prepareExportData( currentFiles );\n\t\tstringify( data, {\n\t\t\theader: true\n\t\t}, ( err, output ) => {\n\t\t\tif ( err ) {\n\t\t\t\treturn this.props.addNotification({\n\t\t\t\t\ttitle: 'Error encountered',\n\t\t\t\t\tmessage: 'Encountered an error while creating CSV: '+err.message,\n\t\t\t\t\tlevel: 'error',\n\t\t\t\t\tposition: 'tl'\n\t\t\t\t});\n\t\t\t}\n\t\t\tconst blob = new Blob([ output ], {\n\t\t\t\ttype: 'text/plain'\n\t\t\t});\n\t\t\tconst name = `files_${this.props.namespace.title}.csv`;\n\t\t\tsaveAs( blob, name );\n\t\t});\n\t};\n\n\ttoggleExplorer = () => {\n\t\tthis.setState({\n\t\t\tshowExplorer: !this.state.showExplorer\n\t\t});\n\t};\n\n\trender() {\n\t\tconst { t } = this.props;\n\t\tif ( this.state.showExplorer ) {\n\t\t\tconst files = this.props.files;\n\t\t\tlet data = [];\n\t\t\tfor ( let i = 0; i < files.length; i++ ) {\n\t\t\t\tconst file = files[ i ];\n\t\t\t\tconst replacement = {};\n\t\t\t\treplacement.title = file.title;\n\t\t\t\treplacement.type = file.type;\n\t\t\t\treplacement.lesson = file.lesson ? file.lesson.title : null;\n\t\t\t\treplacement.size = file.size ? file.size : null;\n\t\t\t\treplacement.email = file.email;\n\t\t\t\treplacement.createdAt = file.createdAt;\n\t\t\t\treplacement.updatedAt = file.updatedAt;\n\t\t\t\tdata.push( replacement );\n\t\t\t}\n\t\t\tdata = obsToVar( data );\n\t\t\tconst quantitative = [ 'size' ];\n\t\t\tconst categorical = [ 'title', 'type', 'lesson', 'email', 'createdAt', 'updatedAt' ];\n\t\t\treturn (\n\t\t\t\t<DashboardDataExplorer\n\t\t\t\t\ttitle={t('explorer-files-title')}\n\t\t\t\t\tdata={data}\n\t\t\t\t\tcategorical={categorical}\n\t\t\t\t\tquantitative={quantitative}\n\t\t\t\t\tclose={this.toggleExplorer}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t\treturn ( <div className=\"namespace-data-page\">\n\t\t\t<div className=\"namespace-data-buttons\">\n\t\t\t\t<ButtonGroup className=\"files-export-button-group\" >\n\t\t\t\t\t<OverlayTrigger placement=\"bottom\" overlay={<Tooltip id=\"csvTooltip\" >{t('save-as-csv')}</Tooltip>}>\n\t\t\t\t\t\t<Button size=\"sm\" variant=\"secondary\" onClick={this.saveCSV} ><i className=\"fas fa-download\"></i> CSV</Button>\n\t\t\t\t\t</OverlayTrigger>\n\t\t\t\t\t<OverlayTrigger placement=\"bottom\" overlay={<Tooltip id=\"jsonTooltip\">{t('save-as-json')}</Tooltip>}>\n\t\t\t\t\t\t<Button size=\"sm\" variant=\"secondary\" onClick={this.saveJSON} ><i className=\"fas fa-download\"></i> JSON</Button>\n\t\t\t\t\t</OverlayTrigger>\n\t\t\t\t</ButtonGroup>\n\t\t\t\t{ this.props.ownerFiles ? <FormGroup className=\"file-upload-button\" >\n\t\t\t\t\t<FormLabel htmlFor=\"fileUpload\" style={{ cursor: 'pointer' }}>\n\t\t\t\t\t\t<Badge id=\"file-upload-badge\" variant=\"success\">{t('upload-file')}</Badge>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tid=\"fileUpload\"\n\t\t\t\t\t\t\tkey={this.state.fileInputKey}\n\t\t\t\t\t\t\ttype=\"file\"\n\t\t\t\t\t\t\taccept=\".pdf,.html,.md,image/*,video/*,audio/*,.json,.csv\"\n\t\t\t\t\t\t\tonChange={this.props.handleUpload}\n\t\t\t\t\t\t\tstyle={{ display: 'none' }}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</FormLabel>\n\t\t\t\t</FormGroup> : null }\n\t\t\t</div>\n\t\t\t<DashboardTable\n\t\t\t\tdata={this.props.files}\n\t\t\t\tcolumns={this.columns}\n\t\t\t\tt={t}\n\t\t\t\tref={(r) => {\n\t\t\t\t\tthis.dashboardTable = r;\n\t\t\t\t}}\n\t\t\t\tonButtonClick={this.toggleExplorer}\n\t\t\t/>\n\t\t\t<ConfirmModal\n\t\t\t\tshow={this.state.showDeleteModal}\n\t\t\t\tclose={this.toggleDeleteModal}\n\t\t\t\tmessage={t('delete-file')}\n\t\t\t\ttitle={`${t('common:delete')}?`}\n\t\t\t\tonConfirm={this.handleDelete}\n\t\t\t/>\n\t\t</div> );\n\t}\n}\n\n\n// PROPERTIES //\n\nFilesPage.propTypes = {\n\taddNotification: PropTypes.func.isRequired,\n\tfiles: PropTypes.array.isRequired,\n\tgetFiles: PropTypes.func.isRequired,\n\thandleFileDeletion: PropTypes.func.isRequired,\n\thandleUpload: PropTypes.func.isRequired,\n\tnamespace: PropTypes.object.isRequired,\n\townerFiles: PropTypes.bool\n};\n\nFilesPage.defaultProps = {\n\townerFiles: false\n};\n\n\n// EXPORTS //\n\nexport default withTranslation( [ 'namespace_data', 'common' ] )( FilesPage );\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { withTranslation } from 'react-i18next';\nimport Button from 'react-bootstrap/Button';\nimport ButtonGroup from 'react-bootstrap/ButtonGroup';\nimport Card from 'react-bootstrap/Card';\nimport FormLabel from 'react-bootstrap/FormLabel';\nimport FormControl from 'react-bootstrap/FormControl';\nimport FormGroup from 'react-bootstrap/FormGroup';\nimport Form from 'react-bootstrap/Form';\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\nimport Tooltip from 'react-bootstrap/Tooltip';\nimport ConfirmModal from 'components/confirm-modal';\nimport '../profile-page/message-page.css';\nimport './message_admin_page.css';\n\n\n// MAIN //\n\nclass AnnouncementsPage extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\t\tthis.state = {\n\t\t\ttitle: '',\n\t\t\tbody: '',\n\t\t\tmode: 'new-announcement',\n\t\t\teditItem: null,\n\t\t\tshowDeleteModal: false\n\t\t};\n\t}\n\n\trenderModals() {\n\t\treturn null;\n\t}\n\n\teditMessage( ndx ) {\n\t\tconst announcement = this.props.namespace.announcements[ ndx ];\n\t\tthis.setState({\n\t\t\tmode: 'edit-announcement',\n\t\t\teditItem: ndx,\n\t\t\ttitle: announcement.title,\n\t\t\tbody: announcement.body\n\t\t});\n\t}\n\n\tdeleteSelectedMessage = () => {\n\t\tconst ndx = this.state.editItem;\n\t\tconst announcement = this.props.namespace.announcements[ ndx ];\n\t\tthis.props.deleteAnnouncement( announcement.createdAt, ndx );\n\t\tthis.clear();\n\t\tthis.closeDeleteModal();\n\t};\n\n\trenderMessages() {\n\t\tconst { t } = this.props;\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t{this.props.namespace.announcements.map( ( value, index ) => {\n\t\t\t\t\tconst date = new Date( value.createdAt );\n\t\t\t\t\tconst dateString = date.toLocaleDateString() + '  -  ' + date.toLocaleTimeString( navigator.language, {\n\t\t\t\t\t\thour: '2-digit',\n\t\t\t\t\t\tminute: '2-digit'\n\t\t\t\t\t});\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div key={index}>\n\t\t\t\t\t\t<div className=\"message-container\">\n\t\t\t\t\t\t\t<div className=\"message-data\">\n\t\t\t\t\t\t\t\t<div className=\"message-profile-pic\">\n\t\t\t\t\t\t\t\t\t<img src={value.picture} alt=\"User Profile Pic\" />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"message-author-line\">\n\t\t\t\t\t\t\t\t\t<span className=\"message-author\">{ value.author }</span>\n\t\t\t\t\t\t\t\t\t&nbsp;{t('common:wrote-on', { date: dateString })}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"message-title\">\n\t\t\t\t\t\t\t\t{ value.title }\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"message-body\">\n\t\t\t\t\t\t\t\t{ value.body }\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"message-manip\">\n\t\t\t\t\t\t\t<button onClick={() => {\n\t\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\t\teditItem: index,\n\t\t\t\t\t\t\t\t\tshowDeleteModal: true\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}} className=\"message-delete\">{t('common:delete')}</button>\n\t\t\t\t\t\t\t<button onClick={() => {\n\t\t\t\t\t\t\t\tthis.editMessage(index);\n\t\t\t\t\t\t\t}} className=\"message-edit\">{t('common:edit')}</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</div>\n\t\t);\n\t}\n\n\tcreateMessage = () => {\n\t\tconst now = new Date().getTime();\n\t\tconst message = {\n\t\t\ttitle: this.state.title,\n\t\t\tbody: this.state.body,\n\t\t\tauthor: this.props.user.name,\n\t\t\temail: this.props.user.email,\n\t\t\tpicture: this.props.user.picture\n\t\t};\n\t\tif ( this.state.editItem === null ) {\n\t\t\tmessage.createdAt = now;\n\t\t\tthis.props.addAnnouncement( message );\n\t\t}\n\t\telse {\n\t\t\tconst announcement = this.props.namespace.announcements[ this.state.editItem ];\n\t\t\tmessage.createdAt = announcement.createdAt;\n\t\t\tthis.props.editAnnouncement( message );\n\t\t}\n\t\tthis.clear();\n\t};\n\n\thandleInputChange = ( event ) => {\n\t\tconst target = event.target;\n\t\tconst name = target.name;\n\t\tlet value = target.value;\n\t\tthis.setState({\n\t\t\t[ name ]: value\n\t\t});\n\t};\n\n\tclear = () => {\n\t\tthis.setState({\n\t\t\ttitle: '',\n\t\t\tbody: '',\n\t\t\tmode: 'new-announcement',\n\t\t\teditItem: null\n\t\t});\n\t};\n\n\tcloseDeleteModal = () => {\n\t\tthis.setState({\n\t\t\teditItem: null,\n\t\t\tshowDeleteModal: false\n\t\t});\n\t};\n\n\trender() {\n\t\tconst { t } = this.props;\n\t\tconst isDisabled = this.state.title.length < 3 || this.state.body.length < 3;\n\t\tconst isEmpty = this.state.title.length === 0 && this.state.body.length === 0;\n\t\treturn ( <div className=\"namespace-data-page\">\n\t\t\t<div className=\"messages\">\n\t\t\t\t{ this.renderMessages() }\n\t\t\t</div>\n\t\t\t<div className=\"new_message\">\n\t\t\t\t<Card>\n\t\t\t\t\t<Card.Header>\n\t\t\t\t\t\t<Card.Title as=\"h3\">\n\t\t\t\t\t\t\t{t(this.state.mode)}\n\t\t\t\t\t\t</Card.Title>\n\t\t\t\t\t</Card.Header>\n\t\t\t\t\t<Card.Body>\n\t\t\t\t\t\t<Form style={{ padding: '20px' }}>\n\t\t\t\t\t\t\t<OverlayTrigger placement=\"bottom\" overlay={<Tooltip id=\"titleTooltip\">{t('announcement-title')}</Tooltip>}>\n\t\t\t\t\t\t\t\t<FormGroup controlId=\"form-title\" >\n\t\t\t\t\t\t\t\t\t<FormLabel>{t('common:title')}</FormLabel>\n\t\t\t\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\t\t\t\tname=\"title\"\n\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\tvalue={this.state.title}\n\t\t\t\t\t\t\t\t\t\tonChange={this.handleInputChange}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</FormGroup>\n\t\t\t\t\t\t\t</OverlayTrigger>\n\t\t\t\t\t\t\t<FormGroup controlId=\"form-text\" >\n\t\t\t\t\t\t\t\t<FormLabel>{t('announcement-text')}</FormLabel>\n\t\t\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\t\t\tname=\"body\"\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tas=\"textarea\" rows=\"10\"\n\t\t\t\t\t\t\t\t\tvalue={this.state.body}\n\t\t\t\t\t\t\t\t\tonChange={this.handleInputChange}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t\t</FormGroup>\n\t\t\t\t\t\t</Form>\n\t\t\t\t\t\t<ButtonGroup>\n\t\t\t\t\t\t\t<Button type=\"submit\" disabled={isDisabled} onClick={this.createMessage}>\n\t\t\t\t\t\t\t\t{ this.state.mode === 'new-announcement' ? t('common:create') : t('common:update') }\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t<Button onClick={this.clear} disabled={isEmpty} variant=\"danger\">{t('common:clear')}</Button>\n\t\t\t\t\t\t</ButtonGroup>\n\t\t\t\t\t</Card.Body>\n\t\t\t\t</Card>\n\t\t\t</div>\n\t\t\t<ConfirmModal\n\t\t\t\tshow={this.state.showDeleteModal}\n\t\t\t\tclose={this.closeDeleteModal}\n\t\t\t\tmessage={t('delete-announcement')}\n\t\t\t\ttitle={`${t('common:delete')}?`}\n\t\t\t\tonConfirm={this.deleteSelectedMessage}\n\t\t\t/>\n\t\t</div> );\n\t}\n}\n\n\n// PROPERTIES //\n\nAnnouncementsPage.propTypes = {\n\taddAnnouncement: PropTypes.func.isRequired,\n\tdeleteAnnouncement: PropTypes.func.isRequired,\n\teditAnnouncement: PropTypes.func.isRequired,\n\tnamespace: PropTypes.object.isRequired,\n\tuser: PropTypes.object.isRequired\n};\n\nAnnouncementsPage.defaultProps = {\n};\n\n\n// EXPORTS //\n\nexport default withTranslation( [ 'namespace_data', 'common' ] )( AnnouncementsPage );\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React, { Component, Fragment } from 'react';\nimport ProgressBar from 'react-bootstrap/ProgressBar';\nimport clamp from '@stdlib/math/base/special/clamp';\nimport './editable_progress.css';\n\n\n// MAIN //\n\nclass EditableProgress extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tthis.state = {\n\t\t\tisEditing: false,\n\t\t\thasChanged: false,\n\t\t\tnewProgress: props.progress,\n\t\t\toriginalProgress: props.progress\n\t\t};\n\t}\n\n\tstatic getDerivedStateFromProps( nextProps, prevState ) {\n\t\tif ( nextProps.progress !== prevState.originalProgress ) {\n\t\t\treturn {\n\t\t\t\tnewProgress: nextProps.progress,\n\t\t\t\toriginalProgress: nextProps.progress\n\t\t\t};\n\t\t}\n\t\treturn null;\n\t}\n\n\ttoggleEditing = () => {\n\t\tthis.setState({\n\t\t\tisEditing: !this.state.isEditing,\n\t\t\tnewProgress: this.props.progress\n\t\t});\n\t};\n\n\thandleChange = ( event ) => {\n\t\tthis.setState({\n\t\t\tnewProgress: clamp( event.target.value, 0, 100 ),\n\t\t\thasChanged: true\n\t\t});\n\t};\n\n\thandleSubmit = () => {\n\t\tthis.setState({\n\t\t\tisEditing: false,\n\t\t\thasChanged: false\n\t\t});\n\t\tthis.props.onSubmit( this.state.newProgress );\n\t};\n\n\trender() {\n\t\treturn (\n\t\t\tthis.state.isEditing ?\n\t\t\t<Fragment>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"number\"\n\t\t\t\t\tvalue={this.state.newProgress}\n\t\t\t\t\tmin={0}\n\t\t\t\t\tmax={100}\n\t\t\t\t\tonChange={this.handleChange}\n\t\t\t\t\tclassName=\"editable-progress-input\"\n\t\t\t\t/>\n\t\t\t\t<i\n\t\t\t\t\trole=\"button\" tabIndex={0}\n\t\t\t\t\tonClick={this.toggleEditing}\n\t\t\t\t\tonKeyPress={this.toggleEditing}\n\t\t\t\t\tclassName=\"fas fa-window-close editable-progress-close\"\n\t\t\t\t></i>\n\t\t\t\t<span className=\"editable-progress-submit\" style={{ display: this.state.hasChanged ? 'inline' : 'none' }}>\n\t\t\t\t\t<i\n\t\t\t\t\t\trole=\"button\" tabIndex={0}\n\t\t\t\t\t\tonClick={this.handleSubmit}\n\t\t\t\t\t\tonKeyPress={this.handleSubmit}\n\t\t\t\t\t\tclassName=\"fas fa-check-square\"\n\t\t\t\t\t></i>\n\t\t\t\t</span>\n\t\t\t</Fragment>: <ProgressBar\n\t\t\t\taria-label=\"new-progress\"\n\t\t\t\tstyle={{\n\t\t\t\t\tfontSize: '10px',\n\t\t\t\t\theight: '12px'\n\t\t\t\t}}\n\t\t\t\tnow={this.state.newProgress}\n\t\t\t\tlabel={`${this.state.newProgress}%`}\n\t\t\t\tonClick={this.toggleEditing}\n\t\t\t/>\n\t\t);\n\t}\n}\n\n\n// EXPORTS //\n\nexport default EditableProgress;\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport logger from 'debug';\nimport { withTranslation } from 'react-i18next';\nimport stringify from 'csv-stringify';\nimport InputRange from 'react-input-range';\nimport Button from 'react-bootstrap/Button';\nimport ButtonGroup from 'react-bootstrap/ButtonGroup';\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\nimport Tooltip from 'react-bootstrap/Tooltip';\nimport DropdownButton from 'react-bootstrap/DropdownButton';\nimport Dropdown from 'react-bootstrap/Dropdown';\nimport round from '@stdlib/math/base/special/round';\nimport min from '@stdlib/math/base/special/min';\nimport isArray from '@stdlib/assert/is-array';\nimport isUndefinedOrNull from '@stdlib/assert/is-undefined-or-null';\nimport contains from '@stdlib/assert/contains';\nimport lowercase from '@stdlib/string/lowercase';\nimport trim from '@stdlib/string/trim';\nimport DashboardTable from 'components/dashboard-table';\nimport DashboardDataExplorer from 'ev/components/data-explorer';\nimport obsToVar from '@isle-project/utils/obs-to-var';\nimport server from 'constants/server';\nimport saveAs from 'utils/file_saver.js';\nimport createTextColumn from 'utils/create_text_column.js';\nimport EditableProgress from './editable_progress.js';\nimport formatTime from 'utils/format_time.js';\nimport './progress_page.css';\nimport 'css/input_range.css';\n\n\n// VARIABLES //\n\nconst debug = logger( 'isle:progress-page' );\n\n\n// FUNCTIONS //\n\nfunction filterNumbersFactory( lessons, idx ) {\n\treturn ( filter, row ) => {\n\t\tconst data = row[ filter.id ];\n\t\tconst lessonData = data[ lessons[ idx ]._id ];\n\t\tif ( isUndefinedOrNull( lessonData ) ) {\n\t\t\treturn filter.value.min === 0;\n\t\t}\n\t\tconst progress = min( round( lessonData.progress*100 ), 100 );\n\t\treturn progress >= filter.value.min && progress <= filter.value.max;\n\t};\n}\n\nfunction sortFactory( lessons, idx ) {\n\treturn ( a, b ) => {\n\t\ta = a[ lessons[ idx ]._id ];\n\t\tb = b[ lessons[ idx ]._id ];\n\t\tif ( !a && !b ) {\n\t\t\treturn 0;\n\t\t}\n\t\tif ( a && !b ) {\n\t\t\treturn 1;\n\t\t}\n\t\tif ( !a && b ) {\n\t\t\treturn -1;\n\t\t}\n\t\tif ( a.progress > b.progress ) {\n\t\t\treturn 1;\n\t\t}\n\t\tif ( a.progress < b.progress ) {\n\t\t\treturn -1;\n\t\t}\n\t\treturn 0;\n\t};\n}\n\nfunction filterMethodCategories( filter, row ) {\n\tif ( filter.value === 'all' ) {\n\t\treturn true;\n\t}\n\tconst id = filter.pivotId || filter.id;\n\tif ( row[ id ] === void 0 ) {\n\t\treturn true;\n\t}\n\tif ( isArray( filter.value ) ) {\n\t\treturn contains( filter.value, String( row[ id ] ) );\n\t}\n\treturn String( row[ id ] ) === filter.value;\n}\n\n\n// MAIN //\n\nclass ProgressPage extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tthis.columns = this.createColumns( props.lessons, props.cohorts );\n\t\tthis.state = {\n\t\t\tdisplayedMembers: [],\n\t\t\tlessonSortDirection: 'ascending',\n\t\t\tlessonOrder: 'createdAt',\n\t\t\tshowExplorer: false\n\t\t};\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.createDisplayedMembers();\n\t}\n\n\tcomponentDidUpdate( prevProps ) {\n\t\tif (\n\t\t\tthis.props.cohorts !== prevProps.cohorts ||\n\t\t\tthis.props.lessons !== prevProps.lessons\n\t\t) {\n\t\t\tthis.createDisplayedMembers();\n\t\t\tthis.columns = this.createColumns( this.props.lessons, this.props.cohorts );\n\t\t}\n\t}\n\n\tcreateDisplayedMembers() {\n\t\tlet members = [];\n\t\tfor ( let i = 0; i < this.props.cohorts.length; i++ ) {\n\t\t\tconst cohortMembers = this.props.cohorts[ i ].members;\n\t\t\tfor ( let j = 0; j < cohortMembers.length; j++ ) {\n\t\t\t\tcohortMembers[ j ].cohort = this.props.cohorts[ i ].title;\n\t\t\t\tif ( !cohortMembers[ j ].lessonData ) {\n\t\t\t\t\tcohortMembers[ j ].lessonData = {};\n\t\t\t\t}\n\t\t\t}\n\t\t\tmembers = members.concat( this.props.cohorts[ i ].members );\n\t\t}\n\t\tfor ( let i = 0; i < members.length; i++ ) {\n\t\t\tconst d = members[ i ];\n\t\t\tconst parts = trim( d.name ).split( ' ' );\n\t\t\tif ( parts.length > 1 ) {\n\t\t\t\td.lastName = parts.pop();\n\t\t\t\td.firstName = parts.join( ' ' );\n\t\t\t} else {\n\t\t\t\td.firstName = parts[ 0 ];\n\t\t\t\td.lastName = '';\n\t\t\t}\n\t\t}\n\t\tthis.setState({ // eslint-disable-line react/no-did-mount-set-state\n\t\t\tdisplayedMembers: members\n\t\t});\n\t}\n\n\tcreateColumns( lessons, cohorts ) {\n\t\tconst { t } = this.props;\n\t\tconst COLUMNS = [\n\t\t\t{\n\t\t\t\tHeader: 'Pic',\n\t\t\t\taccessor: 'picture',\n\t\t\t\tCell: row => (\n\t\t\t\t\t<img className=\"table-pic\" src={`${server}/thumbnail/${row.original.picture}`} alt=\"Profile Pic\" />\n\t\t\t\t),\n\t\t\t\tmaxWidth: 46,\n\t\t\t\tminWidth: 46,\n\t\t\t\tfilterable: false,\n\t\t\t\tresizable: false,\n\t\t\t\tsortable: false,\n\t\t\t\tstyle: { color: 'darkslategrey' }\n\t\t\t},\n\t\t\tcreateTextColumn({\n\t\t\t\tHeader: t('first-name'),\n\t\t\t\tid: 'first_name',\n\t\t\t\taccessor: 'firstName',\n\t\t\t\tmaxWidth: 75,\n\t\t\t\tfilterMethod: ( filter, row ) => {\n\t\t\t\t\treturn contains( lowercase( row[ filter.id ] ), lowercase( filter.value ) );\n\t\t\t\t}\n\t\t\t}),\n\t\t\tcreateTextColumn({\n\t\t\t\tHeader: t('last-name'),\n\t\t\t\tid: 'last_name',\n\t\t\t\taccessor: 'lastName',\n\t\t\t\tmaxWidth: 75,\n\t\t\t\tfilterMethod: ( filter, row ) => {\n\t\t\t\t\treturn contains( lowercase( row[ filter.id ] ), lowercase( filter.value ) );\n\t\t\t\t}\n\t\t\t}),\n\t\t\tcreateTextColumn({\n\t\t\t\tHeader: t('common:email'),\n\t\t\t\taccessor: 'email',\n\t\t\t\tmaxWidth: 200,\n\t\t\t\tfilterMethod: ( filter, row ) => {\n\t\t\t\t\treturn contains( lowercase( row[ filter.id ] ), lowercase( filter.value ) );\n\t\t\t\t}\n\t\t\t}),\n\t\t\t{\n\t\t\t\tHeader: t('common:cohort'),\n\t\t\t\taccessor: 'cohort',\n\t\t\t\tstyle: { marginTop: '8px', color: 'darkslategrey' },\n\t\t\t\tfilterMethod: filterMethodCategories,\n\t\t\t\tFilter: ({ filter, onChange }) => {\n\t\t\t\t\tconst handleChange = ( event ) => {\n\t\t\t\t\t\tconst newValue = event.target.value;\n\t\t\t\t\t\tonChange( newValue );\n\t\t\t\t\t};\n\t\t\t\t\tlet value;\n\t\t\t\t\tif ( !filter ) {\n\t\t\t\t\t\tvalue = 'all';\n\t\t\t\t\t} else if ( isArray( filter.value ) ) {\n\t\t\t\t\t\tvalue = filter.value.join( ', ' );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvalue = filter.value;\n\t\t\t\t\t}\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<select\n\t\t\t\t\t\t\tonBlur={handleChange} onChange={handleChange}\n\t\t\t\t\t\t\tstyle={{ width: '100%', backgroundColor: 'ghostwhite' }}\n\t\t\t\t\t\t\tvalue={value}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<option value=\"all\">Show All</option>\n\t\t\t\t\t\t\t{cohorts.map( ( v, key ) => {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<option\n\t\t\t\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t\t\t\t\tvalue={`${v.title}`}\n\t\t\t\t\t\t\t\t\t>{v.title}</option>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</select>\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t];\n\t\tfor ( let i = 0; i < lessons.length; i++ ) {\n\t\t\tconst id = 'lesson_'+i;\n\t\t\tCOLUMNS.push({\n\t\t\t\tid,\n\t\t\t\tHeader: <span id={id} >{lessons[ i ].title}</span>,\n\t\t\t\t_lesson: lessons[ i ],\n\t\t\t\tCell: this.accessorFactory( lessons, i ),\n\t\t\t\taccessor: 'lessonData',\n\t\t\t\tsortMethod: sortFactory( lessons, i ),\n\t\t\t\tfilterMethod: filterNumbersFactory( lessons, i ),\n\t\t\t\tFilter: ({ filter, onChange }) => {\n\t\t\t\t\tconst defaultVal = {\n\t\t\t\t\t\tmax: 100,\n\t\t\t\t\t\tmin: 0\n\t\t\t\t\t};\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div style={{\n\t\t\t\t\t\t\tpaddingLeft: '4px',\n\t\t\t\t\t\t\tpaddingRight: '4px',\n\t\t\t\t\t\t\tpaddingTop: '8px'\n\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t<InputRange\n\t\t\t\t\t\t\t\tariaLabelledby={id}\n\t\t\t\t\t\t\t\tariaControls=\"dashboard-table\"\n\t\t\t\t\t\t\t\tallowSameValues\n\t\t\t\t\t\t\t\tmaxValue={100}\n\t\t\t\t\t\t\t\tminValue={0}\n\t\t\t\t\t\t\t\tvalue={filter ? filter.value : defaultVal}\n\t\t\t\t\t\t\t\tonChange={( newValue ) => {\n\t\t\t\t\t\t\t\t\tonChange( newValue );\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\treturn COLUMNS;\n\t}\n\n\taccessorFactory = ( lessons, idx ) => {\n\t\tconst { t } = this.props;\n\t\treturn d => {\n\t\t\tlet data = d.original.lessonData;\n\t\t\tconst lessonID = lessons[ idx ]._id;\n\t\t\tdata = data[ lessonID ];\n\t\t\tif ( data ) {\n\t\t\t\tconst progress = min( round( data.progress*100 ), 100 );\n\t\t\t\treturn (\n\t\t\t\t\t<span style={{ fontSize: '12px', fontWeight: 800 }}>\n\t\t\t\t\t\t<OverlayTrigger placement=\"bottom\" overlay={<Tooltip id=\"durationTooltip\" >{t('hours-minutes-seconds')}</Tooltip>}>\n\t\t\t\t\t\t\t<span>{t('duration')}: {formatTime( data.spentTime )}</span>\n\t\t\t\t\t\t</OverlayTrigger>\n\t\t\t\t\t\t<OverlayTrigger placement=\"bottom\" overlay={<Tooltip id=\"startTooltip\" >{t('first-accessed')}</Tooltip>}>\n\t\t\t\t\t\t\t<span> | {new Date( data.createdAt ).toLocaleString()}</span>\n\t\t\t\t\t\t</OverlayTrigger>\n\t\t\t\t\t\t<OverlayTrigger placement=\"bottom\" overlay={<Tooltip id=\"startTooltip\" >{t('last-accessed')}</Tooltip>}>\n\t\t\t\t\t\t\t<span> - {new Date( data.updatedAt ).toLocaleString()}</span>\n\t\t\t\t\t\t</OverlayTrigger>\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t<EditableProgress\n\t\t\t\t\t\t\tprogress={progress}\n\t\t\t\t\t\t\temail={d.original.email}\n\t\t\t\t\t\t\tlessonID={lessonID}\n\t\t\t\t\t\t\tonSubmit={( newProgress ) => {\n\t\t\t\t\t\t\t\tthis.props.adjustProgress({\n\t\t\t\t\t\t\t\t\temail: d.original.email,\n\t\t\t\t\t\t\t\t\tlessonID: lessonID,\n\t\t\t\t\t\t\t\t\tnamespaceID: this.props.namespace._id,\n\t\t\t\t\t\t\t\t\tcohort: d.original.cohort,\n\t\t\t\t\t\t\t\t\tprogress: newProgress\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</span>\n\t\t\t\t);\n\t\t\t}\n\t\t\treturn <span></span>;\n\t\t};\n\t};\n\n\tassembleData() {\n\t\tconst displayedMembers = this.dashboardTable.table.getResolvedState().sortedData;\n\t\tconst len = displayedMembers.length;\n\t\tconst out = new Array( len );\n\t\tconst lessons = this.props.lessons;\n\t\tfor ( let i = 0; i < len; i++ ) {\n\t\t\tconst member = displayedMembers[ i ]._original;\n\t\t\tout[ i ] = {\n\t\t\t\tname: member.name,\n\t\t\t\tfirstName: member.firstName,\n\t\t\t\tlastName: member.lastName,\n\t\t\t\temail: member.email,\n\t\t\t\tcohort: member.cohort\n\t\t\t};\n\t\t\tconst availableCustomFields = this.props.user.availableCustomFields;\n\t\t\tfor ( let j = 0; j < availableCustomFields.length; j++ ) {\n\t\t\t\tconst fieldName = availableCustomFields[ j ].name;\n\t\t\t\tif ( member.customFields ) {\n\t\t\t\t\tout[ i ][ fieldName ] = member.customFields[ fieldName ];\n\t\t\t\t} else {\n\t\t\t\t\tout[ i ][ fieldName ] = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor ( let j = 0; j < lessons.length; j++ ) {\n\t\t\t\tconst lessonName = lessons[ j ]._id;\n\t\t\t\tlet data = member.lessonData;\n\t\t\t\tif ( data && data[ lessonName ] ) {\n\t\t\t\t\tdata = data[ lessonName ];\n\t\t\t\t\tout[ i ][ lessons[ j ].title+'_question_progress' ] = min( round( data.progress*100 ), 100 );\n\t\t\t\t\tout[ i ][ lessons[ j ].title+'_time' ] = round( data.spentTime / ( 1000*60 ) );\n\t\t\t\t\tout[ i ][ lessons[ j ].title+'_first_accessed' ] = new Date( data.createdAt ).toLocaleString();\n\t\t\t\t\tout[ i ][ lessons[ j ].title+'_last_accessed' ] = new Date( data.updatedAt ).toLocaleString();\n\t\t\t\t} else {\n\t\t\t\t\tout[ i ][ lessons[ j ].title+'_question_progress' ] = 0;\n\t\t\t\t\tout[ i ][ lessons[ j ].title+'_time' ] = 0;\n\t\t\t\t\tout[ i ][ lessons[ j ].title+'_first_accessed' ] = '';\n\t\t\t\t\tout[ i ][ lessons[ j ].title+'_last_accessed' ] = '';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn out;\n\t}\n\n\tsaveJSON = () => {\n\t\tconst data = this.assembleData();\n\t\tconst blob = new Blob([ JSON.stringify( data ) ], {\n\t\t\ttype: 'application/json'\n\t\t});\n\t\tconst name = `completion_${this.props.namespace.title}.json`;\n\t\tsaveAs( blob, name );\n\t};\n\n\tsaveCSV = () => {\n\t\tconst data = this.assembleData();\n\t\tstringify( data, {\n\t\t\theader: true\n\t\t}, ( err, output ) => {\n\t\t\tif ( err ) {\n\t\t\t\treturn this.props.addNotification({\n\t\t\t\t\ttitle: 'Error encountered',\n\t\t\t\t\tmessage: 'Encountered an error while creating CSV: '+err.message,\n\t\t\t\t\tlevel: 'error',\n\t\t\t\t\tposition: 'tl'\n\t\t\t\t});\n\t\t\t}\n\t\t\tconst blob = new Blob([ output ], {\n\t\t\t\ttype: 'text/plain'\n\t\t\t});\n\t\t\tconst name = `completion_${this.props.namespace.title}.csv`;\n\t\t\tsaveAs( blob, name );\n\t\t});\n\t};\n\n\ttoggleExplorer = () => {\n\t\tthis.setState({\n\t\t\tshowExplorer: !this.state.showExplorer\n\t\t});\n\t};\n\n\treorderColumns( lessonOrder, lessonSortDirection ) {\n\t\tdebug( 'Sort columns by '+lessonOrder+' in '+lessonSortDirection+' order' );\n\t\tif ( lessonSortDirection === 'ascending' ) {\n\t\t\treturn this.columns.slice().sort( ( a, b ) => {\n\t\t\t\tif ( !a._lesson || !b._lesson ) {\n\t\t\t\t\treturn 1;\n\t\t\t\t}\n\t\t\t\tif ( lessonOrder === 'title' ) {\n\t\t\t\t\treturn a._lesson.title.localeCompare( b._lesson.title );\n\t\t\t\t}\n\t\t\t\treturn a._lesson[ lessonOrder ] > b._lesson[ lessonOrder ] ? 1 : -1;\n\t\t\t});\n\t\t}\n\t\treturn this.columns.slice().sort( ( a, b ) => {\n\t\t\tif ( !a._lesson || !b._lesson ) {\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t\tif ( lessonOrder === 'title' ) {\n\t\t\t\treturn b._lesson.title.localeCompare( a._lesson.title );\n\t\t\t}\n\t\t\treturn a._lesson[ lessonOrder ] < b._lesson[ lessonOrder ] ? 1 : -1;\n\t\t});\n\t}\n\n\trenderSortButton() {\n\t\tconst { t } = this.props;\n\t\tlet title;\n\t\tswitch ( this.state.lessonOrder ) {\n\t\t\tcase 'title':\n\t\t\t\ttitle = t('common:sort-alphabetically');\n\t\t\t\tbreak;\n\t\t\tcase 'createdAt':\n\t\t\t\ttitle = t('common:sort-create-date');\n\t\t\t\tbreak;\n\t\t\tcase 'updatedAt':\n\t\t\t\ttitle = t('common:sort-update-date');\n\t\t\t\tbreak;\n\t\t}\n\t\treturn (\n\t\t\t<ButtonGroup className=\"sort-button-group\" >\n\t\t\t\t<DropdownButton size=\"sm\" variant=\"secondary\" onSelect={( newValue ) => {\n\t\t\t\t\tthis.columns = this.reorderColumns( newValue, this.state.lessonSortDirection );\n\t\t\t\t\tthis.setState({ lessonOrder: newValue });\n\t\t\t\t}} id=\"dropdown\" title={<small>{title}</small>} >\n\t\t\t\t\t<Dropdown.Item eventKey=\"title\" >\n\t\t\t\t\t\t<small>{t('common:sort-alphabetically')}</small>\n\t\t\t\t\t</Dropdown.Item>\n\t\t\t\t\t<Dropdown.Item eventKey=\"createdAt\" >\n\t\t\t\t\t\t<small>{t('common:sort-create-date')}</small>\n\t\t\t\t\t</Dropdown.Item>\n\t\t\t\t\t<Dropdown.Item eventKey=\"updatedAt\" >\n\t\t\t\t\t\t<small>{t('common:sort-update-date')}</small>\n\t\t\t\t\t</Dropdown.Item>\n\t\t\t\t</DropdownButton>\n\t\t\t\t<Button size=\"sm\" variant=\"secondary\" style={{ marginLeft: 2 }} onClick={() => {\n\t\t\t\t\tif ( this.state.lessonSortDirection === 'ascending' ) {\n\t\t\t\t\t\tthis.columns = this.reorderColumns( this.state.lessonOrder, 'descending' );\n\t\t\t\t\t\tthis.setState({ lessonSortDirection: 'descending' });\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.columns = this.reorderColumns( this.state.lessonOrder, 'ascending' );\n\t\t\t\t\t\tthis.setState({ lessonSortDirection: 'ascending' });\n\t\t\t\t\t}\n\t\t\t\t}} aria-label={this.state.lessonSortDirection === 'ascending' ?\n\t\t\t\tt('common:sort-descending') : t('common:sort-ascending')} >\n\t\t\t\t\t{ this.state.lessonSortDirection === 'ascending' ?\n\t\t\t\t\t\t<i className=\"fas fa-arrow-right\" /> :\n\t\t\t\t\t\t<i className=\"fas fa-arrow-left\" />\n\t\t\t\t\t}\n\t\t\t\t</Button>\n\t\t\t</ButtonGroup>\n\t\t);\n\t}\n\n\trender() {\n\t\tconst { t } = this.props;\n\t\tif ( this.state.showExplorer ) {\n\t\t\tlet data = this.assembleData();\n\t\t\tdata = obsToVar( data );\n\t\t\tconst quantitative = [];\n\t\t\tconst categorical = [ 'name', 'email', 'cohort' ];\n\t\t\tfor ( let i = 0; i < this.props.lessons.length; i++ ) {\n\t\t\t\tconst title = this.props.lessons[ i ].title;\n\t\t\t\tquantitative.push( `${title}_question_progress` );\n\t\t\t\tquantitative.push( `${title}_time` );\n\t\t\t\tcategorical.push( `${title}_first_accessed` );\n\t\t\t\tcategorical.push( `${title}_last_accessed` );\n\t\t\t}\n\t\t\tconst availableCustomFields = this.props.user.availableCustomFields;\n\t\t\tfor ( let i = 0; i < availableCustomFields.length; i++ ) {\n\t\t\t\tcategorical.push( availableCustomFields[ i ].name );\n\t\t\t}\n\t\t\treturn (\n\t\t\t\t<DashboardDataExplorer\n\t\t\t\t\ttitle={t('explorer-progress-title')}\n\t\t\t\t\tdata={data}\n\t\t\t\t\tcategorical={categorical}\n\t\t\t\t\tquantitative={quantitative}\n\t\t\t\t\tclose={this.toggleExplorer}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<div className=\"namespace-data-buttons\" >\n\t\t\t\t\t{this.renderSortButton()}\n\t\t\t\t\t<ButtonGroup className=\"progress-button-group\" >\n\t\t\t\t\t\t<OverlayTrigger placement=\"bottom\" overlay={<Tooltip id=\"csvTooltip\" >{t('save-as-csv')}</Tooltip>}>\n\t\t\t\t\t\t\t<Button size=\"sm\" variant=\"secondary\" onClick={this.saveCSV} ><i className=\"fas fa-download\"></i> CSV</Button>\n\t\t\t\t\t\t</OverlayTrigger>\n\t\t\t\t\t\t<OverlayTrigger placement=\"bottom\" overlay={<Tooltip id=\"jsonTooltip\">{t('save-as-json')}</Tooltip>}>\n\t\t\t\t\t\t\t<Button size=\"sm\" variant=\"secondary\" onClick={this.saveJSON} ><i className=\"fas fa-download\"></i> JSON</Button>\n\t\t\t\t\t\t</OverlayTrigger>\n\t\t\t\t\t</ButtonGroup>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"namespace-data-page\">\n\t\t\t\t\t<DashboardTable\n\t\t\t\t\t\tclassName=\"progress-table\"\n\t\t\t\t\t\tdata={this.state.displayedMembers}\n\t\t\t\t\t\tcolumns={this.columns}\n\t\t\t\t\t\tt={t}\n\t\t\t\t\t\tref={(r) => {\n\t\t\t\t\t\t\tthis.dashboardTable = r;\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonButtonClick={this.toggleExplorer}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</Fragment>\n\t\t);\n\t}\n}\n\n\n// PROPERTIES //\n\nProgressPage.propTypes = {\n\taddNotification: PropTypes.func.isRequired,\n\tadjustProgress: PropTypes.func.isRequired,\n\tcohorts: PropTypes.array.isRequired,\n\tlessons: PropTypes.array.isRequired,\n\tnamespace: PropTypes.object.isRequired,\n\tuser: PropTypes.object.isRequired\n};\n\nProgressPage.defaultProps = {\n};\n\n\n// EXPORTS //\n\nexport default withTranslation( [ 'namespace_data', 'common' ] )( ProgressPage );\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport ProgressBar from 'react-bootstrap/ProgressBar';\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\nimport Tooltip from 'react-bootstrap/Tooltip';\nimport Select from 'react-select';\nimport round from '@stdlib/math/base/special/round';\nimport min from '@stdlib/math/base/special/min';\nimport contains from '@stdlib/assert/contains';\nimport server from 'constants/server';\nimport formatTime from 'utils/format_time.js';\nimport './cohorts.css';\n\n\n// MAIN //\n\nclass CohortsPage extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tconst cohortOptions = props.cohorts.map( cohort => {\n\t\t\treturn { label: cohort.title, value: cohort.title, data: cohort };\n\t\t});\n\n\t\tlet displayedMembers = [];\n\t\tfor ( let i = 0; i < props.cohorts.length; i++ ) {\n\t\t\tdisplayedMembers = displayedMembers.concat( props.cohorts[i].members);\n\t\t}\n\n\t\tthis.state = {\n\t\t\tcohortOptions: cohortOptions,\n\t\t\tselectedCohorts: cohortOptions,\n\t\t\tdisplayedMembers: displayedMembers,\n\t\t\tactualMember: null\n\t\t};\n\t}\n\n\tcomponentDidUpdate( prevProps ) {\n\t\tif ( this.props.cohorts !== prevProps.cohorts ) {\n\t\t\tconst cohortOptions = this.props.cohorts.map( cohort => {\n\t\t\t\treturn { label: cohort.title, value: cohort.title, data: cohort };\n\t\t\t});\n\t\t\tlet displayedMembers = [];\n\t\t\tfor ( let i = 0; i < this.props.cohorts.length; i++ ) {\n\t\t\t\tdisplayedMembers = displayedMembers.concat( this.props.cohorts[i].members);\n\t\t\t}\n\t\t\tthis.setState({\n\t\t\t\tcohortOptions: cohortOptions,\n\t\t\t\tselectedCohorts: cohortOptions,\n\t\t\t\tdisplayedMembers: displayedMembers,\n\t\t\t\tactualMember: null\n\t\t\t});\n\t\t}\n\t}\n\n\thandleCohortChange = ( cohorts ) => {\n\t\tlet members = [];\n\t\tif ( cohorts ) {\n\t\t\tfor ( let i = 0; i < cohorts.length; i++ ) {\n\t\t\t\tmembers = members.concat( cohorts[ i ].data.members );\n\t\t\t}\n\t\t}\n\t\tthis.setState({\n\t\t\tselectedCohorts: cohorts,\n\t\t\tdisplayedMembers: members\n\t\t});\n\t};\n\n\tshowUser = (member) => {\n\t\tthis.setState({\n\t\t\tactualMember: member\n\t\t});\n\t};\n\n\trenderMember( member, key ) {\n\t\tlet phase = 0.3 + key*0.05;\n\t\tlet ani = 'scale-up ' + phase + 's';\n\t\treturn (\n\t\t\t<Fragment key={key}>\n\t\t\t\t<div className=\"cohort-member\" role=\"button\"\n\t\t\t\t\tonClick={() => this.showUser( member )}\n\t\t\t\t\tonKeyPress={() => this.showUser( member )}\n\t\t\t\t\tstyle={{ animation: ani }} tabIndex={0}\n\t\t\t\t>\n\t\t\t\t\t<div className=\"cohort-member-name\">{member.name}</div>\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tsrc={server + '/thumbnail/'+member.picture}\n\t\t\t\t\t\t\talt=\"Member Profile Pic\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div className=\"cohort-member-email\">\n\t\t\t\t\t\t\t<a href={'mailto:' + member.email}>{member.email}</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</Fragment>\n\t\t);\n\t}\n\n\trenderCohort() {\n\t\tconst members = this.state.displayedMembers;\n\t\tconst list = [];\n\t\tfor ( let i = 0; i < members.length; i++ ) {\n\t\t\tlist.push( this.renderMember( members[ i ], i ) );\n\t\t}\n\t\treturn list;\n\t}\n\n\trenderMemberLessons( member ) {\n\t\tconst lessons = this.props.lessons;\n\t\tconst list = [];\n\t\tlet progress = 0;\n\t\tlet spentTime = 0;\n\t\tlet totalTime = 0;\n\n\t\tfor ( let i = 0; i < lessons.length; i++ ) {\n\t\t\tlet id = lessons[i]._id;\n\t\t\tif ( member.lessonData && member.lessonData[ id ] ) {\n\t\t\t\tconst data = member.lessonData[ id ];\n\t\t\t\tprogress = min( round( data.progress * 100 ), 100 );\n\t\t\t\tspentTime = formatTime( data.spentTime );\n\t\t\t\ttotalTime += data.spentTime;\n\t\t\t} else {\n\t\t\t\tprogress = 0;\n\t\t\t\tspentTime = formatTime( 0 );\n\t\t\t}\n\t\t\tlist.push(\n\t\t\t\t<div key={i} >\n\t\t\t\t\t<div className=\"cohort-actual-member-lesson-title\">{lessons[i].title}</div>\n\t\t\t\t\t<ProgressBar aria-label=\"lesson-progress\" className=\"cohort-actual-member-lesson-progress\" style={{ float: 'left', fontSize: '10px', height: '12px'\n\t\t\t\t\t}} now={progress} label={`${progress}%`} />\n\t\t\t\t\t<span className=\"cohort-actual-member-lesson-time\">{spentTime}</span>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t\ttotalTime = formatTime( totalTime );\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<hr />\n\t\t\t\t<div className=\"cohort-actual-member-lesson-header\">COURSE INFO</div>\n\t\t\t\t<div className=\"cohort-actual-member-lesson-total\">COURSE TOTAL TIME: {totalTime}</div>\n\t\t\t\t<div className=\"lessons-area\">\n\t\t\t\t\t{list}\n\t\t\t\t</div>\n\t\t\t</Fragment>\n\t\t);\n\t}\n\n\tcloseActualMember = () => {\n\t\tthis.setState({\n\t\t\tactualMember: null\n\t\t});\n\t};\n\n\trenderMemberBadges(member) {\n\t\tconst badges = this.props.badges;\n\t\tconst time = formatTime( member.spentTime );\n\t\tconst list = [];\n\t\tfor ( let i = 0; i < badges.length; i++ ) {\n\t\t\tif ( contains(member.badges, badges[i].name ) ) {\n\t\t\t\tlist.push(\n\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t<OverlayTrigger\n\t\t\t\t\t\t\tplacement=\"bottom\"\n\t\t\t\t\t\t\toverlay={<Tooltip id=\"isleTime\">{badges[i].description}</Tooltip>}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div className=\"cohort-user-badge\" >\n\t\t\t\t\t\t\t\t<img src={server + '/badges/' + badges[i].picture} alt=\"User Badge\" />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</OverlayTrigger>\n\t\t\t\t\t</Fragment>\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\tconst isleTime = 'the time the user spent with ISLE';\n\t\tconst scoreComment = 'user score';\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<div>General User Info</div>\n\t\t\t\t<OverlayTrigger placement=\"bottom\" overlay={<Tooltip id=\"isleTime\">{ isleTime }</Tooltip>}>\n\t\t\t\t\t<span className=\"user-info-time\">ISLE TIME: {time}</span>\n\t\t\t\t</OverlayTrigger>\n\t\t\t\t<OverlayTrigger placement=\"bottom\" overlay={<Tooltip id=\"isleTime\">{ scoreComment }</Tooltip>}>\n\t\t\t\t\t<span className=\"user-info-score\">SCORE: {member.score}</span>\n\t\t\t\t</OverlayTrigger>\n\t\t\t\t<div></div>\n\t\t\t\t<div className=\"user-info-badges\">\n\t\t\t\t\t<div className=\"user-info-separator\">Badges</div>\n\t\t\t\t\t{list}\n\t\t\t\t</div>\n\t\t\t</Fragment>\n\t\t);\n\t}\n\n\trenderActualMember() {\n\t\tconst member = this.state.actualMember;\n\t\tlet date = null;\n\t\tif ( member.createdAt ) {\n\t\t\tdate = new Date( member.createdAt ).toLocaleDateString();\n\t\t}\n\t\treturn (\n\t\t\t<div className=\"cohort-actual-member\">\n\t\t\t\t<button onClick={this.closeActualMember} className=\"cohort-actual-member-exit empty-button\" >&#10005;</button>\n\t\t\t\t<img className=\"cohort-actual-member-portrait\" src={server + '/avatar/'+member.picture} alt=\"User Profile Pic\" />\n\t\t\t\t<div className=\"cohort-actual-member-portrait-shadow\" />\n\t\t\t\t{date ? <div className=\"cohort-actual-member-registered\">registered since {date}</div> : null}\n\t\t\t\t<div className=\"cohort-actual-member-name\">\n\t\t\t\t\t<h3>{member.name}</h3>\n\t\t\t\t\t<div>{member.email}</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"cohort-actual-member-info\">\n\t\t\t\t\t{ this.renderMemberLessons(member)}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"cohort-actual-member-badges\">\n\t\t\t\t\t{ this.renderMemberBadges(member) }\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"namespace-data-page\">\n\t\t\t\t<div style={{ width: '100%', height: '40px' }}>\n\t\t\t\t\t<Select\n\t\t\t\t\t\tvalue={this.state.selectedCohorts}\n\t\t\t\t\t\tisMulti\n\t\t\t\t\t\tname=\"cohorts\"\n\t\t\t\t\t\taria-label=\"Select cohorts\"\n\t\t\t\t\t\tplaceholder=\"Select cohorts to display\"\n\t\t\t\t\t\toptions={this.state.cohortOptions}\n\t\t\t\t\t\tonChange={this.handleCohortChange}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"cohort-page\">\n\t\t\t\t\t{this.renderCohort()}\n\t\t\t\t</div>\n\t\t\t\t{this.state.actualMember ? this.renderActualMember() : null}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\n\n// PROPERTIES //\n\nCohortsPage.propTypes = {\n\tbadges: PropTypes.array.isRequired,\n\tcohorts: PropTypes.array.isRequired,\n\tlessons: PropTypes.array.isRequired\n};\n\nCohortsPage.defaultProps = {\n};\n\n\n// EXPORTS //\n\nexport default CohortsPage;\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport logger from 'debug';\nimport stringify from 'csv-stringify';\nimport { withTranslation } from 'react-i18next';\nimport InputRange from 'react-input-range';\nimport Button from 'react-bootstrap/Button';\nimport ButtonGroup from 'react-bootstrap/ButtonGroup';\nimport DropdownButton from 'react-bootstrap/DropdownButton';\nimport Dropdown from 'react-bootstrap/Dropdown';\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\nimport Card from 'react-bootstrap/Card';\nimport Tooltip from 'react-bootstrap/Tooltip';\nimport isArray from '@stdlib/assert/is-array';\nimport isUndefinedOrNull from '@stdlib/assert/is-undefined-or-null';\nimport hasOwnProp from '@stdlib/assert/has-own-property';\nimport contains from '@stdlib/assert/contains';\nimport lowercase from '@stdlib/string/lowercase';\nimport trim from '@stdlib/string/trim';\nimport DashboardTable from 'components/dashboard-table';\nimport DashboardDataExplorer from 'ev/components/data-explorer';\nimport obsToVar from '@isle-project/utils/obs-to-var';\nimport server from 'constants/server';\nimport saveAs from 'utils/file_saver.js';\nimport createTextColumn from 'utils/create_text_column.js';\nimport './progress_page.css';\nimport 'css/input_range.css';\n\n\n// VARIABLES //\n\nconst debug = logger( 'isle:progress-page' );\n\n\n// FUNCTIONS //\n\nfunction filterNumbersFactory( lessons, idx ) {\n\treturn ( filter, row ) => {\n\t\tconst data = row[ filter.id ];\n\t\tconst grades = data[ lessons[ idx ]._id ];\n\t\tif ( isUndefinedOrNull( grades ) ) {\n\t\t\treturn filter.value.min === 0;\n\t\t}\n\t\tconst points = grades._sumPoints;\n\t\treturn points >= filter.value.min && points <= filter.value.max;\n\t};\n}\n\nfunction filterMethodCategories( filter, row ) {\n\tif ( filter.value === 'all' ) {\n\t\treturn true;\n\t}\n\tconst id = filter.pivotId || filter.id;\n\tif ( row[ id ] === void 0 ) {\n\t\treturn true;\n\t}\n\tif ( isArray( filter.value ) ) {\n\t\treturn contains( filter.value, String( row[ id ] ) );\n\t}\n\treturn String( row[ id ] ) === filter.value;\n}\n\nfunction sortFactory( lessons, idx ) {\n\treturn ( a, b ) => {\n\t\ta = a[ lessons[ idx ]._id ];\n\t\tb = b[ lessons[ idx ]._id ];\n\t\tif ( !a && !b ) {\n\t\t\treturn 0;\n\t\t}\n\t\tif ( a && !b ) {\n\t\t\treturn 1;\n\t\t}\n\t\tif ( !a && b ) {\n\t\t\treturn -1;\n\t\t}\n\t\tif ( a._sumPoints > b._sumPoints ) {\n\t\t\treturn 1;\n\t\t}\n\t\tif ( a._sumPoints < b._sumPoints ) {\n\t\t\treturn -1;\n\t\t}\n\t\treturn 0;\n\t};\n}\n\n\n// MAIN //\n\nclass GradesPage extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tthis.columns = this.createColumns( props.lessons, props.cohorts );\n\t\tthis.state = {\n\t\t\tdisplayedMembers: [],\n\t\t\tlessonSortDirection: 'ascending',\n\t\t\tlessonOrder: 'createdAt',\n\t\t\tshowExplorer: false\n\t\t};\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.createDisplayedMembers();\n\t}\n\n\tcomponentDidUpdate( prevProps ) {\n\t\tif (\n\t\t\tthis.props.cohorts !== prevProps.cohorts ||\n\t\t\tthis.props.lessons !== prevProps.lessons\n\t\t) {\n\t\t\tthis.createDisplayedMembers();\n\t\t\tthis.columns = this.createColumns( this.props.lessons, this.props.cohorts );\n\t\t}\n\t}\n\n\tcreateDisplayedMembers() {\n\t\tlet members = [];\n\t\tfor ( let i = 0; i < this.props.cohorts.length; i++ ) {\n\t\t\tconst cohortMembers = this.props.cohorts[ i ].members;\n\t\t\tfor ( let j = 0; j < cohortMembers.length; j++ ) {\n\t\t\t\tcohortMembers[ j ].cohort = this.props.cohorts[ i ].title;\n\t\t\t\tif ( !cohortMembers[ j ].lessonGrades ) {\n\t\t\t\t\tcohortMembers[ j ].lessonGrades = {};\n\t\t\t\t}\n\t\t\t}\n\t\t\tmembers = members.concat( this.props.cohorts[ i ].members );\n\t\t}\n\t\tfor ( let i = 0; i < members.length; i++ ) {\n\t\t\tconst d = members[ i ];\n\t\t\tconst parts = trim( d.name ).split( ' ' );\n\t\t\tif ( parts.length > 1 ) {\n\t\t\t\td.lastName = parts.pop();\n\t\t\t\td.firstName = parts.join( ' ' );\n\t\t\t} else {\n\t\t\t\td.firstName = parts[ 0 ];\n\t\t\t\td.lastName = '';\n\t\t\t}\n\t\t}\n\t\tthis.setState({ // eslint-disable-line react/no-did-mount-set-state\n\t\t\tdisplayedMembers: members\n\t\t});\n\t}\n\n\tcreateColumns( lessons, cohorts ) {\n\t\tconst { t } = this.props;\n\t\tconst COLUMNS = [\n\t\t\t{\n\t\t\t\tHeader: 'Pic',\n\t\t\t\taccessor: 'picture',\n\t\t\t\tCell: row => (\n\t\t\t\t\t<img className=\"table-pic\" src={`${server}/thumbnail/${row.original.picture}`} alt=\"Profile Pic\" />\n\t\t\t\t),\n\t\t\t\tmaxWidth: 46,\n\t\t\t\tminWidth: 46,\n\t\t\t\tfilterable: false,\n\t\t\t\tresizable: false,\n\t\t\t\tsortable: false,\n\t\t\t\tstyle: { color: 'darkslategrey' }\n\t\t\t},\n\t\t\tcreateTextColumn({\n\t\t\t\tHeader: t('first-name'),\n\t\t\t\tid: 'first_name',\n\t\t\t\taccessor: 'firstName',\n\t\t\t\tmaxWidth: 75,\n\t\t\t\tfilterMethod: ( filter, row ) => {\n\t\t\t\t\treturn contains( lowercase( row[ filter.id ] ), lowercase( filter.value ) );\n\t\t\t\t}\n\t\t\t}),\n\t\t\tcreateTextColumn({\n\t\t\t\tHeader: t('last-name'),\n\t\t\t\tid: 'last_name',\n\t\t\t\taccessor: 'lastName',\n\t\t\t\tmaxWidth: 75,\n\t\t\t\tfilterMethod: ( filter, row ) => {\n\t\t\t\t\treturn contains( lowercase( row[ filter.id ] ), lowercase( filter.value ) );\n\t\t\t\t}\n\t\t\t}),\n\t\t\tcreateTextColumn({\n\t\t\t\tHeader: t('common:email'),\n\t\t\t\taccessor: 'email',\n\t\t\t\tmaxWidth: 200,\n\t\t\t\tfilterMethod: ( filter, row ) => {\n\t\t\t\t\treturn contains( lowercase( row[ filter.id ] ), lowercase( filter.value ) );\n\t\t\t\t}\n\t\t\t}),\n\t\t\t{\n\t\t\t\tHeader: t('common:cohort'),\n\t\t\t\taccessor: 'cohort',\n\t\t\t\tstyle: { marginTop: '8px', color: 'darkslategrey' },\n\t\t\t\tfilterMethod: filterMethodCategories,\n\t\t\t\tFilter: ({ filter, onChange }) => {\n\t\t\t\t\tconst handleChange = ( event ) => {\n\t\t\t\t\t\tconst newValue = event.target.value;\n\t\t\t\t\t\tonChange( newValue );\n\t\t\t\t\t};\n\t\t\t\t\tlet value;\n\t\t\t\t\tif ( !filter ) {\n\t\t\t\t\t\tvalue = 'all';\n\t\t\t\t\t} else if ( isArray( filter.value ) ) {\n\t\t\t\t\t\tvalue = filter.value.join( ', ' );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvalue = filter.value;\n\t\t\t\t\t}\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<select\n\t\t\t\t\t\t\tonBlur={handleChange} onChange={handleChange}\n\t\t\t\t\t\t\tstyle={{ width: '100%', backgroundColor: 'ghostwhite' }}\n\t\t\t\t\t\t\tvalue={value}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<option value=\"all\">Show All</option>\n\t\t\t\t\t\t\t{cohorts.map( ( v, key ) => {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<option\n\t\t\t\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t\t\t\t\tvalue={`${v.title}`}\n\t\t\t\t\t\t\t\t\t>{v.title}</option>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</select>\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t];\n\t\tfor ( let i = 0; i < lessons.length; i++ ) {\n\t\t\tconst id = 'lesson_'+i;\n\t\t\tCOLUMNS.push({\n\t\t\t\tid,\n\t\t\t\tHeader: <span id={id} >{lessons[ i ].title}</span>,\n\t\t\t\t_lesson: lessons[ i ],\n\t\t\t\tCell: this.accessorFactory( lessons, i ),\n\t\t\t\tsortMethod: sortFactory( lessons, i ),\n\t\t\t\tfilterMethod: filterNumbersFactory( lessons, i ),\n\t\t\t\tFilter: ({ filter, onChange }) => {\n\t\t\t\t\tlet maxPoints = 0;\n\t\t\t\t\tif ( lessons[ i ].metadata && lessons[ i ].metadata.grades ) {\n\t\t\t\t\t\tmaxPoints = lessons[ i ].metadata.grades.maxPoints;\n\t\t\t\t\t}\n\t\t\t\t\tconst defaultVal = {\n\t\t\t\t\t\tmax: maxPoints,\n\t\t\t\t\t\tmin: 0\n\t\t\t\t\t};\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div style={{\n\t\t\t\t\t\t\tpaddingLeft: '4px',\n\t\t\t\t\t\t\tpaddingRight: '4px',\n\t\t\t\t\t\t\tpaddingTop: '8px'\n\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t<InputRange\n\t\t\t\t\t\t\t\tariaLabelledby={id}\n\t\t\t\t\t\t\t\tariaControls=\"dashboard-table\"\n\t\t\t\t\t\t\t\tallowSameValues\n\t\t\t\t\t\t\t\tmaxValue={maxPoints}\n\t\t\t\t\t\t\t\tminValue={0}\n\t\t\t\t\t\t\t\tvalue={filter ? filter.value : defaultVal}\n\t\t\t\t\t\t\t\tonChange={( newValue ) => {\n\t\t\t\t\t\t\t\t\tonChange( newValue );\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t},\n\t\t\t\taccessor: 'lessonGrades'\n\t\t\t});\n\t\t}\n\t\treturn COLUMNS;\n\t}\n\n\taccessorFactory = ( lessons, idx ) => {\n\t\treturn d => {\n\t\t\tlet data = d.original.lessonGrades || {};\n\t\t\tconst lesson = lessons[ idx ];\n\t\t\tconst lessonID = lesson._id;\n\t\t\tlet maxPoints = '';\n\t\t\tif ( lesson.metadata && lesson.metadata.grades ) {\n\t\t\t\tmaxPoints += ` / ${lessons[ idx ].metadata.grades.maxPoints}`;\n\t\t\t}\n\t\t\tdata = data[ lessonID ];\n\t\t\tif ( data ) {\n\t\t\t\tlet tally = [];\n\t\t\t\tfor ( let key in data ) {\n\t\t\t\t\tif ( hasOwnProp( data, key ) && key !== '_sumPoints' ) {\n\t\t\t\t\t\ttally.push( <p style={{ margin: 0 }} key={key}>{key}: <b style={{ float: 'right', marginLeft: 12 }}>{data[ key ]}</b></p> );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn ( <OverlayTrigger placement=\"top\" overlay={<Card className=\"tickets-description-overlay\" body id=\"description-tooltip\">\n\t\t\t\t\t{tally}\n\t\t\t\t</Card>}>\n\t\t\t\t\t<p>{data._sumPoints}{maxPoints}</p>\n\t\t\t\t</OverlayTrigger> );\n\t\t\t}\n\t\t\treturn <span></span>;\n\t\t};\n\t};\n\n\treorderColumns( lessonOrder, lessonSortDirection ) {\n\t\tdebug( 'Sort columns by '+lessonOrder+' in '+lessonSortDirection+' order' );\n\t\tif ( lessonSortDirection === 'ascending' ) {\n\t\t\treturn this.columns.slice().sort( ( a, b ) => {\n\t\t\t\tif ( !a._lesson || !b._lesson ) {\n\t\t\t\t\treturn 1;\n\t\t\t\t}\n\t\t\t\tif ( lessonOrder === 'title' ) {\n\t\t\t\t\treturn a._lesson.title.localeCompare( b._lesson.title );\n\t\t\t\t}\n\t\t\t\treturn a._lesson[ lessonOrder ] > b._lesson[ lessonOrder ] ? 1 : -1;\n\t\t\t});\n\t\t}\n\t\treturn this.columns.slice().sort( ( a, b ) => {\n\t\t\tif ( !a._lesson || !b._lesson ) {\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t\tif ( lessonOrder === 'title' ) {\n\t\t\t\treturn b._lesson.title.localeCompare( a._lesson.title );\n\t\t\t}\n\t\t\treturn a._lesson[ lessonOrder ] < b._lesson[ lessonOrder ] ? 1 : -1;\n\t\t});\n\t}\n\n\tassembleData() {\n\t\tconst displayedMembers = this.dashboardTable.table.getResolvedState().sortedData;\n\t\tconst len = displayedMembers.length;\n\t\tconst out = new Array( len );\n\t\tconst lessons = this.props.lessons;\n\t\tfor ( let i = 0; i < len; i++ ) {\n\t\t\tconst member = displayedMembers[ i ]._original;\n\t\t\tout[ i ] = {\n\t\t\t\tname: member.name,\n\t\t\t\tfirstName: member.firstName,\n\t\t\t\tlastName: member.lastName,\n\t\t\t\temail: member.email,\n\t\t\t\tcohort: member.cohort\n\t\t\t};\n\t\t\tconst availableCustomFields = this.props.user.availableCustomFields;\n\t\t\tfor ( let j = 0; j < availableCustomFields.length; j++ ) {\n\t\t\t\tconst fieldName = availableCustomFields[ j ].name;\n\t\t\t\tif ( member.customFields ) {\n\t\t\t\t\tout[ i ][ fieldName ] = member.customFields[ fieldName ];\n\t\t\t\t} else {\n\t\t\t\t\tout[ i ][ fieldName ] = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor ( let j = 0; j < lessons.length; j++ ) {\n\t\t\t\tconst lessonName = lessons[ j ]._id;\n\t\t\t\tlet data = member.lessonGrades;\n\t\t\t\tif ( data && data[ lessonName ] ) {\n\t\t\t\t\tdata = data[ lessonName ];\n\t\t\t\t\tout[ i ][ lessons[ j ].title ] = data._sumPoints;\n\t\t\t\t} else {\n\t\t\t\t\tout[ i ][ lessons[ j ].title ] = '';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn out;\n\t}\n\n\tsaveJSON = () => {\n\t\tconst data = this.assembleData();\n\t\tconst blob = new Blob([ JSON.stringify( data ) ], {\n\t\t\ttype: 'application/json'\n\t\t});\n\t\tconst name = `grades_${this.props.namespace.title}.json`;\n\t\tsaveAs( blob, name );\n\t};\n\n\tsaveCSV = () => {\n\t\tconst data = this.assembleData();\n\t\tstringify( data, {\n\t\t\theader: true\n\t\t}, ( err, output ) => {\n\t\t\tif ( err ) {\n\t\t\t\treturn this.props.addNotification({\n\t\t\t\t\ttitle: 'Error encountered',\n\t\t\t\t\tmessage: 'Encountered an error while creating CSV: '+err.message,\n\t\t\t\t\tlevel: 'error',\n\t\t\t\t\tposition: 'tl'\n\t\t\t\t});\n\t\t\t}\n\t\t\tconst blob = new Blob([ output ], {\n\t\t\t\ttype: 'text/plain'\n\t\t\t});\n\t\t\tconst name = `grades_${this.props.namespace.title}.csv`;\n\t\t\tsaveAs( blob, name );\n\t\t});\n\t};\n\n\ttoggleExplorer = () => {\n\t\tthis.setState({\n\t\t\tshowExplorer: !this.state.showExplorer\n\t\t});\n\t};\n\n\trenderSortButton() {\n\t\tconst { t } = this.props;\n\t\tlet title;\n\t\tswitch ( this.state.lessonOrder ) {\n\t\t\tcase 'title':\n\t\t\t\ttitle = t('common:sort-alphabetically');\n\t\t\t\tbreak;\n\t\t\tcase 'createdAt':\n\t\t\t\ttitle = t('common:sort-create-date');\n\t\t\t\tbreak;\n\t\t\tcase 'updatedAt':\n\t\t\t\ttitle = t('common:sort-update-date');\n\t\t\t\tbreak;\n\t\t}\n\t\treturn (\n\t\t\t<ButtonGroup className=\"sort-button-group\" >\n\t\t\t\t<DropdownButton size=\"sm\" variant=\"secondary\" onSelect={( newValue ) => {\n\t\t\t\t\tthis.columns = this.reorderColumns( newValue, this.state.lessonSortDirection );\n\t\t\t\t\tthis.setState({ lessonOrder: newValue });\n\t\t\t\t}} id=\"dropdown\" title={<small>{title}</small>} >\n\t\t\t\t\t<Dropdown.Item eventKey=\"title\" >\n\t\t\t\t\t\t<small>{t('common:sort-alphabetically')}</small>\n\t\t\t\t\t</Dropdown.Item>\n\t\t\t\t\t<Dropdown.Item eventKey=\"createdAt\" >\n\t\t\t\t\t\t<small>{t('common:sort-create-date')}</small>\n\t\t\t\t\t</Dropdown.Item>\n\t\t\t\t\t<Dropdown.Item eventKey=\"updatedAt\" >\n\t\t\t\t\t\t<small>{t('common:sort-update-date')}</small>\n\t\t\t\t\t</Dropdown.Item>\n\t\t\t\t</DropdownButton>\n\t\t\t\t<Button size=\"sm\" variant=\"secondary\" style={{ marginLeft: 2 }} onClick={() => {\n\t\t\t\t\tif ( this.state.lessonSortDirection === 'ascending' ) {\n\t\t\t\t\t\tthis.columns = this.reorderColumns( this.state.lessonOrder, 'descending' );\n\t\t\t\t\t\tthis.setState({ lessonSortDirection: 'descending' });\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.columns = this.reorderColumns( this.state.lessonOrder, 'ascending' );\n\t\t\t\t\t\tthis.setState({ lessonSortDirection: 'ascending' });\n\t\t\t\t\t}\n\t\t\t\t}} aria-label={this.state.lessonSortDirection === 'ascending' ?\n\t\t\t\tt('common:sort-descending') : t('common:sort-ascending')} >\n\t\t\t\t\t{ this.state.lessonSortDirection === 'ascending' ?\n\t\t\t\t\t\t<i className=\"fas fa-arrow-right\" /> :\n\t\t\t\t\t\t<i className=\"fas fa-arrow-left\" />\n\t\t\t\t\t}\n\t\t\t\t</Button>\n\t\t\t</ButtonGroup>\n\t\t);\n\t}\n\n\trender() {\n\t\tconst { t } = this.props;\n\t\tif ( this.state.showExplorer ) {\n\t\t\tlet data = this.assembleData();\n\t\t\tdata = obsToVar( data );\n\t\t\tconst quantitative = [];\n\t\t\tconst categorical = [ 'name', 'email', 'cohort' ];\n\t\t\tfor ( let i = 0; i < this.props.lessons.length; i++ ) {\n\t\t\t\tquantitative.push( this.props.lessons[ i ].title );\n\t\t\t}\n\t\t\tconst availableCustomFields = this.props.user.availableCustomFields;\n\t\t\tfor ( let i = 0; i < availableCustomFields.length; i++ ) {\n\t\t\t\tcategorical.push( availableCustomFields[ i ].name );\n\t\t\t}\n\t\t\treturn (\n\t\t\t\t<DashboardDataExplorer\n\t\t\t\t\ttitle={t('explorer-grades-title')}\n\t\t\t\t\tdata={data}\n\t\t\t\t\tcategorical={categorical}\n\t\t\t\t\tquantitative={quantitative}\n\t\t\t\t\tclose={this.toggleExplorer}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<div className=\"namespace-data-buttons\" >\n\t\t\t\t\t{this.renderSortButton()}\n\t\t\t\t\t<ButtonGroup className=\"progress-button-group\" >\n\t\t\t\t\t\t<OverlayTrigger placement=\"bottom\" overlay={<Tooltip id=\"csvTooltip\" >{t('save-as-csv')}</Tooltip>}>\n\t\t\t\t\t\t\t<Button size=\"sm\" variant=\"secondary\" onClick={this.saveCSV} ><i className=\"fas fa-download\"></i> CSV</Button>\n\t\t\t\t\t\t</OverlayTrigger>\n\t\t\t\t\t\t<OverlayTrigger placement=\"bottom\" overlay={<Tooltip id=\"jsonTooltip\">{t('save-as-json')}</Tooltip>}>\n\t\t\t\t\t\t\t<Button size=\"sm\" variant=\"secondary\" onClick={this.saveJSON} ><i className=\"fas fa-download\"></i> JSON</Button>\n\t\t\t\t\t\t</OverlayTrigger>\n\t\t\t\t\t</ButtonGroup>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"namespace-data-page\">\n\t\t\t\t\t<DashboardTable\n\t\t\t\t\t\tclassName=\"grades-table\"\n\t\t\t\t\t\tdata={this.state.displayedMembers}\n\t\t\t\t\t\tcolumns={this.columns}\n\t\t\t\t\t\tt={t}\n\t\t\t\t\t\tref={(r) => {\n\t\t\t\t\t\t\tthis.dashboardTable = r;\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonButtonClick={this.toggleExplorer}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</Fragment>\n\t\t);\n\t}\n}\n\n\n// PROPERTIES //\n\nGradesPage.propTypes = {\n\taddNotification: PropTypes.func.isRequired,\n\tcohorts: PropTypes.array.isRequired,\n\tlessons: PropTypes.array.isRequired,\n\tnamespace: PropTypes.object.isRequired,\n\tuser: PropTypes.object.isRequired\n};\n\nGradesPage.defaultProps = {\n};\n\n\n// EXPORTS //\n\nexport default withTranslation( [ 'namespace_data', 'common' ] )( GradesPage );\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport Button from 'react-bootstrap/Button';\nimport ToggleButtonGroup from 'react-bootstrap/ToggleButtonGroup';\nimport ToggleButton from 'react-bootstrap/ToggleButton';\nimport logger from 'debug';\nimport Select from 'react-select';\nimport './actions_page.css';\n\n\n// VARIABLES //\n\nconst debug = logger( 'isle-dashboard:namespace-data:actions-page' );\n\n\n// MAIN //\n\nclass ActionsPage extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tconst cohortOptions = props.cohorts.map( cohort => {\n\t\t\treturn { label: cohort.title, value: cohort };\n\t\t});\n\n\t\tlet displayedMembers = [];\n\t\tfor ( let i = 0; i < props.cohorts.length; i++ ) {\n\t\t\tdisplayedMembers = displayedMembers.concat( props.cohorts[i].members);\n\t\t}\n\n\t\tthis.state = {\n\t\t\tcohortOptions: cohortOptions,\n\t\t\tselectedCohorts: cohortOptions,\n\t\t\tdisplayedMembers: displayedMembers,\n\t\t\tlessonActionsPage: false,\n\t\t\tactualLesson: null,\n\t\t\tanonymized: true\n\t\t};\n\t}\n\n\tretrieveActions = () => {\n\t\tthis.props.getNamespaceActions({\n\t\t\tnamespaceID: this.props.namespace._id,\n\t\t\tnamespaceTitle: this.props.namespace.title\n\t\t});\n\t};\n\n\thandleRadioChange = ( val ) => {\n\t\tthis.setState({\n\t\t\tanonymized: !this.state.anonymized\n\t\t});\n\t};\n\n\thandleCohortChange = ( cohorts ) => {\n\t\tlet members = [];\n\t\tfor ( let i = 0; i < cohorts.length; i++ ) {\n\t\t\tmembers = members.concat( cohorts[ i ].value.members );\n\t\t}\n\t\tthis.setState({\n\t\t\tselectedCohorts: cohorts,\n\t\t\tdisplayedMembers: members\n\t\t}, () => {\n\t\t\tdebug( 'New number of displayed members: '+this.state.displayedMembers.length );\n\t\t});\n\t};\n\n\trenderCohorts() {\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<div className=\"actions-page-cohorts\">\n\t\t\t\t\t<div style={{ width: '400px', height: '40px' }}>\n\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\tvalue={this.state.selectedCohorts}\n\t\t\t\t\t\t\tisMulti\n\t\t\t\t\t\t\tname=\"cohorts\"\n\t\t\t\t\t\t\toptions={this.state.cohortOptions}\n\t\t\t\t\t\t\tonChange={this.handleCohortChange}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</Fragment>\n\t\t);\n\t}\n\n\trenderLessonActionsPage() {\n\t\treturn (\n\t\t\t<div className=\"actions-page-lesson-action-page\">\n\t\t\t\t<div className=\"lesson-action-page-resize\">\t&#x1f5d6;</div>\n\t\t\t\t<button onClick={this.hideLessonActions} className=\"lesson-action-page-exit empty-button\">&#10005;</button>\n\t\t\t\t<div className=\"lesson-action-page-title\">{ this.state.actualLesson.title}</div>\n\t\t\t\t<div className=\"lesson-action-page-filter\">\n\t\t\t\t\t{this.renderCohorts() }\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\n\thideLessonActions = () => {\n\t\tthis.setState({\n\t\t\tlessonActionsPage: false\n\t\t});\n\t};\n\n\tshowLessonActions = (lesson) => {\n\t\tthis.setState({\n\t\t\tlessonActionsPage: true,\n\t\t\tactualLesson: lesson\n\t\t});\n\t};\n\n\trenderLessons() {\n\t\tconst lessons = this.props.namespace.lessons;\n\t\tconst list = [];\n\t\tfor ( let i = 0; i < lessons.length; i++ ) {\n\t\t\tlist.push(\n\t\t\t\t<button key={i} onClick={()=> this.showLessonActions( lessons[i] )} className=\"actions-page-lesson\">\n\t\t\t\t\t<div className=\"actions-page-lesson-title\">{lessons[i].title}</div>\n\t\t\t\t</button>\n\t\t\t);\n\t\t}\n\t\treturn (\n\t\t\t<div className=\"actions-page\">\n\t\t\t\t<div className=\"actions-page-export\">\n\t\t\t\t{ this.renderExportSection() }\n\t\t\t\t</div>\n\t\t\t\t<div className=\"actions-page-lessons\">\n\t\t\t\t\t{ list }\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\trenderExportSection() {\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<div className=\"actions-page-export-title\">Export Actions</div>\n\t\t\t\t<ToggleButtonGroup\n\t\t\t\t\tname=\"options\"\n\t\t\t\t\tonChange={this.handleRadioChange}\n\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\tsize=\"small\"\n\t\t\t\t\tvalue={this.state.anonymized}\n\t\t\t\t>\n\t\t\t\t\t<ToggleButton\n\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\tvariant=\"light\"\n\t\t\t\t\t\tvalue={false}\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tfontSize: '12px',\n\t\t\t\t\t\t\tcolor: this.state.anonymized ? '#A9A9A9' : 'black'\n\t\t\t\t\t\t}}\n\t\t\t\t\t>Original</ToggleButton>\n\t\t\t\t\t<ToggleButton\n\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\tvariant=\"light\"\n\t\t\t\t\t\tvalue={true}\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tfontSize: '12px',\n\t\t\t\t\t\t\tcolor: this.state.anonymized ? 'black' : '#A9A9A9'\n\t\t\t\t\t\t}}\n\t\t\t\t\t>Anonymized</ToggleButton>\n\t\t\t\t</ToggleButtonGroup>\n\t\t\t\t<Button onClick={this.retrieveActions}>\n\t\t\t\t\tSave all namespace actions\n\t\t\t\t</Button>\n\t\t\t</Fragment>\n\t\t);\n\t}\n\n\trender() {\n\t\treturn ( <div className=\"namespace-data-page\">\n\t\t\t{ this.renderLessons() }\n\t\t\t{ this.state.lessonActionsPage ? this.renderLessonActionsPage() : null }\n\t\t</div> );\n\t}\n}\n\n\n// PROPERTIES //\n\nActionsPage.propTypes = {\n\tcohorts: PropTypes.array.isRequired,\n\tgetNamespaceActions: PropTypes.func.isRequired,\n\tnamespace: PropTypes.object.isRequired\n};\n\nActionsPage.defaultProps = {\n};\n\n\n// EXPORTS //\n\nexport default ActionsPage;\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport logger from 'debug';\nimport { withTranslation } from 'react-i18next';\nimport moment from 'moment';\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\nimport PINF from '@stdlib/constants/float64/pinf';\nimport omit from '@stdlib/utils/omit';\nimport Popover from 'react-bootstrap/Popover';\nimport Tooltip from 'react-bootstrap/Tooltip';\nimport Button from 'react-bootstrap/Button';\nimport Card from 'react-bootstrap/Card';\nimport Badge from 'react-bootstrap/Badge';\nimport DashboardDataExplorer from 'ev/components/data-explorer';\nimport obsToVar from '@isle-project/utils/obs-to-var';\nimport DashboardTable from 'components/dashboard-table';\nimport createCategoricalColumn from 'utils/create_categorical_column.js';\nimport createBooleanColumn from 'utils/create_boolean_column.js';\nimport createTextColumn from 'utils/create_text_column.js';\nimport createDateColumn from 'utils/create_date_column.js';\nimport TicketModal from 'components/ticket-modal';\nimport server from 'constants/server';\nimport 'css/input_range.css';\nimport './tickets_page.css';\n\n\n// VARIABLES //\n\nconst debug = logger( 'isle:files-page' );\nconst RE_TICKET = /ticket=([^&]*)/;\n\n\n// MAIN //\n\nclass TicketsPage extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tthis.state = {\n\t\t\tshowTicketModal: false,\n\t\t\tselectedTicket: null,\n\t\t\tshowExplorer: false\n\t\t};\n\t\tthis.columns = this.createColumns();\n\t}\n\n\tasync componentDidMount() {\n\t\tdebug( 'Component did mount...' );\n\t\tawait this.props.getCourseTickets( this.props.namespace._id );\n\n\t\tif ( this.props.history.location.search ) {\n\t\t\tconst match = RE_TICKET.exec( this.props.history.location.search );\n\t\t\tif ( match && match[ 1 ] ) {\n\t\t\t\tconst tickets = this.props.tickets;\n\t\t\t\tfor ( let i = 0; i < tickets.length; i++ ) {\n\t\t\t\t\tconst ticket = tickets[ i ];\n\t\t\t\t\tif ( ticket._id === match[ 1 ] ) {\n\t\t\t\t\t\t// eslint-disable-next-line react/no-did-mount-set-state\n\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\tselectedTicket: ticket,\n\t\t\t\t\t\t\tshowTicketModal: true\n\t\t\t\t\t\t});\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\ttoggleTicketModal = () => {\n\t\tthis.setState({\n\t\t\tshowTicketModal: !this.state.showTicketModal\n\t\t});\n\t};\n\n\tcreateColumns = () => {\n\t\tconst { t } = this.props;\n\t\tconst tickets = this.props.tickets || [];\n\t\tlet minTime = PINF;\n\t\tlet maxTime = 0;\n\t\tfor ( let i = 0; i < tickets.length; i++ ) {\n\t\t\tif ( tickets[ i ].createdAt > maxTime ) {\n\t\t\t\tmaxTime = tickets[ i ].createdAt;\n\t\t\t}\n\t\t\tif ( tickets[ i ].updatedAt > maxTime ) {\n\t\t\t\tmaxTime = tickets[ i ].updatedAt;\n\t\t\t}\n\t\t\tif ( tickets[ i ].createdAt < minTime ) {\n\t\t\t\tminTime = tickets[ i ].createdAt;\n\t\t\t}\n\t\t\tif ( tickets[ i ].updatedAt < minTime ) {\n\t\t\t\tminTime = tickets[ i ].updatedAt;\n\t\t\t}\n\t\t}\n\t\tmaxTime = moment( maxTime );\n\t\tminTime = moment( minTime );\n\t\treturn [\n\t\t\t{\n\t\t\t\tHeader: 'Pic',\n\t\t\t\taccessor: 'user.picture',\n\t\t\t\tCell: ( row ) => {\n\t\t\t\t\treturn <img className=\"table-pic\" src={`${server}/thumbnail/${row.value}`} alt=\"Profile Pic\" />;\n\t\t\t\t},\n\t\t\t\tstyle: { marginTop: '8px', color: 'darkslategrey' },\n\t\t\t\tmaxWidth: 46,\n\t\t\t\tminWidth: 46,\n\t\t\t\tfilterable: false,\n\t\t\t\tresizable: false,\n\t\t\t\tsortable: false\n\t\t\t},\n\t\t\tcreateTextColumn({\n\t\t\t\tHeader: t('common:name'),\n\t\t\t\taccessor: 'user.name',\n\t\t\t\tstyle: { marginTop: '8px', color: 'darkslategrey' }\n\t\t\t}),\n\t\t\tcreateTextColumn({\n\t\t\t\tHeader: t('common:email'),\n\t\t\t\taccessor: 'user.email',\n\t\t\t\tstyle: { marginTop: '8px', color: 'darkslategrey' }\n\t\t\t}),\n\t\t\tcreateTextColumn({\n\t\t\t\tHeader: t('common:title'),\n\t\t\t\taccessor: 'title',\n\t\t\t\tminWidth: 200\n\t\t\t}),\n\t\t\t{\n\t\t\t\tHeader: t('common:description'),\n\t\t\t\taccessor: 'description',\n\t\t\t\tCell: ( row ) => {\n\t\t\t\t\treturn ( <OverlayTrigger placement=\"top\" overlay={<Card className=\"tickets-description-overlay\" body id=\"description-tooltip\">\n\t\t\t\t\t\t{row.value}\n\t\t\t\t\t</Card>}>\n\t\t\t\t\t\t<p className=\"tickets-description\" >{row.value}</p>\n\t\t\t\t\t</OverlayTrigger> );\n\t\t\t\t},\n\t\t\t\tstyle: { marginTop: '8px', color: 'darkslategrey' },\n\t\t\t\tminWidth: 300\n\t\t\t},\n\t\t\tcreateTextColumn({\n\t\t\t\tHeader: t('common:component'),\n\t\t\t\taccessor: 'component'\n\t\t\t}),\n\t\t\t{\n\t\t\t\tHeader: 'Reply',\n\t\t\t\taccessor: '_id',\n\t\t\t\tCell: ( row ) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<OverlayTrigger placement=\"left\" overlay={<Tooltip id=\"open-ticket-tooltip\">{t('common:open-ticket-tooltip')}</Tooltip>}>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tsize=\"sm\" variant=\"outline-secondary\"\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\t\t\tselectedTicket: row.original\n\t\t\t\t\t\t\t\t\t}, this.toggleTicketModal );\n\t\t\t\t\t\t\t\t}} >\n\t\t\t\t\t\t\t\t<i className=\"fas fa-reply\"></i>\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</OverlayTrigger>\n\t\t\t\t\t);\n\t\t\t\t},\n\t\t\t\tresizable: false,\n\t\t\t\tfilterable: false,\n\t\t\t\tsortable: false,\n\t\t\t\twidth: 45\n\t\t\t},\n\t\t\tcreateCategoricalColumn({\n\t\t\t\tHeader: t('common:priority'),\n\t\t\t\taccessor: 'priority',\n\t\t\t\tlabels: [ 'Low', 'Middle', 'High' ],\n\t\t\t\tmaxWidth: 200,\n\t\t\t\tCell: ( row ) => {\n\t\t\t\t\tif ( !row.value ) {\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\t\t\t\t\tlet variant;\n\t\t\t\t\tlet higher;\n\t\t\t\t\tlet lower;\n\t\t\t\t\tswitch ( row.value ) {\n\t\t\t\t\t\tcase 'Low':\n\t\t\t\t\t\t\tvariant = 'secondary';\n\t\t\t\t\t\t\thigher = 'Middle';\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'Middle':\n\t\t\t\t\t\t\tvariant = 'warning';\n\t\t\t\t\t\t\thigher = 'High';\n\t\t\t\t\t\t\tlower = 'Low';\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'High':\n\t\t\t\t\t\t\tvariant = 'danger';\n\t\t\t\t\t\t\tlower = 'Middle';\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\treturn ( <div>\n\t\t\t\t\t\t<Badge variant={variant} style={{ marginRight: 6, fontSize: '1em' }} >\n\t\t\t\t\t\t\t{row.value}\n\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tsize=\"sm\" variant=\"outline-secondary\"\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tthis.props.updatePriority( row.original._id, higher );\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tdisabled={!higher}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<i className=\"fas fa-arrow-up\"></i>\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tsize=\"sm\" variant=\"outline-secondary\"\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tthis.props.updatePriority( row.original._id, lower );\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tdisabled={!lower}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<i className=\"fas fa-arrow-down\"></i>\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div> );\n\t\t\t\t}\n\t\t\t}),\n\t\t\tcreateTextColumn({\n\t\t\t\tHeader: t('common:lesson'),\n\t\t\t\taccessor: 'lesson.title',\n\t\t\t\tmaxWidth: 140,\n\t\t\t\tCell: ( row ) => {\n\t\t\t\t\tif ( !row.value ) {\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\t\t\t\t\tconst url = `${server}/${this.props.namespace.title}/${row.value}`;\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<OverlayTrigger placement=\"right\" overlay={<Tooltip id=\"open-lesson-tooltip\">{t('namespace_data:open-lesson-new-tab')}</Tooltip>}>\n\t\t\t\t\t\t\t<Badge variant=\"light\" style={{ fontSize: '1em' }} >\n\t\t\t\t\t\t\t\t<a href={url} target=\"_blank\" rel=\"noopener noreferrer\" >\n\t\t\t\t\t\t\t\t\t{row.value}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t</OverlayTrigger>\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}),\n\t\t\tcreateBooleanColumn({\n\t\t\t\tHeader: t('common:done'),\n\t\t\t\taccessor: 'done',\n\t\t\t\ttrueLabel: t('common:done'),\n\t\t\t\tfalseLabel: t('common:not-done')\n\t\t\t}),\n\t\t\t{\n\t\t\t\tHeader: t( 'common:platform' ),\n\t\t\t\taccessor: 'platform',\n\t\t\t\tstyle: { marginTop: '2px', color: 'darkslategrey', fontSize: 24, textAlign: 'center', cursor: 'pointer' },\n\t\t\t\tCell: ( row ) => {\n\t\t\t\t\tif ( row.value ) {\n\t\t\t\t\t\tconst popover = <Popover\n\t\t\t\t\t\t\tid=\"popover-data\"\n\t\t\t\t\t\t\tstyle={{ maxWidth: 500, maxHeight: '80vh', overflowY: 'auto' }}\n\t\t\t\t\t\t\tarrowProps={{ display: 'none' }}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Popover.Title as=\"h3\">{row.row._original.title}</Popover.Title>\n\t\t\t\t\t\t\t<Popover.Content style={{ backgroundColor: 'lightblue' }} >\n\t\t\t\t\t\t\t\t<pre>\n\t\t\t\t\t\t\t\t\t{JSON.stringify( omit( row.value, [ 'description' ] ), null, 2 )}\n\t\t\t\t\t\t\t\t</pre>\n\t\t\t\t\t\t\t</Popover.Content>\n\t\t\t\t\t\t</Popover>;\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<OverlayTrigger trigger=\"click\" placement=\"left\" overlay={popover}>\n\t\t\t\t\t\t\t\t<i className=\"data-icon fas fa-tablet-alt\"></i>\n\t\t\t\t\t\t\t</OverlayTrigger>\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\treturn null;\n\t\t\t\t},\n\t\t\t\tmaxWidth: 75,\n\t\t\t\tresizable: false,\n\t\t\t\tfilterable: false,\n\t\t\t\tsortable: false\n\t\t\t},\n\t\t\tcreateDateColumn({\n\t\t\t\tHeader: t('created-at'),\n\t\t\t\taccessor: 'createdAt',\n\t\t\t\tstartDate: minTime,\n\t\t\t\tendDate: maxTime,\n\t\t\t\tt\n\t\t\t})\n\t\t];\n\t};\n\n\ttoggleExplorer = () => {\n\t\tthis.setState({\n\t\t\tshowExplorer: !this.state.showExplorer\n\t\t});\n\t};\n\n\tassembleExplorerData = () => {\n\t\tlet tickets = this.props.tickets;\n\t\tlet data = [];\n\t\tfor ( let i = 0; i < tickets.length; i++ ) {\n\t\t\tconst ticket = tickets[ i ];\n\t\t\tconst replacement = {};\n\t\t\treplacement.component = ticket.component;\n\t\t\treplacement.title = ticket.title;\n\t\t\treplacement.description = ticket.description;\n\t\t\treplacement.lesson = ticket.lesson ? ticket.lesson.title : null;\n\t\t\treplacement.messages = ticket.messages.length;\n\t\t\treplacement.attachments = ticket.attachments.length;\n\t\t\treplacement.user = ticket.user.email;\n\t\t\treplacement.done = ticket.done;\n\t\t\treplacement.priority = ticket.priority;\n\t\t\treplacement.browser = `${ticket.platform.name} ${ticket.platform.version}`;\n\t\t\tconst os = ticket.platform.os;\n\t\t\treplacement.os = `${os.family} ${os.version ? os.version : ''} ${os.architecture}bit`;\n\t\t\treplacement.createdAt = ticket.createdAt;\n\t\t\treplacement.updatedAt = ticket.updatedAt;\n\t\t\tdata.push( replacement );\n\t\t}\n\t\tdata = obsToVar( data );\n\t\treturn data;\n\t};\n\n\trender() {\n\t\tconst { t } = this.props;\n\t\tif ( this.state.showExplorer ) {\n\t\t\treturn (\n\t\t\t\t<DashboardDataExplorer\n\t\t\t\t\ttitle={t('explorer-tickets-title')}\n\t\t\t\t\tdata={this.assembleExplorerData()}\n\t\t\t\t\tcategorical={[ 'component', 'lesson', 'done', 'createdAt', 'updatedAt', 'priority', 'browser', 'os' ]}\n\t\t\t\t\tquantitative={[ 'messages', 'attachments' ]}\n\t\t\t\t\tclose={this.toggleExplorer}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t\treturn ( <div className=\"namespace-data-page\">\n\t\t\t<DashboardTable\n\t\t\t\tdata={this.props.tickets}\n\t\t\t\tcolumns={this.columns}\n\t\t\t\tt={t}\n\t\t\t\tonButtonClick={this.toggleExplorer}\n\t\t\t/>\n\t\t\t{ this.state.showTicketModal ? <TicketModal\n\t\t\t\tshow={this.state.showTicketModal}\n\t\t\t\tonHide={this.toggleTicketModal}\n\t\t\t\tticket={this.state.selectedTicket}\n\t\t\t\tsubmitTicketMessage={this.props.submitTicketMessage}\n\t\t\t\topenTicket={this.props.openTicket}\n\t\t\t\tcloseTicket={this.props.closeTicket}\n\t\t\t/> : null }\n\t\t</div> );\n\t}\n}\n\n\n// PROPERTIES //\n\nTicketsPage.propTypes = {\n\tcloseTicket: PropTypes.func.isRequired,\n\tgetCourseTickets: PropTypes.func.isRequired,\n\tnamespace: PropTypes.object.isRequired,\n\topenTicket: PropTypes.func.isRequired,\n\tsubmitTicketMessage: PropTypes.func.isRequired,\n\ttickets: PropTypes.array,\n\tupdatePriority: PropTypes.func.isRequired\n};\n\nTicketsPage.defaultProps = {\n\ttickets: []\n};\n\n\n// EXPORTS //\n\nexport default withTranslation( [ 'namespace_data', 'common' ] )( TicketsPage );\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport logger from 'debug';\nimport { withTranslation } from 'react-i18next';\nimport Alert from 'react-bootstrap/Alert';\nimport Nav from 'react-bootstrap/Nav';\nimport FilesPage from './files_page.js';\nimport AnnouncementsPage from './announcements_page.js';\nimport ProgressPage from './progress_page.js';\nimport CohortsPage from './cohorts_page.js';\nimport GradesPage from './grades_page.js';\nimport ActionsPage from './actions_page.js';\nimport TicketsPage from './tickets_page.js';\nimport './namespace_data.css';\n\n\n// VARIABLES //\n\nconst debug = logger( 'isle-dashboard:namespace-data' );\n\n\n// MAIN //\n\nclass NamespaceData extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tconst subpage = props.match.params.subpage;\n\t\tlet activePage;\n\t\tswitch ( subpage ) {\n\t\t\tdefault:\n\t\t\tcase 'announcements':\n\t\t\t\tactivePage = 1;\n\t\t\t\tbreak;\n\t\t\tcase 'progress':\n\t\t\t\tactivePage = 2;\n\t\t\t\tbreak;\n\t\t\tcase 'grades':\n\t\t\t\tactivePage = 3;\n\t\t\t\tbreak;\n\t\t\tcase 'cohorts':\n\t\t\t\tactivePage = 4;\n\t\t\t\tbreak;\n\t\t\tcase 'owner-files':\n\t\t\t\tactivePage = 5;\n\t\t\t\tbreak;\n\t\t\tcase 'student-files':\n\t\t\t\tactivePage = 6;\n\t\t\t\tbreak;\n\t\t\tcase 'tickets':\n\t\t\t\tactivePage = 7;\n\t\t\t\tbreak;\n\t\t\tcase 'actions':\n\t\t\t\tactivePage = 8;\n\t\t\t\tbreak;\n\t\t}\n\t\tthis.state = {\n\t\t\tactivePage\n\t\t};\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.props.getBadges();\n\t}\n\n\thandleUpload = ( event ) => {\n\t\tdebug( 'Uploading file...' );\n\t\tconst file = event.target.files[ 0 ];\n\t\tconst formData = new FormData();\n\t\tformData.append( 'file', file, file.name );\n\t\tformData.append( 'namespaceName', this.props.namespace.title );\n\t\tformData.append( 'owner', 'true' );\n\t\tthis.props.uploadFile({\n\t\t\tformData: formData,\n\t\t\tuser: this.props.user\n\t\t});\n\t};\n\n\thandleAnnouncementDeletion = (createdAt, index) => {\n\t\tthis.props.deleteAnnouncement( {\n\t\t\tnamespaceName: this.props.namespace.title,\n\t\t\tindex,\n\t\t\tcreatedAt\n\t\t});\n\t};\n\n\thandleAnnouncementEdit = ( announcement ) => {\n\t\tthis.props.editAnnouncement({\n\t\t\tnamespaceName: this.props.namespace.title,\n\t\t\tannouncement\n\t\t});\n\t};\n\n\thandleAnnouncementCreation = ( announcement ) => {\n\t\tthis.props.addAnnouncement({\n\t\t\tnamespaceName: this.props.namespace.title,\n\t\t\tannouncement\n\t\t});\n\t};\n\n\thandleFileDeletion = ( _id, ownerFiles ) => {\n\t\tthis.props.deleteFile( _id, this.props.namespace.title, ownerFiles );\n\t};\n\n\tsubmitTicketMessage = ({ message, ticketID }) => {\n\t\tthis.props.sendTicketMessage({ message, ticketID, user: this.props.user });\n\t};\n\n\thandleSelect = ( selectedKey ) => {\n\t\tselectedKey = Number( selectedKey );\n\t\tconst title = this.props.namespace.title;\n\t\tswitch ( selectedKey ) {\n\t\t\tcase 1:\n\t\t\t\tthis.props.history.replace( `/namespace-data/${title}/announcements` );\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\tthis.props.history.replace( `/namespace-data/${title}/progress` );\n\t\t\t\tbreak;\n\t\t\tcase 3:\n\t\t\t\tthis.props.history.replace( `/namespace-data/${title}/grades` );\n\t\t\t\tbreak;\n\t\t\tcase 4:\n\t\t\t\tthis.props.history.replace( `/namespace-data/${title}/cohorts` );\n\t\t\t\tbreak;\n\t\t\tcase 5:\n\t\t\t\tthis.props.history.replace( `/namespace-data/${title}/owner-files` );\n\t\t\t\tbreak;\n\t\t\tcase 6:\n\t\t\t\tthis.props.history.replace( `/namespace-data/${title}/student-files` );\n\t\t\t\tbreak;\n\t\t\tcase 7:\n\t\t\t\tthis.props.history.replace( `/namespace-data/${title}/tickets` );\n\t\t\t\tbreak;\n\t\t\tcase 8:\n\t\t\t\tthis.props.history.replace( `/namespace-data/${title}/actions` );\n\t\t\t\tbreak;\n\t\t}\n\t\tthis.setState({\n\t\t\tactivePage: selectedKey\n\t\t});\n\t};\n\n\trenderPage() {\n\t\tswitch ( this.state.activePage ) {\n\t\t\tcase 1:\n\t\t\t\treturn <AnnouncementsPage namespace={this.props.namespace} editAnnouncement={this.handleAnnouncementEdit} deleteAnnouncement={this.handleAnnouncementDeletion} addAnnouncement={this.handleAnnouncementCreation} user={this.props.user} />;\n\t\t\tcase 2:\n\t\t\t\treturn <ProgressPage adjustProgress={this.props.adjustProgress} addNotification={this.props.addNotification} namespace={this.props.namespace} cohorts={this.props.namespace.cohorts} lessons={this.props.namespace.lessons} user={this.props.user} />;\n\t\t\tcase 3:\n\t\t\t\treturn <GradesPage addNotification={this.props.addNotification} namespace={this.props.namespace} cohorts={this.props.namespace.cohorts} lessons={this.props.namespace.lessons} user={this.props.user} />;\n\t\t\tcase 4:\n\t\t\t\treturn <CohortsPage badges={this.props.badges} cohorts={this.props.namespace.cohorts} lessons={this.props.namespace.lessons} />;\n\t\t\tcase 5:\n\t\t\t\treturn <FilesPage ownerFiles files={this.props.namespace.ownerFiles} namespace={this.props.namespace} handleUpload={this.handleUpload} handleFileDeletion={this.handleFileDeletion} addNotification={this.props.addNotification} getFiles={this.props.getOwnerFiles} />;\n\t\t\tcase 6:\n\t\t\t\treturn <FilesPage files={this.props.namespace.files} namespace={this.props.namespace} handleUpload={this.handleUpload} handleFileDeletion={this.handleFileDeletion} addNotification={this.props.addNotification} getFiles={this.props.getFiles} />;\n\t\t\tcase 7:\n\t\t\t\treturn <TicketsPage tickets={this.props.namespace.tickets} namespace={this.props.namespace} getCourseTickets={this.props.getCourseTickets} submitTicketMessage={this.submitTicketMessage} openTicket={this.props.openTicket} closeTicket={this.props.closeTicket} updatePriority={this.props.updatePriority} history={this.props.history} />;\n\t\t\tcase 8:\n\t\t\t\treturn <ActionsPage namespace={this.props.namespace} getNamespaceActions={this.props.getNamespaceActions} user={this.props.user} cohorts={this.props.namespace.cohorts} />;\n\t\t}\n\t}\n\n\trender() {\n\t\tconst { t } = this.props;\n\t\tif ( !this.props.namespace._id ) {\n\t\t\treturn ( <div className=\"namespace-data-div\">\n\t\t\t\t<Alert variant=\"danger\">{t('common:no-course-selected')}</Alert>\n\t\t\t</div> );\n\t\t}\n\t\tconst page = this.renderPage();\n\t\treturn (\n\t\t\t<div className=\"namespace-data-div\">\n\t\t\t\t<div className=\"namespace-data-navbar\">\n\t\t\t\t\t<Nav variant=\"pills\" className=\"namespace-data-navbar-pills\" activeKey={this.state.activePage} onSelect={this.handleSelect}>\n\t\t\t\t\t\t<Nav.Item>\n\t\t\t\t\t\t\t<Nav.Link eventKey=\"1\" title=\"Announcements\" >{t('common:announcements')}</Nav.Link>\n\t\t\t\t\t\t</Nav.Item>\n\t\t\t\t\t\t<Nav.Item>\n\t\t\t\t\t\t\t<Nav.Link eventKey=\"2\" title=\"Progress\" >{t('common:progress')}</Nav.Link>\n\t\t\t\t\t\t</Nav.Item>\n\t\t\t\t\t\t<Nav.Item>\n\t\t\t\t\t\t\t<Nav.Link eventKey=\"3\" title=\"Grades\" >{t('grades')}</Nav.Link>\n\t\t\t\t\t\t</Nav.Item>\n\t\t\t\t\t\t<Nav.Item>\n\t\t\t\t\t\t\t<Nav.Link eventKey=\"4\" title=\"Cohorts\" >{t('common:cohorts')}</Nav.Link>\n\t\t\t\t\t\t</Nav.Item>\n\t\t\t\t\t\t<Nav.Item>\n\t\t\t\t\t\t\t<Nav.Link eventKey=\"5\" title=\"Owner Files\" >{t('owner-files')}</Nav.Link>\n\t\t\t\t\t\t</Nav.Item>\n\t\t\t\t\t\t<Nav.Item>\n\t\t\t\t\t\t\t<Nav.Link eventKey=\"6\" title=\"Student Files\" >{t('student-files')}</Nav.Link>\n\t\t\t\t\t\t</Nav.Item>\n\t\t\t\t\t\t<Nav.Item>\n\t\t\t\t\t\t\t<Nav.Link eventKey=\"7\" title=\"Tickets\" disabled={!this.props.namespace.enableTicketing} >{t('common:tickets')}</Nav.Link>\n\t\t\t\t\t\t</Nav.Item>\n\t\t\t\t\t\t<Nav.Item>\n\t\t\t\t\t\t\t<Nav.Link eventKey=\"8\" title=\"Actions\" disabled >{t('common:actions')}</Nav.Link>\n\t\t\t\t\t\t</Nav.Item>\n\t\t\t\t\t</Nav>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"namespace-data-page-container\" style={{ overflowY: 'auto' }}>\n\t\t\t\t\t{page}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\n\n// PROPERTIES //\n\nNamespaceData.propTypes = {\n\taddAnnouncement: PropTypes.func.isRequired,\n\taddNotification: PropTypes.func.isRequired,\n\tadjustProgress: PropTypes.func.isRequired,\n\tbadges: PropTypes.array,\n\tcloseTicket: PropTypes.func.isRequired,\n\tdeleteAnnouncement: PropTypes.func.isRequired,\n\tdeleteFile: PropTypes.func.isRequired,\n\teditAnnouncement: PropTypes.func.isRequired,\n\tgetBadges: PropTypes.func.isRequired,\n\tgetCourseTickets: PropTypes.func.isRequired,\n\tgetFiles: PropTypes.func.isRequired,\n\tgetNamespaceActions: PropTypes.func.isRequired,\n\tgetOwnerFiles: PropTypes.func.isRequired,\n\tmatch: PropTypes.object.isRequired,\n\tnamespace: PropTypes.object.isRequired,\n\topenTicket: PropTypes.func.isRequired,\n\tsendTicketMessage: PropTypes.func.isRequired,\n\tupdatePriority: PropTypes.func.isRequired,\n\tuploadFile: PropTypes.func.isRequired,\n\tuser: PropTypes.object.isRequired\n};\n\nNamespaceData.defaultProps = {\n\tbadges: null\n};\n\n\n// EXPORTS //\n\nexport default withTranslation( [ 'namespace_data', 'common' ] )( NamespaceData );\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport server from 'constants/server';\nimport { CREATED_ANNOUNCEMENT, EDITED_ANNOUNCEMENT, DELETED_ANNOUNCEMENT } from 'constants/action_types.js';\nimport { addNotification, addErrorNotification } from 'actions/notification';\nimport { namespaceAxios } from 'helpers/axios.js';\n\n\n// EXPORTS //\n\n/**\n * Returns an action object to be used in signalling that an announcement has been edited.\n *\n * @param {Object} announcement\n * @param {string} namespaceName\n * @returns {Object} an action object\n */\nexport function editedAnnouncement( announcement, namespaceName ) {\n\treturn {\n\t\ttype: EDITED_ANNOUNCEMENT,\n\t\tpayload: {\n\t\t\tannouncement,\n\t\t\tnamespaceName\n\t\t}\n\t};\n}\n\n/**\n * Returns an action object to be used in signalling that an announcement has been created.\n *\n * @param {Object} announcement\n * @param {string} namespaceName\n * @returns {Object} an action object\n */\nexport function createdAnnouncement( announcement, namespaceName ) {\n\treturn {\n\t\ttype: CREATED_ANNOUNCEMENT,\n\t\tpayload: {\n\t\t\tannouncement,\n\t\t\tnamespaceName\n\t\t}\n\t};\n}\n\n/**\n * Returns an action object to be used in signalling that an announcement has been deleted.\n *\n * @param {number} index - index of the announcement\n * @param {string} namespaceName\n * @returns {Object} an action object\n */\nexport function deletedAnnouncement( index, namespaceName ) {\n\treturn {\n\t\ttype: DELETED_ANNOUNCEMENT,\n\t\tpayload: {\n\t\t\tindex,\n\t\t\tnamespaceName\n\t\t}\n\t};\n}\n\n/**\n * Makes a request to create an announcement.\n *\n * @param {Function} dispatch - dispatch function\n * @param {Object} opts - request options\n * @param {string} opts.namespaceName - namespace name\n * @param {Object} opts.announcement - announcement object\n */\nexport const addAnnouncement = async ( dispatch, { namespaceName, announcement }) => {\n\ttry {\n\t\tconst res = await namespaceAxios.post( server+'/new_announcement', {\n\t\t\tnamespaceName,\n\t\t\tannouncement\n\t\t});\n\t\taddNotification( dispatch, {\n\t\t\tmessage: res.data.message,\n\t\t\tlevel: 'success'\n\t\t});\n\t\tdispatch( createdAnnouncement( announcement, namespaceName ) );\n\t} catch ( err ) {\n\t\taddErrorNotification( dispatch, err );\n\t}\n};\n\n/**\n * Returns a function for making an request to create an announcement with a bound dispatch function\n *\n * @param {Function} dispatch - dispatch function\n * @returns {Function} wrapped `addAnnouncement` function\n */\nexport const addAnnouncementInjector = dispatch => {\n\treturn async ( { namespaceName, announcement } ) => {\n\t\tawait addAnnouncement( dispatch, { namespaceName, announcement } );\n\t};\n};\n\n/**\n * Makes a request to delete an announcement.\n *\n * @param {Function} dispatch - dispatch function\n * @param {Object} opts - request options\n * @param {string} opts.namespaceName - namespace name\n * @param {number} opts.index - index of the announcement\n * @param {string} opts.createdAt - creation time of the announcement\n */\nexport const deleteAnnouncement = async ( dispatch, { namespaceName, createdAt, index }) => {\n\ttry {\n\t\tconst res = await namespaceAxios.post( server+'/delete_announcement', {\n\t\t\tnamespaceName,\n\t\t\tcreatedAt\n\t\t});\n\t\taddNotification( dispatch, {\n\t\t\tmessage: res.data.message,\n\t\t\tlevel: 'success'\n\t\t});\n\t\tdispatch( deletedAnnouncement( index, namespaceName ) );\n\t} catch ( err ) {\n\t\taddErrorNotification( dispatch, err );\n\t}\n};\n\n/**\n * Returns a function for making an request to delete an announcement with a bound dispatch function.\n *\n * @param {Function} dispatch - dispatch function\n * @returns {Function} wrapped `deleteAnnouncement` function\n */\nexport const deleteAnnouncementInjector = dispatch => {\n\treturn async ( { namespaceName, createdAt, index } ) => {\n\t\tawait deleteAnnouncement( dispatch, { namespaceName, createdAt, index } );\n\t};\n};\n\n/**\n * Makes a request to edit an announcement.\n *\n * @param {Function} dispatch - dispatch function\n * @param {Object} opts - request options\n * @param {string} opts.namespaceName - namespace name\n * @param {Object} opts.announcement - announcement object\n */\nexport const editAnnouncement = async ( dispatch, { namespaceName, announcement }) => {\n\ttry {\n\t\tconst res = await namespaceAxios.post( server+'/edit_announcement', {\n\t\t\tnamespaceName,\n\t\t\tannouncement\n\t\t});\n\t\taddNotification( dispatch, {\n\t\t\tmessage: res.data.message,\n\t\t\tlevel: 'success'\n\t\t});\n\t\tdispatch( editedAnnouncement( announcement, namespaceName ) );\n\t} catch ( err ) {\n\t\taddErrorNotification( dispatch, err );\n\t}\n};\n\n/**\n * Returns a function for making an request to edit an announcement with a bound dispatch function.\n *\n* @param {Function} dispatch - dispatch function\n* @returns {Function} wrapped `editAnnouncement` function\n*/\nexport const editAnnouncementInjector = dispatch => {\n\treturn async ( { namespaceName, announcement } ) => {\n\t\tawait editAnnouncement( dispatch, { namespaceName, announcement } );\n\t};\n};\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router';\nimport NamespaceData from 'components/namespace-data';\nimport { addAnnouncementInjector, deleteAnnouncementInjector, editAnnouncementInjector } from 'actions/announcement';\nimport { getAvailableBadgesInjector } from 'actions/badge';\nimport { deleteFileInjector, getFilesInjector, getOwnerFilesInjector, uploadFileInjector } from 'actions/file';\nimport { addNotificationInjector } from 'actions/notification';\nimport { getNamespaceActionsInjector, adjustProgressInjector } from 'actions/namespace';\nimport { getCourseTicketsInjector, sendTicketMessageInjector,\n\tcloseTicketInjector, openTicketInjector, updatePriorityInjector } from 'actions/ticket';\n\n\n// FUNCTIONS //\n\nfunction mapStateToProps( state ) {\n\treturn {\n\t\tbadges: state.badges,\n\t\tuser: state.user,\n\t\tnamespace: state.namespace\n\t};\n}\n\nfunction mapDispatchToProps( dispatch ) {\n\treturn {\n\t\tadjustProgress: adjustProgressInjector( dispatch ),\n\t\tgetBadges: getAvailableBadgesInjector( dispatch ),\n\t\tgetCourseTickets: getCourseTicketsInjector( dispatch ),\n\t\tgetFiles: getFilesInjector( dispatch ),\n\t\tgetOwnerFiles: getOwnerFilesInjector( dispatch ),\n\t\tgetNamespaceActions: getNamespaceActionsInjector( dispatch ),\n\t\taddNotification: addNotificationInjector( dispatch ),\n\t\tdeleteFile: deleteFileInjector( dispatch ),\n\t\tdeleteAnnouncement: deleteAnnouncementInjector( dispatch ),\n\t\teditAnnouncement: editAnnouncementInjector( dispatch ),\n\t\taddAnnouncement: addAnnouncementInjector( dispatch ),\n\t\tsendTicketMessage: sendTicketMessageInjector( dispatch ),\n\t\tcloseTicket: closeTicketInjector( dispatch ),\n\t\topenTicket: openTicketInjector( dispatch ),\n\t\tuploadFile: uploadFileInjector( dispatch ),\n\t\tupdatePriority: updatePriorityInjector( dispatch )\n\t};\n}\n\n\n// MAIN //\n\nconst VisibleNamespaceData = connect( mapStateToProps, mapDispatchToProps )( NamespaceData );\n\n\n// EXPORTS //\n\nexport default withRouter( VisibleNamespaceData );\n","// MODULES //\n\nimport asyncComponent from 'components/async';\n\n\n// MAIN //\n\nconst DashboardDataExplorer = asyncComponent( () => import( './main.js' ) );\n\n\n// EXPORTS //\n\nexport default DashboardDataExplorer;\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React from 'react';\n\n\n// MAIN //\n\nfunction createBooleanColumn({ Header, accessor, trueLabel, falseLabel, printLabels = false, maxWidth = 150 }) {\n\tlet Cell;\n\tlet style;\n\tif ( printLabels ) {\n\t\tCell = ( row ) => {\n\t\t\tif ( row.value === true ) {\n\t\t\t\treturn trueLabel;\n\t\t\t} else if ( row.value === false ) {\n\t\t\t\treturn falseLabel;\n\t\t\t}\n\t\t\treturn null;\n\t\t};\n\t\tstyle = { marginTop: '8px', color: 'darkslategrey' };\n\t} else {\n\t\tCell = ( row ) => {\n\t\t\tif ( row.value ) {\n\t\t\t\treturn <i className=\"far fa-check-square\"></i>;\n\t\t\t}\n\t\t\treturn null;\n\t\t};\n\t\tstyle = { marginTop: '2px', color: 'darkslategrey', fontSize: 24, textAlign: 'center' };\n\t}\n\treturn {\n\t\tHeader,\n\t\taccessor,\n\t\tstyle,\n\t\tCell: Cell,\n\t\tfilterMethod: ( filter, row ) => {\n\t\t\tif ( filter.value === 'all' ) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tconst id = filter.pivotId || filter.id;\n\t\t\tif ( row[ id ] === void 0 ) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn String( row[ id ] ) === filter.value;\n\t\t},\n\t\tFilter: ({ filter, onChange }) => {\n\t\t\tconst handleChange = ( event ) => {\n\t\t\t\tconst newValue = event.target.value;\n\t\t\t\tonChange( newValue );\n\t\t\t};\n\t\t\tlet value;\n\t\t\tif ( !filter ) {\n\t\t\t\tvalue = 'all';\n\t\t\t} else {\n\t\t\t\tvalue = filter.value;\n\t\t\t}\n\t\t\treturn (\n\t\t\t\t<select\n\t\t\t\t\tonBlur={handleChange} onChange={handleChange}\n\t\t\t\t\tstyle={{ width: '100%', backgroundColor: 'ghostwhite' }}\n\t\t\t\t\tvalue={value}\n\t\t\t\t>\n\t\t\t\t\t<option value=\"all\">Show All</option>\n\t\t\t\t\t<option value={true} >{trueLabel}</option>\n\t\t\t\t\t<option value={false} >{falseLabel}</option>\n\t\t\t\t</select>\n\t\t\t);\n\t\t},\n\t\tmaxWidth: maxWidth\n\t};\n}\n\n\n// EXPORTS //\n\nexport default createBooleanColumn;\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React from 'react';\n\n\n// MAIN //\n\nfunction createCategoricalColumn({ Header, Cell, accessor, labels, maxWidth = 150 }) {\n\tlet style;\n\treturn {\n\t\tHeader,\n\t\taccessor,\n\t\tstyle,\n\t\tCell,\n\t\tfilterMethod: ( filter, row ) => {\n\t\t\tif ( filter.value === 'all' ) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tconst id = filter.pivotId || filter.id;\n\t\t\tif ( row[ id ] === void 0 ) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn String( row[ id ] ) === filter.value;\n\t\t},\n\t\tFilter: ({ filter, onChange }) => {\n\t\t\tconst handleChange = ( event ) => {\n\t\t\t\tconst newValue = event.target.value;\n\t\t\t\tonChange( newValue );\n\t\t\t};\n\t\t\tlet value;\n\t\t\tif ( !filter ) {\n\t\t\t\tvalue = 'all';\n\t\t\t} else {\n\t\t\t\tvalue = filter.value;\n\t\t\t}\n\t\t\treturn (\n\t\t\t\t<select\n\t\t\t\t\tonBlur={handleChange} onChange={handleChange}\n\t\t\t\t\tstyle={{ width: '100%', backgroundColor: 'ghostwhite' }}\n\t\t\t\t\tvalue={value}\n\t\t\t\t>\n\t\t\t\t\t<option value=\"all\">Show All</option>\n\t\t\t\t\t{labels.map( ( x, idx ) => <option value={x} key={idx} >{x}</option> )}\n\t\t\t\t</select>\n\t\t\t);\n\t\t},\n\t\tmaxWidth: maxWidth\n\t};\n}\n\n\n// EXPORTS //\n\nexport default createCategoricalColumn;\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React, { Component, Fragment } from 'react';\nimport { DateRangePicker } from 'react-dates';\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\nimport Popover from 'react-bootstrap/Popover';\nimport Button from 'react-bootstrap/Button';\nimport 'react-dates/lib/css/_datepicker.css';\n\n\n// FUNCTIONS //\n\nclass CustomDatePicker extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\t\tthis.state = {\n\t\t\tstartDate: props.startDate,\n\t\t\tendDate: props.endDate\n\t\t};\n\t}\n\n\tcomponentDidUpdate( prevProps ) {\n\t\tif (\n\t\t\tthis.props.startDate !== prevProps.startDate ||\n\t\t\tthis.props.endDate !== prevProps.endDate\n\t\t) {\n\t\t\tthis.setState({\n\t\t\t\tstartDate: this.props.startDate,\n\t\t\t\tendDate: this.props.endDate\n\t\t\t});\n\t\t}\n\t}\n\n\thandleDatesChange = ({ startDate, endDate }) => {\n\t\tthis.setState({\n\t\t\tstartDate,\n\t\t\tendDate\n\t\t}, () => {\n\t\t\tthis.props.onDatesChange( this.state );\n\t\t});\n\t};\n\n\thandleReset = () => {\n\t\tthis.setState({\n\t\t\tstartDate: this.props.minDate,\n\t\t\tendDate: this.props.maxDate\n\t\t}, () => {\n\t\t\tthis.props.onDatesChange( this.state );\n\t\t});\n\t};\n\n\trender() {\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<DateRangePicker\n\t\t\t\t\tstartDate={this.state.startDate}\n\t\t\t\t\tendDate={this.state.endDate}\n\t\t\t\t\tstartDateId=\"start_date_input\"\n\t\t\t\t\tendDateId=\"end_date_input\"\n\t\t\t\t\tonDatesChange={this.handleDatesChange}\n\t\t\t\t\tfocusedInput={this.state.focusedInput}\n\t\t\t\t\tonFocusChange={focusedInput => this.setState({ focusedInput })}\n\t\t\t\t\tisOutsideRange={() => false}\n\t\t\t\t/>\n\t\t\t\t<Button\n\t\t\t\t\taria-label={this.props.t('common:close')}\n\t\t\t\t\tvariant=\"warning\"\n\t\t\t\t\tonClick={this.handleReset}\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tpaddingTop: 8,\n\t\t\t\t\t\tpaddingLeft: 16,\n\t\t\t\t\t\tpaddingRight: 16,\n\t\t\t\t\t\tpaddingBottom: 8,\n\t\t\t\t\t\tfontSize: 20\n\t\t\t\t\t}}\n\t\t\t\t>x</Button>\n\t\t\t</Fragment>\n\t\t);\n\t}\n}\n\nconst DefaultCell = ( row ) => {\n\treturn new Date( row.value ).toLocaleString();\n};\n\n\n// MAIN //\n\nfunction createBooleanColumn({ Header, accessor, Cell, style, startDate, endDate, t, maxWidth = 150 }) {\n\treturn {\n\t\tHeader,\n\t\taccessor,\n\t\tstyle,\n\t\tCell: Cell || DefaultCell,\n\t\tfilterMethod: ( filter, row ) => {\n\t\t\tif ( !filter.value ) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tconst { startDate, endDate } = filter.value;\n\t\t\tconst id = filter.pivotId || filter.id;\n\t\t\tconst value = row[ id ].getTime();\n\t\t\tif ( startDate && endDate ) {\n\t\t\t\treturn value >= startDate.valueOf() && value <= endDate.valueOf();\n\t\t\t}\n\t\t\tif ( startDate ) {\n\t\t\t\treturn value >= startDate.valueOf();\n\t\t\t}\n\t\t\tif ( endDate ) {\n\t\t\t\treturn value <= endDate.valueOf();\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\t\tFilter: ({ filter, onChange }) => {\n\t\t\tconst filterValue = filter ? ( filter.value || {} ) : {};\n\t\t\tconst popover = <Popover id=\"popover-data\" style={{ maxWidth: 400 }}>\n\t\t\t\t<Popover.Title as=\"h3\">{t('common:dates')}</Popover.Title>\n\t\t\t\t<Popover.Content style={{ backgroundColor: 'grey' }} >\n\t\t\t\t\t<CustomDatePicker\n\t\t\t\t\t\tstartDate={filterValue.startDate || startDate}\n\t\t\t\t\t\tminDate={startDate}\n\t\t\t\t\t\tmaxDate={endDate}\n\t\t\t\t\t\tendDate={filterValue.endDate || endDate}\n\t\t\t\t\t\tonDatesChange={({ startDate, endDate }) => {\n\t\t\t\t\t\t\tonChange({ startDate, endDate });\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tt={t}\n\t\t\t\t\t/>\n\t\t\t\t</Popover.Content>\n\t\t\t</Popover>;\n\t\t\treturn (\n\t\t\t\t<OverlayTrigger trigger=\"click\" placement=\"right\" overlay={popover}>\n\t\t\t\t\t<Button aria-label={t('common:toggle-calendar')} size=\"sm\" style={{ float: 'left', marginLeft: 6 }} variant=\"secondary\" >\n\t\t\t\t\t\t<i className=\"far fa-calendar-alt\"></i>\n\t\t\t\t\t</Button>\n\t\t\t\t</OverlayTrigger>\n\t\t\t);\n\t\t},\n\t\tmaxWidth: maxWidth\n\t};\n}\n\n\n// EXPORTS //\n\nexport default createBooleanColumn;\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React from 'react';\nimport InputRange from 'react-input-range';\nimport replace from '@stdlib/string/replace';\nimport lowercase from '@stdlib/string/lowercase';\nimport roundn from '@stdlib/math/base/special/roundn';\nimport 'css/input_range.css';\n\n\n// FUNCTIONS //\n\nconst defaultFilterMethod = ( filter, row ) => {\n\tconst id = filter.pivotId || filter.id;\n\tconst val = row[ id ];\n\treturn val >= filter.value.min && val <= filter.value.max;\n};\n\nconst defaultFormatLabel = ( value ) => roundn( value, -2 );\n\n\n// MAIN //\n\nfunction createNumericColumn({ Header, accessor, Cell, minValue = 0, maxValue = 1, maxWidth = 150, filterMethod, formatLabel }) {\n\tconst id = `header-${lowercase( replace( Header, ' ', '-' ) )}`;\n\treturn {\n\t\tHeader: <span id={id} >{Header}</span>,\n\t\taccessor,\n\t\tCell: Cell ? Cell : ( row ) => row.value ? `${roundn( row.value, -3 )}` : 'NA',\n\t\tfilterMethod: filterMethod || defaultFilterMethod,\n\t\tFilter: ({ filter, onChange }) => {\n\t\t\tif ( minValue === maxValue ) {\n\t\t\t\tmaxValue = minValue += 1;\n\t\t\t}\n\t\t\tconst defaultVal = {\n\t\t\t\tmax: maxValue,\n\t\t\t\tmin: minValue\n\t\t\t};\n\t\t\treturn (\n\t\t\t\t<div style={{\n\t\t\t\t\tpaddingLeft: '4px',\n\t\t\t\t\tpaddingRight: '4px',\n\t\t\t\t\tpaddingTop: '8px'\n\t\t\t\t}}>\n\t\t\t\t\t<InputRange\n\t\t\t\t\t\tariaLabelledby={id}\n\t\t\t\t\t\tariaControls=\"dashboard-table\"\n\t\t\t\t\t\tallowSameValues\n\t\t\t\t\t\tmaxValue={maxValue}\n\t\t\t\t\t\tminValue={minValue}\n\t\t\t\t\t\tstep={0.1}\n\t\t\t\t\t\tvalue={filter ? filter.value : defaultVal}\n\t\t\t\t\t\tonChange={( newValue ) => {\n\t\t\t\t\t\t\tonChange( newValue );\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tformatLabel={formatLabel || defaultFormatLabel}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t);\n\t\t},\n\t\tmaxWidth: maxWidth\n\t};\n}\n\n\n// EXPORTS //\n\nexport default createNumericColumn;\n","/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport React from 'react';\nimport FormControl from 'react-bootstrap/FormControl';\nimport textFilter from './text_filter.js';\n\n\n// MAIN //\n\nfunction createTextColumn({ id, Header, Cell, accessor, maxWidth = 150, minWidth, filterMethod }) {\n\tif ( minWidth > maxWidth ) {\n\t\tmaxWidth = minWidth;\n\t}\n\tconst spec = {\n\t\tid,\n\t\tHeader,\n\t\taccessor,\n\t\tCell,\n\t\tfilterMethod: filterMethod ? filterMethod : textFilter,\n\t\tFilter: ({ filter, onChange }) => {\n\t\t\treturn (\n\t\t\t\t<FormControl\n\t\t\t\t\taria-label={Header}\n\t\t\t\t\tautoComplete=\"none\"\n\t\t\t\t\tonChange={( event ) => {\n\t\t\t\t\t\tonChange( event.target.value );\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t};\n\tif ( maxWidth ) {\n\t\tspec.maxWidth = maxWidth;\n\t}\n\tif ( minWidth ) {\n\t\tspec.minWidth = minWidth;\n\t}\n\treturn spec;\n}\n\n\n// EXPORTS //\n\nexport default createTextColumn;\n","/*\n* Adapted from:\n*\n* FileSaver.js\n* A saveAs() FileSaver implementation.\n* 1.3.8\n* 2018-03-22 14:03:47\n*\n* By Eli Grey, https://eligrey.com\n* License: MIT\n*   See https://github.com/eligrey/FileSaver.js/blob/master/LICENSE.md\n*\n* @source http://purl.eligrey.com/github/FileSaver.js/blob/master/src/FileSaver.js\n*/\n\n// VARIABLES //\n\nconst RE_AUTO_BOM = /^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i;\nconst ARBITRARY_REVOKE_TIMEOUT = 1000 * 40; // Time in ms\n\n\n// FUNCTIONS //\n\nfunction click(node) {\n\tconst event = new MouseEvent( 'click' );\n\tnode.dispatchEvent( event );\n}\n\nfunction throwOutside( ex ) {\n\tsetImmediate(function throwEx() {\n\t\tthrow ex;\n\t}, 0 );\n}\n\nfunction autoBOM( blob ) {\n\t// Prepend BOM for UTF-8 XML and text/* types (including HTML). Note: your browser will automatically convert UTF-16 U+FEFF to EF BB BF\n\tif ( RE_AUTO_BOM.test( blob.type ) ) {\n\t\treturn new Blob([ String.fromCharCode( 0xFEFF ), blob ], {\n\t\t\ttype: blob.type\n\t\t});\n\t}\n\treturn blob;\n}\n\nfunction dispatch( filesaver, eventTypes, event ) {\n\teventTypes = [].concat( eventTypes );\n\tlet i = eventTypes.length;\n\twhile ( i-- ) {\n\t\tlet listener = filesaver[ 'on' + eventTypes[i] ];\n\t\tif ( typeof listener === 'function' ) {\n\t\t\ttry {\n\t\t\t\tlistener.call( filesaver, event || filesaver );\n\t\t\t} catch ( ex ) {\n\t\t\t\tthrowOutside( ex );\n\t\t\t}\n\t\t}\n\t}\n}\n\n\n// MAIN //\n\nfunction saveFactory( view ) {\n\tif (\n\t\ttypeof view === 'undefined' ||\n\t\ttypeof navigator !== 'undefined' &&\n\t\t/MSIE [1-9]\\./.test( navigator.userAgent )\n\t) {\n\t\treturn;\n\t}\n\tconst doc = view.document;\n\n\t// Only get URL when necessary in case Blob.js hasn't overridden it yet:\n\tfunction getURL() {\n\t\treturn view.URL || view.webkitURL || view;\n\t}\n\tfunction revoke( file ) {\n\t\tfunction revoker() {\n\t\t\tif ( typeof file === 'string' ) { // File is an object URL...\n\t\t\t\tgetURL().revokeObjectURL(file);\n\t\t\t} else { // File is a File...\n\t\t\t\tfile.remove();\n\t\t\t}\n\t\t}\n\t\tsetTimeout( revoker, ARBITRARY_REVOKE_TIMEOUT );\n\t}\n\n\tconst saveLink = doc.createElementNS( 'http://www.w3.org/1999/xhtml', 'a' );\n\tconst canUseSaveLink = 'download' in saveLink;\n\tconst isSafari = /constructor/i.test( view.HTMLElement ) || view.safari;\n\tconst isChromeIOS =/CriOS\\/[\\d]+/.test( navigator.userAgent );\n\tconst setImmediate = view.setImmediate || view.setTimeout;\n\tconst forceSavableType = 'application/octet-stream';\n\n\tfunction FileSaver(blob, name, noAutoBOM ) {\n\t\tif ( !noAutoBOM ) {\n\t\t\tblob = autoBOM(blob);\n\t\t}\n\t\t// First try a.download, then web filesystem, then object URLs\n\t\tconst self = this;\n\t\tconst type = blob.type;\n\t\tconst force = type === forceSavableType;\n\t\tlet objectURL;\n\t\tfunction dispatchAll() {\n\t\t\tdispatch( self, 'writestart progress write writeend'.split(' ') );\n\t\t}\n\t\t// On any filesystem errors, revert to saving with object URLs:\n\t\tfunction fsError() {\n\t\t\tif ((isChromeIOS || (force && isSafari)) && view.FileReader) {\n\t\t\t\t// Safari doesn't allow downloading of blob urls\n\t\t\t\tconst reader = new FileReader();\n\t\t\t\treader.onloadend = function onLoadEnd() {\n\t\t\t\t\tlet url = isChromeIOS ? reader.result : reader.result.replace(/^data:[^;]*;/, 'data:attachment/file;');\n\t\t\t\t\tconst popup = view.open(url, '_blank');\n\t\t\t\t\tif ( !popup ) {\n\t\t\t\t\t\tview.location.href = url;\n\t\t\t\t\t}\n\t\t\t\t\turl = void 0; // Release reference before dispatching...\n\t\t\t\t\tself.readyState = self.DONE;\n\t\t\t\t\tdispatchAll();\n\t\t\t\t};\n\t\t\t\treader.readAsDataURL(blob);\n\t\t\t\tself.readyState = self.INIT;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// Don't create more object URLs than needed:\n\t\t\tif ( !objectURL ) {\n\t\t\t\tobjectURL = getURL().createObjectURL( blob );\n\t\t\t}\n\t\t\tif ( force ) {\n\t\t\t\tview.location.href = objectURL;\n\t\t\t} else {\n\t\t\t\tconst opened = view.open( objectURL, '_blank' );\n\t\t\t\tif ( !opened ) {\n\t\t\t\t\t// Apple does not allow window.open, see https://developer.apple.com/library/safari/documentation/Tools/Conceptual/SafariExtensionGuide/WorkingwithWindowsandTabs/WorkingwithWindowsandTabs.html\n\t\t\t\t\tview.location.href = objectURL;\n\t\t\t\t}\n\t\t\t}\n\t\t\tself.readyState = self.DONE;\n\t\t\tdispatchAll();\n\t\t\trevoke( objectURL );\n\t\t}\n\t\tself.readyState = self.INIT;\n\n\t\tif ( canUseSaveLink ) {\n\t\t\tobjectURL = getURL().createObjectURL(blob);\n\t\t\tsetImmediate(function save() {\n\t\t\t\tsaveLink.href = objectURL;\n\t\t\t\tsaveLink.download = name;\n\t\t\t\tclick( saveLink );\n\t\t\t\tdispatchAll();\n\t\t\t\trevoke( objectURL );\n\t\t\t\tself.readyState = self.DONE;\n\t\t\t}, 0);\n\t\t\treturn;\n\t\t}\n\n\t\tfsError();\n\t}\n\tconst proto = FileSaver.prototype;\n\tfunction saveAs( blob, name, noAutoBOM ) {\n\t\treturn new FileSaver( blob, name || blob.name || 'download', noAutoBOM );\n\t}\n\n\t// IE 10+ (native saveAs)\n\tif ( typeof navigator !== 'undefined' && navigator.msSaveOrOpenBlob ) {\n\t\treturn function saveAs( blob, name, noAutoBOM ) {\n\t\t\tname = name || blob.name || 'download';\n\t\t\tif ( !noAutoBOM ) {\n\t\t\t\tblob = autoBOM( blob );\n\t\t\t}\n\t\t\treturn navigator.msSaveOrOpenBlob(blob, name);\n\t\t};\n\t}\n\n\tproto.abort = function abort() {};\n\tproto.readyState = proto.INIT = 0;\n\tproto.WRITING = 1;\n\tproto.DONE = 2;\n\n\tproto.error = null;\n\tproto.onwritestart = null;\n\tproto.onprogress = null;\n\tproto.onwrite = null;\n\tproto.onabort = null;\n\tproto.onerror = null;\n\tproto.onwriteend = null;\n\n\treturn saveAs;\n}\n\nconst saveAs = saveFactory(\n\ttypeof self !== 'undefined' && self ||\n\ttypeof window !== 'undefined' && window ||\n\tthis.content\n);\n\n\n// EXPORTS //\n\nexport default saveAs;\n","// MODULES //\n\nimport contains from '@stdlib/assert/contains';\nimport lowercase from '@stdlib/string/lowercase';\n\n\n// MAIN //\n\n/**\n* Checks whether a row contains a string that matches a filter.\n*\n* @param {Object} filter - filter object\n* @param {Object} row - row of data\n* @returns {boolean} boolean indicating whether a row contains a string that matches a filter\n*/\nconst textFilter = ( filter, row ) => {\n\tconst str = row[ filter.id ] || '';\n\treturn contains( lowercase( str ), lowercase( filter.value ) );\n};\n\n\n// EXPORTS //\n\nexport default textFilter;\n"],"names":["changedNamespace","title","owners","announcements","cohorts","description","enableTicketing","_id","type","CHANGED_NAMESPACE","payload","createNamespace","async","dispatch","props","res","axios","server","data","successful","addErrorNotification","Error","message","namespace","onNamespace","APPEND_CREATED_NAMESPACE","appendCreatedNamespace","history","replace","addNotification","level","err","createNamespaceInjector","deleteCurrentNamespace","id","DELETED_CURRENT_NAMESPACE","deletedCurrentNamespace","deleteCurrentNamespaceInjector","updateCurrentNamespace","ns","UPDATED_OWNED_NAMESPACE","updatedOwnedNamespace","getCohorts","namespaceID","updateCurrentNamespaceInjector","getNamespaceActionsInjector","namespaceTitle","qs","blob","Blob","name","saveAs","getNamespaceActions","adjustProgress","email","lessonID","progress","cohort","i18next","UPDATED_STUDENT_PROGRESS","updateStudentProgress","adjustProgressInjector","getAllNamespacesInjector","GET_ALL_NAMESPACES","namespaces","getAllNamespaces","setLessonOrderInjector","lessons","setLessonOrder","ConfirmModal","show","onHide","close","as","onClick","t","variant","onConfirm","propTypes","PropTypes","defaultProps","withTranslation","DashboardTable","Component","this","render","Fragment","filterable","className","columns","previousText","nextText","loadingText","noDataText","pageText","ofText","rowsText","ref","table","getProps","onButtonClick","ButtonGroup","vertical","style","float","marginRight","OverlayTrigger","placement","overlay","Tooltip","Button","marginBottom","isRequired","EXPORT_COLUMNS","debug","logger","getPartAfterMedia","filepath","substring","indexOf","prepareExportData","i","length","row","pick","lesson","filename","FilesPage","constructor","super","handleFileDeletion","state","deletionID","ownerFiles","toggleDeleteModal","setState","showDeleteModal","createTextColumn","Header","accessor","minWidth","filterMethod","filter","contains","lowercase","value","Cell","href","target","rel","size","resizable","sortable","width","copyToClipboard","position","maxWidth","height","url","startsWith","d","parts","trim","split","pop","join","createNumericColumn","roundn","pivotId","min","max","formatLabel","maxValue","ceil","fileMaxSize","minValue","createDateColumn","toLocaleDateString","currentFiles","dashboardTable","getResolvedState","sortedData","JSON","stringify","header","output","showExplorer","fileInputKey","createColumns","componentDidMount","getFiles","namespaceName","componentDidUpdate","prevProps","files","file","replacement","createdAt","updatedAt","push","obsToVar","quantitative","categorical","toggleExplorer","saveCSV","saveJSON","FormGroup","FormLabel","htmlFor","cursor","Badge","key","accept","onChange","handleUpload","display","r","handleDelete","AnnouncementsPage","ndx","editItem","announcement","deleteAnnouncement","clear","closeDeleteModal","now","Date","getTime","body","author","user","picture","addAnnouncement","editAnnouncement","event","mode","renderModals","editMessage","renderMessages","map","index","date","dateString","toLocaleTimeString","navigator","language","hour","minute","src","alt","isDisabled","isEmpty","Card","Form","padding","controlId","FormControl","handleInputChange","rows","disabled","createMessage","deleteSelectedMessage","EditableProgress","isEditing","newProgress","clamp","hasChanged","onSubmit","originalProgress","nextProps","prevState","handleChange","role","tabIndex","toggleEditing","onKeyPress","handleSubmit","ProgressBar","fontSize","label","filterNumbersFactory","idx","lessonData","isUndefinedOrNull","round","sortFactory","a","b","filterMethodCategories","isArray","String","ProgressPage","original","fontWeight","formatTime","spentTime","toLocaleString","assembleData","displayedMembers","lessonSortDirection","lessonOrder","createDisplayedMembers","members","cohortMembers","j","concat","lastName","firstName","COLUMNS","color","marginTop","Filter","newValue","onBlur","backgroundColor","v","_lesson","accessorFactory","sortMethod","paddingLeft","paddingRight","paddingTop","ariaLabelledby","ariaControls","allowSameValues","len","out","Array","member","_original","availableCustomFields","fieldName","customFields","lessonName","reorderColumns","slice","sort","localeCompare","renderSortButton","DropdownButton","onSelect","Dropdown","eventKey","marginLeft","CohortsPage","selectedCohorts","actualMember","cohortOptions","renderMember","ani","showUser","animation","renderCohort","list","renderMemberLessons","totalTime","renderMemberBadges","badges","time","score","renderActualMember","closeActualMember","isMulti","placeholder","options","handleCohortChange","grades","points","_sumPoints","GradesPage","lessonGrades","maxPoints","metadata","tally","hasOwnProp","margin","defaultVal","ActionsPage","val","anonymized","lessonActionsPage","actualLesson","renderCohorts","renderLessonActionsPage","hideLessonActions","renderLessons","showLessonActions","renderExportSection","ToggleButtonGroup","handleRadioChange","ToggleButton","retrieveActions","RE_TICKET","TicketsPage","showTicketModal","tickets","minTime","PINF","maxTime","moment","selectedTicket","toggleTicketModal","createCategoricalColumn","labels","higher","lower","updatePriority","createBooleanColumn","trueLabel","falseLabel","textAlign","popover","Popover","maxHeight","overflowY","arrowProps","omit","trigger","startDate","endDate","ticket","component","messages","attachments","done","priority","browser","platform","version","os","family","architecture","getCourseTickets","location","search","match","exec","assembleExplorerData","submitTicketMessage","openTicket","closeTicket","NamespaceData","formData","FormData","append","uploadFile","deleteFile","ticketID","sendTicketMessage","selectedKey","Number","activePage","params","subpage","getBadges","renderPage","handleAnnouncementEdit","handleAnnouncementDeletion","handleAnnouncementCreation","getOwnerFiles","Alert","page","Nav","activeKey","handleSelect","namespaceAxios","CREATED_ANNOUNCEMENT","createdAnnouncement","addAnnouncementInjector","DELETED_ANNOUNCEMENT","deletedAnnouncement","deleteAnnouncementInjector","EDITED_ANNOUNCEMENT","editedAnnouncement","editAnnouncementInjector","VisibleNamespaceData","connect","getAvailableBadgesInjector","getCourseTicketsInjector","getFilesInjector","getOwnerFilesInjector","addNotificationInjector","deleteFileInjector","sendTicketMessageInjector","closeTicketInjector","openTicketInjector","uploadFileInjector","updatePriorityInjector","withRouter","DashboardDataExplorer","asyncComponent","printLabels","x","CustomDatePicker","onDatesChange","minDate","maxDate","DateRangePicker","startDateId","endDateId","handleDatesChange","focusedInput","onFocusChange","isOutsideRange","handleReset","paddingBottom","DefaultCell","valueOf","filterValue","defaultFilterMethod","defaultFormatLabel","step","spec","textFilter","autoComplete","RE_AUTO_BOM","throwOutside","ex","setImmediate","autoBOM","test","fromCharCode","view","userAgent","getURL","URL","webkitURL","revoke","setTimeout","revokeObjectURL","remove","saveLink","document","createElementNS","canUseSaveLink","isSafari","HTMLElement","safari","isChromeIOS","FileSaver","noAutoBOM","self","force","objectURL","dispatchAll","filesaver","eventTypes","listener","call","readyState","INIT","createObjectURL","download","node","MouseEvent","dispatchEvent","click","DONE","FileReader","reader","onloadend","result","open","readAsDataURL","fsError","proto","prototype","msSaveOrOpenBlob","abort","WRITING","error","onwritestart","onprogress","onwrite","onabort","onerror","onwriteend","saveFactory","window","content","str"],"sourceRoot":""}