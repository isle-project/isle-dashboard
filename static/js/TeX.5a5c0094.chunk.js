"use strict";(self.webpackChunkisle_dashboard=self.webpackChunkisle_dashboard||[]).push([[3801],{34136:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Z:function(){return number}});var react=__webpack_require__(45254),prop_types=__webpack_require__(45697),prop_types_default=__webpack_require__.n(prop_types),browser=__webpack_require__(14946),browser_default=__webpack_require__.n(browser),commonjs=__webpack_require__(81468),lib=__webpack_require__(61635),lib_default=__webpack_require__.n(lib),is_nan_lib=__webpack_require__(64529),is_nan_lib_default=__webpack_require__.n(is_nan_lib),is_string_lib=__webpack_require__(99301),is_null_lib=__webpack_require__(95447),is_null_lib_default=__webpack_require__.n(is_null_lib),is_number_lib=__webpack_require__(91317),pinf_lib=__webpack_require__(51235),pinf_lib_default=__webpack_require__.n(pinf_lib),ninf_lib=__webpack_require__(58747),ninf_lib_default=__webpack_require__.n(ninf_lib),components_tooltip=__webpack_require__(77287),context=__webpack_require__(32283),uid=__webpack_require__(6756);function createTooltip({min,max,step,t}){let tooltip=`${t("enter")} ${t(step===1?"integer":"number")} `;return max!==pinf_lib_default()&&min!==ninf_lib_default()?tooltip+=`${t("between")} ${min} ${t("and")} ${max}`:min!==ninf_lib_default()?tooltip+=`${t("larger-or-equal-to")} ${min}`:max!==pinf_lib_default()&&(tooltip+=`${t("smaller-or-equal-to")} ${max}`),tooltip}var create_tooltip=createTooltip,__defProp=Object.defineProperty,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(obj,key,value)=>key in obj?__defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value}):obj[key]=value,__spreadValues=(a,b)=>{for(var prop in b||(b={}))__hasOwnProp.call(b,prop)&&__defNormalProp(a,prop,b[prop]);if(__getOwnPropSymbols)for(var prop of __getOwnPropSymbols(b))__propIsEnum.call(b,prop)&&__defNormalProp(a,prop,b[prop]);return a};const debug=browser_default()("isle:number-input"),main_uid=(0,uid.Z)("number-input"),NumberInput=props=>{const id=(0,react.useRef)(props.id||main_uid(props)),{bind,defaultValue,min,max,step,value:propValue,onBlur,onChange}=props,{t}=(0,commonjs.$G)("input"),session=(0,react.useContext)(context.Z),[value,setValue]=(0,react.useState)(propValue||(bind&&session.state?session.state[bind]:defaultValue));(0,react.useEffect)(()=>{if(bind){const globalValue=__webpack_require__.g.lesson.state[bind];globalValue!==value&&(0,is_number_lib.isPrimitive)(value)&&setValue(globalValue)}},[bind,value]),(0,react.useEffect)(()=>{setValue(defaultValue)},[defaultValue]),(0,react.useEffect)(()=>{bind&&setValue(__webpack_require__.g.lesson.state[bind])},[bind]);const handleChange=(0,react.useCallback)(event=>{debug("Handle change of input field...");let valid=event.target.validity.valid,newValue=event.target.value;setValue(newValue),propValue||valid&&newValue!==""&&newValue!=="-"&&newValue!=="."&&newValue!=="-."?(newValue=parseFloat(newValue),is_nan_lib_default()(newValue)&&(newValue=""),onChange(newValue),bind&&__webpack_require__.g.lesson.setState({[bind]:newValue})):bind&&__webpack_require__.g.lesson.setState({[bind]:newValue})},[bind,propValue,onChange]),finishChange=(0,react.useCallback)(event=>{debug("Finished change...");let newValue=event.target.value;if(lib_default()(newValue,"/")){debug("Encountered a fraction...");const splitted=newValue.split("/");splitted[0]!==""&&splitted[1]!==""&&(newValue=parseFloat(splitted[0])/parseFloat(splitted[1]))}is_nan_lib_default()(newValue)?newValue="":newValue!==""&&newValue!=="-"&&newValue!=="."&&newValue!=="-."&&(newValue=parseFloat(newValue)),newValue>max?newValue=max:newValue<min?newValue=min:step===1&&newValue!==""&&newValue!=="-"&&newValue!=="."&&newValue!=="-."&&(newValue=newValue-newValue%step),onChange(newValue),onBlur(newValue),newValue!==value&&(setValue(newValue),bind&&__webpack_require__.g.lesson.setState({[bind]:newValue}))},[bind,min,max,step,value,onBlur,onChange]),tooltip=is_null_lib_default()(props.tooltip)?create_tooltip({min,max,step,t}):props.tooltip;if(props.inline===!0){const input2=react.createElement("span",{className:"input",style:__spreadValues({padding:"5px"},props.style)},props.legend?react.createElement("label",{htmlFor:id.current}," ",props.legend," =  "):null,react.createElement("input",{id:id.current,type:props.numbersOnly?"number":"text",name:"input",className:"number-number-input",disabled:props.disabled,value:propValue!==null?propValue:value,step:props.step,min:props.min,max:props.max,style:__spreadValues({width:"80px",paddingLeft:"6px",marginLeft:"3px"},props.inputStyle),onChange:handleChange,onBlur:finishChange,onKeyPress:props.onKeyPress,onKeyDown:props.onKeyDown,onKeyUp:props.onKeyUp,autoComplete:"off"}),props.description?react.createElement("span",null,"(",props.description,")"):react.createElement("span",null));return props.disabled?input2:react.createElement(components_tooltip.Z,{id:"number-input-tooltip-inline",placement:"top",show:!props.disabled,tooltip},input2)}const input=react.createElement("input",{id:id.current,type:props.numbersOnly?"number":"text",name:"input",className:"number-number-input",disabled:props.disabled,value:propValue!==null?propValue:value,step:props.step,min:props.min,max:props.max,style:__spreadValues({width:"80px",marginLeft:"24px"},props.inputStyle),onChange:handleChange,onBlur:finishChange,onKeyPress:props.onKeyPress,onKeyDown:props.onKeyDown,onKeyUp:props.onKeyUp,autoComplete:"off"});return react.createElement("div",{className:"input",style:__spreadValues({marginBottom:"4px",marginTop:"4px"},props.style)},props.legend?react.createElement("span",null,react.createElement("label",{htmlFor:id.current},(0,is_string_lib.isPrimitive)(props.legend)?props.legend+":":props.legend),props.description?react.createElement("span",null," ",props.description):null):null,react.createElement(components_tooltip.Z,{id:"number-input-tooltip",placement:props.tooltipPlacement,tooltip,show:!props.disabled},react.createElement("span",{className:"number-input-span"},input)))};NumberInput.defaultProps={bind:"",disabled:!1,legend:null,min:ninf_lib_default(),max:pinf_lib_default(),step:1,defaultValue:0,onBlur(){},onChange(){},onKeyDown(){},onKeyPress(){},onKeyUp(){},inline:!1,numbersOnly:!0,style:{},inputStyle:{},value:null,tooltip:null,tooltipPlacement:"left"},NumberInput.propTypes={bind:prop_types_default().string,defaultValue:prop_types_default().number,disabled:prop_types_default().bool,inline:prop_types_default().bool,legend:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().node]),max:prop_types_default().number,min:prop_types_default().number,numbersOnly:prop_types_default().bool,onBlur:prop_types_default().func,onChange:prop_types_default().func,onKeyDown:prop_types_default().func,onKeyPress:prop_types_default().func,onKeyUp:prop_types_default().func,step:prop_types_default().oneOfType([prop_types_default().number,prop_types_default().string]),style:prop_types_default().object,inputStyle:prop_types_default().object,value:prop_types_default().number,tooltip:prop_types_default().string,tooltipPlacement:prop_types_default().oneOf(["top","right","bottom","left"])};var main=NumberInput;const number_createTooltip=null;var number=main},75777:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:function(){return main}});var react=__webpack_require__(45254),prop_types=__webpack_require__(45697),prop_types_default=__webpack_require__.n(prop_types),Overlay=__webpack_require__(76296),Overlay_default=__webpack_require__.n(Overlay),Popover=__webpack_require__(67883),Popover_default=__webpack_require__.n(Popover),lodash_debounce=__webpack_require__(91296),lodash_debounce_default=__webpack_require__.n(lodash_debounce),lib=__webpack_require__(58747),lib_default=__webpack_require__.n(lib),pinf_lib=__webpack_require__(51235),pinf_lib_default=__webpack_require__.n(pinf_lib),replace_lib=__webpack_require__(51594),replace_lib_default=__webpack_require__.n(replace_lib),keys_lib=__webpack_require__(25351),keys_lib_default=__webpack_require__.n(keys_lib),escape_regexp_string_lib=__webpack_require__(5481),escape_regexp_string_lib_default=__webpack_require__.n(escape_regexp_string_lib),number=__webpack_require__(34136),is_number_lib=__webpack_require__(91317),prop_check=__webpack_require__(25048),__defProp=Object.defineProperty,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(obj,key,value)=>key in obj?__defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value}):obj[key]=value,__spreadValues=(a,b)=>{for(var prop in b||(b={}))__hasOwnProp.call(b,prop)&&__defNormalProp(a,prop,b[prop]);if(__getOwnPropSymbols)for(var prop of __getOwnPropSymbols(b))__propIsEnum.call(b,prop)&&__defNormalProp(a,prop,b[prop]);return a};let counter=1;function processEquation(raw,elems,id){const keys=keys_lib_default()(elems);for(let i=0;i<keys.length;i++){const key=keys[i],el=elems[key],RE_KEY=new RegExp("(^| )(\\\\)?"+escape_regexp_string_lib_default()(key)+"($| )");let replacement="";el.tooltip?replacement+=`\\texttip{$2${key}}{${el.tooltip}}`:replacement="$2"+key,el.onChange&&(replacement=`\\class{tex-clickable}{\\cssId{tex-${id}-${key}}{${replacement}}}`),replacement="$1"+replacement+"$3",raw=replace_lib_default()(raw,RE_KEY,replacement)}return raw}const updateEquations=lodash_debounce_default()(()=>{window.MathJax.startup.document.clear(),window.MathJax.startup.document.updateDocument()},200),TeX=({raw,displayMode,numbered,style,tag,elems,popoverPlacement,onPopover,onClick})=>{const[id]=(0,react.useState)(counter),eqRef=(0,react.useRef)(null),[popover,setPopover]=(0,react.useState)({}),[config,setConfig]=(0,react.useState)({});(0,react.useEffect)(()=>{let output=eqRef.current;window.MathJax.texReset&&window.MathJax.texReset();const options=window.MathJax.getMetricsFor?window.MathJax.getMetricsFor(output):{};options.display=displayMode;let input=(0,is_number_lib.isPrimitive)(raw)?raw.toString():raw;if(input=processEquation(input,elems,id),!!window.MathJax.tex2chtmlPromise)return window.MathJax.tex2chtmlPromise(input,options).then(node=>{output.innerHTML="",output.appendChild(node),updateEquations();const keys=keys_lib_default()(elems);for(let i=0;i<keys.length;i++){const key=keys[i],el=elems[key],node2=document.getElementById("tex-"+id+"-"+key);node2&&node2.addEventListener("click",function(){if(el.variable){let newConfig={legend:el.legend||el.variable,min:el.min||lib_default(),max:el.max||pinf_lib_default(),step:el.step||"any"};el.onChange?(newConfig.onChange=el.onChange,newConfig.defaultValue=el.defaultValue):newConfig.bind=el.variable,popover.name!==key?(setConfig(newConfig),setPopover({show:!0,target:node2,name:key}),onPopover(!0)):(setPopover({show:!1,target:null,name:null}),onPopover(!1))}})}}),counter+=1,()=>{counter=1}});const equation=react.createElement("span",{ref:eqRef}),overlay=react.createElement(Overlay_default(),{show:popover.show,target:eqRef.current,placement:popoverPlacement},react.createElement(Popover_default(),{id:"popover-top"},react.createElement(number.Z,__spreadValues({inline:!0},config))));if(displayMode===!0){const tagDiv=numbered?react.createElement("div",{className:"tag",style:{float:"right",marginTop:5,marginRight:5}},tag!==null?tag:"["+id+"]"):null;return onClick?react.createElement("div",{className:"tex",role:"button",tabIndex:0,style,onClick,onKeyPress:onClick,"aria-label":"Equation"},tagDiv,equation,overlay):react.createElement("div",{className:"tex",style,"aria-label":"Equation"},tagDiv,equation,overlay)}return onClick?react.createElement("span",{className:"tex",role:"button",tabIndex:0,style,onClick,onKeyPress:onClick,"aria-label":"Equation"},equation,overlay):react.createElement("span",{className:"tex",style,"aria-label":"Equation"},equation,overlay)};TeX.propTypes={raw:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().number]).isRequired,displayMode:prop_types_default().bool,numbered:prop_types_default().bool,style:prop_types_default().object,tag:prop_types_default().string,elems:prop_types_default().object,popoverPlacement:prop_types_default().string,onPopover:prop_types_default().func,onClick:prop_types_default().func},TeX.defaultProps={displayMode:!1,numbered:!1,style:{},tag:null,elems:{},popoverPlacement:"bottom",onPopover(){},onClick:null};var main=(0,prop_check.W)(TeX)}}]);

//# sourceMappingURL=TeX.5a5c0094.chunk.js.map