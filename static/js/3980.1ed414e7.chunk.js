"use strict";(self.webpackChunkisle_dashboard=self.webpackChunkisle_dashboard||[]).push([[3980],{82565:function(e,t,n){n.d(t,{Qi:function(){return p},CP:function(){return h},Np:function(){return Z},hb:function(){return v},mm:function(){return w}});var a=n(87757),r=n.n(a),s=n(15861),o=n(63834),l=n(98695),i=n(41985),c=n(33357),u=n(605),m=function(){var e=(0,s.Z)(r().mark((function e(t){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.Yy.get(o.ZP+"/get_custom_fields");case 3:n=e.sent,t({type:c.C3,payload:{customFields:n.data.fields}}),e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",(0,i.EG)(t,e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),p=function(e){return(0,s.Z)(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m(e);case 2:case"end":return t.stop()}}),t)})))},d=function(){var e=(0,s.Z)(r().mark((function e(t,n){var a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.Yy.post(o.ZP+"/increment_field_position",{id:n});case 3:a=e.sent,t({type:c.S5,payload:{customFields:a.data.fields}}),e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",(0,i.EG)(t,e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}(),h=function(e){return function(){var t=(0,s.Z)(r().mark((function t(n){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d(e,n);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},f=function(){var e=(0,s.Z)(r().mark((function e(t,n){var a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.Yy.post(o.ZP+"/decrement_field_position",{id:n});case 3:a=e.sent,t({type:c.rh,payload:{customFields:a.data.fields}}),e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",(0,i.EG)(t,e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}(),Z=function(e){return function(){var t=(0,s.Z)(r().mark((function t(n){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f(e,n);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},g=function(){var e=(0,s.Z)(r().mark((function e(t,n){var a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.Yy.post(o.ZP+"/delete_custom_field",{id:n});case 3:a=e.sent,(0,i.wN)(t,{title:l.Z.t("common:deleted"),message:a.data.message,level:"success"}),t({type:c.CH,payload:{id:n}}),e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",(0,i.EG)(t,e.t0));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}(),v=function(e){return function(){var t=(0,s.Z)(r().mark((function t(n){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g(e,n);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},E=function(){var e=(0,s.Z)(r().mark((function e(t,n){var a,s,m,p,d,h,f,Z,g;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.name,s=n.description,m=n.type,p=n.options,d=n.position,h=n.showOnProfile,f=n.editableOnSignup,Z=n.editableOnProfile,e.prev=1,e.next=4,u.Yy.post(o.ZP+"/create_custom_field",{name:a,description:s,type:m,options:p,position:d,showOnProfile:h,editableOnSignup:f,editableOnProfile:Z});case 4:return g=e.sent,(0,i.wN)(t,{title:l.Z.t("common:created"),message:g.data.message,level:"success"}),t({type:c.Hs,payload:g.data.field}),e.abrupt("return",g);case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",(0,i.EG)(t,e.t0));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}(),w=function(e){return function(){var t=(0,s.Z)(r().mark((function t(n){var a,s,o,l,i,c,u,m;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.name,s=n.description,o=n.type,l=n.options,i=n.position,c=n.showOnProfile,u=n.editableOnSignup,m=n.editableOnProfile,t.next=3,E(e,{name:a,description:s,type:o,options:l,position:i,showOnProfile:c,editableOnSignup:u,editableOnProfile:m});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},63980:function(e,t,n){n.r(t),n.d(t,{default:function(){return Q}});var a=n(41488),r=n(29236),s=n(1413),o=n(87757),l=n.n(o),i=n(15861),c=n(15671),u=n(43144),m=n(97326),p=n(60136),d=n(29388),h=n(4942),f=n(12929),Z=n(25472),g=n(89308),v=n(70048),E=n(29530),w=n(72945),y=n(23596),b=n(54012),k=n(75018),x=n(73230),C=n(36659),S=n(93391),F=n(85802),P=n(9050),I=n(47701),O=n(14657),N=n(10077),_=n.n(N),V=n(61562),L=n.n(V),M=n(3252),T=n(59486),U=n(98695),G=(0,T.EN)((function(e){return a.createElement(M.Z,{variant:e.successful?"success":"warning",show:e.show},a.createElement(M.Z.Header,null,a.createElement(M.Z.Title,null,U.Z.t("signup:create-user"))),a.createElement(M.Z.Body,null,e.message),a.createElement(M.Z.Footer,null,e.successful?a.createElement(v.Z,{onClick:function(){e.history.push("/login")}},U.Z.t("signup:go-to-login-page")):a.createElement(v.Z,{onClick:e.close},U.Z.t("signup:close"))))})),R=(n(27184),function(e){return a.createElement(I.Z,{id:"tooltip"},e)}),Y=_()("isle-dashboard:signup"),H=function(e){(0,p.Z)(n,e);var t=(0,d.Z)(n);function n(e){var a;return(0,c.Z)(this,n),a=t.call(this,e),(0,h.Z)((0,m.Z)(a),"handleSubmit",function(){var e=(0,i.Z)(l().mark((function e(t){var n,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(a.getEmailValidationState()&&a.getNameValidationState()&&a.getPasswordValidationState())){e.next=16;break}return e.prev=2,e.next=5,a.props.createUser({name:(s=a.state).name,email:s.email,password:s.password,customFields:s.customFields});case 5:n=e.sent,a.setState({message:n.data.message,successful:!0,showModal:!0}),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(2),r=e.t0.response?e.t0.response.data:e.t0.message,Y("Encountered an error: "+r),a.setState({message:r,successful:!1,showModal:!0});case 14:e.next=17;break;case 16:a.setState({showSubmitOverlay:!0,overlayTarget:t.target},(function(){setTimeout((function(){a.setState({showSubmitOverlay:!1})}),4e3)}));case 17:case"end":return e.stop()}var s}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}()),(0,h.Z)((0,m.Z)(a),"handleInputChange",(function(e){var t=e.target,n=t.value,r=t.name;a.setState((0,h.Z)({},r,n))})),(0,h.Z)((0,m.Z)(a),"getEmailValidationState",(function(){return L()(a.state.email)})),(0,h.Z)((0,m.Z)(a),"getNameValidationState",(function(){return a.state.name.length>3})),(0,h.Z)((0,m.Z)(a),"getPasswordValidationState",(function(){var e=a.state,t=e.password,n=e.passwordRepeat;return!(t.length<6||0===n.length)&&t===n})),(0,h.Z)((0,m.Z)(a),"close",(function(){a.setState({showModal:!1})})),a.state={name:"",email:"",password:"",passwordRepeat:"",showModal:!1,customFields:{}},a}return(0,u.Z)(n,[{key:"componentDidMount",value:function(){this.props.getCustomFields()}},{key:"renderEmail",value:function(){var e=this.props.t;return a.createElement(S.Z,{placement:"right",overlay:R(e("email-tooltip"))},a.createElement(x.Z,{controlId:"form-email"},a.createElement(y.Z,null,a.createElement(w.Z,{sm:3},a.createElement(b.Z,null,e("common:email"))),a.createElement(w.Z,{sm:9},a.createElement(k.Z,{name:"email",type:"email",autoComplete:"username email",placeholder:e("common:enter-email"),onChange:this.handleInputChange,isInvalid:this.state.email&&!this.getEmailValidationState()}),a.createElement(C.Z.Control.Feedback,{type:"invalid"},e("invalid-email"))))))}},{key:"renderName",value:function(){var e=this.props.t;return a.createElement(S.Z,{placement:"right",overlay:R(e("name-tooltip"))},a.createElement(x.Z,{controlId:"form-name"},a.createElement(y.Z,null,a.createElement(w.Z,{sm:3},a.createElement(b.Z,null,e("common:name"))),a.createElement(w.Z,{sm:9},a.createElement(k.Z,{name:"name",type:"text",placeholder:e("common:enter-name"),onChange:this.handleInputChange,isInvalid:this.state.name&&!this.getNameValidationState()}),a.createElement(C.Z.Control.Feedback,{type:"invalid"},e("invalid-name"))))))}},{key:"renderPasswordFields",value:function(){var e=this.props.t,t=this.getPasswordValidationState(),n=this.state.password||this.state.passwordRepeat;return a.createElement(a.Fragment,null,a.createElement(S.Z,{placement:"right",overlay:R(e("password-tooltip"))},a.createElement(x.Z,{controlId:"form-password"},a.createElement(y.Z,null,a.createElement(w.Z,{sm:3},a.createElement(b.Z,null,e("common:password"))),a.createElement(w.Z,{sm:9},a.createElement(k.Z,{name:"password",type:"password",autoComplete:"new-password",placeholder:e("choose-password"),onChange:this.handleInputChange,maxLength:30,minLength:6,isInvalid:n&&!t}),a.createElement(C.Z.Control.Feedback,{type:"invalid"},e("invalid-password")))))),a.createElement(x.Z,{controlId:"form-repeat-password"},a.createElement(y.Z,null,a.createElement(w.Z,{sm:3},a.createElement(b.Z,null,e("common:repeat"))),a.createElement(w.Z,{sm:{span:9}},a.createElement(k.Z,{name:"passwordRepeat",type:"password",autoComplete:"new-password",placeholder:e("confirm-password"),onChange:this.handleInputChange,maxLength:30,minLength:6,isInvalid:n&&!t}),a.createElement(C.Z.Control.Feedback,{type:"invalid"},e("invalid-password-match"))))))}},{key:"render",value:function(){var e=this,t=this.props,n=t.t,r=t.settings,o=this.state.customFields,l=this.props.user.availableCustomFields||[];return a.createElement(a.Fragment,null,a.createElement("div",{className:"login"},a.createElement(E.Z,{style:{boxShadow:"0 0 8px rgba(0,0,0,0.3)",borderRadius:"6px",opacity:.98,background:"rgba(255,255,255,0.75)"}},a.createElement(E.Z.Header,null,a.createElement(E.Z.Title,{as:"h1",style:{textAlign:"center"}},"ISLE ",a.createElement("small",null,"Dashboard"))),a.createElement(E.Z.Body,null,a.createElement(C.Z,null,this.renderEmail(),this.renderName(),this.renderPasswordFields(),l.filter((function(e){return e.editableOnSignup})).map((function(t,n){var r,l=o[t.name];return r="checkbox"===t.type?a.createElement(x.Z,{controlId:"form-".concat(t.name),as:y.Z},a.createElement(w.Z,{sm:3}),a.createElement(w.Z,{sm:3},a.createElement(C.Z.Check,{type:"checkbox",label:t.name,defaultChecked:l,onChange:function(n){var a=(0,s.Z)({},e.state.customFields);a[t.name]=n.target.checked,e.setState({customFields:a,changed:!0})}}))):"text"===t.type?a.createElement(x.Z,{controlId:"form-".concat(t.name),as:y.Z},a.createElement(w.Z,{sm:3},a.createElement(b.Z,null,t.name)),a.createElement(w.Z,{sm:9},a.createElement(k.Z,{name:t.name,type:"text",value:l,placeholder:"Enter ".concat(t.name,"..."),onChange:function(n){var a=(0,s.Z)({},e.state.customFields);a[t.name]=n.target.value,e.setState({customFields:a,changed:!0})},autoComplete:"none"}))):a.createElement(x.Z,{controlId:"form-".concat(t.name),as:y.Z},a.createElement(w.Z,{sm:3},a.createElement(b.Z,null,t.name)),a.createElement(w.Z,{sm:9},a.createElement(g.ZP,{defaultValue:l?{label:l,value:l}:null,options:t.options.map((function(e){return{value:e,label:e}})),onChange:function(n){var a=(0,s.Z)({},e.state.customFields);a[t.name]=n.value,e.setState({customFields:a,changed:!0})}}))),a.createElement(S.Z,{key:n,placement:"top",overlay:R(t.description)},r)})),a.createElement("p",null,a.createElement(f.c,{i18nKey:"signup:tos-disclaimer"},"Through clicking the signup button you agree to our ",a.createElement(O.rU,{to:"/terms"},"terms of service"),". Learn more about how your data is processed in our ",a.createElement(O.rU,{to:"/privacy"},"privacy policy"),".")),a.createElement(x.Z,null,a.createElement(v.Z,{variant:"primary",className:"centered",type:"submit",onClick:this.handleSubmit},n("common:register"))))),a.createElement(E.Z.Footer,{style:{background:"rgba(255,255,255,0.6)",textAlign:"right"}},a.createElement(O.rU,{to:"/forgot-password"},n("common:forgot-password")),a.createElement("span",null," | "),a.createElement(O.rU,{to:"/login"},n("common:login")))),r.brandingLogo?a.createElement("img",{className:"login-branding-logo",src:r.brandingLogo,alt:"Branded Logo"}):null),a.createElement(G,{show:this.state.showModal,close:this.close,message:this.state.message,successful:this.state.successful}),a.createElement(F.Z,{show:this.state.showSubmitOverlay,target:this.state.overlayTarget,placement:"right",containerPadding:20},a.createElement(P.Z,{id:"popover-contained",title:"Input fields are not valid"},n("signup-not-valid"))))}}]),n}(a.Component);H.defaultProps={settings:{},user:{}};var B=(0,Z.Z)(["signup","common"])(H),D=n(60299),A=n(82565);var Q=(0,r.$j)((function(e){return{user:e.user,settings:e.settings}}),(function(e){return{createUser:D.r4,getCustomFields:(0,A.Qi)(e)}}))(B)},27184:function(){}}]);
//# sourceMappingURL=3980.1ed414e7.chunk.js.map