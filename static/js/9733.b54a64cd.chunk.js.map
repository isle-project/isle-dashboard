{"version":3,"sources":["../node_modules/@stdlib/assert/is-digit-string/lib/index.js","../node_modules/@stdlib/assert/is-digit-string/lib/main.js","../node_modules/@isle-project/components/collapse/index.js","../node_modules/@isle-project/utils/stop-propagation/index.js","../node_modules/@isle-project/components/data-explorer/variable-transformer/bin_transformer.js","../node_modules/@isle-project/components/data-explorer/variable-transformer/formula_transformer.js","../node_modules/@isle-project/components/data-explorer/variable-transformer/categorical_transformer.js","../node_modules/@isle-project/components/data-explorer/variable-transformer/group_transformer.js","../node_modules/@isle-project/components/data-explorer/variable-transformer/random-transformer/index.js","../node_modules/@isle-project/components/data-explorer/variable-transformer/index.js","../node_modules/@isle-project/components/node_modules/react-bootstrap/cjs/ButtonToolbar.js","../node_modules/@isle-project/components/node_modules/react-bootstrap/cjs/Table.js","../node_modules/@isle-project/components/panel/index.js"],"names":[],"mappings":"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","file":"static/js/9733.b54a64cd.chunk.js","sourcesContent":["/**\n* @license Apache-2.0\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n/**\n* Test whether a string contains only numeric digits.\n*\n* @module @stdlib/assert/is-digit-string\n*\n* @example\n* var isDigitString = require( '@stdlib/assert/is-digit-string' );\n*\n* var out = isDigitString( '0123456789' );\n* // returns true\n*\n* out = isDigitString( '0xffffff' );\n* // returns false\n*\n* out = isDigitString( '' );\n* // returns false\n*/\n\n// MODULES //\n\nvar isDigitString = require( './main.js' );\n\n\n// EXPORTS //\n\nmodule.exports = isDigitString;\n","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n// MODULES //\n\nvar isString = require( './../../is-string' ).isPrimitive;\n\n\n// VARIABLES //\n\n// Character codes:\nvar ZERO = 48;\nvar NINE = 57;\n\n\n// MAIN //\n\n/**\n* Tests whether a string contains only numeric digits.\n*\n* @param {*} x - value to test\n* @returns {boolean} boolean indicating if a string contains only numeric digits\n*\n* @example\n* var out = isDigitString( '0123456789' );\n* // returns true\n*\n* @example\n* var out = isDigitString( '0xffffff' );\n* // returns false\n*\n* @example\n* var out = isDigitString( '' );\n* // returns false\n*\n* @example\n* var out = isDigitString( 123 );\n* // returns false\n*/\nfunction isDigitString( x ) {\n\tvar len;\n\tvar ch;\n\tvar i;\n\tif ( !isString( x ) ) {\n\t\treturn false;\n\t}\n\tlen = x.length;\n\tif ( len === 0 ) {\n\t\treturn false;\n\t}\n\tfor ( i = 0; i < len; i++ ) {\n\t\tch = x.charCodeAt( i );\n\t\tif ( ch < ZERO || ch > NINE ) {\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn true;\n}\n\n\n// EXPORTS //\n\nmodule.exports = isDigitString;\n","// MODULES //\n\nimport Loadable from '@isle-project/components/internal/loadable';\n\n\n// MAIN //\n\nconst Collapse = Loadable( () => import( /* webpackChunkName: \"Collapse\" */ './main.js' ) );\n\n\n// EXPORTS //\n\nexport default Collapse;\n","// MAIN //\n\n/**\n * Sets an element to prevent event propagation.\n *\n * @param {Event} event - event for which to stop propagation\n */\nfunction stopPropagation( event ) {\n\tevent.stopPropagation();\n}\n\n\n// EXPORTS //\n\nexport default stopPropagation;\n","// MODULES //\n\nimport React, { Fragment, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport logger from 'debug';\nimport FocusTrap from 'focus-trap-react';\nimport FormControl from 'react-bootstrap/FormControl';\nimport FormLabel from 'react-bootstrap/FormLabel';\nimport FormGroup from 'react-bootstrap/FormGroup';\nimport FormText from 'react-bootstrap/FormText';\nimport Button from 'react-bootstrap/Button';\nimport Alert from 'react-bootstrap/Alert';\nimport Card from 'react-bootstrap/Card';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport runif from '@stdlib/random/base/uniform';\nimport keys from '@stdlib/utils/keys';\nimport roundn from '@stdlib/math/base/special/roundn';\nimport copy from '@stdlib/utils/copy';\nimport { isPrimitive as isNumber } from '@stdlib/assert/is-number';\nimport NumberInput from '@isle-project/components/input/number';\nimport SelectInput from '@isle-project/components/input/select';\nimport TextInput from '@isle-project/components/input/text';\nimport Draggable from '@isle-project/components/draggable';\nimport Plotly from '@isle-project/components/plotly';\nimport Panel from '@isle-project/components/panel';\nimport TeX from '@isle-project/components/tex';\nimport isnan from '@stdlib/assert/is-nan';\nimport factor from '@isle-project/utils/factor-variable';\nimport mean from '@isle-project/utils/statistic/mean.js';\nimport min from '@isle-project/utils/statistic/min.js';\nimport max from '@isle-project/utils/statistic/max.js';\nimport { DATA_EXPLORER_BIN_TRANSFORMER } from '@isle-project/constants/actions.js';\nimport { generateHistogramConfig } from '@isle-project/components/plots/histogram';\nimport stopPropagation from '@isle-project/utils/stop-propagation';\nimport retrieveBinnedValues from './retrieve_binned_values.js';\nimport ClearButton from './../clear_button.js';\nimport './bin_transformer.css';\n\n\n// VARIABLES //\n\nconst debug = logger( 'isle:data-explorer:variable-transformer' );\nconst RE_SHAPE = /shapes\\[(\\d)\\]\\.x0/;\nconst HISTOGRAM_SETTINGS = {\n\tgroup: null,\n\tdisplayDensity: true,\n\tdensityType: 'Data-driven',\n\tchooseBins: false,\n\tnBins: null\n};\nconst FOCUS_TRAP_OPTIONS = {\n\tclickOutsideDeactivates: true\n};\n\n\n// FUNCTIONS //\n\n/**\n* Comparator function used to sort values in ascending order.\n*\n* @private\n* @param {number} a - first number\n* @param {number} b - second number\n* @returns {number} difference between `a` and `b`\n*/\nfunction ascending( a, b ) {\n\treturn a - b;\n}\n\n/**\n* Function to make shapes from breakpoints.\n*/\nconst makeShapes = ( breakpoints ) => {\n\tconst breakShapes = [];\n\tfor ( let i = 0; i < breakpoints.length; i++ ) {\n\t\tbreakShapes.push({\n\t\t\ttype: 'line',\n\t\t\tx0: breakpoints[i],\n\t\t\ty0: -100,\n\t\t\tx1: breakpoints[i],\n\t\t\ty1: 100,\n\t\t\tline: {\n\t\t\t\tcolor: 'red',\n\t\t\t\twidth: 3\n\t\t\t}\n\t\t});\n\t}\n\treturn breakShapes;\n};\n\n/**\n* Creates an array of category names for created bins.\n*\n* @param {Array<number>} breakpoints - breakpoints\n* @param {Array<string>} customNames - custom category labels\n* @returns {Array<string>} array of bin labels\n*/\nconst createCategoryNames = ( breakpoints, customNames ) => {\n\tconst out = new Array( customNames.length );\n\tif ( customNames[ 0 ] ) {\n\t\tout[ 0 ] = customNames[ 0 ];\n\t} else {\n\t\tout[ 0 ] = `(-\\u221E,${breakpoints[0]})`; // eslint-disable-line i18next/no-literal-string\n\t}\n\tfor ( let i = 1; i < customNames.length; i++ ) {\n\t\tif ( customNames[ i ] ) {\n\t\t\tout[ i ] = customNames[ i ];\n\t\t} else {\n\t\t\tout[ i ] = `[${breakpoints[i-1]},${breakpoints[i]})`;\n\t\t}\n\t}\n\tconst last = customNames.length - 1;\n\tif ( customNames[ last ] ) {\n\t\tout[ last ] = customNames[ last ];\n\t} else {\n\t\tout[ last ] = `[${breakpoints[ breakpoints.length - 1 ]},\\u221E)`; // eslint-disable-line i18next/no-literal-string\n\t}\n\treturn out;\n};\n\n\n// MAIN //\n\nconst BinningTransformer = ( props ) => {\n\tconst [ name, setName ] = useState( '' );\n\tconst [ snapDigits, setSnapDigits ] = useState( 0 );\n\tconst [ state, setState ] = useState({\n\t\tvariable: null,\n\t\tconfigHist: null,\n\t\tbreakpoints: null,\n\t\tcategories: null,\n\t\tcustomNames: null\n\t});\n\tconst invalidName = name.length < 1;\n\tconst makeNewVar = () => {\n\t\tconst { variable, categories, breakpoints } = state;\n\t\tconst rawData = props.data[ variable ];\n\t\tconst values = retrieveBinnedValues( rawData, categories, breakpoints );\n\t\tprops.logAction( DATA_EXPLORER_BIN_TRANSFORMER, {\n\t\t\tname,\n\t\t\tvariable,\n\t\t\tbreaks: breakpoints,\n\t\t\tcategories\n\t\t});\n\t\tconst newName = factor( name, categories );\n\t\tprops.onGenerate( newName, values );\n\t\tprops.onHide();\n\t};\n\tconst handleKeyPress = ( event ) => {\n\t\t// Handle \"Return\" key:\n\t\tif ( event.charCode === 13 && !invalidName ) {\n\t\t\tmakeNewVar();\n\t\t}\n\t};\n\tconst handleNameChange = ( event ) => {\n\t\tsetName( event.target.value );\n\t};\n\tconst changeFactory = ( ind ) => {\n\t\treturn ( value ) => {\n\t\t\tdebug( 'Change break point...' );\n\t\t\tconst newBreakpoints = state.breakpoints.slice();\n\t\t\tnewBreakpoints[ ind ] = roundn( value, -snapDigits );\n\t\t\tnewBreakpoints.sort( ascending );\n\t\t\tconst configHist = copy( state.configHist );\n\t\t\tconfigHist.layout.shapes = makeShapes( newBreakpoints );\n\t\t\tsetState({\n\t\t\t\t...state,\n\t\t\t\tconfigHist,\n\t\t\t\tbreakpoints: newBreakpoints,\n\t\t\t\tcategories: createCategoryNames( newBreakpoints, state.customNames )\n\t\t\t});\n\t\t};\n\t};\n\tconst categoryChangeFactory = ( ind ) => {\n\t\treturn ( value ) => {\n\t\t\tconst newCategories = state.categories.slice();\n\t\t\tnewCategories[ ind ] = value;\n\t\t\tconst newCustomNames = state.customNames.slice();\n\t\t\tnewCustomNames[ ind ] = value;\n\t\t\tconst newState = {\n\t\t\t\t...state,\n\t\t\t\tcategories: newCategories,\n\t\t\t\tcustomNames: newCustomNames\n\t\t\t};\n\t\t\tsetState( newState );\n\t\t};\n\t};\n\tconst deleteBreakpoint = ( ind ) => {\n\t\treturn () => {\n\t\t\tconst { breakpoints, categories, customNames } = state;\n\n\t\t\t// Remove the elements at the specified index:\n\t\t\tbreakpoints.splice( ind, 1 );\n\t\t\tcategories.splice( ind, 1 );\n\t\t\tcustomNames.splice( ind, 1 );\n\t\t\tconst configHist = { ...state.configHist };\n\t\t\tconfigHist.layout.shapes = makeShapes( breakpoints );\n\t\t\tsetState({\n\t\t\t\t...state,\n\t\t\t\tconfigHist,\n\t\t\t\tcategories,\n\t\t\t\tcustomNames,\n\t\t\t\tbreakpoints\n\t\t\t});\n\t\t};\n\t};\n\tconst makeTextInputs = () => {\n\t\tconst inputs = [];\n\t\tconst breakpoints = state.breakpoints;\n\t\tconst disableButton = breakpoints.length === 1;\n\t\tinputs.push( <Row key=\"div-0\">\n\t\t\t<Col md={7}>\n\t\t\t\t<TeX\n\t\t\t\t\traw=\"x < \"\n\t\t\t\t/><NumberInput\n\t\t\t\t\tinline\n\t\t\t\t\tonBlur={changeFactory( 0 )}\n\t\t\t\t\tdefaultValue={breakpoints[0]}\n\t\t\t\t\tstep=\"any\"\n\t\t\t\t/>\n\t\t\t</Col>\n\t\t\t<Col md={4}>\n\t\t\t\t<TextInput\n\t\t\t\t\tkey={0}\n\t\t\t\t\tlegend={`${props.t('label')} 1`}\n\t\t\t\t\tdefaultValue={state.categories[ 0 ]}\n\t\t\t\t\tonChange={categoryChangeFactory( 0 )}\n\t\t\t\t\tstyle={{ width: 200 }}\n\t\t\t\t/>\n\t\t\t</Col>\n\t\t\t<Col md={1}></Col>\n\t\t</Row> );\n\t\tif ( breakpoints.length > 1 ) {\n\t\t\tfor ( let i = 0; i < breakpoints.length - 1; i++ ) {\n\t\t\t\tconst changeFn = categoryChangeFactory( i+1 );\n\t\t\t\tinputs.push( <Row key={`div-${i+1}`}>\n\t\t\t\t\t<Col md={7}>\n\t\t\t\t\t\t<NumberInput\n\t\t\t\t\t\t\tinline\n\t\t\t\t\t\t\tonBlur={changeFactory( i )}\n\t\t\t\t\t\t\tdefaultValue={breakpoints[i]}\n\t\t\t\t\t\t\tstep=\"any\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<TeX raw=\"\\le x <\" />\n\t\t\t\t\t\t<NumberInput\n\t\t\t\t\t\t\tinline\n\t\t\t\t\t\t\tonBlur={changeFactory( i+1 )}\n\t\t\t\t\t\t\tdefaultValue={breakpoints[i+1]}\n\t\t\t\t\t\t\tstep=\"any\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col md={4}>\n\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\tkey={1+i}\n\t\t\t\t\t\t\tlegend={`${props.t('label')} ${i+2}`}\n\t\t\t\t\t\t\tdefaultValue={state.categories[ i+1 ]}\n\t\t\t\t\t\t\tonChange={changeFn}\n\t\t\t\t\t\t\tstyle={{ width: 200 }}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col md={1}>\n\t\t\t\t\t\t<ClearButton\n\t\t\t\t\t\t\tonClick={deleteBreakpoint(i)}\n\t\t\t\t\t\t\tstyle={{ marginTop: '5px' }}\n\t\t\t\t\t\t\tdisabled={disableButton}\n\t\t\t\t\t\t\ttooltipPlacement=\"right\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row> );\n\t\t\t}\n\t\t}\n\t\tconst len = breakpoints.length;\n\t\tinputs.push( <Row key={`div-${len}`}>\n\t\t\t<Col md={7}>\n\t\t\t\t<TeX raw=\"x \\ge\" />\n\t\t\t\t<NumberInput\n\t\t\t\t\tinline\n\t\t\t\t\tonChange={changeFactory( len-1 )}\n\t\t\t\t\tdefaultValue={breakpoints[ len-1 ]}\n\t\t\t\t\tstep=\"any\"\n\t\t\t\t/>\n\t\t\t</Col>\n\t\t\t<Col md={4}>\n\t\t\t\t<TextInput\n\t\t\t\t\tlegend={`Label ${len+1}`}\n\t\t\t\t\tdefaultValue={state.categories[ len ]}\n\t\t\t\t\tonChange={categoryChangeFactory( len )}\n\t\t\t\t\tkey={len}\n\t\t\t\t\tstyle={{ width: 200 }}\n\t\t\t\t/>\n\t\t\t</Col>\n\t\t\t<Col md={1}>\n\t\t\t\t<ClearButton\n\t\t\t\t\tonClick={deleteBreakpoint( len - 1 )}\n\t\t\t\t\tstyle={{ marginTop: '5px' }}\n\t\t\t\t\tdisabled={disableButton}\n\t\t\t\t/>\n\t\t\t</Col>\n\t\t</Row> );\n\t\treturn inputs;\n\t};\n\tconst onChangeHistLine = ( data ) => {\n\t\tconst keyUpdate = keys( data );\n\t\tconst matches = RE_SHAPE.exec( keyUpdate[ 0 ] );\n\t\tif ( matches ) {\n\t\t\tconst ind = matches[ 1 ];\n\t\t\tconst newBreakpoints = state.breakpoints.slice();\n\t\t\tnewBreakpoints[ ind ] = roundn( data[ keyUpdate[0] ], -snapDigits );\n\t\t\tnewBreakpoints.sort( ascending );\n\t\t\tconst configHist = copy( state.configHist );\n\t\t\tconfigHist.layout.shapes = makeShapes( newBreakpoints );\n\t\t\tsetState({\n\t\t\t\t...state,\n\t\t\t\tconfigHist,\n\t\t\t\tbreakpoints: newBreakpoints,\n\t\t\t\tcategories: createCategoryNames( newBreakpoints, state.customNames )\n\t\t\t});\n\t\t}\n\t};\n\tconst handleVariableChange = ( value ) => {\n\t\tdebug( 'Change variable to bin...' );\n\t\tconst histConfigSettings = {\n\t\t\tdata: props.data,\n\t\t\tvariable: value,\n\t\t\t...HISTOGRAM_SETTINGS\n\t\t};\n\t\tconst configHist = generateHistogramConfig( histConfigSettings );\n\t\tconfigHist.layout.yaxis = {\n\t\t\trange: [\n\t\t\t\tmin( configHist.data[ 1 ].y ),\n\t\t\t\tmax( configHist.data[ 1 ].y )\n\t\t\t],\n\t\t\tfixedrange: true\n\t\t};\n\t\tconfigHist.layout.xaxis = {\n\t\t\tfixedrange: true\n\t\t};\n\t\tlet values = props.data[ value ];\n\t\tvalues = values.filter( x => isNumber( x ) && !isnan( x ) );\n\t\tconst breakpoints = [ roundn( mean( values ), -snapDigits ) ];\n\t\tconfigHist.layout.shapes = makeShapes( breakpoints );\n\t\tconst customNames = [ false, false ];\n\t\tsetState({\n\t\t\tvariable: value,\n\t\t\tconfigHist,\n\t\t\tbreakpoints,\n\t\t\tcustomNames,\n\t\t\tcategories: createCategoryNames( breakpoints, customNames )\n\t\t});\n\t};\n\tconst addBreakpoint = () => {\n\t\tconst newBreakpoints = state.breakpoints.slice();\n\t\tlet values = props.data[ state.variable ];\n\t\tvalues = values.filter( x => isNumber( x ) && !isnan( x ) );\n\t\tconst avg = runif( 0.8, 1.2 ) * mean( values );\n\t\tnewBreakpoints.push( roundn( avg, -snapDigits ) );\n\t\tnewBreakpoints.sort( ascending );\n\n\t\tconst configHist = copy( state.configHist );\n\t\tconfigHist.layout.shapes = makeShapes( newBreakpoints );\n\n\t\tconst customNames = state.customNames;\n\t\tcustomNames.push( false );\n\n\t\tconst newState = {\n\t\t\t...state,\n\t\t\tbreakpoints: newBreakpoints,\n\t\t\tconfigHist,\n\t\t\tcategories: createCategoryNames( newBreakpoints, customNames )\n\t\t};\n\t\tsetState( newState );\n\t};\n\tconst renderBody = () => {\n\t\tconst configHist = state.configHist;\n\t\tconst select = <SelectInput\n\t\t\tlegend={props.t('variable-to-bin')}\n\t\t\tdefaultValue={state.variable}\n\t\t\toptions={props.quantitative}\n\t\t\tonChange={handleVariableChange}\n\t\t\tstyle={{ maxWidth: 400 }}\n\t\t/>;\n\t\tif ( !configHist ) {\n\t\t\treturn (\n\t\t\t\t<Fragment>\n\t\t\t\t\t{select}\n\t\t\t\t\t<Alert variant=\"info\">{props.t('select-variable-bin')}</Alert>\n\t\t\t\t</Fragment>\n\t\t\t);\n\t\t}\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t{select}\n\t\t\t\t<Button className=\"insert-line-button\" onClick={addBreakpoint}>\n\t\t\t\t\t{props.t('insert-break-line')}\n\t\t\t\t</Button>\n\t\t\t\t<p>\n\t\t\t\t\t{props.t('drag-red-bars')}\n\t\t\t\t\t(<NumberInput legend={props.t('digits-after-decimal-snap')} min={0} max={9} inline defaultValue={snapDigits} onChange={setSnapDigits} />)\n\t\t\t\t</p>\n\t\t\t\t<div style={{ height: 250 }}>\n\t\t\t\t\t<Plotly\n\t\t\t\t\t\tdata={configHist.data}\n\t\t\t\t\t\tlayout={configHist.layout}\n\t\t\t\t\t\teditable\n\t\t\t\t\t\tfit\n\t\t\t\t\t\tremoveButtons\n\t\t\t\t\t\tlegendButtons={false}\n\t\t\t\t\t\tonRelayout={onChangeHistLine}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<Card className=\"mb-2\" >\n\t\t\t\t\t\t<Card.Header>{props.t('choose-category-labels')}:</Card.Header>\n\t\t\t\t\t\t<Card.Body>\n\t\t\t\t\t\t\t{makeTextInputs()}\n\t\t\t\t\t\t</Card.Body>\n\t\t\t\t\t</Card>\n\t\t\t\t</div>\n\t\t\t\t<FormGroup style={{ width: 'fit-content' }} >\n\t\t\t\t\t<FormLabel>{props.t('name-new-variable')}:</FormLabel>\n\t\t\t\t\t<FormControl\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tplaceholder={props.t('select-name')}\n\t\t\t\t\t\tonChange={handleNameChange}\n\t\t\t\t\t\tonKeyPress={handleKeyPress}\n\t\t\t\t\t/>\n\t\t\t\t\t<FormText>\n\t\t\t\t\t\t{props.t('new-variable-appended')}\n\t\t\t\t\t</FormText>\n\t\t\t\t</FormGroup>\n\t\t\t</Fragment>\n\t\t);\n\t};\n\treturn (\n\t\t<Draggable cancel=\".card-body\" onDragStart={stopPropagation} style={{ zIndex: 1006 }} >\n\t\t\t<FocusTrap focusTrapOptions={FOCUS_TRAP_OPTIONS} >\n\t\t\t\t<Panel\n\t\t\t\t\tonHide={props.onHide}\n\t\t\t\t\tshow={props.show}\n\t\t\t\t\theader={props.t('bin-transformer-header')}\n\t\t\t\t\tfooter={<Button onClick={makeNewVar} disabled={invalidName} >\n\t\t\t\t\t\t{props.t('create-new-variable')}\n\t\t\t\t\t</Button>}\n\t\t\t\t\tbodyStyle={{\n\t\t\t\t\t\tmaxHeight: 'calc(100vh - 200px)',\n\t\t\t\t\t\toverflowY: 'auto',\n\t\t\t\t\t\tposition: 'relative'\n\t\t\t\t\t}}\n\t\t\t\t\tbodyClassName=\"d-grid gap-3\"\n\t\t\t\t\trole=\"button\" tabIndex={0}\n\t\t\t\t>\n\t\t\t\t\t{renderBody()}\n\t\t\t\t</Panel>\n\t\t\t</FocusTrap>\n\t\t</Draggable>\n\t);\n};\n\n\n// PROPERTIES //\n\nBinningTransformer.defaultProps = {\n\tlogAction() {},\n\tonGenerate() {}\n};\n\nBinningTransformer.propTypes = {\n\tshow: PropTypes.bool.isRequired,\n\tdata: PropTypes.object.isRequired,\n\tquantitative: PropTypes.array.isRequired,\n\tlogAction: PropTypes.func,\n\tonHide: PropTypes.func.isRequired,\n\tonGenerate: PropTypes.func\n};\n\n\n// EXPORTS //\n\nexport default BinningTransformer;\n","// MODULES //\n\nimport React, { Component, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { Trans } from 'react-i18next';\nimport FocusTrap from 'focus-trap-react';\nimport Table from 'react-bootstrap/Table';\nimport FormControl from 'react-bootstrap/FormControl';\nimport FormLabel from 'react-bootstrap/FormLabel';\nimport FormGroup from 'react-bootstrap/FormGroup';\nimport FormText from 'react-bootstrap/FormText';\nimport Card from 'react-bootstrap/Card';\nimport Button from 'react-bootstrap/Button';\nimport ButtonGroup from 'react-bootstrap/ButtonGroup';\nimport ButtonToolbar from 'react-bootstrap/ButtonToolbar';\nimport Dropdown from 'react-bootstrap/Dropdown';\nimport ToggleButtonGroup from 'react-bootstrap/ToggleButtonGroup';\nimport ToggleButton from 'react-bootstrap/ToggleButton';\nimport Draggable from '@isle-project/components/draggable';\nimport Panel from '@isle-project/components/panel';\nimport Collapse from '@isle-project/components/collapse';\nimport TextArea from '@isle-project/components/input/text-area';\nimport Tooltip from '@isle-project/components/tooltip';\nimport incrspace from '@stdlib/array/incrspace';\nimport contains from '@stdlib/assert/contains';\nimport replace from '@stdlib/string/replace';\nimport { DATA_EXPLORER_VARIABLE_TRANSFORMER } from '@isle-project/constants/actions.js';\nimport valuesFromFormula from './values_from_formula.js';\nimport FUNCTION_KEYS from './function_keys.json';\nimport './formula_transformer.css';\n\n\n// VARIABLES //\n\nconst RE_NAME_RANGE = /datum\\.([^0-9]+)(\\d+):datum\\.\\1(\\d+)/;\nconst DIGITS = incrspace( 0, 10, 1 );\nconst RE_LAST_EXPRESSION = /(?:^|\\n)([^\\n]*)$/;\nconst RE_DIGITS_START = /^[0-9]/;\nconst FOCUS_TRAP_OPTIONS = {\n\tclickOutsideDeactivates: true\n};\n\n\n// FUNCTIONS //\n\nconst CustomMenu = React.forwardRef(\n\t({ children, style, className, 'aria-labelledby': labeledBy }, ref) => {\n\t\tconst [value, setValue] = useState( '' );\n\t\treturn (\n\t\t\t<div\n\t\t\t\tref={ref}\n\t\t\t\tstyle={style}\n\t\t\t\tclassName={className}\n\t\t\t\taria-labelledby={labeledBy}\n\t\t\t>\n\t\t\t<FormControl\n\t\t\t\tclassName=\"mx-3 my-2 w-auto\"\n\t\t\t\tplaceholder=\"Type to filter...\"\n\t\t\t\tonChange={e => setValue(e.target.value)}\n\t\t\t\tvalue={value}\n\t\t\t/>\n\t\t\t\t<ul className=\"list-unstyled\">\n\t\t\t\t\t{React.Children.toArray(children).filter(\n\t\t\t\t\t\tchild =>\n\t\t\t\t\t\t!value || child.props.children.toLowerCase().startsWith(value),\n\t\t\t\t\t)}\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t);\n\t},\n);\n\n\n// MAIN //\n\nclass FormulaTransformer extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tthis.state = {\n\t\t\tcode: props.defaultCode,\n\t\t\tselection: null,\n\t\t\tname: '',\n\t\t\tshowGuide: false,\n\t\t\tasCategorical: false\n\t\t};\n\t}\n\n\thandleGenerate = () => {\n\t\tlet { code, name } = this.state;\n\t\tif ( RE_NAME_RANGE.test( code ) ) {\n\t\t\tconst match = RE_NAME_RANGE.exec( code );\n\t\t\tconst prefix = match[ 1 ];\n\t\t\tconst start = parseInt( match[ 2 ], 10 );\n\t\t\tconst end = parseInt( match[ 3 ], 10 );\n\t\t\tlet replacement = '';\n\t\t\tfor ( let i = start; i <= end; i++ ) {\n\t\t\t\treplacement += `datum.${prefix}${i}`; // eslint-disable-line i18next/no-literal-string\n\t\t\t\treplacement += i < end ? ',' : '';\n\t\t\t}\n\t\t\tcode = replace( code, match[ 0 ], replacement );\n\t\t}\n\t\tif ( !contains( code, 'return ' ) ) {\n\t\t\tcode = replace( code, RE_LAST_EXPRESSION, '\\nreturn $1' );\n\t\t}\n\t\tlet values;\n\t\ttry {\n\t\t\tvalues = valuesFromFormula( code, this.props.data );\n\t\t\tthis.props.logAction( DATA_EXPLORER_VARIABLE_TRANSFORMER, {\n\t\t\t\tcode, name\n\t\t\t});\n\t\t\tif ( this.state.asCategorical ) {\n\t\t\t\tvalues = values.map( x => String( x ) );\n\t\t\t}\n\t\t\tthis.props.onGenerate( name, values );\n\t\t} catch ( err ) {\n\t\t\treturn this.props.session.addNotification({\n\t\t\t\ttitle: 'Errored',\n\t\t\t\tmessage: 'Encountered the following error: '+err.message,\n\t\t\t\tlevel: 'error',\n\t\t\t\tposition: 'tr'\n\t\t\t});\n\t\t}\n\t\tthis.props.onHide();\n\t};\n\n\thandleNameChange = ( event ) => {\n\t\tthis.setState({\n\t\t\tname: event.target.value\n\t\t});\n\t};\n\n\thandleCodeChange = ( value ) => {\n\t\tthis.setState({\n\t\t\tcode: value\n\t\t});\n\t};\n\n\thandleKeyPress = ( event ) => {\n\t\tif ( event.charCode === 13 && this.state.name.length >= 2 ) {\n\t\t\tthis.handleGenerate();\n\t\t}\n\t};\n\n\tinsertVarFactory = ( name ) => {\n\t\treturn () => {\n\t\t\tlet newCode = this.state.code.substring( 0, this.state.selection );\n\t\t\tlet replacement = 'datum';\n\t\t\tconst literal =\n\t\t\t\t!contains( name, ' ' ) &&\n\t\t\t\t!contains( name, '.' ) &&\n\t\t\t\t!RE_DIGITS_START.test( name );\n\t\t\treplacement += literal ? `.${name}` : `['${name}']`;\n\t\t\tnewCode += replacement;\n\t\t\tnewCode += this.state.code.substring( this.state.selection );\n\t\t\tthis.setState({\n\t\t\t\tcode: newCode,\n\t\t\t\tselection: this.state.selection + replacement.length\n\t\t\t});\n\t\t};\n\t};\n\n\tinsertLiteralFactory = ( operator ) => {\n\t\treturn () => {\n\t\t\tlet newCode = this.state.code.substring( 0, this.state.selection );\n\t\t\tconst replacement = operator;\n\t\t\tnewCode += replacement;\n\t\t\tnewCode += this.state.code.substring( this.state.selection );\n\t\t\tthis.setState({\n\t\t\t\tcode: newCode,\n\t\t\t\tselection: this.state.selection + replacement.length\n\t\t\t});\n\t\t};\n\t};\n\n\tinsertFuncFactory = ( funcName ) => {\n\t\treturn () => {\n\t\t\tlet newCode = this.state.code.substring( 0, this.state.selection );\n\t\t\tconst replacement = ' '+funcName+'()';\n\t\t\tnewCode += replacement;\n\t\t\tnewCode += this.state.code.substring( this.state.selection );\n\t\t\tthis.setState({\n\t\t\t\tcode: newCode,\n\t\t\t\tselection: this.state.selection + replacement.length - 1\n\t\t\t});\n\t\t};\n\t};\n\n\trender() {\n\t\tconst { t } = this.props;\n\t\tconst continuousItems = this.props.quantitative.map( ( v, i ) => {\n\t\t\treturn <Dropdown.Item key={i} onClick={this.insertVarFactory( v )} eventKey={i}>{v}</Dropdown.Item>;\n\t\t});\n\t\treturn (\n\t\t\t<Draggable cancel=\".card-body\" onDragStart={( event ) => {\n\t\t\t\tevent.stopPropagation();\n\t\t\t}} style={{ zIndex: 1006 }} >\n\t\t\t\t<FocusTrap focusTrapOptions={FOCUS_TRAP_OPTIONS} >\n\t\t\t\t\t<Panel\n\t\t\t\t\t\tshow={this.props.show}\n\t\t\t\t\t\tonHide={this.props.onHide}\n\t\t\t\t\t\theader={this.props.t('formula-transformer-header')}\n\t\t\t\t\t\tfooter={<Button onClick={this.handleGenerate} disabled={this.state.name.length < 1} >{this.props.t('create-new-variable')}</Button>}\n\t\t\t\t\t\trole=\"button\" tabIndex={0}\n\t\t\t\t\t\tbodyStyle={{\n\t\t\t\t\t\t\tmaxHeight: 'calc(100vh - 200px)',\n\t\t\t\t\t\t\toverflowY: 'auto',\n\t\t\t\t\t\t\tposition: 'relative'\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"formula-transformer-body\">\n\t\t\t\t\t\t\t<Collapse headerClassName=\"title\" header={this.state.showGuide ? t('hide-example-guide') : t('show-example-guide')} visible={this.state.showGuide} onClick={() => this.setState({ showGuide: !this.state.showGuide })}>\n\t\t\t\t\t\t\t\t<p>{t('formula-transformer-example-intro')}</p>\n\t\t\t\t\t\t\t\t<Table condensed >\n\t\t\t\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t<th>{t('type')}</th>\n\t\t\t\t\t\t\t\t\t\t\t<th>{t('example')}</th>\n\t\t\t\t\t\t\t\t\t\t\t<th>{t('description')}</th>\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t<td>{t('interaction')}:</td>\n\t\t\t\t\t\t\t\t\t\t\t<td><code>datum.{this.props.quantitative[0]} * datum.{this.props.quantitative[1]}</code></td>\n\t\t\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t\t\t<Trans i18nKey=\"example-description-multiply\" ns=\"DataExplorer\" >\n\t\t\t\t\t\t\t\t\t\t\t\t\tMultiply values of variables <code>{{ first: this.props.quantitative[0] }}</code> and <code>{{ second: this.props.quantitative[1] }}</code>\n\t\t\t\t\t\t\t\t\t\t\t\t</Trans>\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t<td>{t('transformation')}:</td>\n\t\t\t\t\t\t\t\t\t\t\t<td><code>exp( datum.{this.props.quantitative[0]} )</code></td>\n\t\t\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t\t\t<Trans i18nKey=\"example-description-exponential\" ns=\"DataExplorer\" >\n\t\t\t\t\t\t\t\t\t\t\t\t\tNatural exponential function of variable <code>{{ variable: this.props.quantitative[0] }}</code>\n\t\t\t\t\t\t\t\t\t\t\t\t</Trans>\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t<td>{t('function')}:</td>\n\t\t\t\t\t\t\t\t\t\t\t<td><code>9/5 * {this.props.quantitative[0]} + 32</code></td>\n\t\t\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t\t\t<Trans i18nKey=\"example-description-calculation\" ns=\"DataExplorer\" >\n\t\t\t\t\t\t\t\t\t\t\t\t\tMultiply values of <code>{{ variable: this.props.quantitative[0] }}</code> by <code>9/5</code> and add <code>32</code>\n\t\t\t\t\t\t\t\t\t\t\t\t</Trans>\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t\t</Table>\n\t\t\t\t\t\t\t</Collapse>\n\t\t\t\t\t\t\t<hr />\n\t\t\t\t\t\t\t<div className=\"mb-2\" >\n\t\t\t\t\t\t\t\t<ButtonToolbar style={{ marginBottom: 5 }} >\n\t\t\t\t\t\t\t\t\t<Dropdown className=\"mr-2\">\n\t\t\t\t\t\t\t\t\t\t<Dropdown.Toggle variant=\"light\" id=\"dropdown-custom-components\">\n\t\t\t\t\t\t\t\t\t\t\t{t('quantitative')}\n\t\t\t\t\t\t\t\t\t\t</Dropdown.Toggle>\n\t\t\t\t\t\t\t\t\t\t<Dropdown.Menu variant=\"light\" as={CustomMenu} id=\"bg-nested-dropdown\">\n\t\t\t\t\t\t\t\t\t\t\t{continuousItems}\n\t\t\t\t\t\t\t\t\t\t</Dropdown.Menu>\n\t\t\t\t\t\t\t\t\t</Dropdown>\n\t\t\t\t\t\t\t\t\t<Dropdown className=\"mr-2\">\n\t\t\t\t\t\t\t\t\t\t<Dropdown.Toggle variant=\"light\" id=\"dropdown-custom-components\">\n\t\t\t\t\t\t\t\t\t\t\t{t('categorical')}\n\t\t\t\t\t\t\t\t\t\t</Dropdown.Toggle>\n\t\t\t\t\t\t\t\t\t\t<Dropdown.Menu variant=\"light\" as={CustomMenu} id=\"bg-nested-dropdown\">\n\t\t\t\t\t\t\t\t\t\t\t{this.props.categorical.map( ( v, i ) => {\n\t\t\t\t\t\t\t\t\t\t\t\treturn <Dropdown.Item key={i} onClick={this.insertVarFactory( v )} eventKey={i}>{v}</Dropdown.Item>;\n\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t</Dropdown.Menu>\n\t\t\t\t\t\t\t\t\t</Dropdown>\n\t\t\t\t\t\t\t\t</ButtonToolbar>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<Card className=\"mb-2\" >\n\t\t\t\t\t\t\t\t<Card.Body>\n\t\t\t\t\t\t\t\t\t<ButtonToolbar style={{ marginBottom: 5 }} >\n\t\t\t\t\t\t\t\t\t\t<ButtonGroup size=\"sm\" className=\"mr-2\" >\n\t\t\t\t\t\t\t\t\t\t\t<Tooltip placement=\"top\" tooltip={t('smaller-than')} ><Button variant=\"light\" onClick={this.insertLiteralFactory(' < ')} >{'<'}</Button></Tooltip>\n\t\t\t\t\t\t\t\t\t\t\t<Tooltip placement=\"top\" tooltip={t('greater-than')} ><Button variant=\"light\" onClick={this.insertLiteralFactory(' > ')} >{'>'}</Button></Tooltip>\n\t\t\t\t\t\t\t\t\t\t\t<Tooltip placement=\"top\" tooltip={t('smaller-or-equal')} ><Button variant=\"light\" onClick={this.insertLiteralFactory(' <= ')} >{'<='}</Button></Tooltip>\n\t\t\t\t\t\t\t\t\t\t\t<Tooltip placement=\"top\" tooltip={t('greater-or-equal')} ><Button variant=\"light\" onClick={this.insertLiteralFactory(' >= ')} >{'>='}</Button></Tooltip>\n\t\t\t\t\t\t\t\t\t\t</ButtonGroup>\n\t\t\t\t\t\t\t\t\t\t<ButtonGroup size=\"sm\" className=\"mr-2\" >\n\t\t\t\t\t\t\t\t\t\t\t<Tooltip placement=\"top\" tooltip={t('open-parenthesis')} ><Button variant=\"light\" onClick={this.insertLiteralFactory(' ( ')} >(</Button></Tooltip>\n\t\t\t\t\t\t\t\t\t\t\t<Tooltip placement=\"top\" tooltip={t('closing-parenthesis')} ><Button variant=\"light\" onClick={this.insertLiteralFactory(' ) ')} >)</Button></Tooltip>\n\t\t\t\t\t\t\t\t\t\t</ButtonGroup>\n\t\t\t\t\t\t\t\t\t\t<ButtonGroup size=\"sm\" className=\"mr-2\" >\n\t\t\t\t\t\t\t\t\t\t\t<Tooltip placement=\"top\" tooltip={t('addition')}><Button variant=\"light\" onClick={this.insertLiteralFactory(' + ')} >+</Button></Tooltip>\n\t\t\t\t\t\t\t\t\t\t\t<Tooltip placement=\"top\" tooltip={t('subtraction')}><Button variant=\"light\" onClick={this.insertLiteralFactory(' - ')} >-</Button></Tooltip>\n\t\t\t\t\t\t\t\t\t\t\t<Tooltip placement=\"top\" tooltip={t('multiplication')}><Button variant=\"light\" onClick={this.insertLiteralFactory(' * ')} >*</Button></Tooltip>\n\t\t\t\t\t\t\t\t\t\t\t<Tooltip placement=\"top\" tooltip={t('division')}><Button variant=\"light\" onClick={this.insertLiteralFactory(' / ')} >/</Button></Tooltip>\n\t\t\t\t\t\t\t\t\t\t</ButtonGroup>\n\t\t\t\t\t\t\t\t\t\t<ButtonGroup size=\"sm\" className=\"mr-2\" >\n\t\t\t\t\t\t\t\t\t\t\t<Tooltip placement=\"top\" tooltip={t('boolean-and')}><Button variant=\"light\" onClick={this.insertLiteralFactory(' && ')} >{t('and')}</Button></Tooltip>\n\t\t\t\t\t\t\t\t\t\t\t<Tooltip placement=\"top\" tooltip={t('boolean-or')}><Button variant=\"light\" onClick={this.insertLiteralFactory(' || ')} >{t('or')}</Button></Tooltip>\n\t\t\t\t\t\t\t\t\t\t\t<Tooltip placement=\"top\" tooltip={t('boolean-not')}><Button variant=\"light\" onClick={this.insertLiteralFactory(' !')} >{t('not')}</Button></Tooltip>\n\t\t\t\t\t\t\t\t\t\t</ButtonGroup>\n\t\t\t\t\t\t\t\t\t</ButtonToolbar>\n\t\t\t\t\t\t\t\t\t<ButtonToolbar style={{ marginBottom: 5 }} >\n\t\t\t\t\t\t\t\t\t\t<ButtonGroup size=\"sm\" className=\"mr-2\" >\n\t\t\t\t\t\t\t\t\t\t\t{DIGITS.map( ( d, i ) => {\n\t\t\t\t\t\t\t\t\t\t\t\treturn <Button key={i} variant=\"light\" onClick={this.insertLiteralFactory( `${d}`)} >{d}</Button>;\n\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t<Button variant=\"light\" onClick={this.insertLiteralFactory('.')} >.</Button>\n\t\t\t\t\t\t\t\t\t\t</ButtonGroup>\n\t\t\t\t\t\t\t\t\t</ButtonToolbar>\n\t\t\t\t\t\t\t\t\t<ButtonToolbar>\n\t\t\t\t\t\t\t\t\t\t<ButtonGroup size=\"sm\" className=\"me-2\" >\n\t\t\t\t\t\t\t\t\t\t\t{FUNCTION_KEYS.map( ( v, i ) => {\n\t\t\t\t\t\t\t\t\t\t\t\treturn ( <Tooltip key={i} placement=\"bottom\" tooltip={t(v+'-tooltip')} >\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Button variant=\"light\" onClick={this.insertFuncFactory( v )} eventKey={i}>{v}</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t</Tooltip> );\n\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t</ButtonGroup>\n\t\t\t\t\t\t\t\t\t</ButtonToolbar>\n\t\t\t\t\t\t\t\t</Card.Body>\n\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t\t<Card className=\"mb-2\" >\n\t\t\t\t\t\t\t\t<Card.Body>\n\t\t\t\t\t\t\t\t\t<TextArea\n\t\t\t\t\t\t\t\t\t\tref={div => { this.textarea = div; }}\n\t\t\t\t\t\t\t\t\t\tlegend={`${t('expression')}:`}\n\t\t\t\t\t\t\t\t\t\tplaceholder={t('enter-formula')}\n\t\t\t\t\t\t\t\t\t\tvalue={this.state.code}\n\t\t\t\t\t\t\t\t\t\tonChange={this.handleCodeChange}\n\t\t\t\t\t\t\t\t\t\tonBlur={( event ) => {\n\t\t\t\t\t\t\t\t\t\t\tconst selectionStart = event.target.selectionStart;\n\t\t\t\t\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\t\t\t\t\tselection: selectionStart\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\trows={3}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Card.Body>\n\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t\t<FormGroup style={{ margin: 8 }}>\n\t\t\t\t\t\t\t\t<FormLabel>{t('name-new-variable')}:</FormLabel>\n\t\t\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tplaceholder={t('select-name')}\n\t\t\t\t\t\t\t\t\tonChange={this.handleNameChange}\n\t\t\t\t\t\t\t\t\tonKeyPress={this.handleKeyPress}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<FormText>\n\t\t\t\t\t\t\t\t\t{t('new-variable-appended')}\n\t\t\t\t\t\t\t\t</FormText>\n\t\t\t\t\t\t\t</FormGroup>\n\t\t\t\t\t\t\t<ToggleButtonGroup\n\t\t\t\t\t\t\t\tname=\"options\"\n\t\t\t\t\t\t\t\tonChange={( value ) => {\n\t\t\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\t\t\tasCategorical: value\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\tvalue={this.state.asCategorical}\n\t\t\t\t\t\t\t\tstyle={{ padding: 6 }}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<ToggleButton\n\t\t\t\t\t\t\t\t\tid=\"data-explorer-transform-toggle-quantitative\"\n\t\t\t\t\t\t\t\t\tvariant=\"outline-secondary\"\n\t\t\t\t\t\t\t\t\tvalue={false}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{t('treat-as-quantitative')}\n\t\t\t\t\t\t\t\t</ToggleButton>\n\t\t\t\t\t\t\t\t<ToggleButton\n\t\t\t\t\t\t\t\t\tid=\"data-explorer-transform-toggle-categorical\"\n\t\t\t\t\t\t\t\t\tvariant=\"outline-secondary\"\n\t\t\t\t\t\t\t\t\tvalue={true}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{t('treat-as-categorical')}\n\t\t\t\t\t\t\t\t</ToggleButton>\n\t\t\t\t\t\t\t</ToggleButtonGroup>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Panel>\n\t\t\t\t</FocusTrap>\n\t\t\t</Draggable>\n\t\t);\n\t}\n}\n\n\n// PROPERTIES //\n\nFormulaTransformer.defaultProps = {\n\tlogAction() {},\n\tonGenerate() {},\n\tdefaultCode: '',\n\tsession: {}\n};\n\nFormulaTransformer.propTypes = {\n\tshow: PropTypes.bool.isRequired,\n\tcategorical: PropTypes.array.isRequired,\n\tquantitative: PropTypes.array.isRequired,\n\tdata: PropTypes.object.isRequired,\n\tdefaultCode: PropTypes.string,\n\tlogAction: PropTypes.func,\n\tonGenerate: PropTypes.func,\n\tonHide: PropTypes.func.isRequired,\n\tsession: PropTypes.object\n};\n\n\n// EXPORTS //\n\nexport default FormulaTransformer;\n","// MODULES //\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport logger from 'debug';\nimport FocusTrap from 'focus-trap-react';\nimport Draggable from '@isle-project/components/draggable';\nimport Panel from '@isle-project/components/panel';\nimport Button from 'react-bootstrap/Button';\nimport Col from 'react-bootstrap/Col';\nimport Row from 'react-bootstrap/Row';\nimport FormControl from 'react-bootstrap/FormControl';\nimport FormLabel from 'react-bootstrap/FormLabel';\nimport FormGroup from 'react-bootstrap/FormGroup';\nimport FormText from 'react-bootstrap/FormText';\nimport Table from '@isle-project/components/table';\nimport objectKeys from '@stdlib/utils/keys';\nimport countBy from '@stdlib/utils/count-by';\nimport identity from '@stdlib/utils/identity-function';\nimport copy from '@stdlib/utils/copy';\nimport replace from '@stdlib/string/replace';\nimport isDigitString from '@stdlib/assert/is-digit-string';\nimport SelectInput from '@isle-project/components/input/select';\nimport CheckboxInput from '@isle-project/components/input/checkbox';\nimport Tooltip from '@isle-project/components/tooltip';\nimport { DATA_EXPLORER_CAT_TRANSFORMER } from '@isle-project/constants/actions.js';\nimport recodeCategorical from './recode_categorical';\nimport extractUsedCategories from '@isle-project/utils/extract-used-categories';\nimport './categorical_transformer.css';\n\n\n// VARIABLES //\n\nconst debug = logger( 'isle:data-explorer:variable-transformer' );\nconst FOCUS_TRAP_OPTIONS = {\n\tclickOutsideDeactivates: true\n};\n\n\n// FUNCTIONS //\n\n/**\n * Escapes dots in a string.\n *\n * @private\n * @param {string} str - string to escape\n * @returns {string} escaped string\n */\nfunction escapeDots( str ) {\n\tif ( !str ) {\n\t\treturn str;\n\t}\n\treturn replace( str, '.', '[dot]' );\n}\n\n/**\n * Checks whether all values of the supplied object are digit strings.\n *\n * @private\n * @param {Object} nameMappings - object of name to digit mappings to check\n * @returns {boolean} boolean indicating whether all values are digit strings\n */\nfunction checkNumericLabels( nameMappings ) {\n\tconst keys = objectKeys( nameMappings );\n\tlet allNumeric = true;\n\tfor ( let i = 0; i < keys.length; i++ ) {\n\t\tif ( !isDigitString( nameMappings[ keys[ i ] ] ) ) {\n\t\t\tallNumeric = false;\n\t\t}\n\t}\n\treturn allNumeric;\n}\n\n\n// MAIN //\n\nclass CategoricalTransformer extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tconst firstVar = props.categorical[ 0 ];\n\t\tconst firstValues = props.data[ firstVar ];\n\t\tconst firstFreqs = countBy( firstValues, identity );\n\t\tconst keys = extractUsedCategories( firstFreqs, firstVar );\n\t\tconst nameMappings = {};\n\t\tfor ( let i = 0; i < keys.length; i++ ) {\n\t\t\tnameMappings[ escapeDots( keys[ i ] ) ] = keys[ i ];\n\t\t}\n\t\tthis.state = {\n\t\t\tgeneratedName: '',\n\t\t\tfirstVar,\n\t\t\tfirstFreqs,\n\t\t\tnameMappings,\n\t\t\tsecondVar: null,\n\t\t\tsecondFreqs: null,\n\t\t\tcastNumeric: false,\n\t\t\tonlyNumbers: false\n\t\t};\n\t}\n\n\thandleFirstVariableChange = ( variable ) => {\n\t\tconst nameMappings = {};\n\t\tlet firstFreqs;\n\t\tif ( !this.state.secondVar ) {\n\t\t\tconst firstValues = this.props.data[ variable ];\n\t\t\tfirstFreqs = countBy( firstValues, identity );\n\t\t\tconst keys = extractUsedCategories( firstFreqs, variable );\n\t\t\tfor ( let i = 0; i < keys.length; i++ ) {\n\t\t\t\tnameMappings[ escapeDots( keys[ i ] ) ] = keys[ i ];\n\t\t\t}\n\t\t} else {\n\t\t\tconst firstVar = variable;\n\t\t\tconst secondVar = this.state.secondVar;\n\t\t\tconst firstValues = this.props.data[ firstVar ];\n\t\t\tfirstFreqs = countBy( firstValues, identity );\n\t\t\tconst firstKeys = extractUsedCategories( firstFreqs, firstVar );\n\t\t\tconst secondKeys = extractUsedCategories( this.state.secondFreqs, secondVar );\n\t\t\tfor ( let i = 0; i < firstKeys.length; i++ ) {\n\t\t\t\tfor ( let j = 0; j < secondKeys.length; j++ ) {\n\t\t\t\t\tconst label = firstKeys[ i ] + '-' + secondKeys[ j ];\n\t\t\t\t\tnameMappings[ escapeDots( label ) ] = label;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tconst onlyNumbers = checkNumericLabels( nameMappings );\n\t\tthis.setState({\n\t\t\tfirstVar: variable,\n\t\t\tfirstFreqs,\n\t\t\tnameMappings,\n\t\t\tonlyNumbers\n\t\t});\n\t};\n\n\thandleSecondVariableChange = ( secondVar ) => {\n\t\tif ( !secondVar ) {\n\t\t\t// Case: Resetting the second variable...\n\t\t\tconst firstVar = this.state.firstVar;\n\t\t\tconst keys = extractUsedCategories( this.state.firstFreqs, firstVar );\n\t\t\tconst nameMappings = {};\n\t\t\tfor ( let i = 0; i < keys.length; i++ ) {\n\t\t\t\tnameMappings[ escapeDots( keys[ i ] ) ] = keys[ i ];\n\t\t\t}\n\t\t\treturn this.setState({\n\t\t\t\tsecondVar,\n\t\t\t\tnameMappings\n\t\t\t});\n\t\t}\n\t\t// Case: Have both a second and first variable...\n\t\tconst nameMappings = {};\n\t\tconst firstVar = this.state.firstVar;\n\t\tconst secondValues = this.props.data[ secondVar ];\n\t\tconst secondFreqs = countBy( secondValues, identity );\n\t\tconst firstKeys = extractUsedCategories( this.state.firstFreqs, firstVar );\n\t\tconst secondKeys = extractUsedCategories( secondFreqs, secondVar );\n\t\tfor ( let i = 0; i < firstKeys.length; i++ ) {\n\t\t\tfor ( let j = 0; j < secondKeys.length; j++ ) {\n\t\t\t\tconst label = firstKeys[ i ] + '-' + secondKeys[ j ];\n\t\t\t\tnameMappings[ escapeDots( label ) ] = label;\n\t\t\t}\n\t\t}\n\t\tconst onlyNumbers = checkNumericLabels( nameMappings );\n\t\tthis.setState({\n\t\t\tsecondVar,\n\t\t\tsecondFreqs,\n\t\t\tnameMappings,\n\t\t\tonlyNumbers\n\t\t});\n\t};\n\n\thandleKeyPress = ( event ) => {\n\t\tif ( event.charCode === 13 && this.state.generatedName.length >= 2 ) {\n\t\t\tthis.makeNewVar();\n\t\t}\n\t};\n\n\trenderTable() {\n\t\tif ( this.state.firstVar && this.state.secondVar ) {\n\t\t\treturn this.renderContingencyTable();\n\t\t}\n\t\tif ( this.state.firstVar || this.state.secondVar ) {\n\t\t\treturn this.renderFrequencyTable();\n\t\t}\n\t\treturn null;\n\t}\n\n\tchangeFreqFactory = ( oldLabel ) => {\n\t\treturn ( event ) => {\n\t\t\tconst nameMappings = copy( this.state.nameMappings );\n\t\t\tnameMappings[ escapeDots( oldLabel ) ] = event.target.value;\n\t\t\tconst onlyNumbers = checkNumericLabels( nameMappings );\n\t\t\tthis.setState({\n\t\t\t\tnameMappings,\n\t\t\t\tonlyNumbers\n\t\t\t});\n\t\t};\n\t};\n\n\tchangeContingencyFactory = ( rowLabel, colLabel ) => {\n\t\treturn ( event ) => {\n\t\t\tconst nameMappings = copy( this.state.nameMappings );\n\t\t\tnameMappings[ escapeDots( colLabel ) + '-' + escapeDots( rowLabel ) ] = event.target.value;\n\t\t\tthis.setState({\n\t\t\t\tnameMappings\n\t\t\t});\n\t\t};\n\t};\n\n\thandleGeneratedNameChange = ( event ) => {\n\t\tthis.setState({\n\t\t\tgeneratedName: event.target.value\n\t\t});\n\t};\n\n\tmakeNewVar = () => {\n\t\tdebug( 'Generating new categorical variable...' );\n\t\tconst { firstVar, secondVar, nameMappings, castNumeric } = this.state;\n\t\tconst newVar = recodeCategorical( firstVar, secondVar, nameMappings, this.props.data, castNumeric );\n\t\tthis.props.onGenerate( this.state.generatedName, newVar );\n\t\tthis.props.logAction( DATA_EXPLORER_CAT_TRANSFORMER, {\n\t\t\tname: this.state.generatedName,\n\t\t\tfirstVar: firstVar,\n\t\t\tsecondVar: secondVar,\n\t\t\tnameMappings: nameMappings,\n\t\t\tcastNumeric: castNumeric\n\t\t});\n\t\tthis.props.onHide();\n\t};\n\n\trenderFrequencyTable = () => {\n\t\tconst variable = this.state.firstVar;\n\t\tconst values = this.props.data[ variable ];\n\t\tconst varFreqs = countBy( values, identity );\n\t\tconst keys = extractUsedCategories( varFreqs, variable );\n\t\treturn (\n\t\t\t<Table bordered style={{ margin: 8 }} clickable={false} >\n\t\t\t\t<thead>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th>{this.props.t('old')}:</th>\n\t\t\t\t\t\t{keys.map( ( val, idx ) => {\n\t\t\t\t\t\t\treturn <th key={`${variable}-${idx}-old`}>{val}</th>;\n\t\t\t\t\t\t})}\n\t\t\t\t\t</tr>\n\t\t\t\t</thead>\n\t\t\t\t<tbody>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th>{this.props.t('new')}:</th>\n\t\t\t\t\t\t{keys.map( ( val, idx ) => {\n\t\t\t\t\t\t\treturn ( <th key={`${variable}-${idx}-new`}>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tclassName=\"transformer-table-input\"\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tdefaultValue={val}\n\t\t\t\t\t\t\t\t\tonChange={this.changeFreqFactory( val )}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</th> );\n\t\t\t\t\t\t})}\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr style={{ borderTop: '1px solid black' }}>\n\t\t\t\t\t\t<th>{this.props.t('frequencies')}:</th>\n\t\t\t\t\t\t{keys.map( ( label, idx ) => {\n\t\t\t\t\t\t\tconst freq = this.state.firstFreqs[ label ];\n\t\t\t\t\t\t\treturn <td key={`${variable}-${idx}-freq`}>{freq}</td>;\n\t\t\t\t\t\t})}\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody>\n\t\t\t</Table>\n\t\t);\n\t};\n\n\trenderContingencyTable = () => {\n\t\tconst rowVar = this.state.secondVar;\n\t\tconst colVar = this.state.firstVar;\n\t\tconst rowValues = this.props.data[ rowVar ];\n\t\tconst colValues = this.props.data[ colVar ];\n\t\tconst rowFreqs = countBy( rowValues, identity );\n\t\tconst colFreqs = countBy( colValues, identity );\n\t\tconst rowKeys = extractUsedCategories( rowFreqs, rowVar );\n\t\tconst colKeys = extractUsedCategories( colFreqs, colVar );\n\t\treturn (\n\t\t\t<Table bordered style={{ margin: 8 }}>\n\t\t\t\t<tr>\n\t\t\t\t\t<th></th>\n\t\t\t\t\t{colKeys.map( ( col, idx ) => {\n\t\t\t\t\t\treturn ( <th key={`${col}-${idx}`}>\n\t\t\t\t\t\t\t{col}\n\t\t\t\t\t\t</th> );\n\t\t\t\t\t})}\n\t\t\t\t</tr>\n\t\t\t\t{rowKeys.map( ( row, idx ) => {\n\t\t\t\t\treturn ( <tr key={`${row}-${idx}`}>\n\t\t\t\t\t\t<th>{row}</th>\n\t\t\t\t\t\t{colKeys.map( ( col, idx ) => {\n\t\t\t\t\t\t\treturn ( <td key={`${row}-${col}-${idx}`}>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tclassName=\"transformer-table-input\"\n\t\t\t\t\t\t\t\t\ttype=\"text\" defaultValue={`${col}-${row}`}\n\t\t\t\t\t\t\t\t\tonChange={this.changeContingencyFactory( row, col )}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</td> );\n\t\t\t\t\t\t})}\n\t\t\t\t\t</tr> );\n\t\t\t\t})}\n\t\t\t</Table>\n\t\t);\n\t};\n\n\trender() {\n\t\tconst { t } = this.props;\n\t\treturn (\n\t\t\t<Draggable cancel=\".card-body\" onDragStart={( event ) => {\n\t\t\t\tevent.stopPropagation();\n\t\t\t}} style={{ zIndex: 1006 }} >\n\t\t\t\t<FocusTrap focusTrapOptions={FOCUS_TRAP_OPTIONS} >\n\t\t\t\t\t<Panel\n\t\t\t\t\t\tonHide={this.props.onHide}\n\t\t\t\t\t\tshow={this.props.show}\n\t\t\t\t\t\theader={t('categorical-transformer-header')}\n\t\t\t\t\t\tfooter={<Button onClick={this.makeNewVar} disabled={this.state.generatedName.length < 1}>\n\t\t\t\t\t\t\t{t('create-new-variable')}\n\t\t\t\t\t\t</Button>}\n\t\t\t\t\t\tbodyStyle={{\n\t\t\t\t\t\t\tmaxHeight: 'calc(100vh - 200px)',\n\t\t\t\t\t\t\toverflowY: 'auto',\n\t\t\t\t\t\t\tposition: 'relative'\n\t\t\t\t\t\t}}\n\t\t\t\t\t\trole=\"button\" tabIndex={0}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t<Col md={4}>\n\t\t\t\t\t\t\t\t<SelectInput\n\t\t\t\t\t\t\t\t\tlegend={t('first-variable')}\n\t\t\t\t\t\t\t\t\tdefaultValue={this.state.firstVar || ''}\n\t\t\t\t\t\t\t\t\toptions={this.props.categorical}\n\t\t\t\t\t\t\t\t\tonChange={this.handleFirstVariableChange}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t<Col md={4}>\n\t\t\t\t\t\t\t\t<SelectInput\n\t\t\t\t\t\t\t\t\tclearable\n\t\t\t\t\t\t\t\t\tlegend={t('optional-second-variable')}\n\t\t\t\t\t\t\t\t\tdefaultValue={this.state.secondVar || ''}\n\t\t\t\t\t\t\t\t\toptions={this.props.categorical}\n\t\t\t\t\t\t\t\t\tonChange={this.handleSecondVariableChange}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t<Row style={{ overflowX: 'auto', width: '100%' }}>\n\t\t\t\t\t\t\t{this.renderTable()}\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t<Tooltip tooltip={t('treat-labels-as-numbers-tooltip')}>\n\t\t\t\t\t\t\t\t<CheckboxInput\n\t\t\t\t\t\t\t\t\tlegend={t('treat-labels-as-numbers')}\n\t\t\t\t\t\t\t\t\tdefaultValue={false}\n\t\t\t\t\t\t\t\t\tdisabled={!this.state.onlyNumbers}\n\t\t\t\t\t\t\t\t\tonChange={() => {\n\t\t\t\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\t\t\t\tcastNumeric: !this.state.castNumeric\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t<FormGroup style={{ margin: 8 }}>\n\t\t\t\t\t\t\t\t<FormLabel>{t('name-new-variable')}:</FormLabel>\n\t\t\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tplaceholder={t('select-name')}\n\t\t\t\t\t\t\t\t\tonChange={this.handleGeneratedNameChange}\n\t\t\t\t\t\t\t\t\tonKeyPress={this.handleKeyPress}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<FormText>\n\t\t\t\t\t\t\t\t\t{t('new-variable-appended')}\n\t\t\t\t\t\t\t\t</FormText>\n\t\t\t\t\t\t\t</FormGroup>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t</Panel>\n\t\t\t\t</FocusTrap>\n\t\t\t</Draggable>\n\t\t);\n\t}\n}\n\n\n// PROPERTIES //\n\nCategoricalTransformer.defaultProps = {\n\tlogAction() {}\n};\n\nCategoricalTransformer.propTypes = {\n\tcategorical: PropTypes.array.isRequired,\n\tdata: PropTypes.object.isRequired,\n\tonGenerate: PropTypes.func.isRequired,\n\tlogAction: PropTypes.func,\n\tonHide: PropTypes.func.isRequired,\n\tshow: PropTypes.bool.isRequired\n};\n\n\n// EXPORTS //\n\nexport default CategoricalTransformer;\n","// MODULES //\n\nimport React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport logger from 'debug';\nimport FocusTrap from 'focus-trap-react';\nimport Button from 'react-bootstrap/Button';\nimport Col from 'react-bootstrap/Col';\nimport Row from 'react-bootstrap/Row';\nimport FormControl from 'react-bootstrap/FormControl';\nimport FormLabel from 'react-bootstrap/FormLabel';\nimport FormGroup from 'react-bootstrap/FormGroup';\nimport FormText from 'react-bootstrap/FormText';\nimport sample from '@stdlib/random/sample';\nimport absdiff from '@stdlib/math/base/utils/absolute-difference';\nimport objectKeys from '@stdlib/utils/keys';\nimport TextInput from '@isle-project/components/input/text';\nimport NumberInput from '@isle-project/components/input/number';\nimport Draggable from '@isle-project/components/draggable';\nimport Panel from '@isle-project/components/panel';\nimport { DATA_EXPLORER_GROUP_TRANSFORMER } from '@isle-project/constants/actions.js';\n\n\n// VARIABLES //\n\nconst debug = logger( 'isle:data-explorer:group-transformer' );\nconst FOCUS_TRAP_OPTIONS = {\n\tclickOutsideDeactivates: true\n};\n\n\n// MAIN //\n\nclass GroupTransformer extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tthis.state = {\n\t\t\tgeneratedName: '',\n\t\t\tnGroups: 2,\n\t\t\tgroupProbs: [ 0.5, 0.5 ],\n\t\t\tlabels: [ 'Group 1', 'Group 2' ]\n\t\t};\n\t}\n\n\thandleGeneratedNameChange = ( event ) => {\n\t\tthis.setState({\n\t\t\tgeneratedName: event.target.value\n\t\t});\n\t};\n\n\thandleGroupNumberChange = ( nGroups ) => {\n\t\tconst groupProbs = new Array( nGroups ).fill( 1/nGroups );\n\t\tconst labels = new Array( nGroups );\n\t\tfor ( let i = 0; i < labels.length; i++ ) {\n\t\t\tlabels[ i ] = `${this.props.t('group')} ${i+1}`;\n\t\t}\n\t\tthis.setState({\n\t\t\tgroupProbs,\n\t\t\tlabels,\n\t\t\tnGroups\n\t\t});\n\t};\n\n\thandleKeyPress = ( event ) => {\n\t\tif ( event.charCode === 13 ) {\n\t\t\tlet sum = 0.0;\n\t\t\tfor ( let i = 0; i < this.state.groupProbs.length; i++ ) {\n\t\t\t\tsum += this.state.groupProbs[ i ];\n\t\t\t}\n\t\t\tconst hasValidValues = this.state.generatedName.length > 2 && absdiff( sum, 1.0 ) <= 1.5e-8;\n\t\t\tif ( hasValidValues ) {\n\t\t\t\tthis.makeNewVar();\n\t\t\t}\n\t\t}\n\t};\n\n\tmakeNewVar = () => {\n\t\tdebug( 'Generating new categorical variable...' );\n\t\tconst keys = objectKeys( this.props.data );\n\t\tconst nobs = this.props.data[ keys[ 0 ] ].length;\n\n\t\tconst values = sample( this.state.labels, {\n\t\t\tsize: nobs,\n\t\t\tprobs: this.state.groupProbs,\n\t\t\treplace: true\n\t\t});\n\t\tthis.props.onGenerate( this.state.generatedName, values );\n\t\tthis.props.logAction( DATA_EXPLORER_GROUP_TRANSFORMER, {\n\t\t\tname: this.state.generatedName,\n\t\t\tlabels: this.state.labels,\n\t\t\tgroupProbs: this.state.groupProbs\n\t\t});\n\t\tthis.props.onHide();\n\t};\n\n\trenderTable() {\n\t\tconst elems = new Array( this.state.nGroups );\n\t\tfor ( let i = 0; i < elems.length; i++ ) {\n\t\t\telems[ i ] = <Row key={i} >\n\t\t\t\t<Col>\n\t\t\t\t\t<TextInput\n\t\t\t\t\t\tlegend={`Label for Group ${i+1}`}\n\t\t\t\t\t\tdefaultValue={this.state.labels[ i ]}\n\t\t\t\t\t\tonChange={( val ) => {\n\t\t\t\t\t\t\tconst labels = this.state.labels.slice();\n\t\t\t\t\t\t\tlabels[ i ] = val;\n\t\t\t\t\t\t\tthis.setState({ labels });\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</Col>\n\t\t\t\t<Col>\n\t\t\t\t\t<NumberInput\n\t\t\t\t\t\tlegend={this.props.t('group-proportion')}\n\t\t\t\t\t\tonChange={( val ) => {\n\t\t\t\t\t\t\tconst groupProbs = this.state.groupProbs.slice();\n\t\t\t\t\t\t\tgroupProbs[ i ] = val;\n\t\t\t\t\t\t\tthis.setState({ groupProbs });\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tdefaultValue={this.state.groupProbs[ i ]}\n\t\t\t\t\t\tstep={0.01}\n\t\t\t\t\t\tmin={0}\n\t\t\t\t\t\tmax={1}\n\t\t\t\t\t\tnumbersOnly={false}\n\t\t\t\t\t/>\n\t\t\t\t</Col>\n\t\t\t</Row>;\n\t\t}\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t{elems}\n\t\t\t\t<p>{this.props.t('proportions-sum-one')}</p>\n\t\t\t</Fragment>\n\t\t);\n\t}\n\n\trender() {\n\t\tlet sum = 0.0;\n\t\tfor ( let i = 0; i < this.state.groupProbs.length; i++ ) {\n\t\t\tsum += this.state.groupProbs[ i ];\n\t\t}\n\t\tconst hasValidValues = this.state.generatedName.length > 2 && absdiff( sum, 1.0 ) <= 1.5e-8;\n\t\treturn (\n\t\t\t<Draggable cancel=\".card-body\" onDragStart={( event ) => {\n\t\t\t\tevent.stopPropagation();\n\t\t\t}} style={{ zIndex: 1006 }} >\n\t\t\t\t<FocusTrap focusTrapOptions={FOCUS_TRAP_OPTIONS} >\n\t\t\t\t\t<Panel\n\t\t\t\t\t\tonHide={this.props.onHide}\n\t\t\t\t\t\tshow={this.props.show}\n\t\t\t\t\t\theader={this.props.t('group-transformer-header')}\n\t\t\t\t\t\tfooter={<Button onClick={this.makeNewVar} disabled={!hasValidValues}>\n\t\t\t\t\t\t\t{this.props.t('create-new-variable')}\n\t\t\t\t\t\t</Button>}\n\t\t\t\t\t\trole=\"button\" tabIndex={0}\n\t\t\t\t\t\tbodyStyle={{\n\t\t\t\t\t\t\tmaxHeight: 'calc(100vh - 200px)',\n\t\t\t\t\t\t\toverflowY: 'auto',\n\t\t\t\t\t\t\tposition: 'relative'\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t<Col>\n\t\t\t\t\t\t\t\t<NumberInput\n\t\t\t\t\t\t\t\t\tlegend={this.props.t('number-of-groups')}\n\t\t\t\t\t\t\t\t\tonChange={this.handleGroupNumberChange}\n\t\t\t\t\t\t\t\t\tdefaultValue={this.state.nGroups}\n\t\t\t\t\t\t\t\t\tstep={1}\n\t\t\t\t\t\t\t\t\tmin={1}\n\t\t\t\t\t\t\t\t\tmax={99}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t{this.renderTable()}\n\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t<FormGroup style={{ margin: 8 }}>\n\t\t\t\t\t\t\t\t<FormLabel>{this.props.t('name-new-variable')}:</FormLabel>\n\t\t\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tplaceholder={this.props.t('select-name')}\n\t\t\t\t\t\t\t\t\tonChange={this.handleGeneratedNameChange}\n\t\t\t\t\t\t\t\t\tonKeyPress={this.handleKeyPress}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<FormText>\n\t\t\t\t\t\t\t\t\t{this.props.t('new-variable-appended')}\n\t\t\t\t\t\t\t\t</FormText>\n\t\t\t\t\t\t\t</FormGroup>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t</Panel>\n\t\t\t\t</FocusTrap>\n\t\t\t</Draggable>\n\t\t);\n\t}\n}\n\n\n// PROPERTIES //\n\nGroupTransformer.defaultProps = {\n\tlogAction() {}\n};\n\nGroupTransformer.propTypes = {\n\tdata: PropTypes.object.isRequired,\n\tonGenerate: PropTypes.func.isRequired,\n\tlogAction: PropTypes.func,\n\tonHide: PropTypes.func.isRequired,\n\tshow: PropTypes.bool.isRequired\n};\n\n\n// EXPORTS //\n\nexport default GroupTransformer;\n","// MODULES //\n\nimport Loadable from '@isle-project/components/internal/loadable';\n\n\n// MAIN //\n\nconst RandomTransformer = Loadable( () => import( /* webpackChunkName: \"RandomTransformer\" */ './main.js' ) );\n\n\n// EXPORTS //\n\nexport default RandomTransformer;\n","// MODULES //\n\nimport React, { useState, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport Button from 'react-bootstrap/Button';\nimport BinTransformer from './bin_transformer.js';\nimport FormulaTransformer from './formula_transformer.js';\nimport CategoricalModal from './categorical_transformer.js';\nimport GroupModal from './group_transformer.js';\nimport RandomModal from './random-transformer';\n\n\n// MAIN //\n\nconst Transformer = ( props ) => {\n\tconst { data, categorical, quantitative, t, session, defaultCode, logAction, onGenerate } = props;\n\tconst [ active, setActive ] = useState( null );\n\n\tconst toggleFormulaModal = () => {\n\t\tconst newActive = active === 'formula' ? null : 'formula';\n\t\tsetActive( newActive );\n\t\tprops.onActive( newActive );\n\t};\n\tconst toggleBinModal = () => {\n\t\tconst newActive = active === 'bin' ? null : 'bin';\n\t\tsetActive( newActive );\n\t\tprops.onActive( newActive );\n\t};\n\tconst toggleCategoricalModal = () => {\n\t\tconst newActive = active === 'categorical' ? null : 'categorical';\n\t\tsetActive( newActive );\n\t\tprops.onActive( newActive );\n\t};\n\tconst toggleGroupModal = () => {\n\t\tconst newActive = active === 'group' ? null : 'group';\n\t\tsetActive( newActive );\n\t\tprops.onActive( newActive );\n\t};\n\tconst toggleRandomModal = () => {\n\t\tconst newActive = active === 'random' ? null : 'random';\n\t\tsetActive( newActive );\n\t\tprops.onActive( newActive );\n\t};\n\tlet modal;\n\tif ( data ) {\n\t\tswitch ( active ) {\n\t\t\tcase 'bin':\n\t\t\t\tmodal = <BinTransformer\n\t\t\t\t\tshow={true}\n\t\t\t\t\tonHide={toggleBinModal}\n\t\t\t\t\tquantitative={quantitative}\n\t\t\t\t\tlogAction={logAction}\n\t\t\t\t\tonGenerate={onGenerate}\n\t\t\t\t\tdata={data}\n\t\t\t\t\tt={t}\n\t\t\t\t/>;\n\t\t\tbreak;\n\t\t\tcase 'categorical':\n\t\t\t\tmodal = <CategoricalModal\n\t\t\t\t\tshow={true}\n\t\t\t\t\tonHide={toggleCategoricalModal}\n\t\t\t\t\tcategorical={categorical}\n\t\t\t\t\tlogAction={logAction}\n\t\t\t\t\tonGenerate={onGenerate}\n\t\t\t\t\tdata={data}\n\t\t\t\t\tt={t}\n\t\t\t\t/>;\n\t\t\tbreak;\n\t\t\tcase 'formula':\n\t\t\t\tmodal = <FormulaTransformer\n\t\t\t\t\tshow={true}\n\t\t\t\t\tonHide={toggleFormulaModal}\n\t\t\t\t\tcategorical={categorical}\n\t\t\t\t\tquantitative={quantitative}\n\t\t\t\t\tdata={data}\n\t\t\t\t\tdefaultCode={defaultCode}\n\t\t\t\t\tlogAction={logAction}\n\t\t\t\t\tonGenerate={onGenerate}\n\t\t\t\t\tsession={session}\n\t\t\t\t\tt={t}\n\t\t\t\t/>;\n\t\t\tbreak;\n\t\t\tcase 'group':\n\t\t\t\tmodal = <GroupModal\n\t\t\t\t\tshow={true}\n\t\t\t\t\tonHide={toggleGroupModal}\n\t\t\t\t\tlogAction={logAction}\n\t\t\t\t\tonGenerate={onGenerate}\n\t\t\t\t\tdata={data}\n\t\t\t\t\tt={t}\n\t\t\t\t/>;\n\t\t\tbreak;\n\t\t\tcase 'random':\n\t\t\t\tmodal = <RandomModal\n\t\t\t\t\tshow={true}\n\t\t\t\t\tonHide={toggleRandomModal}\n\t\t\t\t\tlogAction={logAction}\n\t\t\t\t\tonGenerate={onGenerate}\n\t\t\t\t\tdata={data}\n\t\t\t\t\tt={t}\n\t\t\t\t/>;\n\t\t\tbreak;\n\t\t}\n\t}\n\treturn (\n\t\t<Fragment>\n\t\t\t<div className=\"well d-grid gap-3\" style={{ padding: 15, margin: 15 }} >\n\t\t\t\t<Button\n\t\t\t\t\tonClick={toggleFormulaModal}\n\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\tstyle={{ fontSize: '1.2em' }}\n\t\t\t\t>\n\t\t\t\t\t{t('interactions-functions')}\n\t\t\t\t</Button>\n\t\t\t\t<Button\n\t\t\t\t\tonClick={toggleBinModal}\n\t\t\t\t\tdisabled={!quantitative || quantitative.length === 0}\n\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\tstyle={{ fontSize: '1.2em' }}\n\t\t\t\t>\n\t\t\t\t\t{t('bin-quantitative')}\n\t\t\t\t</Button>\n\t\t\t\t<Button\n\t\t\t\t\tonClick={toggleCategoricalModal}\n\t\t\t\t\tdisabled={!categorical || categorical.length === 0}\n\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\tstyle={{ fontSize: '1.2em' }}\n\t\t\t\t>\n\t\t\t\t\t{t('rename-or-combine')}\n\t\t\t\t</Button>\n\t\t\t\t<Button\n\t\t\t\t\tonClick={toggleGroupModal}\n\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\tstyle={{ fontSize: '1.2em' }}\n\t\t\t\t>\n\t\t\t\t\t{t('create-groups')}\n\t\t\t\t</Button>\n\t\t\t\t<div className=\"d-grid\" >\n\t\t\t\t\t<Button\n\t\t\t\t\t\tonClick={toggleRandomModal}\n\t\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\t\tstyle={{ fontSize: '1.2em' }}\n\t\t\t\t\t>\n\t\t\t\t\t\t{t('generate-random-data')}\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{modal}\n\t\t</Fragment>\n\t);\n};\n\n\n// PROPERTIES //\n\nTransformer.defaultProps = {\n\tlogAction() {},\n\tonActive() {},\n\tonGenerate() {},\n\tdefaultCode: '',\n\tsession: {}\n};\n\nTransformer.propTypes = {\n\tcategorical: PropTypes.array.isRequired,\n\tquantitative: PropTypes.array.isRequired,\n\tdata: PropTypes.object.isRequired,\n\tdefaultCode: PropTypes.string,\n\tlogAction: PropTypes.func,\n\tonActive: PropTypes.func,\n\tonGenerate: PropTypes.func,\n\tsession: PropTypes.object\n};\n\n\n// EXPORTS //\n\nexport default Transformer;\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _ThemeProvider = require(\"./ThemeProvider\");\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nconst defaultProps = {\n  role: 'toolbar'\n};\nconst ButtonToolbar = /*#__PURE__*/React.forwardRef(({\n  bsPrefix,\n  className,\n  ...props\n}, ref) => {\n  const prefix = (0, _ThemeProvider.useBootstrapPrefix)(bsPrefix, 'btn-toolbar');\n  return /*#__PURE__*/(0, _jsxRuntime.jsx)(\"div\", { ...props,\n    ref: ref,\n    className: (0, _classnames.default)(className, prefix)\n  });\n});\nButtonToolbar.displayName = 'ButtonToolbar';\nButtonToolbar.defaultProps = defaultProps;\nvar _default = ButtonToolbar;\nexports.default = _default;\nmodule.exports = exports.default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _classnames = _interopRequireDefault(require(\"classnames\"));\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _ThemeProvider = require(\"./ThemeProvider\");\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nconst Table = /*#__PURE__*/React.forwardRef(({\n  bsPrefix,\n  className,\n  striped,\n  bordered,\n  borderless,\n  hover,\n  size,\n  variant,\n  responsive,\n  ...props\n}, ref) => {\n  const decoratedBsPrefix = (0, _ThemeProvider.useBootstrapPrefix)(bsPrefix, 'table');\n  const classes = (0, _classnames.default)(className, decoratedBsPrefix, variant && `${decoratedBsPrefix}-${variant}`, size && `${decoratedBsPrefix}-${size}`, striped && `${decoratedBsPrefix}-striped`, bordered && `${decoratedBsPrefix}-bordered`, borderless && `${decoratedBsPrefix}-borderless`, hover && `${decoratedBsPrefix}-hover`);\n  const table = /*#__PURE__*/(0, _jsxRuntime.jsx)(\"table\", { ...props,\n    className: classes,\n    ref: ref\n  });\n\n  if (responsive) {\n    let responsiveClass = `${decoratedBsPrefix}-responsive`;\n\n    if (typeof responsive === 'string') {\n      responsiveClass = `${responsiveClass}-${responsive}`;\n    }\n\n    return /*#__PURE__*/(0, _jsxRuntime.jsx)(\"div\", {\n      className: responsiveClass,\n      children: table\n    });\n  }\n\n  return table;\n});\nvar _default = Table;\nexports.default = _default;\nmodule.exports = exports.default;","// MODULES //\n\nimport Loadable from '@isle-project/components/internal/loadable';\n\n\n// MAIN //\n\nconst Panel = Loadable( () => import( /* webpackChunkName: \"Panel\" */ './main.js' ) );\n\n\n// EXPORTS //\n\nexport default Panel;\n"],"sourceRoot":""}