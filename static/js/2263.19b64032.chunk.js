/*! For license information please see 2263.19b64032.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkisle_dashboard=self.webpackChunkisle_dashboard||[]).push([[2263],{96128:function(e,t,a){a.d(t,{fH:function(){return g},Zl:function(){return b}});var n=a(87757),r=a.n(n),s=a(15861),o=a(41488),l=a(86072),i=a.n(l),c=a(98695),m=a(33837),u=a.n(m),d=a(63834),p=a(41985),h=a(33357);function f(e){return{type:h.eu,payload:{badges:e}}}var v=function(){var e=(0,s.Z)(r().mark((function e(t){var a,n,s,l,m,h;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i().get(d.ZP+"/get_user_badges");case 3:if(a=e.sent,n=a.data,s=n.badges,l=n.addedBadges,t(f(s)),l.length>0)for(m=0;m<s.length;m++)h=s[m],u()(l,h.name)&&(0,p.wN)(t,(v=void 0,g=void 0,E=void 0,b=void 0,v=(r=h).name,g=r.description,E=r.picture,b=d.ZP+"/badges/"+E,{children:o.createElement("div",null,o.createElement("h3",null,c.Z.t("common:received-badge"),v),o.createElement("div",null,o.createElement("div",null,o.createElement("div",{className:"received-badge-before"}),o.createElement("img",{className:"received-badge",src:b,alt:"Received Badge"})),o.createElement("p",{style:{marginTop:15}},c.Z.t("common:received-badge-for"),o.createElement("b",null,g)))),level:"info",position:"tc",dismissible:"button",autoDismiss:0}));e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),(0,p.EG)(t,e.t0);case 12:case"end":return e.stop()}var r,v,g,E,b}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),g=function(e){return(0,s.Z)(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v(e);case 2:case"end":return t.stop()}}),t)})))},E=function(){var e=(0,s.Z)(r().mark((function e(t){var a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i().get(d.ZP+"/get_available_badges");case 3:a=e.sent,t((n=a.data,{type:h.Z9,payload:{badges:n}})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),(0,p.EG)(t,e.t0);case 10:case"end":return e.stop()}var n}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),b=function(e){return(0,s.Z)(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E(e);case 2:case"end":return t.stop()}}),t)})))}},70384:function(e,t,a){a.d(t,{Z:function(){return Z}});var n=a(15671),r=a(43144),s=a(97326),o=a(60136),l=a(29388),i=a(4942),c=a(41488),m=a(25472),u=a(70048),d=a(93391),p=a(47701),h=a(3252),f=a(54012),v=a(75018),g=a(73230),E=a(63834),b=function(e){(0,o.Z)(a,e);var t=(0,l.Z)(a);function a(e){var r;return(0,n.Z)(this,a),r=t.call(this,e),(0,i.Z)((0,s.Z)(r),"handleResponseChange",(function(e){r.setState({response:e.target.value})})),(0,i.Z)((0,s.Z)(r),"handleResponseSubmit",(function(){r.props.submitTicketMessage({message:r.state.response,ticketID:r.props.ticket._id}),r.setState({response:""})})),(0,i.Z)((0,s.Z)(r),"toggleCompletion",(function(){r.props.ticket.done?r.props.openTicket(r.props.ticket._id):r.props.closeTicket(r.props.ticket._id)})),(0,i.Z)((0,s.Z)(r),"renderMessage",(function(e,t){var a=r.props.t,n=new Date(e.createdAt);return c.createElement("div",{className:"message-container",key:t},c.createElement("div",{className:"message-data"},c.createElement("div",{className:"message-profile-pic"},c.createElement("img",{src:"".concat(E.ZP,"/thumbnail/").concat(e.picture),alt:"User Profile Pic"})),c.createElement("div",{className:"message-author-line"},c.createElement("span",{className:"message-author"},e.author),"\xa0",a("common:wrote-on",{date:"".concat(n.toLocaleTimeString()," ").concat(n.toLocaleDateString())}))),c.createElement("div",{className:"message-body"},e.body))})),r.state={response:""},r}return(0,r.Z)(a,[{key:"render",value:function(){var e,t=this.props.t,a=this.props.ticket;return c.createElement(c.Fragment,null,c.createElement(h.Z,{show:this.props.show,onHide:this.props.onHide,dialogClassName:"modal-60w"},c.createElement(h.Z.Header,null,c.createElement(h.Z.Title,{as:"h3",style:{width:"100%"}},t("common:title"),": ",a.title,c.createElement(d.Z,{placement:"right",overlay:(e=t("close-ticket-modal"),c.createElement(p.Z,{id:"tooltip"},e))},c.createElement(u.Z,{onClick:this.props.onHide,style:{float:"right"},variant:"outline-secondary","aria-label":t("close-ticket-modal"),className:"modal-close"},c.createElement("span",{"aria-hidden":"true"},"x"))))),c.createElement(h.Z.Body,{style:{height:"60vh",overflowY:"auto"}},c.createElement("span",{className:"title"},t("common:description"),":"),c.createElement("p",{style:{whiteSpace:"pre-wrap"}},a.description),c.createElement("hr",null),a.namespace.title?c.createElement(c.Fragment,null,c.createElement("span",{className:"title"},"".concat(t("common:course"),": ")),c.createElement("span",null,a.namespace.title)," | "):null,a.lesson?c.createElement(c.Fragment,null,c.createElement("span",{className:"title"},"".concat(t("common:lesson"),": ")),c.createElement("span",null,a.lesson.title)," | "):null,a.component?c.createElement(c.Fragment,null,c.createElement("span",{className:"title"},"".concat(t("common:component"),": ")),c.createElement("span",null,a.component)):null,a.attachments.length>0?c.createElement(c.Fragment,null,c.createElement("br",null),c.createElement("span",{className:"title"},"".concat(t("common:attachments"),": ")),a.attachments.map((function(e,a){return c.createElement("a",{"aria-label":t("common:attachments"),href:"".concat(E.ZP,"/attachments/").concat(e.filename),key:a,style:{marginLeft:6},target:"_blank",rel:"noopener noreferrer"},c.createElement("i",{className:"fas fa-link",style:{marginRight:2}}),e.title)}))):null,c.createElement("br",null),c.createElement("hr",null),c.createElement("span",{className:"title"},t("common:messages"),":"),a.messages.map(this.renderMessage),c.createElement("hr",null)),c.createElement(h.Z.Footer,{style:{background:"ghostwhite"}},c.createElement(g.Z,{controlId:"form-text",style:{width:"calc(100% - 200px)"}},c.createElement(f.Z,null,t("enter-response")),c.createElement(v.Z,{name:"body",type:"text",as:"textarea",rows:"5",value:this.state.response,placeholder:a.done?t("require-open-ticket"):t("response-comes-here"),onChange:this.handleResponseChange,disabled:a.done})),c.createElement("div",{style:{float:"right",width:"180px"}},c.createElement(u.Z,{block:!0,onClick:this.handleResponseSubmit,disabled:!this.state.response||a.done},t("submit-response")),c.createElement(u.Z,{block:!0,onClick:this.toggleCompletion},a.done?t("common:open-ticket"):t("common:close-ticket")),c.createElement(u.Z,{block:!0,onClick:this.props.onHide},t("common:hide"))))))}}]),a}(c.Component);b.defaultProps={};var Z=(0,m.Z)(["ticket_modal","common"])(b)},72159:function(e,t,a){a.r(t),a.d(t,{default:function(){return Vt}});var n=a(41488),r=a(29236),s=a(59486),o=a(15671),l=a(43144),i=a(97326),c=a(60136),m=a(29388),u=a(4942),d=a(10077),p=a.n(d),h=a(25472),f=a(26881),v=a(63002),g=a(62410),E=a.n(g),b=a(87095),Z=a(70048),y=a(54012),k=a(73230),N=a(93391),w=a(47701),x=a(52785),C=a(33606),S=a.n(C),M=a(72488),P=a.n(M),_=a(80213),A=a.n(_),D=a(35683),T=a.n(D),F=a(33837),L=a.n(F),I=a(12699),z=a.n(I),H=a(6233),O=a.n(H),B=a(52428),U=a(98032),V=a(47355),j=a(42263),R=a(63834),W=a(83531),K=a(25991),G=a(37122),J=a(86037),q=(a(87815),["name","email","lesson","title","filename","type","createdAt","updatedAt"]),Y=p()("isle:files-page"),$=function(e){return e.substring(e.indexOf("/media/")+7)},Q=function(e){for(var t=0;t<e.length;t++){var a=T()(e[t],q);a.lesson=a.lesson.title,a.filename=R.ZP+"/"+a.filename,e[t]=a}return e},X=function(e){(0,c.Z)(a,e);var t=(0,m.Z)(a);function a(e){var r;return(0,o.Z)(this,a),r=t.call(this,e),(0,u.Z)((0,i.Z)(r),"handleDelete",(function(){r.props.handleFileDeletion(r.state.deletionID,r.props.ownerFiles),r.toggleDeleteModal()})),(0,u.Z)((0,i.Z)(r),"toggleDeleteModal",(function(){r.setState({showDeleteModal:!r.state.showDeleteModal})})),(0,u.Z)((0,i.Z)(r),"createColumns",(function(){var e=r.props.t;return[(0,G.Z)({Header:e("common:filename"),accessor:"title",minWidth:250,filterMethod:function(e,t){return L()(z()(t[e.id]),z()(e.value))}}),{Header:e("common:open"),accessor:"path",Cell:function(t){return n.createElement(N.Z,{placement:"left",overlay:n.createElement(w.Z,{id:"external-link-tooltip"},e("open-file"))},n.createElement("a",{"aria-label":e("open-file"),href:R.ZP+"/"+$(t.value),target:"_blank",rel:"noopener noreferrer"},n.createElement(Z.Z,{"aria-label":e("open-file"),size:"sm",variant:"outline-secondary"},n.createElement("i",{className:"fa fa-external-link-alt"}))))},resizable:!1,filterable:!1,sortable:!1,width:45},{Header:e("common:copy"),id:"copy-path",accessor:"path",Cell:function(t){return n.createElement(N.Z,{placement:"right",overlay:n.createElement(w.Z,{id:"copy-clipboard-tooltip"},e("common:copy-link"))},n.createElement(Z.Z,{"aria-label":e("common:copy-link"),variant:"outline-secondary",size:"sm",onClick:function(){S()(R.ZP+"/"+$(t.value)),r.props.addNotification({title:"Copied",message:"Link copied to clipboard",level:"success",position:"tl"})}},n.createElement("i",{className:"fa fa-clipboard"})))},resizable:!1,filterable:!1,sortable:!1,width:45},(0,G.Z)({Header:e("common:lesson"),accessor:"lesson",maxWidth:160,Cell:function(t){return t.row.lesson?n.createElement(N.Z,{placement:"right",overlay:n.createElement(w.Z,{id:"open-lesson-tooltip"},e("open-lesson-new-tab"))},n.createElement("div",{style:{width:"100%",height:"100%"}},n.createElement("a",{"aria-label":e("open-lesson-new-tab"),href:t.row.lesson.url,target:"_blank",rel:"noopener noreferrer"},t.row.lesson.title))):n.createElement("span",null,e("no-lesson"))},filterMethod:function(e,t){return t[e.id].title.startsWith(e.value)}}),(0,G.Z)({Header:e("first-name"),id:"first_name",accessor:function(e){var t=O()(e.name).split(" ");return t.length>1?(t.pop(),t.join(" ")):t[0]},maxWidth:75,filterMethod:function(e,t){return L()(z()(t[e.id]),z()(e.value))}}),(0,G.Z)({Header:e("last-name"),id:"last_name",accessor:function(e){var t=O()(e.name).split(" ");return t.length>1?t[t.length-1]:""},maxWidth:75,filterMethod:function(e,t){return L()(z()(t[e.id]),z()(e.value))}}),(0,G.Z)({Header:e("common:email"),accessor:"email",maxWidth:160,filterMethod:function(e,t){return L()(z()(t[e.id]),z()(e.value))}}),(0,G.Z)({Header:e("type"),accessor:"type",filterMethod:function(e,t){return L()(t[e.id],e.value)}}),(0,J.Z)({Header:e("common:size"),accessor:"size",Cell:function(e){return e.value?"".concat(P()(e.value,-3),"mb"):"NA"},filterMethod:function(e,t){var a=t[e.pivotId||e.id];return a>=e.value.min&&a<=e.value.max},formatLabel:function(e){return P()(e,-2)},maxValue:A()(r.state.fileMaxSize)||1,minValue:0}),(0,K.Z)({Header:e("common:date"),accessor:"updatedAt",Cell:function(e){return e.value&&e.value.toLocaleDateString?e.value.toLocaleDateString("en-US"):""},maxWidth:120,t:e}),{Header:"Del",accessor:"_id",Cell:function(t){return n.createElement(N.Z,{placement:"left",overlay:n.createElement(w.Z,{id:"delete-file-tooltip"},e("delete-file-tooltip"))},n.createElement(Z.Z,{"aria-label":e("delete-file-tooltip"),size:"sm",variant:"outline-secondary",onClick:function(){r.setState({deletionID:t.value,showDeleteModal:!0})}},n.createElement("div",{className:"fa fa-trash-alt"})))},resizable:!1,filterable:!1,sortable:!1,width:45}]})),(0,u.Z)((0,i.Z)(r),"saveJSON",(function(){var e=r.dashboardTable.table.getResolvedState().sortedData,t=Q(e),a=new Blob([JSON.stringify(t)],{type:"application/json"}),n="files_".concat(r.props.namespace.title,".json");(0,W.Z)(a,n)})),(0,u.Z)((0,i.Z)(r),"saveCSV",(function(){var e=r.dashboardTable.table.getResolvedState().sortedData,t=Q(e);E()(t,{header:!0},(function(e,t){if(e)return r.props.addNotification({title:"Error encountered",message:"Encountered an error while creating CSV: "+e.message,level:"error",position:"tl"});var a=new Blob([t],{type:"text/plain"}),n="files_".concat(r.props.namespace.title,".csv");(0,W.Z)(a,n)}))})),(0,u.Z)((0,i.Z)(r),"toggleExplorer",(function(){r.setState({showExplorer:!r.state.showExplorer})})),r.state={showDeleteModal:!1,deletionID:null,fileMaxSize:0,fileInputKey:0,showExplorer:!1},r.columns=r.createColumns(),r}return(0,l.Z)(a,[{key:"componentDidMount",value:function(){Y("Component did mount..."),this.props.getFiles({namespaceName:this.props.namespace.title})}},{key:"componentDidUpdate",value:function(e){if(e.files!==this.props.files){for(var t=this.props.files,a=0,n=0;n<t.length;n++){var r=t[n].size;r&&r>a&&(a=r)}this.setState({fileMaxSize:a,fileInputKey:this.state.fileInputKey+1})}}},{key:"render",value:function(){var e=this,t=this.props.t;if(this.state.showExplorer){for(var a=this.props.files,r=[],s=0;s<a.length;s++){var o=a[s],l={};l.title=o.title,l.type=o.type,l.lesson=o.lesson?o.lesson.title:null,l.size=o.size?o.size:null,l.email=o.email,l.createdAt=o.createdAt,l.updatedAt=o.updatedAt,r.push(l)}r=(0,U.Z)(r);return n.createElement(B.Z,{title:t("explorer-files-title"),data:r,categorical:["title","type","lesson","email","createdAt","updatedAt"],quantitative:["size"],close:this.toggleExplorer})}return n.createElement("div",{className:"namespace-data-page"},n.createElement("div",{className:"namespace-data-buttons"},n.createElement(b.Z,{className:"files-export-button-group"},n.createElement(N.Z,{placement:"bottom",overlay:n.createElement(w.Z,{id:"csvTooltip"},t("save-as-csv"))},n.createElement(Z.Z,{size:"sm",variant:"secondary",onClick:this.saveCSV},n.createElement("i",{className:"fas fa-download"})," CSV")),n.createElement(N.Z,{placement:"bottom",overlay:n.createElement(w.Z,{id:"jsonTooltip"},t("save-as-json"))},n.createElement(Z.Z,{size:"sm",variant:"secondary",onClick:this.saveJSON},n.createElement("i",{className:"fas fa-download"})," JSON"))),this.props.ownerFiles?n.createElement(k.Z,{className:"file-upload-button"},n.createElement(y.Z,{htmlFor:"fileUpload",style:{cursor:"pointer"}},n.createElement(x.Z,{id:"fileUploadBadge",variant:"success"},t("upload-file")),n.createElement("input",{id:"fileUpload",key:this.state.fileInputKey,type:"file",accept:".pdf,.html,.md,image/*,video/*,audio/*,.json,.csv",onChange:this.props.handleUpload,style:{display:"none"}}))):null),n.createElement(V.Z,{data:this.props.files,columns:this.columns,t:t,ref:function(t){e.dashboardTable=t},onButtonClick:this.toggleExplorer}),n.createElement(j.Z,{show:this.state.showDeleteModal,close:this.toggleDeleteModal,message:t("delete-file"),title:"".concat(t("common:delete"),"?"),onConfirm:this.handleDelete}))}}]),a}(n.Component);X.defaultProps={ownerFiles:!1};var ee=(0,h.Z)(["namespace_data","common"])(X),te=a(29530),ae=a(75018),ne=a(36659),re=(a(62173),function(e){(0,c.Z)(a,e);var t=(0,m.Z)(a);function a(e){var n;return(0,o.Z)(this,a),n=t.call(this,e),(0,u.Z)((0,i.Z)(n),"deleteSelectedMessage",(function(){var e=n.state.editItem,t=n.props.namespace.announcements[e];n.props.deleteAnnouncement(t.createdAt,e),n.clear(),n.closeDeleteModal()})),(0,u.Z)((0,i.Z)(n),"createMessage",(function(){var e=(new Date).getTime(),t={title:n.state.title,body:n.state.body,author:n.props.user.name,email:n.props.user.email,picture:n.props.user.picture};if(null===n.state.editItem)t.createdAt=e,n.props.addAnnouncement(t);else{var a=n.props.namespace.announcements[n.state.editItem];t.createdAt=a.createdAt,n.props.editAnnouncement(t)}n.clear()})),(0,u.Z)((0,i.Z)(n),"handleInputChange",(function(e){var t=e.target,a=t.name,r=t.value;n.setState((0,u.Z)({},a,r))})),(0,u.Z)((0,i.Z)(n),"clear",(function(){n.setState({title:"",body:"",mode:"new-announcement",editItem:null})})),(0,u.Z)((0,i.Z)(n),"closeDeleteModal",(function(){n.setState({editItem:null,showDeleteModal:!1})})),n.state={title:"",body:"",mode:"new-announcement",editItem:null,showDeleteModal:!1},n}return(0,l.Z)(a,[{key:"renderModals",value:function(){return null}},{key:"editMessage",value:function(e){var t=this.props.namespace.announcements[e];this.setState({mode:"edit-announcement",editItem:e,title:t.title,body:t.body})}},{key:"renderMessages",value:function(){var e=this,t=this.props.t;return n.createElement("div",null,this.props.namespace.announcements.map((function(a,r){var s=new Date(a.createdAt),o=s.toLocaleDateString()+"  -  "+s.toLocaleTimeString(navigator.language,{hour:"2-digit",minute:"2-digit"});return n.createElement("div",{key:r},n.createElement("div",{className:"message-container"},n.createElement("div",{className:"message-data"},n.createElement("div",{className:"message-profile-pic"},n.createElement("img",{src:a.picture,alt:"User Profile Pic"})),n.createElement("div",{className:"message-author-line"},n.createElement("span",{className:"message-author"},a.author),"\xa0",t("common:wrote-on",{date:o}))),n.createElement("div",{className:"message-title"},a.title),n.createElement("div",{className:"message-body"},a.body)),n.createElement("div",{className:"message-manip"},n.createElement("button",{onClick:function(){e.setState({editItem:r,showDeleteModal:!0})},className:"message-delete"},t("common:delete")),n.createElement("button",{onClick:function(){e.editMessage(r)},className:"message-edit"},t("common:edit"))))})))}},{key:"render",value:function(){var e=this.props.t,t=this.state.title.length<3||this.state.body.length<3,a=0===this.state.title.length&&0===this.state.body.length;return n.createElement("div",{className:"namespace-data-page"},n.createElement("div",{className:"messages"},this.renderMessages()),n.createElement("div",{className:"new_message"},n.createElement(te.Z,null,n.createElement(te.Z.Header,null,n.createElement(te.Z.Title,{as:"h3"},e(this.state.mode))),n.createElement(te.Z.Body,null,n.createElement(ne.Z,{style:{padding:"20px"}},n.createElement(N.Z,{placement:"bottom",overlay:n.createElement(w.Z,{id:"titleTooltip"},e("announcement-title"))},n.createElement(k.Z,{controlId:"form-title"},n.createElement(y.Z,null,e("common:title")),n.createElement(ae.Z,{name:"title",type:"text",value:this.state.title,onChange:this.handleInputChange}))),n.createElement(k.Z,{controlId:"form-text"},n.createElement(y.Z,null,e("announcement-text")),n.createElement(ae.Z,{name:"body",type:"text",as:"textarea",rows:"10",value:this.state.body,onChange:this.handleInputChange}))),n.createElement(b.Z,null,n.createElement(Z.Z,{type:"submit",disabled:t,onClick:this.createMessage},"new-announcement"===this.state.mode?e("common:create"):e("common:update")),n.createElement(Z.Z,{onClick:this.clear,disabled:a,variant:"danger"},e("common:clear")))))),n.createElement(j.Z,{show:this.state.showDeleteModal,close:this.closeDeleteModal,message:e("delete-announcement"),title:"".concat(e("common:delete"),"?"),onConfirm:this.deleteSelectedMessage}))}}]),a}(n.Component));re.defaultProps={};var se=(0,h.Z)(["namespace_data","common"])(re),oe=a(4846),le=a.n(oe),ie=a(92855),ce=a(43356),me=a(7131),ue=a.n(me),de=a(74321),pe=a.n(de),he=a(70954),fe=a.n(he),ve=a(96967),ge=a.n(ve),Ee=a(66310),be=a(79693),Ze=a.n(be),ye=function(e){(0,c.Z)(a,e);var t=(0,m.Z)(a);function a(e){var n;return(0,o.Z)(this,a),n=t.call(this,e),(0,u.Z)((0,i.Z)(n),"toggleEditing",(function(){n.setState({isEditing:!n.state.isEditing,newProgress:n.props.progress})})),(0,u.Z)((0,i.Z)(n),"handleChange",(function(e){n.setState({newProgress:Ze()(e.target.value,0,100),hasChanged:!0})})),(0,u.Z)((0,i.Z)(n),"handleSubmit",(function(){n.setState({isEditing:!1,hasChanged:!1}),n.props.onSubmit(n.state.newProgress)})),n.state={isEditing:!1,hasChanged:!1,newProgress:e.progress,originalProgress:e.progress},n}return(0,l.Z)(a,[{key:"render",value:function(){return this.state.isEditing?n.createElement(n.Fragment,null,n.createElement("input",{type:"number",value:this.state.newProgress,min:0,max:100,onChange:this.handleChange,className:"editable-progress-input"}),n.createElement("i",{role:"button",tabIndex:0,onClick:this.toggleEditing,onKeyPress:this.toggleEditing,className:"fas fa-window-close editable-progress-close"}),n.createElement("span",{className:"editable-progress-submit",style:{display:this.state.hasChanged?"inline":"none"}},n.createElement("i",{role:"button",tabIndex:0,onClick:this.handleSubmit,onKeyPress:this.handleSubmit,className:"fas fa-check-square"}))):n.createElement(Ee.Z,{"aria-label":"new-progress",style:{fontSize:"10px",height:"12px"},now:this.state.newProgress,label:"".concat(this.state.newProgress,"%"),onClick:this.toggleEditing})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.progress!==t.originalProgress?{newProgress:e.progress,originalProgress:e.progress}:null}}]),a}(n.Component),ke=a(75033),Ne=p()("isle:progress-page");function we(e,t){return function(a,n){var r=n[a.id][e[t]._id];if(ge()(r))return 0===a.value.min;var s=pe()(ue()(100*r.progress),100);return s>=a.value.min&&s<=a.value.max}}function xe(e,t){return function(a,n){return a=a[e[t]._id],n=n[e[t]._id],a||n?a&&!n?1:!a&&n?-1:a.progress>n.progress?1:a.progress<n.progress?-1:0:0}}function Ce(e,t){if("all"===e.value)return!0;var a=e.pivotId||e.id;return void 0===t[a]||(fe()(e.value)?L()(e.value,String(t[a])):String(t[a])===e.value)}var Se=function(e){(0,c.Z)(a,e);var t=(0,m.Z)(a);function a(e){var r;return(0,o.Z)(this,a),r=t.call(this,e),(0,u.Z)((0,i.Z)(r),"accessorFactory",(function(e,t){var a=r.props.t;return function(s){var o=s.original.lessonData,l=e[t]._id;if(o=o[l]){var i=pe()(ue()(100*o.progress),100);return n.createElement("span",{style:{fontSize:"12px",fontWeight:800}},n.createElement(N.Z,{placement:"bottom",overlay:n.createElement(w.Z,{id:"durationTooltip"},a("hours-minutes-seconds"))},n.createElement("span",null,a("duration"),": ",(0,ke.Z)(o.spentTime))),n.createElement(N.Z,{placement:"bottom",overlay:n.createElement(w.Z,{id:"startTooltip"},a("first-accessed"))},n.createElement("span",null," | ",new Date(o.createdAt).toLocaleString())),n.createElement(N.Z,{placement:"bottom",overlay:n.createElement(w.Z,{id:"startTooltip"},a("last-accessed"))},n.createElement("span",null," - ",new Date(o.updatedAt).toLocaleString())),n.createElement("br",null),n.createElement(ye,{progress:i,email:s.original.email,lessonID:l,onSubmit:function(e){r.props.adjustProgress({email:s.original.email,lessonID:l,namespaceID:r.props.namespace._id,cohort:s.original.cohort,progress:e})}}))}return n.createElement("span",null)}})),(0,u.Z)((0,i.Z)(r),"saveJSON",(function(){var e=r.assembleData(),t=new Blob([JSON.stringify(e)],{type:"application/json"}),a="completion_".concat(r.props.namespace.title,".json");(0,W.Z)(t,a)})),(0,u.Z)((0,i.Z)(r),"saveCSV",(function(){var e=r.assembleData();E()(e,{header:!0},(function(e,t){if(e)return r.props.addNotification({title:"Error encountered",message:"Encountered an error while creating CSV: "+e.message,level:"error",position:"tl"});var a=new Blob([t],{type:"text/plain"}),n="completion_".concat(r.props.namespace.title,".csv");(0,W.Z)(a,n)}))})),(0,u.Z)((0,i.Z)(r),"toggleExplorer",(function(){r.setState({showExplorer:!r.state.showExplorer})})),r.columns=r.createColumns(e.lessons,e.cohorts),r.state={displayedMembers:[],lessonSortDirection:"ascending",lessonOrder:"createdAt",showExplorer:!1},r}return(0,l.Z)(a,[{key:"componentDidMount",value:function(){this.createDisplayedMembers()}},{key:"componentDidUpdate",value:function(e){this.props.cohorts===e.cohorts&&this.props.lessons===e.lessons||(this.createDisplayedMembers(),this.columns=this.createColumns(this.props.lessons,this.props.cohorts))}},{key:"createDisplayedMembers",value:function(){for(var e=[],t=0;t<this.props.cohorts.length;t++){for(var a=this.props.cohorts[t].members,n=0;n<a.length;n++)a[n].cohort=this.props.cohorts[t].title,a[n].lessonData||(a[n].lessonData={});e=e.concat(this.props.cohorts[t].members)}for(var r=0;r<e.length;r++){var s=e[r],o=O()(s.name).split(" ");o.length>1?(s.lastName=o.pop(),s.firstName=o.join(" ")):(s.firstName=o[0],s.lastName="")}this.setState({displayedMembers:e})}},{key:"createColumns",value:function(e,t){for(var a=this,r=this.props.t,s=[{Header:"Pic",accessor:"picture",Cell:function(e){return n.createElement("img",{className:"table-pic",src:"".concat(R.ZP,"/thumbnail/").concat(e.original.picture),alt:"Profile Pic"})},maxWidth:46,minWidth:46,filterable:!1,resizable:!1,sortable:!1,style:{color:"darkslategrey"}},(0,G.Z)({Header:r("first-name"),id:"first_name",accessor:"firstName",maxWidth:75,filterMethod:function(e,t){return L()(z()(t[e.id]),z()(e.value))}}),(0,G.Z)({Header:r("last-name"),id:"last_name",accessor:"lastName",maxWidth:75,filterMethod:function(e,t){return L()(z()(t[e.id]),z()(e.value))}}),(0,G.Z)({Header:r("common:email"),accessor:"email",maxWidth:200,filterMethod:function(e,t){return L()(z()(t[e.id]),z()(e.value))}}),{Header:r("common:cohort"),accessor:"cohort",style:{marginTop:"8px",color:"darkslategrey"},filterMethod:Ce,Filter:function(e){var a,r=e.filter,s=e.onChange,o=function(e){var t=e.target.value;s(t)};return a=r?fe()(r.value)?r.value.join(", "):r.value:"all",n.createElement("select",{onBlur:o,onChange:o,style:{width:"100%",backgroundColor:"ghostwhite"},value:a},n.createElement("option",{value:"all"},"Show All"),t.map((function(e,t){return n.createElement("option",{key:t,value:"".concat(e.title)},e.title)})))}}],o=function(t){var r="lesson_"+t;s.push({id:r,Header:n.createElement("span",{id:r},e[t].title),_lesson:e[t],Cell:a.accessorFactory(e,t),accessor:"lessonData",sortMethod:xe(e,t),filterMethod:we(e,t),Filter:function(e){var t=e.filter,a=e.onChange;return n.createElement("div",{style:{paddingLeft:"4px",paddingRight:"4px",paddingTop:"8px"}},n.createElement(le(),{ariaLabelledby:r,ariaControls:"dashboard-table",allowSameValues:!0,maxValue:100,minValue:0,value:t?t.value:{max:100,min:0},onChange:function(e){a(e)}}))}})},l=0;l<e.length;l++)o(l);return s}},{key:"assembleData",value:function(){for(var e=this.dashboardTable.table.getResolvedState().sortedData,t=e.length,a=new Array(t),n=this.props.lessons,r=0;r<t;r++){var s=e[r]._original;a[r]={name:s.name,firstName:s.firstName,lastName:s.lastName,email:s.email,cohort:s.cohort};for(var o=this.props.user.availableCustomFields,l=0;l<o.length;l++){var i=o[l].name;s.customFields?a[r][i]=s.customFields[i]:a[r][i]=null}for(var c=0;c<n.length;c++){var m=n[c]._id,u=s.lessonData;u&&u[m]?(u=u[m],a[r][n[c].title+"_question_progress"]=pe()(ue()(100*u.progress),100),a[r][n[c].title+"_time"]=ue()(u.spentTime/6e4),a[r][n[c].title+"_first_accessed"]=new Date(u.createdAt).toLocaleString(),a[r][n[c].title+"_last_accessed"]=new Date(u.updatedAt).toLocaleString()):(a[r][n[c].title+"_question_progress"]=0,a[r][n[c].title+"_time"]=0,a[r][n[c].title+"_first_accessed"]="",a[r][n[c].title+"_last_accessed"]="")}}return a}},{key:"reorderColumns",value:function(e,t){return Ne("Sort columns by "+e+" in "+t+" order"),"ascending"===t?this.columns.slice().sort((function(t,a){return t._lesson&&a._lesson?"title"===e?t._lesson.title.localeCompare(a._lesson.title):t._lesson[e]>a._lesson[e]?1:-1:1})):this.columns.slice().sort((function(t,a){return t._lesson&&a._lesson?"title"===e?a._lesson.title.localeCompare(t._lesson.title):t._lesson[e]<a._lesson[e]?1:-1:1}))}},{key:"renderSortButton",value:function(){var e,t=this,a=this.props.t;switch(this.state.lessonOrder){case"title":e=a("common:sort-alphabetically");break;case"createdAt":e=a("common:sort-create-date");break;case"updatedAt":e=a("common:sort-update-date")}return n.createElement(b.Z,{className:"sort-button-group"},n.createElement(ie.Z,{size:"sm",variant:"secondary",onSelect:function(e){t.columns=t.reorderColumns(e,t.state.lessonSortDirection),t.setState({lessonOrder:e})},id:"dropdown",title:n.createElement("small",null,e)},n.createElement(ce.Z.Item,{eventKey:"title"},n.createElement("small",null,a("common:sort-alphabetically"))),n.createElement(ce.Z.Item,{eventKey:"createdAt"},n.createElement("small",null,a("common:sort-create-date"))),n.createElement(ce.Z.Item,{eventKey:"updatedAt"},n.createElement("small",null,a("common:sort-update-date")))),n.createElement(Z.Z,{size:"sm",variant:"secondary",style:{marginLeft:2},onClick:function(){"ascending"===t.state.lessonSortDirection?(t.columns=t.reorderColumns(t.state.lessonOrder,"descending"),t.setState({lessonSortDirection:"descending"})):(t.columns=t.reorderColumns(t.state.lessonOrder,"ascending"),t.setState({lessonSortDirection:"ascending"}))},"aria-label":"ascending"===this.state.lessonSortDirection?a("common:sort-descending"):a("common:sort-ascending")},"ascending"===this.state.lessonSortDirection?n.createElement("i",{className:"fas fa-arrow-right"}):n.createElement("i",{className:"fas fa-arrow-left"})))}},{key:"render",value:function(){var e=this,t=this.props.t;if(this.state.showExplorer){var a=this.assembleData();a=(0,U.Z)(a);for(var r=[],s=["name","email","cohort"],o=0;o<this.props.lessons.length;o++){var l=this.props.lessons[o].title;r.push("".concat(l,"_question_progress")),r.push("".concat(l,"_time")),s.push("".concat(l,"_first_accessed")),s.push("".concat(l,"_last_accessed"))}for(var i=this.props.user.availableCustomFields,c=0;c<i.length;c++)s.push(i[c].name);return n.createElement(B.Z,{title:t("explorer-progress-title"),data:a,categorical:s,quantitative:r,close:this.toggleExplorer})}return n.createElement(n.Fragment,null,n.createElement("div",{className:"namespace-data-buttons"},this.renderSortButton(),n.createElement(b.Z,{className:"progress-button-group"},n.createElement(N.Z,{placement:"bottom",overlay:n.createElement(w.Z,{id:"csvTooltip"},t("save-as-csv"))},n.createElement(Z.Z,{size:"sm",variant:"secondary",onClick:this.saveCSV},n.createElement("i",{className:"fas fa-download"})," CSV")),n.createElement(N.Z,{placement:"bottom",overlay:n.createElement(w.Z,{id:"jsonTooltip"},t("save-as-json"))},n.createElement(Z.Z,{size:"sm",variant:"secondary",onClick:this.saveJSON},n.createElement("i",{className:"fas fa-download"})," JSON")))),n.createElement("div",{className:"namespace-data-page"},n.createElement(V.Z,{className:"progress-table",data:this.state.displayedMembers,columns:this.columns,t:t,ref:function(t){e.dashboardTable=t},onButtonClick:this.toggleExplorer})))}}]),a}(n.Component);Se.defaultProps={};var Me=(0,h.Z)(["namespace_data","common"])(Se),Pe=a(89308),_e=function(e){(0,c.Z)(a,e);var t=(0,m.Z)(a);function a(e){var n;(0,o.Z)(this,a),n=t.call(this,e),(0,u.Z)((0,i.Z)(n),"handleCohortChange",(function(e){var t=[];if(e)for(var a=0;a<e.length;a++)t=t.concat(e[a].data.members);n.setState({selectedCohorts:e,displayedMembers:t})})),(0,u.Z)((0,i.Z)(n),"showUser",(function(e){n.setState({actualMember:e})})),(0,u.Z)((0,i.Z)(n),"closeActualMember",(function(){n.setState({actualMember:null})}));for(var r=e.cohorts.map((function(e){return{label:e.title,value:e.title,data:e}})),s=[],l=0;l<e.cohorts.length;l++)s=s.concat(e.cohorts[l].members);return n.state={cohortOptions:r,selectedCohorts:r,displayedMembers:s,actualMember:null},n}return(0,l.Z)(a,[{key:"componentDidUpdate",value:function(e){if(this.props.cohorts!==e.cohorts){for(var t=this.props.cohorts.map((function(e){return{label:e.title,value:e.title,data:e}})),a=[],n=0;n<this.props.cohorts.length;n++)a=a.concat(this.props.cohorts[n].members);this.setState({cohortOptions:t,selectedCohorts:t,displayedMembers:a,actualMember:null})}}},{key:"renderMember",value:function(e,t){var a=this,r="scale-up "+(.3+.05*t)+"s";return n.createElement(n.Fragment,{key:t},n.createElement("div",{className:"cohort-member",role:"button",onClick:function(){return a.showUser(e)},onKeyPress:function(){return a.showUser(e)},style:{animation:r},tabIndex:0},n.createElement("div",{className:"cohort-member-name"},e.name),n.createElement("img",{src:R.ZP+"/thumbnail/"+e.picture,alt:"Member Profile Pic"}),n.createElement("div",{className:"cohort-member-email"},n.createElement("a",{href:"mailto:"+e.email},e.email))))}},{key:"renderCohort",value:function(){for(var e=this.state.displayedMembers,t=[],a=0;a<e.length;a++)t.push(this.renderMember(e[a],a));return t}},{key:"renderMemberLessons",value:function(e){for(var t=this.props.lessons,a=[],r=0,s=0,o=0,l=0;l<t.length;l++){var i=t[l]._id;if(e.lessonData&&e.lessonData[i]){var c=e.lessonData[i];r=pe()(ue()(100*c.progress),100),s=(0,ke.Z)(c.spentTime),o+=c.spentTime}else r=0,s=(0,ke.Z)(0);a.push(n.createElement("div",{key:l},n.createElement("div",{className:"cohort-actual-member-lesson-title"},t[l].title),n.createElement(Ee.Z,{"aria-label":"lesson-progress",className:"cohort-actual-member-lesson-progress",style:{float:"left",fontSize:"10px",height:"12px"},now:r,label:"".concat(r,"%")}),n.createElement("span",{className:"cohort-actual-member-lesson-time"},s)))}return o=(0,ke.Z)(o),n.createElement(n.Fragment,null,n.createElement("hr",null),n.createElement("div",{className:"cohort-actual-member-lesson-header"},"COURSE INFO"),n.createElement("div",{className:"cohort-actual-member-lesson-total"},"COURSE TOTAL TIME: ",o),n.createElement("div",{className:"lessons-area"},a))}},{key:"renderMemberBadges",value:function(e){for(var t=this.props.badges,a=(0,ke.Z)(e.spentTime),r=[],s=0;s<t.length;s++)L()(e.badges,t[s].name)&&r.push(n.createElement(n.Fragment,null,n.createElement(N.Z,{placement:"bottom",overlay:n.createElement(w.Z,{id:"isleTime"},t[s].description)},n.createElement("div",{className:"cohort-user-badge"},n.createElement("img",{src:R.ZP+"/badges/"+t[s].picture,alt:"User Badge"})))));return n.createElement(n.Fragment,null,n.createElement("div",null,"General User Info"),n.createElement(N.Z,{placement:"bottom",overlay:n.createElement(w.Z,{id:"isleTime"},"the time the user spent with ISLE")},n.createElement("span",{className:"user-info-time"},"ISLE TIME: ",a)),n.createElement(N.Z,{placement:"bottom",overlay:n.createElement(w.Z,{id:"isleTime"},"user score")},n.createElement("span",{className:"user-info-score"},"SCORE: ",e.score)),n.createElement("div",null),n.createElement("div",{className:"user-info-badges"},n.createElement("div",{className:"user-info-separator"},"Badges"),r))}},{key:"renderActualMember",value:function(){var e=this.state.actualMember,t=null;return e.createdAt&&(t=new Date(e.createdAt).toLocaleDateString()),n.createElement("div",{className:"cohort-actual-member"},n.createElement("button",{onClick:this.closeActualMember,className:"cohort-actual-member-exit empty-button"},"\u2715"),n.createElement("img",{className:"cohort-actual-member-portrait",src:R.ZP+"/avatar/"+e.picture,alt:"User Profile Pic"}),n.createElement("div",{className:"cohort-actual-member-portrait-shadow"}),t?n.createElement("div",{className:"cohort-actual-member-registered"},"registered since ",t):null,n.createElement("div",{className:"cohort-actual-member-name"},n.createElement("h3",null,e.name),n.createElement("div",null,e.email)),n.createElement("div",{className:"cohort-actual-member-info"},this.renderMemberLessons(e)),n.createElement("div",{className:"cohort-actual-member-badges"},this.renderMemberBadges(e)))}},{key:"render",value:function(){return n.createElement("div",{className:"namespace-data-page"},n.createElement("div",{style:{width:"100%",height:"40px"}},n.createElement(Pe.ZP,{value:this.state.selectedCohorts,isMulti:!0,name:"cohorts","aria-label":"Select cohorts",placeholder:"Select cohorts to display",options:this.state.cohortOptions,onChange:this.handleCohortChange})),n.createElement("div",{className:"cohort-page"},this.renderCohort()),this.state.actualMember?this.renderActualMember():null)}}]),a}(n.Component);_e.defaultProps={};var Ae=_e,De=a(12087),Te=a.n(De),Fe=p()("isle:progress-page");function Le(e,t){return function(a,n){var r=n[a.id][e[t]._id];if(ge()(r))return 0===a.value.min;var s=r._sumPoints;return s>=a.value.min&&s<=a.value.max}}function Ie(e,t){if("all"===e.value)return!0;var a=e.pivotId||e.id;return void 0===t[a]||(fe()(e.value)?L()(e.value,String(t[a])):String(t[a])===e.value)}function ze(e,t){return function(a,n){return a=a[e[t]._id],n=n[e[t]._id],a||n?a&&!n?1:!a&&n?-1:a._sumPoints>n._sumPoints?1:a._sumPoints<n._sumPoints?-1:0:0}}var He=function(e){(0,c.Z)(a,e);var t=(0,m.Z)(a);function a(e){var r;return(0,o.Z)(this,a),r=t.call(this,e),(0,u.Z)((0,i.Z)(r),"accessorFactory",(function(e,t){return function(a){var r=a.original.lessonGrades||{},s=e[t],o=s._id,l="";if(s.metadata&&s.metadata.grades&&(l+=" / ".concat(e[t].metadata.grades.maxPoints)),r=r[o]){var i=[];for(var c in r)Te()(r,c)&&"_sumPoints"!==c&&i.push(n.createElement("p",{style:{margin:0},key:c},c,": ",n.createElement("b",{style:{float:"right",marginLeft:12}},r[c])));return n.createElement(N.Z,{placement:"top",overlay:n.createElement(te.Z,{className:"tickets-description-overlay",body:!0,id:"description-tooltip"},i)},n.createElement("p",null,r._sumPoints,l))}return n.createElement("span",null)}})),(0,u.Z)((0,i.Z)(r),"saveJSON",(function(){var e=r.assembleData(),t=new Blob([JSON.stringify(e)],{type:"application/json"}),a="grades_".concat(r.props.namespace.title,".json");(0,W.Z)(t,a)})),(0,u.Z)((0,i.Z)(r),"saveCSV",(function(){var e=r.assembleData();E()(e,{header:!0},(function(e,t){if(e)return r.props.addNotification({title:"Error encountered",message:"Encountered an error while creating CSV: "+e.message,level:"error",position:"tl"});var a=new Blob([t],{type:"text/plain"}),n="grades_".concat(r.props.namespace.title,".csv");(0,W.Z)(a,n)}))})),(0,u.Z)((0,i.Z)(r),"toggleExplorer",(function(){r.setState({showExplorer:!r.state.showExplorer})})),r.columns=r.createColumns(e.lessons,e.cohorts),r.state={displayedMembers:[],lessonSortDirection:"ascending",lessonOrder:"createdAt",showExplorer:!1},r}return(0,l.Z)(a,[{key:"componentDidMount",value:function(){this.createDisplayedMembers()}},{key:"componentDidUpdate",value:function(e){this.props.cohorts===e.cohorts&&this.props.lessons===e.lessons||(this.createDisplayedMembers(),this.columns=this.createColumns(this.props.lessons,this.props.cohorts))}},{key:"createDisplayedMembers",value:function(){for(var e=[],t=0;t<this.props.cohorts.length;t++){for(var a=this.props.cohorts[t].members,n=0;n<a.length;n++)a[n].cohort=this.props.cohorts[t].title,a[n].lessonGrades||(a[n].lessonGrades={});e=e.concat(this.props.cohorts[t].members)}for(var r=0;r<e.length;r++){var s=e[r],o=O()(s.name).split(" ");o.length>1?(s.lastName=o.pop(),s.firstName=o.join(" ")):(s.firstName=o[0],s.lastName="")}this.setState({displayedMembers:e})}},{key:"createColumns",value:function(e,t){for(var a=this,r=this.props.t,s=[{Header:"Pic",accessor:"picture",Cell:function(e){return n.createElement("img",{className:"table-pic",src:"".concat(R.ZP,"/thumbnail/").concat(e.original.picture),alt:"Profile Pic"})},maxWidth:46,minWidth:46,filterable:!1,resizable:!1,sortable:!1,style:{color:"darkslategrey"}},(0,G.Z)({Header:r("first-name"),id:"first_name",accessor:"firstName",maxWidth:75,filterMethod:function(e,t){return L()(z()(t[e.id]),z()(e.value))}}),(0,G.Z)({Header:r("last-name"),id:"last_name",accessor:"lastName",maxWidth:75,filterMethod:function(e,t){return L()(z()(t[e.id]),z()(e.value))}}),(0,G.Z)({Header:r("common:email"),accessor:"email",maxWidth:200,filterMethod:function(e,t){return L()(z()(t[e.id]),z()(e.value))}}),{Header:r("common:cohort"),accessor:"cohort",style:{marginTop:"8px",color:"darkslategrey"},filterMethod:Ie,Filter:function(e){var a,r=e.filter,s=e.onChange,o=function(e){var t=e.target.value;s(t)};return a=r?fe()(r.value)?r.value.join(", "):r.value:"all",n.createElement("select",{onBlur:o,onChange:o,style:{width:"100%",backgroundColor:"ghostwhite"},value:a},n.createElement("option",{value:"all"},"Show All"),t.map((function(e,t){return n.createElement("option",{key:t,value:"".concat(e.title)},e.title)})))}}],o=function(t){var r="lesson_"+t;s.push({id:r,Header:n.createElement("span",{id:r},e[t].title),_lesson:e[t],Cell:a.accessorFactory(e,t),sortMethod:ze(e,t),filterMethod:Le(e,t),Filter:function(a){var s=a.filter,o=a.onChange,l=0;e[t].metadata&&e[t].metadata.grades&&(l=e[t].metadata.grades.maxPoints);var i={max:l,min:0};return n.createElement("div",{style:{paddingLeft:"4px",paddingRight:"4px",paddingTop:"8px"}},n.createElement(le(),{ariaLabelledby:r,ariaControls:"dashboard-table",allowSameValues:!0,maxValue:l,minValue:0,value:s?s.value:i,onChange:function(e){o(e)}}))},accessor:"lessonGrades"})},l=0;l<e.length;l++)o(l);return s}},{key:"reorderColumns",value:function(e,t){return Fe("Sort columns by "+e+" in "+t+" order"),"ascending"===t?this.columns.slice().sort((function(t,a){return t._lesson&&a._lesson?"title"===e?t._lesson.title.localeCompare(a._lesson.title):t._lesson[e]>a._lesson[e]?1:-1:1})):this.columns.slice().sort((function(t,a){return t._lesson&&a._lesson?"title"===e?a._lesson.title.localeCompare(t._lesson.title):t._lesson[e]<a._lesson[e]?1:-1:1}))}},{key:"assembleData",value:function(){for(var e=this.dashboardTable.table.getResolvedState().sortedData,t=e.length,a=new Array(t),n=this.props.lessons,r=0;r<t;r++){var s=e[r]._original;a[r]={name:s.name,firstName:s.firstName,lastName:s.lastName,email:s.email,cohort:s.cohort};for(var o=this.props.user.availableCustomFields,l=0;l<o.length;l++){var i=o[l].name;s.customFields?a[r][i]=s.customFields[i]:a[r][i]=null}for(var c=0;c<n.length;c++){var m=n[c]._id,u=s.lessonGrades;u&&u[m]?(u=u[m],a[r][n[c].title]=u._sumPoints):a[r][n[c].title]=""}}return a}},{key:"renderSortButton",value:function(){var e,t=this,a=this.props.t;switch(this.state.lessonOrder){case"title":e=a("common:sort-alphabetically");break;case"createdAt":e=a("common:sort-create-date");break;case"updatedAt":e=a("common:sort-update-date")}return n.createElement(b.Z,{className:"sort-button-group"},n.createElement(ie.Z,{size:"sm",variant:"secondary",onSelect:function(e){t.columns=t.reorderColumns(e,t.state.lessonSortDirection),t.setState({lessonOrder:e})},id:"dropdown",title:n.createElement("small",null,e)},n.createElement(ce.Z.Item,{eventKey:"title"},n.createElement("small",null,a("common:sort-alphabetically"))),n.createElement(ce.Z.Item,{eventKey:"createdAt"},n.createElement("small",null,a("common:sort-create-date"))),n.createElement(ce.Z.Item,{eventKey:"updatedAt"},n.createElement("small",null,a("common:sort-update-date")))),n.createElement(Z.Z,{size:"sm",variant:"secondary",style:{marginLeft:2},onClick:function(){"ascending"===t.state.lessonSortDirection?(t.columns=t.reorderColumns(t.state.lessonOrder,"descending"),t.setState({lessonSortDirection:"descending"})):(t.columns=t.reorderColumns(t.state.lessonOrder,"ascending"),t.setState({lessonSortDirection:"ascending"}))},"aria-label":"ascending"===this.state.lessonSortDirection?a("common:sort-descending"):a("common:sort-ascending")},"ascending"===this.state.lessonSortDirection?n.createElement("i",{className:"fas fa-arrow-right"}):n.createElement("i",{className:"fas fa-arrow-left"})))}},{key:"render",value:function(){var e=this,t=this.props.t;if(this.state.showExplorer){var a=this.assembleData();a=(0,U.Z)(a);for(var r=[],s=["name","email","cohort"],o=0;o<this.props.lessons.length;o++)r.push(this.props.lessons[o].title);for(var l=this.props.user.availableCustomFields,i=0;i<l.length;i++)s.push(l[i].name);return n.createElement(B.Z,{title:t("explorer-grades-title"),data:a,categorical:s,quantitative:r,close:this.toggleExplorer})}return n.createElement(n.Fragment,null,n.createElement("div",{className:"namespace-data-buttons"},this.renderSortButton(),n.createElement(b.Z,{className:"progress-button-group"},n.createElement(N.Z,{placement:"bottom",overlay:n.createElement(w.Z,{id:"csvTooltip"},t("save-as-csv"))},n.createElement(Z.Z,{size:"sm",variant:"secondary",onClick:this.saveCSV},n.createElement("i",{className:"fas fa-download"})," CSV")),n.createElement(N.Z,{placement:"bottom",overlay:n.createElement(w.Z,{id:"jsonTooltip"},t("save-as-json"))},n.createElement(Z.Z,{size:"sm",variant:"secondary",onClick:this.saveJSON},n.createElement("i",{className:"fas fa-download"})," JSON")))),n.createElement("div",{className:"namespace-data-page"},n.createElement(V.Z,{className:"grades-table",data:this.state.displayedMembers,columns:this.columns,t:t,ref:function(t){e.dashboardTable=t},onButtonClick:this.toggleExplorer})))}}]),a}(n.Component);He.defaultProps={};var Oe=(0,h.Z)(["namespace_data","common"])(He),Be=a(87462),Ue=a(63366),Ve=a(47617),je=a.n(Ve),Re=a(41309),We=a(42559),Ke=a(28785),Ge=a(78265),Je=a.n(Ge),qe=["children","name","className","checked","type","onChange","value","disabled","inputRef"],Ye=function(){},$e=n.forwardRef((function(e,t){var a=e.children,r=e.name,s=e.className,o=e.checked,l=e.type,i=e.onChange,c=e.value,m=e.disabled,u=e.inputRef,d=(0,Ue.Z)(e,qe),p=(0,n.useState)(!1),h=p[0],f=p[1],v=(0,n.useCallback)((function(e){"INPUT"===e.target.tagName&&f(!0)}),[]),g=(0,n.useCallback)((function(e){"INPUT"===e.target.tagName&&f(!1)}),[]);return n.createElement(Z.Z,(0,Be.Z)({},d,{ref:t,className:Je()(s,h&&"focus",m&&"disabled"),type:void 0,active:!!o,as:"label"}),n.createElement("input",{name:r,type:l,value:c,ref:u,autoComplete:"off",checked:!!o,disabled:!!m,onFocus:v,onBlur:g,onChange:i||Ye}),a)}));$e.displayName="ToggleButton";var Qe=$e,Xe=["children","type","name","value","onChange"],et=n.forwardRef((function(e,t){var a=(0,Re.Ch)(e,{value:"onChange"}),r=a.children,s=a.type,o=a.name,l=a.value,i=a.onChange,c=(0,Ue.Z)(a,Xe),m=function(){return null==l?[]:[].concat(l)};return"radio"!==s||o||je()(!1),n.createElement(b.Z,(0,Be.Z)({},c,{ref:t,toggle:!0}),(0,Ke.U)(r,(function(e){var t=m(),a=e.props,r=a.value,l=a.onChange;return n.cloneElement(e,{type:s,name:e.name||o,checked:-1!==t.indexOf(r),onChange:(0,We.Z)(l,(function(e){return function(e,t){if(i){var a=m(),n=-1!==a.indexOf(e);"radio"!==s?i(n?a.filter((function(t){return t!==e})):[].concat(a,[e]),t):!n&&i&&i(e,t)}}(r,e)}))})})))}));et.defaultProps={type:"radio",vertical:!1},et.Button=Qe;var tt=et,at=p()("isle-dashboard:namespace-data:actions-page"),nt=function(e){(0,c.Z)(a,e);var t=(0,m.Z)(a);function a(e){var n;(0,o.Z)(this,a),n=t.call(this,e),(0,u.Z)((0,i.Z)(n),"retrieveActions",(function(){n.props.getNamespaceActions({namespaceID:n.props.namespace._id,namespaceTitle:n.props.namespace.title})})),(0,u.Z)((0,i.Z)(n),"handleRadioChange",(function(e){n.setState({anonymized:!n.state.anonymized})})),(0,u.Z)((0,i.Z)(n),"handleCohortChange",(function(e){for(var t=[],a=0;a<e.length;a++)t=t.concat(e[a].value.members);n.setState({selectedCohorts:e,displayedMembers:t},(function(){at("New number of displayed members: "+n.state.displayedMembers.length)}))})),(0,u.Z)((0,i.Z)(n),"hideLessonActions",(function(){n.setState({lessonActionsPage:!1})})),(0,u.Z)((0,i.Z)(n),"showLessonActions",(function(e){n.setState({lessonActionsPage:!0,actualLesson:e})}));for(var r=e.cohorts.map((function(e){return{label:e.title,value:e}})),s=[],l=0;l<e.cohorts.length;l++)s=s.concat(e.cohorts[l].members);return n.state={cohortOptions:r,selectedCohorts:r,displayedMembers:s,lessonActionsPage:!1,actualLesson:null,anonymized:!0},n}return(0,l.Z)(a,[{key:"renderCohorts",value:function(){return n.createElement(n.Fragment,null,n.createElement("div",{className:"actions-page-cohorts"},n.createElement("div",{style:{width:"400px",height:"40px"}},n.createElement(Pe.ZP,{value:this.state.selectedCohorts,isMulti:!0,name:"cohorts",options:this.state.cohortOptions,onChange:this.handleCohortChange}))))}},{key:"renderLessonActionsPage",value:function(){return n.createElement("div",{className:"actions-page-lesson-action-page"},n.createElement("div",{className:"lesson-action-page-resize"}," \ud83d\uddd6"),n.createElement("button",{onClick:this.hideLessonActions,className:"lesson-action-page-exit empty-button"},"\u2715"),n.createElement("div",{className:"lesson-action-page-title"},this.state.actualLesson.title),n.createElement("div",{className:"lesson-action-page-filter"},this.renderCohorts()))}},{key:"renderLessons",value:function(){for(var e=this,t=this.props.namespace.lessons,a=[],r=function(r){a.push(n.createElement("button",{key:r,onClick:function(){return e.showLessonActions(t[r])},className:"actions-page-lesson"},n.createElement("div",{className:"actions-page-lesson-title"},t[r].title)))},s=0;s<t.length;s++)r(s);return n.createElement("div",{className:"actions-page"},n.createElement("div",{className:"actions-page-export"},this.renderExportSection()),n.createElement("div",{className:"actions-page-lessons"},a))}},{key:"renderExportSection",value:function(){return n.createElement(n.Fragment,null,n.createElement("div",{className:"actions-page-export-title"},"Export Actions"),n.createElement(tt,{name:"options",onChange:this.handleRadioChange,type:"radio",size:"small",value:this.state.anonymized},n.createElement(Qe,{size:"sm",variant:"light",value:!1,style:{fontSize:"12px",color:this.state.anonymized?"#A9A9A9":"black"}},"Original"),n.createElement(Qe,{size:"sm",variant:"light",value:!0,style:{fontSize:"12px",color:this.state.anonymized?"black":"#A9A9A9"}},"Anonymized")),n.createElement(Z.Z,{onClick:this.retrieveActions},"Save all namespace actions"))}},{key:"render",value:function(){return n.createElement("div",{className:"namespace-data-page"},this.renderLessons(),this.state.lessonActionsPage?this.renderLessonActionsPage():null)}}]),a}(n.Component);nt.defaultProps={};var rt=nt,st=a(87757),ot=a.n(st),lt=a(15861),it=a(51527),ct=a.n(it),mt=a(14444),ut=a.n(mt),dt=a(91499),pt=a.n(dt),ht=a(9050),ft=a(34570),vt=a(96027),gt=a(70384),Et=p()("isle:files-page"),bt=/ticket=([^&]*)/,Zt=function(e){(0,c.Z)(r,e);var t,a=(0,m.Z)(r);function r(e){var t;return(0,o.Z)(this,r),t=a.call(this,e),(0,u.Z)((0,i.Z)(t),"toggleTicketModal",(function(){t.setState({showTicketModal:!t.state.showTicketModal})})),(0,u.Z)((0,i.Z)(t),"createColumns",(function(){for(var e=t.props.t,a=t.props.tickets||[],r=ut(),s=0,o=0;o<a.length;o++)a[o].createdAt>s&&(s=a[o].createdAt),a[o].updatedAt>s&&(s=a[o].updatedAt),a[o].createdAt<r&&(r=a[o].createdAt),a[o].updatedAt<r&&(r=a[o].updatedAt);return s=ct()(s),r=ct()(r),[{Header:"Pic",accessor:"user.picture",Cell:function(e){return n.createElement("img",{className:"table-pic",src:"".concat(R.ZP,"/thumbnail/").concat(e.value),alt:"Profile Pic"})},style:{marginTop:"8px",color:"darkslategrey"},maxWidth:46,minWidth:46,filterable:!1,resizable:!1,sortable:!1},(0,G.Z)({Header:e("common:name"),accessor:"user.name",style:{marginTop:"8px",color:"darkslategrey"}}),(0,G.Z)({Header:e("common:email"),accessor:"user.email",style:{marginTop:"8px",color:"darkslategrey"}}),(0,G.Z)({Header:e("common:title"),accessor:"title",minWidth:200}),{Header:e("common:description"),accessor:"description",Cell:function(e){return n.createElement(N.Z,{placement:"top",overlay:n.createElement(te.Z,{className:"tickets-description-overlay",body:!0,id:"description-tooltip"},e.value)},n.createElement("p",{className:"tickets-description"},e.value))},style:{marginTop:"8px",color:"darkslategrey"},minWidth:300},(0,G.Z)({Header:e("common:component"),accessor:"component"}),{Header:"Reply",accessor:"_id",Cell:function(a){return n.createElement(N.Z,{placement:"left",overlay:n.createElement(w.Z,{id:"open-ticket-tooltip"},e("common:open-ticket-tooltip"))},n.createElement(Z.Z,{size:"sm",variant:"outline-secondary",onClick:function(){t.setState({selectedTicket:a.original},t.toggleTicketModal)}},n.createElement("i",{className:"fas fa-reply"})))},resizable:!1,filterable:!1,sortable:!1,width:45},(0,ft.Z)({Header:e("common:priority"),accessor:"priority",labels:["Low","Middle","High"],maxWidth:200,Cell:function(e){if(!e.value)return null;var a,r,s;switch(e.value){case"Low":a="secondary",r="Middle";break;case"Middle":a="warning",r="High",s="Low";break;case"High":a="danger",s="Middle"}return n.createElement("div",null,n.createElement(x.Z,{variant:a,style:{marginRight:6,fontSize:"1em"}},e.value),n.createElement(Z.Z,{size:"sm",variant:"outline-secondary",onClick:function(){t.props.updatePriority(e.original._id,r)},disabled:!r},n.createElement("i",{className:"fas fa-arrow-up"})),n.createElement(Z.Z,{size:"sm",variant:"outline-secondary",onClick:function(){t.props.updatePriority(e.original._id,s)},disabled:!s},n.createElement("i",{className:"fas fa-arrow-down"})))}}),(0,G.Z)({Header:e("common:lesson"),accessor:"lesson.title",maxWidth:140,Cell:function(a){if(!a.value)return null;var r="".concat(R.ZP,"/").concat(t.props.namespace.title,"/").concat(a.value);return n.createElement(N.Z,{placement:"right",overlay:n.createElement(w.Z,{id:"open-lesson-tooltip"},e("namespace_data:open-lesson-new-tab"))},n.createElement(x.Z,{variant:"light",style:{fontSize:"1em"}},n.createElement("a",{href:r,target:"_blank",rel:"noopener noreferrer"},a.value)))}}),(0,vt.Z)({Header:e("common:done"),accessor:"done",trueLabel:e("common:done"),falseLabel:e("common:not-done")}),{Header:e("common:platform"),accessor:"platform",style:{marginTop:"2px",color:"darkslategrey",fontSize:24,textAlign:"center",cursor:"pointer"},Cell:function(e){if(e.value){var t=n.createElement(ht.Z,{id:"popover-data",style:{maxWidth:500,maxHeight:"80vh",overflowY:"auto"},arrowProps:{display:"none"}},n.createElement(ht.Z.Title,{as:"h3"},e.row._original.title),n.createElement(ht.Z.Content,{style:{backgroundColor:"lightblue"}},n.createElement("pre",null,JSON.stringify(pt()(e.value,["description"]),null,2))));return n.createElement(N.Z,{trigger:"click",placement:"left",overlay:t},n.createElement("i",{className:"data-icon fas fa-tablet-alt"}))}return null},maxWidth:75,resizable:!1,filterable:!1,sortable:!1},(0,K.Z)({Header:e("created-at"),accessor:"createdAt",startDate:r,endDate:s,t:e})]})),(0,u.Z)((0,i.Z)(t),"toggleExplorer",(function(){t.setState({showExplorer:!t.state.showExplorer})})),(0,u.Z)((0,i.Z)(t),"assembleExplorerData",(function(){for(var e=t.props.tickets,a=[],n=0;n<e.length;n++){var r=e[n],s={};s.component=r.component,s.title=r.title,s.description=r.description,s.lesson=r.lesson?r.lesson.title:null,s.messages=r.messages.length,s.attachments=r.attachments.length,s.user=r.user.email,s.done=r.done,s.priority=r.priority,s.browser="".concat(r.platform.name," ").concat(r.platform.version);var o=r.platform.os;s.os="".concat(o.family," ").concat(o.version?o.version:""," ").concat(o.architecture,"bit"),s.createdAt=r.createdAt,s.updatedAt=r.updatedAt,a.push(s)}return a=(0,U.Z)(a)})),t.state={showTicketModal:!1,selectedTicket:null,showExplorer:!1},t.columns=t.createColumns(),t}return(0,l.Z)(r,[{key:"componentDidMount",value:(t=(0,lt.Z)(ot().mark((function e(){var t,a,n,r;return ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Et("Component did mount..."),e.next=3,this.props.getCourseTickets(this.props.namespace._id);case 3:if(!this.props.history.location.search){e.next=16;break}if(!(t=bt.exec(this.props.history.location.search))||!t[1]){e.next=16;break}a=this.props.tickets,n=0;case 8:if(!(n<a.length)){e.next=16;break}if((r=a[n])._id!==t[1]){e.next=13;break}return this.setState({selectedTicket:r,showTicketModal:!0}),e.abrupt("break",16);case 13:n++,e.next=8;break;case 16:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this.props.t;return this.state.showExplorer?n.createElement(B.Z,{title:e("explorer-tickets-title"),data:this.assembleExplorerData(),categorical:["component","lesson","done","createdAt","updatedAt","priority","browser","os"],quantitative:["messages","attachments"],close:this.toggleExplorer}):n.createElement("div",{className:"namespace-data-page"},n.createElement(V.Z,{data:this.props.tickets,columns:this.columns,t:e,onButtonClick:this.toggleExplorer}),this.state.showTicketModal?n.createElement(gt.Z,{show:this.state.showTicketModal,onHide:this.toggleTicketModal,ticket:this.state.selectedTicket,submitTicketMessage:this.props.submitTicketMessage,openTicket:this.props.openTicket,closeTicket:this.props.closeTicket}):null)}}]),r}(n.Component);Zt.defaultProps={tickets:[]};var yt=(0,h.Z)(["namespace_data","common"])(Zt),kt=p()("isle-dashboard:namespace-data"),Nt=function(e){(0,c.Z)(a,e);var t=(0,m.Z)(a);function a(e){var n,r;switch((0,o.Z)(this,a),n=t.call(this,e),(0,u.Z)((0,i.Z)(n),"handleUpload",(function(e){kt("Uploading file...");var t=e.target.files[0],a=new FormData;a.append("file",t,t.name),a.append("namespaceName",n.props.namespace.title),a.append("owner","true"),n.props.uploadFile({formData:a,user:n.props.user})})),(0,u.Z)((0,i.Z)(n),"handleAnnouncementDeletion",(function(e,t){n.props.deleteAnnouncement({namespaceName:n.props.namespace.title,index:t,createdAt:e})})),(0,u.Z)((0,i.Z)(n),"handleAnnouncementEdit",(function(e){n.props.editAnnouncement({namespaceName:n.props.namespace.title,announcement:e})})),(0,u.Z)((0,i.Z)(n),"handleAnnouncementCreation",(function(e){n.props.addAnnouncement({namespaceName:n.props.namespace.title,announcement:e})})),(0,u.Z)((0,i.Z)(n),"handleFileDeletion",(function(e,t){n.props.deleteFile(e,n.props.namespace.title,t)})),(0,u.Z)((0,i.Z)(n),"submitTicketMessage",(function(e){var t=e.message,a=e.ticketID;n.props.sendTicketMessage({message:t,ticketID:a,user:n.props.user})})),(0,u.Z)((0,i.Z)(n),"handleSelect",(function(e){e=Number(e);var t=n.props.namespace.title;switch(e){case 1:n.props.history.replace("/namespace-data/".concat(t,"/announcements"));break;case 2:n.props.history.replace("/namespace-data/".concat(t,"/progress"));break;case 3:n.props.history.replace("/namespace-data/".concat(t,"/grades"));break;case 4:n.props.history.replace("/namespace-data/".concat(t,"/cohorts"));break;case 5:n.props.history.replace("/namespace-data/".concat(t,"/owner-files"));break;case 6:n.props.history.replace("/namespace-data/".concat(t,"/student-files"));break;case 7:n.props.history.replace("/namespace-data/".concat(t,"/tickets"));break;case 8:n.props.history.replace("/namespace-data/".concat(t,"/actions"))}n.setState({activePage:e})})),e.match.params.subpage){default:r=1;break;case"progress":r=2;break;case"grades":r=3;break;case"cohorts":r=4;break;case"owner-files":r=5;break;case"student-files":r=6;break;case"tickets":r=7;break;case"actions":r=8}return n.state={activePage:r},n}return(0,l.Z)(a,[{key:"componentDidMount",value:function(){this.props.getBadges()}},{key:"renderPage",value:function(){switch(this.state.activePage){case 1:return n.createElement(se,{namespace:this.props.namespace,editAnnouncement:this.handleAnnouncementEdit,deleteAnnouncement:this.handleAnnouncementDeletion,addAnnouncement:this.handleAnnouncementCreation,user:this.props.user});case 2:return n.createElement(Me,{adjustProgress:this.props.adjustProgress,addNotification:this.props.addNotification,namespace:this.props.namespace,cohorts:this.props.namespace.cohorts,lessons:this.props.namespace.lessons,user:this.props.user});case 3:return n.createElement(Oe,{addNotification:this.props.addNotification,namespace:this.props.namespace,cohorts:this.props.namespace.cohorts,lessons:this.props.namespace.lessons,user:this.props.user});case 4:return n.createElement(Ae,{badges:this.props.badges,cohorts:this.props.namespace.cohorts,lessons:this.props.namespace.lessons});case 5:return n.createElement(ee,{ownerFiles:!0,files:this.props.namespace.ownerFiles,namespace:this.props.namespace,handleUpload:this.handleUpload,handleFileDeletion:this.handleFileDeletion,addNotification:this.props.addNotification,getFiles:this.props.getOwnerFiles});case 6:return n.createElement(ee,{files:this.props.namespace.files,namespace:this.props.namespace,handleUpload:this.handleUpload,handleFileDeletion:this.handleFileDeletion,addNotification:this.props.addNotification,getFiles:this.props.getFiles});case 7:return n.createElement(yt,{tickets:this.props.namespace.tickets,namespace:this.props.namespace,getCourseTickets:this.props.getCourseTickets,submitTicketMessage:this.submitTicketMessage,openTicket:this.props.openTicket,closeTicket:this.props.closeTicket,updatePriority:this.props.updatePriority,history:this.props.history});case 8:return n.createElement(rt,{namespace:this.props.namespace,getNamespaceActions:this.props.getNamespaceActions,user:this.props.user,cohorts:this.props.namespace.cohorts})}}},{key:"render",value:function(){var e=this.props.t;if(!this.props.namespace._id)return n.createElement("div",{className:"namespace-data-div"},n.createElement(f.Z,{variant:"danger"},e("common:no-course-selected")));var t=this.renderPage();return n.createElement("div",{className:"namespace-data-div"},n.createElement("div",{className:"namespace-data-navbar"},n.createElement(v.Z,{variant:"pills",className:"namespace-data-navbar-pills",activeKey:this.state.activePage,onSelect:this.handleSelect},n.createElement(v.Z.Item,null,n.createElement(v.Z.Link,{eventKey:"1",title:"Announcements"},e("common:announcements"))),n.createElement(v.Z.Item,null,n.createElement(v.Z.Link,{eventKey:"2",title:"Progress"},e("common:progress"))),n.createElement(v.Z.Item,null,n.createElement(v.Z.Link,{eventKey:"3",title:"Grades"},e("grades"))),n.createElement(v.Z.Item,null,n.createElement(v.Z.Link,{eventKey:"4",title:"Cohorts"},e("common:cohorts"))),n.createElement(v.Z.Item,null,n.createElement(v.Z.Link,{eventKey:"5",title:"Owner Files"},e("owner-files"))),n.createElement(v.Z.Item,null,n.createElement(v.Z.Link,{eventKey:"6",title:"Student Files"},e("student-files"))),n.createElement(v.Z.Item,null,n.createElement(v.Z.Link,{eventKey:"7",title:"Tickets",disabled:!this.props.namespace.enableTicketing},e("common:tickets"))),n.createElement(v.Z.Item,null,n.createElement(v.Z.Link,{eventKey:"8",title:"Actions",disabled:!0},e("common:actions"))))),n.createElement("div",{className:"namespace-data-page-container",style:{overflowY:"auto"}},t))}}]),a}(n.Component);Nt.defaultProps={badges:null};var wt=(0,h.Z)(["namespace_data","common"])(Nt),xt=a(33357),Ct=a(41985),St=a(605);function Mt(e,t){return{type:xt.wx,payload:{announcement:e,namespaceName:t}}}function Pt(e,t){return{type:xt.H0,payload:{announcement:e,namespaceName:t}}}function _t(e,t){return{type:xt.wd,payload:{index:e,namespaceName:t}}}var At=function(){var e=(0,lt.Z)(ot().mark((function e(t,a){var n,r,s;return ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.namespaceName,r=a.announcement,e.prev=1,e.next=4,St.eC.post(R.ZP+"/new_announcement",{namespaceName:n,announcement:r});case 4:s=e.sent,(0,Ct.wN)(t,{message:s.data.message,level:"success"}),t(Pt(r,n)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),(0,Ct.EG)(t,e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,a){return e.apply(this,arguments)}}(),Dt=function(e){return function(){var t=(0,lt.Z)(ot().mark((function t(a){var n,r;return ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.namespaceName,r=a.announcement,t.next=3,At(e,{namespaceName:n,announcement:r});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Tt=function(){var e=(0,lt.Z)(ot().mark((function e(t,a){var n,r,s,o;return ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.namespaceName,r=a.createdAt,s=a.index,e.prev=1,e.next=4,St.eC.post(R.ZP+"/delete_announcement",{namespaceName:n,createdAt:r});case 4:o=e.sent,(0,Ct.wN)(t,{message:o.data.message,level:"success"}),t(_t(s,n)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),(0,Ct.EG)(t,e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,a){return e.apply(this,arguments)}}(),Ft=function(e){return function(){var t=(0,lt.Z)(ot().mark((function t(a){var n,r,s;return ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.namespaceName,r=a.createdAt,s=a.index,t.next=3,Tt(e,{namespaceName:n,createdAt:r,index:s});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Lt=function(){var e=(0,lt.Z)(ot().mark((function e(t,a){var n,r,s;return ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.namespaceName,r=a.announcement,e.prev=1,e.next=4,St.eC.post(R.ZP+"/edit_announcement",{namespaceName:n,announcement:r});case 4:s=e.sent,(0,Ct.wN)(t,{message:s.data.message,level:"success"}),t(Mt(r,n)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),(0,Ct.EG)(t,e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,a){return e.apply(this,arguments)}}(),It=function(e){return function(){var t=(0,lt.Z)(ot().mark((function t(a){var n,r;return ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.namespaceName,r=a.announcement,t.next=3,Lt(e,{namespaceName:n,announcement:r});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},zt=a(96128),Ht=a(1725),Ot=a(905),Bt=a(82406);var Ut=(0,r.$j)((function(e){return{badges:e.badges,user:e.user,namespace:e.namespace}}),(function(e){return{adjustProgress:(0,Ot.Tm)(e),getBadges:(0,zt.Zl)(e),getCourseTickets:(0,Bt.P3)(e),getFiles:(0,Ht.TK)(e),getOwnerFiles:(0,Ht.Ru)(e),getNamespaceActions:(0,Ot.qw)(e),addNotification:(0,Ct.pP)(e),deleteFile:(0,Ht.ns)(e),deleteAnnouncement:Ft(e),editAnnouncement:It(e),addAnnouncement:Dt(e),sendTicketMessage:(0,Bt.fG)(e),closeTicket:(0,Bt.xG)(e),openTicket:(0,Bt.mJ)(e),uploadFile:(0,Ht.E8)(e),updatePriority:(0,Bt.Cq)(e)}}))(wt),Vt=(0,s.EN)(Ut)},86037:function(e,t,a){var n=a(41488),r=a(4846),s=a.n(r),o=a(50288),l=a.n(o),i=a(12699),c=a.n(i),m=a(72488),u=a.n(m),d=(a(87815),function(e,t){var a=t[e.pivotId||e.id];return a>=e.value.min&&a<=e.value.max}),p=function(e){return u()(e,-2)};t.Z=function(e){var t=e.Header,a=e.accessor,r=e.Cell,o=e.minValue,i=void 0===o?0:o,m=e.maxValue,h=void 0===m?1:m,f=e.maxWidth,v=void 0===f?150:f,g=e.filterMethod,E=e.formatLabel,b="header-".concat(c()(l()(t," ","-")));return{Header:n.createElement("span",{id:b},t),accessor:a,Cell:r||function(e){return e.value?"".concat(u()(e.value,-3)):"NA"},filterMethod:g||d,Filter:function(e){var t=e.filter,a=e.onChange;i===h&&(h=i+=1);var r={max:h,min:i};return n.createElement("div",{style:{paddingLeft:"4px",paddingRight:"4px",paddingTop:"8px"}},n.createElement(s(),{ariaLabelledby:b,ariaControls:"dashboard-table",allowSameValues:!0,maxValue:h,minValue:i,step:.1,value:t?t.value:r,onChange:function(e){a(e)},formatLabel:E||p}))},maxWidth:v}}},75033:function(e,t,a){var n=a(42339),r=a.n(n);t.Z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{hours:!0,minutes:!0,seconds:!0};e/=1e3;var a=r()(e/3600);e%=3600;var n=r()(e/60);n<10&&(n="0"+n),e%=60;var s=r()(e);s<10&&(s="0"+s);var o="";return t.hours&&(o+=a),t.minutes&&(o&&(o+=":"),o+=n),t.seconds&&(o&&(o+=":"),o+=s),o}},34867:function(e,t,a){var n=a(55037),r=a(83936),s=a(20842),o=r(s);n(o,"primitives",r(s.isPrimitive)),n(o,"objects",r(s.isObject)),e.exports=o},96967:function(e,t,a){var n=a(64949);e.exports=n},64949:function(e){e.exports=function(e){return void 0===e||null===e}},63989:function(e){e.exports=9007199254740991},19758:function(e,t,a){var n=a(43022);e.exports=n},43022:function(e,t,a){var n=a(14444),r=a(27394);e.exports=function(e){return e===n||e===r}},96551:function(e,t,a){var n=a(96671);e.exports=n},96671:function(e,t,a){var n=a(27394);e.exports=function(e){return 0===e&&1/e===n}},28135:function(e,t,a){var n=a(16943);e.exports=n},16943:function(e){e.exports=function(e){return Math.abs(e)}},80213:function(e,t,a){var n=a(46501);e.exports=n},46501:function(e){var t=Math.ceil;e.exports=t},79693:function(e,t,a){var n=a(63388);e.exports=n},63388:function(e,t,a){var n=a(62423),r=a(96551);e.exports=function(e,t,a){return n(e)||n(t)||n(a)?NaN:e<t?t:e>a?a:0===t&&r(e)?t:0===e&&r(a)?a:e}},74321:function(e,t,a){var n=a(52118);e.exports=n},52118:function(e,t,a){var n=a(96551),r=a(62423),s=a(27394),o=a(14444);e.exports=function(e,t){var a,l,i,c;if(2===(a=arguments.length))return r(e)||r(t)?NaN:e===s||t===s?s:e===t&&0===e?n(e)?e:t:e<t?e:t;for(l=o,c=0;c<a;c++){if(r(i=arguments[c])||i===s)return i;(i<l||i===l&&0===i&&n(i))&&(l=i)}return l}},91499:function(e,t,a){var n=a(50296);e.exports=n},50296:function(e,t,a){var n=a(67583),r=a(20842).isPrimitive,s=a(34867).primitives,o=a(64868);e.exports=function(e,t){var a,l,i,c;if("object"!==typeof e||null===e)throw new TypeError("invalid argument. First argument must be an object. Value: `"+e+"`.");if(a=n(e),l={},r(t)){for(c=0;c<a.length;c++)(i=a[c])!==t&&(l[i]=e[i]);return l}if(s(t)){for(c=0;c<a.length;c++)i=a[c],-1===o(t,i)&&(l[i]=e[i]);return l}throw new TypeError("invalid argument. Second argument must be either a string primitive or an array of string primitives. Value: `"+t+"`.")}},35683:function(e,t,a){var n=a(43805);e.exports=n},43805:function(e,t,a){var n=a(20842).isPrimitive,r=a(34867).primitives,s=a(12087);e.exports=function(e,t){var a,o,l;if("object"!==typeof e||null===e)throw new TypeError("invalid argument. First argument must be an object. Value: `"+e+"`.");if(a={},n(t))return s(e,t)&&(a[t]=e[t]),a;if(r(t)){for(l=0;l<t.length;l++)o=t[l],s(e,o)&&(a[o]=e[o]);return a}throw new TypeError("invalid argument. Second argument must be either a string primitive or an array of string primitives. Value: `"+t+"`.")}},26881:function(e,t,a){var n=a(87462),r=a(63366),s=a(78265),o=a.n(s),l=a(41488),i=a(41309),c=a(71605),m=a(38674),u=a(54087),d=a(77096),p=a(90855),h=a(25237),f=a(88843),v=["bsPrefix","show","closeLabel","className","children","variant","onClose","dismissible","transition"],g=(0,p.Z)("h4");g.displayName="DivStyledAsH4";var E=(0,h.Z)("alert-heading",{Component:g}),b=(0,h.Z)("alert-link",{Component:f.Z}),Z={show:!0,transition:u.Z,closeLabel:"Close alert"},y=l.forwardRef((function(e,t){var a=(0,i.Ch)(e,{show:"onClose"}),s=a.bsPrefix,p=a.show,h=a.closeLabel,f=a.className,g=a.children,E=a.variant,b=a.onClose,Z=a.dismissible,y=a.transition,k=(0,r.Z)(a,v),N=(0,m.vE)(s,"alert"),w=(0,c.Z)((function(e){b&&b(!1,e)})),x=!0===y?u.Z:y,C=l.createElement("div",(0,n.Z)({role:"alert"},x?void 0:k,{ref:t,className:o()(f,N,E&&N+"-"+E,Z&&N+"-dismissible")}),Z&&l.createElement(d.Z,{onClick:w,label:h}),g);return x?l.createElement(x,(0,n.Z)({unmountOnExit:!0},k,{ref:void 0,in:p}),C):p?C:null}));y.displayName="Alert",y.defaultProps=Z,y.Link=b,y.Heading=E,t.Z=y},52785:function(e,t,a){var n=a(87462),r=a(63366),s=a(78265),o=a.n(s),l=a(41488),i=a(38674),c=["bsPrefix","variant","pill","className","as"],m=l.forwardRef((function(e,t){var a=e.bsPrefix,s=e.variant,m=e.pill,u=e.className,d=e.as,p=void 0===d?"span":d,h=(0,r.Z)(e,c),f=(0,i.vE)(a,"badge");return l.createElement(p,(0,n.Z)({ref:t},h,{className:o()(u,f,m&&f+"-pill",s&&f+"-"+s)}))}));m.displayName="Badge",m.defaultProps={pill:!1},t.Z=m},28785:function(e,t,a){a.d(t,{U:function(){return r}});var n=a(41488);function r(e,t){var a=0;return n.Children.map(e,(function(e){return n.isValidElement(e)?t(e,a++):e}))}},66310:function(e,t,a){var n=a(87462),r=a(63366),s=a(78265),o=a.n(s),l=a(41488),i=a(38674),c=a(28785),m=["min","now","max","label","srOnly","striped","animated","className","style","variant","bsPrefix"],u=["isChild"],d=["min","now","max","label","srOnly","striped","animated","bsPrefix","variant","className","children"];function p(e,t,a){var n=(e-t)/(a-t)*100;return Math.round(1e3*n)/1e3}function h(e,t){var a,s=e.min,i=e.now,c=e.max,u=e.label,d=e.srOnly,h=e.striped,f=e.animated,v=e.className,g=e.style,E=e.variant,b=e.bsPrefix,Z=(0,r.Z)(e,m);return l.createElement("div",(0,n.Z)({ref:t},Z,{role:"progressbar",className:o()(v,b+"-bar",(a={},a["bg-"+E]=E,a[b+"-bar-animated"]=f,a[b+"-bar-striped"]=f||h,a)),style:(0,n.Z)({width:p(i,s,c)+"%"},g),"aria-valuenow":i,"aria-valuemin":s,"aria-valuemax":c}),d?l.createElement("span",{className:"sr-only"},u):u)}var f=l.forwardRef((function(e,t){var a=e.isChild,s=(0,r.Z)(e,u);if(s.bsPrefix=(0,i.vE)(s.bsPrefix,"progress"),a)return h(s,t);var m=s.min,p=s.now,f=s.max,v=s.label,g=s.srOnly,E=s.striped,b=s.animated,Z=s.bsPrefix,y=s.variant,k=s.className,N=s.children,w=(0,r.Z)(s,d);return l.createElement("div",(0,n.Z)({ref:t},w,{className:o()(k,Z)}),N?(0,c.U)(N,(function(e){return(0,l.cloneElement)(e,{isChild:!0})})):h({min:m,now:p,max:f,label:v,srOnly:g,striped:E,animated:b,bsPrefix:Z,variant:y},t))}));f.displayName="ProgressBar",f.defaultProps={min:0,max:100,animated:!1,isChild:!1,srOnly:!1,striped:!1},t.Z=f},89308:function(e,t,a){var n=a(87462),r=a(41488),s=a(79561),o=a(27628),l=a(15671),i=a(43144),c=a(60136),m=a(99259),u=a(70807),d=a(94067),p=a(41728),h=(a(15272),r.forwardRef((function(e,t){var a=(0,o.u)(e);return r.createElement(s.S,(0,n.Z)({ref:t},a))})));r.Component;t.ZP=h},62173:function(){},87815:function(){}}]);
//# sourceMappingURL=2263.19b64032.chunk.js.map