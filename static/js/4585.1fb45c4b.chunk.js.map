{"version":3,"sources":["../node_modules/@babel/runtime/helpers/esm/readOnlyError.js","../node_modules/html-to-image/es/util.js","../node_modules/html-to-image/es/clonePseudoElements.js","../node_modules/html-to-image/es/cloneNode.js","../node_modules/html-to-image/es/getBlobFromURL.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","../node_modules/html-to-image/es/embedResources.js","../node_modules/html-to-image/es/embedImages.js","../node_modules/html-to-image/es/embedWebFonts.js","../node_modules/html-to-image/es/createSvgDataURL.js","../node_modules/html-to-image/es/applyStyleWithOptions.js","../node_modules/html-to-image/es/index.js","../node_modules/@isle-project/components/models/decision-tree/fullscreen_button.js","../node_modules/@isle-project/components/models/decision-tree/tree_plot.js","../node_modules/@isle-project/components/models/decision-tree/split.js","../node_modules/@isle-project/components/models/decision-tree/tree.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js"],"names":["_readOnlyError","name","TypeError","counter","Pseudo","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","WOFF","JPEG","mimes","woff","woff2","ttf","eot","png","jpg","jpeg","gif","tiff","svg","uuid","concat","Math","random","pow","toString","slice","getMimeType","url","ext","match","exec","getExtension","toLowerCase","delay","ms","args","setTimeout","isDataUrl","search","toDataURL","content","mimeType","getDataURLContent","dataURL","split","toArray","arrayLike","i","l","length","push","px","node","styleProperty","val","window","getComputedStyle","getPropertyValue","parseFloat","replace","getNodeWidth","leftBorder","rightBorder","clientWidth","getNodeHeight","topBorder","bottomBorder","clientHeight","getPixelRatio","ratio","FINAL_PROCESS","process","env","devicePixelRatio","parseInt","isNaN","createImage","image","Image","onload","onerror","crossOrigin","src","clonePseudoElements","nativeNode","clonedNode","forEach","pseudo","clonePseudoElement","style","className","err","styleElement","document","createElement","appendChild","selector","cssText","formatCssText","map","priority","getPropertyPriority","join","formatCssProperties","createTextNode","getPseudoElementStyle","cloneSingleNode","this","_callee","_context","prev","HTMLCanvasElement","abrupt","cloneNode","stop","cloneChildren","filter","_a","_callee2","children","_context2","shadowRoot","childNodes","reduce","child","clonedChild","decorate","_callee3","_context3","Element","cloneCssStyle","cloneInputValue","source","target","setProperty","HTMLTextAreaElement","innerHTML","HTMLInputElement","setAttribute","isRoot","_callee4","_context4","cache","getBlobFromURL","options","href","test","cacheBust","Date","getTime","promise","fetch","response","res","rej","blob","contentType","headers","get","_ref","reader","FileReader","onloadend","readAsDataURL","_ref2","catch","req","XMLHttpRequest","onreadystatechange","readyState","status","encoder","getResponseHeader","Error","ontimeout","responseType","timeout","open","send","reason","placeholder","imagePlaceholder","parts","msg","message","console","error","_slicedToArray","arr","Array","isArray","Symbol","iterator","Object","_arr","_n","_d","_e","undefined","_s","_i","unsupportedIterableToArray","URL_REGEX","URL_WITH_FORMAT_REGEX","FONT_SRC_REGEX","shouldEmbed","string","embedResources","cssString","baseUrl","str","preferredFontFormat","filteredCssString","_ref3","format","parseURLs","urls","ret","resourceURL","baseURL","resolvedURL","location","protocol","doc","implementation","createHTMLDocument","base","a","head","body","resolveUrl","data","RegExp","urlToRegex","raw","quotation","embedImages","embedBackground","embedImageNode","embedChildren","background","HTMLImageElement","deferreds","all","cssFetchPromiseStore","parseWebFontRules","ownerDocument","styleSheets","getCssRules","getWebFontRules","embedWebFonts","fontEmbedCss","styleNode","sytleContent","firstChild","insertBefore","rules","rule","parentStyleSheet","cssStrings","promises","sheet","cssRules","item","index","type","CSSRule","IMPORT_RULE","importIndex","fetchCSS","embedFonts","parseCSS","insertRule","startsWith","log","inline","find","FONT_FACE_RULE","css","importRegex","keyframesRegex","unified","lastIndex","text","_callee5","_context5","resolved","regexUrlFind","fontLoadedPromises","URL","addEventListener","createSvgDataURL","width","height","xmlns","createElementNS","foreignObject","setAttributeNS","XMLSerializer","serializeToString","encodeURIComponent","html","svgToDataURL","applyStyleWithOptions","backgroundColor","manual","keys","key","getImageSize","domNode","arguments","toSvg","_getImageSize","toCanvas","canvas","context","getContext","pixelRatio","_getImageSize2","canvasWidth","canvasHeight","fillStyle","fillRect","drawImage","FullscreenButton","setState","fullscreen","state","t","props","Fragment","id","placement","tooltip","Button","variant","size","onClick","toggleFullscreen","position","top","right","Modal","show","onHide","dialogClassName","closeButton","as","innerHeight","fontSize","overflow","tree","Component","withTranslation","RE_NUMBER","treeToHtml","category","isNumber","Number","isInteger","toFixed","attribute","predicateName","pivot","notMatchedCount","notMatch","matchedCount","TreePlot","plotValue","plotKey","treeWrapper","scrollLeft","quality","toJpeg","randomstring","ref","div","draggable","onDragStart","ev","dataTransfer","setData","html2clipboard","float","indices","attr","predicate","values","idx","countUniqueValues","mostFrequentValue","mostFrequentCount","gini","out","hasOwnProp","p","entropy","ln","variance","len","delta","mean","M2","N","x","mu","predicates","b","ClassificationTreeConstructor","opts","nobs","importances","j","predictors","root","buildClassificationTree","incrspace","minItemsCount","minBucket","round","scoreThreshold","maxTreeDepth","quantitative","criterion","predict","nTry","initialScore","alreadyChecked","bestSplit","gain","sample","attrPredPivot","contains","currSplit","matchEntropy","notMatchEntropy","newScore","currGain","matchSubTree","notMatchSubTree","buildRegressionTree","predictRandomForest","forest","prediction","max","ClassificationTree","RegressionTree","RandomForestClassifier","trees","trainingSets","nTrees","buildRandomForestClassifier","Plot","_arrayLikeToArray","arr2","_unsupportedIterableToArray","o","minLen","n","prototype","call","constructor","from"],"mappings":"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","file":"static/js/4585.1fb45c4b.chunk.js","sourcesContent":["export default function _readOnlyError(name) {\n  throw new TypeError(\"\\\"\" + name + \"\\\" is read-only\");\n}","import _regeneratorRuntime from \"/home/philipp/git/cmu-isle/isle-dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar WOFF = 'application/font-woff';\nvar JPEG = 'image/jpeg';\nvar mimes = {\n  woff: WOFF,\n  woff2: WOFF,\n  ttf: 'application/font-truetype',\n  eot: 'application/vnd.ms-fontobject',\n  png: 'image/png',\n  jpg: JPEG,\n  jpeg: JPEG,\n  gif: 'image/gif',\n  tiff: 'image/tiff',\n  svg: 'image/svg+xml'\n};\nexport var uuid = function uuid() {\n  // generate uuid for className of pseudo elements.\n  // We should not use GUIDs, otherwise pseudo elements sometimes cannot be captured.\n  var counter = 0; // ref: http://stackoverflow.com/a/6248722/2519373\n\n  var random = function random() {\n    return \"0000\".concat((Math.random() * Math.pow(36, 4) << 0).toString(36)).slice(-4);\n  };\n\n  return function () {\n    counter += 1;\n    return \"u\".concat(random()).concat(counter);\n  };\n}();\nexport function getExtension(url) {\n  var match = /\\.([^./]*?)$/g.exec(url);\n  return match ? match[1] : '';\n}\nexport function getMimeType(url) {\n  var ext = getExtension(url).toLowerCase();\n  return mimes[ext] || '';\n}\nexport function delay(ms) {\n  return function (args) {\n    return new Promise(function (resolve) {\n      setTimeout(function () {\n        resolve(args);\n      }, ms);\n    });\n  };\n}\nexport function isDataUrl(url) {\n  return url.search(/^(data:)/) !== -1;\n}\nexport function toDataURL(content, mimeType) {\n  return \"data:\".concat(mimeType, \";base64,\").concat(content);\n}\nexport function getDataURLContent(dataURL) {\n  return dataURL.split(/,/)[1];\n}\n\nfunction toBlob(canvas) {\n  return new Promise(function (resolve) {\n    var binaryString = window.atob(canvas.toDataURL().split(',')[1]);\n    var len = binaryString.length;\n    var binaryArray = new Uint8Array(len);\n\n    for (var i = 0; i < len; i += 1) {\n      binaryArray[i] = binaryString.charCodeAt(i);\n    }\n\n    resolve(new Blob([binaryArray], {\n      type: 'image/png'\n    }));\n  });\n}\n\nexport function canvasToBlob(canvas) {\n  if (canvas.toBlob) {\n    return new Promise(function (resolve) {\n      return canvas.toBlob(resolve);\n    });\n  }\n\n  return toBlob(canvas);\n}\nexport function toArray(arrayLike) {\n  var result = [];\n\n  for (var i = 0, l = arrayLike.length; i < l; i += 1) {\n    result.push(arrayLike[i]);\n  }\n\n  return result;\n}\n\nfunction px(node, styleProperty) {\n  var val = window.getComputedStyle(node).getPropertyValue(styleProperty);\n  return parseFloat(val.replace('px', ''));\n}\n\nexport function getNodeWidth(node) {\n  var leftBorder = px(node, 'border-left-width');\n  var rightBorder = px(node, 'border-right-width');\n  return node.clientWidth + leftBorder + rightBorder;\n}\nexport function getNodeHeight(node) {\n  var topBorder = px(node, 'border-top-width');\n  var bottomBorder = px(node, 'border-bottom-width');\n  return node.clientHeight + topBorder + bottomBorder;\n}\nexport function getPixelRatio() {\n  var ratio;\n  var FINAL_PROCESS;\n\n  try {\n    FINAL_PROCESS = process;\n  } catch (e) {}\n\n  var val = FINAL_PROCESS && FINAL_PROCESS.env ? FINAL_PROCESS.env.devicePixelRatio : null;\n\n  if (val) {\n    ratio = parseInt(val, 10);\n\n    if (isNaN(ratio)) {\n      ratio = 1;\n    }\n  }\n\n  return ratio || window.devicePixelRatio || 1;\n}\nexport function createImage(url) {\n  return new Promise(function (resolve, reject) {\n    var image = new Image();\n\n    image.onload = function () {\n      return resolve(image);\n    };\n\n    image.onerror = reject;\n    image.crossOrigin = 'anonymous';\n    image.src = url;\n  });\n}\nexport function svgToDataURL(svg) {\n  return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            return _context.abrupt(\"return\", Promise.resolve().then(function () {\n              return new XMLSerializer().serializeToString(svg);\n            }).then(encodeURIComponent).then(function (html) {\n              return \"data:image/svg+xml;charset=utf-8,\".concat(html);\n            }));\n\n          case 1:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n}\nexport function getBlobFromImageURL(url) {\n  return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            return _context2.abrupt(\"return\", createImage(url).then(function (image) {\n              var width = image.width,\n                  height = image.height;\n              var canvas = document.createElement('canvas');\n              var context = canvas.getContext('2d');\n              var ratio = getPixelRatio();\n              canvas.width = width * ratio;\n              canvas.height = height * ratio;\n              canvas.style.width = \"\".concat(width);\n              canvas.style.height = \"\".concat(height);\n              context.scale(ratio, ratio);\n              context.drawImage(image, 0, 0);\n              var dataURL = canvas.toDataURL(getMimeType(url));\n              return getDataURLContent(dataURL);\n            }));\n\n          case 1:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n}","import { uuid, toArray } from './util';\nexport function clonePseudoElements(nativeNode, clonedNode) {\n  var pseudos = [':before', ':after'];\n  pseudos.forEach(function (pseudo) {\n    return Pseudo.clonePseudoElement(nativeNode, clonedNode, pseudo);\n  });\n}\nvar Pseudo;\n\n(function (Pseudo) {\n  function clonePseudoElement(nativeNode, clonedNode, pseudo) {\n    var style = window.getComputedStyle(nativeNode, pseudo);\n    var content = style.getPropertyValue('content');\n\n    if (content === '' || content === 'none') {\n      return;\n    }\n\n    var className = uuid(); // fix: Cannot assign to read only property 'className' of object '#<â€¦\n\n    try {\n      clonedNode.className = \"\".concat(clonedNode.className, \" \").concat(className);\n    } catch (err) {\n      return;\n    }\n\n    var styleElement = document.createElement('style');\n    styleElement.appendChild(getPseudoElementStyle(className, pseudo, style));\n    clonedNode.appendChild(styleElement);\n  }\n\n  Pseudo.clonePseudoElement = clonePseudoElement;\n\n  function getPseudoElementStyle(className, pseudo, style) {\n    var selector = \".\".concat(className, \":\").concat(pseudo);\n    var cssText = style.cssText ? formatCssText(style) : formatCssProperties(style);\n    return document.createTextNode(\"\".concat(selector, \"{\").concat(cssText, \"}\"));\n  }\n\n  function formatCssText(style) {\n    var content = style.getPropertyValue('content');\n    return \"\".concat(style.cssText, \" content: \").concat(content, \";\");\n  }\n\n  function formatCssProperties(style) {\n    return toArray(style).map(function (name) {\n      var value = style.getPropertyValue(name);\n      var priority = style.getPropertyPriority(name);\n      return \"\".concat(name, \": \").concat(value).concat(priority ? ' !important' : '', \";\");\n    }).join(' ');\n  }\n})(Pseudo || (Pseudo = {}));","import _regeneratorRuntime from \"/home/philipp/git/cmu-isle/isle-dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nimport { clonePseudoElements } from './clonePseudoElements';\nimport { createImage, toArray } from './util';\n\nfunction cloneSingleNode(node) {\n  return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    var dataURL;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (!(node instanceof HTMLCanvasElement)) {\n              _context.next = 5;\n              break;\n            }\n\n            dataURL = node.toDataURL();\n\n            if (!(dataURL === 'data:,')) {\n              _context.next = 4;\n              break;\n            }\n\n            return _context.abrupt(\"return\", Promise.resolve(node.cloneNode(false)));\n\n          case 4:\n            return _context.abrupt(\"return\", createImage(dataURL));\n\n          case 5:\n            return _context.abrupt(\"return\", Promise.resolve(node.cloneNode(false)));\n\n          case 6:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n}\n\nfunction cloneChildren(nativeNode, clonedNode, filter) {\n  var _a;\n\n  return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n    var children;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            children = toArray(((_a = nativeNode.shadowRoot) !== null && _a !== void 0 ? _a : nativeNode).childNodes);\n\n            if (!(children.length === 0)) {\n              _context2.next = 3;\n              break;\n            }\n\n            return _context2.abrupt(\"return\", Promise.resolve(clonedNode));\n\n          case 3:\n            return _context2.abrupt(\"return\", children.reduce(function (done, child) {\n              return done.then(function () {\n                return cloneNode(child, filter);\n              }).then(function (clonedChild) {\n                if (clonedChild) {\n                  clonedNode.appendChild(clonedChild);\n                }\n              });\n            }, Promise.resolve()).then(function () {\n              return clonedNode;\n            }));\n\n          case 4:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n}\n\nfunction decorate(nativeNode, clonedNode) {\n  return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            if (clonedNode instanceof Element) {\n              _context3.next = 2;\n              break;\n            }\n\n            return _context3.abrupt(\"return\", clonedNode);\n\n          case 2:\n            return _context3.abrupt(\"return\", Promise.resolve().then(function () {\n              return cloneCssStyle(nativeNode, clonedNode);\n            }).then(function () {\n              return clonePseudoElements(nativeNode, clonedNode);\n            }).then(function () {\n              return cloneInputValue(nativeNode, clonedNode);\n            }).then(function () {\n              return clonedNode;\n            }));\n\n          case 3:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n}\n\nfunction cloneCssStyle(nativeNode, clonedNode) {\n  var source = window.getComputedStyle(nativeNode);\n  var target = clonedNode.style;\n  if (!target) return;\n\n  if (source.cssText) {\n    target.cssText = source.cssText;\n  } else {\n    toArray(source).forEach(function (name) {\n      target.setProperty(name, source.getPropertyValue(name), source.getPropertyPriority(name));\n    });\n  }\n}\n\nfunction cloneInputValue(nativeNode, clonedNode) {\n  if (nativeNode instanceof HTMLTextAreaElement) {\n    clonedNode.innerHTML = nativeNode.value;\n  }\n\n  if (nativeNode instanceof HTMLInputElement) {\n    clonedNode.setAttribute('value', nativeNode.value);\n  }\n}\n\nexport function cloneNode(nativeNode, filter, isRoot) {\n  return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            if (!(!isRoot && filter && !filter(nativeNode))) {\n              _context4.next = 2;\n              break;\n            }\n\n            return _context4.abrupt(\"return\", Promise.resolve(null));\n\n          case 2:\n            return _context4.abrupt(\"return\", Promise.resolve(nativeNode).then(cloneSingleNode).then(function (clonedNode) {\n              return cloneChildren(nativeNode, clonedNode, filter);\n            }).then(function (clonedNode) {\n              return decorate(nativeNode, clonedNode);\n            }));\n\n          case 3:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4);\n  }));\n}","/* tslint:disable:max-line-length */\nimport { getDataURLContent } from './util'; // KNOWN ISSUE\n// -----------\n// Can not handle redirect-url, such as when access 'http://something.com/avatar.png'\n// will redirect to 'http://something.com/65fc2ffcc8aea7ba65a1d1feda173540'\n\nvar TIMEOUT = 30000;\nvar cache = {};\n\nfunction isFont(filename) {\n  return /ttf|otf|eot|woff2?/i.test(filename);\n}\n\nexport function getBlobFromURL(url, options) {\n  var href = url.replace(/\\?.*/, '');\n\n  if (isFont(href)) {\n    href = href.replace(/.*\\//, '');\n  }\n\n  if (cache[href]) {\n    return cache[href];\n  } // cache bypass so we dont have CORS issues with cached images\n  // ref: https://developer.mozilla.org/en/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest#Bypassing_the_cache\n\n\n  if (options.cacheBust) {\n    // tslint:disable-next-line\n    url += (/\\?/.test(url) ? '&' : '?') + new Date().getTime();\n  }\n\n  var failed = function failed(reason) {\n    var placeholder = '';\n\n    if (options.imagePlaceholder) {\n      var parts = options.imagePlaceholder.split(/,/);\n\n      if (parts && parts[1]) {\n        placeholder = parts[1];\n      }\n    }\n\n    var msg = \"Failed to fetch resource: \".concat(url);\n\n    if (reason) {\n      msg = typeof reason === 'string' ? reason : reason.message;\n    }\n\n    if (msg) {\n      console.error(msg);\n    }\n\n    return placeholder;\n  };\n\n  var deferred = window.fetch ? window.fetch(url).then(function (response) {\n    return new Promise(function (res, rej) {\n      response.blob().then(function (blob) {\n        res({\n          blob: blob,\n          contentType: response.headers.get('Content-Type')\n        });\n      });\n    });\n  }).then(function (_ref) {\n    var blob = _ref.blob,\n        contentType = _ref.contentType;\n    return new Promise(function (resolve, reject) {\n      var reader = new FileReader();\n\n      reader.onloadend = function () {\n        return resolve({\n          contentType: contentType,\n          blob: reader.result\n        });\n      };\n\n      reader.onerror = reject;\n      reader.readAsDataURL(blob);\n    });\n  }).then(function (_ref2) {\n    var blob = _ref2.blob,\n        contentType = _ref2.contentType;\n    return {\n      contentType: contentType,\n      blob: getDataURLContent(blob)\n    };\n  }).catch(function () {\n    return new Promise(function (resolve, reject) {\n      return reject();\n    });\n  }) : new Promise(function (resolve, reject) {\n    var req = new XMLHttpRequest();\n\n    var timeout = function timeout() {\n      reject(new Error(\"Timeout of \".concat(TIMEOUT, \"ms occured while fetching resource: \").concat(url)));\n    };\n\n    var done = function done() {\n      if (req.readyState !== 4) {\n        return;\n      }\n\n      if (req.status !== 200) {\n        reject(new Error(\"Failed to fetch resource: \".concat(url, \", status: \").concat(req.status)));\n        return;\n      }\n\n      var encoder = new FileReader();\n\n      encoder.onloadend = function () {\n        resolve({\n          blob: getDataURLContent(encoder.result),\n          contentType: req.getResponseHeader('Content-Type') || ''\n        });\n      };\n\n      encoder.readAsDataURL(req.response);\n    };\n\n    req.onreadystatechange = done;\n    req.ontimeout = timeout;\n    req.responseType = 'blob';\n    req.timeout = TIMEOUT;\n    req.open('GET', url, true);\n    req.send();\n  });\n  var promise = deferred.catch(failed);\n  cache[href] = promise;\n  return promise;\n}","import arrayWithHoles from \"@babel/runtime/helpers/esm/arrayWithHoles\";\nimport iterableToArrayLimit from \"@babel/runtime/helpers/esm/iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableRest from \"@babel/runtime/helpers/esm/nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import _slicedToArray from \"/home/philipp/git/cmu-isle/isle-dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport { getBlobFromURL } from './getBlobFromURL';\nimport { isDataUrl, toDataURL, getMimeType } from './util';\nvar URL_REGEX = /url\\((['\"]?)([^'\"]+?)\\1\\)/g;\nvar URL_WITH_FORMAT_REGEX = /url\\([^)]+\\)\\s*format\\(([\"'])([^\"']+)\\1\\)/g;\nvar FONT_SRC_REGEX = /src:\\s*(?:url\\([^)]+\\)\\s*format\\([^)]+\\)[,;]\\s*)+/g;\nexport function shouldEmbed(string) {\n  return string.search(URL_REGEX) !== -1;\n}\nexport function embedResources(cssString, baseUrl, options) {\n  if (!shouldEmbed(cssString)) {\n    return Promise.resolve(cssString);\n  }\n\n  var filteredCssString = filterPreferredFontFormat(cssString, options);\n  return Promise.resolve(filteredCssString).then(parseURLs).then(function (urls) {\n    return urls.reduce(function (done, url) {\n      return done.then(function (ret) {\n        return embed(ret, url, baseUrl, options);\n      });\n    }, Promise.resolve(filteredCssString));\n  });\n}\nexport function filterPreferredFontFormat(str, _ref) {\n  var preferredFontFormat = _ref.preferredFontFormat;\n  return !preferredFontFormat ? str : str.replace(FONT_SRC_REGEX, function (match) {\n    while (true) {\n      var _ref2 = URL_WITH_FORMAT_REGEX.exec(match) || [],\n          _ref3 = _slicedToArray(_ref2, 3),\n          src = _ref3[0],\n          format = _ref3[2];\n\n      if (!format) {\n        return '';\n      }\n\n      if (format === preferredFontFormat) {\n        return \"src: \".concat(src, \";\");\n      }\n    }\n  });\n}\nexport function parseURLs(str) {\n  var result = [];\n  str.replace(URL_REGEX, function (raw, quotation, url) {\n    result.push(url);\n    return raw;\n  });\n  return result.filter(function (url) {\n    return !isDataUrl(url);\n  });\n}\nexport function embed(cssString, resourceURL, baseURL, options, get) {\n  var resolvedURL = baseURL ? resolveUrl(resourceURL, baseURL) : resourceURL;\n  return Promise.resolve(resolvedURL).then(function (url) {\n    return get ? get(url) : getBlobFromURL(url, options);\n  }).then(function (data) {\n    if (typeof data === 'string') {\n      return toDataURL(data, getMimeType(resourceURL));\n    }\n\n    return toDataURL(data.blob, getMimeType(resourceURL) || data.contentType);\n  }).then(function (dataURL) {\n    return cssString.replace(urlToRegex(resourceURL), \"$1\".concat(dataURL, \"$3\"));\n  }).then(function (content) {\n    return content;\n  }, function () {\n    return resolvedURL;\n  });\n}\n\nfunction resolveUrl(url, baseUrl) {\n  // url is absolute already\n  if (url.match(/^[a-z]+:\\/\\//i)) {\n    return url;\n  } // url is absolute already, without protocol\n\n\n  if (url.match(/^\\/\\//)) {\n    return window.location.protocol + url;\n  } // dataURI, mailto:, tel:, etc.\n\n\n  if (url.match(/^[a-z]+:/i)) {\n    return url;\n  }\n\n  var doc = document.implementation.createHTMLDocument();\n  var base = doc.createElement('base');\n  var a = doc.createElement('a');\n  doc.head.appendChild(base);\n  doc.body.appendChild(a);\n\n  if (baseUrl) {\n    base.href = baseUrl;\n  }\n\n  a.href = url;\n  return a.href;\n}\n\nfunction urlToRegex(url) {\n  return new RegExp(\"(url\\\\(['\\\"]?)(\".concat(escape(url), \")(['\\\"]?\\\\))\"), 'g');\n}\n\nfunction escape(url) {\n  return url.replace(/([.*+?^${}()|\\[\\]\\/\\\\])/g, '\\\\$1');\n}","import _regeneratorRuntime from \"/home/philipp/git/cmu-isle/isle-dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nimport { getBlobFromURL } from './getBlobFromURL';\nimport { embedResources } from './embedResources';\nimport { toArray, isDataUrl, toDataURL, getMimeType } from './util';\nexport function embedImages(clonedNode, options) {\n  return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (clonedNode instanceof Element) {\n              _context.next = 2;\n              break;\n            }\n\n            return _context.abrupt(\"return\", Promise.resolve(clonedNode));\n\n          case 2:\n            return _context.abrupt(\"return\", Promise.resolve(clonedNode).then(function (node) {\n              return embedBackground(node, options);\n            }).then(function (node) {\n              return embedImageNode(node, options);\n            }).then(function (node) {\n              return embedChildren(node, options);\n            }));\n\n          case 3:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n}\n\nfunction embedBackground(clonedNode, options) {\n  var _a;\n\n  return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n    var background;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            background = (_a = clonedNode.style) === null || _a === void 0 ? void 0 : _a.getPropertyValue('background');\n\n            if (background) {\n              _context2.next = 3;\n              break;\n            }\n\n            return _context2.abrupt(\"return\", Promise.resolve(clonedNode));\n\n          case 3:\n            return _context2.abrupt(\"return\", Promise.resolve(background).then(function (cssString) {\n              return embedResources(cssString, null, options);\n            }).then(function (cssString) {\n              clonedNode.style.setProperty('background', cssString, clonedNode.style.getPropertyPriority('background'));\n              return clonedNode;\n            }));\n\n          case 4:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n}\n\nfunction embedImageNode(clonedNode, options) {\n  if (!(clonedNode instanceof HTMLImageElement) || isDataUrl(clonedNode.src)) {\n    return Promise.resolve(clonedNode);\n  }\n\n  return Promise.resolve(clonedNode.src).then(function (url) {\n    return getBlobFromURL(url, options);\n  }).then(function (data) {\n    return toDataURL(data.blob, getMimeType(clonedNode.src) || data.contentType);\n  }).then(function (dataURL) {\n    return new Promise(function (resolve, reject) {\n      clonedNode.onload = resolve;\n      clonedNode.onerror = reject;\n      clonedNode.src = dataURL;\n    });\n  }).then(function () {\n    return clonedNode;\n  }, function () {\n    return clonedNode;\n  });\n}\n\nfunction embedChildren(clonedNode, options) {\n  return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n    var children, deferreds;\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            children = toArray(clonedNode.childNodes);\n            deferreds = children.map(function (child) {\n              return embedImages(child, options);\n            });\n            return _context3.abrupt(\"return\", Promise.all(deferreds).then(function () {\n              return clonedNode;\n            }));\n\n          case 3:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n}","import _regeneratorRuntime from \"/home/philipp/git/cmu-isle/isle-dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nimport { toArray } from './util';\nimport { shouldEmbed, embedResources } from './embedResources';\nvar cssFetchPromiseStore = {};\nexport function parseWebFontRules(clonedNode) {\n  return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            return _context.abrupt(\"return\", new Promise(function (resolve, reject) {\n              if (!clonedNode.ownerDocument) {\n                reject(new Error('Provided element is not within a Document'));\n              }\n\n              resolve(toArray(clonedNode.ownerDocument.styleSheets));\n            }).then(function (styleSheets) {\n              return getCssRules(styleSheets);\n            }).then(getWebFontRules));\n\n          case 1:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n}\nexport function embedWebFonts(clonedNode, options) {\n  return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            return _context2.abrupt(\"return\", (options.fontEmbedCss != null ? Promise.resolve(options.fontEmbedCss) : getWebFontCss(clonedNode, options)).then(function (cssString) {\n              var styleNode = document.createElement('style');\n              var sytleContent = document.createTextNode(cssString);\n              styleNode.appendChild(sytleContent);\n\n              if (clonedNode.firstChild) {\n                clonedNode.insertBefore(styleNode, clonedNode.firstChild);\n              } else {\n                clonedNode.appendChild(styleNode);\n              }\n\n              return clonedNode;\n            }));\n\n          case 1:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n}\nexport function getWebFontCss(node, options) {\n  return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            return _context3.abrupt(\"return\", parseWebFontRules(node).then(function (rules) {\n              return Promise.all(rules.map(function (rule) {\n                var baseUrl = rule.parentStyleSheet ? rule.parentStyleSheet.href : null;\n                return embedResources(rule.cssText, baseUrl, options);\n              }));\n            }).then(function (cssStrings) {\n              return cssStrings.join('\\n');\n            }));\n\n          case 1:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n}\nexport function getCssRules(styleSheets) {\n  return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n    var ret, promises;\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            ret = [];\n            promises = []; // First loop inlines imports\n\n            styleSheets.forEach(function (sheet) {\n              if ('cssRules' in sheet) {\n                try {\n                  toArray(sheet.cssRules).forEach(function (item, index) {\n                    if (item.type === CSSRule.IMPORT_RULE) {\n                      var importIndex = index + 1;\n                      promises.push(fetchCSS(item.href, sheet).then(embedFonts).then(function (cssText) {\n                        var parsed = parseCSS(cssText);\n                        parsed.forEach(function (rule) {\n                          try {\n                            sheet.insertRule(rule, rule.startsWith('@import') ? importIndex = importIndex + 1 : sheet.cssRules.length);\n                          } catch (error) {\n                            console.log('Error inserting rule from remote css', {\n                              rule: rule,\n                              error: error\n                            });\n                          }\n                        });\n                      }).catch(function (e) {\n                        console.log('Error loading remote css', e.toString());\n                      }));\n                    }\n                  });\n                } catch (e) {\n                  var inline = styleSheets.find(function (a) {\n                    return a.href === null;\n                  }) || document.styleSheets[0];\n\n                  if (sheet.href != null) {\n                    promises.push(fetchCSS(sheet.href, inline).then(embedFonts).then(function (cssText) {\n                      var parsed = parseCSS(cssText);\n                      parsed.forEach(function (rule) {\n                        inline.insertRule(rule, sheet.cssRules.length);\n                      });\n                    }).catch(function (e) {\n                      console.log('Error loading remote stylesheet', e.toString());\n                    }));\n                  }\n\n                  console.log('Error inlining remote css file', e.toString());\n                }\n              }\n            });\n            return _context4.abrupt(\"return\", Promise.all(promises).then(function () {\n              // Second loop parses rules\n              styleSheets.forEach(function (sheet) {\n                if ('cssRules' in sheet) {\n                  try {\n                    toArray(sheet.cssRules).forEach(function (item) {\n                      ret.push(item);\n                    });\n                  } catch (e) {\n                    console.log(\"Error while reading CSS rules from \".concat(sheet.href), e.toString());\n                  }\n                }\n              });\n              return ret;\n            }));\n\n          case 4:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4);\n  }));\n}\n\nfunction getWebFontRules(cssRules) {\n  return cssRules.filter(function (rule) {\n    return rule.type === CSSRule.FONT_FACE_RULE;\n  }).filter(function (rule) {\n    return shouldEmbed(rule.style.getPropertyValue('src'));\n  });\n}\n\nfunction parseCSS(source) {\n  if (source === undefined) {\n    return [];\n  }\n\n  var cssText = source;\n  var css = [];\n  var cssKeyframeRegex = '((@.*?keyframes [\\\\s\\\\S]*?){([\\\\s\\\\S]*?}\\\\s*?)})';\n  var combinedCSSRegex = '((\\\\s*?(?:\\\\/\\\\*[\\\\s\\\\S]*?\\\\*\\\\/)?\\\\s*?@media[\\\\s\\\\S]' + '*?){([\\\\s\\\\S]*?)}\\\\s*?})|(([\\\\s\\\\S]*?){([\\\\s\\\\S]*?)})'; // to match css & media queries together\n\n  var cssCommentsRegex = /(\\/\\*[\\s\\S]*?\\*\\/)/gi;\n  var importRegex = /@import[\\s\\S]*?url\\([^)]*\\)[\\s\\S]*?;/gi; // strip out comments\n\n  cssText = cssText.replace(cssCommentsRegex, '');\n  var keyframesRegex = new RegExp(cssKeyframeRegex, 'gi');\n  var arr;\n\n  while (true) {\n    arr = keyframesRegex.exec(cssText);\n\n    if (arr === null) {\n      break;\n    }\n\n    css.push(arr[0]);\n  }\n\n  cssText = cssText.replace(keyframesRegex, ''); // unified regex\n\n  var unified = new RegExp(combinedCSSRegex, 'gi');\n\n  while (true) {\n    arr = importRegex.exec(cssText);\n\n    if (arr === null) {\n      arr = unified.exec(cssText);\n\n      if (arr === null) {\n        break;\n      } else {\n        importRegex.lastIndex = unified.lastIndex;\n      }\n    } else {\n      unified.lastIndex = importRegex.lastIndex;\n    }\n\n    css.push(arr[0]);\n  }\n\n  return css;\n}\n\nfunction fetchCSS(url, sheet) {\n  if (cssFetchPromiseStore[url]) {\n    return cssFetchPromiseStore[url];\n  }\n\n  var promise = fetch(url).then(function (res) {\n    return {\n      url: url,\n      cssText: res.text()\n    };\n  }, function (e) {\n    console.log('ERROR FETCHING CSS: ', e.toString());\n  });\n  cssFetchPromiseStore[url] = promise;\n  return promise;\n}\n\nfunction embedFonts(data) {\n  return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n    return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            return _context5.abrupt(\"return\", data.cssText.then(function (resolved) {\n              var cssText = resolved;\n              var regexUrlFind = /url\\([\"']?([^\"')]+)[\"']?\\)/g;\n              var fontLocations = cssText.match(/url\\([^)]+\\)/g) || [];\n              var fontLoadedPromises = fontLocations.map(function (location) {\n                var url = location.replace(regexUrlFind, '$1');\n\n                if (!url.startsWith('https://')) {\n                  var source = data.url;\n                  url = new URL(url, source).href;\n                }\n\n                return new Promise(function (resolve, reject) {\n                  fetch(url).then(function (res) {\n                    return res.blob();\n                  }).then(function (blob) {\n                    var reader = new FileReader();\n                    reader.addEventListener('load', function (res) {\n                      // Side Effect\n                      cssText = cssText.replace(location, \"url(\".concat(reader.result, \")\"));\n                      resolve([location, reader.result]);\n                    });\n                    reader.readAsDataURL(blob);\n                  }).catch(reject);\n                });\n              });\n              return Promise.all(fontLoadedPromises).then(function () {\n                return cssText;\n              });\n            }));\n\n          case 1:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, _callee5);\n  }));\n}","import { svgToDataURL } from './util';\nexport function createSvgDataURL(clonedNode, width, height) {\n  var xmlns = 'http://www.w3.org/2000/svg';\n  var svg = document.createElementNS(xmlns, 'svg');\n  var foreignObject = document.createElementNS(xmlns, 'foreignObject');\n  svg.setAttributeNS('', 'width', \"\".concat(width));\n  svg.setAttributeNS('', 'height', \"\".concat(height));\n  foreignObject.setAttributeNS('', 'width', '100%');\n  foreignObject.setAttributeNS('', 'height', '100%');\n  foreignObject.setAttributeNS('', 'x', '0');\n  foreignObject.setAttributeNS('', 'y', '0');\n  foreignObject.setAttributeNS('', 'externalResourcesRequired', 'true');\n  svg.appendChild(foreignObject);\n  foreignObject.appendChild(clonedNode);\n  return svgToDataURL(svg);\n}","export function applyStyleWithOptions(clonedNode, options) {\n  var style = clonedNode.style;\n\n  if (options.backgroundColor) {\n    style.backgroundColor = options.backgroundColor;\n  }\n\n  if (options.width) {\n    style.width = \"\".concat(options.width, \"px\");\n  }\n\n  if (options.height) {\n    style.height = \"\".concat(options.height, \"px\");\n  }\n\n  var manual = options.style;\n\n  if (manual != null) {\n    Object.keys(manual).forEach(function (key) {\n      // @ts-expect-error\n      style[key] = manual[key];\n    });\n  }\n\n  return clonedNode;\n}","import _regeneratorRuntime from \"/home/philipp/git/cmu-isle/isle-dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nimport { cloneNode } from './cloneNode';\nimport { embedImages } from './embedImages';\nimport { embedWebFonts, getWebFontCss } from './embedWebFonts';\nimport { createSvgDataURL } from './createSvgDataURL';\nimport { applyStyleWithOptions } from './applyStyleWithOptions';\nimport { delay, createImage, canvasToBlob, getNodeWidth, getNodeHeight, getPixelRatio } from './util';\n\nfunction getImageSize(domNode) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var width = options.width || getNodeWidth(domNode);\n  var height = options.height || getNodeHeight(domNode);\n  return {\n    width: width,\n    height: height\n  };\n}\n\nexport function toSvg(domNode) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    var _getImageSize, width, height;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _getImageSize = getImageSize(domNode, options), width = _getImageSize.width, height = _getImageSize.height;\n            return _context.abrupt(\"return\", cloneNode(domNode, options.filter, true).then(function (clonedNode) {\n              return embedWebFonts(clonedNode, options);\n            }).then(function (clonedNode) {\n              return embedImages(clonedNode, options);\n            }).then(function (clonedNode) {\n              return applyStyleWithOptions(clonedNode, options);\n            }).then(function (clonedNode) {\n              return createSvgDataURL(clonedNode, width, height);\n            }));\n\n          case 2:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n}\nexport var toSvgDataURL = toSvg;\nexport function toCanvas(domNode) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            return _context2.abrupt(\"return\", toSvg(domNode, options).then(createImage).then(delay(100)).then(function (image) {\n              var canvas = document.createElement('canvas');\n              var context = canvas.getContext('2d');\n              var ratio = options.pixelRatio || getPixelRatio();\n\n              var _getImageSize2 = getImageSize(domNode, options),\n                  width = _getImageSize2.width,\n                  height = _getImageSize2.height;\n\n              var canvasWidth = options.canvasWidth || width;\n              var canvasHeight = options.canvasHeight || height;\n              canvas.width = canvasWidth * ratio;\n              canvas.height = canvasHeight * ratio;\n              canvas.style.width = \"\".concat(canvasWidth);\n              canvas.style.height = \"\".concat(canvasHeight);\n\n              if (options.backgroundColor) {\n                context.fillStyle = options.backgroundColor;\n                context.fillRect(0, 0, canvas.width, canvas.height);\n              }\n\n              context.drawImage(image, 0, 0, canvas.width, canvas.height);\n              return canvas;\n            }));\n\n          case 1:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n}\nexport function toPixelData(domNode) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n    var _getImageSize3, width, height;\n\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _getImageSize3 = getImageSize(domNode, options), width = _getImageSize3.width, height = _getImageSize3.height;\n            return _context3.abrupt(\"return\", toCanvas(domNode, options).then(function (canvas) {\n              var ctx = canvas.getContext('2d');\n              return ctx.getImageData(0, 0, width, height).data;\n            }));\n\n          case 2:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n}\nexport function toPng(domNode) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            return _context4.abrupt(\"return\", toCanvas(domNode, options).then(function (canvas) {\n              return canvas.toDataURL();\n            }));\n\n          case 1:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4);\n  }));\n}\nexport function toJpeg(domNode) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n    return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            return _context5.abrupt(\"return\", toCanvas(domNode, options).then(function (canvas) {\n              return canvas.toDataURL('image/jpeg', options.quality || 1);\n            }));\n\n          case 1:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, _callee5);\n  }));\n}\nexport function toBlob(domNode) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee6() {\n    return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n      while (1) {\n        switch (_context6.prev = _context6.next) {\n          case 0:\n            return _context6.abrupt(\"return\", toCanvas(domNode, options).then(canvasToBlob));\n\n          case 1:\n          case \"end\":\n            return _context6.stop();\n        }\n      }\n    }, _callee6);\n  }));\n}\nexport function getWebFontEmbedCss(domNode) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee7() {\n    return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n      while (1) {\n        switch (_context7.prev = _context7.next) {\n          case 0:\n            return _context7.abrupt(\"return\", getWebFontCss(domNode, options));\n\n          case 1:\n          case \"end\":\n            return _context7.stop();\n        }\n      }\n    }, _callee7);\n  }));\n}","// MODULES //\n\nimport React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { withTranslation } from 'react-i18next';\nimport Button from 'react-bootstrap/Button';\nimport Modal from 'react-bootstrap/Modal';\nimport Tooltip from '@isle-project/components/tooltip';\n\n\n// MAIN //\n\nclass FullscreenButton extends Component {\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis.state = {\n\t\t\tfullscreen: false\n\t\t};\n\t}\n\n\ttoggleFullscreen = () => {\n\t\tthis.setState({\n\t\t\tfullscreen: !this.state.fullscreen\n\t\t});\n\t}\n\n\trender() {\n\t\tconst { t } = this.props;\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<Tooltip\n\t\t\t\t\tid=\"fullscreen_tooltip\"\n\t\t\t\t\tplacement=\"bottom\"\n\t\t\t\t\ttooltip={t('toggle-fullscreen')}\n\t\t\t\t>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant=\"outline-danger\"\n\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\tonClick={this.toggleFullscreen}\n\t\t\t\t\t\tstyle={{ position: 'absolute', top: '10px', right: '32px' }}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"fa fa-window-maximize\" />\n\t\t\t\t\t</Button>\n\t\t\t\t</Tooltip>\n\t\t\t\t<Modal\n\t\t\t\t\tshow={this.state.fullscreen}\n\t\t\t\t\tonHide={this.toggleFullscreen}\n\t\t\t\t\tdialogClassName=\"modal-100w\"\n\t\t\t\t>\n\t\t\t\t\t<Modal.Header closeButton>\n\t\t\t\t\t\t<Modal.Title as=\"h1\">\n\t\t\t\t\t\t\t{t('decision-tree')}\n\t\t\t\t\t\t</Modal.Title>\n\t\t\t\t\t</Modal.Header>\n\t\t\t\t\t<Modal.Body\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\theight: 0.75 * window.innerHeight,\n\t\t\t\t\t\t\twidth: '100%',\n\t\t\t\t\t\t\tfontSize: 32,\n\t\t\t\t\t\t\toverflow: 'scroll'\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"decision-tree decision-tree-fullscreen\">\n\t\t\t\t\t\t\t{this.props.tree}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Modal.Body>\n\t\t\t\t\t<Modal.Footer>\n\t\t\t\t\t\t<Button onClick={this.toggleFullscreen}>{t('close')}</Button>\n\t\t\t\t\t</Modal.Footer>\n\t\t\t\t</Modal>\n\t\t\t</Fragment>\n\t\t);\n\t}\n}\n\n\n// PROPERTIES //\n\nFullscreenButton.propTypes = {\n\ttree: PropTypes.node.isRequired\n};\n\n\n// EXPORTS //\n\nexport default withTranslation( 'models' )( FullscreenButton );\n","// MODULES //\n\nimport React, { Component } from 'react';\nimport { withTranslation } from 'react-i18next';\nimport { toJpeg } from 'html-to-image';\nimport { isPrimitive as isNumber } from '@stdlib/assert/is-number';\nimport isInteger from '@stdlib/assert/is-integer';\nimport randomstring from '@isle-project/utils/randomstring/alphanumeric';\nimport html2clipboard from '@isle-project/utils/html-to-clipboard';\nimport FullscreenButton from './fullscreen_button';\nimport './tree.css';\n\n\n// VARIABLES //\n\nconst RE_NUMBER = /^[+-]?[\\d.]+e?[+-]?\\d*$/;\n\n\n// FUNCTIONS //\n\nfunction treeToHtml( tree, t ) {\n\tif ( !tree ) {\n\t\treturn null;\n\t}\n\tif ( tree.category ) {\n\t\tlet value = tree.category;\n\t\tif ( isNumber( value ) || RE_NUMBER.test( value ) ) {\n\t\t\tvalue = Number( value );\n\t\t\tif ( !isInteger( value ) ) {\n\t\t\t\tvalue = value.toFixed( 6 );\n\t\t\t}\n\t\t}\n\t\treturn (\n\t\t\t<ul>\n\t\t\t\t<li >\n\t\t\t\t\t<span className=\"decision-tree-leaf\" >{t('predict')}: {value} </span>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t);\n\t}\n\treturn (\n\t\t<ul>\n\t\t\t<li>\n\t\t\t\t<span><b> {tree.attribute} {tree.predicateName} {tree.pivot} ?</b></span>\n\t\t\t\t<ul>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<span>{t('no')} ( {tree.notMatchedCount} {t('obs')}) </span>\n\t\t\t\t\t\t{treeToHtml( tree.notMatch, t )}\n\t\t\t\t\t</li>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<span>{t('yes')} ( {tree.matchedCount} {t('obs')}) </span>\n\t\t\t\t\t\t{treeToHtml( tree.match, t )}\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</li>\n\t\t</ul>\n\t);\n}\n\n\n// MAIN //\n\nclass TreePlot extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tthis.state = {\n\t\t\tplotValue: null,\n\t\t\tplotKey: null,\n\t\t\tfullscreen: false\n\t\t};\n\t}\n\n\tcomponentDidMount() {\n\t\tif ( !this.tree ) {\n\t\t\treturn;\n\t\t}\n\t\tthis.treeWrapper.scrollLeft = 0.4 * this.tree.clientWidth;\n\t\ttoJpeg( this.tree, {\n\t\t\tbackgroundColor: 'white',\n\t\t\tstyle: {\n\t\t\t\tfontSize: 22\n\t\t\t}\n\t\t}).then( ( data ) => {\n\t\t\tconst value = `<img src=\"${data}\" style=\"display: block; margin: 0 auto; max-width: 100%; max-height: 100%\" />`;\n\t\t\tthis.setState({\n\t\t\t\tplotKey: `<!--IMAGE_LOG:${randomstring( 6 )}_${randomstring( 6 )}-->`,\n\t\t\t\tplotValue: value\n\t\t\t});\n\t\t});\n\t}\n\n\trender() {\n\t\tconst { t } = this.props;\n\t\tconst tree = treeToHtml( this.props.tree, t );\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName=\"decision-tree-wrapper\"\n\t\t\t\tref={( div ) => {\n\t\t\t\t\tthis.treeWrapper = div;\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"decision-tree-draggable-bar\"\n\t\t\t\t\tdraggable=\"true\"\n\t\t\t\t\tonDragStart={( ev ) => {\n\t\t\t\t\t\tev.dataTransfer.setData( 'text/html', this.state.plotValue );\n\t\t\t\t\t\tev.dataTransfer.setData( 'text/plain', this.state.plotKey );\n\t\t\t\t\t}}\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\thtml2clipboard( this.state.plotValue );\n\t\t\t\t\t}}\n\t\t\t\t\tstyle={{ float: 'left' }}\n\t\t\t\t>{t('drag-plot')}</button>\n\t\t\t\t<FullscreenButton\n\t\t\t\t\tvariant=\"outline-danger\"\n\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tthis.setState({ fullscreen: !this.state.fullscreen });\n\t\t\t\t\t}}\n\t\t\t\t\ttree={tree}\n\t\t\t\t>\n\t\t\t\t\t<div className=\"fa fa-times\" />\n\t\t\t\t</FullscreenButton>\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"decision-tree\"\n\t\t\t\t\tref={( div ) => {\n\t\t\t\t\t\tthis.tree = div;\n\t\t\t\t\t}}\n\t\t\t\t>{tree}</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\n\n// EXPORTS //\n\nexport default withTranslation( 'models' )( TreePlot );\n","// MAIN //\n\n/**\n* Splitting observations using specific predicate and pivot.\n*/\nfunction split( data, indices, attr, predicate, pivot ) {\n\tconst match = [];\n\tconst notMatch = [];\n\tconst values = data[ attr ];\n\n\tfor ( let i = indices.length - 1; i >= 0; i-- ) {\n\t\tconst idx = indices[ i ];\n\t\tconst attrValue = values[ idx ];\n\t\tif ( predicate( attrValue, pivot ) ) {\n\t\t\tmatch.push( idx );\n\t\t} else {\n\t\t\tnotMatch.push( idx );\n\t\t}\n\t}\n\treturn {\n\t\tmatch: match,\n\t\tnotMatch: notMatch\n\t};\n}\n\n\n// EXPORTS //\n\nexport default split;\n","\n/**\n* Contains MIT-licensed code:\n*\n* The MIT License (MIT)\n*\n* Copyright (c) 2013 Yurii Lahodiuk\n*\n* Permission is hereby granted, free of charge, to any person obtaining a copy of\n* this software and associated documentation files (the \"Software\"), to deal in\n* the Software without restriction, including without limitation the rights to\n* use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of\n* the Software, and to permit persons to whom the Software is furnished to do so,\n* subject to the following conditions:\n*\n* The above copyright notice and this permission notice shall be included in all\n* copies or substantial portions of the Software.\n*\n* THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n* IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS\n* FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR\n* COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\n* IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\n* CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n*/\n\n// MODULES //\n\nimport sample from '@stdlib/random/sample';\nimport contains from '@stdlib/assert/contains';\nimport hasOwnProp from '@stdlib/assert/has-own-property';\nimport ln from '@stdlib/math/base/special/ln';\nimport round from '@stdlib/math/base/special/round';\nimport incrspace from '@stdlib/array/incrspace';\nimport Plot from './tree_plot.js';\nimport split from './split.js';\n\n\n// FUNCTIONS //\n\n/**\n* Calculating how many elements have the same\n* values\n*\n* @param values - array of values\n*/\nfunction countUniqueValues( values, indices ) {\n\tconst counter = {};\n\n\t// Detect different values of attribute:\n\tfor ( let i = indices.length - 1; i >= 0; i--) {\n\t\tconst idx = indices[ i ];\n\t\tcounter[ values[ idx ] ] = 0;\n\t}\n\n\t// Count number of occurrences of each of value:\n\tfor ( let i = indices.length - 1; i >= 0; i--) {\n\t\tconst idx = indices[ i ];\n\t\tcounter[ values[ idx ] ] += 1;\n\t}\n\treturn counter;\n}\n\n/**\n* Finding value which is most frequent in an array.\n*\n* @param values - array of values\n*/\nfunction mostFrequentValue( values, indices ) {\n\t// Counting number of occurrences:\n\tconst counter = countUniqueValues( values, indices );\n\n\tlet mostFrequentCount = 0;\n\tlet mostFrequentValue;\n\tfor ( let value in counter ) {\n\t\tif ( counter[ value ] > mostFrequentCount ) {\n\t\t\tmostFrequentCount = counter[ value ];\n\t\t\tmostFrequentValue = value;\n\t\t}\n\t}\n\treturn mostFrequentValue;\n}\n\nfunction gini( values, indices ) {\n\tconst counter = countUniqueValues( values, indices );\n\tlet out = 0;\n\tfor ( let i in counter ) {\n\t\tif ( hasOwnProp( counter, i ) ) {\n\t\t\tconst p = counter[i] / indices.length;\n\t\t\tout += p * (1-p);\n\t\t}\n\t}\n\treturn out;\n}\n\n/**\n* Calculating entropy of a variable.\n*\n* @param values - array of values\n*/\nfunction entropy( values, indices ) {\n\t// Count number of occurrences of each value:\n\tconst counter = countUniqueValues( values, indices );\n\tlet entropy = 0;\n\tfor ( let i in counter ) {\n\t\tif ( hasOwnProp( counter, i ) ) {\n\t\t\tconst p = counter[i] / indices.length;\n\t\t\tentropy += -p * ln(p);\n\t\t}\n\t}\n\treturn entropy;\n}\n\n/**\n* Calculates the variance of a variable.\n*\n* @param values - array of values\n*/\nfunction variance( values, indices ) {\n\tconst len = indices.length;\n\tlet delta = 0;\n\tlet mean = 0;\n\tlet M2 = 0;\n\tlet N = 0;\n\n\tif ( !len ) {\n\t\treturn null;\n\t}\n\tif ( len < 2 ) {\n\t\treturn 0;\n\t}\n\tfor ( let i = 0; i < len; i++ ) {\n\t\tconst idx = indices[ i ];\n\t\tconst x = values[ idx ];\n\t\tN += 1;\n\t\tdelta = x - mean;\n\t\tmean += delta / N;\n\t\tM2 += delta * ( x - mean );\n\t}\n\treturn M2 / ( N - 1 );\n}\n\n/**\n* Calculates the mean of a variable.\n*\n* @param values - array of values\n*/\nfunction mean( values, indices ) {\n\tconst len = indices.length;\n\tif ( !len ) {\n\t\treturn null;\n\t}\n\tlet mu = 0;\n\tfor ( let i = 0; i < len; i++ ) {\n\t\tconst idx = indices[ i ];\n\t\tconst delta = values[ idx ] - mu;\n\t\tmu += delta / (i+1);\n\t}\n\treturn mu;\n}\n\n// VARIABLES //\n\nconst predicates = {\n\t'==': ( a, b ) => a == b, // eslint-disable-line eqeqeq\n\t'>=': ( a, b ) => a >= b\n};\n\n\n// MAIN //\n\n/**\n* Creates an instance of a decision tree for classification problems.\n*\n* @constructor\n* @param opts - contains training set and some configuration parameters\n*/\nfunction ClassificationTreeConstructor( opts ) {\n\tconst nobs = opts.data[ opts.response ].length;\n\n\tthis.importances = {};\n\tfor ( let j = 0; j < opts.predictors.length; j++ ) {\n\t\tthis.importances[ opts.predictors[ j ] ] = 0;\n\t}\n\tthis.root = buildClassificationTree({\n\t\tdata: opts.data,\n\t\tresponse: opts.response,\n\t\tpredictors: opts.predictors,\n\t\tindices: opts.indices ? opts.indices : incrspace( 0, nobs, 1 ),\n\t\tminItemsCount: opts.minItemsCount || 50,\n\t\tminBucket: opts.minBucket || ( round( ( opts.minItemsCount || 50 ) / 3 )),\n\t\tscoreThreshold: opts.scoreThreshold || 0.01,\n\t\tmaxTreeDepth: opts.maxTreeDepth || 20,\n\t\tquantitative: opts.quantitative,\n\t\tcriterion: opts.criterion === 'gini' ? gini : entropy\n\t}, this.importances );\n\n\tthis.predict = ( data, idx ) => {\n\t\tif ( idx === void 0 ) {\n\t\t\tconst nobs = data[ opts.predictors[ 0 ] ].length;\n\t\t\tconst out = new Array( nobs );\n\t\t\tfor ( let i = 0; i < nobs; i++ ) {\n\t\t\t\tout[ i ] = predict( this.root, data, i );\n\t\t\t}\n\t\t\treturn out;\n\t\t}\n\t\treturn predict( this.root, data, idx );\n\t};\n}\n\n/**\n * Creates an instance of DecisionTree\n *\n * @constructor\n * @param builder - contains training set and\n *                  some configuration parameters\n */\nfunction RegressionTreeConstructor( opts ) {\n\tconst nobs = opts.data[ opts.response ].length;\n\n\tthis.root = buildRegressionTree({\n\t\tdata: opts.data,\n\t\tresponse: opts.response,\n\t\tpredictors: opts.predictors,\n\t\tindices: opts.indices ? opts.indices : incrspace( 0, nobs, 1 ),\n\t\tminItemsCount: opts.minItemsCount || 50,\n\t\tminBucket: opts.minBucket || ( round( ( opts.minItemsCount || 50 ) / 3 )),\n\t\tscoreThreshold: opts.scoreThreshold || 0.01,\n\t\tmaxTreeDepth: opts.maxTreeDepth || 20,\n\t\tquantitative: opts.quantitative\n\t});\n\n\tthis.predict = ( data, idx ) => {\n\t\tif ( idx === void 0 ) {\n\t\t\tconst nobs = data[ opts.predictors[ 0 ] ].length;\n\t\t\tconst out = new Array( nobs );\n\t\t\tfor ( let i = 0; i < nobs; i++ ) {\n\t\t\t\tout[ i ] = Number( predict( this.root, data, i ) );\n\t\t\t}\n\t\t\treturn out;\n\t\t}\n\t\treturn Number( predict( this.root, data, idx ) );\n\t};\n}\n\n/**\n* Creates an instance of RandomForest with specific number of trees.\n*\n* @constructor\n* @param opts - contains configuration parameters for building decision trees\n*/\nfunction RandomForestClassifierConstructor( opts ) {\n\tthis.trees = buildRandomForestClassifier( opts );\n\tthis.importances = {};\n\tfor ( let i = 0; i < opts.predictors.length; i++ ) {\n\t\tconst attr = opts.predictors[ i ];\n\t\tthis.importances[ attr ] = 0;\n\t\tfor ( let j = 0; j < this.trees.length; j++ ) {\n\t\t\tthis.importances[ attr ] += this.trees[ j ].importances[ attr ];\n\t\t}\n\t\tthis.importances[ attr ] /= this.trees.length;\n\t}\n\tthis.predict = ( data, idx ) => {\n\t\tif ( idx === void 0 ) {\n\t\t\tconst nobs = data[ opts.predictors[ 0 ] ].length;\n\t\t\tconst out = new Array( nobs );\n\t\t\tfor ( let i = 0; i < nobs; i++ ) {\n\t\t\t\tout[ i ] = predictRandomForest( this.trees, data, i );\n\t\t\t}\n\t\t\treturn out;\n\t\t}\n\t\treturn predictRandomForest( this.trees, data, idx );\n\t};\n}\n\n/**\n* Function for building classification decision tree.\n*/\nfunction buildClassificationTree( opts, importances ) {\n\tconst {\n\t\tdata, predictors, indices, response,\n\t\tminItemsCount, scoreThreshold, maxTreeDepth,\n\t\tquantitative, criterion, minBucket, nTry\n\t} = opts;\n\tconst nobs = indices.length;\n\tif ( ( maxTreeDepth === 0 ) || ( nobs <= minItemsCount ) ) {\n\t\t// Restriction by maximal depth of tree or size of training set is to small so we have to terminate process of building tree...\n\t\treturn {\n\t\t\tcategory: mostFrequentValue( data[ response ], indices )\n\t\t};\n\t}\n\tconst initialScore = criterion( data[ response ], indices );\n\n\t// Used as hash-set for avoiding the checking of split by rules with the same 'attribute-predicate-pivot' more than once\n\tconst alreadyChecked = {};\n\n\tlet bestSplit = {\n\t\tgain: 0\n\t};\n\tif ( nTry ) {\n\t\tpredictors = sample( predictors, { size: nTry });\n\t}\n\tfor ( let i = nobs - 1; i >= 0; i-- ) {\n\t\tconst idx = indices[ i ];\n\t\tfor ( let j = 0; j < predictors.length; j++ ) {\n\t\t\tconst attr = predictors[ j ];\n\n\t\t\t// Let the value of current attribute be the pivot:\n\t\t\tconst pivot = data[ attr ][ idx ];\n\n\t\t\t// Pick the predicate depending on the type of the attribute value...\n\t\t\tlet predicateName;\n\t\t\tif ( contains( quantitative, attr ) ) {\n\t\t\t\tpredicateName = '>=';\n\t\t\t} else {\n\t\t\t\t// No sense to compare non-numeric attributes so we will check only equality of such attributes...\n\t\t\t\tpredicateName = '==';\n\t\t\t}\n\n\t\t\tconst attrPredPivot = attr + predicateName + pivot;\n\t\t\tif ( alreadyChecked[attrPredPivot] ) {\n\t\t\t\t// Skip such pairs of 'attribute-predicate-pivot' which have been already checked...\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\talreadyChecked[ attrPredPivot ] = true;\n\t\t\tconst predicate = predicates[ predicateName ];\n\n\t\t\t// Splitting training set by given 'attribute-predicate-value':\n\t\t\tconst currSplit = split( data, indices, attr, predicate, pivot );\n\n\t\t\t// Recursively calculating for subsets:\n\t\t\tconst matchEntropy = criterion( data[ response ], currSplit.match );\n\t\t\tconst notMatchEntropy = criterion( data[ response ], currSplit.notMatch );\n\n\t\t\t// Calculating gain:\n\t\t\tlet newScore = 0;\n\t\t\tnewScore += matchEntropy * currSplit.match.length;\n\t\t\tnewScore += notMatchEntropy * currSplit.notMatch.length;\n\t\t\tnewScore /= nobs;\n\t\t\tconst currGain = initialScore - newScore;\n\t\t\tif (\n\t\t\t\tcurrGain > bestSplit.gain &&\n\t\t\t\tcurrSplit.match.length > minBucket &&\n\t\t\t\tcurrSplit.notMatch.length > minBucket\n\t\t\t) {\n\t\t\t\t// Remember pairs 'attribute-predicate-value' which provide gain...\n\t\t\t\tbestSplit = currSplit;\n\t\t\t\tbestSplit.predicateName = predicateName;\n\t\t\t\tbestSplit.predicate = predicate;\n\t\t\t\tbestSplit.attribute = attr;\n\t\t\t\tbestSplit.pivot = pivot;\n\t\t\t\tbestSplit.gain = currGain;\n\t\t\t}\n\t\t}\n\t}\n\tif ( !bestSplit.gain || ( bestSplit.gain / initialScore ) < scoreThreshold ) {\n\t\treturn { category: mostFrequentValue( data[ response ], indices ) };\n\t}\n\t// Building sub-trees:\n\topts.maxTreeDepth = maxTreeDepth - 1;\n\n\timportances[ bestSplit.attribute ] += bestSplit.gain;\n\n\topts.indices = bestSplit.match;\n\tconst matchSubTree = buildClassificationTree( opts, importances );\n\n\topts.indices = bestSplit.notMatch;\n\tconst notMatchSubTree = buildClassificationTree( opts, importances );\n\n\treturn {\n\t\tattribute: bestSplit.attribute,\n\t\tpredicate: bestSplit.predicate,\n\t\tpredicateName: bestSplit.predicateName,\n\t\tpivot: bestSplit.pivot,\n\t\tmatch: matchSubTree,\n\t\tnotMatch: notMatchSubTree,\n\t\tmatchedCount: bestSplit.match.length,\n\t\tnotMatchedCount: bestSplit.notMatch.length\n\t};\n}\n\n/**\n* Function for building classification decision tree.\n*/\nfunction buildRegressionTree( opts ) {\n\tconst {\n\t\tdata, predictors, indices, response,\n\t\tminItemsCount, scoreThreshold, maxTreeDepth,\n\t\tquantitative, minBucket, nTry\n\t} = opts;\n\n\tconst nobs = indices.length;\n\tif ((maxTreeDepth === 0) || ( nobs <= minItemsCount)) {\n\t\t// restriction by maximal depth of tree\n\t\t// or size of training set is to small\n\t\t// so we have to terminate process of building tree\n\t\treturn {\n\t\t\tcategory: mean( data[ response ], indices )\n\t\t};\n\t}\n\n\tconst initialScore = variance( data[ response ], indices );\n\n\t// used as hash-set for avoiding the checking of split by rules\n\t// with the same 'attribute-predicate-pivot' more than once\n\tconst alreadyChecked = {};\n\n\t// this variable expected to contain rule, which splits training set\n\t// into subsets with smaller values of entropy (produces informational gain)\n\tlet bestSplit = {\n\t\tgain: 0\n\t};\n\n\tif ( nTry ) {\n\t\tpredictors = sample( predictors, { size: nTry });\n\t}\n\tfor ( let i = nobs - 1; i >= 0; i-- ) {\n\t\tconst idx = indices[ i ];\n\n\t\t// iterating over all attributes of item\n\t\tfor ( let j = 0; j < predictors.length; j++ ) {\n\t\t\tconst attr = predictors[ j ];\n\n\t\t\t// let the value of current attribute be the pivot\n\t\t\tconst pivot = data[ attr ][ idx ];\n\n\t\t\t// Pick the predicate depending on the type of the attribute value:\n\t\t\tlet predicateName;\n\t\t\tif ( contains( quantitative, attr ) ) {\n\t\t\t\tpredicateName = '>=';\n\t\t\t} else {\n\t\t\t\t// There is no sense to compare non-numeric attributes so we will check only equality of such attributes...\n\t\t\t\tpredicateName = '==';\n\t\t\t}\n\n\t\t\tconst attrPredPivot = attr + predicateName + pivot;\n\t\t\tif ( alreadyChecked[attrPredPivot] ) {\n\t\t\t\t// skip such pairs of 'attribute-predicate-pivot',\n\t\t\t\t// which been already checked\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\talreadyChecked[ attrPredPivot ] = true;\n\n\t\t\tconst predicate = predicates[ predicateName ];\n\n\t\t\t// splitting training set by given 'attribute-predicate-value'\n\t\t\tconst currSplit = split( data, indices, attr, predicate, pivot );\n\n\t\t\t// calculating for subsets:\n\t\t\tconst matchEntropy = variance( data[ response ], currSplit.match );\n\t\t\tconst notMatchEntropy = variance( data[ response ], currSplit.notMatch );\n\n\t\t\t// calculating informational gain\n\t\t\tlet newScore = 0;\n\t\t\tnewScore += matchEntropy * currSplit.match.length;\n\t\t\tnewScore += notMatchEntropy * currSplit.notMatch.length;\n\t\t\tnewScore /= nobs;\n\t\t\tconst currGain = initialScore - newScore;\n\t\t\tif (\n\t\t\t\tcurrGain > bestSplit.gain &&\n\t\t\t\tcurrSplit.match.length > minBucket &&\n\t\t\t\tcurrSplit.notMatch.length > minBucket\n\t\t\t) {\n\t\t\t\tbestSplit = currSplit;\n\t\t\t\tbestSplit.predicateName = predicateName;\n\t\t\t\tbestSplit.predicate = predicate;\n\t\t\t\tbestSplit.attribute = attr;\n\t\t\t\tbestSplit.pivot = pivot;\n\t\t\t\tbestSplit.gain = currGain;\n\t\t\t}\n\t\t}\n\t}\n\tif ( !bestSplit.gain || ( bestSplit.gain / initialScore ) < scoreThreshold ) {\n\t\treturn { category: mean( data[ response ], indices ) };\n\t}\n\n\t// Building sub-trees:\n\topts.maxTreeDepth = maxTreeDepth - 1;\n\n\topts.indices = bestSplit.match;\n\tconst matchSubTree = buildRegressionTree( opts );\n\n\topts.indices = bestSplit.notMatch;\n\tconst notMatchSubTree = buildRegressionTree( opts );\n\n\treturn {\n\t\tattribute: bestSplit.attribute,\n\t\tpredicate: bestSplit.predicate,\n\t\tpredicateName: bestSplit.predicateName,\n\t\tpivot: bestSplit.pivot,\n\t\tmatch: matchSubTree,\n\t\tnotMatch: notMatchSubTree,\n\t\tmatchedCount: bestSplit.match.length,\n\t\tnotMatchedCount: bestSplit.notMatch.length\n\t};\n}\n\n/**\n* Returns the predicted value for the i-th observation using the decision tree.\n*/\nfunction predict( tree, data, i ) {\n\t// Traversing tree from the root to leaf:\n\twhile ( true ) {\n\t\tif ( tree.category ) {\n\t\t\t// Only leafs contains predicted category...\n\t\t\treturn tree.category;\n\t\t}\n\t\tconst attr = tree.attribute;\n\t\tconst value = data[ attr ][ i ];\n\t\tconst predicate = tree.predicate;\n\t\tconst pivot = tree.pivot;\n\n\t\t// Move to one of the sub-trees:\n\t\tif ( predicate( value, pivot ) ) {\n\t\t\ttree = tree.match;\n\t\t} else {\n\t\t\ttree = tree.notMatch;\n\t\t}\n\t}\n}\n\n/**\n* Building array of decision trees.\n*/\nfunction buildRandomForestClassifier( opts ) {\n\t// Creating training sets for each tree:\n\tconst trainingSets = [];\n\tconst nobs = opts.data[ opts.response ].length;\n\tconst indices = incrspace( 0, nobs, 1 );\n\tfor ( let t = 0; t < opts.nTrees; t++ ) {\n\t\ttrainingSets[ t ] = sample( indices );\n\t}\n\tconst forest = [];\n\tfor ( let t = 0; t < opts.nTrees; t++ ) {\n\t\topts.indices = trainingSets[ t ];\n\t\tconst tree = new ClassificationTreeConstructor( opts );\n\t\tforest.push( tree );\n\t}\n\treturn forest;\n}\n\n/**\n* Returns the majority vote prediction for the chosen item.\n*/\nfunction predictRandomForest( forest, data, idx ) {\n\tconst result = {};\n\tfor ( let i = 0; i < forest.length; i++ ) {\n\t\tconst tree = forest[ i ];\n\t\tconst prediction = tree.predict( data, idx );\n\t\tresult[ prediction ] = result[ prediction ] ? result[ prediction ] + 1 : 1;\n\t}\n\tlet max = -1;\n\tlet out;\n\tfor ( let key in result ) {\n\t\tif ( hasOwnProp( result, key ) ) {\n\t\t\tif ( result[ key ] > max ) {\n\t\t\t\tmax = result[ key ];\n\t\t\t\tout = key;\n\t\t\t}\n\t\t}\n\t}\n\treturn out;\n}\n\n\n// EXPORTS //\n\nexport const ClassificationTree = ClassificationTreeConstructor;\nexport const RegressionTree = RegressionTreeConstructor;\nexport const RandomForestClassifier = RandomForestClassifierConstructor;\nexport const TreePlot = Plot;\n","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import arrayLikeToArray from \"@babel/runtime/helpers/esm/arrayLikeToArray\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}"],"sourceRoot":""}