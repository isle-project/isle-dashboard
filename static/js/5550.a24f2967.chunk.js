"use strict";(self.webpackChunkisle_dashboard=self.webpackChunkisle_dashboard||[]).push([[5550],{7646:function(module,__unused_webpack_exports,__webpack_require__){var isDigitString=__webpack_require__(11933);module.exports=isDigitString},11933:function(module,__unused_webpack_exports,__webpack_require__){var isString=__webpack_require__(99301).isPrimitive,ZERO=48,NINE=57;function isDigitString(x){var len,ch,i;if(!isString(x)||(len=x.length,len===0))return!1;for(i=0;i<len;i++)if(ch=x.charCodeAt(i),ch<ZERO||ch>NINE)return!1;return!0}module.exports=isDigitString},25550:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:function(){return main}});var react=__webpack_require__(67294),prop_types=__webpack_require__(45697),prop_types_default=__webpack_require__.n(prop_types),react_dom=__webpack_require__(73935),browser=__webpack_require__(14946),browser_default=__webpack_require__.n(browser),commonjs=__webpack_require__(81468),lib=__webpack_require__(86199),uniq=__webpack_require__(38706),uniq_default=__webpack_require__.n(uniq),Alert=__webpack_require__(24032),Alert_default=__webpack_require__.n(Alert),ButtonToolbar=__webpack_require__(49162),ButtonToolbar_default=__webpack_require__.n(ButtonToolbar),Button=__webpack_require__(30276),Button_default=__webpack_require__.n(Button),Modal=__webpack_require__(33089),Modal_default=__webpack_require__.n(Modal),tooltip=__webpack_require__(77287),markdown_it=__webpack_require__(9980),markdown_it_default=__webpack_require__.n(markdown_it),is_digit_string_lib=__webpack_require__(7646),lib_default=__webpack_require__.n(is_digit_string_lib),is_typed_array_lib=__webpack_require__(86390),is_typed_array_lib_default=__webpack_require__.n(is_typed_array_lib),contains_lib=__webpack_require__(61635),contains_lib_default=__webpack_require__.n(contains_lib),lowercase_lib=__webpack_require__(86361),lowercase_lib_default=__webpack_require__.n(lowercase_lib),floor_lib=__webpack_require__(78113),floor_lib_default=__webpack_require__.n(floor_lib),ceil_lib=__webpack_require__(77731),ceil_lib_default=__webpack_require__.n(ceil_lib),is_number_array_lib=__webpack_require__(80426),is_number_array_lib_default=__webpack_require__.n(is_number_array_lib),is_empty_array_lib=__webpack_require__(38279),is_empty_array_lib_default=__webpack_require__.n(is_empty_array_lib),is_empty_object_lib=__webpack_require__(83966),is_empty_object_lib_default=__webpack_require__.n(is_empty_object_lib),is_object_lib=__webpack_require__(21405),is_object_lib_default=__webpack_require__.n(is_object_lib),is_array_lib=__webpack_require__(76266),is_array_lib_default=__webpack_require__.n(is_array_lib),is_number_lib=__webpack_require__(91317),is_null_lib=__webpack_require__(95447),is_null_lib_default=__webpack_require__.n(is_null_lib),keys_lib=__webpack_require__(25351),keys_lib_default=__webpack_require__.n(keys_lib),min=__webpack_require__(55472),max=__webpack_require__(28118),uid=__webpack_require__(6756),file_saver=__webpack_require__(60305),context=__webpack_require__(32283),actions=__webpack_require__(67033),ninf_lib=__webpack_require__(58747),ninf_lib_default=__webpack_require__.n(ninf_lib),input_select=__webpack_require__(57082),react_select_cjs_prod=__webpack_require__(87583),Tooltip=__webpack_require__(31307),Tooltip_default=__webpack_require__.n(Tooltip),overlay_trigger=__webpack_require__(95108),joyride=__webpack_require__(10766),copy_lib=__webpack_require__(58140),copy_lib_default=__webpack_require__.n(copy_lib),steps_namespaceObject=JSON.parse('[{"target":".data-table-title-button","content":"On top of the data table you find the name of the data set. Clicking on it will open a modal window with a detailed description.","placement":"bottom","placementBeacon":"bottom"},{"target":".ReactTable","content":"Tabular display of the data set, with rows corresponding to individual records and columns to the different variables.","placement":"bottom","placementBeacon":"bottom"},{"target":".-header","content":"Variable names. Hovering over the names with your mouse opens a tooltip with the description of the respective variable. Clicking on any column orders the rows of the data table by the values of the chosen column. You can also select multiple columns by holding down the \\"Shift\\" key to sort by multiple columns","placement":"bottom","placementBeacon":"bottom"},{"target":".-filter","content":"Filter out rows by adjusting the filters for any column.","placement":"top","placementBeacon":"top"},{"target":".label-number-rows","content":"The number of currently displayed rows, i.e. the rows matching the specified filters, and in parentheses the total number of rows in the table.","placement":"top","placementBeacon":"top"},{"target":".reset-button","content":"Clicking on the reset button will clear all currently active filters and return the ordering of the rows to its default.","placement":"top","placementBeacon":"top"},{"target":".variable-descriptions-button","content":"The descriptions for each variable can also be accessed by clicking on this button.","placement":"top","placementBeacon":"top"}]'),__defProp=Object.defineProperty,__defNormalProp=(obj,key,value)=>key in obj?__defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value}):obj[key]=value,__publicField=(obj,key,value)=>(__defNormalProp(obj,typeof key!="symbol"?key+"":key,value),value);class Tutorial extends react.Component{constructor(props){super(props);__publicField(this,"startTour",()=>{this.setState({running:!this.state.running})}),this.state={running:!1},this.stepsWithId=copy_lib_default()(steps_namespaceObject,2).map(x=>(x.target=`#${props.id} `+x.target,x))}render(){return react.createElement(react.Fragment,null,react.createElement(overlay_trigger.Z,{placement:"bottom",overlay:react.createElement(Tooltip_default(),null,this.props.t(this.state.running?"close-tutorial":"show-tutorial"))},react.createElement(Button_default(),{"aria-label":this.props.t("show-tutorial"),className:"help-button",variant:"light",onClick:this.startTour},react.createElement("div",{className:"fa fa-question"}))),react.createElement(joyride.ZP,{steps:this.stepsWithId,disableScrolling:!0,showProgress:!0,run:this.state.running,callback:tour=>{tour.type===joyride.FP.TOUR_END&&(this.setState({running:!1}),this.props.onTutorialCompletion())}}))}}Tutorial.propTypes={onTutorialCompletion:prop_types_default().func.isRequired};var tutorial_button=Tutorial,Overlay=__webpack_require__(76296),Overlay_default=__webpack_require__.n(Overlay),column_title_defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,column_title_defNormalProp=(obj,key,value)=>key in obj?column_title_defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value}):obj[key]=value,__spreadValues=(a,b)=>{for(var prop in b||(b={}))__hasOwnProp.call(b,prop)&&column_title_defNormalProp(a,prop,b[prop]);if(__getOwnPropSymbols)for(var prop of __getOwnPropSymbols(b))__propIsEnum.call(b,prop)&&column_title_defNormalProp(a,prop,b[prop]);return a},__spreadProps=(a,b)=>__defProps(a,__getOwnPropDescs(b)),__objRest=(source,exclude)=>{var target={};for(var prop in source)__hasOwnProp.call(source,prop)&&exclude.indexOf(prop)<0&&(target[prop]=source[prop]);if(source!=null&&__getOwnPropSymbols)for(var prop of __getOwnPropSymbols(source))exclude.indexOf(prop)<0&&__propIsEnum.call(source,prop)&&(target[prop]=source[prop]);return target},column_title_publicField=(obj,key,value)=>(column_title_defNormalProp(obj,typeof key!="symbol"?key+"":key,value),value);class ColumnTitle extends react.Component{constructor(props){super(props);column_title_publicField(this,"showTooltip",()=>{this.setState({showTooltip:!0})}),column_title_publicField(this,"hideTooltip",()=>{this.setState({showTooltip:!1})}),this.state={showTooltip:!1}}render(){return react.createElement(react.Fragment,null,react.createElement(Overlay_default(),{show:this.state.showTooltip,target:this.title},_a=>{var _b=_a,{placement,scheduleUpdate,arrowProps,outOfBoundaries,show}=_b,props=__objRest(_b,["placement","scheduleUpdate","arrowProps","outOfBoundaries","show"]);return react.createElement("div",__spreadProps(__spreadValues({},props),{style:__spreadValues({backgroundColor:"rgba(10, 10, 10,0.9)",padding:"2px 10px",color:"white",borderRadius:3,maxWidth:"300px",marginBottom:"10px"},props.style)}),this.props.tooltip)}),react.createElement("span",{ref:title=>{this.title=title},onMouseOver:this.showTooltip,onFocus:this.showTooltip,onMouseOut:this.hideTooltip,onBlur:this.hideTooltip},this.props.title))}}ColumnTitle.propTypes={title:prop_types_default().string.isRequired,tooltip:prop_types_default().string},ColumnTitle.defaultProps={tooltip:""};var column_title=ColumnTitle,focus_trap_react=__webpack_require__(54483),focus_trap_react_default=__webpack_require__.n(focus_trap_react),js=__webpack_require__(9322),js_default=__webpack_require__.n(js),number=__webpack_require__(34136),round_lib=__webpack_require__(55809),round_lib_default=__webpack_require__.n(round_lib),input_range_defProp=Object.defineProperty,input_range_defProps=Object.defineProperties,input_range_getOwnPropDescs=Object.getOwnPropertyDescriptors,input_range_getOwnPropSymbols=Object.getOwnPropertySymbols,input_range_hasOwnProp=Object.prototype.hasOwnProperty,input_range_propIsEnum=Object.prototype.propertyIsEnumerable,input_range_defNormalProp=(obj,key,value)=>key in obj?input_range_defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value}):obj[key]=value,input_range_spreadValues=(a,b)=>{for(var prop in b||(b={}))input_range_hasOwnProp.call(b,prop)&&input_range_defNormalProp(a,prop,b[prop]);if(input_range_getOwnPropSymbols)for(var prop of input_range_getOwnPropSymbols(b))input_range_propIsEnum.call(b,prop)&&input_range_defNormalProp(a,prop,b[prop]);return a},input_range_spreadProps=(a,b)=>input_range_defProps(a,input_range_getOwnPropDescs(b)),input_range_objRest=(source,exclude)=>{var target={};for(var prop in source)input_range_hasOwnProp.call(source,prop)&&exclude.indexOf(prop)<0&&(target[prop]=source[prop]);if(source!=null&&input_range_getOwnPropSymbols)for(var prop of input_range_getOwnPropSymbols(source))exclude.indexOf(prop)<0&&input_range_propIsEnum.call(source,prop)&&(target[prop]=source[prop]);return target},input_range_publicField=(obj,key,value)=>(input_range_defNormalProp(obj,typeof key!="symbol"?key+"":key,value),value);class FilterInputRange extends react.Component{constructor(props){super(props);input_range_publicField(this,"showRangeInput",()=>{this.setState({showRangeInput:!0})}),input_range_publicField(this,"hideRangeInput",()=>{this.setState({showRangeInput:!1})}),input_range_publicField(this,"handleBlur",()=>{this.props.onChange(this.state.currentValue)}),this.state={currentValue:props.defaultValue,defaultValue:props.defaultValue,showRangeInput:!1}}static getDerivedStateFromProps(nextProps,prevState){return nextProps.defaultValue!==prevState.defaultValue?{currentValue:nextProps.defaultValue,defaultValue:nextProps.defaultValue}:null}render(){const{currentValue}=this.state;return react.createElement("div",{className:"input-range-wrapper",ref:div=>{this.inputRange=div}},react.createElement(js_default(),{ariaLabelledby:this.props.ariaLabelledby,ariaControls:this.props.ariaControls,allowSameValues:!0,maxValue:this.props.maxValue,minValue:this.props.minValue,value:currentValue,onChange:currentValue2=>{this.setState({currentValue:currentValue2})},onChangeComplete:newValue=>{this.props.onChange(newValue)},formatLabel:val=>react.createElement("span",{className:"input-range-clickable-label",role:"button",tabIndex:0,onKeyPress:this.showRangeInput,onClick:this.showRangeInput,title:this.props.t("click-to-set-value")},round_lib_default()(val)),style:{float:"left"}}),react.createElement(Overlay_default(),{show:this.state.showRangeInput,target:this.inputRange,placement:"right"},_a=>{var _b=_a,{placement,scheduleUpdate,arrowProps,outOfBoundaries,show}=_b,props=input_range_objRest(_b,["placement","scheduleUpdate","arrowProps","outOfBoundaries","show"]);return react.createElement(focus_trap_react_default(),{active:this.state.showRangeInput},react.createElement("div",input_range_spreadProps(input_range_spreadValues({className:"input-range-number-entry"},props),{style:input_range_spreadValues({},props.style)}),react.createElement(number.Z,{inline:!0,value:currentValue.min,min:this.props.minValue,max:currentValue.max,onChange:v=>{const newValue={min:Number(v),max:this.state.currentValue.max};this.setState({currentValue:newValue})},onBlur:this.handleBlur,step:.1}),react.createElement(number.Z,{inline:!0,value:currentValue.max,min:currentValue.min,max:this.props.maxValue,onChange:v=>{const newValue={min:this.state.currentValue.min,max:Number(v)};this.setState({currentValue:newValue})},onBlur:this.handleBlur,step:.1}),react.createElement(Button_default(),{"aria-label":this.props.t("close"),variant:"outline-secondary",size:"sm",onClick:this.hideRangeInput},react.createElement("i",{className:"fas fa-times"}))))}))}}FilterInputRange.propTypes={defaultValue:prop_types_default().object.isRequired,maxValue:prop_types_default().number.isRequired,minValue:prop_types_default().number.isRequired,onChange:prop_types_default().func.isRequired};var input_range=FilterInputRange,prop_check=__webpack_require__(25048),react_table=__webpack_require__(94064),main_defProp=Object.defineProperty,main_defProps=Object.defineProperties,main_getOwnPropDescs=Object.getOwnPropertyDescriptors,main_getOwnPropSymbols=Object.getOwnPropertySymbols,main_hasOwnProp=Object.prototype.hasOwnProperty,main_propIsEnum=Object.prototype.propertyIsEnumerable,main_defNormalProp=(obj,key,value)=>key in obj?main_defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value}):obj[key]=value,main_spreadValues=(a,b)=>{for(var prop in b||(b={}))main_hasOwnProp.call(b,prop)&&main_defNormalProp(a,prop,b[prop]);if(main_getOwnPropSymbols)for(var prop of main_getOwnPropSymbols(b))main_propIsEnum.call(b,prop)&&main_defNormalProp(a,prop,b[prop]);return a},main_spreadProps=(a,b)=>main_defProps(a,main_getOwnPropDescs(b)),main_publicField=(obj,key,value)=>(main_defNormalProp(obj,typeof key!="symbol"?key+"":key,value),value);const md=markdown_it_default()({html:!0,xhtmlOut:!0,breaks:!0,typographer:!1}),debug=browser_default()("isle:data-table"),main_uid=(0,uid.Z)("data-table"),collator=new Intl.Collator("en",{numeric:!0,sensitivity:"base"}),RE_NUMBER=/[0-9.,]+/;function numericComparer(a,b){return a=a==null||a==="NA"?ninf_lib_default():a,b=b==null||b==="NA"?ninf_lib_default():b,a-b}function generalComparer(a,b){return a=a==null||a==="NA"?ninf_lib_default():a,b=b==null||b==="NA"?ninf_lib_default():b,collator.compare(a,b)}function createDescriptions(descriptions,t){const keys=keys_lib_default()(descriptions),arr=new Array(keys.length);for(let i=0;i<keys.length;i++){const key=keys[i];arr[i]=react.createElement("tr",{key:`${key}-${i}`},react.createElement("td",null,`${key}`),react.createElement("td",null,descriptions[key]))}return react.createElement("table",{className:"table-bordered table-condensed",style:{width:"100%"}},react.createElement("thead",null,react.createElement("tr",null,react.createElement("th",null,t("name")),react.createElement("th",null,t("description")))),react.createElement("tbody",null,arr))}function filterMethodStrings(filter,row){const rowValue=row[filter.id];return!rowValue&&filter.value?!1:is_array_lib_default()(filter.value)?contains_lib_default()(filter.value,rowValue):contains_lib_default()(lowercase_lib_default()(rowValue),lowercase_lib_default()(filter.value))}function filterMethodNumbers(filter,row){const val=row[filter.id];return val>=filter.value.min&&val<=filter.value.max}function filterMethodCategories(filter,row,column){if(!filter.value||is_empty_array_lib_default()(filter.value))return!0;const id=filter.pivotId||filter.id;return row[id]===void 0?!0:is_array_lib_default()(filter.value)?contains_lib_default()(filter.value,String(row[id])):String(row[id])===filter.value}function maxLength(obj,keys){let v=0;for(let i=0;i<keys.length;i++){const key=keys[i],arr=obj[key];is_array_lib_default()(arr)&&arr.length>v&&(v=arr.length)}return v}function createRows(data){if(is_empty_object_lib_default()(data))return[];const keys=keys_lib_default()(data),nRows=maxLength(data,keys),rows=new Array(nRows);for(let i=0;i<nRows;i++){rows[i]={};for(let j=0;j<keys.length;j++){let key=keys[j];rows[i][key]=data[key][i]}}return rows}const CustomIndicator=()=>react.createElement("div",null);function adjustWidth(event){event.target.style.width=event.target.value.length+1+"ch"}function createColumns(props,state){debug("Create columns...");const t=props.t;return state.keys.filter(key=>key!=="id").map((key,idx)=>{let header=key;const hasDescription=props.dataInfo&&props.dataInfo.variables&&props.dataInfo.variables[key],out={id:key,accessor:d=>is_null_lib_default()(d[key])?"NA":String(d[key]),minWidth:hasDescription?125:150};hasDescription?header=react.createElement(column_title,{title:key,tooltip:props.dataInfo.variables[key]}):props.deletable&&!contains_lib_default()(props.undeletableVars,key)&&(header=react.createElement("div",{style:{backgroundColor:"papayawhip"}},react.createElement(tooltip.Z,{placement:"left",tooltip:t("rename-variable")},react.createElement("span",null,react.createElement("input",{type:"text",className:"header-text-input",style:{width:`${key.length+1}ch`},defaultValue:key,onBlur:e=>{const newKey=e.target.value;document.getElementById(`header-${key}`).setAttribute("draggable",!0),newKey.length>0&&key!==newKey&&props.onColumnNameChange(key,newKey)},onMouseEnter:e=>{document.getElementById(`header-${key}`).setAttribute("draggable",!1)},onChange:adjustWidth,onClick:e=>{e.stopPropagation()}}))),react.createElement(tooltip.Z,{placement:"left",tooltip:t("remove-variable")},react.createElement("button",{"aria-label":t("remove-variable"),className:"fa fa-times delete-button",onClick:evt=>{evt.stopPropagation(),props.onColumnDelete(key)}})))),out.Header=header;let vals;if(!is_array_lib_default()(props.data))vals=props.data[key].slice();else{vals=new Array(state.rows.length);for(let i=0;i<state.rows.length;i++)vals[i]=props.data[i][key]}if(props.filterable){let isNumColumn=!1,uniqueValues;if(is_typed_array_lib_default()(vals))isNumColumn=!0,uniqueValues=vals;else{vals=vals.filter(x=>!is_null_lib_default()(x)&&x!==""&&x!=="NA"),uniqueValues=uniq_default()(vals);const activeFilter=props.filters.filter(x=>x.id===key)[0];activeFilter&&(0,is_number_lib.isPrimitive)(activeFilter.value.min)&&(0,is_number_lib.isPrimitive)(activeFilter.value.max)?isNumColumn=!0:isNumColumn=is_number_array_lib_default()(vals)&&uniqueValues.length>2}isNumColumn?(out.filterMethod=filterMethodNumbers,out.sortMethod=numericComparer,out.style={textAlign:"right"},out.Filter=({filter,onChange})=>{const maxValue=ceil_lib_default()((0,max.Z)(uniqueValues)),minValue=floor_lib_default()((0,min.Z)(uniqueValues)),defaultVal={max:maxValue,min:minValue};return react.createElement(input_range,{ariaLabelledby:`header-${key}`,ariaControls:state.id,defaultValue:filter?filter.value:defaultVal,onChange,maxValue,minValue,t})}):uniqueValues.length<=50?(uniqueValues=uniqueValues.map(x=>String(x)).sort(generalComparer),lib_default()(uniqueValues[0])&&(out.style={textAlign:"right"}),out.filterMethod=filterMethodCategories,out.sortMethod=generalComparer,out.Filter=({filter,onChange})=>react.createElement(input_select.Z,{onChange:vals2=>{vals2&&vals2.length>0&&uniqueValues.length>3?out.minWidth=300:out.minWidth=125,onChange(vals2)},style:{width:"100%"},value:filter?filter.value:null,searchable:!1,options:uniqueValues,menuPlacement:"auto",multi:!0,placeholder:t("show-all"),components:{DropdownIndicator:CustomIndicator,MultiValueLabel:props2=>{const invertSelection=()=>{onChange(uniqueValues.filter(x=>x!==props2.children))};return react.createElement(tooltip.Z,{tooltip:t("select-others"),placement:"bottom"},react.createElement("span",{role:"button",tabIndex:0,onClick:invertSelection,onKeyPress:invertSelection,onMouseDown:event=>{event.preventDefault(),event.stopPropagation()},style:{cursor:"cursor"}},react.createElement(react_select_cjs_prod.wx.MultiValueLabel,main_spreadValues({},props2))))}},escapeClearsValue:!0,closeMenuOnSelect:uniqueValues.length<=2,menuPortalTarget:document.body,styles:{menuPortal:base=>main_spreadProps(main_spreadValues({},base),{zIndex:9999})}})):(out.filterMethod=filterMethodStrings,out.sortMethod=generalComparer)}return out})}class DataTable extends react.Component{constructor(props){super(props);main_publicField(this,"renderEditable",cellInfo=>react.createElement("div",{style:{backgroundColor:"#fafafa"},contentEditable:!0,suppressContentEditableWarning:!0,onBlur:e=>{const rows=[...this.state.rows],val=e.target.innerHTML;rows[cellInfo.index][cellInfo.column.id]=RE_NUMBER.test(val)?Number(val):val,this.setState({rows},()=>{this.props.onEdit(rows)})},dangerouslySetInnerHTML:{__html:this.state.rows[cellInfo.index][cellInfo.column.id]}})),main_publicField(this,"renderCheckboxRemovable",cellInfo=>react.createElement("input",{id:"checkBox",type:"checkbox",key:`${cellInfo.index}-${cellInfo.column.id}-${this.state.rows.length}`,onClick:e=>{const rows=[...this.state.rows];rows[cellInfo.index][cellInfo.column.id]=e.target.checked,this.setState({rows}),this.props.onClickRemove(rows)}})),main_publicField(this,"handleFilterChange",(filtered,column)=>{const tbody=(0,react_dom.findDOMNode)(this.table).getElementsByClassName("rt-tbody")[0];tbody.scrollTop=0,this.context.log({id:this.id,type:actions.Uc,value:column.id}),this.setState({filtered},()=>{this.props.onFilteredChange(this.state.filtered.filter(x=>!is_null_lib_default()(x.value)))})}),main_publicField(this,"handleSortedChange",(sorted,column)=>{this.context.log({id:this.id,type:actions.mk,value:column.id}),this.setState({sorted})}),main_publicField(this,"showDescriptions",()=>{this.setState({showVarModal:!0})}),main_publicField(this,"reset",()=>{this.context.log({id:this.id,type:actions.Di,value:""}),this.setState({filtered:[],sorted:[]},()=>{this.props.onFilteredChange(this.state.filtered)})}),main_publicField(this,"showInfo",()=>{debug("Show dataset information..."),this.setState({showInfo:!0})}),main_publicField(this,"toggleSaveModal",()=>{this.setState({showSaveModal:!this.state.showSaveModal})}),main_publicField(this,"saveJSON",()=>{const blob=new Blob([JSON.stringify(this.state.data)],{type:"application/json"}),dataInfo2=this.props.dataInfo;let name;!dataInfo2||!dataInfo2.name?name="dataset.json":name=dataInfo2.name,(0,file_saver.Z)(blob,name)}),main_publicField(this,"saveCSV",()=>{const session=this.context;__webpack_require__.e(4816).then(__webpack_require__.t.bind(__webpack_require__,54816,23)).then(main2=>{main2.default(this.state.rows,{header:!0},(err,output)=>{if(err)return session.addNotification({title:this.props.t("error-encountered"),message:this.props.t("error-csv")+err.message,level:"error",position:"tl"});const blob=new Blob([output],{type:"text/csv;charset=utf-8;"}),dataInfo2=this.props.dataInfo;let name;!dataInfo2||!dataInfo2.name?name="dataset.csv":name=`${dataInfo2.name}.csv`,(0,file_saver.Z)(blob,name)})})}),main_publicField(this,"handleSaveCSV",()=>{this.saveCSV(),this.toggleSaveModal()}),main_publicField(this,"handleSaveJSON",()=>{this.saveJSON(),this.toggleSaveModal()}),main_publicField(this,"hideVarModal",()=>{this.setState({showVarModal:!1})}),main_publicField(this,"hideInfoModal",()=>{this.setState({showInfo:!1})}),main_publicField(this,"handleTableProps",()=>({onScroll:e=>{let left=e.target.scrollLeft>0?e.target.scrollLeft:0;for(let i=0;i<this.frozenElems.length;i++)this.frozenElems[i].style.left=`${left}px`}})),main_publicField(this,"handleTrProps",(state,rowInfo,column,table)=>{let out;return this.props.getTrProps?out=this.props.getTrProps(state,rowInfo,column,table):out={},out.style||(out.style={}),out.style.width="max-content !important",out}),debug("Constructor is invoked..."),this.id=props.id||main_uid(props);const dataInfo=props.dataInfo||{};this.dragged=null,this.reorder=[],this.state={showInfo:!!dataInfo.showOnStartup,dataInfo:{info:dataInfo.info||[],name:dataInfo.name||"",variables:dataInfo.variables||null,showOnStartup:dataInfo.showOnStartup||null},showSaveModal:!1,id:this.id}}static getDerivedStateFromProps(nextProps,prevState){debug("Generating derived state...");let newState=null;if(nextProps.data!==prevState.data){debug("Data is new...");let rows,keys,isArr=is_array_lib_default()(nextProps.data);if(isArr||is_object_lib_default()(nextProps.data)){if(isArr?(rows=nextProps.data.slice(),keys=keys_lib_default()(rows[0])):(rows=createRows(nextProps.data),keys=keys_lib_default()(nextProps.data)),debug("Created a `rows` array of length: "+rows.length),contains_lib_default()(keys,"id"))for(let i=0;i<rows.length;i++)nextProps.showRemove&&!rows[i].remove&&(rows[i].remove=!1);else{for(let i=0;i<rows.length;i++)nextProps.showRemove&&!rows[i].remove&&(rows[i].remove=!1),rows[i].id=i+1;keys.push("id")}newState={},newState.rows=rows,newState.keys=keys,newState.filtered=nextProps.filters,newState.showTooltip=!1,newState.data=nextProps.data,newState.columns=createColumns(nextProps,newState)}}return nextProps.dataInfo&&prevState.dataInfo&&nextProps.dataInfo.name!==prevState.dataInfo.name&&(debug("Data information has changed..."),newState||(newState={}),newState.dataInfo={info:nextProps.dataInfo.info||[],name:nextProps.dataInfo.name||"",variables:nextProps.dataInfo.variables||null,showOnStartup:nextProps.dataInfo.showOnStartup||null}),newState}componentDidMount(){if(debug("Component has mounted..."),this.table){const thead=(0,react_dom.findDOMNode)(this.table).getElementsByClassName("rt-thead")[0],theadControls=(0,react_dom.findDOMNode)(this.table).getElementsByClassName("rt-thead")[1],tbody=(0,react_dom.findDOMNode)(this.table).getElementsByClassName("rt-tbody")[0];tbody.addEventListener("scroll",()=>{thead.scrollLeft=tbody.scrollLeft,theadControls.scrollLeft=tbody.scrollLeft})}}componentDidUpdate(prevProps,prevState){debug("Component has updated...");let newState={};if(this.props.filters&&(this.props.filters!==prevProps.filters||this.props.filters.length!==prevProps.filters.length)&&(debug(`Data table now has ${this.props.filters.length} filters...`),newState.filtered=this.props.filters),this.props.data!==prevProps.data&&this.state.keys.length!==prevState.keys.length){const thead=(0,react_dom.findDOMNode)(this.table).getElementsByClassName("rt-thead")[0],theadControls=(0,react_dom.findDOMNode)(this.table).getElementsByClassName("rt-thead")[1],tbody=(0,react_dom.findDOMNode)(this.table).getElementsByClassName("rt-tbody")[0];thead.scrollLeft=thead.scrollWidth,theadControls.scrollLeft=theadControls.scrollWidth,tbody.scrollLeft=tbody.scrollWidth}is_empty_object_lib_default()(newState)||(debug("Trigger a state change after update..."),this.setState(newState))}render(){debug("Rendering component");let{rows,dataInfo}=this.state;if(!rows)return react.createElement(Alert_default(),{variant:"danger"},this.props.t("no-data"));let modal=null;this.state.showVarModal?modal=react.createElement(Modal_default(),{dialogClassName:"modal-50w",show:this.state.showVarModal,onHide:this.hideVarModal},react.createElement(Modal_default().Header,{closeButton:!0},react.createElement(Modal_default().Title,null,this.props.t("variables"))),react.createElement(Modal_default().Body,null,createDescriptions(dataInfo.variables,this.props.t))):this.state.showInfo&&(debug("Rendering dataset information modal..."),modal=react.createElement(Modal_default(),{show:this.state.showInfo,dialogClassName:"modal-50w",onHide:this.hideInfoModal},react.createElement(Modal_default().Header,{closeButton:!0},react.createElement(Modal_default().Title,null,dataInfo.name," ",this.props.t("description"))),react.createElement(Modal_default().Body,{dangerouslySetInnerHTML:{__html:md.render(is_array_lib_default()(dataInfo.info)?dataInfo.info.join(`
`):dataInfo.info)}})));let cols;this.props.editable.length>0?cols=this.state.columns.map(x=>(contains_lib_default()(this.props.editable,x.id)&&(x.Cell=this.renderEditable),x)):cols=this.state.columns.slice(),this.reorder.forEach(o=>{cols[o.a]=cols.splice(o.b,1,cols[o.a])[0]}),cols=cols.map((col,i)=>col.Header==="id"?col:main_spreadProps(main_spreadValues({},col),{Header:react.createElement("span",{className:"draggable-header",id:`header-${col.id}`,draggable:"true",onDragStart:e=>{e.stopPropagation(),e.dataTransfer.setData("Text",i),this.dragged=i},onDrag:e=>e.stopPropagation,onDragEnd:e=>{e.stopPropagation(),setTimeout(()=>{this.dragged=null},100)},onDragOver:e=>{e.preventDefault(),e.dataTransfer.dropEffect="move"},onDrop:e=>{e.preventDefault();let a=i,b=this.dragged;const keys=this.state.columns.map(x=>x.id);keys.shift();const tmp=keys[a];keys[a]=keys[b],keys[b]=tmp,this.props.onColumnDrag(keys),this.reorder.push({a,b}),this.forceUpdate()}},col.Header)})),this.props.showIdColumn&&cols.unshift({Header:"id",accessor:"id",className:"frozen",headerClassName:"frozen",filterable:!1,resizable:!1,width:50}),this.props.showRemove&&cols.push({Header:this.props.t("remove"),accessor:"remove",Cell:this.renderCheckboxRemovable,filterable:!1}),cols.push({Header:"",className:"table_last_col",filterable:!1,sortable:!1,resizable:!1,width:30});const saveButton=react.createElement(tooltip.Z,{placement:"bottom",tooltip:this.props.disableDownload?this.props.t("download-disabled"):this.props.t("download-data")},react.createElement(Button_default(),{"aria-label":this.props.t("download-data"),className:"save-button",variant:"light",onClick:this.toggleSaveModal,disabled:this.props.disableDownload},react.createElement("i",{className:"fas fa-download"})));return react.createElement(react.Fragment,null,react.createElement("div",{className:"data-table-wrapper",id:this.id,style:this.props.style},react.createElement("div",{className:"data-table-header-wrapper"},react.createElement(tooltip.Z,{placement:"bottom",tooltip:this.props.t("open-description"),show:dataInfo.info.length>0},react.createElement(Button_default(),{variant:"light",disabled:dataInfo.info.length===0,onClick:this.showInfo,className:"data-table-title-button",style:{cursor:dataInfo.info.length>0?"pointer":"inherit"}},dataInfo.name?dataInfo.name:this.props.t("data"))),saveButton,react.createElement(tutorial_button,{id:this.id,session:this.context,onTutorialCompletion:this.props.onTutorialCompletion,t:this.props.t})),react.createElement(lib.ZP,{id:this.id,data:rows,columns:cols,showPagination:!0,sortable:!0,resizable:!0,filterable:this.props.filterable,filtered:this.state.filtered,sorted:this.state.sorted,showPageSizeOptions:!1,defaultPageSize:50,onFilteredChange:this.handleFilterChange,onSortedChange:this.handleSortedChange,style:this.props.style,getTableProps:this.handleTableProps,getTrProps:this.handleTrProps,previousText:this.props.t("previous"),nextText:this.props.t("next"),loadingText:this.props.t("loading"),noDataText:this.props.t("no-rows-found"),pageText:this.props.t("page"),ofText:this.props.t("of"),rowsText:this.props.t("rows")},(state,makeTable,instance)=>{const selectedRows=state.sortedData.length;return react.createElement("div",{ref:table=>{table&&(this.table=table,this.frozenElems=(0,react_dom.findDOMNode)(this.table).getElementsByClassName("frozen"))}},react.createElement(ButtonToolbar_default(),{className:"data-table-header-toolbar"},dataInfo.variables?react.createElement(tooltip.Z,{placement:"right",tooltip:this.props.t("variable-descriptions-tooltip")},react.createElement(Button_default(),{onClick:this.showDescriptions,variant:"light",size:"xsmall",className:"variable-descriptions-button"},this.props.t("variable-descriptions"))):null,selectedRows!==rows.length||this.state.sorted&&this.state.sorted.length>0?react.createElement(tooltip.Z,{placement:"left",tooltip:this.props.t("reset-display-tooltip")},react.createElement(Button_default(),{onClick:this.reset,variant:"light",size:"xsmall",className:"reset-button"},this.props.t("reset-display"))):null),makeTable(),react.createElement("label",{className:"label-number-rows"},react.createElement("i",null,this.props.t("number-rows"),": ",selectedRows," (",this.props.t("total"),": ",rows.length,")")))})),modal,this.state.showSaveModal?react.createElement(Modal_default(),{show:this.state.showSaveModal,onHide:this.toggleSaveModal},react.createElement(Modal_default().Header,{closeButton:!0},react.createElement(Modal_default().Title,null,this.props.t("download-data"))),react.createElement(Modal_default().Body,null,this.props.t("download-data-body")),react.createElement(Modal_default().Footer,null,react.createElement(Button_default(),{onClick:this.handleSaveCSV},this.props.t("save-csv")),react.createElement(Button_default(),{onClick:this.handleSaveJSON},this.props.t("save-json")))):null)}}DataTable.defaultProps={dataInfo:{info:[],name:"",variables:null,showOnStartup:!1},deletable:!1,undeletableVars:[],filterable:!0,editable:[],getTrProps:void 0,onColumnDrag(){},onColumnDelete(){},onColumnNameChange(){},onClickRemove(){},onEdit(){},onFilteredChange(){},onTutorialCompletion(){},filters:[],showRemove:!1,showIdColumn:!0,disableDownload:!1,className:"",style:{}},DataTable.propTypes={data:prop_types_default().oneOfType([prop_types_default().array,prop_types_default().object]).isRequired,dataInfo:prop_types_default().object,deletable:prop_types_default().bool,undeletableVars:prop_types_default().arrayOf(prop_types_default().string),filterable:prop_types_default().bool,editable:prop_types_default().array,getTrProps:prop_types_default().func,onColumnDrag:prop_types_default().func,onColumnDelete:prop_types_default().func,onColumnNameChange:prop_types_default().func,onClickRemove:prop_types_default().func,onEdit:prop_types_default().func,onTutorialCompletion:prop_types_default().func,filters:prop_types_default().array,onFilteredChange:prop_types_default().func,showRemove:prop_types_default().bool,showIdColumn:prop_types_default().bool,disableDownload:prop_types_default().bool,className:prop_types_default().string,style:prop_types_default().object},DataTable.contextType=context.Z;var main=(0,commonjs.Zh)("data-table")((0,prop_check.W)(DataTable))},34136:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Z:function(){return number}});var react=__webpack_require__(67294),prop_types=__webpack_require__(45697),prop_types_default=__webpack_require__.n(prop_types),browser=__webpack_require__(14946),browser_default=__webpack_require__.n(browser),commonjs=__webpack_require__(81468),lib=__webpack_require__(61635),lib_default=__webpack_require__.n(lib),is_nan_lib=__webpack_require__(64529),is_nan_lib_default=__webpack_require__.n(is_nan_lib),is_string_lib=__webpack_require__(99301),is_null_lib=__webpack_require__(95447),is_null_lib_default=__webpack_require__.n(is_null_lib),is_number_lib=__webpack_require__(91317),pinf_lib=__webpack_require__(51235),pinf_lib_default=__webpack_require__.n(pinf_lib),ninf_lib=__webpack_require__(58747),ninf_lib_default=__webpack_require__.n(ninf_lib),components_tooltip=__webpack_require__(77287),context=__webpack_require__(32283),uid=__webpack_require__(6756);function createTooltip({min,max,step,t}){let tooltip=`${t("enter")} ${t(step===1?"integer":"number")} `;return max!==pinf_lib_default()&&min!==ninf_lib_default()?tooltip+=`${t("between")} ${min} ${t("and")} ${max}`:min!==ninf_lib_default()?tooltip+=`${t("larger-or-equal-to")} ${min}`:max!==pinf_lib_default()&&(tooltip+=`${t("smaller-or-equal-to")} ${max}`),tooltip}var create_tooltip=createTooltip,__defProp=Object.defineProperty,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(obj,key,value)=>key in obj?__defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value}):obj[key]=value,__spreadValues=(a,b)=>{for(var prop in b||(b={}))__hasOwnProp.call(b,prop)&&__defNormalProp(a,prop,b[prop]);if(__getOwnPropSymbols)for(var prop of __getOwnPropSymbols(b))__propIsEnum.call(b,prop)&&__defNormalProp(a,prop,b[prop]);return a};const debug=browser_default()("isle:number-input"),main_uid=(0,uid.Z)("number-input"),NumberInput=props=>{const id=(0,react.useRef)(props.id||main_uid(props)),{bind,defaultValue,min,max,step,value:propValue,onBlur,onChange}=props,{t}=(0,commonjs.$G)("input"),session=(0,react.useContext)(context.Z),[value,setValue]=(0,react.useState)(propValue||(bind&&session.state?session.state[bind]:defaultValue));(0,react.useEffect)(()=>{if(bind){const globalValue=__webpack_require__.g.lesson.state[bind];globalValue!==value&&(0,is_number_lib.isPrimitive)(value)&&setValue(globalValue)}},[bind,value]),(0,react.useEffect)(()=>{setValue(defaultValue)},[defaultValue]),(0,react.useEffect)(()=>{bind&&setValue(__webpack_require__.g.lesson.state[bind])},[bind]);const handleChange=(0,react.useCallback)(event=>{debug("Handle change of input field...");let valid=event.target.validity.valid,newValue=event.target.value;setValue(newValue),propValue||valid&&newValue!==""&&newValue!=="-"&&newValue!=="."&&newValue!=="-."?(newValue=parseFloat(newValue),is_nan_lib_default()(newValue)&&(newValue=""),onChange(newValue),bind&&__webpack_require__.g.lesson.setState({[bind]:newValue})):bind&&__webpack_require__.g.lesson.setState({[bind]:newValue})},[bind,propValue,onChange]),finishChange=(0,react.useCallback)(event=>{debug("Finished change...");let newValue=event.target.value;if(lib_default()(newValue,"/")){debug("Encountered a fraction...");const splitted=newValue.split("/");splitted[0]!==""&&splitted[1]!==""&&(newValue=parseFloat(splitted[0])/parseFloat(splitted[1]))}is_nan_lib_default()(newValue)?newValue="":newValue!==""&&newValue!=="-"&&newValue!=="."&&newValue!=="-."&&(newValue=parseFloat(newValue)),newValue>max?newValue=max:newValue<min?newValue=min:step===1&&newValue!==""&&newValue!=="-"&&newValue!=="."&&newValue!=="-."&&(newValue=newValue-newValue%step),onChange(newValue),onBlur(newValue),newValue!==value&&(setValue(newValue),bind&&__webpack_require__.g.lesson.setState({[bind]:newValue}))},[bind,min,max,step,value,onBlur,onChange]),tooltip=is_null_lib_default()(props.tooltip)?create_tooltip({min,max,step,t}):props.tooltip;if(props.inline===!0){const input2=react.createElement("span",{className:"input",style:__spreadValues({padding:"5px"},props.style)},props.legend?react.createElement("label",{htmlFor:id.current}," ",props.legend," =  "):null,react.createElement("input",{id:id.current,type:props.numbersOnly?"number":"text",name:"input",className:"number-number-input",disabled:props.disabled,value:propValue!==null?propValue:value,step:props.step,min:props.min,max:props.max,style:__spreadValues({width:"80px",paddingLeft:"6px",marginLeft:"3px"},props.inputStyle),onChange:handleChange,onBlur:finishChange,onKeyPress:props.onKeyPress,onKeyDown:props.onKeyDown,onKeyUp:props.onKeyUp,autoComplete:"off"}),props.description?react.createElement("span",null,"(",props.description,")"):react.createElement("span",null));return props.disabled?input2:react.createElement(components_tooltip.Z,{id:"number-input-tooltip-inline",placement:"top",show:!props.disabled,tooltip},input2)}const input=react.createElement("input",{id:id.current,type:props.numbersOnly?"number":"text",name:"input",className:"number-number-input",disabled:props.disabled,value:propValue!==null?propValue:value,step:props.step,min:props.min,max:props.max,style:__spreadValues({width:"80px",marginLeft:"24px"},props.inputStyle),onChange:handleChange,onBlur:finishChange,onKeyPress:props.onKeyPress,onKeyDown:props.onKeyDown,onKeyUp:props.onKeyUp,autoComplete:"off"});return react.createElement("div",{className:"input",style:__spreadValues({marginBottom:"4px",marginTop:"4px"},props.style)},props.legend?react.createElement("span",null,react.createElement("label",{htmlFor:id.current},(0,is_string_lib.isPrimitive)(props.legend)?props.legend+":":props.legend),props.description?react.createElement("span",null," ",props.description):null):null,react.createElement(components_tooltip.Z,{id:"number-input-tooltip",placement:props.tooltipPlacement,tooltip,show:!props.disabled},react.createElement("span",{className:"number-input-span"},input)))};NumberInput.defaultProps={bind:"",disabled:!1,legend:null,min:ninf_lib_default(),max:pinf_lib_default(),step:1,defaultValue:0,onBlur(){},onChange(){},onKeyDown(){},onKeyPress(){},onKeyUp(){},inline:!1,numbersOnly:!0,style:{},inputStyle:{},value:null,tooltip:null,tooltipPlacement:"left"},NumberInput.propTypes={bind:prop_types_default().string,defaultValue:prop_types_default().number,disabled:prop_types_default().bool,inline:prop_types_default().bool,legend:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().node]),max:prop_types_default().number,min:prop_types_default().number,numbersOnly:prop_types_default().bool,onBlur:prop_types_default().func,onChange:prop_types_default().func,onKeyDown:prop_types_default().func,onKeyPress:prop_types_default().func,onKeyUp:prop_types_default().func,step:prop_types_default().oneOfType([prop_types_default().number,prop_types_default().string]),style:prop_types_default().object,inputStyle:prop_types_default().object,value:prop_types_default().number,tooltip:prop_types_default().string,tooltipPlacement:prop_types_default().oneOf(["top","right","bottom","left"])};var main=NumberInput;const number_createTooltip=null;var number=main},49162:function(module,exports,__webpack_require__){var __defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(obj,key,value)=>key in obj?__defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value}):obj[key]=value,__spreadValues=(a,b)=>{for(var prop in b||(b={}))__hasOwnProp.call(b,prop)&&__defNormalProp(a,prop,b[prop]);if(__getOwnPropSymbols)for(var prop of __getOwnPropSymbols(b))__propIsEnum.call(b,prop)&&__defNormalProp(a,prop,b[prop]);return a},__spreadProps=(a,b)=>__defProps(a,__getOwnPropDescs(b)),__objRest=(source,exclude)=>{var target={};for(var prop in source)__hasOwnProp.call(source,prop)&&exclude.indexOf(prop)<0&&(target[prop]=source[prop]);if(source!=null&&__getOwnPropSymbols)for(var prop of __getOwnPropSymbols(source))exclude.indexOf(prop)<0&&__propIsEnum.call(source,prop)&&(target[prop]=source[prop]);return target},_interopRequireDefault=__webpack_require__(95318);exports.__esModule=!0,exports.default=void 0;var _classnames=_interopRequireDefault(__webpack_require__(94184)),React=_interopRequireWildcard(__webpack_require__(67294)),_ThemeProvider=__webpack_require__(34729),_jsxRuntime=__webpack_require__(85893);function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!="function")return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop2){return nodeInterop2?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(obj===null||typeof obj!="object"&&typeof obj!="function")return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}const defaultProps={role:"toolbar"},ButtonToolbar=React.forwardRef((_a,ref)=>{var _b=_a,{bsPrefix,className}=_b,props=__objRest(_b,["bsPrefix","className"]);const prefix=(0,_ThemeProvider.useBootstrapPrefix)(bsPrefix,"btn-toolbar");return(0,_jsxRuntime.jsx)("div",__spreadProps(__spreadValues({},props),{ref,className:(0,_classnames.default)(className,prefix)}))});ButtonToolbar.displayName="ButtonToolbar",ButtonToolbar.defaultProps=defaultProps;var _default=ButtonToolbar;exports.default=_default,module.exports=exports.default}}]);

//# sourceMappingURL=5550.a24f2967.chunk.js.map