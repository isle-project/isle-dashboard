"use strict";(self.webpackChunkisle_dashboard=self.webpackChunkisle_dashboard||[]).push([[3374],{64193:function(e,t,a){a.d(t,{fH:function(){return y},Zl:function(){return f}});var n=a(38603),s=a(98816),c=a.n(s),i=a(67361),r=a(89506),o=a.n(r),l=a(63022),m=a(76417),p=a(1209);function d({name:e,description:t,picture:a}){const s=l.ZP+"/badges/"+a;return{children:n.createElement("div",null,n.createElement("h3",null,i.Z.t("common:received-badge"),e),n.createElement("div",null,n.createElement("div",null,n.createElement("div",{className:"received-badge-before"}),n.createElement("img",{className:"received-badge",src:s,alt:"Received Badge"})),n.createElement("p",{style:{marginTop:15}},i.Z.t("common:received-badge-for"),n.createElement("b",null,t)))),level:"info",position:"tc",dismissible:"button",autoDismiss:0}}const u=async e=>{try{const t=await c().get(l.ZP+"/get_user_badges"),{badges:a,addedBadges:n}=t.data;if(e(function(e){return{type:p.eu,payload:{badges:e}}}(a)),n.length>0)for(let s=0;s<a.length;s++){const t=a[s];o()(n,t.name)&&(0,m.wN)(e,d(t))}}catch(t){(0,m.EG)(e,t)}},y=e=>async()=>{await u(e)},g=async e=>{try{const a=await c().get(l.ZP+"/get_available_badges");e((t=a.data,{type:p.Z9,payload:{badges:t}}))}catch(a){(0,m.EG)(e,a)}var t},f=e=>async()=>{await g(e)}},40024:function(e,t,a){a.d(t,{f2:function(){return k},ns:function(){return Z},E8:function(){return b},TK:function(){return v},Ru:function(){return N},U0:function(){return _},z0:function(){return P},rt:function(){return D},i1:function(){return G},B_:function(){return C}});var n=a(38603),s=a(98816),c=a.n(s),i=a(14065),r=a(67361),o=a(63022),l=a(74360),m=a.n(l),p=a(12908),d=a(69977),u=a(12630),y=a(76417),g=a(1209);async function f(e,{namespaceName:t,owner:a=!1}){try{const n=`${o.ZP}/get_files?${i.stringify({namespaceName:t,owner:a})}`,s=await c().get(n);e(function({files:e,owner:t}){return{type:g.aM,payload:{files:e,owner:t}}}({files:s.data.files,owner:a}))}catch(n){(0,y.EG)(e,n)}}function h(e){return{type:g.kn,payload:{license:e}}}function w(){return{type:g.Ug}}const E=async e=>{try{const a=await c().get(o.ZP+"/get_user_files");e((t=a.data.files,{type:g.Ze,payload:{files:t}}))}catch(a){(0,y.EG)(e,a)}var t},k=e=>async()=>{await E(e)},Z=e=>async(t,a,n)=>{await(async(e,t,a,n)=>{try{const s=await c().post(`${o.ZP}/delete_file`,{_id:t});a?f(e,{namespaceName:a,owner:n}):e({type:g.Rm,payload:{id:t}}),(0,y.wN)(e,{title:r.Z.t("common:delete-file-title"),message:s.data.message,level:"success"})}catch(s){(0,y.EG)(e,s)}})(e,t,a,n)},b=e=>async({formData:t,user:a})=>{await(async(e,{formData:t,user:a})=>{try{const s=i.stringify({namespaceName:t.get("namespaceName"),owner:t.get("owner"),jwt:a.token}),l=await c().post(o.ZP+"/upload_file?"+s,t);f(e,{namespaceName:t.get("namespaceName"),owner:t.get("owner")});const g={title:r.Z.t("common:file-upload-title"),message:l.data.message,level:"success",position:"tl",autoDismiss:10};return g.children=n.createElement("div",{style:{marginBottom:30}},n.createElement(p.Z,{placement:"bottom",overlay:n.createElement(d.Z,{id:"ownerTooltip"},r.Z.t("common:copy-link"))},n.createElement(u.Z,{size:"sm",variant:"outline-secondary",style:{float:"right",marginRight:"10px"},onClick:()=>{m()(o.ZP+"/"+l.data.filename),(0,y.wN)(e,{title:r.Z.t("common:copied-title"),message:r.Z.t("common:link-copied"),level:"success",position:"tl"})}},n.createElement("i",{className:"fa fa-clipboard"}))),n.createElement(p.Z,{placement:"bottom",overlay:n.createElement(d.Z,{id:"ownerTooltip"},r.Z.t("common:open-uploaded-file"))},n.createElement("a",{href:o.ZP+"/"+l.data.filename,target:"_blank",rel:"noopener noreferrer",style:{float:"right",marginRight:"10px"}},n.createElement(u.Z,{size:"sm",variant:"outline-secondary"},n.createElement("i",{className:"fa fa-external-link-alt"}))))),(0,y.wN)(e,g)}catch(s){(0,y.EG)(e,s)}})(e,{formData:t,user:a})},v=e=>async({namespaceName:t})=>{await f(e,{namespaceName:t})},N=e=>async({namespaceName:t})=>{await f(e,{namespaceName:t,owner:!0})},_=e=>async()=>{await(async e=>{try{const t=await c().get(o.ZP+"/get_all_files");e({type:g.ci,payload:{files:t.data.files}})}catch(t){return(0,y.EG)(e,t)}})(e)},P=e=>async({formData:t,user:a})=>{await(async(e,{formData:t,user:a})=>{try{const n=i.stringify({jwt:a.token}),s=await c().post(o.ZP+"/upload_license?"+n,t);(0,y.wN)(e,{title:r.Z.t("common:uploaded"),message:s.data.message,level:"success",position:"tl",autoDismiss:5}),e(h(s.data.license))}catch(n){return(0,y.EG)(e,n)}})(e,{formData:t,user:a})},D=e=>async t=>{await(async(e,t)=>{try{const a=i.stringify({jwt:t.token});e(h((await c().get(o.ZP+"/get_license?"+a)).data.license))}catch(a){return(0,y.EG)(e,a)}})(e,t)},G=e=>async()=>{await(async e=>{try{"ok"===(await c().post(o.ZP+"/remove_license")).data.message&&e(w())}catch(t){return t.message.includes("404")&&e(w()),(0,y.EG)(e,t)}})(e)},C=e=>async({formData:t,user:a})=>{const n=await(async(e,{formData:t,user:a})=>{try{const n=i.stringify({jwt:a.token}),s=await c().post(o.ZP+"/upload_logo?"+n,t);return(0,y.wN)(e,{title:r.Z.t("common:uploaded"),message:s.data.message,level:"success",position:"tl",autoDismiss:5}),e({type:g.TH,payload:s.data}),s.data}catch(n){return(0,y.EG)(e,n),n}})(e,{formData:t,user:a});return n}},44804:function(e,t,a){a.d(t,{Lf:function(){return m},P3:function(){return p},S$:function(){return d},Ao:function(){return u},Cn:function(){return y},fG:function(){return g},xG:function(){return f},Cq:function(){return h},mJ:function(){return w}});a(38603);var n=a(98816),s=a.n(n),c=a(14065),i=a(63022),r=a(67361),o=a(76417),l=a(1209);const m=e=>async()=>{await(async e=>{try{const t=await s().get(i.ZP+"/get_all_tickets");e({type:l.rq,payload:{tickets:t.data.tickets}})}catch(t){return(0,o.EG)(e,t)}})(e)},p=e=>async t=>{await(async(e,t)=>{try{const a=await s().get(i.ZP+"/get_course_tickets?"+c.stringify({namespaceID:t}));e({type:l.W1,payload:{tickets:a.data.tickets}})}catch(a){return(0,o.EG)(e,a)}})(e,t)},d=e=>async()=>{await(async e=>{try{const t=await s().get(i.ZP+"/get_user_tickets");e({type:l.cv,payload:{tickets:t.data.tickets}})}catch(t){return(0,o.EG)(e,t)}})(e)},u=e=>async t=>{await(async(e,t)=>{try{const a=await s().post(i.ZP+"/delete_ticket",{id:t});(0,o.wN)(e,{title:r.Z.t("common:deleted"),message:a.data.message,level:"success"}),e({type:l.SZ,payload:{id:t}})}catch(a){return(0,o.EG)(e,a)}})(e,t)},y=e=>async({title:t,description:a,platform:n,namespace:c,files:m})=>{await(async(e,{title:t,description:a,platform:n,namespace:c,files:m})=>{try{let p,d;if(m&&0!==m.length){const e=new FormData;for(let t=0;t<m.length;t++)e.append("attachment",m[t]);e.append("title",t),e.append("description",a),e.append("platform",JSON.stringify(n)),e.append("namespaceID",c._id),p=await s().post(i.ZP+"/create_ticket",e),d=p.data.attachments}else p=await s().post(i.ZP+"/create_ticket",{title:t,description:a,platform:n,namespaceID:c._id}),d=[];return(0,o.wN)(e,{title:r.Z.t("common:created"),message:p.data.message,level:"success"}),e({type:l.NH,payload:{title:t,description:a,platform:n,namespace:c,attachments:d}}),p}catch(p){return(0,o.EG)(e,p)}})(e,{title:t,description:a,platform:n,namespace:c,files:m})},g=e=>async({message:t,ticketID:a,user:n})=>{await(async(e,{message:t,ticketID:a,user:n})=>{try{const c=await s().post(i.ZP+"/add_ticket_message",{body:t,ticketID:a}),m={body:t,author:n.name,email:n.email,picture:n.picture,createdAt:(new Date).getTime()};e({type:l.JB,payload:{id:a,message:m}}),(0,o.wN)(e,{title:r.Z.t("common:added"),message:c.data.message,level:"success"})}catch(c){return(0,o.EG)(e,c)}})(e,{message:t,ticketID:a,user:n})},f=e=>async t=>{await(async(e,t)=>{try{const a=await s().post(i.ZP+"/close_ticket",{ticketID:t});(0,o.wN)(e,{title:r.Z.t("common:closed"),message:a.data.message,level:"success"}),e({type:l.mI,payload:{id:t}})}catch(a){return(0,o.EG)(e,a)}})(e,t)},h=e=>async(t,a)=>{await(async(e,t,a)=>{try{const n=await s().post(i.ZP+"/update_ticket_priority",{ticketID:t,priority:a});(0,o.wN)(e,{title:r.Z.t("common:updated"),message:n.data.message,level:"success"}),e({type:l.B2,payload:{id:t,priority:a}})}catch(n){return(0,o.EG)(e,n)}})(e,t,a)},w=e=>async t=>{await(async(e,t)=>{try{const a=await s().post(i.ZP+"/open_ticket",{ticketID:t});(0,o.wN)(e,{title:r.Z.t("common:opened"),message:a.data.message,level:"success"}),e({type:l.wL,payload:{id:t}})}catch(a){return(0,o.EG)(e,a)}})(e,t)}},77536:function(e,t,a){a.d(t,{Z:function(){return h}});var n=a(38603),s=a(91532),c=a.n(s),i=a(58651),r=a(12630),o=a(12908),l=a(69977),m=a(14704),p=a(47331),d=a(87078),u=a(56233),y=a(63022);function g(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class f extends n.Component{constructor(e){super(e),g(this,"handleResponseChange",(e=>{this.setState({response:e.target.value})})),g(this,"handleResponseSubmit",(()=>{this.props.submitTicketMessage({message:this.state.response,ticketID:this.props.ticket._id}),this.setState({response:""})})),g(this,"toggleCompletion",(()=>{this.props.ticket.done?this.props.openTicket(this.props.ticket._id):this.props.closeTicket(this.props.ticket._id)})),g(this,"renderMessage",((e,t)=>{const a=this.props.t,s=new Date(e.createdAt);return n.createElement("div",{className:"message-container",key:t},n.createElement("div",{className:"message-data"},n.createElement("div",{className:"message-profile-pic"},n.createElement("img",{src:`${y.ZP}/thumbnail/${e.picture}`,alt:"User Profile Pic"})),n.createElement("div",{className:"message-author-line"},n.createElement("span",{className:"message-author"},e.author),"\xa0",a("common:wrote-on",{date:`${s.toLocaleTimeString()} ${s.toLocaleDateString()}`}))),n.createElement("div",{className:"message-body"},e.body))})),this.state={response:""}}render(){const e=this.props.t,{ticket:t}=this.props;return n.createElement(n.Fragment,null,n.createElement(m.Z,{show:this.props.show,onHide:this.props.onHide,dialogClassName:"modal-60w"},n.createElement(m.Z.Header,null,n.createElement(m.Z.Title,{as:"h3",style:{width:"100%"}},e("common:title"),": ",t.title,n.createElement(o.Z,{placement:"right",overlay:(a=e("close-ticket-modal"),n.createElement(l.Z,{id:"tooltip"},a))},n.createElement(r.Z,{onClick:this.props.onHide,style:{float:"right"},variant:"outline-secondary","aria-label":e("close-ticket-modal"),className:"modal-close"},n.createElement("span",{"aria-hidden":"true"},"x"))))),n.createElement(m.Z.Body,{style:{height:"60vh",overflowY:"auto"}},n.createElement("span",{className:"title"},e("common:description"),":"),n.createElement("p",{style:{whiteSpace:"pre-wrap"}},t.description),n.createElement("hr",null),t.namespace.title?n.createElement(n.Fragment,null,n.createElement("span",{className:"title"},`${e("common:course")}: `),n.createElement("span",null,t.namespace.title)," | "):null,t.lesson?n.createElement(n.Fragment,null,n.createElement("span",{className:"title"},`${e("common:lesson")}: `),n.createElement("span",null,t.lesson.title)," | "):null,t.component?n.createElement(n.Fragment,null,n.createElement("span",{className:"title"},`${e("common:component")}: `),n.createElement("span",null,t.component)):null,t.attachments.length>0?n.createElement(n.Fragment,null,n.createElement("br",null),n.createElement("span",{className:"title"},`${e("common:attachments")}: `),t.attachments.map(((t,a)=>n.createElement("a",{"aria-label":e("common:attachments"),href:`${y.ZP}/attachments/${t.filename}`,key:a,style:{marginLeft:6},target:"_blank",rel:"noopener noreferrer"},n.createElement("i",{className:"fas fa-link",style:{marginRight:2}}),t.title)))):null,n.createElement("br",null),n.createElement("hr",null),n.createElement("span",{className:"title"},e("common:messages"),":"),t.messages.map(this.renderMessage),n.createElement("hr",null)),n.createElement(m.Z.Footer,{style:{background:"ghostwhite"}},n.createElement(u.Z,{controlId:"form-text",style:{width:"calc(100% - 200px)"}},n.createElement(p.Z,null,e("enter-response")),n.createElement(d.Z,{name:"body",type:"text",as:"textarea",rows:"5",value:this.state.response,placeholder:t.done?e("require-open-ticket"):e("response-comes-here"),onChange:this.handleResponseChange,disabled:t.done})),n.createElement("div",{style:{float:"right",width:"180px"}},n.createElement(r.Z,{block:!0,onClick:this.handleResponseSubmit,disabled:!this.state.response||t.done},e("submit-response")),n.createElement(r.Z,{block:!0,onClick:this.toggleCompletion},t.done?e("common:open-ticket"):e("common:close-ticket")),n.createElement(r.Z,{block:!0,onClick:this.props.onHide},e("common:hide"))))));var a}}f.propTypes={closeTicket:c().func.isRequired,onHide:c().func.isRequired,openTicket:c().func.isRequired,show:c().bool.isRequired,submitTicketMessage:c().func.isRequired,ticket:c().object.isRequired},f.defaultProps={};var h=(0,i.Z)(["ticket_modal","common"])(f)},34980:function(e,t,a){var n=a(87324),s=a.n(n);t.Z=(e,t={hours:!0,minutes:!0,seconds:!0})=>{e/=1e3;const a=s()(e/3600);e%=3600;let n=s()(e/60);n<10&&(n="0"+n),e%=60;let c=s()(e);c<10&&(c="0"+c);let i="";return t.hours&&(i+=a),t.minutes&&(i&&(i+=":"),i+=n),t.seconds&&(i&&(i+=":"),i+=c),i}},87196:function(){}}]);
//# sourceMappingURL=3374.11c97f47.chunk.js.map