(self.webpackChunkisle_dashboard=self.webpackChunkisle_dashboard||[]).push([[179],{55194:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{MP:function(){return sanitizeRequestInjector},sY:function(){return fetchCredentials},GI:function(){return fetchCredentialsInjector}});var axios__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(9669),axios__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_0__),debug__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(11227),debug__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(debug__WEBPACK_IMPORTED_MODULE_1__),constants_server__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(94204),actions_notification_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(16120),actions_user__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(37344),__defProp=Object.defineProperty,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(obj,key,value)=>key in obj?__defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value}):obj[key]=value,__spreadValues=(a,b)=>{for(var prop in b||(b={}))__hasOwnProp.call(b,prop)&&__defNormalProp(a,prop,b[prop]);if(__getOwnPropSymbols)for(var prop of __getOwnPropSymbols(b))__propIsEnum.call(b,prop)&&__defNormalProp(a,prop,b[prop]);return a},__async=(__this,__arguments,generator)=>new Promise((resolve,reject)=>{var fulfilled=value=>{try{step(generator.next(value))}catch(e){reject(e)}},rejected=value=>{try{step(generator.throw(value))}catch(e){reject(e)}},step=x=>x.done?resolve(x.value):Promise.resolve(x.value).then(fulfilled,rejected);step((generator=generator.apply(__this,__arguments)).next())});const debug=debug__WEBPACK_IMPORTED_MODULE_1___default()("isle-dashboard:actions:authentication"),sanitizeUser=user=>{const ownedNamespaces=user.ownedNamespaces,newOwnedNamespaces=[];let ids=new Set;for(let i=0;i<ownedNamespaces.length;i++)ids.has(ownedNamespaces[i]._id)||(ids.add(ownedNamespaces[i]._id),newOwnedNamespaces.push(ownedNamespaces[i]));const enrolledNamespaces=user.enrolledNamespaces,newEnrolledNamespaces=[];ids=new Set;for(let i=0;i<enrolledNamespaces.length;i++)ids.has(enrolledNamespaces[i]._id)||(ids.add(enrolledNamespaces[i]._id),newEnrolledNamespaces.push(enrolledNamespaces[i]));const needsSanitizing=newOwnedNamespaces.length!==ownedNamespaces.length||newEnrolledNamespaces.length!==enrolledNamespaces.length;return needsSanitizing&&(user.ownedNamespaces=newOwnedNamespaces,user.enrolledNamespaces=newEnrolledNamespaces),debug("Does user need sanitizing? "+needsSanitizing),[user,needsSanitizing]},sanitizeRequest=(dispatch,user)=>{try{return axios__WEBPACK_IMPORTED_MODULE_0___default().post(constants_server__WEBPACK_IMPORTED_MODULE_2__.ZP+"/sanitize_user",{id:user.id})}catch(err){return(0,actions_notification_js__WEBPACK_IMPORTED_MODULE_4__.EG)(dispatch,err),null}},sanitizeRequestInjector=dispatch=>user=>__async(void 0,null,function*(){return yield sanitizeRequest(dispatch,user)}),fetchCredentials=(dispatch,obj)=>__async(void 0,null,function*(){if(!obj.id||!obj.token)return null;debug("Fetch user credentials..."),localStorage.setItem("ISLE_USER_"+constants_server__WEBPACK_IMPORTED_MODULE_2__.ZP,JSON.stringify(obj));try{const res=yield axios__WEBPACK_IMPORTED_MODULE_0___default().post(constants_server__WEBPACK_IMPORTED_MODULE_2__.ZP+"/credentials_dashboard",{id:obj.id});debug("Fetched user credentials...");let user=res.data;user.picture&&(user.picture=constants_server__WEBPACK_IMPORTED_MODULE_2__.ZP+"/avatar/"+user.picture),user=__spreadValues(__spreadValues({},obj),user);let[sanitizedUser,needsSanitizing]=sanitizeUser(user);return dispatch((0,actions_user__WEBPACK_IMPORTED_MODULE_3__.Pl)(user)),needsSanitizing&&sanitizeRequest(dispatch,obj),sanitizedUser}catch(err){return debug("Failed to fetch user credentials..."),(0,actions_notification_js__WEBPACK_IMPORTED_MODULE_4__.EG)(dispatch,err),null}}),fetchCredentialsInjector=dispatch=>obj=>__async(void 0,null,function*(){return yield fetchCredentials(dispatch,obj)})},72371:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Wp:function(){return getEnrollableCohorts},R9:function(){return getEnrollableCohortsInjector},k$:function(){return getCohorts},Yc:function(){return addUserToCohortInjector},p6:function(){return deleteCohortInjector},CA:function(){return createCohortInjector},nm:function(){return updateCohortInjector},YV:function(){return getAllCohortsInjector}});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(67294),axios__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(9669),axios__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_1__),querystring__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(17673),debug__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(11227),debug__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(debug__WEBPACK_IMPORTED_MODULE_3__),i18next__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(41631),constants_server__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(94204),actions_lesson__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(36189),actions_notification__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(16120),constants_action_types_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(84499),__async=(__this,__arguments,generator)=>new Promise((resolve,reject)=>{var fulfilled=value=>{try{step(generator.next(value))}catch(e){reject(e)}},rejected=value=>{try{step(generator.throw(value))}catch(e){reject(e)}},step=x=>x.done?resolve(x.value):Promise.resolve(x.value).then(fulfilled,rejected);step((generator=generator.apply(__this,__arguments)).next())});const debug=debug__WEBPACK_IMPORTED_MODULE_3___default()("isle-dashboard:actions:cohorts");function addEnrolledNamespace({title,owners,description,_id}){return{type:constants_action_types_js__WEBPACK_IMPORTED_MODULE_7__.Kx,payload:{title,description,owners,_id}}}function retrievedEnrollableCohorts(cohorts,user){return{type:constants_action_types_js__WEBPACK_IMPORTED_MODULE_7__.G7,payload:{cohorts,user}}}function retrievedCohorts(cohorts,user){return{type:constants_action_types_js__WEBPACK_IMPORTED_MODULE_7__.$L,payload:{cohorts,user}}}function retrievedAllCohorts(cohorts){return{type:constants_action_types_js__WEBPACK_IMPORTED_MODULE_7__.Rr,payload:{cohorts}}}const getEnrollableCohorts=(dispatch,user)=>__async(void 0,null,function*(){try{const cohorts=(yield axios__WEBPACK_IMPORTED_MODULE_1___default().get(constants_server__WEBPACK_IMPORTED_MODULE_5__.ZP+"/get_enrollable_cohorts")).data.cohorts;debug("Retrieved "+cohorts.length+" cohorts..."),dispatch(retrievedEnrollableCohorts(cohorts,user))}catch(err){(0,actions_notification__WEBPACK_IMPORTED_MODULE_8__.EG)(dispatch,err)}}),getEnrollableCohortsInjector=dispatch=>user=>__async(void 0,null,function*(){yield getEnrollableCohorts(dispatch,user)}),getCohorts=(_0,_1)=>__async(void 0,[_0,_1],function*(dispatch,{namespaceID}){try{const res=yield axios__WEBPACK_IMPORTED_MODULE_1___default().get(constants_server__WEBPACK_IMPORTED_MODULE_5__.ZP+"/get_cohorts?"+querystring__WEBPACK_IMPORTED_MODULE_2__.stringify({namespaceID}));dispatch(retrievedCohorts(res.data.cohorts))}catch(err){(0,actions_notification__WEBPACK_IMPORTED_MODULE_8__.EG)(dispatch,err)}}),getCohortsInjector=dispatch=>_0=>__async(void 0,[_0],function*({namespaceID,userToken}){yield getCohorts(dispatch,{namespaceID,userToken})}),addUserToCohort=(dispatch,cohortID,namespace)=>__async(void 0,null,function*(){try{const res=yield axios__WEBPACK_IMPORTED_MODULE_1___default().post(constants_server__WEBPACK_IMPORTED_MODULE_5__.ZP+"/add_to_cohort",{cohortID});(0,actions_notification__WEBPACK_IMPORTED_MODULE_8__.wN)(dispatch,{message:res.data.message,level:"success"}),dispatch(addEnrolledNamespace(namespace));const namespaceName=namespace.title;(0,actions_lesson__WEBPACK_IMPORTED_MODULE_6__.tj)(dispatch,namespaceName)}catch(err){(0,actions_notification__WEBPACK_IMPORTED_MODULE_8__.EG)(dispatch,err)}}),addUserToCohortInjector=dispatch=>(cohortID,namespace)=>__async(void 0,null,function*(){yield addUserToCohort(dispatch,cohortID,namespace)}),deleteCohort=(dispatch,_id,namespaceID)=>__async(void 0,null,function*(){try{const res=yield axios__WEBPACK_IMPORTED_MODULE_1___default().post(constants_server__WEBPACK_IMPORTED_MODULE_5__.ZP+"/delete_cohort",{_id});(0,actions_notification__WEBPACK_IMPORTED_MODULE_8__.wN)(dispatch,{message:res.data.message,level:"success"}),dispatch(retrievedEnrollableCohorts(null)),namespaceID&&getCohorts(dispatch,{namespaceID})}catch(err){(0,actions_notification__WEBPACK_IMPORTED_MODULE_8__.EG)(dispatch,err)}}),deleteCohortInjector=dispatch=>(_id,namespaceID)=>__async(void 0,null,function*(){yield deleteCohort(dispatch,_id,namespaceID)}),createCohort=(dispatch,cohort,namespaceID)=>__async(void 0,null,function*(){try{const res=yield axios__WEBPACK_IMPORTED_MODULE_1___default().post(constants_server__WEBPACK_IMPORTED_MODULE_5__.ZP+"/create_cohort",cohort);(0,actions_notification__WEBPACK_IMPORTED_MODULE_8__.wN)(dispatch,{message:res.data.message,level:"success"}),dispatch(retrievedEnrollableCohorts(null)),getCohorts(dispatch,{namespaceID})}catch(err){(0,actions_notification__WEBPACK_IMPORTED_MODULE_8__.EG)(dispatch,err)}}),createCohortInjector=dispatch=>(cohort,namespaceID)=>__async(void 0,null,function*(){yield createCohort(dispatch,cohort,namespaceID)}),updateCohort=(dispatch,cohort,namespaceID)=>__async(void 0,null,function*(){try{const res=yield axios__WEBPACK_IMPORTED_MODULE_1___default().post(constants_server__WEBPACK_IMPORTED_MODULE_5__.ZP+"/update_cohort",{cohort});let msg=res.data.message,notification;res.data.newEmails&&res.data.newEmails.length>0?notification={children:react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",null,msg),react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",null,i18next__WEBPACK_IMPORTED_MODULE_4__.ZP.t("common:email-invitations-sent")),react__WEBPACK_IMPORTED_MODULE_0__.createElement("p",null,res.data.newEmails.join(`
`))),level:"success",autoDismiss:0,dismissible:"button"}:notification={message:msg,level:"success"},(0,actions_notification__WEBPACK_IMPORTED_MODULE_8__.wN)(dispatch,notification),dispatch(retrievedEnrollableCohorts(null)),getCohorts(dispatch,{namespaceID})}catch(err){(0,actions_notification__WEBPACK_IMPORTED_MODULE_8__.EG)(dispatch,err)}}),updateCohortInjector=dispatch=>(cohort,namespaceID)=>__async(void 0,null,function*(){yield updateCohort(dispatch,cohort,namespaceID)}),getAllCohorts=dispatch=>__async(void 0,null,function*(){try{const res=yield axios__WEBPACK_IMPORTED_MODULE_1___default().get(constants_server__WEBPACK_IMPORTED_MODULE_5__.ZP+"/get_all_cohorts");dispatch(retrievedAllCohorts(res.data.cohorts))}catch(err){(0,actions_notification__WEBPACK_IMPORTED_MODULE_8__.EG)(dispatch,err)}}),getAllCohortsInjector=dispatch=>()=>__async(void 0,null,function*(){yield getAllCohorts(dispatch)})},36189:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{ft:function(){return retrievedLessons},h7:function(){return getPublicLessonsInjector},OD:function(){return getIsleFileInjector},tj:function(){return getLessons},Hy:function(){return getLessonsInjector},Vo:function(){return copyLessonInjector},Ao:function(){return copyNamespaceLessonsInjector},q2:function(){return deleteLessonInjector},IH:function(){return showLessonInGalleryInjector},kl:function(){return hideLessonInGalleryInjector},to:function(){return activateLessonInjector},Ek:function(){return deactivateLessonInjector},WU:function(){return updateLessonInjector},SX:function(){return getAllLessonsInjector},BO:function(){return getTemplateLessonsInjector},Qj:function(){return getRoomsInjector}});var axios__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(9669),axios__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_0__),querystring__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(17673),constants_server__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(94204),_stdlib_assert_is_boolean__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(33276),_stdlib_assert_is_boolean__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_stdlib_assert_is_boolean__WEBPACK_IMPORTED_MODULE_3__),actions_notification__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(16120),constants_action_types_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(84499),__async=(__this,__arguments,generator)=>new Promise((resolve,reject)=>{var fulfilled=value=>{try{step(generator.next(value))}catch(e){reject(e)}},rejected=value=>{try{step(generator.throw(value))}catch(e){reject(e)}},step=x=>x.done?resolve(x.value):Promise.resolve(x.value).then(fulfilled,rejected);step((generator=generator.apply(__this,__arguments)).next())});function deletedLesson(lessonName){return{type:constants_action_types_js__WEBPACK_IMPORTED_MODULE_4__.Nh,payload:{lessonName}}}function updatedLesson(lessonName,props){return{type:constants_action_types_js__WEBPACK_IMPORTED_MODULE_4__.lo,payload:{lessonName,props}}}function retrievedLessons({lessons,namespaceName}){return{type:constants_action_types_js__WEBPACK_IMPORTED_MODULE_4__.qv,payload:{lessons,namespaceName}}}function retrievedAllLessons(lessons){return{type:constants_action_types_js__WEBPACK_IMPORTED_MODULE_4__.oJ,payload:{lessons}}}function retrievedTemplateLessons(templateLessons){return{type:constants_action_types_js__WEBPACK_IMPORTED_MODULE_4__.LJ,payload:{templateLessons}}}function retrievedRooms(rooms){return{type:constants_action_types_js__WEBPACK_IMPORTED_MODULE_4__.tM,payload:{rooms}}}function retrievedPublicLessons(lessons){return{type:constants_action_types_js__WEBPACK_IMPORTED_MODULE_4__.QI,payload:{lessons}}}const getPublicLessons=dispatch=>__async(void 0,null,function*(){try{const res=yield axios__WEBPACK_IMPORTED_MODULE_0___default().get(constants_server__WEBPACK_IMPORTED_MODULE_2__.ZP+"/get_public_lessons");dispatch(retrievedPublicLessons(res.data.lessons))}catch(err){(0,actions_notification__WEBPACK_IMPORTED_MODULE_5__.EG)(dispatch,err)}}),getPublicLessonsInjector=dispatch=>()=>__async(void 0,null,function*(){yield getPublicLessons(dispatch)}),getIsleFile=(_0,_1)=>__async(void 0,[_0,_1],function*(dispatch,{lessonName,namespaceName}){try{return(yield axios__WEBPACK_IMPORTED_MODULE_0___default().get(constants_server__WEBPACK_IMPORTED_MODULE_2__.ZP+"/get_isle_file?"+querystring__WEBPACK_IMPORTED_MODULE_1__.stringify({lessonName,namespaceName}))).data}catch(err){return(0,actions_notification__WEBPACK_IMPORTED_MODULE_5__.EG)(dispatch,err),null}}),getIsleFileInjector=dispatch=>_0=>__async(void 0,[_0],function*({lessonName,namespaceName}){return yield getIsleFile(dispatch,{lessonName,namespaceName})}),getLessons=(dispatch,namespaceName)=>__async(void 0,null,function*(){if(namespaceName)try{console.log("Retrieve lessons for namespace: ",namespaceName);let lessons=(yield axios__WEBPACK_IMPORTED_MODULE_0___default().get(constants_server__WEBPACK_IMPORTED_MODULE_2__.ZP+"/get_lessons?"+querystring__WEBPACK_IMPORTED_MODULE_1__.stringify({namespaceName}))).data.lessons;console.log("Retrieved %s lessons.",lessons.length),lessons=lessons.map((lesson,index)=>(lesson.colorIndex=index%20,lesson.url=constants_server__WEBPACK_IMPORTED_MODULE_2__.ZP+"/"+namespaceName+"/"+lesson.title,lesson.lockUntil&&(lesson.lockUntil=new Date(lesson.lockUntil.time)),lesson.createdAt||(lesson.createdAt=new Date(0).toLocaleString()),lesson.updatedAt||(lesson.updatedAt=lesson.createdAt),lesson)),dispatch(retrievedLessons({lessons,namespaceName}))}catch(err){(0,actions_notification__WEBPACK_IMPORTED_MODULE_5__.EG)(dispatch,err)}}),getLessonsInjector=dispatch=>namespaceName=>__async(void 0,null,function*(){yield getLessons(dispatch,namespaceName)}),copyLesson=(_0,_1)=>__async(void 0,[_0,_1],function*(dispatch,{sourceName,target,targetName,source}){if(sourceName&&target&&source)try{const res=yield axios__WEBPACK_IMPORTED_MODULE_0___default().post(constants_server__WEBPACK_IMPORTED_MODULE_2__.ZP+"/copy_lesson",{target,source,sourceName,targetName});return(0,actions_notification__WEBPACK_IMPORTED_MODULE_5__.wN)(dispatch,{message:res.data.message,level:"success"}),res}catch(err){return(0,actions_notification__WEBPACK_IMPORTED_MODULE_5__.EG)(dispatch,err),err}}),copyLessonInjector=dispatch=>_0=>__async(void 0,[_0],function*({sourceName,target,targetName,source}){yield copyLesson(dispatch,{sourceName,target,targetName,source})}),copyNamespaceLessons=(_0,_1)=>__async(void 0,[_0,_1],function*(dispatch,{target,source}){try{const res=yield axios__WEBPACK_IMPORTED_MODULE_0___default().post(constants_server__WEBPACK_IMPORTED_MODULE_2__.ZP+"/copy_namespace_lessons",{target,source});return(0,actions_notification__WEBPACK_IMPORTED_MODULE_5__.wN)(dispatch,{message:res.data.message,level:"success"}),res}catch(err){return(0,actions_notification__WEBPACK_IMPORTED_MODULE_5__.EG)(dispatch,err),err}}),copyNamespaceLessonsInjector=dispatch=>_0=>__async(void 0,[_0],function*({target,source}){return yield copyNamespaceLessons(dispatch,{target,source})}),deleteLesson=(_0,_1)=>__async(void 0,[_0,_1],function*(dispatch,{lessonName,namespaceName}){if(!namespaceName||!lessonName){const err=new Error("Missing `namespaceName` or `lessonName`.");return(0,actions_notification__WEBPACK_IMPORTED_MODULE_5__.EG)(dispatch,err),err}try{const res=yield axios__WEBPACK_IMPORTED_MODULE_0___default().post(constants_server__WEBPACK_IMPORTED_MODULE_2__.ZP+"/delete_lesson",{namespaceName,lessonName});return dispatch(deletedLesson(lessonName)),(0,actions_notification__WEBPACK_IMPORTED_MODULE_5__.wN)(dispatch,{message:res.data.message,level:"success"}),res}catch(err){return(0,actions_notification__WEBPACK_IMPORTED_MODULE_5__.EG)(dispatch,err),err}}),deleteLessonInjector=dispatch=>_0=>__async(void 0,[_0],function*({lessonName,namespaceName}){yield deleteLesson(dispatch,{lessonName,namespaceName})}),showLessonInGallery=(_0,_1)=>__async(void 0,[_0,_1],function*(dispatch,{lessonName,namespaceName}){try{const res=yield axios__WEBPACK_IMPORTED_MODULE_0___default().post(constants_server__WEBPACK_IMPORTED_MODULE_2__.ZP+"/show_lesson",{namespaceName,lessonName});(0,actions_notification__WEBPACK_IMPORTED_MODULE_5__.wN)(dispatch,{message:res.data.message,level:"success"}),dispatch(updatedLesson(lessonName,{public:!0}))}catch(err){(0,actions_notification__WEBPACK_IMPORTED_MODULE_5__.EG)(dispatch,err)}}),showLessonInGalleryInjector=dispatch=>_0=>__async(void 0,[_0],function*({lessonName,namespaceName}){yield showLessonInGallery(dispatch,{lessonName,namespaceName})}),hideLessonInGallery=(_0,_1)=>__async(void 0,[_0,_1],function*(dispatch,{lessonName,namespaceName}){try{const res=yield axios__WEBPACK_IMPORTED_MODULE_0___default().post(constants_server__WEBPACK_IMPORTED_MODULE_2__.ZP+"/hide_lesson",{namespaceName,lessonName});(0,actions_notification__WEBPACK_IMPORTED_MODULE_5__.wN)(dispatch,{message:res.data.message,level:"success"}),dispatch(updatedLesson(lessonName,{public:!1}))}catch(err){(0,actions_notification__WEBPACK_IMPORTED_MODULE_5__.EG)(dispatch,err)}}),hideLessonInGalleryInjector=dispatch=>_0=>__async(void 0,[_0],function*({lessonName,namespaceName}){yield hideLessonInGallery(dispatch,{lessonName,namespaceName})}),activateLesson=(_0,_1)=>__async(void 0,[_0,_1],function*(dispatch,{lessonName,namespaceName}){try{const res=yield axios__WEBPACK_IMPORTED_MODULE_0___default().post(constants_server__WEBPACK_IMPORTED_MODULE_2__.ZP+"/activate_lesson?",{namespaceName,lessonName});(0,actions_notification__WEBPACK_IMPORTED_MODULE_5__.wN)(dispatch,{message:res.data.message,level:"success"}),dispatch(updatedLesson(lessonName,{active:!0}))}catch(err){(0,actions_notification__WEBPACK_IMPORTED_MODULE_5__.EG)(dispatch,err)}}),activateLessonInjector=dispatch=>_0=>__async(void 0,[_0],function*({lessonName,namespaceName}){yield activateLesson(dispatch,{lessonName,namespaceName})}),deactivateLesson=(_0,_1)=>__async(void 0,[_0,_1],function*(dispatch,{lessonName,namespaceName}){try{const res=yield axios__WEBPACK_IMPORTED_MODULE_0___default().post(constants_server__WEBPACK_IMPORTED_MODULE_2__.ZP+"/deactivate_lesson",{namespaceName,lessonName});(0,actions_notification__WEBPACK_IMPORTED_MODULE_5__.wN)(dispatch,{message:res.data.message,level:"success"}),dispatch(updatedLesson(lessonName,{active:!1}))}catch(err){(0,actions_notification__WEBPACK_IMPORTED_MODULE_5__.EG)(dispatch,err)}}),deactivateLessonInjector=dispatch=>_0=>__async(void 0,[_0],function*({lessonName,namespaceName}){yield deactivateLesson(dispatch,{lessonName,namespaceName})}),updateLesson=(_0,_1)=>__async(void 0,[_0,_1],function*(dispatch,{lessonName,namespaceName,newTitle,newDescription,lockAfter,lockUntil,template,hideFromDashboard}){if(namespaceName&&lessonName)try{const query={namespaceName,lessonName,newTitle,newDescription,lockAfter,lockUntil,hideFromDashboard};(0,_stdlib_assert_is_boolean__WEBPACK_IMPORTED_MODULE_3__.isPrimitive)(template)&&(query.template=template);const res=yield axios__WEBPACK_IMPORTED_MODULE_0___default().post(constants_server__WEBPACK_IMPORTED_MODULE_2__.ZP+"/update_lesson",query);return dispatch(deletedLesson(lessonName)),(0,actions_notification__WEBPACK_IMPORTED_MODULE_5__.wN)(dispatch,{message:res.data.message,level:"success"}),getLessons(dispatch,namespaceName),!0}catch(err){return(0,actions_notification__WEBPACK_IMPORTED_MODULE_5__.EG)(dispatch,err),!1}return!1}),updateLessonInjector=dispatch=>_0=>__async(void 0,[_0],function*({lessonName,namespaceName,newTitle,newDescription,lockAfter,lockUntil,hideFromDashboard,template}){return yield updateLesson(dispatch,{lessonName,namespaceName,newTitle,newDescription,lockAfter,lockUntil,hideFromDashboard,template})}),getAllLessons=dispatch=>__async(void 0,null,function*(){try{const res=yield axios__WEBPACK_IMPORTED_MODULE_0___default().get(constants_server__WEBPACK_IMPORTED_MODULE_2__.ZP+"/get_all_lessons");dispatch(retrievedAllLessons(res.data.lessons))}catch(err){(0,actions_notification__WEBPACK_IMPORTED_MODULE_5__.EG)(dispatch,err)}}),getAllLessonsInjector=dispatch=>()=>__async(void 0,null,function*(){yield getAllLessons(dispatch)}),getTemplateLessons=dispatch=>__async(void 0,null,function*(){try{const res=yield axios__WEBPACK_IMPORTED_MODULE_0___default().get(constants_server__WEBPACK_IMPORTED_MODULE_2__.ZP+"/get_template_lessons");dispatch(retrievedTemplateLessons(res.data.lessons))}catch(err){(0,actions_notification__WEBPACK_IMPORTED_MODULE_5__.EG)(dispatch,err)}}),getTemplateLessonsInjector=dispatch=>()=>__async(void 0,null,function*(){yield getTemplateLessons(dispatch)}),getRooms=dispatch=>__async(void 0,null,function*(){try{const res=yield axios__WEBPACK_IMPORTED_MODULE_0___default().get(constants_server__WEBPACK_IMPORTED_MODULE_2__.ZP+"/get_open_rooms");dispatch(retrievedRooms(res.data.rooms))}catch(err){(0,actions_notification__WEBPACK_IMPORTED_MODULE_5__.EG)(dispatch,err)}}),getRoomsInjector=dispatch=>()=>__async(void 0,null,function*(){yield getRooms(dispatch)})},16120:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{wN:function(){return addNotification},pP:function(){return addNotificationInjector},EG:function(){return addErrorNotification}});var constants_action_types_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(84499);function addNotification(dispatch,notification){dispatch({type:constants_action_types_js__WEBPACK_IMPORTED_MODULE_0__.Dv,payload:notification})}const addNotificationInjector=dispatch=>notification=>{addNotification(dispatch,notification)};function addErrorNotification(dispatch,err){let msg;err.response?(msg="Server response: "+err.response.status+`.
`,msg+=err.response.data):msg=err.message,dispatch({type:constants_action_types_js__WEBPACK_IMPORTED_MODULE_0__.xe,payload:msg})}const addErrorNotificationInjector=dispatch=>message=>{addErrorNotification(dispatch,message)}},90637:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{px:function(){return getSettingsInjector},SK:function(){return getPublicSettingsInjector},Pj:function(){return updateSettingsInjector},qn:function(){return addCustomTranslationInjector},XE:function(){return getCustomTranslationsInjector},Jw:function(){return removeCustomTranslationInjector}});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(67294),axios__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(9669),axios__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_1__),constants_server__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(94204),i18next__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(41631),actions_notification__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(16120),constants_action_types_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(84499),__async=(__this,__arguments,generator)=>new Promise((resolve,reject)=>{var fulfilled=value=>{try{step(generator.next(value))}catch(e){reject(e)}},rejected=value=>{try{step(generator.throw(value))}catch(e){reject(e)}},step=x=>x.done?resolve(x.value):Promise.resolve(x.value).then(fulfilled,rejected);step((generator=generator.apply(__this,__arguments)).next())});const getSettings=dispatch=>__async(void 0,null,function*(){try{const res=yield axios__WEBPACK_IMPORTED_MODULE_1___default().get(constants_server__WEBPACK_IMPORTED_MODULE_2__.ZP+"/get_settings");dispatch({type:constants_action_types_js__WEBPACK_IMPORTED_MODULE_4__.pV,payload:res.data})}catch(err){return(0,actions_notification__WEBPACK_IMPORTED_MODULE_5__.EG)(dispatch,err)}}),getSettingsInjector=dispatch=>()=>__async(void 0,null,function*(){yield getSettings(dispatch)}),getPublicSettings=dispatch=>__async(void 0,null,function*(){try{const res=yield axios__WEBPACK_IMPORTED_MODULE_1___default().get(constants_server__WEBPACK_IMPORTED_MODULE_2__.ZP+"/get_public_settings");dispatch({type:constants_action_types_js__WEBPACK_IMPORTED_MODULE_4__.RJ,payload:res.data})}catch(err){return(0,actions_notification__WEBPACK_IMPORTED_MODULE_5__.EG)(dispatch,err)}}),getPublicSettingsInjector=dispatch=>()=>__async(void 0,null,function*(){yield getPublicSettings(dispatch)}),updateSettings=(dispatch,name,value)=>__async(void 0,null,function*(){try{const res=yield axios__WEBPACK_IMPORTED_MODULE_1___default().post(constants_server__WEBPACK_IMPORTED_MODULE_2__.ZP+"/update_settings",{name,value});(0,actions_notification__WEBPACK_IMPORTED_MODULE_5__.wN)(dispatch,{title:i18next__WEBPACK_IMPORTED_MODULE_3__.ZP.t("common:updated"),message:res.data.message,level:"success"}),dispatch({type:constants_action_types_js__WEBPACK_IMPORTED_MODULE_4__.TH,payload:res.data})}catch(err){return(0,actions_notification__WEBPACK_IMPORTED_MODULE_5__.EG)(dispatch,err)}}),updateSettingsInjector=dispatch=>(name,value)=>__async(void 0,null,function*(){yield updateSettings(dispatch,name,value)}),addCustomTranslation=(_0,_1)=>__async(void 0,[_0,_1],function*(dispatch,{language,ns,key,value}){try{const res=yield axios__WEBPACK_IMPORTED_MODULE_1___default().post(constants_server__WEBPACK_IMPORTED_MODULE_2__.ZP+"/add_custom_translation",{language,ns,key,value});return(0,actions_notification__WEBPACK_IMPORTED_MODULE_5__.wN)(dispatch,{title:i18next__WEBPACK_IMPORTED_MODULE_3__.ZP.t("common:updated"),message:res.data.message,level:"success"}),dispatch({type:constants_action_types_js__WEBPACK_IMPORTED_MODULE_4__.Ki,payload:res.data}),res}catch(err){return(0,actions_notification__WEBPACK_IMPORTED_MODULE_5__.EG)(dispatch,err),err}}),addCustomTranslationInjector=dispatch=>_0=>__async(void 0,[_0],function*({language,ns,key,value}){return yield addCustomTranslation(dispatch,{language,ns,key,value})}),getCustomTranslations=dispatch=>__async(void 0,null,function*(){try{const res=yield axios__WEBPACK_IMPORTED_MODULE_1___default().get(constants_server__WEBPACK_IMPORTED_MODULE_2__.ZP+"/get_translations");dispatch({type:constants_action_types_js__WEBPACK_IMPORTED_MODULE_4__.oi,payload:res.data})}catch(err){return(0,actions_notification__WEBPACK_IMPORTED_MODULE_5__.EG)(dispatch,err)}}),getCustomTranslationsInjector=dispatch=>()=>__async(void 0,null,function*(){yield getCustomTranslations(dispatch)}),removeCustomTranslation=(_0,_1)=>__async(void 0,[_0,_1],function*(dispatch,{language,ns,key}){try{const res=yield axios__WEBPACK_IMPORTED_MODULE_1___default().post(constants_server__WEBPACK_IMPORTED_MODULE_2__.ZP+"/remove_custom_translation",{language,ns,key});return(0,actions_notification__WEBPACK_IMPORTED_MODULE_5__.wN)(dispatch,{title:i18next__WEBPACK_IMPORTED_MODULE_3__.ZP.t("common:removed"),message:res.data.message,level:"success"}),dispatch({type:constants_action_types_js__WEBPACK_IMPORTED_MODULE_4__.Ki,payload:res.data}),res}catch(err){return(0,actions_notification__WEBPACK_IMPORTED_MODULE_5__.EG)(dispatch,err),err}}),removeCustomTranslationInjector=dispatch=>_0=>__async(void 0,[_0],function*({language,ns,key}){return yield removeCustomTranslation(dispatch,{language,ns,key})})},37344:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Pl:function(){return loggedIn},zu:function(){return receivedToken},fP:function(){return getUsersInjector},Jv:function(){return impersonateUserInjector},L$:function(){return deleteUserInjector},UA:function(){return uploadProfilePicInjector},m8:function(){return authenticateInjector},Vz:function(){return forgotPasswordInjector},vi:function(){return updateUserInjector},r4:function(){return createUser},IJ:function(){return handleLoginInjector},J3:function(){return handleLoginTFAInjector},Dv:function(){return restoreLoginInjector},Pt:function(){return logoutInjector},b0:function(){return userUpdateCheckInjector},UG:function(){return confirmEmail},WA:function(){return resendConfirmEmailInjector},VA:function(){return adminUpdateUserInjector}});var axios__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(9669),axios__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_0__),debug__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(11227),debug__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(debug__WEBPACK_IMPORTED_MODULE_1__),querystring__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(17673),i18next__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(41631),constants_server__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(94204),actions_authentication_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(55194),actions_cohort_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(72371),actions_notification_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(16120),constants_action_types_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(84499),__defProp=Object.defineProperty,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(obj,key,value)=>key in obj?__defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value}):obj[key]=value,__spreadValues=(a,b)=>{for(var prop in b||(b={}))__hasOwnProp.call(b,prop)&&__defNormalProp(a,prop,b[prop]);if(__getOwnPropSymbols)for(var prop of __getOwnPropSymbols(b))__propIsEnum.call(b,prop)&&__defNormalProp(a,prop,b[prop]);return a},__async=(__this,__arguments,generator)=>new Promise((resolve,reject)=>{var fulfilled=value=>{try{step(generator.next(value))}catch(e){reject(e)}},rejected=value=>{try{step(generator.throw(value))}catch(e){reject(e)}},step=x=>x.done?resolve(x.value):Promise.resolve(x.value).then(fulfilled,rejected);step((generator=generator.apply(__this,__arguments)).next())});const debug=debug__WEBPACK_IMPORTED_MODULE_1___default()("isle-dashboard:actions:user");function loggedIn(user){return{type:constants_action_types_js__WEBPACK_IMPORTED_MODULE_7__.Fw,payload:{email:user.email,verifiedEmail:user.verifiedEmail,name:user.name,enrolledNamespaces:user.enrolledNamespaces,ownedNamespaces:user.ownedNamespaces,organization:user.organization,writeAccess:user.writeAccess,administrator:user.administrator,lessonData:user.lessonData,picture:user.picture,createdAt:user.createdAt,updatedAt:user.updatedAt,score:user.score,spentTime:user.spentTime,licensed:user.licensed,customFields:user.customFields,availableCustomFields:user.availableCustomFields,twoFactorAuth:user.twoFactorAuth}}}function receivedToken({token,id}){return{type:constants_action_types_js__WEBPACK_IMPORTED_MODULE_7__.CJ,payload:{token,id}}}function requestTFA({email,password}){return{type:constants_action_types_js__WEBPACK_IMPORTED_MODULE_7__.Jb,payload:{email,password}}}function loggedOut(){return{type:constants_action_types_js__WEBPACK_IMPORTED_MODULE_7__.E7}}function authenticated(){return{type:constants_action_types_js__WEBPACK_IMPORTED_MODULE_7__.tl}}function updateUserPicture(picture){return{type:constants_action_types_js__WEBPACK_IMPORTED_MODULE_7__.bM,payload:{picture}}}const updatedUser=({name,organization})=>({type:constants_action_types_js__WEBPACK_IMPORTED_MODULE_7__.hO,payload:{name,organization}}),updatedUserByAdmin=user=>({type:constants_action_types_js__WEBPACK_IMPORTED_MODULE_7__.Wh,payload:user}),getUsers=dispatch=>__async(void 0,null,function*(){try{const res=yield axios__WEBPACK_IMPORTED_MODULE_0___default().get(constants_server__WEBPACK_IMPORTED_MODULE_4__.ZP+"/get_users");dispatch({type:constants_action_types_js__WEBPACK_IMPORTED_MODULE_7__.fo,payload:{users:res.data.users}})}catch(err){return(0,actions_notification_js__WEBPACK_IMPORTED_MODULE_8__.EG)(dispatch,err)}}),getUsersInjector=dispatch=>()=>__async(void 0,null,function*(){yield getUsers(dispatch)}),impersonateUser=(_0,_1)=>__async(void 0,[_0,_1],function*(dispatch,{id,password}){debug("Impersonating user with id "+id);try{const res=yield axios__WEBPACK_IMPORTED_MODULE_0___default().post(constants_server__WEBPACK_IMPORTED_MODULE_4__.ZP+"/impersonate",{id,password}),user=yield(0,actions_authentication_js__WEBPACK_IMPORTED_MODULE_5__.sY)(dispatch,{id:res.data.id}),JWT={token:res.data.token,id:res.data.id},userVal="ISLE_USER_"+constants_server__WEBPACK_IMPORTED_MODULE_4__.ZP;localStorage.setItem(userVal,JSON.stringify(JWT)),user&&(0,actions_cohort_js__WEBPACK_IMPORTED_MODULE_6__.Wp)(dispatch,user)}catch(err){(0,actions_notification_js__WEBPACK_IMPORTED_MODULE_8__.EG)(dispatch,err)}}),impersonateUserInjector=dispatch=>_0=>__async(void 0,[_0],function*({id,password}){yield impersonateUser(dispatch,{id,password})}),deleteUser=(_0,_1)=>__async(void 0,[_0,_1],function*(dispatch,{id}){try{const res=yield axios__WEBPACK_IMPORTED_MODULE_0___default().post(constants_server__WEBPACK_IMPORTED_MODULE_4__.ZP+"/delete_user",{id});(0,actions_notification_js__WEBPACK_IMPORTED_MODULE_8__.wN)(dispatch,{title:i18next__WEBPACK_IMPORTED_MODULE_3__.ZP.t("common:deleted"),message:res.data.message,level:"success"}),dispatch({type:constants_action_types_js__WEBPACK_IMPORTED_MODULE_7__.Gp,payload:{id}})}catch(err){(0,actions_notification_js__WEBPACK_IMPORTED_MODULE_8__.EG)(dispatch,err)}}),deleteUserInjector=dispatch=>_0=>__async(void 0,[_0],function*({id}){yield deleteUser(dispatch,{id})}),uploadProfilePic=(_0,_1)=>__async(void 0,[_0,_1],function*(dispatch,{avatarData,thumbnailData}){try{let res=yield axios__WEBPACK_IMPORTED_MODULE_0___default().post(constants_server__WEBPACK_IMPORTED_MODULE_4__.ZP+"/upload_profile_pic",avatarData);const message=res.data.message;let filename=res.data.filename;filename=constants_server__WEBPACK_IMPORTED_MODULE_4__.ZP+"/avatar/"+filename,dispatch(updateUserPicture(filename)),res=yield axios__WEBPACK_IMPORTED_MODULE_0___default().post(constants_server__WEBPACK_IMPORTED_MODULE_4__.ZP+"/upload_thumbnail_pic",thumbnailData),(0,actions_notification_js__WEBPACK_IMPORTED_MODULE_8__.wN)(dispatch,{title:i18next__WEBPACK_IMPORTED_MODULE_3__.ZP.t("profile-pic-title"),message,level:"success",position:"tl"})}catch(err){(0,actions_notification_js__WEBPACK_IMPORTED_MODULE_8__.EG)(dispatch,err)}}),uploadProfilePicInjector=dispatch=>_0=>__async(void 0,[_0],function*({avatarData,thumbnailData}){yield uploadProfilePic(dispatch,{avatarData,thumbnailData})}),authenticate=(_0,_1)=>__async(void 0,[_0,_1],function*(dispatch,{writeAccessToken}){try{const res=yield axios__WEBPACK_IMPORTED_MODULE_0___default().post(constants_server__WEBPACK_IMPORTED_MODULE_4__.ZP+"/set_write_access",{token:writeAccessToken});return dispatch(authenticated()),(0,actions_notification_js__WEBPACK_IMPORTED_MODULE_8__.wN)(dispatch,{message:res.data.message+" You can now create your own courses on ISLE and have access to the gallery of public lessons.",level:"success",autoDismiss:10}),!0}catch(err){return(0,actions_notification_js__WEBPACK_IMPORTED_MODULE_8__.EG)(dispatch,err),!1}}),authenticateInjector=dispatch=>_0=>__async(void 0,[_0],function*({writeAccessToken}){return yield authenticate(dispatch,{writeAccessToken})}),forgotPassword=(_0,_1)=>__async(void 0,[_0,_1],function*(dispatch,{email}){try{yield axios__WEBPACK_IMPORTED_MODULE_0___default().get(constants_server__WEBPACK_IMPORTED_MODULE_4__.ZP+"/forgot_password?"+querystring__WEBPACK_IMPORTED_MODULE_2__.stringify({email})),(0,actions_notification_js__WEBPACK_IMPORTED_MODULE_8__.wN)(dispatch,{message:"Check your email inbox for a link to choose a new password.",level:"success"})}catch(err){(0,actions_notification_js__WEBPACK_IMPORTED_MODULE_8__.EG)(dispatch,err)}}),forgotPasswordInjector=dispatch=>_0=>__async(void 0,[_0],function*({email}){yield forgotPassword(dispatch,{email})}),updateUser=(dispatch,form)=>__async(void 0,null,function*(){try{const res=yield axios__WEBPACK_IMPORTED_MODULE_0___default().post(constants_server__WEBPACK_IMPORTED_MODULE_4__.ZP+"/update_user",form);dispatch(updatedUser({name:form.name,organization:form.organization,customFields:form.customFields})),(0,actions_notification_js__WEBPACK_IMPORTED_MODULE_8__.wN)(dispatch,{message:res.data.message,level:"success"})}catch(err){(0,actions_notification_js__WEBPACK_IMPORTED_MODULE_8__.EG)(dispatch,err)}}),updateUserInjector=dispatch=>_0=>__async(void 0,[_0],function*({name,organization,password,customFields}){yield updateUser(dispatch,{name,organization,password,customFields})}),createUser=form=>axios__WEBPACK_IMPORTED_MODULE_0___default().post(constants_server__WEBPACK_IMPORTED_MODULE_4__.ZP+"/create_user",form),handleLogin=(dispatch,form)=>__async(void 0,null,function*(){const res=yield axios__WEBPACK_IMPORTED_MODULE_0___default().post(constants_server__WEBPACK_IMPORTED_MODULE_4__.ZP+"/login",form);return res.data.message==="finish-login-via-tfa"?dispatch(requestTFA(res.data)):dispatch(receivedToken(res.data)),res}),handleLoginInjector=dispatch=>form=>__async(void 0,null,function*(){return yield handleLogin(dispatch,form)}),handleLoginTFA=(dispatch,form)=>__async(void 0,null,function*(){try{const res=yield axios__WEBPACK_IMPORTED_MODULE_0___default().post(constants_server__WEBPACK_IMPORTED_MODULE_4__.ZP+"/login_tfa",form);return dispatch(receivedToken(res.data)),res}catch(err){return(0,actions_notification_js__WEBPACK_IMPORTED_MODULE_8__.EG)(dispatch,err),err}}),handleLoginTFAInjector=dispatch=>form=>__async(void 0,null,function*(){return yield handleLoginTFA(dispatch,form)}),restoreLogin=(dispatch,user)=>{dispatch(loggedIn(user))},restoreLoginInjector=dispatch=>user=>{restoreLogin(dispatch,user)},logout=dispatch=>{debug("Logging out the current user..."),localStorage.removeItem("ISLE_USER_"+constants_server__WEBPACK_IMPORTED_MODULE_4__.ZP),dispatch(loggedOut())},logoutInjector=dispatch=>()=>{logout(dispatch)},userUpdateCheck=(dispatch,user)=>__async(void 0,null,function*(){try{const res=yield axios__WEBPACK_IMPORTED_MODULE_0___default().get(constants_server__WEBPACK_IMPORTED_MODULE_4__.ZP+"/user_update_check?"+querystring__WEBPACK_IMPORTED_MODULE_2__.stringify({updatedAt:user.updatedAt}));if(debug("Received response: "+res.data),!res.data.hasMostRecent){let newUser=(yield axios__WEBPACK_IMPORTED_MODULE_0___default().post(constants_server__WEBPACK_IMPORTED_MODULE_4__.ZP+"/credentials_dashboard",{id:user.id})).data;newUser.picture&&(newUser.picture=constants_server__WEBPACK_IMPORTED_MODULE_4__.ZP+"/avatar/"+newUser.picture),newUser=__spreadValues({id:user.id,token:user.token},newUser),debug("Updated user data..."),dispatch(loggedIn(newUser))}}catch(err){(0,actions_notification_js__WEBPACK_IMPORTED_MODULE_8__.EG)(dispatch,err)}}),userUpdateCheckInjector=dispatch=>user=>__async(void 0,null,function*(){yield userUpdateCheck(dispatch,user)}),confirmEmail=token=>__async(void 0,null,function*(){try{return(yield axios__WEBPACK_IMPORTED_MODULE_0___default().post(constants_server__WEBPACK_IMPORTED_MODULE_4__.ZP+"/confirm_email",{token})).data.message}catch(err){return err.response&&err.response.data?err.response.data:err.message}}),resendConfirmEmail=(dispatch,user)=>__async(void 0,null,function*(){try{yield axios__WEBPACK_IMPORTED_MODULE_0___default().post(constants_server__WEBPACK_IMPORTED_MODULE_4__.ZP+"/resend_confirm_email"),(0,actions_notification_js__WEBPACK_IMPORTED_MODULE_8__.wN)(dispatch,{title:"Email sent",message:i18next__WEBPACK_IMPORTED_MODULE_3__.ZP.t("common:verification-email-sent"),level:"success",position:"tl"})}catch(err){(0,actions_notification_js__WEBPACK_IMPORTED_MODULE_8__.EG)(dispatch,err)}}),resendConfirmEmailInjector=dispatch=>user=>__async(void 0,null,function*(){yield resendConfirmEmail(dispatch,user)}),adminUpdateUser=(dispatch,form)=>__async(void 0,null,function*(){try{const res=yield axios__WEBPACK_IMPORTED_MODULE_0___default().post(constants_server__WEBPACK_IMPORTED_MODULE_4__.ZP+"/admin_update_user",form);(0,actions_notification_js__WEBPACK_IMPORTED_MODULE_8__.wN)(dispatch,{message:res.data.message,level:"success"}),dispatch(updatedUserByAdmin(form))}catch(err){(0,actions_notification_js__WEBPACK_IMPORTED_MODULE_8__.EG)(dispatch,err)}}),adminUpdateUserInjector=dispatch=>form=>__async(void 0,null,function*(){yield adminUpdateUser(dispatch,form)})},72885:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(67294);const Spinner=()=>react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"sk-cube-grid"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"sk-cube sk-cube1"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"sk-cube sk-cube2"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"sk-cube sk-cube3"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"sk-cube sk-cube4"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"sk-cube sk-cube5"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"sk-cube sk-cube6"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"sk-cube sk-cube7"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"sk-cube sk-cube8"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:"sk-cube sk-cube9"}));__webpack_exports__.Z=Spinner},84499:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Kx:function(){return ADD_ENROLLED_NAMESPACE},xe:function(){return ADD_ERROR_NOTIFICATION},Dv:function(){return ADD_NOTIFICATION},$8:function(){return APPEND_CREATED_NAMESPACE},tl:function(){return AUTHENTICATED},WF:function(){return CHANGED_NAMESPACE},H0:function(){return CREATED_ANNOUNCEMENT},Hs:function(){return CREATED_CUSTOM_FIELD},uv:function(){return CREATED_BACKUP},_R:function(){return CREATED_ROLE},NH:function(){return CREATED_TICKET},pA:function(){return DELETED_BACKUP},ke:function(){return DELETED_CURRENT_NAMESPACE},CH:function(){return DELETED_CUSTOM_FIELD},jm:function(){return DELETED_EVENT},Rm:function(){return DELETED_FILE},Nh:function(){return DELETED_LESSON},s_:function(){return DELETED_ROLE},SZ:function(){return DELETED_TICKET},Gp:function(){return DELETED_USER},wd:function(){return DELETED_ANNOUNCEMENT},oF:function(){return DISABLED_TFA},wx:function(){return EDITED_ANNOUNCEMENT},E4:function(){return ENABLED_TFA},rh:function(){return FIELD_POSITION_DECREMENTED},S5:function(){return FIELD_POSITION_INCREMENTED},Rr:function(){return GET_ALL_COHORTS},ci:function(){return GET_ALL_FILES},oJ:function(){return GET_ALL_LESSONS},XM:function(){return GET_ALL_NAMESPACES},Qd:function(){return GET_ALL_ROLES},MI:function(){return GET_BACKUPS},fM:function(){return GET_EVENTS},rq:function(){return GET_ALL_TICKETS},W1:function(){return GET_COURSE_TICKETS},C3:function(){return GET_CUSTOM_FIELDS},oi:function(){return GET_CUSTOM_TRANSLATIONS},Te:function(){return GET_OVERVIEW_STATISTICS},oP:function(){return GET_HISTORICAL_OVERVIEW_STATISTICS},Pq:function(){return GET_REQUEST_STATISTICS},tM:function(){return GET_ROOMS},pV:function(){return GET_SETTINGS},RJ:function(){return GET_SETTINGS_PUBLIC},LJ:function(){return GET_TEMPLATE_LESSONS},Bu:function(){return GET_TFA_QRCODE},fo:function(){return GET_USERS},cv:function(){return GET_USER_TICKETS},gH:function(){return LESSON_ORDER},i9:function(){return LESSON_ORDER_DIRECTION},Ze:function(){return RECEIVED_FILES},kn:function(){return RECEIVED_LICENSE},aM:function(){return RECEIVED_NAMESPACE_FILES},CJ:function(){return RECEIVED_TOKEN},Ug:function(){return REMOVED_LICENSE},Jb:function(){return REQUEST_TFA},Z9:function(){return RETRIEVED_BADGES},$L:function(){return RETRIEVED_COHORTS},qv:function(){return RETRIEVED_LESSONS},QI:function(){return RETRIEVED_PUBLIC_LESSONS},X5:function(){return SEARCH_PHRASE_SET},mI:function(){return TICKET_CLOSED},wL:function(){return TICKET_OPENED},JB:function(){return TICKET_MESSAGE_ADDED},B2:function(){return TICKET_PRIORITY_UPDATED},kO:function(){return TRIGGERED_EVENT},lo:function(){return UPDATED_LESSON},Rg:function(){return UPDATED_OWNED_NAMESPACE},Fw:function(){return LOGGED_IN},E7:function(){return LOGGED_OUT},hO:function(){return USER_UPDATED},Wh:function(){return USER_UPDATED_BY_ADMIN},bM:function(){return USER_PICTURE_MODIFIED},eu:function(){return USER_RECEIVED_BADGES},Py:function(){return UPDATED_ROLE},TH:function(){return UPDATED_SETTINGS},LX:function(){return UPDATED_STUDENT_PROGRESS},Ki:function(){return UPDATED_TRANSLATIONS},G7:function(){return RETRIEVED_ENROLLABLE_COHORTS}});const ADD_ENROLLED_NAMESPACE="ADD_ENROLLED_NAMESPACE",ADD_ERROR_NOTIFICATION="ADD_ERROR_NOTIFICATION",ADD_NOTIFICATION="ADD_NOTIFICATION",APPEND_CREATED_NAMESPACE="APPEND_CREATED_NAMESPACE",AUTHENTICATED="AUTHENTICATED",CHANGED_NAMESPACE="CHANGED_NAMESPACE",CREATED_ANNOUNCEMENT="CREATED_ANNOUNCEMENT",CREATED_CUSTOM_FIELD="CREATED_CUSTOM_FIELD",CREATED_BACKUP="CREATED_BACKUP",CREATED_ROLE="CREATED_ROLE",CREATED_TICKET="CREATED_TICKET",DELETED_BACKUP="DELETED_BACKUP",DELETED_CURRENT_NAMESPACE="DELETED_CURRENT_NAMESPACE",DELETED_CUSTOM_FIELD="DELETED_CUSTOM_FIELD",DELETED_EVENT="DELETED_EVENT",DELETED_FILE="DELETED_FILE",DELETED_LESSON="DELETED_LESSON",DELETED_ROLE="DELETED_ROLE",DELETED_TICKET="DELETED_TICKET",DELETED_USER="DELETED_USER",DELETED_ANNOUNCEMENT="DELETED_ANNOUNCEMENT",DISABLED_TFA="DISABLED_TFA",EDITED_ANNOUNCEMENT="EDITED_ANNOUNCEMENT",ENABLED_TFA="ENABLED_TFA",FIELD_POSITION_DECREMENTED="FIELD_POSITION_DECREMENTED",FIELD_POSITION_INCREMENTED="FIELD_POSITION_INCREMENTED",GET_ALL_COHORTS="GET_ALL_COHORTS",GET_ALL_FILES="GET_ALL_FILES",GET_ALL_LESSONS="GET_ALL_LESSONS",GET_ALL_NAMESPACES="GET_ALL_NAMESPACES",GET_ALL_ROLES="GET_ALL_ROLES",GET_BACKUPS="GET_BACKUPS",GET_EVENTS="GET_EVENTS",GET_ALL_TICKETS="GET_ALL_TICKETS",GET_COURSE_TICKETS="GET_COURSE_TICKETS",GET_CUSTOM_FIELDS="GET_CUSTOM_FIELDS",GET_CUSTOM_TRANSLATIONS="GET_CUSTOM_TRANSLATIONS",GET_OVERVIEW_STATISTICS="GET_OVERVIEW_STATISTICS",GET_HISTORICAL_OVERVIEW_STATISTICS="GET_HISTORICAL_OVERVIEW_STATISTICS",GET_REQUEST_STATISTICS="GET_REQUEST_STATISTICS",GET_ROOMS="GET_ROOMS",GET_SETTINGS="GET_SETTINGS",GET_SETTINGS_PUBLIC="GET_SETTINGS_PUBLIC",GET_TEMPLATE_LESSONS="GET_TEMPLATE_LESSONS",GET_TFA_QRCODE="GET_TFA_QRCODE",GET_USERS="GET_USERS",GET_USER_TICKETS="GET_USER_TICKETS",LESSON_ORDER="LESSON_ORDER",LESSON_ORDER_DIRECTION="LESSON_ORDER_DIRECTION",RECEIVED_FILES="RECEIVED_FILES",RECEIVED_LICENSE="RECEIVED_LICENSE",RECEIVED_NAMESPACE_FILES="RECEIVED_NAMESPACE_FILES",RECEIVED_TOKEN="RECEIVED_TOKEN",REMOVED_LICENSE="REMOVED_LICENSE",REQUEST_TFA="REQUEST_TFA",RETRIEVED_BADGES="RETRIEVED_BADGES",RETRIEVED_COHORTS="RETRIEVED_COHORTS",RETRIEVED_LESSONS="RETRIEVED_LESSONS",RETRIEVED_PUBLIC_LESSONS="RETRIEVED_PUBLIC_LESSONS",SEARCH_PHRASE_SET="SEARCH_PHRASE_SET",TICKET_CLOSED="TICKET_CLOSED",TICKET_OPENED="TICKET_OPENED",TICKET_MESSAGE_ADDED="TICKET_MESSAGE_ADDED",TICKET_PRIORITY_UPDATED="TICKET_PRIORITY_UPDATED",TRIGGERED_EVENT="TRIGGERED_EVENT",UPDATED_LESSON="UPDATED_LESSON",UPDATED_OWNED_NAMESPACE="UPDATED_OWNED_NAMESPACE",LOGGED_IN="LOGGED_IN",LOGGED_OUT="LOGGED_OUT",USER_UPDATED="USER_UPDATED",USER_UPDATED_BY_ADMIN="USER_UPDATED_BY_ADMIN",USER_PICTURE_MODIFIED="USER_PICTURE_MODIFIED",USER_RECEIVED_BADGES="USER_RECEIVED_BADGES",UPDATED_CUSTOM_FIELD="UPDATED_CUSTOM_FIELD",UPDATED_ROLE="UPDATED_ROLE",UPDATED_SETTINGS="UPDATED_SETTINGS",UPDATED_STUDENT_PROGRESS="UPDATED_STUDENT_PROGRESS",UPDATED_TRANSLATIONS="UPDATED_TRANSLATIONS",RETRIEVED_ENROLLABLE_COHORTS="RETRIEVED_ENROLLABLE_COHORTS"},25153:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{a2:function(){return LANGUAGES},PG:function(){return LANGUAGE_CODES},dg:function(){return languageLabel},mF:function(){return languageDescription}});const LANGUAGES=[{value:"en",label:"english"},{value:"bg",label:"bulgarian"},{value:"cs",label:"czech"},{value:"da",label:"danish"},{value:"de",label:"german"},{value:"el",label:"greek"},{value:"es",label:"spanish"},{value:"et",label:"estonian"},{value:"fi",label:"finnish"},{value:"fr",label:"french"},{value:"hu",label:"hungarian"},{value:"it",label:"italian"},{value:"ja",label:"japanese"},{value:"lt",label:"lithuanian"},{value:"lv",label:"latvian"},{value:"nl",label:"dutch"},{value:"pl",label:"polish"},{value:"pt",label:"portuguese"},{value:"ro",label:"romanian"},{value:"ru",label:"russian"},{value:"sk",label:"slovak"},{value:"sl",label:"slovenian"},{value:"sv",label:"swedish"},{value:"zh",label:"chinese"}],LANGUAGE_CODES=["en","bg","cs","da","de","el","es","et","fi","fr","hu","it","ja","lt","lv","nl","pl","pt","ro","ru","sk","sl","sv","zh"],languageLabel=code=>{switch(code){case"en":default:return"english";case"bg":return"bulgarian";case"cs":return"czech";case"da":return"danish";case"de":return"german";case"el":return"greek";case"es":return"spanish";case"et":return"estonian";case"fi":return"finnish";case"fr":return"french";case"hu":return"hungarian";case"it":return"italian";case"ja":return"japanese";case"lt":return"lithuanian";case"lv":return"latvian";case"nl":return"dutch";case"pl":return"polish";case"pt":return"portuguese";case"ro":return"romanian";case"ru":return"russian";case"sk":return"slovak";case"sl":return"slovenian";case"sv":return"swedish";case"zh":return"chinese"}},languageDescription=code=>{switch(code){case"en":default:return"English - EN";case"bg":return"\u0411\u044A\u043B\u0433\u0430\u0440\u0441\u043A\u0438 - BG";case"cs":return"\u010Cesky - CS";case"da":return"Dansk - DA";case"el":return"\u0395\u03BB\u03BB\u03B7\u03BD\u03B9\u03BA\u03AE - EL";case"es":return"Espa\xF1ol - ES";case"et":return"Eesti - ET";case"de":return"Deutsch - DE";case"fi":return"Suomalainen - FI";case"fr":return"Fran\xE7ais - FR";case"hu":return"Hungarian - HU";case"it":return"Italiano - IT";case"ja":return"\u306B\u307B\u3093\u3054 - JA";case"lt":return"Lietuvi\u0173 kalba - LT";case"lv":return"Latvie\u0161u - LV";case"nl":return"Nederlands - NL";case"pl":return"Polski - PL";case"pt":return"Porgtug\xEAs - PT";case"ro":return"Rom\xE2nesc - RO";case"ru":return"\u0440\u0443\u0441\u0441\u043A\u0438\u0439 - RU";case"sk":return"Slovensk\xE1 - SK";case"sl":return"Slovenski - SL";case"sv":return"Svenska - SV";case"zh":return"\u4E2D\u6587 - ZH"}};var __WEBPACK_DEFAULT_EXPORT__=null},94204:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{ZP:function(){return constants_server}});var server_namespaceObject=JSON.parse('{"$":"https://isle.heinz.cmu.edu"}');const REMOTE=server_namespaceObject.$,LOCAL="http://localhost:17777";let server;server=window.location.origin;var constants_server=server},9908:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{eC:function(){return namespaceAxios},Yy:function(){return globalAxios}});var axios__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(9669),axios__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_0__),_i18n__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(65662),_index_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(39572);axios__WEBPACK_IMPORTED_MODULE_0___default().interceptors.request.use(config=>{config.headers["Accept-Language"]=_i18n__WEBPACK_IMPORTED_MODULE_1__.Z.language;const token=_index_js__WEBPACK_IMPORTED_MODULE_2__.h.getState().user.token;return token&&(config.headers.Authorization=`JWT ${token}`),config});const namespaceClient=axios__WEBPACK_IMPORTED_MODULE_0___default().create();namespaceClient.interceptors.request.use(config=>{config.headers["Accept-Language"]=_i18n__WEBPACK_IMPORTED_MODULE_1__.Z.language;const state=_index_js__WEBPACK_IMPORTED_MODULE_2__.h.getState(),token=state.user.token;token&&(config.headers.Authorization=`JWT ${token}`),config.headers["X-Context-Level"]="namespace";const target=config.data.namespaceID||config.params.namespaceID||state.namespace._id;return config.headers["X-Context-Target"]=target,config});const programClient=axios__WEBPACK_IMPORTED_MODULE_0___default().create();axios__WEBPACK_IMPORTED_MODULE_0___default().create().interceptors.request.use(config=>{config.headers["Accept-Language"]=_i18n__WEBPACK_IMPORTED_MODULE_1__.Z.language;const state=_index_js__WEBPACK_IMPORTED_MODULE_2__.h.getState(),token=state.user.token;token&&(config.headers.Authorization=`JWT ${token}`),config.headers["X-Context-Level"]="lesson";let target=config.data.lessonID||config.params.lessonID;return target+=state.namespace._id,config.headers["X-Context-Target"]=target,config});const globalClient=axios__WEBPACK_IMPORTED_MODULE_0___default().create();globalClient.interceptors.request.use(config=>{config.headers["Accept-Language"]=_i18n__WEBPACK_IMPORTED_MODULE_1__.Z.language;const token=_index_js__WEBPACK_IMPORTED_MODULE_2__.h.getState().user.token;return token&&(config.headers.Authorization=`JWT ${token}`),config.headers["X-Context-Level"]="global",config.headers["X-Context-Target"]=!0,config});const namespaceAxios=namespaceClient,programAxios=null,lessonAxios=null,globalAxios=globalClient},65662:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";var i18next__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(41631),react_i18next__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(81468),i18next_browser_languagedetector__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(40013),i18next_browser_languagedetector__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(i18next_browser_languagedetector__WEBPACK_IMPORTED_MODULE_1__),i18next_http_backend_cjs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(78122),i18next_http_backend_cjs__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(i18next_http_backend_cjs__WEBPACK_IMPORTED_MODULE_2__),i18next_chained_backend__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(71561),i18next_chained_backend__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(i18next_chained_backend__WEBPACK_IMPORTED_MODULE_3__),constants_server__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(94204),_index_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(39572);i18next__WEBPACK_IMPORTED_MODULE_0__.ZP.use(i18next_chained_backend__WEBPACK_IMPORTED_MODULE_3___default()).use(i18next_browser_languagedetector__WEBPACK_IMPORTED_MODULE_1___default()).use(react_i18next__WEBPACK_IMPORTED_MODULE_6__.Db).init({debug:!1,lng:localStorage.getItem("i18nextLng")||"en",fallbackLng:"en",backend:{backends:[i18next_http_backend_cjs__WEBPACK_IMPORTED_MODULE_2___default(),i18next_http_backend_cjs__WEBPACK_IMPORTED_MODULE_2___default(),i18next_http_backend_cjs__WEBPACK_IMPORTED_MODULE_2___default()],backendOptions:[{loadPath:constants_server__WEBPACK_IMPORTED_MODULE_4__.ZP+"/dashboard/locales/{{lng}}/{{ns}}.json"},{loadPath:constants_server__WEBPACK_IMPORTED_MODULE_4__.ZP+"/locales/{{lng}}/{{ns}}.json"},{loadPath:"https://cdn.jsdelivr.net/npm/@isle-project/locales/components/{{ns}}/{{lng}}.json"}]},react:{useSuspense:!1},interpolation:{escapeValue:!1}}),i18next__WEBPACK_IMPORTED_MODULE_0__.ZP.store.on("added",function(lng,ns){const custom=_index_js__WEBPACK_IMPORTED_MODULE_5__.h.getState().translations[lng][ns];if(custom){const keys=Object.keys(custom);i18next__WEBPACK_IMPORTED_MODULE_0__.ZP.store.data[lng][ns+"_ORIGINAL"]||(i18next__WEBPACK_IMPORTED_MODULE_0__.ZP.store.data[lng][ns+"_ORIGINAL"]={});for(let i=0;i<keys.length;i++)i18next__WEBPACK_IMPORTED_MODULE_0__.ZP.store.data[lng][ns+"_ORIGINAL"][keys[i]]=i18next__WEBPACK_IMPORTED_MODULE_0__.ZP.store.data[lng][ns][keys[i]],i18next__WEBPACK_IMPORTED_MODULE_0__.ZP.store.data[lng][ns][keys[i]]=custom[keys[i]]}}),__webpack_exports__.Z=i18next__WEBPACK_IMPORTED_MODULE_0__.ZP},31394:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(67294);const useMountEffect=callback=>(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(callback,[]);__webpack_exports__.Z=useMountEffect},39572:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{h:function(){return store}});var initialize=__webpack_require__(6063),react=__webpack_require__(67294),react_dom=__webpack_require__(73935),localforage=__webpack_require__(69483),localforage_default=__webpack_require__.n(localforage),lib=__webpack_require__(37424),redux_persist_lib=__webpack_require__(64280),integration_react=__webpack_require__(79144),redux=__webpack_require__(35281),react_router_dom_production_min=__webpack_require__(59685),react_helmet_async_lib=__webpack_require__(18862),keys_lib=__webpack_require__(25351),keys_lib_default=__webpack_require__.n(keys_lib),action_types=__webpack_require__(84499),__defProp=Object.defineProperty,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(obj,key,value)=>key in obj?__defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value}):obj[key]=value,__spreadValues=(a,b)=>{for(var prop in b||(b={}))__hasOwnProp.call(b,prop)&&__defNormalProp(a,prop,b[prop]);if(__getOwnPropSymbols)for(var prop of __getOwnPropSymbols(b))__propIsEnum.call(b,prop)&&__defNormalProp(a,prop,b[prop]);return a};const initialState={cohorts:[],events:[],files:[],lessons:[],lessonsMap:{},namespaces:[],roles:[],rooms:[],tickets:[],users:[],statistics:{},requestStatistics:[],historicalStatistics:[],backups:[],license:null,settings:{}};function admin(state=initialState,action){switch(action.type){case action_types.fo:{let users=action.payload.users;return users=users.map(x=>{const keys=keys_lib_default()(x.lessonData);let chatMessages=0,nActions=0;for(let i=0;i<keys.length;i++){const key=keys[i];chatMessages+=x.lessonData[key].chatMessages;const types2=keys_lib_default()(x.lessonData[key].actionTypes);for(let j=0;j<types2.length;j++)nActions+=x.lessonData[key].actionTypes[types2[j]]}return x.nActions=nActions,x.chatMessages=chatMessages,x.createdAt=new Date(x.createdAt),x.updatedAt=new Date(x.updatedAt),x}),Object.assign({},state,{users})}case action_types.Rr:{let cohorts2=action.payload.cohorts;return cohorts2=cohorts2.map(x=>(x.startDate=new Date(x.startDate),x.endDate=new Date(x.endDate),x)),Object.assign({},state,{cohorts:cohorts2})}case action_types.ci:{let files=action.payload.files;return files=files.map(x=>(x.updatedAt=new Date(x.updatedAt),x)),Object.assign({},state,{files})}case action_types.Rm:{const files=state.files.filter(x=>x._id!==action.payload.id);return Object.assign({},state,{files})}case action_types.oJ:{let lessons=action.payload.lessons;const lessonsMap=__spreadValues({},state.lessonsMap);return lessons=lessons.map(x=>(x.createdAt=new Date(x.createdAt),x.updatedAt=new Date(x.updatedAt),lessonsMap[x._id]=x.title,x)),Object.assign({},state,{lessons,lessonsMap})}case action_types.XM:{let namespaces=action.payload.namespaces;return namespaces=namespaces.map(x=>(x.createdAt=new Date(x.createdAt),x.updatedAt=new Date(x.updatedAt),x)),Object.assign({},state,{namespaces})}case action_types.fM:{let events=action.payload.events;return events=events.map(x=>(x.time=new Date(x.time),x)),Object.assign({},state,{events})}case action_types.tM:{let rooms=action.payload.rooms;return rooms=rooms.map(x=>(x.startTime=new Date(x.startTime),x)),Object.assign({},state,{rooms})}case action_types.jm:{const events=state.events.filter(x=>x._id!==action.payload.id);return Object.assign({},state,{events})}case action_types.Gp:{const users=state.users.filter(x=>x._id!==action.payload.id);return Object.assign({},state,{users})}case action_types.kO:{const events=state.events.slice();for(let i=0;i<events.length;i++)events[i]._id===action.payload.id&&(events[i].done=!0);return Object.assign({},state,{events})}case action_types.Wh:{let users=state.users.slice();for(let i=0;i<users.length;i++){const user2=users[i];if(user2._id===action.payload.id){const keys=keys_lib_default()(action.payload);for(let j=0;j<keys.length;j++){const key=keys[j];key!=="id"&&(user2[key]=action.payload[key])}}}return Object.assign({},state,{users})}case action_types.Te:return Object.assign({},state,{statistics:action.payload.statistics});case action_types.rq:{let tickets=action.payload.tickets;return tickets=tickets.map(x=>(x.createdAt=new Date(x.createdAt),x.updatedAt=new Date(x.updatedAt),x)),Object.assign({},state,{tickets})}case action_types.SZ:{const tickets=state.tickets.filter(x=>x._id!==action.payload.id);return Object.assign({},state,{tickets})}case action_types.wL:{const tickets=state.tickets.map(ticket=>(ticket._id===action.payload.id&&(ticket.done=!1),ticket));return Object.assign({},state,{tickets})}case action_types.B2:{const tickets=state.tickets.map(ticket=>(ticket._id===action.payload.id&&(ticket.priority=action.payload.priority),ticket));return Object.assign({},state,{tickets})}case action_types.mI:{const tickets=state.tickets.map(ticket=>(ticket._id===action.payload.id&&(ticket.done=!0),ticket));return Object.assign({},state,{tickets})}case action_types.JB:{const tickets=state.tickets.map(ticket=>{if(ticket._id===action.payload.id){const message=action.payload.message;message.picture=message.picture.substring(message.picture.lastIndexOf("/")+1),ticket.messages.unshift(message)}return ticket});return Object.assign({},state,{tickets})}case action_types.kn:return Object.assign({},state,{license:action.payload.license});case action_types.Ug:return Object.assign({},state,{license:null});case action_types.oP:{const statistics=action.payload.statistics.map(x=>(x.createdAt=x.createdAt.substring(0,x.createdAt.indexOf("T")),x));return Object.assign({},state,{historicalStatistics:statistics})}case action_types.Pq:return Object.assign({},state,{requestStatistics:action.payload.statistics});case action_types.MI:return Object.assign({},state,{backups:action.payload.backups});case action_types.uv:{const backups=state.backups.slice();return backups.push(action.payload.backup),Object.assign({},state,{backups})}case action_types.pA:{const backups=state.backups.filter(x=>x._id!==action.payload.id);return Object.assign({},state,{backups})}case action_types.pV:return Object.assign({},state,{settings:action.payload});case action_types.TH:return Object.assign({},state,{settings:action.payload.settings});case action_types.Qd:{const roles=action.payload.roles;return Object.assign({},state,{roles})}case action_types._R:{const roles=state.roles.slice();return roles.push(action.payload.role),Object.assign({},state,{roles})}case action_types.s_:{const roles=state.roles.filter(x=>x._id!==action.payload.id);return Object.assign({},state,{roles})}case action_types.Py:{const{role}=action.payload,roles=state.roles.map(x=>role._id===x._id?role:x);return Object.assign({},state,{roles})}default:return state}}function badges(state=null,action){switch(action.type){case action_types.Z9:return action.payload.badges;default:return state}}var is_array_lib=__webpack_require__(76266),is_array_lib_default=__webpack_require__.n(is_array_lib),is_regexp_string_lib=__webpack_require__(7492),is_regexp_string_lib_default=__webpack_require__.n(is_regexp_string_lib),regexp_from_string_lib=__webpack_require__(76970),regexp_from_string_lib_default=__webpack_require__.n(regexp_from_string_lib),contains_lib=__webpack_require__(61635),contains_lib_default=__webpack_require__.n(contains_lib);function titleCompare(a,b){return(""+a.title).localeCompare(b.title)}function cohorts(state=null,action){switch(action.type){case action_types.G7:{let cohorts2=action.payload.cohorts;return is_array_lib_default()(cohorts2)?(cohorts2=cohorts2.filter(elem=>{let emailFilter=elem.emailFilter||"";return is_regexp_string_lib_default()(emailFilter)?(emailFilter=regexp_from_string_lib_default()(emailFilter),emailFilter.test(action.payload.user.email)):contains_lib_default()(action.payload.user.email,emailFilter||"")}),cohorts2.sort(titleCompare)):cohorts2}default:return state}}var has_own_property_lib=__webpack_require__(10813),has_own_property_lib_default=__webpack_require__.n(has_own_property_lib);function namespace_titleCompare(a,b){return(""+a.title).localeCompare(b.title)}const namespace_initialState={_id:null,title:"",description:"",owners:"",enableTicketing:!1,announcements:[],lessons:[],cohorts:[],files:[],ownerFiles:[],tickets:[]};function namespace(state=namespace_initialState,action){switch(action.type){case action_types.WF:return Object.assign({},state,{_id:action.payload._id,title:action.payload.title,description:action.payload.description,announcements:action.payload.announcements,enableTicketing:action.payload.enableTicketing,owners:action.payload.owners,cohorts:action.payload.cohorts});case action_types.ke:return namespace_initialState;case action_types.LX:{const{cohort:cohort2,email,lessonID,progress}=action.payload,cohorts2=state.cohorts;for(let i=0;i<cohorts2.length;i++)if(cohorts2[i].title===cohort2){const members=cohorts2[i].members;for(let j=0;j<members.length;j++)if(members[j].email===email){const member=members[j];member.lessonData[lessonID].progress=progress/100;break}break}return Object.assign({},state,{cohorts:cohorts2})}case action_types.qv:return action.payload.namespaceName===state.title?Object.assign({},state,{lessons:action.payload.lessons}):state;case action_types.$L:return Object.assign({},state,{cohorts:action.payload.cohorts.sort(namespace_titleCompare)});case action_types.Nh:{let lessons=state.lessons.slice();return lessons=lessons.filter(x=>x.title!==action.payload.lessonName),Object.assign({},state,{lessons})}case action_types.lo:{let lessons=state.lessons.slice();const{props,lessonName}=action.payload;for(let i=0;i<lessons.length;i++)if(lessons[i].title===lessonName){for(let key in props)has_own_property_lib_default()(props,key)&&(lessons[i][key]=props[key]);break}return Object.assign({},state,{lessons})}case action_types.aM:{let lessons=state.lessons,files=action.payload.files;files=files.map(file=>{file.updatedAt=new Date(file.updatedAt);for(let i=0;i<lessons.length;i++)if(lessons[i]._id===file.lesson){file.lesson=lessons[i];break}return file});const newState={};return action.payload.owner?newState.ownerFiles=files:newState.files=files,Object.assign({},state,newState)}case action_types.wx:{const announcements=state.announcements.slice();for(let i=0;i<announcements.length;i++)announcements[i].createdAt===action.payload.announcement.createdAt&&(announcements[i]=action.payload.announcement);return Object.assign({},state,{announcements})}case action_types.H0:{const announcements=state.announcements.slice();return announcements.unshift(action.payload.announcement),Object.assign({},state,{announcements})}case action_types.wd:{const announcements=state.announcements.slice();return announcements.splice(action.payload.index,1),Object.assign({},state,{announcements})}case action_types.W1:{let tickets=action.payload.tickets;return tickets=tickets.map(x=>(x.createdAt=new Date(x.createdAt),x)),Object.assign({},state,{tickets})}case action_types.wL:{const tickets=state.tickets.map(ticket=>(ticket._id===action.payload.id&&(ticket.done=!1),ticket));return Object.assign({},state,{tickets})}case action_types.mI:{const tickets=state.tickets.map(ticket=>(ticket._id===action.payload.id&&(ticket.done=!0),ticket));return Object.assign({},state,{tickets})}case action_types.B2:{const tickets=state.tickets.map(ticket=>(ticket._id===action.payload.id&&(ticket.priority=action.payload.priority),ticket));return Object.assign({},state,{tickets})}case action_types.JB:{const tickets=state.tickets.map(ticket=>{if(ticket._id===action.payload.id){const message=action.payload.message;message.picture=message.picture.substring(message.picture.lastIndexOf("/")+1),ticket.messages.unshift(message)}return ticket});return Object.assign({},state,{tickets})}case action_types.E7:return namespace_initialState;default:return state}}var notification_defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,notification_getOwnPropSymbols=Object.getOwnPropertySymbols,notification_hasOwnProp=Object.prototype.hasOwnProperty,notification_propIsEnum=Object.prototype.propertyIsEnumerable,notification_defNormalProp=(obj,key,value)=>key in obj?notification_defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value}):obj[key]=value,notification_spreadValues=(a,b)=>{for(var prop in b||(b={}))notification_hasOwnProp.call(b,prop)&&notification_defNormalProp(a,prop,b[prop]);if(notification_getOwnPropSymbols)for(var prop of notification_getOwnPropSymbols(b))notification_propIsEnum.call(b,prop)&&notification_defNormalProp(a,prop,b[prop]);return a},__spreadProps=(a,b)=>__defProps(a,__getOwnPropDescs(b));const notification_initialState={message:"",level:"",position:"tl",children:null,time:null,autoDismiss:5};function notification_namespace(state=notification_initialState,action){switch(action.type){case action_types.Dv:return Object.assign({},notification_initialState,__spreadProps(notification_spreadValues({},action.payload),{time:new Date}));case action_types.xe:return{title:"Error encountered",message:action.payload,level:"error",position:"tl",autoDismiss:5,time:new Date};default:return state}}const translations_initialState={};function translations(state=translations_initialState,action){switch(action.type){case action_types.oi:return Object.assign({},state,action.payload);case action_types.Ki:return Object.assign({},state,action.payload.translations);default:return state}}const settings_initialState={};function settings(state=settings_initialState,action){switch(action.type){case action_types.RJ:return Object.assign({},state,action.payload);case action_types.TH:return Object.assign({},state,action.payload.settings);default:return state}}var server=__webpack_require__(94204);const gallery_initialState={lessons:null};function gallery_namespace(state=gallery_initialState,action){switch(action.type){case action_types.QI:{let lessons=action.payload.lessons;return lessons=lessons.map((lesson,index)=>(lesson.colorIndex=index%20,lesson.url=server.ZP+"/"+lesson.namespace+"/"+lesson.title,lesson.createdAt||(lesson.createdAt=new Date(0).toLocaleString()),lesson.updatedAt||(lesson.updatedAt=lesson.createdAt),lesson)),Object.assign({},state,{lessons})}default:return state}}var lowercase_lib=__webpack_require__(86361),lowercase_lib_default=__webpack_require__.n(lowercase_lib);const search_initialState={phrase:null,type:"sequentially",direction:"ascending"};function search(state=search_initialState,action){switch(action.type){case action_types.X5:return Object.assign({},state,{phrase:lowercase_lib_default()(action.payload.phrase)});case action_types.gH:return Object.assign({},state,{type:action.payload.type});case action_types.i9:return Object.assign({},state,{direction:action.payload.direction});case action_types.E7:return search_initialState;default:return state}}var group_by_lib=__webpack_require__(54529),group_by_lib_default=__webpack_require__.n(group_by_lib),copy_lib=__webpack_require__(58140),copy_lib_default=__webpack_require__.n(copy_lib),user_defProp=Object.defineProperty,user_defProps=Object.defineProperties,user_getOwnPropDescs=Object.getOwnPropertyDescriptors,user_getOwnPropSymbols=Object.getOwnPropertySymbols,user_hasOwnProp=Object.prototype.hasOwnProperty,user_propIsEnum=Object.prototype.propertyIsEnumerable,user_defNormalProp=(obj,key,value)=>key in obj?user_defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value}):obj[key]=value,user_spreadValues=(a,b)=>{for(var prop in b||(b={}))user_hasOwnProp.call(b,prop)&&user_defNormalProp(a,prop,b[prop]);if(user_getOwnPropSymbols)for(var prop of user_getOwnPropSymbols(b))user_propIsEnum.call(b,prop)&&user_defNormalProp(a,prop,b[prop]);return a},user_spreadProps=(a,b)=>user_defProps(a,user_getOwnPropDescs(b));const user_initialState={loggedIn:!1,email:"",verifiedEmail:!1,name:"",organization:"",writeAccess:!1,administrator:!1,enrolledNamespaces:[],ownedNamespaces:[],lessonData:{},picture:null,createdAt:null,updatedAt:null,score:null,spentTime:null,files:null,badges:null,id:null,token:null,tickets:[],licensed:!1,customFields:null,availableCustomFields:[],twoFactorAuth:!1,requestTFA:null,templateLessons:[]};function getNamespace(namespaces,name){for(let i=0;i<namespaces.length;i++)if(namespaces[i].title===name)return namespaces[i];return null}function user(state=user_initialState,action){switch(action.type){case action_types.CJ:return Object.assign({},state,{token:action.payload.token,id:action.payload.id});case action_types.Fw:return Object.assign({},state,{email:action.payload.email,verifiedEmail:action.payload.verifiedEmail,name:action.payload.name,enrolledNamespaces:action.payload.enrolledNamespaces,ownedNamespaces:action.payload.ownedNamespaces,organization:action.payload.organization,writeAccess:action.payload.writeAccess,administrator:action.payload.administrator,picture:action.payload.picture,lessonData:action.payload.lessonData,createdAt:action.payload.createdAt,updatedAt:action.payload.updatedAt,score:action.payload.score,spentTime:action.payload.spentTime,licensed:action.payload.licensed,customFields:action.payload.customFields,availableCustomFields:action.payload.availableCustomFields,twoFactorAuth:action.payload.twoFactorAuth,loggedIn:!0});case action_types.tl:return Object.assign({},state,{writeAccess:!0});case action_types.E7:return user_initialState;case action_types.hO:return Object.assign({},state,{name:action.payload.name,organization:action.payload.organization,customFields:action.payload.customFields});case action_types.bM:return Object.assign({},state,{picture:action.payload.picture});case action_types.$8:{const arr=state.ownedNamespaces.slice();return arr.push(action.payload.namespace),Object.assign({},state,{ownedNamespaces:arr})}case action_types.ke:{const arr=[];for(let i=0;i<state.ownedNamespaces.length;i++){const item=state.ownedNamespaces[i];item._id!==action.payload.id&&arr.push(item)}return Object.assign({},state,{ownedNamespaces:arr})}case action_types.qv:{const arr=state.enrolledNamespaces.slice();for(let i=0;i<arr.length;i++)arr[i].title===action.payload.namespaceName&&(arr[i].lessons=action.payload.lessons);return Object.assign({},state,{enrolledNamespaces:arr})}case action_types.Rg:{const arr=state.ownedNamespaces.slice();for(let i=0;i<arr.length;i++){const item=arr[i];item._id===action.payload._id?arr[i]=action.payload:arr[i]=item}return Object.assign({},state,{ownedNamespaces:arr})}case action_types.Kx:{const arr=state.enrolledNamespaces.slice();return arr.push(action.payload),Object.assign({},state,{enrolledNamespaces:arr})}case action_types.H0:{const namespaceName=action.payload.namespaceName,enrolledNamespaces=copy_lib_default()(state.enrolledNamespaces);let ns=getNamespace(enrolledNamespaces,namespaceName);ns&&ns.announcements.unshift(action.payload.announcement);const ownedNamespaces=copy_lib_default()(state.ownedNamespaces);return ns=getNamespace(ownedNamespaces,namespaceName),ns&&ns.announcements.unshift(action.payload.announcement),Object.assign({},state,{enrolledNamespaces,ownedNamespaces})}case action_types.wx:{const namespaceName=action.payload.namespaceName,announcement=action.payload.announcement,createdAt=announcement.createdAt,enrolledNamespaces=copy_lib_default()(state.enrolledNamespaces);let ns=getNamespace(enrolledNamespaces,namespaceName);if(ns)for(let i=0;i<ns.announcements.length;i++)ns.announcements[i].createdAt===createdAt&&(ns.announcements[i]=announcement);const ownedNamespaces=copy_lib_default()(state.ownedNamespaces);if(ns=getNamespace(ownedNamespaces,namespaceName),ns)for(let i=0;i<ns.announcements.length;i++)ns.announcements[i].createdAt===createdAt&&(ns.announcements[i]=announcement);return Object.assign({},state,{enrolledNamespaces,ownedNamespaces})}case action_types.wd:{const namespaceName=action.payload.namespaceName,enrolledNamespaces=copy_lib_default()(state.enrolledNamespaces);let ns=getNamespace(enrolledNamespaces,namespaceName);ns&&ns.announcements.splice(action.payload.index,1);const ownedNamespaces=copy_lib_default()(state.ownedNamespaces);return ns=getNamespace(ownedNamespaces,namespaceName),ns&&ns.announcements.splice(action.payload.index,1),Object.assign({},state,{enrolledNamespaces,ownedNamespaces})}case action_types.Ze:return Object.assign({},state,{files:group_by_lib_default()(action.payload.files,v=>v.namespace)});case action_types.cv:{let tickets=action.payload.tickets;return tickets=tickets.map(x=>(x.createdAt=new Date(x.createdAt),x)),Object.assign({},state,{tickets})}case action_types.NH:{const tickets=state.tickets.slice();return tickets.push(user_spreadProps(user_spreadValues({},action.payload),{messages:[],user:{picture:state.picture.substring(state.picture.lastIndexOf("/")+1),name:state.name,email:state.email}})),Object.assign({},state,{tickets})}case action_types.wL:{const tickets=state.tickets.map(ticket=>(ticket._id===action.payload.id&&(ticket.done=!1),ticket));return Object.assign({},state,{tickets})}case action_types.mI:{const tickets=state.tickets.map(ticket=>(ticket._id===action.payload.id&&(ticket.done=!0),ticket));return Object.assign({},state,{tickets})}case action_types.JB:{const tickets=state.tickets.map(ticket=>{if(ticket._id===action.payload.id){const message=action.payload.message;message.picture=message.picture.substring(message.picture.lastIndexOf("/")+1),ticket.messages.unshift(message)}return ticket});return Object.assign({},state,{tickets})}case action_types.eu:return Object.assign({},state,{badges:action.payload.badges});case action_types.C3:case action_types.rh:case action_types.S5:return Object.assign({},state,{availableCustomFields:action.payload.customFields});case action_types.CH:{const fields=[];for(let i=0;i<state.availableCustomFields.length;i++){const item=state.availableCustomFields[i];item._id!==action.payload.id&&fields.push(item)}return Object.assign({},state,{availableCustomFields:fields})}case action_types.Hs:{const availableCustomFields=state.availableCustomFields.slice();return availableCustomFields.push(user_spreadValues({},action.payload)),Object.assign({},state,{availableCustomFields})}case action_types.E4:return Object.assign({},state,{twoFactorAuth:action.payload.verified});case action_types.oF:return Object.assign({},state,{twoFactorAuth:!action.payload.disabled});case action_types.Jb:return Object.assign({},state,{requestTFA:{email:action.payload.email,password:action.payload.password}});case action_types.LJ:return Object.assign({},state,{templateLessons:action.payload.templateLessons});default:return state}}var reducers=()=>(0,redux.combineReducers)({admin,badges,cohorts,gallery:gallery_namespace,namespace,notification:notification_namespace,search,settings,translations,user}),prop_types=__webpack_require__(45697),prop_types_default=__webpack_require__.n(prop_types),browser=__webpack_require__(11227),browser_default=__webpack_require__.n(browser),capitalize_lib=__webpack_require__(26867),capitalize_lib_default=__webpack_require__.n(capitalize_lib),axios=__webpack_require__(9669),axios_default=__webpack_require__.n(axios),spinner=__webpack_require__(72885);function usePrevious(value){const ref=(0,react.useRef)();return(0,react.useEffect)(()=>{ref.current=value},[value]),ref.current}var use_previous=usePrevious,use_mount_effect=__webpack_require__(31394),authentication=__webpack_require__(55194),cohort=__webpack_require__(72371),actions_settings=__webpack_require__(90637),actions_user=__webpack_require__(37344),NotificationSystem=__webpack_require__(26656),NotificationSystem_default=__webpack_require__.n(NotificationSystem);const style={NotificationItem:{DefaultStyle:{margin:"20px 2px 2px 1px"},info:{color:"black",backgroundColor:"white",boxShadow:"0 0 4px darkslategray",height:"400px",width:"400px",borderTop:"none"}}};class NotificationContainer extends react.Component{constructor(props){super(props)}componentDidUpdate(prevProps,prevState){const notification2=this.props.notification;prevProps.notification.time!==notification2.time&&this.notificationSystem.addNotification(notification2)}render(){return react.createElement(NotificationSystem_default(),{style,ref:elem=>{this.notificationSystem=elem}})}}NotificationContainer.propTypes={notification:prop_types_default().object.isRequired};function mapStateToProps(state){return{notification:state.notification}}var notification=(0,lib.connect)(mapStateToProps)(NotificationContainer),commonjs=__webpack_require__(81468),i18next=__webpack_require__(41631),OverlayTrigger=__webpack_require__(99201),OverlayTrigger_default=__webpack_require__.n(OverlayTrigger),Tooltip=__webpack_require__(18868),Tooltip_default=__webpack_require__.n(Tooltip),ButtonGroup=__webpack_require__(63319),ButtonGroup_default=__webpack_require__.n(ButtonGroup),Button=__webpack_require__(89876),Button_default=__webpack_require__.n(Button),Modal=__webpack_require__(89194),Modal_default=__webpack_require__.n(Modal),constants_languages=__webpack_require__(25153),__async=(__this,__arguments,generator)=>new Promise((resolve,reject)=>{var fulfilled=value=>{try{step(generator.next(value))}catch(e){reject(e)}},rejected=value=>{try{step(generator.throw(value))}catch(e){reject(e)}},step=x=>x.done?resolve(x.value):Promise.resolve(x.value).then(fulfilled,rejected);step((generator=generator.apply(__this,__arguments)).next())});const SelectModal=({t,languages,onHide})=>{const availableLanguages=languages||constants_languages.PG,changeLanguageFactory=lng=>()=>__async(void 0,null,function*(){onHide(),yield i18next.ZP.changeLanguage(lng)});return react.createElement(Modal_default(),{show:!0,onHide},react.createElement(Modal_default().Header,{closeButton:!0},react.createElement(Modal_default().Title,{as:"h3"},t("choose-language"))),react.createElement(Modal_default().Body,null,react.createElement(ButtonGroup_default(),{size:"sm",vertical:!0,style:{width:"100%"}},availableLanguages.map((x,idx)=>react.createElement(Button_default(),{key:idx,variant:"outline-primary",onClick:changeLanguageFactory(x)},(0,constants_languages.mF)(x))))))},LanguageSwitcher=({languages})=>{const{t}=(0,commonjs.$G)("common"),[showSelectModal,setShowSelectModal]=(0,react.useState)(!1),toggleSelectModal=()=>{setShowSelectModal(!showSelectModal)};return react.createElement(react.Fragment,null,react.createElement(OverlayTrigger_default(),{placement:"left",overlay:react.createElement(Tooltip_default(),{id:"language-switcher"},t("change-language"))},react.createElement(Button_default(),{onClick:toggleSelectModal,className:"language-switcher",variant:"light",size:"sm","aria-label":t("choose-language")},react.createElement("i",{className:"fas fa-globe"}))),showSelectModal?react.createElement(SelectModal,{languages,t,onHide:toggleSelectModal}):null)};LanguageSwitcher.propTypes={languages:prop_types_default().array},LanguageSwitcher.defaultProps={languages:null};var language_switcher=LanguageSwitcher,package_namespaceObject={i8:"0.29.16"};const FooterBar=({settings:settings2})=>{const{t}=(0,commonjs.$G)(["footer_bar","common"]);return react.createElement("div",{className:"footer-bar"},react.createElement("div",{className:"isle-logo"},react.createElement("img",{src:"img/isle_logo.svg",alt:"ISLE Logo"}),react.createElement("div",{className:"footer-bar-copyright"},"\xA9 2016-2021 The ISLE Authors. All rights reserved.")),react.createElement("div",{className:"isle-terms"}," | ",react.createElement(react_router_dom_production_min.Link,{target:"_blank",to:"/terms"},t("terms"))," | ",react.createElement(react_router_dom_production_min.Link,{target:"_blank",to:"/privacy"},t("privacy"))),react.createElement("div",null),react.createElement(language_switcher,{languages:settings2.availableLanguages}),react.createElement("div",{className:"footer-dashboard-version"},"Dashboard v",package_namespaceObject.i8))};FooterBar.propTypes={settings:prop_types_default().object.isRequired};var footer_bar=FooterBar;function visible_footer_bar_mapStateToProps(state){return{settings:state.settings}}var visible_footer_bar=(0,lib.connect)(visible_footer_bar_mapStateToProps)(footer_bar),app_async=(__this,__arguments,generator)=>new Promise((resolve,reject)=>{var fulfilled=value=>{try{step(generator.next(value))}catch(e){reject(e)}},rejected=value=>{try{step(generator.throw(value))}catch(e){reject(e)}},step=x=>x.done?resolve(x.value):Promise.resolve(x.value).then(fulfilled,rejected);step((generator=generator.apply(__this,__arguments)).next())});const AsyncTerms=(0,react.lazy)(()=>__webpack_require__.e(1437).then(__webpack_require__.bind(__webpack_require__,61437))),AsyncPrivacy=(0,react.lazy)(()=>__webpack_require__.e(6021).then(__webpack_require__.bind(__webpack_require__,36021))),AsyncHeaderBar=(0,react.lazy)(()=>Promise.all([__webpack_require__.e(7901),__webpack_require__.e(8313),__webpack_require__.e(1531)]).then(__webpack_require__.bind(__webpack_require__,71531))),AsyncForgotPassword=(0,react.lazy)(()=>Promise.all([__webpack_require__.e(9810),__webpack_require__.e(7383),__webpack_require__.e(8073)]).then(__webpack_require__.bind(__webpack_require__,68073))),AsyncCreateNamespace=(0,react.lazy)(()=>Promise.all([__webpack_require__.e(9810),__webpack_require__.e(7383),__webpack_require__.e(4570),__webpack_require__.e(7583),__webpack_require__.e(8840),__webpack_require__.e(8498),__webpack_require__.e(3257)]).then(__webpack_require__.bind(__webpack_require__,17346))),AsyncEditNamespace=(0,react.lazy)(()=>Promise.all([__webpack_require__.e(9810),__webpack_require__.e(7383),__webpack_require__.e(4570),__webpack_require__.e(7583),__webpack_require__.e(5045),__webpack_require__.e(7901),__webpack_require__.e(8840),__webpack_require__.e(8498),__webpack_require__.e(5812)]).then(__webpack_require__.bind(__webpack_require__,20199))),AsyncNewPassword=(0,react.lazy)(()=>Promise.all([__webpack_require__.e(9810),__webpack_require__.e(7383),__webpack_require__.e(5472),__webpack_require__.e(7390)]).then(__webpack_require__.bind(__webpack_require__,7390))),AsyncCompleteRegistration=(0,react.lazy)(()=>Promise.all([__webpack_require__.e(9810),__webpack_require__.e(7383),__webpack_require__.e(5472),__webpack_require__.e(5757)]).then(__webpack_require__.bind(__webpack_require__,85757))),AsyncConfirmEmail=(0,react.lazy)(()=>Promise.all([__webpack_require__.e(5472),__webpack_require__.e(7278)]).then(__webpack_require__.bind(__webpack_require__,77278))),AsyncAdminPage=(0,react.lazy)(()=>Promise.all([__webpack_require__.e(7901),__webpack_require__.e(8447)]).then(__webpack_require__.bind(__webpack_require__,58447))),AsyncLogin=(0,react.lazy)(()=>Promise.all([__webpack_require__.e(9810),__webpack_require__.e(7383),__webpack_require__.e(128)]).then(__webpack_require__.bind(__webpack_require__,20128))),AsyncLoginTFA=(0,react.lazy)(()=>Promise.all([__webpack_require__.e(9810),__webpack_require__.e(7383),__webpack_require__.e(1417)]).then(__webpack_require__.bind(__webpack_require__,91417))),AsyncSignup=(0,react.lazy)(()=>Promise.all([__webpack_require__.e(9810),__webpack_require__.e(7383),__webpack_require__.e(4570),__webpack_require__.e(7583),__webpack_require__.e(9940)]).then(__webpack_require__.bind(__webpack_require__,79940))),AsyncNamespaceData=(0,react.lazy)(()=>Promise.all([__webpack_require__.e(9810),__webpack_require__.e(7383),__webpack_require__.e(4570),__webpack_require__.e(5206),__webpack_require__.e(7583),__webpack_require__.e(5045),__webpack_require__.e(6596),__webpack_require__.e(4),__webpack_require__.e(9322),__webpack_require__.e(7901),__webpack_require__.e(4816),__webpack_require__.e(8313),__webpack_require__.e(3574),__webpack_require__.e(9397),__webpack_require__.e(6407),__webpack_require__.e(8766)]).then(__webpack_require__.bind(__webpack_require__,37023))),AsyncGallery=(0,react.lazy)(()=>Promise.all([__webpack_require__.e(4570),__webpack_require__.e(7583),__webpack_require__.e(2988),__webpack_require__.e(3822),__webpack_require__.e(7562)]).then(__webpack_require__.bind(__webpack_require__,13016))),AsyncLessonsPage=(0,react.lazy)(()=>Promise.all([__webpack_require__.e(9810),__webpack_require__.e(7383),__webpack_require__.e(2988),__webpack_require__.e(3574),__webpack_require__.e(4863),__webpack_require__.e(1974)]).then(__webpack_require__.bind(__webpack_require__,45717))),AsyncProfilePage=(0,react.lazy)(()=>Promise.all([__webpack_require__.e(9810),__webpack_require__.e(7383),__webpack_require__.e(4570),__webpack_require__.e(7583),__webpack_require__.e(7901),__webpack_require__.e(2998),__webpack_require__.e(9397),__webpack_require__.e(856)]).then(__webpack_require__.bind(__webpack_require__,52443))),AsyncEnrollPage=(0,react.lazy)(()=>Promise.all([__webpack_require__.e(9810),__webpack_require__.e(2988),__webpack_require__.e(2014)]).then(__webpack_require__.bind(__webpack_require__,32014))),USER_STORAGE_ID="ISLE_USER_"+server.ZP,RE_PUBLIC_PAGES=/(?:new-password|complete-registration|confirm-email|signup|login|login-tfa|terms|privacy)/,debug=browser_default()("isle-dashboard"),RE_LEADING_PART=/^[\s\S]*\//,RE_HYPHEN=/-([a-z])/,Title=()=>{const{pathname}=(0,react_router_dom_production_min.useLocation)();let title;return pathname?(title=pathname.replace(RE_LEADING_PART,""),title=title.replace(RE_HYPHEN,replacer),title=capitalize_lib_default()(title)):title="Login",title=`${title} | ISLE Dashboard`,react.createElement(react_helmet_async_lib.ql,null,react.createElement("title",null,title));function replacer(match,p1){return" "+p1.toUpperCase()}};function goToDestination(search2,writeAccess,navigate){let url=new URLSearchParams(search2).get("url");url||(url=writeAccess?"/dashboard/lessons":"/dashboard/profile"),url.indexOf("dashboard")!==-1?(url=url.replace(/\/dashboard/,""),debug("Redirecting to dashboard page: %s",url),navigate(url)):(debug("Destination is not a dashboard URL: %s",url),window.location=server.ZP+url)}const App=({isLoggedIn,dispatch,getCustomTranslations,getPublicSettings,fetchCredentials,getEnrollableCohorts,user:user2,settings:settings2})=>{const oldIsLoggedIn=use_previous(isLoggedIn),writeAccess=user2.writeAccess,navigate=(0,react_router_dom_production_min.useNavigate)(),{pathname,search:search2}=(0,react_router_dom_production_min.useLocation)();(0,use_mount_effect.Z)(()=>app_async(void 0,null,function*(){if(getCustomTranslations(),getPublicSettings(),!isLoggedIn&&!RE_PUBLIC_PAGES.test(pathname)){let isle=localStorage.getItem(USER_STORAGE_ID);if(isle){isle=JSON.parse(isle);const user22=yield fetchCredentials(isle);user22&&getEnrollableCohorts(user22)}else try{const res=yield axios_default().get(server.ZP+"/saml-xmw/session");dispatch((0,actions_user.zu)(res.data));const user22=yield fetchCredentials(res.data);user22&&getEnrollableCohorts(user22)}catch(err){navigate("/login")}}isLoggedIn&&(debug("User is logged in, check local storage..."),localStorage.getItem(USER_STORAGE_ID)||(debug("User is logged in, but no local storage found -> write to local storage"),localStorage.setItem(USER_STORAGE_ID,JSON.stringify({token:user2.token,id:user2.id}))))})),(0,react.useEffect)(()=>{!oldIsLoggedIn&&isLoggedIn?pathname==="/login-tfa"?goToDestination(search2,writeAccess,navigate):pathname&&pathname!=="/"&&pathname!=="/login"?(debug("User has logged in, redirecting to: "+pathname),navigate(pathname)):(debug("User has logged in, redirecting..."),axios_default().post(server.ZP+"/ensure_session").then(res=>{goToDestination(search2,writeAccess,navigate)}).catch(err=>{debug("Encountered an error while ensuring session: "+err.message)})):oldIsLoggedIn&&!isLoggedIn?navigate("/login"):isLoggedIn&&pathname&&(pathname==="/"||pathname==="/login"||pathname==="/login-tfa")&&(debug("User is logged in, check for redirect..."),axios_default().post(server.ZP+"/ensure_session").then(res=>{goToDestination(search2,writeAccess,navigate)}).catch(err=>{debug("Encountered an error while ensuring session: "+err.message)}))},[isLoggedIn,pathname,search2,navigate,oldIsLoggedIn,writeAccess]);let AuthenticationBarrier=null;return isLoggedIn&&(AuthenticationBarrier=react.createElement(react.Fragment,null,RE_PUBLIC_PAGES.test(pathname)?null:react.createElement(react.Suspense,{fallback:react.createElement(spinner.Z,null)},react.createElement(AsyncHeaderBar,null)),react.createElement(react_router_dom_production_min.Routes,null,react.createElement(react_router_dom_production_min.Route,{path:"/create-namespace",element:react.createElement(react.Suspense,{fallback:react.createElement(spinner.Z,null)},react.createElement(AsyncCreateNamespace,null))}),react.createElement(react_router_dom_production_min.Route,{path:"/edit-namespace/:namespace",element:react.createElement(react.Suspense,{fallback:react.createElement(spinner.Z,null)},react.createElement(AsyncEditNamespace,null))}),react.createElement(react_router_dom_production_min.Route,{path:"/namespace-data/:namespace/*",element:react.createElement(react.Suspense,{fallback:react.createElement(spinner.Z,null)},react.createElement(AsyncNamespaceData,null))}),react.createElement(react_router_dom_production_min.Route,{path:"/profile",element:react.createElement(react.Suspense,{fallback:react.createElement(spinner.Z,null)},react.createElement(AsyncProfilePage,null))}),react.createElement(react_router_dom_production_min.Route,{index:!0,path:"/lessons",element:react.createElement(react.Suspense,{fallback:react.createElement(spinner.Z,null)},react.createElement(AsyncLessonsPage,null))}),react.createElement(react_router_dom_production_min.Route,{path:"/lessons/:namespace",element:react.createElement(react.Suspense,{fallback:react.createElement(spinner.Z,null)},react.createElement(AsyncLessonsPage,null))}),react.createElement(react_router_dom_production_min.Route,{path:"/gallery",element:react.createElement(react.Suspense,{fallback:react.createElement(spinner.Z,null)},react.createElement(AsyncGallery,null))}),react.createElement(react_router_dom_production_min.Route,{path:"/enroll",element:react.createElement(react.Suspense,{fallback:react.createElement(spinner.Z,null)},react.createElement(AsyncEnrollPage,null))}),react.createElement(react_router_dom_production_min.Route,{path:"/admin/*",element:react.createElement(react.Suspense,{fallback:react.createElement(spinner.Z,null)},react.createElement(AsyncAdminPage,null))})))),react.createElement("div",{className:"App"},react.createElement(Title,null),AuthenticationBarrier,react.createElement(react_router_dom_production_min.Routes,null,react.createElement(react_router_dom_production_min.Route,{index:!0,path:"/",element:react.createElement(react.Suspense,{fallback:react.createElement(spinner.Z,null)},react.createElement(AsyncLogin,null))}),react.createElement(react_router_dom_production_min.Route,{path:"/login",element:react.createElement(react.Suspense,{fallback:react.createElement(spinner.Z,null)},react.createElement(AsyncLogin,null))}),react.createElement(react_router_dom_production_min.Route,{path:"/login-tfa",element:react.createElement(react.Suspense,{fallback:react.createElement(spinner.Z,null)},react.createElement(AsyncLoginTFA,null))}),react.createElement(react_router_dom_production_min.Route,{path:"/new-password",element:react.createElement(react.Suspense,{fallback:react.createElement(spinner.Z,null)},react.createElement(AsyncNewPassword,null))}),react.createElement(react_router_dom_production_min.Route,{path:"/complete-registration",element:react.createElement(react.Suspense,{fallback:react.createElement(spinner.Z,null)},react.createElement(AsyncCompleteRegistration,null))}),react.createElement(react_router_dom_production_min.Route,{path:"/confirm-email",element:react.createElement(react.Suspense,{fallback:react.createElement(spinner.Z,null)},react.createElement(AsyncConfirmEmail,null))}),settings2.allowUserRegistrations?react.createElement(react_router_dom_production_min.Route,{path:"/signup",element:react.createElement(react.Suspense,{fallback:react.createElement(spinner.Z,null)},react.createElement(AsyncSignup,null))}):null,react.createElement(react_router_dom_production_min.Route,{path:"/forgot-password",element:react.createElement(react.Suspense,{fallback:react.createElement(spinner.Z,null)},react.createElement(AsyncForgotPassword,null))}),react.createElement(react_router_dom_production_min.Route,{path:"/terms",element:react.createElement(react.Suspense,{fallback:react.createElement(spinner.Z,null)},react.createElement(AsyncTerms,null))}),react.createElement(react_router_dom_production_min.Route,{path:"/privacy",element:react.createElement(react.Suspense,{fallback:react.createElement(spinner.Z,null)},react.createElement(AsyncPrivacy,null))})),react.createElement(visible_footer_bar,null),react.createElement(notification,null))};App.propTypes={dispatch:prop_types_default().func.isRequired,fetchCredentials:prop_types_default().func.isRequired,getCustomTranslations:prop_types_default().func.isRequired,getEnrollableCohorts:prop_types_default().func.isRequired,getPublicSettings:prop_types_default().func.isRequired,isLoggedIn:prop_types_default().bool.isRequired,settings:prop_types_default().object.isRequired,user:prop_types_default().object.isRequired};var app=(0,lib.connect)(app_mapStateToProps,mapDispatchToProps)(App);function app_mapStateToProps(state){return{isLoggedIn:state.user.loggedIn,user:state.user,settings:state.settings}}function mapDispatchToProps(dispatch){return{dispatch,fetchCredentials:(0,authentication.GI)(dispatch),getCustomTranslations:(0,actions_settings.XE)(dispatch),getPublicSettings:(0,actions_settings.SK)(dispatch),getEnrollableCohorts:(0,cohort.R9)(dispatch)}}const isLocalhost=Boolean(window.location.hostname==="localhost"||window.location.hostname==="[::1]"||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function register(config){"serviceWorker"in navigator&&window.addEventListener("load",()=>{const swUrl=`${window.location.origin}/dashboard/service-worker.js`;isLocalhost?(checkValidServiceWorker(swUrl,config),navigator.serviceWorker.ready.then(()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):registerValidSW(swUrl,config)})}function registerValidSW(swUrl,config){navigator.serviceWorker.register(swUrl).then(registration=>{registration.onupdatefound=()=>{const installingWorker=registration.installing;installingWorker!==null&&(installingWorker.onstatechange=()=>{installingWorker.state==="installed"&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),config&&config.onUpdate&&config.onUpdate(registration)):(console.log("Content is cached for offline use."),config&&config.onSuccess&&config.onSuccess(registration)))})}}).catch(error=>{console.error("Error during service worker registration:",error)})}function checkValidServiceWorker(swUrl,config){fetch(swUrl,{headers:{"Service-Worker":"script"}}).then(response=>{const contentType=response.headers.get("content-type");response.status===404||contentType!==null&&contentType.indexOf("javascript")===-1?navigator.serviceWorker.ready.then(registration=>{registration.unregister().then(()=>{window.location.reload()})}):registerValidSW(swUrl,config)}).catch(()=>{console.log("No internet connection found. App is running in offline mode.")})}function unregister(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(registration=>{registration.unregister()})}var helpers_axios=__webpack_require__(9908);const persistConfig={key:"root",blacklist:["router","license","requestTFA"],storage:localforage_default()},rootReducer=reducers(history),persistedReducer=(0,redux_persist_lib.persistReducer)(persistConfig,rootReducer),store=(0,redux.createStore)(persistedReducer),persistor=(0,redux_persist_lib.persistStore)(store);react_dom.render(react.createElement(lib.Provider,{store},react.createElement(integration_react.r,{loading:null,persistor},react.createElement(react_helmet_async_lib.B6,null,react.createElement(react_router_dom_production_min.BrowserRouter,{basename:"/dashboard"},react.createElement(app,null))))),document.getElementById("root")),register()},24654:function(){}},function(__webpack_require__){var __webpack_exec__=function(moduleId){return __webpack_require__(__webpack_require__.s=moduleId)};__webpack_require__.O(0,[9412],function(){return __webpack_exec__(39572)});var __webpack_exports__=__webpack_require__.O()}]);

//# sourceMappingURL=main.c67f8df2.js.map