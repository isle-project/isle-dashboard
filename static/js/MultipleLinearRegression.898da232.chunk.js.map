{"version":3,"sources":["../node_modules/ml-matrix/src/pseudoInverse.js","../node_modules/ml-regression-multivariate-linear/src/index.js","../node_modules/@isle-project/components/models/multiple-linear-regression/main.js","../node_modules/@isle-project/utils/subtract/index.js","../node_modules/ml-matrix/src/dc/svd.js","../node_modules/ml-matrix/src/dc/util.js","../node_modules/ml-matrix/src/wrap/WrapperMatrix2D.js"],"names":["pseudoInverse","matrix","threshold","arguments","length","undefined","Number","EPSILON","isEmpty","transpose","svdSolution","autoTranspose","U","leftSingularVectors","V","rightSingularVectors","s","diagonal","i","Math","abs","mmul","MultivariateLinearRegression","x","y","_this","this","options","_options$intercept","intercept","_options$statistics","statistics","weights","inputs","outputs","addColumn","Array","rows","fill","xt","xx","xy","invxx","inverse","beta","to2DArray","columns","fittedValues","residuals","clone","addM","neg","variance","map","ri","pow","reduce","a","b","stdError","sqrt","stdErrorMatrix","mul","stdErrors","d","tStats","key","value","isArray","_predict","_y","_i","setRow","getRow","TypeError","result","_i2","j","Error","_this2","name","summary","regressionStatistics","standardError","observations","variables","label","concat","coefficients","tStat","model","COUNTER","isMissing","isnan","isUndefinedOrNull","isNonMissingNumber","isNumber","designMatrix","data","quantitative","predictors","hash","nobs","values","contains","push","categories","extractCategoriesFromValues","k","row","val","yvalues","designMatrixMissing","missing","fitModel","omitMissing","out","MLR","yhat","predict","v","avgFitted","mean","mss","resid","subtract","rss","p","rSquared","adjRSquared","fScore","_","MultipleLinearRegression","props","t","qqPlot","draggable","editable","fit","generateQQPlotConfig","state","meta","type","residualPlot","mode","layout","xaxis","title","yaxis","onDiagnostics","onPredict","style","overflowX","width","className","counter","cdf","tCDF","bordered","size","toFixed","idx","summaryTable","round","fCDF","placement","tooltip","Button","variant","onClick","handlePredict","marginLeft","handleDiagnostics","Alert","nextProps","prevState","Component","defaultProps","withTranslation","withPropCheck","arr","isArr","isArrayLike","len","SingularValueDecomposition","m","n","_options$computeLeftS","computeLeftSingularVectors","_options$computeRight","computeRightSingularVectors","_options$autoTranspos","wantu","Boolean","wantv","swapped","aux","console","warn","nu","min","ni","Float64Array","e","work","si","nct","nrt","max","mrc","get","set","_i3","_i4","_i5","_i6","_i7","_i8","_i9","_j","_j2","_t","_i10","_i11","_j3","_i12","_k","_j4","_t2","_i13","_i14","_i15","_i16","_i17","_k2","_j5","_t3","_i18","_i19","_i20","pp","eps","_k3","kase","alpha","MIN_VALUE","isNaN","ks","_t4","f","_j6","_t5","cs","sn","_i21","_f","_j7","_t6","_cs","_sn","_i22","scale","sp","spm1","epm1","sk","ek","c","shift","_f2","g","_j8","_t7","_cs2","_sn2","_i23","_i24","_i25","_t8","_i26","_i27","tmp","Y","scols","Ls","VL","vrows","urows","VLU","_i28","sum","solve","vcols","X","ucols","_i29","_j9","tol","r","ii","from","hypotenuse","WrapperMatrix2D","_AbstractMatrix","_super","call","rowIndex","columnIndex"],"mappings":"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","file":"static/js/MultipleLinearRegression.898da232.chunk.js","sourcesContent":["import SVD from './dc/svd';\nimport Matrix from './matrix';\nexport function pseudoInverse(matrix) {\n  var threshold = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Number.EPSILON;\n  matrix = Matrix.checkMatrix(matrix);\n\n  if (matrix.isEmpty()) {\n    // with a zero dimension, the pseudo-inverse is the transpose, since all 0xn and nx0 matrices are singular\n    // (0xn)*(nx0)*(0xn) = 0xn\n    // (nx0)*(0xn)*(nx0) = nx0\n    return matrix.transpose();\n  }\n\n  var svdSolution = new SVD(matrix, {\n    autoTranspose: true\n  });\n  var U = svdSolution.leftSingularVectors;\n  var V = svdSolution.rightSingularVectors;\n  var s = svdSolution.diagonal;\n\n  for (var i = 0; i < s.length; i++) {\n    if (Math.abs(s[i]) > threshold) {\n      s[i] = 1.0 / s[i];\n    } else {\n      s[i] = 0.0;\n    }\n  }\n\n  return V.mmul(Matrix.diag(s).mmul(U.transpose()));\n}","import _classCallCheck from \"/home/philipp/git/cmu-isle/isle-dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/philipp/git/cmu-isle/isle-dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport Matrix, { SVD, pseudoInverse } from 'ml-matrix';\n\nvar MultivariateLinearRegression = /*#__PURE__*/function () {\n  function MultivariateLinearRegression(x, y) {\n    var _this = this;\n\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n    _classCallCheck(this, MultivariateLinearRegression);\n\n    var _options$intercept = options.intercept,\n        intercept = _options$intercept === void 0 ? true : _options$intercept,\n        _options$statistics = options.statistics,\n        statistics = _options$statistics === void 0 ? true : _options$statistics;\n    this.statistics = statistics;\n\n    if (x === true) {\n      this.weights = y.weights;\n      this.inputs = y.inputs;\n      this.outputs = y.outputs;\n      this.intercept = y.intercept;\n    } else {\n      x = new Matrix(x);\n      y = new Matrix(y);\n\n      if (intercept) {\n        x.addColumn(new Array(x.rows).fill(1));\n      }\n\n      var xt = x.transpose();\n      var xx = xt.mmul(x);\n      var xy = xt.mmul(y);\n      var invxx = new SVD(xx).inverse();\n      var beta = xy.transpose().mmul(invxx).transpose();\n      this.weights = beta.to2DArray();\n      this.inputs = x.columns;\n      this.outputs = y.columns;\n      if (intercept) this.inputs--;\n      this.intercept = intercept;\n\n      if (statistics) {\n        /*\n         * Let's add some basic statistics about the beta's to be able to interpret them.\n         * source: http://dept.stat.lsa.umich.edu/~kshedden/Courses/Stat401/Notes/401-multreg.pdf\n         * validated against Excel Regression AddIn\n         * test: \"datamining statistics test\"\n         */\n        var fittedValues = x.mmul(beta);\n        var residuals = y.clone().addM(fittedValues.neg());\n        var variance = residuals.to2DArray().map(function (ri) {\n          return Math.pow(ri[0], 2);\n        }).reduce(function (a, b) {\n          return a + b;\n        }) / (y.rows - x.columns);\n        this.stdError = Math.sqrt(variance);\n        this.stdErrorMatrix = pseudoInverse(xx).mul(variance);\n        this.stdErrors = this.stdErrorMatrix.diagonal().map(function (d) {\n          return Math.sqrt(d);\n        });\n        this.tStats = this.weights.map(function (d, i) {\n          return _this.stdErrors[i] === 0 ? 0 : d[0] / _this.stdErrors[i];\n        });\n      }\n    }\n  }\n\n  _createClass(MultivariateLinearRegression, [{\n    key: \"predict\",\n    value: function predict(x) {\n      if (Array.isArray(x)) {\n        if (typeof x[0] === 'number') {\n          return this._predict(x);\n        } else if (Array.isArray(x[0])) {\n          var y = new Array(x.length);\n\n          for (var i = 0; i < x.length; i++) {\n            y[i] = this._predict(x[i]);\n          }\n\n          return y;\n        }\n      } else if (Matrix.isMatrix(x)) {\n        var _y = new Matrix(x.rows, this.outputs);\n\n        for (var _i = 0; _i < x.rows; _i++) {\n          _y.setRow(_i, this._predict(x.getRow(_i)));\n        }\n\n        return _y;\n      }\n\n      throw new TypeError('x must be a matrix or array of numbers');\n    }\n  }, {\n    key: \"_predict\",\n    value: function _predict(x) {\n      var result = new Array(this.outputs);\n\n      if (this.intercept) {\n        for (var i = 0; i < this.outputs; i++) {\n          result[i] = this.weights[this.inputs][i];\n        }\n      } else {\n        result.fill(0);\n      }\n\n      for (var _i2 = 0; _i2 < this.inputs; _i2++) {\n        for (var j = 0; j < this.outputs; j++) {\n          result[j] += this.weights[_i2][j] * x[_i2];\n        }\n      }\n\n      return result;\n    }\n  }, {\n    key: \"score\",\n    value: function score() {\n      throw new Error('score method is not implemented yet');\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON() {\n      var _this2 = this;\n\n      return {\n        name: 'multivariateLinearRegression',\n        weights: this.weights,\n        inputs: this.inputs,\n        outputs: this.outputs,\n        intercept: this.intercept,\n        summary: this.statistics ? {\n          regressionStatistics: {\n            standardError: this.stdError,\n            observations: this.outputs\n          },\n          variables: this.weights.map(function (d, i) {\n            return {\n              label: i === _this2.weights.length - 1 ? 'Intercept' : \"X Variable \".concat(i + 1),\n              coefficients: d,\n              standardError: _this2.stdErrors[i],\n              tStat: _this2.tStats[i]\n            };\n          })\n        } : undefined\n      };\n    }\n  }], [{\n    key: \"load\",\n    value: function load(model) {\n      if (model.name !== 'multivariateLinearRegression') {\n        throw new Error('not a MLR model');\n      }\n\n      return new MultivariateLinearRegression(true, model);\n    }\n  }]);\n\n  return MultivariateLinearRegression;\n}();\n\nexport { MultivariateLinearRegression as default };","// MODULES //\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { withTranslation } from 'react-i18next';\nimport MLR from 'ml-regression-multivariate-linear';\nimport Alert from 'react-bootstrap/Alert';\nimport Button from 'react-bootstrap/Button';\nimport pow from '@stdlib/math/base/special/pow';\nimport round from '@stdlib/math/base/special/round';\nimport fCDF from '@stdlib/stats/base/dists/f/cdf';\nimport contains from '@stdlib/assert/contains';\nimport isArray from '@stdlib/assert/is-array';\nimport { isPrimitive as isNumber } from '@stdlib/assert/is-number';\nimport isUndefinedOrNull from '@stdlib/assert/is-undefined-or-null';\nimport isnan from '@stdlib/assert/is-nan';\nimport abs from '@stdlib/math/base/special/abs';\nimport tCDF from '@stdlib/stats/base/dists/t/cdf';\nimport Table from '@isle-project/components/table';\nimport Tooltip from '@isle-project/components/tooltip';\nimport Plotly from '@isle-project/components/plotly';\nimport { generateQQPlotConfig } from '@isle-project/components/plots/qqplot';\nimport subtract from '@isle-project/utils/subtract';\nimport mean from '@isle-project/utils/statistic/mean';\nimport extractCategoriesFromValues from '@isle-project/utils/extract-categories-from-values';\nimport { withPropCheck } from '@isle-project/utils/prop-check';\nimport { Factor } from '@isle-project/utils/factor-variable';\n\n\n// VARIABLES //\n\nlet COUNTER = 0;\nconst TSTAT = 't';\nconst DF = 'df';\nconst R2 = 'RÂ²:';\n\n\n// FUNCTIONS //\n\nfunction isMissing( x ) {\n\treturn isnan( x ) || isUndefinedOrNull( x );\n}\n\nfunction isNonMissingNumber( x ) {\n\treturn isNumber( x ) && !isnan( x );\n}\n\nfunction designMatrix( x, y, data, quantitative, intercept ) {\n\tif ( !isArray( x ) ) {\n\t\tx = [ x ];\n\t}\n\tconst matrix = [];\n\tconst predictors = [];\n\tconst hash = {};\n\tconst nobs = data[ x[ 0 ] ].length;\n\tfor ( let j = 0; j < x.length; j++ ) {\n\t\tconst values = data[ x[ j ] ];\n\t\tif ( contains( quantitative, x[ j ] ) ) {\n\t\t\tpredictors.push( x[ j ] );\n\t\t} else {\n\t\t\tconst categories = extractCategoriesFromValues( values, x[ j ] );\n\t\t\tfor ( let k = intercept ? 1 : 0; k < categories.length; k++ ) {\n\t\t\t\tpredictors.push( `${x[ j ]}_${categories[ k ]}` );\n\t\t\t}\n\t\t\thash[ x[ j ] ] = categories;\n\t\t}\n\t}\n\tfor ( let i = 0; i < nobs; i++ ) {\n\t\tconst row = [];\n\t\tfor ( let j = 0; j < x.length; j++ ) {\n\t\t\tconst values = data[ x[ j ] ];\n\t\t\tif ( contains( quantitative, x[ j ] ) ) {\n\t\t\t\trow.push( values[ i ] );\n\t\t\t} else {\n\t\t\t\tconst categories = hash[ x[ j ] ];\n\t\t\t\tconst val = values[ i ];\n\t\t\t\tfor ( let k = intercept ? 1 : 0; k < categories.length; k++ ) {\n\t\t\t\t\trow.push( ( val === categories[ k ] ) ? 1 : 0 );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tmatrix.push( row );\n\t}\n\tconst yvalues = data[ y ].map( x => [ x ]);\n\treturn { matrix, predictors, yvalues, nobs };\n}\n\nfunction designMatrixMissing( x, y, data, quantitative, intercept ) {\n\tif ( !isArray( x ) ) {\n\t\tx = [ x ];\n\t}\n\tconst matrix = [];\n\tconst predictors = [];\n\tconst hash = {};\n\tconst yvalues = [];\n\tfor ( let j = 0; j < x.length; j++ ) {\n\t\tconst values = data[ x[ j ] ];\n\t\tif ( contains( quantitative, x[ j ] ) ) {\n\t\t\tpredictors.push( x[ j ] );\n\t\t} else {\n\t\t\tconst categories = extractCategoriesFromValues( values, x[ j ] );\n\t\t\tfor ( let k = intercept ? 1 : 0; k < categories.length; k++ ) {\n\t\t\t\tpredictors.push( `${x[ j ]}_${categories[ k ]}` );\n\t\t\t}\n\t\t\thash[ x[ j ] ] = categories;\n\t\t}\n\t}\n\tfor ( let i = 0; i < data[ x[ 0 ] ].length; i++ ) {\n\t\tconst row = [];\n\t\tlet missing = false;\n\t\tfor ( let j = 0; j < x.length; j++ ) {\n\t\t\tconst values = data[ x[ j ] ];\n\t\t\tif ( contains( quantitative, x[ j ] ) ) {\n\t\t\t\tif ( isNonMissingNumber( values[ i ] ) ) {\n\t\t\t\t\trow.push( values[ i ] );\n\t\t\t\t} else {\n\t\t\t\t\tmissing = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst val = values[ i ];\n\t\t\t\tif ( isMissing( val ) ) {\n\t\t\t\t\tmissing = true;\n\t\t\t\t\tbreak;\n\t\t\t\t} else {\n\t\t\t\t\tconst categories = hash[ x[ j ] ];\n\t\t\t\t\tfor ( let k = intercept ? 1 : 0; k < categories.length; k++ ) {\n\t\t\t\t\t\trow.push( ( val === categories[ k ] ) ? 1 : 0 );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif ( !missing ) {\n\t\t\tmatrix.push( row );\n\t\t\tyvalues.push( [ data[ y ][ i ] ] );\n\t\t}\n\t}\n\tconst nobs = yvalues.length;\n\treturn { matrix, predictors, yvalues, nobs };\n}\n\nconst summaryTable = ( y, x, nobs, result, t ) => {\n\tconst cdf = tCDF.factory( nobs - x.length - 1 );\n\treturn (\n\t\t<Table bordered size=\"sm\">\n\t\t\t<thead>\n\t\t\t\t<tr>\n\t\t\t\t\t<th>{t('predictor')}</th>\n\t\t\t\t\t<th>{t('coefficient')}</th>\n\t\t\t\t\t<th>{t('std-error')}</th>\n\t\t\t\t\t<th>{TSTAT}</th>\n\t\t\t\t\t<th>{t('p-value')}</th>\n\t\t\t\t</tr>\n\t\t\t</thead>\n\t\t\t<tbody>\n\t\t\t\t{ result.intercept ? <tr>\n\t\t\t\t\t<th>{t('intercept')}</th>\n\t\t\t\t\t<td>{result.weights[ x.length ][ 0 ].toFixed( 6 )}</td>\n\t\t\t\t\t<td>{result.stdErrors[ x.length ].toFixed( 4 )}</td>\n\t\t\t\t\t<td>{result.tStats[ x.length ].toFixed( 4 )}</td>\n\t\t\t\t\t<td>{2.0 * (1.0-cdf( abs( result.tStats[ x.length ] ) ) ).toFixed( 4 )}</td>\n\t\t\t\t</tr> : null }\n\t\t\t\t{x.map( ( name, idx ) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<tr key={idx} >\n\t\t\t\t\t\t\t<th>{name}</th>\n\t\t\t\t\t\t\t<td>{result.weights[ idx ][ 0 ].toFixed( 6 )}</td>\n\t\t\t\t\t\t\t<td>{result.stdErrors[ idx ].toFixed( 4 )}</td>\n\t\t\t\t\t\t\t<td>{result.tStats[ idx ].toFixed( 4 )}</td>\n\t\t\t\t\t\t\t<td>{2.0 * (1.0-cdf( abs( result.tStats[ idx ] ) ) ).toFixed( 4 )}</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</tbody>\n\t\t</Table>\n\t);\n};\n\nconst fitModel = ({ x, y, intercept, omitMissing, data, quantitative }) => {\n\tconst out = {};\n\ttry {\n\t\tconst dMatrix = omitMissing ? designMatrixMissing : designMatrix;\n\t\tconst { matrix, predictors, yvalues, nobs } = dMatrix( x, y, data, quantitative, intercept );\n\t\tout.result = new MLR( matrix, yvalues, {\n\t\t\tintercept\n\t\t});\n\t\tconst yhat = out.result.predict( matrix ).map( v => v[ 0 ] );\n\t\tout.yhat = yhat;\n\t\tconst avgFitted = mean( yhat );\n\t\tlet mss = 0;\n\t\tfor ( let i = 0; i < yhat.length; i++ ) {\n\t\t\tmss += pow( yhat[ i ] - avgFitted, 2 );\n\t\t}\n\t\tconst resid = subtract( yvalues, yhat );\n\t\tlet rss = 0;\n\t\tfor ( let i = 0; i < resid.length; i++ ) {\n\t\t\trss += pow( resid[ i ], 2 );\n\t\t}\n\t\tconst p = predictors.length;\n\t\tout.resid = resid;\n\t\tout.rSquared = mss / ( mss + rss );\n\t\tout.adjRSquared = 1 - ( 1 - out.rSquared ) * ( nobs - 1 ) / ( nobs - p - 1 );\n\t\tout.fScore = ( mss / p ) / ( rss / ( nobs - p - 1 ) );\n\t\tout.p = p;\n\t\tout.nobs = nobs;\n\t\tout.predictors = predictors;\n\t\treturn out;\n\t} catch ( _ ) {\n\t\treturn out;\n\t}\n};\n\n\n// MAIN //\n\n/**\n* Multiple linear regression.\n*\n* @property {Object} data - object of value arrays\n* @property {string} y - outcome variable\n* @property {Array<string>} x - one or more predictor variables\n* @property {(string|Factor|Array<(string|Factor)>)} quantitative - array of variables in `data` that are `quantitative`\n* @property {boolean} omitMissing - controls whether to omit missing values\n* @property {boolean} intercept - controls whether to fit a model with an intercept term\n* @property {Function} onDiagnostics - callback invoked with diagnostic plots\n* @property {Function} onPredict - callback invoked with predictions and residuals after model fitting\n*/\nclass MultipleLinearRegression extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tCOUNTER += 1;\n\t\tconst { x, y, intercept, omitMissing, data, quantitative } = props;\n\t\tthis.state = {\n\t\t\t...fitModel({ x, y, intercept, omitMissing, data, quantitative }),\n\t\t\t...props\n\t\t};\n\t}\n\n\tstatic getDerivedStateFromProps( nextProps, prevState ) {\n\t\tif (\n\t\t\tnextProps.data !== prevState.data ||\n\t\t\tnextProps.quantitative !== prevState.quantitative ||\n\t\t\tnextProps.x !== prevState.x ||\n\t\t\tnextProps.y !== prevState.y ||\n\t\t\tnextProps.omitMissing !== prevState.omitMissing ||\n\t\t\tnextProps.intercept !== prevState.intercept\n\t\t) {\n\t\t\tconst { x, y, intercept, omitMissing, data, quantitative } = nextProps;\n\t\t\tconst newState = {\n\t\t\t\t...fitModel({ x, y, intercept, omitMissing, data, quantitative }),\n\t\t\t\t...nextProps\n\t\t\t};\n\t\t\treturn newState;\n\t\t}\n\t\treturn null;\n\t}\n\n\thandleDiagnostics = () => {\n\t\tconst { x, y, intercept, t } = this.props;\n\t\tconst qqPlot = <Plotly\n\t\t\tdraggable\n\t\t\teditable fit\n\t\t\t{...generateQQPlotConfig( this.state.resid, 'residuals' )}\n\t\t\tmeta={{ type: 'qqplot of regression residuals', x, y, intercept }}\n\t\t/>;\n\t\tconst residualPlot = <Plotly\n\t\t\tdraggable editable fit\n\t\t\tdata={[\n\t\t\t\t{\n\t\t\t\t\tx: this.state.yhat,\n\t\t\t\t\ty: this.state.resid,\n\t\t\t\t\tmode: 'markers',\n\t\t\t\t\ttype: this.state.yhat.length > 2000 ? 'scattergl' : 'scatter'\n\t\t\t\t}\n\t\t\t]}\n\t\t\tlayout={{\n\t\t\t\txaxis: {\n\t\t\t\t\ttitle: t('fitted-values')\n\t\t\t\t},\n\t\t\t\tyaxis: {\n\t\t\t\t\ttitle: t('residuals')\n\t\t\t\t},\n\t\t\t\ttitle: t('residuals-vs-fitted')\n\t\t\t}}\n\t\t\tmeta={{ type: 'regression residuals vs. fitted', x, y, intercept }}\n\t\t/>;\n\t\tthis.props.onDiagnostics([ qqPlot, residualPlot ]);\n\t}\n\n\thandlePredict = () => {\n\t\tconst { data, quantitative, intercept } = this.props;\n\t\tlet { x, y } = this.props;\n\t\tconst { matrix } = designMatrix( x, y, data, quantitative, intercept );\n\t\tconst yhat = this.state.result.predict( matrix ).map( v => v[ 0 ] );\n\t\tconst resid = subtract( data[ y ], yhat );\n\t\tthis.props.onPredict( yhat, resid, COUNTER );\n\t}\n\n\trender() {\n\t\tconst { y, predictors, nobs, result, adjRSquared, p, fScore, rSquared } = this.state;\n\t\tconst { t } = this.props;\n\t\tif ( !result ) {\n\t\t\treturn <Alert variant=\"danger\">{this.props.t('missing-attributes')}</Alert>;\n\t\t}\n\t\treturn (\n\t\t\t<div style={{ overflowX: 'auto', width: '100%' }}>\n\t\t\t\t<span className=\"title\" >{t('multiple-regression-title', { y, counter: COUNTER })}</span>\n\t\t\t\t{summaryTable( y, predictors, nobs, result, t )}\n\t\t\t\t<p>{t('residual-standard-error')}: {round( result.stdError )}</p>\n\t\t\t\t<p>{R2} {rSquared.toFixed( 6 )}, {t('adjusted')} {R2} {adjRSquared.toFixed( 6 )}</p>\n\t\t\t\t<p>{t('f-statistic')}: {fScore.toFixed( 3 )} (${DF}: {nobs-p-1}, {p}), {t('p-value')}: {(1.0 - fCDF( fScore, p, nobs-p-1 )).toFixed( 6 )}</p>\n\t\t\t\t{ this.props.onPredict ? <Tooltip placement=\"top\" tooltip={t('use-model-to-predict-tooltip')} >\n\t\t\t\t\t<Button variant=\"secondary\" size=\"sm\" onClick={this.handlePredict}>{t('use-model-to-predict')}</Button>\n\t\t\t\t</Tooltip> : null }\n\t\t\t\t{ this.props.onDiagnostics ? <Button variant=\"secondary\" size=\"sm\" style={{ marginLeft: 6 }} onClick={this.handleDiagnostics} >\n\t\t\t\t\t{t('model-diagnostics')}\n\t\t\t\t</Button> : null }\n\t\t\t</div>\n\t\t);\n\t}\n}\n\n\n// PROPERTIES //\n\nMultipleLinearRegression.defaultProps = {\n\tomitMissing: false,\n\tintercept: true,\n\tonDiagnostics: null,\n\tonPredict: null\n};\n\nMultipleLinearRegression.propTypes = {\n\tdata: PropTypes.object.isRequired,\n\ty: PropTypes.string.isRequired,\n\tx: PropTypes.oneOfType([\n\t\tPropTypes.arrayOf( PropTypes.oneOfType([ PropTypes.string, PropTypes.instanceOf( Factor ) ]) ),\n\t\tPropTypes.string,\n\t\tPropTypes.instanceOf( Factor )\n\t]).isRequired,\n\tquantitative: PropTypes.arrayOf( PropTypes.string ).isRequired,\n\tomitMissing: PropTypes.bool,\n\tintercept: PropTypes.bool,\n\tonDiagnostics: PropTypes.func,\n\tonPredict: PropTypes.func\n};\n\n\n// EXPORTS //\n\nexport default withTranslation( [ 'models', 'plotly' ] )( withPropCheck( MultipleLinearRegression ) );\n","// MODULES //\n\nimport isArrayLike from '@stdlib/assert/is-array-like';\nimport { isPrimitive as isNumber } from '@stdlib/assert/is-number';\n\n\n// MAIN //\n\n/**\n* Computes an element-wise subtraction.\n*\n* @param {NumberArray} arr - input array\n* @param {(NumberArray|number)} x - either an array of equal length or a scalar\n* @returns {NumberArray} output array\n*/\nfunction subtract( arr, x ) {\n\tconst isArr = isArrayLike( x );\n\tif ( !isArrayLike( arr ) ) {\n\t\tthrow new TypeError( 'invalid input argument. Must provide an array. Value: `' + arr + '`.' );\n\t}\n\tif ( !isArr && !isNumber( x ) ) {\n\t\tthrow new TypeError( 'invalid input argument. Second argument must either be an array or number primitive. Value: `' + x + '`.' );\n\t}\n\tconst len = arr.length;\n\tconst out = new Array( len );\n\n\t// Case 1: x is an array\n\tif ( isArr ) {\n\t\tif ( len !== x.length ) {\n\t\t\tthrow new Error( 'invalid input argument. Array to be added must have a length equal to that of the input array.' );\n\t\t}\n\t\tfor ( let i = 0; i < len; i++ ) {\n\t\t\tout[ i ] = arr[ i ] - x[ i ];\n\t\t}\n\t}\n\t// Case 2: scalar\n\telse {\n\t\tfor ( let i = 0; i < len; i++ ) {\n\t\t\tout[ i ] = arr[ i ] - x;\n\t\t}\n\t}\n\treturn out;\n}\n\n\n// EXPORTS //\n\nexport default subtract;\n","import _classCallCheck from \"/home/philipp/git/cmu-isle/isle-dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/philipp/git/cmu-isle/isle-dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport Matrix from '../matrix';\nimport WrapperMatrix2D from '../wrap/WrapperMatrix2D';\nimport { hypotenuse } from './util';\n\nvar SingularValueDecomposition = /*#__PURE__*/function () {\n  function SingularValueDecomposition(value) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, SingularValueDecomposition);\n\n    value = WrapperMatrix2D.checkMatrix(value);\n\n    if (value.isEmpty()) {\n      throw new Error('Matrix must be non-empty');\n    }\n\n    var m = value.rows;\n    var n = value.columns;\n    var _options$computeLeftS = options.computeLeftSingularVectors,\n        computeLeftSingularVectors = _options$computeLeftS === void 0 ? true : _options$computeLeftS,\n        _options$computeRight = options.computeRightSingularVectors,\n        computeRightSingularVectors = _options$computeRight === void 0 ? true : _options$computeRight,\n        _options$autoTranspos = options.autoTranspose,\n        autoTranspose = _options$autoTranspos === void 0 ? false : _options$autoTranspos;\n    var wantu = Boolean(computeLeftSingularVectors);\n    var wantv = Boolean(computeRightSingularVectors);\n    var swapped = false;\n    var a;\n\n    if (m < n) {\n      if (!autoTranspose) {\n        a = value.clone(); // eslint-disable-next-line no-console\n\n        console.warn('Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose');\n      } else {\n        a = value.transpose();\n        m = a.rows;\n        n = a.columns;\n        swapped = true;\n        var aux = wantu;\n        wantu = wantv;\n        wantv = aux;\n      }\n    } else {\n      a = value.clone();\n    }\n\n    var nu = Math.min(m, n);\n    var ni = Math.min(m + 1, n);\n    var s = new Float64Array(ni);\n    var U = new Matrix(m, nu);\n    var V = new Matrix(n, n);\n    var e = new Float64Array(n);\n    var work = new Float64Array(m);\n    var si = new Float64Array(ni);\n\n    for (var i = 0; i < ni; i++) {\n      si[i] = i;\n    }\n\n    var nct = Math.min(m - 1, n);\n    var nrt = Math.max(0, Math.min(n - 2, m));\n    var mrc = Math.max(nct, nrt);\n\n    for (var k = 0; k < mrc; k++) {\n      if (k < nct) {\n        s[k] = 0;\n\n        for (var _i = k; _i < m; _i++) {\n          s[k] = hypotenuse(s[k], a.get(_i, k));\n        }\n\n        if (s[k] !== 0) {\n          if (a.get(k, k) < 0) {\n            s[k] = -s[k];\n          }\n\n          for (var _i2 = k; _i2 < m; _i2++) {\n            a.set(_i2, k, a.get(_i2, k) / s[k]);\n          }\n\n          a.set(k, k, a.get(k, k) + 1);\n        }\n\n        s[k] = -s[k];\n      }\n\n      for (var j = k + 1; j < n; j++) {\n        if (k < nct && s[k] !== 0) {\n          var t = 0;\n\n          for (var _i3 = k; _i3 < m; _i3++) {\n            t += a.get(_i3, k) * a.get(_i3, j);\n          }\n\n          t = -t / a.get(k, k);\n\n          for (var _i4 = k; _i4 < m; _i4++) {\n            a.set(_i4, j, a.get(_i4, j) + t * a.get(_i4, k));\n          }\n        }\n\n        e[j] = a.get(k, j);\n      }\n\n      if (wantu && k < nct) {\n        for (var _i5 = k; _i5 < m; _i5++) {\n          U.set(_i5, k, a.get(_i5, k));\n        }\n      }\n\n      if (k < nrt) {\n        e[k] = 0;\n\n        for (var _i6 = k + 1; _i6 < n; _i6++) {\n          e[k] = hypotenuse(e[k], e[_i6]);\n        }\n\n        if (e[k] !== 0) {\n          if (e[k + 1] < 0) {\n            e[k] = 0 - e[k];\n          }\n\n          for (var _i7 = k + 1; _i7 < n; _i7++) {\n            e[_i7] /= e[k];\n          }\n\n          e[k + 1] += 1;\n        }\n\n        e[k] = -e[k];\n\n        if (k + 1 < m && e[k] !== 0) {\n          for (var _i8 = k + 1; _i8 < m; _i8++) {\n            work[_i8] = 0;\n          }\n\n          for (var _i9 = k + 1; _i9 < m; _i9++) {\n            for (var _j = k + 1; _j < n; _j++) {\n              work[_i9] += e[_j] * a.get(_i9, _j);\n            }\n          }\n\n          for (var _j2 = k + 1; _j2 < n; _j2++) {\n            var _t = -e[_j2] / e[k + 1];\n\n            for (var _i10 = k + 1; _i10 < m; _i10++) {\n              a.set(_i10, _j2, a.get(_i10, _j2) + _t * work[_i10]);\n            }\n          }\n        }\n\n        if (wantv) {\n          for (var _i11 = k + 1; _i11 < n; _i11++) {\n            V.set(_i11, k, e[_i11]);\n          }\n        }\n      }\n    }\n\n    var p = Math.min(n, m + 1);\n\n    if (nct < n) {\n      s[nct] = a.get(nct, nct);\n    }\n\n    if (m < p) {\n      s[p - 1] = 0;\n    }\n\n    if (nrt + 1 < p) {\n      e[nrt] = a.get(nrt, p - 1);\n    }\n\n    e[p - 1] = 0;\n\n    if (wantu) {\n      for (var _j3 = nct; _j3 < nu; _j3++) {\n        for (var _i12 = 0; _i12 < m; _i12++) {\n          U.set(_i12, _j3, 0);\n        }\n\n        U.set(_j3, _j3, 1);\n      }\n\n      for (var _k = nct - 1; _k >= 0; _k--) {\n        if (s[_k] !== 0) {\n          for (var _j4 = _k + 1; _j4 < nu; _j4++) {\n            var _t2 = 0;\n\n            for (var _i13 = _k; _i13 < m; _i13++) {\n              _t2 += U.get(_i13, _k) * U.get(_i13, _j4);\n            }\n\n            _t2 = -_t2 / U.get(_k, _k);\n\n            for (var _i14 = _k; _i14 < m; _i14++) {\n              U.set(_i14, _j4, U.get(_i14, _j4) + _t2 * U.get(_i14, _k));\n            }\n          }\n\n          for (var _i15 = _k; _i15 < m; _i15++) {\n            U.set(_i15, _k, -U.get(_i15, _k));\n          }\n\n          U.set(_k, _k, 1 + U.get(_k, _k));\n\n          for (var _i16 = 0; _i16 < _k - 1; _i16++) {\n            U.set(_i16, _k, 0);\n          }\n        } else {\n          for (var _i17 = 0; _i17 < m; _i17++) {\n            U.set(_i17, _k, 0);\n          }\n\n          U.set(_k, _k, 1);\n        }\n      }\n    }\n\n    if (wantv) {\n      for (var _k2 = n - 1; _k2 >= 0; _k2--) {\n        if (_k2 < nrt && e[_k2] !== 0) {\n          for (var _j5 = _k2 + 1; _j5 < n; _j5++) {\n            var _t3 = 0;\n\n            for (var _i18 = _k2 + 1; _i18 < n; _i18++) {\n              _t3 += V.get(_i18, _k2) * V.get(_i18, _j5);\n            }\n\n            _t3 = -_t3 / V.get(_k2 + 1, _k2);\n\n            for (var _i19 = _k2 + 1; _i19 < n; _i19++) {\n              V.set(_i19, _j5, V.get(_i19, _j5) + _t3 * V.get(_i19, _k2));\n            }\n          }\n        }\n\n        for (var _i20 = 0; _i20 < n; _i20++) {\n          V.set(_i20, _k2, 0);\n        }\n\n        V.set(_k2, _k2, 1);\n      }\n    }\n\n    var pp = p - 1;\n    var iter = 0;\n    var eps = Number.EPSILON;\n\n    while (p > 0) {\n      var _k3 = void 0,\n          kase = void 0;\n\n      for (_k3 = p - 2; _k3 >= -1; _k3--) {\n        if (_k3 === -1) {\n          break;\n        }\n\n        var alpha = Number.MIN_VALUE + eps * Math.abs(s[_k3] + Math.abs(s[_k3 + 1]));\n\n        if (Math.abs(e[_k3]) <= alpha || Number.isNaN(e[_k3])) {\n          e[_k3] = 0;\n          break;\n        }\n      }\n\n      if (_k3 === p - 2) {\n        kase = 4;\n      } else {\n        var ks = void 0;\n\n        for (ks = p - 1; ks >= _k3; ks--) {\n          if (ks === _k3) {\n            break;\n          }\n\n          var _t4 = (ks !== p ? Math.abs(e[ks]) : 0) + (ks !== _k3 + 1 ? Math.abs(e[ks - 1]) : 0);\n\n          if (Math.abs(s[ks]) <= eps * _t4) {\n            s[ks] = 0;\n            break;\n          }\n        }\n\n        if (ks === _k3) {\n          kase = 3;\n        } else if (ks === p - 1) {\n          kase = 1;\n        } else {\n          kase = 2;\n          _k3 = ks;\n        }\n      }\n\n      _k3++;\n\n      switch (kase) {\n        case 1:\n          {\n            var f = e[p - 2];\n            e[p - 2] = 0;\n\n            for (var _j6 = p - 2; _j6 >= _k3; _j6--) {\n              var _t5 = hypotenuse(s[_j6], f);\n\n              var cs = s[_j6] / _t5;\n              var sn = f / _t5;\n              s[_j6] = _t5;\n\n              if (_j6 !== _k3) {\n                f = -sn * e[_j6 - 1];\n                e[_j6 - 1] = cs * e[_j6 - 1];\n              }\n\n              if (wantv) {\n                for (var _i21 = 0; _i21 < n; _i21++) {\n                  _t5 = cs * V.get(_i21, _j6) + sn * V.get(_i21, p - 1);\n                  V.set(_i21, p - 1, -sn * V.get(_i21, _j6) + cs * V.get(_i21, p - 1));\n                  V.set(_i21, _j6, _t5);\n                }\n              }\n            }\n\n            break;\n          }\n\n        case 2:\n          {\n            var _f = e[_k3 - 1];\n            e[_k3 - 1] = 0;\n\n            for (var _j7 = _k3; _j7 < p; _j7++) {\n              var _t6 = hypotenuse(s[_j7], _f);\n\n              var _cs = s[_j7] / _t6;\n\n              var _sn = _f / _t6;\n\n              s[_j7] = _t6;\n              _f = -_sn * e[_j7];\n              e[_j7] = _cs * e[_j7];\n\n              if (wantu) {\n                for (var _i22 = 0; _i22 < m; _i22++) {\n                  _t6 = _cs * U.get(_i22, _j7) + _sn * U.get(_i22, _k3 - 1);\n                  U.set(_i22, _k3 - 1, -_sn * U.get(_i22, _j7) + _cs * U.get(_i22, _k3 - 1));\n                  U.set(_i22, _j7, _t6);\n                }\n              }\n            }\n\n            break;\n          }\n\n        case 3:\n          {\n            var scale = Math.max(Math.abs(s[p - 1]), Math.abs(s[p - 2]), Math.abs(e[p - 2]), Math.abs(s[_k3]), Math.abs(e[_k3]));\n            var sp = s[p - 1] / scale;\n            var spm1 = s[p - 2] / scale;\n            var epm1 = e[p - 2] / scale;\n            var sk = s[_k3] / scale;\n            var ek = e[_k3] / scale;\n            var b = ((spm1 + sp) * (spm1 - sp) + epm1 * epm1) / 2;\n            var c = sp * epm1 * (sp * epm1);\n            var shift = 0;\n\n            if (b !== 0 || c !== 0) {\n              if (b < 0) {\n                shift = 0 - Math.sqrt(b * b + c);\n              } else {\n                shift = Math.sqrt(b * b + c);\n              }\n\n              shift = c / (b + shift);\n            }\n\n            var _f2 = (sk + sp) * (sk - sp) + shift;\n\n            var g = sk * ek;\n\n            for (var _j8 = _k3; _j8 < p - 1; _j8++) {\n              var _t7 = hypotenuse(_f2, g);\n\n              if (_t7 === 0) _t7 = Number.MIN_VALUE;\n\n              var _cs2 = _f2 / _t7;\n\n              var _sn2 = g / _t7;\n\n              if (_j8 !== _k3) {\n                e[_j8 - 1] = _t7;\n              }\n\n              _f2 = _cs2 * s[_j8] + _sn2 * e[_j8];\n              e[_j8] = _cs2 * e[_j8] - _sn2 * s[_j8];\n              g = _sn2 * s[_j8 + 1];\n              s[_j8 + 1] = _cs2 * s[_j8 + 1];\n\n              if (wantv) {\n                for (var _i23 = 0; _i23 < n; _i23++) {\n                  _t7 = _cs2 * V.get(_i23, _j8) + _sn2 * V.get(_i23, _j8 + 1);\n                  V.set(_i23, _j8 + 1, -_sn2 * V.get(_i23, _j8) + _cs2 * V.get(_i23, _j8 + 1));\n                  V.set(_i23, _j8, _t7);\n                }\n              }\n\n              _t7 = hypotenuse(_f2, g);\n              if (_t7 === 0) _t7 = Number.MIN_VALUE;\n              _cs2 = _f2 / _t7;\n              _sn2 = g / _t7;\n              s[_j8] = _t7;\n              _f2 = _cs2 * e[_j8] + _sn2 * s[_j8 + 1];\n              s[_j8 + 1] = -_sn2 * e[_j8] + _cs2 * s[_j8 + 1];\n              g = _sn2 * e[_j8 + 1];\n              e[_j8 + 1] = _cs2 * e[_j8 + 1];\n\n              if (wantu && _j8 < m - 1) {\n                for (var _i24 = 0; _i24 < m; _i24++) {\n                  _t7 = _cs2 * U.get(_i24, _j8) + _sn2 * U.get(_i24, _j8 + 1);\n                  U.set(_i24, _j8 + 1, -_sn2 * U.get(_i24, _j8) + _cs2 * U.get(_i24, _j8 + 1));\n                  U.set(_i24, _j8, _t7);\n                }\n              }\n            }\n\n            e[p - 2] = _f2;\n            iter = iter + 1;\n            break;\n          }\n\n        case 4:\n          {\n            if (s[_k3] <= 0) {\n              s[_k3] = s[_k3] < 0 ? -s[_k3] : 0;\n\n              if (wantv) {\n                for (var _i25 = 0; _i25 <= pp; _i25++) {\n                  V.set(_i25, _k3, -V.get(_i25, _k3));\n                }\n              }\n            }\n\n            while (_k3 < pp) {\n              if (s[_k3] >= s[_k3 + 1]) {\n                break;\n              }\n\n              var _t8 = s[_k3];\n              s[_k3] = s[_k3 + 1];\n              s[_k3 + 1] = _t8;\n\n              if (wantv && _k3 < n - 1) {\n                for (var _i26 = 0; _i26 < n; _i26++) {\n                  _t8 = V.get(_i26, _k3 + 1);\n                  V.set(_i26, _k3 + 1, V.get(_i26, _k3));\n                  V.set(_i26, _k3, _t8);\n                }\n              }\n\n              if (wantu && _k3 < m - 1) {\n                for (var _i27 = 0; _i27 < m; _i27++) {\n                  _t8 = U.get(_i27, _k3 + 1);\n                  U.set(_i27, _k3 + 1, U.get(_i27, _k3));\n                  U.set(_i27, _k3, _t8);\n                }\n              }\n\n              _k3++;\n            }\n\n            iter = 0;\n            p--;\n            break;\n          }\n        // no default\n      }\n    }\n\n    if (swapped) {\n      var tmp = V;\n      V = U;\n      U = tmp;\n    }\n\n    this.m = m;\n    this.n = n;\n    this.s = s;\n    this.U = U;\n    this.V = V;\n  }\n\n  _createClass(SingularValueDecomposition, [{\n    key: \"solve\",\n    value: function solve(value) {\n      var Y = value;\n      var e = this.threshold;\n      var scols = this.s.length;\n      var Ls = Matrix.zeros(scols, scols);\n\n      for (var i = 0; i < scols; i++) {\n        if (Math.abs(this.s[i]) <= e) {\n          Ls.set(i, i, 0);\n        } else {\n          Ls.set(i, i, 1 / this.s[i]);\n        }\n      }\n\n      var U = this.U;\n      var V = this.rightSingularVectors;\n      var VL = V.mmul(Ls);\n      var vrows = V.rows;\n      var urows = U.rows;\n      var VLU = Matrix.zeros(vrows, urows);\n\n      for (var _i28 = 0; _i28 < vrows; _i28++) {\n        for (var j = 0; j < urows; j++) {\n          var sum = 0;\n\n          for (var k = 0; k < scols; k++) {\n            sum += VL.get(_i28, k) * U.get(j, k);\n          }\n\n          VLU.set(_i28, j, sum);\n        }\n      }\n\n      return VLU.mmul(Y);\n    }\n  }, {\n    key: \"solveForDiagonal\",\n    value: function solveForDiagonal(value) {\n      return this.solve(Matrix.diag(value));\n    }\n  }, {\n    key: \"inverse\",\n    value: function inverse() {\n      var V = this.V;\n      var e = this.threshold;\n      var vrows = V.rows;\n      var vcols = V.columns;\n      var X = new Matrix(vrows, this.s.length);\n\n      for (var i = 0; i < vrows; i++) {\n        for (var j = 0; j < vcols; j++) {\n          if (Math.abs(this.s[j]) > e) {\n            X.set(i, j, V.get(i, j) / this.s[j]);\n          }\n        }\n      }\n\n      var U = this.U;\n      var urows = U.rows;\n      var ucols = U.columns;\n      var Y = new Matrix(vrows, urows);\n\n      for (var _i29 = 0; _i29 < vrows; _i29++) {\n        for (var _j9 = 0; _j9 < urows; _j9++) {\n          var sum = 0;\n\n          for (var k = 0; k < ucols; k++) {\n            sum += X.get(_i29, k) * U.get(_j9, k);\n          }\n\n          Y.set(_i29, _j9, sum);\n        }\n      }\n\n      return Y;\n    }\n  }, {\n    key: \"condition\",\n    get: function get() {\n      return this.s[0] / this.s[Math.min(this.m, this.n) - 1];\n    }\n  }, {\n    key: \"norm2\",\n    get: function get() {\n      return this.s[0];\n    }\n  }, {\n    key: \"rank\",\n    get: function get() {\n      var tol = Math.max(this.m, this.n) * this.s[0] * Number.EPSILON;\n      var r = 0;\n      var s = this.s;\n\n      for (var i = 0, ii = s.length; i < ii; i++) {\n        if (s[i] > tol) {\n          r++;\n        }\n      }\n\n      return r;\n    }\n  }, {\n    key: \"diagonal\",\n    get: function get() {\n      return Array.from(this.s);\n    }\n  }, {\n    key: \"threshold\",\n    get: function get() {\n      return Number.EPSILON / 2 * Math.max(this.m, this.n) * this.s[0];\n    }\n  }, {\n    key: \"leftSingularVectors\",\n    get: function get() {\n      return this.U;\n    }\n  }, {\n    key: \"rightSingularVectors\",\n    get: function get() {\n      return this.V;\n    }\n  }, {\n    key: \"diagonalMatrix\",\n    get: function get() {\n      return Matrix.diag(this.s);\n    }\n  }]);\n\n  return SingularValueDecomposition;\n}();\n\nexport { SingularValueDecomposition as default };","export function hypotenuse(a, b) {\n  var r = 0;\n\n  if (Math.abs(a) > Math.abs(b)) {\n    r = b / a;\n    return Math.abs(a) * Math.sqrt(1 + r * r);\n  }\n\n  if (b !== 0) {\n    r = a / b;\n    return Math.abs(b) * Math.sqrt(1 + r * r);\n  }\n\n  return 0;\n}","import _classCallCheck from \"/home/philipp/git/cmu-isle/isle-dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/philipp/git/cmu-isle/isle-dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/home/philipp/git/cmu-isle/isle-dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/home/philipp/git/cmu-isle/isle-dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport { AbstractMatrix } from '../matrix';\n\nvar WrapperMatrix2D = /*#__PURE__*/function (_AbstractMatrix) {\n  _inherits(WrapperMatrix2D, _AbstractMatrix);\n\n  var _super = _createSuper(WrapperMatrix2D);\n\n  function WrapperMatrix2D(data) {\n    var _this;\n\n    _classCallCheck(this, WrapperMatrix2D);\n\n    _this = _super.call(this);\n    _this.data = data;\n    _this.rows = data.length;\n    _this.columns = data[0].length;\n    return _this;\n  }\n\n  _createClass(WrapperMatrix2D, [{\n    key: \"set\",\n    value: function set(rowIndex, columnIndex, value) {\n      this.data[rowIndex][columnIndex] = value;\n      return this;\n    }\n  }, {\n    key: \"get\",\n    value: function get(rowIndex, columnIndex) {\n      return this.data[rowIndex][columnIndex];\n    }\n  }]);\n\n  return WrapperMatrix2D;\n}(AbstractMatrix);\n\nexport { WrapperMatrix2D as default };"],"sourceRoot":""}