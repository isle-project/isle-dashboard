"use strict";(self.webpackChunkisle_dashboard=self.webpackChunkisle_dashboard||[]).push([[5139],{55139:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{DV:function(){return ClassificationTree},OI:function(){return RandomForestClassifier},tC:function(){return RegressionTree},fA:function(){return tree_TreePlot}});var lib=__webpack_require__(14634),lib_default=__webpack_require__.n(lib),contains_lib=__webpack_require__(61635),contains_lib_default=__webpack_require__.n(contains_lib),has_own_property_lib=__webpack_require__(10813),has_own_property_lib_default=__webpack_require__.n(has_own_property_lib),ln_lib=__webpack_require__(68252),ln_lib_default=__webpack_require__.n(ln_lib),round_lib=__webpack_require__(55809),round_lib_default=__webpack_require__.n(round_lib),incrspace_lib=__webpack_require__(26658),incrspace_lib_default=__webpack_require__.n(incrspace_lib),react=__webpack_require__(67294),commonjs=__webpack_require__(81468),html_to_image_lib=__webpack_require__(6957),is_number_lib=__webpack_require__(91317),is_integer_lib=__webpack_require__(28778),is_integer_lib_default=__webpack_require__.n(is_integer_lib),alphanumeric=__webpack_require__(68681),html_to_clipboard=__webpack_require__(59177),prop_types=__webpack_require__(45697),prop_types_default=__webpack_require__.n(prop_types),Button=__webpack_require__(30276),Button_default=__webpack_require__.n(Button),Modal=__webpack_require__(33089),Modal_default=__webpack_require__.n(Modal),tooltip=__webpack_require__(77287),__defProp=Object.defineProperty,__defNormalProp=(obj,key,value)=>key in obj?__defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value}):obj[key]=value,__publicField=(obj,key,value)=>(__defNormalProp(obj,typeof key!="symbol"?key+"":key,value),value);class FullscreenButton extends react.Component{constructor(){super();__publicField(this,"toggleFullscreen",()=>{this.setState({fullscreen:!this.state.fullscreen})}),this.state={fullscreen:!1}}render(){const{t}=this.props;return react.createElement(react.Fragment,null,react.createElement(tooltip.Z,{id:"fullscreen_tooltip",placement:"bottom",tooltip:t("toggle-fullscreen")},react.createElement(Button_default(),{variant:"outline-danger",size:"sm",onClick:this.toggleFullscreen,style:{position:"absolute",top:"10px",right:"32px"}},react.createElement("div",{className:"fa fa-window-maximize"}))),react.createElement(Modal_default(),{show:this.state.fullscreen,onHide:this.toggleFullscreen,dialogClassName:"modal-100w"},react.createElement(Modal_default().Header,{closeButton:!0},react.createElement(Modal_default().Title,{as:"h1"},t("decision-tree"))),react.createElement(Modal_default().Body,{style:{height:.75*window.innerHeight,width:"100%",fontSize:32,overflow:"scroll"}},react.createElement("div",{className:"decision-tree decision-tree-fullscreen"},this.props.tree)),react.createElement(Modal_default().Footer,null,react.createElement(Button_default(),{onClick:this.toggleFullscreen},t("close")))))}}FullscreenButton.propTypes={tree:prop_types_default().node.isRequired};var fullscreen_button=(0,commonjs.Zh)("models")(FullscreenButton);const RE_NUMBER=/^[+-]?[\d.]+e?[+-]?\d*$/;function treeToHtml(tree,t){if(!tree)return null;if(tree.category){let value=tree.category;return((0,is_number_lib.isPrimitive)(value)||RE_NUMBER.test(value))&&(value=Number(value),is_integer_lib_default()(value)||(value=value.toFixed(6))),react.createElement("ul",null,react.createElement("li",null,react.createElement("span",{className:"decision-tree-leaf"},t("predict"),": ",value," ")))}return react.createElement("ul",null,react.createElement("li",null,react.createElement("span",null,react.createElement("b",null," ",tree.attribute," ",tree.predicateName," ",tree.pivot," ?")),react.createElement("ul",null,react.createElement("li",null,react.createElement("span",null,t("no")," ( ",tree.notMatchedCount," ",t("obs"),") "),treeToHtml(tree.notMatch,t)),react.createElement("li",null,react.createElement("span",null,t("yes")," ( ",tree.matchedCount," ",t("obs"),") "),treeToHtml(tree.match,t)))))}class TreePlot extends react.Component{constructor(props){super(props);this.state={plotValue:null,plotKey:null,fullscreen:!1}}componentDidMount(){!this.tree||(this.treeWrapper.scrollLeft=.4*this.tree.clientWidth,(0,html_to_image_lib.toJpeg)(this.tree,{backgroundColor:"white",style:{fontSize:22}}).then(data=>{const value=`<img src="${data}" style="display: block; margin: 0 auto; max-width: 100%; max-height: 100%" />`;this.setState({plotKey:`<!--IMAGE_LOG:${(0,alphanumeric.Z)(6)}_${(0,alphanumeric.Z)(6)}-->`,plotValue:value})}))}render(){const{t}=this.props,tree=treeToHtml(this.props.tree,t);return react.createElement("div",{className:"decision-tree-wrapper",ref:div=>{this.treeWrapper=div}},react.createElement("button",{className:"decision-tree-draggable-bar",draggable:"true",onDragStart:ev=>{ev.dataTransfer.setData("text/html",this.state.plotValue),ev.dataTransfer.setData("text/plain",this.state.plotKey)},onClick:()=>{(0,html_to_clipboard.Z)(this.state.plotValue)},style:{float:"left"}},t("drag-plot")),react.createElement(fullscreen_button,{variant:"outline-danger",size:"sm",onClick:()=>{this.setState({fullscreen:!this.state.fullscreen})},tree},react.createElement("div",{className:"fa fa-times"})),react.createElement("div",{className:"decision-tree",ref:div=>{this.tree=div}},tree))}}var tree_plot=(0,commonjs.Zh)("models")(TreePlot);function split(data,indices,attr,predicate,pivot){const match=[],notMatch=[],values=data[attr];for(let i=indices.length-1;i>=0;i--){const idx=indices[i],attrValue=values[idx];predicate(attrValue,pivot)?match.push(idx):notMatch.push(idx)}return{match,notMatch}}var decision_tree_split=split;function countUniqueValues(values,indices){const counter={};for(let i=indices.length-1;i>=0;i--){const idx=indices[i];counter[values[idx]]=0}for(let i=indices.length-1;i>=0;i--){const idx=indices[i];counter[values[idx]]+=1}return counter}function mostFrequentValue(values,indices){const counter=countUniqueValues(values,indices);let mostFrequentCount=0,mostFrequentValue2;for(let value in counter)counter[value]>mostFrequentCount&&(mostFrequentCount=counter[value],mostFrequentValue2=value);return mostFrequentValue2}function gini(values,indices){const counter=countUniqueValues(values,indices);let out=0;for(let i in counter)if(has_own_property_lib_default()(counter,i)){const p=counter[i]/indices.length;out+=p*(1-p)}return out}function entropy(values,indices){const counter=countUniqueValues(values,indices);let entropy2=0;for(let i in counter)if(has_own_property_lib_default()(counter,i)){const p=counter[i]/indices.length;entropy2+=-p*ln_lib_default()(p)}return entropy2}function variance(values,indices){const len=indices.length;let delta=0,mean2=0,M2=0,N=0;if(!len)return null;if(len<2)return 0;for(let i=0;i<len;i++){const idx=indices[i],x=values[idx];N+=1,delta=x-mean2,mean2+=delta/N,M2+=delta*(x-mean2)}return M2/(N-1)}function mean(values,indices){const len=indices.length;if(!len)return null;let mu=0;for(let i=0;i<len;i++){const idx=indices[i];mu+=(values[idx]-mu)/(i+1)}return mu}const predicates={"==":(a,b)=>a==b,">=":(a,b)=>a>=b};function ClassificationTreeConstructor(opts){const nobs=opts.data[opts.response].length;this.importances={};for(let j=0;j<opts.predictors.length;j++)this.importances[opts.predictors[j]]=0;this.root=buildClassificationTree({data:opts.data,response:opts.response,predictors:opts.predictors,indices:opts.indices?opts.indices:incrspace_lib_default()(0,nobs,1),minItemsCount:opts.minItemsCount||50,minBucket:opts.minBucket||round_lib_default()((opts.minItemsCount||50)/3),scoreThreshold:opts.scoreThreshold||.01,maxTreeDepth:opts.maxTreeDepth||20,quantitative:opts.quantitative,criterion:opts.criterion==="gini"?gini:entropy},this.importances),this.predict=(data,idx)=>{if(idx===void 0){const nobs2=data[opts.predictors[0]].length,out=new Array(nobs2);for(let i=0;i<nobs2;i++)out[i]=predict(this.root,data,i);return out}return predict(this.root,data,idx)},this.type="classification",this.response=opts.response}function RegressionTreeConstructor(opts){const nobs=opts.data[opts.response].length;this.root=buildRegressionTree({data:opts.data,response:opts.response,predictors:opts.predictors,indices:opts.indices?opts.indices:incrspace_lib_default()(0,nobs,1),minItemsCount:opts.minItemsCount||50,minBucket:opts.minBucket||round_lib_default()((opts.minItemsCount||50)/3),scoreThreshold:opts.scoreThreshold||.01,maxTreeDepth:opts.maxTreeDepth||20,quantitative:opts.quantitative}),this.predict=(data,idx)=>{if(idx===void 0){const nobs2=data[opts.predictors[0]].length,out=new Array(nobs2);for(let i=0;i<nobs2;i++)out[i]=Number(predict(this.root,data,i));return out}return Number(predict(this.root,data,idx))},this.type="regression",this.response=opts.response}function RandomForestClassifierConstructor(opts){this.trees=buildRandomForestClassifier(opts),this.importances={};for(let i=0;i<opts.predictors.length;i++){const attr=opts.predictors[i];this.importances[attr]=0;for(let j=0;j<this.trees.length;j++)this.importances[attr]+=this.trees[j].importances[attr];this.importances[attr]/=this.trees.length}this.predict=(data,idx)=>{if(idx===void 0){const nobs=data[opts.predictors[0]].length,out=new Array(nobs);for(let i=0;i<nobs;i++)out[i]=predictRandomForest(this.trees,data,i);return out}return predictRandomForest(this.trees,data,idx)},this.type="classification",this.response=opts.response}function buildClassificationTree(opts,importances){const{data,predictors,indices,response,minItemsCount,scoreThreshold,maxTreeDepth,quantitative,criterion,minBucket,nTry}=opts,nobs=indices.length;if(maxTreeDepth===0||nobs<=minItemsCount)return{category:mostFrequentValue(data[response],indices)};const initialScore=criterion(data[response],indices),alreadyChecked={};let bestSplit={gain:0};nTry&&(predictors=lib_default()(predictors,{size:nTry}));for(let i=nobs-1;i>=0;i--){const idx=indices[i];for(let j=0;j<predictors.length;j++){const attr=predictors[j],pivot=data[attr][idx];let predicateName;contains_lib_default()(quantitative,attr)?predicateName=">=":predicateName="==";const attrPredPivot=attr+predicateName+pivot;if(alreadyChecked[attrPredPivot])continue;alreadyChecked[attrPredPivot]=!0;const predicate=predicates[predicateName],currSplit=decision_tree_split(data,indices,attr,predicate,pivot),matchEntropy=criterion(data[response],currSplit.match),notMatchEntropy=criterion(data[response],currSplit.notMatch);let newScore=0;newScore+=matchEntropy*currSplit.match.length,newScore+=notMatchEntropy*currSplit.notMatch.length,newScore/=nobs;const currGain=initialScore-newScore;currGain>bestSplit.gain&&currSplit.match.length>minBucket&&currSplit.notMatch.length>minBucket&&(bestSplit=currSplit,bestSplit.predicateName=predicateName,bestSplit.predicate=predicate,bestSplit.attribute=attr,bestSplit.pivot=pivot,bestSplit.gain=currGain)}}if(!bestSplit.gain||bestSplit.gain/initialScore<scoreThreshold)return{category:mostFrequentValue(data[response],indices)};opts.maxTreeDepth=maxTreeDepth-1,importances[bestSplit.attribute]+=bestSplit.gain,opts.indices=bestSplit.match;const matchSubTree=buildClassificationTree(opts,importances);opts.indices=bestSplit.notMatch;const notMatchSubTree=buildClassificationTree(opts,importances);return{attribute:bestSplit.attribute,predicate:bestSplit.predicate,predicateName:bestSplit.predicateName,pivot:bestSplit.pivot,match:matchSubTree,notMatch:notMatchSubTree,matchedCount:bestSplit.match.length,notMatchedCount:bestSplit.notMatch.length}}function buildRegressionTree(opts){const{data,predictors,indices,response,minItemsCount,scoreThreshold,maxTreeDepth,quantitative,minBucket,nTry}=opts,nobs=indices.length;if(maxTreeDepth===0||nobs<=minItemsCount)return{category:mean(data[response],indices)};const initialScore=variance(data[response],indices),alreadyChecked={};let bestSplit={gain:0};nTry&&(predictors=lib_default()(predictors,{size:nTry}));for(let i=nobs-1;i>=0;i--){const idx=indices[i];for(let j=0;j<predictors.length;j++){const attr=predictors[j],pivot=data[attr][idx];let predicateName;contains_lib_default()(quantitative,attr)?predicateName=">=":predicateName="==";const attrPredPivot=attr+predicateName+pivot;if(alreadyChecked[attrPredPivot])continue;alreadyChecked[attrPredPivot]=!0;const predicate=predicates[predicateName],currSplit=decision_tree_split(data,indices,attr,predicate,pivot),matchEntropy=variance(data[response],currSplit.match),notMatchEntropy=variance(data[response],currSplit.notMatch);let newScore=0;newScore+=matchEntropy*currSplit.match.length,newScore+=notMatchEntropy*currSplit.notMatch.length,newScore/=nobs;const currGain=initialScore-newScore;currGain>bestSplit.gain&&currSplit.match.length>minBucket&&currSplit.notMatch.length>minBucket&&(bestSplit=currSplit,bestSplit.predicateName=predicateName,bestSplit.predicate=predicate,bestSplit.attribute=attr,bestSplit.pivot=pivot,bestSplit.gain=currGain)}}if(!bestSplit.gain||bestSplit.gain/initialScore<scoreThreshold)return{category:mean(data[response],indices)};opts.maxTreeDepth=maxTreeDepth-1,opts.indices=bestSplit.match;const matchSubTree=buildRegressionTree(opts);opts.indices=bestSplit.notMatch;const notMatchSubTree=buildRegressionTree(opts);return{attribute:bestSplit.attribute,predicate:bestSplit.predicate,predicateName:bestSplit.predicateName,pivot:bestSplit.pivot,match:matchSubTree,notMatch:notMatchSubTree,matchedCount:bestSplit.match.length,notMatchedCount:bestSplit.notMatch.length}}function predict(tree,data,i){for(;;){if(tree.category)return tree.category;const attr=tree.attribute,value=data[attr][i],predicate=tree.predicate,pivot=tree.pivot;predicate(value,pivot)?tree=tree.match:tree=tree.notMatch}}function buildRandomForestClassifier(opts){const trainingSets=[],nobs=opts.data[opts.response].length,indices=incrspace_lib_default()(0,nobs,1);for(let t=0;t<opts.nTrees;t++)trainingSets[t]=lib_default()(indices);const forest=[];for(let t=0;t<opts.nTrees;t++){opts.indices=trainingSets[t];const tree=new ClassificationTreeConstructor(opts);forest.push(tree)}return forest}function predictRandomForest(forest,data,idx){const result={};for(let i=0;i<forest.length;i++){const prediction=forest[i].predict(data,idx);result[prediction]=result[prediction]?result[prediction]+1:1}let max=-1,out;for(let key in result)has_own_property_lib_default()(result,key)&&result[key]>max&&(max=result[key],out=key);return out}const ClassificationTree=ClassificationTreeConstructor,RegressionTree=RegressionTreeConstructor,RandomForestClassifier=RandomForestClassifierConstructor,tree_TreePlot=tree_plot},81139:function(__unused_webpack_module,exports){Object.defineProperty(exports,"__esModule",{value:!0}),exports.applyStyleWithOptions=void 0;function applyStyleWithOptions(node,options){var style=node.style;options.backgroundColor&&(style.backgroundColor=options.backgroundColor),options.width&&(style.width=options.width+"px"),options.height&&(style.height=options.height+"px");var manual=options.style;return manual!=null&&Object.keys(manual).forEach(function(key){style[key]=manual[key]}),node}exports.applyStyleWithOptions=applyStyleWithOptions},99509:function(__unused_webpack_module,exports,__webpack_require__){var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})},__generator=this&&this.__generator||function(thisArg,body){var _={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},f,y,t,g;return g={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=op[0]&2?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[op[0]&2,t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(t=_.trys,!(t=t.length>0&&t[t.length-1])&&(op[0]===6||op[0]===2)){_=0;continue}if(op[0]===3&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(op[0]===6&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(op[0]&5)throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.cloneNode=void 0;var getBlobFromURL_1=__webpack_require__(65177),clonePseudoElements_1=__webpack_require__(3513),util_1=__webpack_require__(61607);function cloneCanvasElement(node){return __awaiter(this,void 0,void 0,function(){var dataURL;return __generator(this,function(_a){return dataURL=node.toDataURL(),dataURL==="data:,"?[2,Promise.resolve(node.cloneNode(!1))]:[2,(0,util_1.createImage)(dataURL)]})})}function cloneVideoElement(node,options){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(_a){return[2,Promise.resolve(node.poster).then(function(url){return(0,getBlobFromURL_1.getBlobFromURL)(url,options)}).then(function(data){return(0,util_1.makeDataUrl)(data.blob,(0,util_1.getMimeType)(node.poster)||data.contentType)}).then(function(dataURL){return(0,util_1.createImage)(dataURL)})]})})}function cloneSingleNode(node,options){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(_a){return node instanceof HTMLCanvasElement?[2,cloneCanvasElement(node)]:node instanceof HTMLVideoElement&&node.poster?[2,cloneVideoElement(node,options)]:[2,Promise.resolve(node.cloneNode(!1))]})})}var isSlotElement=function(node){return node.tagName!=null&&node.tagName.toUpperCase()==="SLOT"};function cloneChildren(nativeNode,clonedNode,options){var _a;return __awaiter(this,void 0,void 0,function(){var children;return __generator(this,function(_b){return children=isSlotElement(nativeNode)&&nativeNode.assignedNodes?(0,util_1.toArray)(nativeNode.assignedNodes()):(0,util_1.toArray)(((_a=nativeNode.shadowRoot)!==null&&_a!==void 0?_a:nativeNode).childNodes),children.length===0||nativeNode instanceof HTMLVideoElement?[2,Promise.resolve(clonedNode)]:[2,children.reduce(function(deferred,child){return deferred.then(function(){return cloneNode(child,options)}).then(function(clonedChild){clonedChild&&clonedNode.appendChild(clonedChild)})},Promise.resolve()).then(function(){return clonedNode})]})})}function cloneCSSStyle(nativeNode,clonedNode){var source=window.getComputedStyle(nativeNode),target=clonedNode.style;!target||(source.cssText?target.cssText=source.cssText:(0,util_1.toArray)(source).forEach(function(name){target.setProperty(name,source.getPropertyValue(name),source.getPropertyPriority(name))}))}function cloneInputValue(nativeNode,clonedNode){nativeNode instanceof HTMLTextAreaElement&&(clonedNode.innerHTML=nativeNode.value),nativeNode instanceof HTMLInputElement&&clonedNode.setAttribute("value",nativeNode.value)}function decorate(nativeNode,clonedNode){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(_a){return clonedNode instanceof Element?[2,Promise.resolve().then(function(){return cloneCSSStyle(nativeNode,clonedNode)}).then(function(){return(0,clonePseudoElements_1.clonePseudoElements)(nativeNode,clonedNode)}).then(function(){return cloneInputValue(nativeNode,clonedNode)}).then(function(){return clonedNode})]:[2,Promise.resolve(clonedNode)]})})}function cloneNode(node,options,isRoot){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(_a){return!isRoot&&options.filter&&!options.filter(node)?[2,Promise.resolve(null)]:[2,Promise.resolve(node).then(function(clonedNode){return cloneSingleNode(clonedNode,options)}).then(function(clonedNode){return cloneChildren(node,clonedNode,options)}).then(function(clonedNode){return decorate(node,clonedNode)})]})})}exports.cloneNode=cloneNode},3513:function(__unused_webpack_module,exports,__webpack_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.clonePseudoElements=void 0;var util_1=__webpack_require__(61607);function formatCSSText(style){var content=style.getPropertyValue("content");return style.cssText+" content: '"+content.replace(/'|"/g,"")+"';"}function formatCSSProperties(style){return(0,util_1.toArray)(style).map(function(name){var value=style.getPropertyValue(name),priority=style.getPropertyPriority(name);return name+": "+value+(priority?" !important":"")+";"}).join(" ")}function getPseudoElementStyle(className,pseudo,style){var selector="."+className+":"+pseudo,cssText=style.cssText?formatCSSText(style):formatCSSProperties(style);return document.createTextNode(selector+"{"+cssText+"}")}function clonePseudoElement(nativeNode,clonedNode,pseudo){var style=window.getComputedStyle(nativeNode,pseudo),content=style.getPropertyValue("content");if(!(content===""||content==="none")){var className=(0,util_1.uuid)();try{clonedNode.className=clonedNode.className+" "+className}catch(err){return}var styleElement=document.createElement("style");styleElement.appendChild(getPseudoElementStyle(className,pseudo,style)),clonedNode.appendChild(styleElement)}}function clonePseudoElements(nativeNode,clonedNode){clonePseudoElement(nativeNode,clonedNode,":before"),clonePseudoElement(nativeNode,clonedNode,":after")}exports.clonePseudoElements=clonePseudoElements},1326:function(__unused_webpack_module,exports,__webpack_require__){var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})},__generator=this&&this.__generator||function(thisArg,body){var _={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},f,y,t,g;return g={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=op[0]&2?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[op[0]&2,t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(t=_.trys,!(t=t.length>0&&t[t.length-1])&&(op[0]===6||op[0]===2)){_=0;continue}if(op[0]===3&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(op[0]===6&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(op[0]&5)throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.embedImages=void 0;var getBlobFromURL_1=__webpack_require__(65177),embedResources_1=__webpack_require__(86896),util_1=__webpack_require__(61607);function embedBackground(clonedNode,options){var _a;return __awaiter(this,void 0,void 0,function(){var background;return __generator(this,function(_b){return background=(_a=clonedNode.style)===null||_a===void 0?void 0:_a.getPropertyValue("background"),background?[2,Promise.resolve(background).then(function(cssString){return(0,embedResources_1.embedResources)(cssString,null,options)}).then(function(cssString){return clonedNode.style.setProperty("background",cssString,clonedNode.style.getPropertyPriority("background")),clonedNode})]:[2,Promise.resolve(clonedNode)]})})}function embedImageNode(clonedNode,options){return __awaiter(this,void 0,void 0,function(){var src;return __generator(this,function(_a){return!(clonedNode instanceof HTMLImageElement&&!(0,util_1.isDataUrl)(clonedNode.src))&&!(clonedNode instanceof SVGImageElement&&!(0,util_1.isDataUrl)(clonedNode.href.baseVal))?[2,Promise.resolve(clonedNode)]:(src=clonedNode instanceof HTMLImageElement?clonedNode.src:clonedNode.href.baseVal,[2,Promise.resolve(src).then(function(url){return(0,getBlobFromURL_1.getBlobFromURL)(url,options)}).then(function(data){return(0,util_1.makeDataUrl)(data.blob,(0,util_1.getMimeType)(src)||data.contentType)}).then(function(dataURL){return new Promise(function(resolve,reject){clonedNode.onload=resolve,clonedNode.onerror=reject,clonedNode instanceof HTMLImageElement?(clonedNode.srcset="",clonedNode.src=dataURL):clonedNode.href.baseVal=dataURL})}).then(function(){return clonedNode},function(){return clonedNode})])})})}function embedChildren(clonedNode,options){return __awaiter(this,void 0,void 0,function(){var children,deferreds;return __generator(this,function(_a){return children=(0,util_1.toArray)(clonedNode.childNodes),deferreds=children.map(function(child){return embedImages(child,options)}),[2,Promise.all(deferreds).then(function(){return clonedNode})]})})}function embedImages(clonedNode,options){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(_a){return clonedNode instanceof Element?[2,Promise.resolve(clonedNode).then(function(node){return embedBackground(node,options)}).then(function(node){return embedImageNode(node,options)}).then(function(node){return embedChildren(node,options)})]:[2,Promise.resolve(clonedNode)]})})}exports.embedImages=embedImages},86896:function(__unused_webpack_module,exports,__webpack_require__){var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})},__generator=this&&this.__generator||function(thisArg,body){var _={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},f,y,t,g;return g={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=op[0]&2?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[op[0]&2,t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(t=_.trys,!(t=t.length>0&&t[t.length-1])&&(op[0]===6||op[0]===2)){_=0;continue}if(op[0]===3&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(op[0]===6&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(op[0]&5)throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.embedResources=exports.shouldEmbed=exports.embed=exports.parseURLs=exports.toRegex=void 0;var getBlobFromURL_1=__webpack_require__(65177),util_1=__webpack_require__(61607),URL_REGEX=/url\((['"]?)([^'"]+?)\1\)/g,URL_WITH_FORMAT_REGEX=/url\([^)]+\)\s*format\((["'])([^"']+)\1\)/g,FONT_SRC_REGEX=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function toRegex(url){var escaped=url.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(`+escaped+`)(['"]?\\))`,"g")}exports.toRegex=toRegex;function parseURLs(cssText){var result=[];return cssText.replace(URL_REGEX,function(raw,quotation,url){return result.push(url),raw}),result.filter(function(url){return!(0,util_1.isDataUrl)(url)})}exports.parseURLs=parseURLs;function embed(cssText,resourceURL,baseURL,options,get){var resolvedURL=baseURL?(0,util_1.resolveUrl)(resourceURL,baseURL):resourceURL;return Promise.resolve(resolvedURL).then(function(url){return get?get(url):(0,getBlobFromURL_1.getBlobFromURL)(url,options)}).then(function(data){return typeof data=="string"?(0,util_1.makeDataUrl)(data,(0,util_1.getMimeType)(resourceURL)):(0,util_1.makeDataUrl)(data.blob,(0,util_1.getMimeType)(resourceURL)||data.contentType)}).then(function(dataURL){return cssText.replace(toRegex(resourceURL),"$1"+dataURL+"$3")}).then(function(content){return content},function(){return resolvedURL})}exports.embed=embed;function filterPreferredFontFormat(str,_a){var preferredFontFormat=_a.preferredFontFormat;return preferredFontFormat?str.replace(FONT_SRC_REGEX,function(match){for(;;){var _a2=URL_WITH_FORMAT_REGEX.exec(match)||[],src=_a2[0],format=_a2[2];if(!format)return"";if(format===preferredFontFormat)return"src: "+src+";"}}):str}function shouldEmbed(url){return url.search(URL_REGEX)!==-1}exports.shouldEmbed=shouldEmbed;function embedResources(cssText,baseUrl,options){return __awaiter(this,void 0,void 0,function(){var filteredCSSText;return __generator(this,function(_a){return shouldEmbed(cssText)?(filteredCSSText=filterPreferredFontFormat(cssText,options),[2,Promise.resolve(filteredCSSText).then(parseURLs).then(function(urls){return urls.reduce(function(deferred,url){return deferred.then(function(css){return embed(css,url,baseUrl,options)})},Promise.resolve(filteredCSSText))})]):[2,Promise.resolve(cssText)]})})}exports.embedResources=embedResources},52825:function(__unused_webpack_module,exports,__webpack_require__){var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})},__generator=this&&this.__generator||function(thisArg,body){var _={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},f,y,t,g;return g={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=op[0]&2?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[op[0]&2,t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(t=_.trys,!(t=t.length>0&&t[t.length-1])&&(op[0]===6||op[0]===2)){_=0;continue}if(op[0]===3&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(op[0]===6&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(op[0]&5)throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.embedWebFonts=exports.getWebFontCSS=void 0;var util_1=__webpack_require__(61607),embedResources_1=__webpack_require__(86896),cssFetchCache={};function fetchCSS(url){var cache=cssFetchCache[url];if(cache!=null)return cache;var deferred=window.fetch(url).then(function(res){return{url,cssText:res.text()}});return cssFetchCache[url]=deferred,deferred}function embedFonts(meta){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(_a){return[2,meta.cssText.then(function(raw){var cssText=raw,regexUrl=/url\(["']?([^"')]+)["']?\)/g,fontLocs=cssText.match(/url\([^)]+\)/g)||[],loadFonts=fontLocs.map(function(location){var url=location.replace(regexUrl,"$1");return url.startsWith("https://")||(url=new URL(url,meta.url).href),window.fetch(url).then(function(res){return res.blob()}).then(function(blob){return new Promise(function(resolve,reject){var reader=new FileReader;reader.onloadend=function(){cssText=cssText.replace(location,"url("+reader.result+")"),resolve([location,reader.result])},reader.onerror=reject,reader.readAsDataURL(blob)})})});return Promise.all(loadFonts).then(function(){return cssText})})]})})}function parseCSS(source){if(source==null)return[];for(var result=[],commentsRegex=/(\/\*[\s\S]*?\*\/)/gi,cssText=source.replace(commentsRegex,""),keyframesRegex=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");;){var matches=keyframesRegex.exec(cssText);if(matches===null)break;result.push(matches[0])}cssText=cssText.replace(keyframesRegex,"");for(var importRegex=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,combinedCSSRegex="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",unifiedRegex=new RegExp(combinedCSSRegex,"gi");;){var matches=importRegex.exec(cssText);if(matches===null){if(matches=unifiedRegex.exec(cssText),matches===null)break;importRegex.lastIndex=unifiedRegex.lastIndex}else unifiedRegex.lastIndex=importRegex.lastIndex;result.push(matches[0])}return result}function getCSSRules(styleSheets){return __awaiter(this,void 0,void 0,function(){var ret,deferreds;return __generator(this,function(_a){return ret=[],deferreds=[],styleSheets.forEach(function(sheet){if("cssRules"in sheet)try{(0,util_1.toArray)(sheet.cssRules).forEach(function(item,index){if(item.type===CSSRule.IMPORT_RULE){var importIndex_1=index+1,url=item.href,deferred=fetchCSS(url).then(function(metadata){return metadata?embedFonts(metadata):""}).then(function(cssText){return parseCSS(cssText).forEach(function(rule){try{sheet.insertRule(rule,rule.startsWith("@import")?importIndex_1+=1:sheet.cssRules.length)}catch(error){console.error("Error inserting rule from remote css",{rule,error})}})}).catch(function(e){console.error("Error loading remote css",e.toString())});deferreds.push(deferred)}})}catch(e){var inline_1=styleSheets.find(function(a){return a.href==null})||document.styleSheets[0];sheet.href!=null&&deferreds.push(fetchCSS(sheet.href).then(function(metadata){return metadata?embedFonts(metadata):""}).then(function(cssText){return parseCSS(cssText).forEach(function(rule){inline_1.insertRule(rule,sheet.cssRules.length)})}).catch(function(err){console.error("Error loading remote stylesheet",err.toString())})),console.error("Error inlining remote css file",e.toString())}}),[2,Promise.all(deferreds).then(function(){return styleSheets.forEach(function(sheet){if("cssRules"in sheet)try{(0,util_1.toArray)(sheet.cssRules).forEach(function(item){ret.push(item)})}catch(e){console.error("Error while reading CSS rules from "+sheet.href,e.toString())}}),ret})]})})}function getWebFontRules(cssRules){return cssRules.filter(function(rule){return rule.type===CSSRule.FONT_FACE_RULE}).filter(function(rule){return(0,embedResources_1.shouldEmbed)(rule.style.getPropertyValue("src"))})}function parseWebFontRules(node){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(_a){return[2,new Promise(function(resolve,reject){node.ownerDocument==null&&reject(new Error("Provided element is not within a Document")),resolve((0,util_1.toArray)(node.ownerDocument.styleSheets))}).then(function(styleSheets){return getCSSRules(styleSheets)}).then(getWebFontRules)]})})}function getWebFontCSS(node,options){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(_a){return[2,parseWebFontRules(node).then(function(rules){return Promise.all(rules.map(function(rule){var baseUrl=rule.parentStyleSheet?rule.parentStyleSheet.href:null;return(0,embedResources_1.embedResources)(rule.cssText,baseUrl,options)}))}).then(function(cssTexts){return cssTexts.join(`
`)})]})})}exports.getWebFontCSS=getWebFontCSS;function embedWebFonts(clonedNode,options){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(_a){return[2,(options.fontEmbedCSS!=null?Promise.resolve(options.fontEmbedCSS):getWebFontCSS(clonedNode,options)).then(function(cssText){var styleNode=document.createElement("style"),sytleContent=document.createTextNode(cssText);return styleNode.appendChild(sytleContent),clonedNode.firstChild?clonedNode.insertBefore(styleNode,clonedNode.firstChild):clonedNode.appendChild(styleNode),clonedNode})]})})}exports.embedWebFonts=embedWebFonts},65177:function(__unused_webpack_module,exports,__webpack_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.getBlobFromURL=void 0;var util_1=__webpack_require__(61607),cache={};function getCacheKey(url){var key=url.replace(/\?.*/,"");return/ttf|otf|eot|woff2?/i.test(key)&&(key=key.replace(/.*\//,"")),key}function getBlobFromURL(url,options){var cacheKey=getCacheKey(url);if(cache[cacheKey]!=null)return cache[cacheKey];options.cacheBust&&(url+=(/\?/.test(url)?"&":"?")+new Date().getTime());var failed=function(reason){var placeholder="";if(options.imagePlaceholder){var parts=options.imagePlaceholder.split(/,/);parts&&parts[1]&&(placeholder=parts[1])}var msg="Failed to fetch resource: "+url;return reason&&(msg=typeof reason=="string"?reason:reason.message),msg&&console.error(msg),{blob:placeholder,contentType:""}},deferred=window.fetch(url).then(function(res){return res.blob().then(function(blob){return{blob,contentType:res.headers.get("Content-Type")||""}})}).then(function(_a){var blob=_a.blob,contentType=_a.contentType;return new Promise(function(resolve,reject){var reader=new FileReader;reader.onloadend=function(){return resolve({contentType,blob:reader.result})},reader.onerror=reject,reader.readAsDataURL(blob)})}).then(function(_a){var blob=_a.blob,contentType=_a.contentType;return{contentType,blob:(0,util_1.parseDataUrlContent)(blob)}}).catch(failed);return cache[cacheKey]=deferred,deferred}exports.getBlobFromURL=getBlobFromURL},6957:function(__unused_webpack_module,exports,__webpack_require__){var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})},__generator=this&&this.__generator||function(thisArg,body){var _={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},f,y,t,g;return g={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=op[0]&2?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[op[0]&2,t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(t=_.trys,!(t=t.length>0&&t[t.length-1])&&(op[0]===6||op[0]===2)){_=0;continue}if(op[0]===3&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(op[0]===6&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(op[0]&5)throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.getFontEmbedCSS=exports.toBlob=exports.toJpeg=exports.toPng=exports.toPixelData=exports.toCanvas=exports.toSvg=void 0;var cloneNode_1=__webpack_require__(99509),embedImages_1=__webpack_require__(1326),applyStyleWithOptions_1=__webpack_require__(81139),embedWebFonts_1=__webpack_require__(52825),util_1=__webpack_require__(61607);function getImageSize(node,options){options===void 0&&(options={});var width=options.width||(0,util_1.getNodeWidth)(node),height=options.height||(0,util_1.getNodeHeight)(node);return{width,height}}function toSvg(node,options){return options===void 0&&(options={}),__awaiter(this,void 0,void 0,function(){var _a,width,height;return __generator(this,function(_b){return _a=getImageSize(node,options),width=_a.width,height=_a.height,[2,Promise.resolve(node).then(function(nativeNode){return(0,cloneNode_1.cloneNode)(nativeNode,options,!0)}).then(function(clonedNode){return(0,embedWebFonts_1.embedWebFonts)(clonedNode,options)}).then(function(clonedNode){return(0,embedImages_1.embedImages)(clonedNode,options)}).then(function(clonedNode){return(0,applyStyleWithOptions_1.applyStyleWithOptions)(clonedNode,options)}).then(function(clonedNode){return(0,util_1.nodeToDataURL)(clonedNode,width,height)})]})})}exports.toSvg=toSvg;var dimensionCanvasLimit=16384;function checkCanvasDimensions(canvas){(canvas.width>dimensionCanvasLimit||canvas.height>dimensionCanvasLimit)&&(canvas.width>dimensionCanvasLimit&&canvas.height>dimensionCanvasLimit?canvas.width>canvas.height?(canvas.height*=dimensionCanvasLimit/canvas.width,canvas.width=dimensionCanvasLimit):(canvas.width*=dimensionCanvasLimit/canvas.height,canvas.height=dimensionCanvasLimit):canvas.width>dimensionCanvasLimit?(canvas.height*=dimensionCanvasLimit/canvas.width,canvas.width=dimensionCanvasLimit):(canvas.width*=dimensionCanvasLimit/canvas.height,canvas.height=dimensionCanvasLimit))}function toCanvas(node,options){return options===void 0&&(options={}),__awaiter(this,void 0,void 0,function(){return __generator(this,function(_a){return[2,toSvg(node,options).then(util_1.createImage).then(function(img){var canvas=document.createElement("canvas"),context=canvas.getContext("2d"),ratio=options.pixelRatio||(0,util_1.getPixelRatio)(),_a2=getImageSize(node,options),width=_a2.width,height=_a2.height,canvasWidth=options.canvasWidth||width,canvasHeight=options.canvasHeight||height;return canvas.width=canvasWidth*ratio,canvas.height=canvasHeight*ratio,options.skipAutoScale||checkCanvasDimensions(canvas),canvas.style.width=""+canvasWidth,canvas.style.height=""+canvasHeight,options.backgroundColor&&(context.fillStyle=options.backgroundColor,context.fillRect(0,0,canvas.width,canvas.height)),context.drawImage(img,0,0,canvas.width,canvas.height),canvas})]})})}exports.toCanvas=toCanvas;function toPixelData(node,options){return options===void 0&&(options={}),__awaiter(this,void 0,void 0,function(){var _a,width,height;return __generator(this,function(_b){return _a=getImageSize(node,options),width=_a.width,height=_a.height,[2,toCanvas(node,options).then(function(canvas){var ctx=canvas.getContext("2d");return ctx.getImageData(0,0,width,height).data})]})})}exports.toPixelData=toPixelData;function toPng(node,options){return options===void 0&&(options={}),__awaiter(this,void 0,void 0,function(){return __generator(this,function(_a){return[2,toCanvas(node,options).then(function(canvas){return canvas.toDataURL()})]})})}exports.toPng=toPng;function toJpeg(node,options){return options===void 0&&(options={}),__awaiter(this,void 0,void 0,function(){return __generator(this,function(_a){return[2,toCanvas(node,options).then(function(canvas){return canvas.toDataURL("image/jpeg",options.quality||1)})]})})}exports.toJpeg=toJpeg;function toBlob(node,options){return options===void 0&&(options={}),__awaiter(this,void 0,void 0,function(){return __generator(this,function(_a){return[2,toCanvas(node,options).then(util_1.canvasToBlob)]})})}exports.toBlob=toBlob;function getFontEmbedCSS(node,options){return options===void 0&&(options={}),__awaiter(this,void 0,void 0,function(){return __generator(this,function(_a){return[2,(0,embedWebFonts_1.getWebFontCSS)(node,options)]})})}exports.getFontEmbedCSS=getFontEmbedCSS},61607:function(__unused_webpack_module,exports){var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})},__generator=this&&this.__generator||function(thisArg,body){var _={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},f,y,t,g;return g={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=op[0]&2?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[op[0]&2,t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(t=_.trys,!(t=t.length>0&&t[t.length-1])&&(op[0]===6||op[0]===2)){_=0;continue}if(op[0]===3&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(op[0]===6&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(op[0]&5)throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.nodeToDataURL=exports.svgToDataURL=exports.createImage=exports.canvasToBlob=exports.getPixelRatio=exports.getNodeHeight=exports.getNodeWidth=exports.toArray=exports.delay=exports.uuid=exports.parseDataUrlContent=exports.makeDataUrl=exports.isDataUrl=exports.resolveUrl=exports.getMimeType=exports.getExtension=void 0;var WOFF="application/font-woff",JPEG="image/jpeg",mimes={woff:WOFF,woff2:WOFF,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:JPEG,jpeg:JPEG,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"};function getExtension(url){var match=/\.([^./]*?)$/g.exec(url);return match?match[1]:""}exports.getExtension=getExtension;function getMimeType(url){var extension=getExtension(url).toLowerCase();return mimes[extension]||""}exports.getMimeType=getMimeType;function resolveUrl(url,baseUrl){if(url.match(/^[a-z]+:\/\//i))return url;if(url.match(/^\/\//))return window.location.protocol+url;if(url.match(/^[a-z]+:/i))return url;var doc=document.implementation.createHTMLDocument(),base=doc.createElement("base"),a=doc.createElement("a");return doc.head.appendChild(base),doc.body.appendChild(a),baseUrl&&(base.href=baseUrl),a.href=url,a.href}exports.resolveUrl=resolveUrl;function isDataUrl(url){return url.search(/^(data:)/)!==-1}exports.isDataUrl=isDataUrl;function makeDataUrl(content,mimeType){return"data:"+mimeType+";base64,"+content}exports.makeDataUrl=makeDataUrl;function parseDataUrlContent(dataURL){return dataURL.split(/,/)[1]}exports.parseDataUrlContent=parseDataUrlContent,exports.uuid=function(){var counter=0,random=function(){return("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)};return function(){return counter+=1,"u"+random()+counter}}();var delay=function(ms){return function(args){return new Promise(function(resolve){return setTimeout(function(){return resolve(args)},ms)})}};exports.delay=delay;function toArray(arrayLike){for(var arr=[],i=0,l=arrayLike.length;i<l;i+=1)arr.push(arrayLike[i]);return arr}exports.toArray=toArray;function px(node,styleProperty){var val=window.getComputedStyle(node).getPropertyValue(styleProperty);return parseFloat(val.replace("px",""))}function getNodeWidth(node){var leftBorder=px(node,"border-left-width"),rightBorder=px(node,"border-right-width");return node.clientWidth+leftBorder+rightBorder}exports.getNodeWidth=getNodeWidth;function getNodeHeight(node){var topBorder=px(node,"border-top-width"),bottomBorder=px(node,"border-bottom-width");return node.clientHeight+topBorder+bottomBorder}exports.getNodeHeight=getNodeHeight;function getPixelRatio(){var ratio,FINAL_PROCESS;try{FINAL_PROCESS=process}catch(e){}var val=FINAL_PROCESS&&FINAL_PROCESS.env?FINAL_PROCESS.env.devicePixelRatio:null;return val&&(ratio=parseInt(val,10),Number.isNaN(ratio)&&(ratio=1)),ratio||window.devicePixelRatio||1}exports.getPixelRatio=getPixelRatio;function canvasToBlob(canvas){return canvas.toBlob?new Promise(function(resolve){return canvas.toBlob(resolve)}):new Promise(function(resolve){for(var binaryString=window.atob(canvas.toDataURL().split(",")[1]),len=binaryString.length,binaryArray=new Uint8Array(len),i=0;i<len;i+=1)binaryArray[i]=binaryString.charCodeAt(i);resolve(new Blob([binaryArray],{type:"image/png"}))})}exports.canvasToBlob=canvasToBlob;function createImage(url){return new Promise(function(resolve,reject){var img=new Image;img.onload=function(){return resolve(img)},img.onerror=reject,img.crossOrigin="anonymous",img.decoding="sync",img.src=url})}exports.createImage=createImage;function svgToDataURL(svg){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(_a){return[2,Promise.resolve().then(function(){return new XMLSerializer().serializeToString(svg)}).then(encodeURIComponent).then(function(html){return"data:image/svg+xml;charset=utf-8,"+html})]})})}exports.svgToDataURL=svgToDataURL;function nodeToDataURL(node,width,height){return __awaiter(this,void 0,void 0,function(){var xmlns,svg,foreignObject;return __generator(this,function(_a){return xmlns="http://www.w3.org/2000/svg",svg=document.createElementNS(xmlns,"svg"),foreignObject=document.createElementNS(xmlns,"foreignObject"),svg.setAttribute("width",""+width),svg.setAttribute("height",""+height),svg.setAttribute("viewBox","0 0 "+width+" "+height),foreignObject.setAttribute("width","100%"),foreignObject.setAttribute("height","100%"),foreignObject.setAttribute("x","0"),foreignObject.setAttribute("y","0"),foreignObject.setAttribute("externalResourcesRequired","true"),svg.appendChild(foreignObject),foreignObject.appendChild(node),[2,svgToDataURL(svg)]})})}exports.nodeToDataURL=nodeToDataURL}}]);

//# sourceMappingURL=5139.fc21108f.chunk.js.map