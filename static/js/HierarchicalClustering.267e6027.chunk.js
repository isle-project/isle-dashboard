"use strict";(self.webpackChunkisle_dashboard=self.webpackChunkisle_dashboard||[]).push([[898],{97343:function(module,__unused_webpack_exports,__webpack_require__){var isArrayArray=__webpack_require__(10558);module.exports=isArrayArray},10558:function(module,__unused_webpack_exports,__webpack_require__){var arrayfun=__webpack_require__(38478),isArray=__webpack_require__(76266),isArrayArray=arrayfun(isArray);module.exports=isArrayArray},11450:function(module){function argmax(arr){if(!Array.isArray(arr))throw new TypeError("argmax()::invalid input argument. Must provide an array.");for(var len=arr.length,max=arr[0],idx=[0],val,i=1;i<len;i++)val=arr[i],val>max?(max=val,idx.length=0,idx.push(i)):val===max&&idx.push(i);return idx}module.exports=argmax},9674:function(module,__unused_webpack_exports,__webpack_require__){var isArray=__webpack_require__(14653),isFunction=__webpack_require__(79882);function chebyshev(x,y,clbk){var len,d,v,i;if(!isArray(x))throw new TypeError("chebyshev()::invalid input argument. First argument must be an array. Value: `"+x+"`.");if(!isArray(y))throw new TypeError("chebyshev()::invalid input argument. Second argument must be an array. Value: `"+y+"`.");if(arguments.length>2&&!isFunction(clbk))throw new TypeError("chebyshev()::invalid input argument. Accessor must be a function. Value: `"+clbk+"`.");if(len=x.length,len!==y.length)throw new Error("chebyshev()::invalid input arguments. Input arrays must have the same length.");if(!len)return null;if(clbk)for(v=clbk(x[0],0,0)-clbk(y[0],0,1),d=v<0?-v:v,i=1;i<len;i++)v=clbk(x[i],i,0)-clbk(y[i],i,1),v<0&&(v=-v),v>d&&(d=v);else for(v=x[0]-y[0],d=v<0?-v:v,i=1;i<len;i++)v=x[i]-y[i],v<0&&(v=-v),v>d&&(d=v);return d}module.exports=chebyshev},44462:function(module,__unused_webpack_exports,__webpack_require__){var similarity=__webpack_require__(61378);function distance(x,y,clbk){var s;return arguments.length>2?s=similarity(x,y,clbk):s=similarity(x,y),s!==null?1-s:s}module.exports=distance},61378:function(module,__unused_webpack_exports,__webpack_require__){var dot=__webpack_require__(56307),l2norm=__webpack_require__(4059),isArray=__webpack_require__(14653),isFunction=__webpack_require__(79882);function partial(fn,j){return function(d,i){return fn(d,i,j)}}function similarity(x,y,clbk){var a,b,c;if(!isArray(x))throw new TypeError("cosine-similarity()::invalid input argument. First argument must be an array. Value: `"+x+"`.");if(!isArray(y))throw new TypeError("cosine-similarity()::invalid input argument. Second argument must be an array. Value: `"+y+"`.");if(arguments.length>2&&!isFunction(clbk))throw new TypeError("cosine-similarity()::invalid input argument. Accessor must be a function. Value: `"+clbk+"`.");if(x.length!==y.length)throw new Error("cosine-similarity()::invalid input argument. Input arrays must have the same length.");return x.length?(clbk?(a=dot(x,y,clbk),b=l2norm(x,partial(clbk,0)),c=l2norm(y,partial(clbk,1))):(a=dot(x,y),b=l2norm(x),c=l2norm(y)),a/(b*c)):null}module.exports=similarity},56307:function(module,__unused_webpack_exports,__webpack_require__){var isArray=__webpack_require__(14653),isFunction=__webpack_require__(79882);function dot(x,y,clbk){if(!isArray(x))throw new TypeError("dot()::invalid input argument. First argument must be an array. Value: `"+x+"`.");if(!isArray(y))throw new TypeError("dot()::invalid input argument. Second argument must be an array. Value: `"+y+"`.");if(arguments.length>2&&!isFunction(clbk))throw new TypeError("dot()::invalid input argument. Accessor must be a function. Value: `"+clbk+"`.");var len=x.length,sum=0,i;if(len!==y.length)throw new Error("dot()::invalid input argument. Arrays must be of equal length.");if(!len)return null;if(clbk)for(i=0;i<len;i++)sum+=clbk(x[i],i,0)*clbk(y[i],i,1);else for(i=0;i<len;i++)sum+=x[i]*y[i];return sum}module.exports=dot},99538:function(module,__unused_webpack_exports,__webpack_require__){var isArray=__webpack_require__(14653),isFunction=__webpack_require__(79882);function euclidean(x,y,clbk){var len,val,abs,t,s,r,i;if(!isArray(x))throw new TypeError("euclidean()::invalid input argument. First argument must be an array. Value: `"+x+"`.");if(!isArray(y))throw new TypeError("euclidean()::invalid input argument. Second argument must be an array. Value: `"+y+"`.");if(arguments.length>2&&!isFunction(clbk))throw new TypeError("euclidean()::invalid input argument. Accessor must be a function. Value: `"+clbk+"`.");if(len=x.length,len!==y.length)throw new Error("euclidean()::invalid input arguments. Input arrays must have the same length.");if(!len)return null;if(t=0,s=1,clbk)for(i=0;i<len;i++)val=clbk(x[i],i,0)-clbk(y[i],i,1),abs=val<0?-val:val,abs>0&&(abs>t?(r=t/val,s=1+s*r*r,t=abs):(r=val/t,s+=r*r));else for(i=0;i<len;i++)val=x[i]-y[i],abs=val<0?-val:val,abs>0&&(abs>t?(r=t/val,s=1+s*r*r,t=abs):(r=val/t,s+=r*r));return t*Math.sqrt(s)}module.exports=euclidean},31927:function(module,__unused_webpack_exports,__webpack_require__){var isArray=__webpack_require__(14653),isString=__webpack_require__(65859),isFunction=__webpack_require__(79882);function hamming(a,b,clbk){var aType=isString(a),bType=isString(b),len,d,i;if(!isArray(a)&&!aType)throw new TypeError("hamming()::invalid input argument. Sequence must be either an array or a string. Value: `"+a+"`.");if(!isArray(b)&&!bType)throw new TypeError("hamming()::invalid input argument. Sequence must be either an array or a string. Value: `"+b+"`.");if(aType!==bType)throw new TypeError("hamming()::invalid input arguments. Sequences must be the same type; i.e., both strings or both arrays.");if(arguments.length>2&&!isFunction(clbk))throw new TypeError("hamming()::invalid input argument. Accessor must be a function. Value: `"+clbk+"`.");if(len=a.length,len!==b.length)throw new Error("hamming()::invalid input arguments. Sequences must be the same length.");if(d=0,clbk)for(i=0;i<len;i++)clbk(a[i],i,0)!==clbk(b[i],i,1)&&(d+=1);else for(i=0;i<len;i++)a[i]!==b[i]&&(d+=1);return d}module.exports=hamming},4059:function(module,__unused_webpack_exports,__webpack_require__){var isArray=__webpack_require__(14653),isFunction=__webpack_require__(79882);function l2norm(arr,clbk){if(!isArray(arr))throw new TypeError("l2norm()::invalid input argument. Must provide an array.  Value: `"+arr+"`.");if(arguments.length>1&&!isFunction(clbk))throw new TypeError("l2norm()::invalid input argument. Accessor must be a function. Value: `"+clbk+"`.");var len=arr.length,t=0,s=1,r,val,abs,i;if(!len)return null;if(clbk)for(i=0;i<len;i++)val=clbk(arr[i],i),abs=val<0?-val:val,abs>0&&(abs>t?(r=t/val,s=1+s*r*r,t=abs):(r=val/t,s=s+r*r));else for(i=0;i<len;i++)val=arr[i],abs=val<0?-val:val,abs>0&&(abs>t?(r=t/val,s=1+s*r*r,t=abs):(r=val/t,s=s+r*r));return t*Math.sqrt(s)}module.exports=l2norm},77972:function(module,__unused_webpack_exports,__webpack_require__){var isArray=__webpack_require__(14653),isFunction=__webpack_require__(79882);function manhattan(x,y,clbk){var len,d,v,i;if(!isArray(x))throw new TypeError("manhattan()::invalid input argument. First argument must be an array. Value: `"+x+"`.");if(!isArray(y))throw new TypeError("manhattan()::invalid input argument. Second argument must be an array. Value: `"+y+"`.");if(arguments.length>2&&!isFunction(clbk))throw new TypeError("manhattan()::invalid input argument. Accessor must be a function. Value: `"+clbk+"`.");if(len=x.length,len!==y.length)throw new Error("manhattan()::invalid input arguments. Input arrays must have the same length.");if(!len)return null;if(d=0,clbk)for(i=0;i<len;i++)v=clbk(x[i],i,0)-clbk(y[i],i,1),d+=v<0?-v:v;else for(i=0;i<len;i++)v=x[i]-y[i],d+=v<0?-v:v;return d}module.exports=manhattan},76599:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:function(){return main}});var react=__webpack_require__(45254),prop_types=__webpack_require__(45697),prop_types_default=__webpack_require__.n(prop_types),commonjs=__webpack_require__(81468),Alert=__webpack_require__(24032),Alert_default=__webpack_require__.n(Alert),lib=__webpack_require__(55809),lib_default=__webpack_require__.n(lib),alphanumeric=__webpack_require__(68681),is_array_lib=__webpack_require__(76266),is_array_lib_default=__webpack_require__.n(is_array_lib),contains_lib=__webpack_require__(61635),contains_lib_default=__webpack_require__.n(contains_lib);function appendCSS(cssText,element){const styleElement=document.createElement("style");if(styleElement.setAttribute("type","text/css"),styleElement.innerHTML=cssText,is_array_lib_default()(element.children)){const refNode=element.children[0]||null;element.insertBefore(styleElement,refNode)}}function getCSSStyles(parentElement){const selectorTextArr=[];if(selectorTextArr.push("#"+parentElement.id),is_array_lib_default()(parentElement.classList))for(let c=0;c<parentElement.classList.length;c++)contains_lib_default()(selectorTextArr,"."+parentElement.classList[c])||selectorTextArr.push("."+parentElement.classList[c]);const nodes=parentElement.getElementsByTagName("*");for(let i=0;i<nodes.length;i++){const id=nodes[i].id;contains_lib_default()(selectorTextArr,"#"+id)||selectorTextArr.push("#"+id);const classes=nodes[i].classList;if(is_array_lib_default()(classes))for(let c=0;c<classes.length;c++)contains_lib_default()(selectorTextArr,"."+classes[c])||selectorTextArr.push("."+classes[c])}let extractedCSSText="";for(let i=0;i<document.styleSheets.length;i++){const s=document.styleSheets[i];try{if(!s.cssRules)continue}catch(e){if(e.name!=="SecurityError")throw e;continue}const cssRules=s.cssRules;for(let r=0;r<cssRules.length;r++)contains_lib_default()(selectorTextArr,cssRules[r].selectorText)&&(extractedCSSText+=cssRules[r].cssText)}return extractedCSSText}function getSVGString(svgNode){if(!svgNode)return"";svgNode.setAttribute("xlink","http://www.w3.org/1999/xlink"),svgNode.setAttribute("style","background: white;");const cssStyleText=getCSSStyles(svgNode);appendCSS(cssStyleText,svgNode);let svgString=new XMLSerializer().serializeToString(svgNode);return svgString=svgString.replace(/(\w+)?:?xlink=/g,"xmlns:xlink="),svgString=svgString.replace(/NS\d+:href/g,"xlink:href"),svgString}function svgString2Image(svgString,width,height,callback){const imgsrc="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(svgString))),canvas=document.createElement("canvas"),context=canvas.getContext("2d");canvas.width=width,canvas.height=height;const image=new Image;image.onload=function(){context.clearRect(0,0,width,height),context.drawImage(image,0,0,width,height),canvas.toBlob(function(blob){const filesize=lib_default()(blob.length/1024)+" KB";if(callback)return callback(blob,filesize)})},image.src=imgsrc}var html_to_clipboard=__webpack_require__(59177),blob_to_base64=__webpack_require__(54925),d3_node=__webpack_require__(66668),__defProp=Object.defineProperty,__defNormalProp=(obj,key,value)=>key in obj?__defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value}):obj[key]=value,__publicField=(obj,key,value)=>(__defNormalProp(obj,typeof key!="symbol"?key+"":key,value),value);function D3blackbox(D3render){return class extends react.Component{constructor(){super(...arguments),__publicField(this,"anchor",react.createRef())}componentDidMount(){D3render(this.anchor,this.props,this.state)}componentDidUpdate(){D3render(this.anchor,this.props,this.state)}render(){const{x,y}=this.props,Component2=this.props.component||"g";return react.createElement(Component2,{transform:`translate(${x}, ${y})`,ref:this.anchor})}}}var dendrogram=D3blackbox((anchor,props,state)=>{const svg=d3_node.select(anchor.current),{width,height,data}=props,margin={top:40,left:40,bottom:0,right:0},innerWidth=width-margin.left-margin.right,innerHeight=height-margin.top-margin.bottom,fontSize=props.fontSize||16,magicWidthDivisor=1.35;draw(data);function draw(data2){const root=(data3=>{const root2=d3_node.hierarchy(data3);return root2.dx=15,root2.dy=innerWidth/(root2.height+1),d3_node.cluster().size([innerHeight,innerWidth/magicWidthDivisor])(root2)})(data2);let x0=1/0,x1=-x0;root.each(d=>{d.x>x1&&(x1=d.x),d.x<x0&&(x0=d.x)});function collapse(d){d.children&&(d._children=d.children,d._children.forEach(collapse),d.value<props.cutoff&&(d.children=null))}root.children.forEach(collapse);const magicXTranslateDivisor=6,xTranslate=root.dy/magicXTranslateDivisor+margin.left,yTranslate=root.dx-x0+margin.top,g=svg.append("g").attr("font-family","sans-serif").attr("font-size",fontSize).attr("transform",`translate(${xTranslate},${yTranslate})`);g.append("g").attr("fill","none").attr("stroke","#555").attr("stroke-opacity",.4).attr("stroke-width",1).selectAll("path").data(root.links()).join("path").attr("d",d=>`
				M${d.target.y},${d.target.x}
				C${d.source.y+root.dy/2},${d.target.x}
				 ${d.source.y+root.dy/2},${d.source.x}
				 ${d.source.y},${d.source.x}
			`);const node=g.append("g").attr("stroke-linejoin","round").attr("stroke-width",.1875*fontSize).selectAll("g").data(root.descendants().reverse()).join("g").attr("transform",d=>`translate(${d.y},${d.x})`);node.append("circle").attr("fill",d=>d.children?"#555":"#999").attr("r",fontSize*.15).on("click",d=>{d.children=d.children?null:d._children}),node.append("text").attr("dy","0.1em").attr("x",d=>d.children?-6:6).attr("font-size",fontSize).text(d=>d.data.name).filter(d=>d.children).attr("text-anchor","end").clone(!0).lower().attr("stroke","white")}}),Button=__webpack_require__(30276),Button_default=__webpack_require__.n(Button),Modal=__webpack_require__(33089),Modal_default=__webpack_require__.n(Modal),tooltip=__webpack_require__(77287),fullscreen_button_defProp=Object.defineProperty,fullscreen_button_defNormalProp=(obj,key,value)=>key in obj?fullscreen_button_defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value}):obj[key]=value,fullscreen_button_publicField=(obj,key,value)=>(fullscreen_button_defNormalProp(obj,typeof key!="symbol"?key+"":key,value),value);class FullscreenButton extends react.Component{constructor(){super(),fullscreen_button_publicField(this,"toggleFullscreen",()=>{this.setState({fullscreen:!this.state.fullscreen})}),this.state={fullscreen:!1}}render(){const{t}=this.props;return react.createElement(react.Fragment,null,react.createElement(tooltip.Z,{id:"fullscreen_tooltip",placement:"bottom",tooltip:t("toggle-fullscreen")},react.createElement(Button_default(),{"aria-label":t("toggle-fullscreen"),variant:"outline-danger",size:"sm",onClick:this.toggleFullscreen,style:{position:"absolute",top:"10px",right:"32px"}},react.createElement("div",{className:"fa fa-window-maximize"}))),react.createElement(Modal_default(),{show:this.state.fullscreen,onHide:this.toggleFullscreen,dialogClassName:"modal-100w"},react.createElement(Modal_default().Header,{closeButton:!0},react.createElement(Modal_default().Title,{as:"h1"},t("hierarchical-clustering"))),react.createElement(Modal_default().Body,{style:{height:.75*window.innerHeight,width:"100%",fontSize:32,overflow:"scroll"}},this.props.dendrogram),react.createElement(Modal_default().Footer,null,react.createElement(Button_default(),{onClick:this.toggleFullscreen},t("close")))))}}FullscreenButton.propTypes={dendrogram:prop_types_default().node.isRequired};var fullscreen_button=FullscreenButton,locales=__webpack_require__(29108),compute_argmax_lib=__webpack_require__(11450),compute_argmax_lib_default=__webpack_require__.n(compute_argmax_lib),compute_chebyshev_distance_lib=__webpack_require__(9674),compute_chebyshev_distance_lib_default=__webpack_require__.n(compute_chebyshev_distance_lib),compute_cosine_distance_lib=__webpack_require__(44462),compute_cosine_distance_lib_default=__webpack_require__.n(compute_cosine_distance_lib),compute_euclidean_distance_lib=__webpack_require__(99538),compute_euclidean_distance_lib_default=__webpack_require__.n(compute_euclidean_distance_lib),compute_hamming_lib=__webpack_require__(31927),compute_hamming_lib_default=__webpack_require__.n(compute_hamming_lib),compute_manhattan_distance_lib=__webpack_require__(77972),compute_manhattan_distance_lib_default=__webpack_require__.n(compute_manhattan_distance_lib),has_own_property_lib=__webpack_require__(10813),has_own_property_lib_default=__webpack_require__.n(has_own_property_lib),is_object_lib=__webpack_require__(21405),is_object_lib_default=__webpack_require__.n(is_object_lib),is_array_array_lib=__webpack_require__(97343),is_array_array_lib_default=__webpack_require__.n(is_array_array_lib),is_integer_lib=__webpack_require__(28778),is_integer_lib_default=__webpack_require__.n(is_integer_lib),is_null_lib=__webpack_require__(95447),is_null_lib_default=__webpack_require__.n(is_null_lib),max_lib=__webpack_require__(47375),max_lib_default=__webpack_require__.n(max_lib),min_lib=__webpack_require__(27813),min_lib_default=__webpack_require__.n(min_lib);function PriorityQueue(values){if(!is_array_lib_default()(values))throw new TypeError("invalid argument. values must be an Array. Option: `"+values+"`.");const _initial=values;if(this._queue=[],_initial)for(let i=0;i<_initial.length;i++)this.insert(_initial[i])}PriorityQueue.prototype.insert=function(elem){const pos=this.search(elem);this._queue.splice(pos,0,elem)},PriorityQueue.prototype.max=function(){return this._queue[this._queue.length-1]},PriorityQueue.prototype.delMax=function(){return this._queue.pop()},PriorityQueue.prototype.delete=function(elem){for(let i=0;i<this.size();i++)if(this._queue[i]===elem){this._queue.splice(i,1);break}},PriorityQueue.prototype.reset=function(){this._queue=[]},PriorityQueue.prototype.size=function(){return this._queue.length},PriorityQueue.prototype.search=function(target){let low=0,high=this._queue.length;for(;low!==high;){const mid=high+low>>>1;this._queue[mid].sim-target.sim<=0?low=mid+1:high=mid}return low};var queue=PriorityQueue;function create2dArray(m,n){const ret=[];for(let i=0;i<m;i++)ret[i]=new Array(n);return ret}function isEqual(input){return d=>d===input}function efficientHAC(data,linkage,distance){const d=data,N=d.length,P=[],I=[],C=create2dArray(N,N);for(let n=0;n<N;n++){for(let i=0;i<N;i++)C[n][i]={sim:1/(1+distance(d[n],d[i])),index:i};I[n]=1,P[n]=new queue(C[n]),P[n].delete(C[n][n])}const A=[];function maxSim(q,i){return I[i]===1?q.max().sim:0}for(let k=0;k<N-1;k++){const k1=compute_argmax_lib_default()(P.map(maxSim))[0],k2=P[k1].max().index;A.push([k1,k2]),I[k2]=0,P[k1].reset();for(let i=0;i<I.length;i++)I[i]===1&&i!==k1&&(P[i].delete(C[i][k1]),P[i].delete(C[i][k2]),C[i][k1].sim=linkage(i,k1,k2,C),P[i].insert(C[i][k1]),C[k1][i].sim=linkage(i,k1,k2,C),P[k1].insert(C[k1][i]))}return A}function hclust(data,opts){let allDistances,distanceFun,linkageFun,distance,linkage;if(!is_array_array_lib_default()(data))throw new TypeError("invalid input argument. Data must be passed as an array of arrays. Value: `"+data+"`.");if(arguments.length>1){if(!is_object_lib_default()(opts))throw new TypeError("invalid input argument. Options argument must be an object. Value: `"+opts+"`.");if(has_own_property_lib_default()(opts,"linkage")&&(linkage=opts.linkage,linkage!=="single"&&linkage!=="complete"))throw new TypeError('invalid option. Linkage option must be either "single" or "complete". Option: `'+linkage+"`.");if(has_own_property_lib_default()(opts,"distance")&&(distance=opts.distance,allDistances=["chebyshev","cosine","euclidean","hamming","manhattan"],!allDistances.some(isEqual(distance))))throw new TypeError('invalid option. Distance option must be "chebyshev", "cosine", "euclidean", "hamming" or "manhattan". Option: `'+distance+"`.")}switch(linkage){case"single":linkageFun=function(i,k1,k2,C){return max_lib_default()(C[i][k1].sim,C[i][k2].sim)};break;default:linkageFun=function(i,k1,k2,C){return min_lib_default()(C[i][k1].sim,C[i][k2].sim)};break}switch(distance){case"chebyshev":distanceFun=compute_chebyshev_distance_lib_default();break;case"cosine":distanceFun=compute_cosine_distance_lib_default();break;case"hamming":distanceFun=compute_hamming_lib_default();break;case"manhattan":distanceFun=compute_manhattan_distance_lib_default();break;default:distanceFun=compute_euclidean_distance_lib_default();break}const A=efficientHAC(data,linkageFun,distanceFun);function getClusters(k){if(!is_integer_lib_default()(k))throw new TypeError("invalid argument. The number of desired clusters must be an integer. Option: `"+k+"`.");const clusters=[];for(let i=0;i<data.length;i++){const current=[i];clusters.push(current)}let nClusters=clusters.length,j=0;for(;nClusters>k;){const merged=clusters[A[j][0]].concat(clusters[A[j][1]]);clusters[A[j][0]]=merged,clusters[A[j][1]]=null,nClusters--,j++}return clusters.filter(c=>!is_null_lib_default()(c))}function getClusterAssignments(k){const clusters=getClusters(k),out=new Array(data.length);for(let i=0;i<clusters.length;i++){const cluster=clusters[i];for(let j=0;j<cluster.length;j++){const idx=cluster[j];out[idx]=`${locales.a.t("StatisticalModels:cluster")} ${i+1}`}}return out}function getTree(){const clusters=[];for(let i=0;i<data.length;i++){const current={};current.name=data[i].join(", "),current.value=1,clusters.push(current)}let j=0;for(;j<A.length;){const node={children:[clusters[A[j][0]],clusters[A[j][1]]],value:clusters[A[j][0]].value+clusters[A[j][1]].value,name:clusters[A[j][0]].value+clusters[A[j][1]].value};clusters[A[j][0]]=node,clusters[A[j][1]]=null,j++}return clusters[0]}return{getClusterAssignments,getClusters,getTree}}var hierarchical_clustering_hclust=hclust,prop_check=__webpack_require__(25048),main_defProp=Object.defineProperty,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,main_defNormalProp=(obj,key,value)=>key in obj?main_defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value}):obj[key]=value,__spreadValues=(a,b)=>{for(var prop in b||(b={}))__hasOwnProp.call(b,prop)&&main_defNormalProp(a,prop,b[prop]);if(__getOwnPropSymbols)for(var prop of __getOwnPropSymbols(b))__propIsEnum.call(b,prop)&&main_defNormalProp(a,prop,b[prop]);return a};const fitModel=({data,variables,linkage,distance})=>{try{const matrix=[],n=data[variables[0]].length;for(let i=0;i<n;i++){const row=[];for(let j=0;j<variables.length;j++)row[j]=data[variables[j]][i];matrix.push(row)}const result=hierarchical_clustering_hclust(matrix,{linkage,distance}),tree=result.getTree();return{matrix,result,tree}}catch(_){return{}}};class HierarchicalClustering extends react.Component{constructor(props){super(props);const{data,variables,linkage,distance}=props;this.state=__spreadValues(__spreadValues({},fitModel({data,variables,linkage,distance})),props),props.onResult(this.state.result)}static getDerivedStateFromProps(nextProps,prevState){if(nextProps.data!==prevState.data||nextProps.variables!==prevState.variables||nextProps.linkage!==prevState.linkage||nextProps.distance!==prevState.distance){const{data,variables,linkage,distance}=nextProps,newState=__spreadValues(__spreadValues({},fitModel({data,variables,linkage,distance})),nextProps);return nextProps.onResult(newState.result),newState}return null}render(){const{result}=this.state,{t}=this.props;return result?react.createElement("div",{style:{overflowX:"auto",width:"100%"}},react.createElement("span",{className:"title"},t("hierarchical-clustering-summary")),react.createElement("button",{className:"hierarchical-clustering-draggable-bar",draggable:"true",onDragStart:ev=>{ev.dataTransfer.setData("text/html",this.plotValue),ev.dataTransfer.setData("text/plain",this.plotKey)},onClick:()=>{(0,html_to_clipboard.Z)(this.plotValue)}},t("drag-plot")),react.createElement(fullscreen_button,{variant:"outline-danger",size:"sm",onClick:()=>{this.setState({fullscreen:!this.state.fullscreen})},dendrogram:react.createElement("svg",{width:window.innerWidth,height:window.innerHeight},react.createElement(dendrogram,{x:0,y:0,width:window.innerWidth,height:window.innerHeight-25,data:this.state.tree,cutoff:lib_default()(this.state.matrix.length/20),fontSize:24}),";"),t},react.createElement("div",{className:"fa fa-times"})),react.createElement("div",null,react.createElement("svg",{width:650,height:375,ref:svg=>{if(!this.svg){this.svg=svg;const width=650,height=375,svgString=getSVGString(this.svg);svgString2Image(svgString,2*width,2*height,dataBlob=>{(0,blob_to_base64.Z)(dataBlob).then(str=>{const value=`<img src="${str}" style="display: block; margin: 0 auto; max-width: 100%; max-height: 100%" />`;this.plotKey=`<!--IMAGE_LOG:${(0,alphanumeric.Z)(6)}_${(0,alphanumeric.Z)(6)}-->`,this.plotValue=value})})}}},react.createElement(dendrogram,{x:0,y:0,width:650,height:350,data:this.state.tree,cutoff:lib_default()(this.state.matrix.length/20)}),";"))):react.createElement(Alert_default(),{variant:"danger"},t("missing-attributes"))}}HierarchicalClustering.defaultProps={linkage:"complete",distance:"euclidean",onResult(){}},HierarchicalClustering.propTypes={data:prop_types_default().object.isRequired,variables:prop_types_default().arrayOf(prop_types_default().string).isRequired,linkage:prop_types_default().oneOf(["complete","single"]),distance:prop_types_default().oneOf(["euclidean","chebyshev","cosine","hamming","manhattan"]),onResult:prop_types_default().func};var main=(0,commonjs.Zh)("models")((0,prop_check.W)(HierarchicalClustering))},54925:function(__unused_webpack_module,__webpack_exports__){const blobToBase64=blob=>{const{FileReader}=window,reader=new FileReader;return reader.readAsDataURL(blob),new Promise(resolve=>{reader.onloadend=()=>{resolve(reader.result)}})};__webpack_exports__.Z=blobToBase64},79882:function(module){function isFunction(value){return typeof value=="function"}module.exports=isFunction},65859:function(module){function isString(value){return typeof value=="string"||Object.prototype.toString.call(value)==="[object String]"}module.exports=isString}}]);

//# sourceMappingURL=HierarchicalClustering.267e6027.chunk.js.map