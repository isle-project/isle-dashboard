{"version":3,"sources":["../node_modules/@stdlib/math/base/special/xlogy/lib/index.js","../node_modules/@stdlib/math/base/special/xlogy/lib/xlogy.js","../node_modules/@stdlib/stats/base/dists/bernoulli/pmf/lib/factory.js","../node_modules/@stdlib/stats/base/dists/bernoulli/pmf/lib/index.js","../node_modules/@stdlib/stats/base/dists/bernoulli/pmf/lib/pmf.js","../node_modules/@isle-project/components/models/logistic-regression/design_matrix_missing.js","../node_modules/@isle-project/components/models/logistic-regression/design_matrix.js","../node_modules/@isle-project/components/models/logistic-regression/multiply_matrices.js","../node_modules/@isle-project/components/models/logistic-regression/col_mult.js","../node_modules/@isle-project/components/models/logistic-regression/multiply.js","../node_modules/@isle-project/components/models/logistic-regression/logistic_regression.js","../node_modules/@isle-project/components/models/logistic-regression/main.js","../node_modules/@isle-project/utils/mmult/index.js","../node_modules/@isle-project/utils/transpose/index.js"],"names":[],"mappings":"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","file":"static/js/LogisticRegression.baf73b97.chunk.js","sourcesContent":["/**\n* @license Apache-2.0\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n/**\n* Compute `x * ln(y)` so that the result is `0` if `x = 0`.\n*\n* @module @stdlib/math/base/special/xlogy\n*\n* @example\n* var xlogy = require( '@stdlib/math/base/special/xlogy' );\n*\n* var out = xlogy( 3.0, 2.0 );\n* // returns ~2.079\n*\n* out = xlogy( 1.5, 5.9 );\n* // returns ~2.662\n*\n* out = xlogy( 0.9, 1.0 );\n* // returns 0.0\n*\n* out = xlogy( 0.0, -2.0 );\n* // returns 0.0\n*\n* out = xlogy( 1.5, NaN );\n* // returns NaN\n*\n* out = xlogy( 0.0, NaN );\n* // returns NaN\n*\n* out = xlogy( NaN, 2.3 );\n* // returns NaN\n*/\n\n// MODULES //\n\nvar xlogy = require( './xlogy.js' );\n\n\n// EXPORTS //\n\nmodule.exports = xlogy;\n","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n// MODULES //\n\nvar isnan = require( './../../../../base/assert/is-nan' );\nvar ln = require( './../../../../base/special/ln' );\n\n\n// MAIN //\n\n/**\n* Computes `x * ln(y)` so that the result is `0` if `x = 0`.\n*\n* @param {number} x - input value\n* @param {number} y - input value\n* @returns {number} function value\n*\n* @example\n* var out = xlogy( 3.0, 2.0 );\n* // returns ~2.079\n*\n* @example\n* var out = xlogy( 1.5, 5.9 );\n* // returns ~2.662\n*\n* @example\n* var out = xlogy( 0.9, 1.0 );\n* // returns 0.0\n*\n* @example\n* var out = xlogy( 0.0, -2.0 );\n* // returns 0.0\n*\n* @example\n* var out = xlogy( 1.5, NaN );\n* // returns NaN\n*\n* @example\n* var out = xlogy( 0.0, NaN );\n* // returns NaN\n*\n* @example\n* var out = xlogy( NaN, 2.3 );\n* // returns NaN\n*/\nfunction xlogy( x, y ) {\n\tif ( x === 0.0 && !isnan( y ) ) {\n\t\treturn 0.0;\n\t}\n\treturn x * ln( y );\n}\n\n\n// EXPORTS //\n\nmodule.exports = xlogy;\n","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n// MODULES //\n\nvar constantFunction = require( '@stdlib/utils/constant-function' );\nvar isnan = require( '@stdlib/math/base/assert/is-nan' );\n\n\n// MAIN //\n\n/**\n* Returns a function for evaluating the probability mass function (PMF) for a Bernoulli distribution with success probability `p`.\n*\n* @param {Probability} p - success probability\n* @returns {Function} PMF\n*\n* @example\n* var pmf = factory( 0.8 );\n* var y = pmf( 0.0 );\n* // returns 0.2\n*\n* y = pmf( 1.0 );\n* // returns 0.8\n*/\nfunction factory( p ) {\n\tif (\n\t\tisnan( p ) ||\n\t\tp < 0.0 ||\n\t\tp > 1.0\n\t) {\n\t\treturn constantFunction( NaN );\n\t}\n\treturn pmf;\n\n\t/**\n\t* Evaluates the probability mass function (PMF) for a Bernoulli distribution.\n\t*\n\t* @private\n\t* @param {number} x - input value\n\t* @returns {Probability} evaluated PMF\n\t*\n\t* @example\n\t* var y = pmf( 2.0 );\n\t* // returns <number>\n\t*/\n\tfunction pmf( x ) {\n\t\tif ( isnan( x ) ) {\n\t\t\treturn NaN;\n\t\t}\n\t\tif ( x === 0.0 ) {\n\t\t\treturn 1.0 - p;\n\t\t}\n\t\tif ( x === 1.0 ) {\n\t\t\treturn p;\n\t\t}\n\t\treturn 0.0;\n\t}\n}\n\n\n// EXPORTS //\n\nmodule.exports = factory;\n","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n/**\n* Bernoulli distribution probability mass function (PMF).\n*\n* @module @stdlib/stats/base/dists/bernoulli/pmf\n*\n* @example\n* var pmf = require( '@stdlib/stats/base/dists/bernoulli/pmf' );\n*\n* var y = pmf( 0.0, 0.3 );\n* // returns 0.7\n*\n* y = pmf( 1.0, 0.7 );\n* // returns 0.7\n*\n* y = pmf( -1.0, 0.5 );\n* // returns 0.0\n*\n* var mypmf = pmf.factory( 0.5 );\n* y = mypmf( 2.0 );\n* // returns 0.0\n*\n* y = mypmf( 1.0 );\n* // returns 0.5\n*/\n\n// MODULES //\n\nvar setReadOnly = require( '@stdlib/utils/define-nonenumerable-read-only-property' );\nvar pmf = require( './pmf.js' );\nvar factory = require( './factory.js' );\n\n\n// MAIN //\n\nsetReadOnly( pmf, 'factory', factory );\n\n\n// EXPORTS //\n\nmodule.exports = pmf;\n","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2018 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n// MODULES //\n\nvar isnan = require( '@stdlib/math/base/assert/is-nan' );\n\n\n// MAIN //\n\n/**\n* Evaluates the probability mass function (PMF) for a Bernoulli distribution with success probability `p` at a value `x`.\n*\n* @param {number} x - input value\n* @param {Probability} p - success probability\n* @returns {Probability} evaluated PMF\n*\n* @example\n* var y = pmf( 1.0, 0.3 );\n* // returns 0.3\n*\n* @example\n* var y = pmf( 0.0, 0.3 );\n* // returns 0.7\n*\n* @example\n* var y = pmf( -1.0, 0.5 );\n* // returns 0.0\n*\n* @example\n* var y = pmf( 0.8, 0.5 );\n* // returns 0.0\n*\n* @example\n* var y = pmf( 0.0, NaN );\n* // returns NaN\n*\n* @example\n* var y = pmf( NaN, 0.5 );\n* // returns NaN\n*\n* @example\n* // Invalid success probability:\n* var y = pmf( 1.0, 1.5 );\n* // returns NaN\n*/\nfunction pmf( x, p ) {\n\tif (\n\t\tisnan( x ) ||\n\t\tisnan( p ) ||\n\t\tp < 0.0 ||\n\t\tp > 1.0\n\t) {\n\t\treturn NaN;\n\t}\n\tif ( x === 0.0 ) {\n\t\treturn 1.0 - p;\n\t}\n\tif ( x === 1.0 ) {\n\t\treturn p;\n\t}\n\treturn 0.0;\n}\n\n\n// EXPORTS //\n\nmodule.exports = pmf;\n","// MODULES //\n\nimport contains from '@stdlib/assert/contains';\nimport ndarray from '@stdlib/ndarray/array';\nimport extractCategoriesFromValues from '@isle-project/utils/extract-categories-from-values';\nimport isNonMissingNumber from '@isle-project/utils/is-non-missing-number';\nimport isMissing from '@isle-project/utils/is-missing';\n\n\n// MAIN //\n\n/**\n * Creates a design matrix for a logistic regression model after filtering out missing values.\n *\n * @param {Array} x - names of predictors\n * @param {string} y - name of response variable\n * @param {Object} data - data object\n * @param {Array} quantitative - array of quantitative predictors\n * @param {boolean} intercept - boolean indicating whether to include an intercept\n * @param {*} success - success value\n * @returns {Object} design matrix\n */\nfunction designMatrixMissing( x, y, data, quantitative, intercept, success ) {\n\tconst predictors = [];\n\tconst hash = {};\n\tfor ( let j = 0; j < x.length; j++ ) {\n\t\tconst values = data[ x[ j ] ];\n\t\tif ( contains( quantitative, x[ j ] ) ) {\n\t\t\tpredictors.push( x[ j ] );\n\t\t} else {\n\t\t\tconst categories = extractCategoriesFromValues( values, x[ j ] );\n\t\t\tfor ( let k = intercept ? 1 : 0; k < categories.length; k++ ) {\n\t\t\t\tpredictors.push( `${x[ j ]}_${categories[ k ]}` );\n\t\t\t}\n\t\t\thash[ x[ j ] ] = categories;\n\t\t}\n\t}\n\tlet buffer = [];\n\tconst yvalues = [];\n\tfor ( let i = 0; i < data[ x[ 0 ] ].length; i++ ) {\n\t\tlet missing = false;\n\t\tconst row = [];\n\t\tif ( intercept ) {\n\t\t\trow.push( 1 );\n\t\t}\n\t\tfor ( let j = 0; j < x.length; j++ ) {\n\t\t\tconst values = data[ x[ j ] ];\n\t\t\tif ( contains( quantitative, x[ j ] ) ) {\n\t\t\t\tif ( isNonMissingNumber( values[ i ] ) ) {\n\t\t\t\t\trow.push( values[ i ] );\n\t\t\t\t} else {\n\t\t\t\t\tmissing = true;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst val = values[ i ];\n\t\t\t\tif ( isMissing( val ) ) {\n\t\t\t\t\tmissing = true;\n\t\t\t\t} else {\n\t\t\t\t\tconst categories = hash[ x[ j ] ];\n\t\t\t\t\tfor ( let k = intercept ? 1 : 0; k < categories.length; k++ ) {\n\t\t\t\t\t\trow.push( ( val === categories[ k ] ) ? 1 : 0 );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif ( !missing ) {\n\t\t\tbuffer = buffer.concat( row );\n\t\t\tyvalues.push( data[ y ][ i ] === success ? 1 : 0 );\n\t\t}\n\t}\n\tconst nobs = yvalues.length;\n\tconst matrix = ndarray( buffer, {\n\t\tshape: [ nobs, predictors.length+1 ]\n\t});\n\treturn { matrix, predictors, yvalues, nobs };\n}\n\n\n// EXPORTS //\n\nexport default designMatrixMissing;\n","// MODULES //\n\nimport contains from '@stdlib/assert/contains';\nimport ndarray from '@stdlib/ndarray/array';\nimport extractCategoriesFromValues from '@isle-project/utils/extract-categories-from-values';\n\n\n// MAIN //\n\n/**\n * Creates a design matrix for a logistic regression model.\n *\n * @param {Array} x - names of predictors\n * @param {string} y - name of response variable\n * @param {Object} data - data object\n * @param {Array} quantitative - array of quantitative predictors\n * @param {boolean} intercept - boolean indicating whether to include an intercept\n * @param {*} success - success value\n * @returns {Object} design matrix\n */\nfunction designMatrix( x, y, data, quantitative, intercept, success ) {\n\tconst predictors = [];\n\tconst hash = {};\n\tconst nobs = data[ x[ 0 ] ].length;\n\tfor ( let j = 0; j < x.length; j++ ) {\n\t\tconst values = data[ x[ j ] ];\n\t\tif ( contains( quantitative, x[ j ] ) ) {\n\t\t\tpredictors.push( x[ j ] );\n\t\t} else {\n\t\t\tconst categories = extractCategoriesFromValues( values, x[ j ] );\n\t\t\tfor ( let k = intercept ? 1 : 0; k < categories.length; k++ ) {\n\t\t\t\tpredictors.push( `${x[ j ]}_${categories[ k ]}` );\n\t\t\t}\n\t\t\thash[ x[ j ] ] = categories;\n\t\t}\n\t}\n\tconst buffer = new Float64Array( nobs * (predictors.length+1) );\n\tfor ( let i = 0; i < nobs; i++ ) {\n\t\tif ( intercept ) {\n\t\t\tbuffer[ (predictors.length+1)*i ] = 1;\n\t\t}\n\t\tlet colIndex = 0;\n\t\tfor ( let j = 0; j < x.length; j++ ) {\n\t\t\tconst values = data[ x[ j ] ];\n\t\t\tif ( contains( quantitative, x[ j ] ) ) {\n\t\t\t\tcolIndex += 1;\n\t\t\t\tbuffer[ (predictors.length+1)*i + colIndex ] = values[ i ];\n\t\t\t} else {\n\t\t\t\tconst categories = hash[ x[ j ] ];\n\t\t\t\tconst val = values[ i ];\n\t\t\t\tfor ( let k = intercept ? 1 : 0; k < categories.length; k++ ) {\n\t\t\t\t\tcolIndex += 1;\n\t\t\t\t\tbuffer[ (predictors.length+1)*i + colIndex ] = ( val === categories[ k ] ) ? 1 : 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tconst matrix = ndarray( buffer, {\n\t\tshape: [ nobs, predictors.length+1 ]\n\t});\n\tconst yvalues = data[ y ].map( v => {\n\t\treturn v === success ? 1 : 0;\n\t});\n\treturn { matrix, predictors, yvalues, nobs };\n}\n\n\n// EXPORTS //\n\nexport default designMatrix;\n","// MODULES //\n\nimport { Matrix } from 'ml-matrix';\n\n\n// MAIN //\n\n/**\n* Matrix product of `A` and `B`.\n*\n* @param {Matrix} A - first input matrix\n* @param {Matrix} B - second input matrix\n* @returns {Matrix} A * B\n*/\nfunction multiplyMatrices( A, B ) {\n\tconst [ m, n ] = A.shape;\n\tconst p = B.shape[ 1 ];\n\tconst result = Matrix.zeros( m, p );\n\tconst Bcolj = new Float64Array( n );\n\tfor ( let j = 0; j < p; j++ ) {\n\t\tfor ( let k = 0; k < n; k++ ) {\n\t\t\tBcolj[ k ] = B.get(k, j);\n\t\t}\n\t\tfor ( let i = 0; i < m; i++ ) {\n\t\t\tlet s = 0;\n\t\t\tfor ( let k = 0; k < n; k++ ) {\n\t\t\t\ts += A.get( i, k ) * Bcolj[ k ];\n\t\t\t}\n\t\t\tresult.set( i, j, s );\n\t\t}\n\t}\n\treturn result;\n}\n\n\n// EXPORTS //\n\nexport default multiplyMatrices;\n","// MODULES //\n\nimport ndarray from '@stdlib/ndarray/array';\n\n\n// MAIN //\n\n/**\n* Multiplies each column of matrix `A` with the elements of vector `b`.\n*\n* @param {Matrix} A - input matrix\n* @param {NumberArray} b - input vector\n* @returns {Matrix} `A` with columns multiplied by elements of `b`\n*/\nfunction colMult( A, b ) {\n\tconst [ m, n ] = A.shape;\n\tconst result = ndarray( new Float64Array( m*n ), { 'shape': [ m, n ]} );\n\tfor ( let i = 0; i < m; i++ ) {\n\t\tfor ( let j = 0; j < n; j++ ) {\n\t\t\tresult.set( i, j, A.get( i, j ) * b[ i ] );\n\t\t}\n\t}\n\treturn result;\n}\n\n\n// EXPORTS //\n\nexport default colMult;\n","// MAIN //\n\n/**\n* Computes an element-wise multiplication of two arrays.\n*\n* @param {Array} x - numeric array\n* @param {Array} y - numeric array\n*/\nfunction multiply( x, y ) {\n\tconst len = x.length;\n\tconst out = new Array( len );\n\tfor ( let i = 0; i < len; i++ ) {\n\t\tout[ i ] = x[ i ] * y[ i ];\n\t}\n\treturn out;\n}\n\n\n// EXPORTS //\n\nexport default multiply;\n","// MODULES //\n\nimport { Matrix, solve } from 'ml-matrix';\nimport abs from '@stdlib/math/base/special/abs';\nimport ln from '@stdlib/math/base/special/ln';\nimport pow from '@stdlib/math/base/special/pow';\nimport exp from '@stdlib/math/base/special/exp';\nimport xlogy from '@stdlib/math/base/special/xlogy';\nimport EPS from '@stdlib/constants/float64/eps';\nimport dbern from '@stdlib/stats/base/dists/bernoulli/pmf';\nimport sqrt from '@stdlib/math/base/special/sqrt';\nimport mmult from '@isle-project/utils/mmult';\nimport transpose from '@isle-project/utils/transpose';\nimport sum from '@isle-project/utils/statistic/sum';\nimport multiplyMatrices from './multiply_matrices.js';\nimport colMult from './col_mult.js';\nimport multiply from './multiply.js';\n\n\n// VARIABLES //\n\nconst MAX_IT = 25;\nconst EPSILON = 1e-8;\n\n\n// FUNCTIONS //\n\nconst variance = ( mu ) => {\n\tconst out = new Float64Array( mu.length );\n\tfor ( let i = 0; i < mu.length; i++ ) {\n\t\tout[ i ] = mu[ i ] * ( 1.0 - mu[ i ] );\n\t}\n\treturn out;\n};\n\nconst logitLink = ( mu ) => {\n\tconst n = mu.length;\n\tconst out = new Float64Array( n );\n\tfor ( let i = 0; i < n; i++ ) {\n\t\tout[ i ] = ln( mu[ i ] / ( 1 - mu[ i ] ) );\n\t}\n\treturn out;\n};\n\nconst logitLinkInv = ( eta ) => {\n\tconst n = eta.length;\n\tconst out = new Float64Array( n );\n\tfor ( let i = 0; i < n; i++ ) {\n\t\tconst etai = eta[i];\n\t\tif ( abs( etai ) > 30 ) {\n\t\t\tout[ i ] = EPS;\n\t\t} else {\n\t\t\tconst x = exp( etai );\n\t\t\tout[ i ] = x / ( 1 + x );\n\t\t}\n\t}\n\treturn out;\n};\n\nconst logitMuEta = ( eta ) => {\n\tconst n = eta.length;\n\tconst out = new Float64Array( n );\n\tfor ( let i = 0; i < n; i++) {\n\t\tconst val = eta[i];\n\t\tif ( abs( val ) > 30 ) {\n\t\t\tout[ i ] = EPS;\n\t\t} else {\n\t\t\tout[ i ] = exp( val ) / pow( 1 + exp( val ), 2 );\n\t\t}\n\t}\n\treturn out;\n};\n\nconst aic = ( y, mu, numParameters ) => {\n\tlet logLik = 0;\n\tfor ( let i = 0; i < y.length; i++ ) {\n\t\tlogLik += ln( dbern( y[ i ], mu[ i ] ) );\n\t}\n\treturn -2 * logLik + 2*numParameters;\n};\n\nconst devResids = ( y, mu, wt ) => {\n\tconst n = y.length;\n\tconst out = new Float64Array( n );\n\tfor ( let i = 0; i < n; i++ ) {\n\t\tconst mui = mu[ i ];\n\t\tconst yi = y[ i ];\n\t\tout[ i ] = 2.0 * wt[ i ] *\n\t\t( xlogy( yi, yi / mui ) + xlogy( 1 - yi, ( 1 - yi ) / ( 1 - mui ) ) );\n\t}\n\treturn out;\n};\n\nconst calcW = ( weights, gprime, varg ) => {\n\tconst out = new Float64Array( weights.length );\n\tfor ( let i = 0; i < weights.length; i++ ) {\n\t\tout[ i ] = weights[ i ] * ( gprime[i]*gprime[i] / varg[ i ] );\n\t}\n\treturn out;\n};\n\nconst calcZ = ( eta, y, mu, gprime ) => {\n\tconst out = new Float64Array( y.length );\n\tfor ( let i = 0; i < y.length; i++ ) {\n\t\tout[ i ] = eta[ i ] + ( y[ i ] - mu[ i ] ) / gprime[ i ];\n\t}\n\treturn out;\n};\n\nfunction sigmoid( x ) {\n\tconst result = new Float64Array( x.length );\n\tfor ( let i = 0; i < x.length; i++) {\n\t\tresult[ i ]= 1 / (1 + exp(-x[i]) );\n\t}\n\treturn result;\n}\n\nfunction stdErrors( matrix, yhat ) {\n\tconst w = new Float64Array( yhat.length );\n\tfor ( let i = 0; i < w.length; i++ ) {\n\t\tw[ i ] = yhat[ i ] * ( 1 - yhat[ i ] );\n\t}\n\tconst [ nrow, ncol ] = matrix.shape;\n\tconst errs = new Float64Array( ncol );\n\tfor ( let j = 0; j < errs.length; j++ ) {\n\t\tlet sum = 0;\n\t\tfor ( let i = 0; i < nrow; i++ ) {\n\t\t\tsum += pow( matrix.get( i, j ), 2 ) * w[ i ];\n\t\t}\n\t\terrs[ j ] = sqrt( 1.0 / sum );\n\t}\n\treturn errs;\n}\n\n\n// MAIN //\n\n/**\n* Iteratively re-weighted least squares algorithm.\n*/\nfunction irls( X, y, nObs ) {\n\tconst Xt = transpose( X );\n\tconst weights = new Array( nObs ).fill( 1 );\n\n\tconst mustart = new Float64Array( weights.length );\n\tfor ( let i = 0; i < nObs; i++ ) {\n\t\tmustart[ i ] = ( weights[ i ] * y[ i ] + 0.5 ) / ( weights[ i ] + 1 );\n\t}\n\tlet eta = logitLink( mustart );\n\tlet mu = logitLinkInv( eta );\n\tlet devOld = sum( devResids( y, mu, weights ) );\n\n\tlet beta;\n\tlet j;\n\tlet converged = false;\n\tfor ( j = 0; j < MAX_IT; j++ ) {\n\t\tconst varg = variance( mu );\n\t\tconst gprime = logitMuEta( eta );\n\t\tconst z = calcZ( eta, y, mu, gprime );\n\t\tconst w = calcW( weights, gprime, varg );\n\t\tconst wz = multiply( w, z );\n\t\tconst Xw = colMult( X, w );\n\t\tconst A = multiplyMatrices( Xt, Xw );\n\t\tconst b = mmult( Xt, wz );\n\t\tbeta = solve( A, Matrix.columnVector( b ) );\n\t\teta = mmult( X, beta.to1DArray() );\n\t\tmu = logitLinkInv( eta );\n\t\tconst dev = sum( devResids( y, mu, weights ) );\n\t\tif ( abs( dev - devOld ) / ( 0.1 + abs( dev ) ) < EPSILON ) {\n\t\t\tconverged = true;\n\t\t\tbreak;\n\t\t}\n\t\tdevOld = dev;\n\t}\n\tconst coefficients = beta.to1DArray();\n\tconst predict = ( X ) => {\n\t\tconst finalData = mmult( X, coefficients );\n\t\tconst predictions = sigmoid( finalData );\n\t\treturn predictions;\n\t};\n\tconst fitted = predict( X, coefficients );\n\treturn {\n\t\taic: aic( y, logitLinkInv( eta ), coefficients.length ),\n\t\tstdErrors: stdErrors( X, fitted ),\n\t\tfitted,\n\t\tcoefficients,\n\t\titerations: j,\n\t\tconverged,\n\t\tpredict\n\t};\n}\n\n\n// EXPORTS //\n\nexport default irls;\n","// MODULES //\n\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { withTranslation } from 'react-i18next';\nimport Alert from 'react-bootstrap/Alert';\nimport ButtonGroup from 'react-bootstrap/ButtonGroup';\nimport InputGroup from 'react-bootstrap/InputGroup';\nimport FormControl from 'react-bootstrap/FormControl';\nimport Button from 'react-bootstrap/Button';\nimport isArray from '@stdlib/assert/is-array';\nimport abs from '@stdlib/math/base/special/abs';\nimport pnorm from '@stdlib/stats/base/dists/normal/cdf';\nimport roundn from '@stdlib/math/base/special/roundn';\nimport Tooltip from '@isle-project/components/tooltip';\nimport Table from '@isle-project/components/table';\nimport TeX from '@isle-project/components/tex';\nimport subtract from '@isle-project/utils/subtract';\nimport { withPropCheck } from '@isle-project/utils/prop-check';\nimport { Factor } from '@isle-project/utils/factor-variable';\nimport designMatrixMissing from './design_matrix_missing.js';\nimport designMatrix from './design_matrix.js';\nimport irls from './logistic_regression.js';\n\n\n// VARIABLES //\n\nlet COUNTER = 0;\nconst T = 't';\n\n\n// FUNCTIONS //\n\nconst summaryTable = ( x, intercept, result, t ) => {\n\treturn (\n\t\t<Table bordered size=\"sm\">\n\t\t\t<thead>\n\t\t\t\t<tr>\n\t\t\t\t\t<Tooltip placement=\"right\" tooltip={t('name-of-predictor')} ><th>{t('predictor')}</th></Tooltip>\n\t\t\t\t\t<Tooltip placement=\"right\" tooltip={t('change-in-log')}><th>{t('coefficient')}</th></Tooltip>\n\t\t\t\t\t<Tooltip placement=\"left\" tooltip={t('standard-deviation-coefficient')} ><th>{t('std-error')}</th></Tooltip>\n\t\t\t\t\t<Tooltip placement=\"left\" tooltip={<span>{t('test-statistic-coefficient-zero')}<TeX displayMode raw=\"t = \\tfrac{\\text{Coefficient}}{\\text{Std. Error}}\" /></span>} ><th>{T}</th></Tooltip>\n\t\t\t\t\t<Tooltip placement=\"left\" tooltip={<span>{t('p-value-coefficient-zero')}<TeX displayMode raw=\"2 \\Phi( |t| )\" /></span>} ><th>{t('p-value')}</th></Tooltip>\n\t\t\t\t</tr>\n\t\t\t</thead>\n\t\t\t<tbody>\n\t\t\t\t{ intercept ? <tr>\n\t\t\t\t\t<th>{t('intercept')}</th>\n\t\t\t\t\t<td>{result.coefficients[ 0 ].toFixed( 6 )}</td>\n\t\t\t\t\t<td>{result.stdErrors[ 0 ].toFixed( 4 )}</td>\n\t\t\t\t\t<td>{( result.coefficients[ 0 ] / result.stdErrors[ 0 ] ).toFixed( 4 )}</td>\n\t\t\t\t\t<td>{( 2.0 * pnorm( -abs( result.coefficients[ 0 ] / result.stdErrors[ 0 ] ), 0.0, 1.0 ) ).toFixed( 4 )}</td>\n\t\t\t\t</tr> : null }\n\t\t\t\t{x.map( ( name, idx ) => {\n\t\t\t\t\tidx = idx + Number( intercept );\n\t\t\t\t\tconst tStat = result.coefficients[ idx ]/ result.stdErrors[ idx ];\n\t\t\t\t\tconst pVal = 2.0 * pnorm( -abs( tStat ), 0.0, 1.0 );\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<tr key={idx} >\n\t\t\t\t\t\t\t<th>{name}</th>\n\t\t\t\t\t\t\t<td>{result.coefficients[ idx ].toFixed( 6 )}</td>\n\t\t\t\t\t\t\t<td>{result.stdErrors[ idx ].toFixed( 4 )}</td>\n\t\t\t\t\t\t\t<td>{tStat.toFixed( 4 )}</td>\n\t\t\t\t\t\t\t<td>{pVal.toFixed( 4 )}</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</tbody>\n\t\t</Table>\n\t);\n};\n\nconst fitModel = ({ y, success, x, intercept, omitMissing, data, quantitative }) => {\n\ttry {\n\t\tif ( !isArray( x ) ) {\n\t\t\tx = [ x ];\n\t\t}\n\t\tconst dMatrix = omitMissing ? designMatrixMissing : designMatrix;\n\t\tconst { matrix, predictors, yvalues, nobs } = dMatrix( x, y, data, quantitative, intercept, success );\n\t\treturn {\n\t\t\tresult: irls( matrix, yvalues, nobs ),\n\t\t\tpredictors: predictors\n\t\t};\n\t} catch ( _ ) {\n\t\treturn {};\n\t}\n};\n\n\n// MAIN //\n\n/**\n* Logistic regression.\n*\n* @property {Object} data - object of value arrays\n* @property {(string|Factor)} y - outcome variable\n* @property {*} success - success category of `y`\n* @property {(string|Factor|Array<(string|Factor)>)} x - one or more predictor variables\n* @property {Array<string>} quantitative - array of variables in `data` that are `quantitative`\n* @property {boolean} omitMissing - controls whether to omit missing values\n* @property {boolean} intercept - controls whether to fit a model with an intercept term\n* @property {Function} onPredict - callback invoked with a predict function to make predictions for new data\n*/\nclass LogisticRegression extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\t\tCOUNTER += 1;\n\t\tlet { y, success, x, intercept, omitMissing, data, quantitative } = props;\n\t\tconst { result, predictors } = fitModel({ y, success, x, intercept, omitMissing, data, quantitative });\n\t\tthis.state = {\n\t\t\tprobabilityThreshold: 0.5,\n\t\t\tresult,\n\t\t\tpredictors,\n\t\t\t...props\n\t\t};\n\t}\n\n\tstatic getDerivedStateFromProps( nextProps, prevState ) {\n\t\tif (\n\t\t\tnextProps.data !== prevState.data ||\n\t\t\tnextProps.quantitative !== prevState.quantitative ||\n\t\t\tnextProps.x !== prevState.x ||\n\t\t\tnextProps.y !== prevState.y ||\n\t\t\tnextProps.success !== prevState.success ||\n\t\t\tnextProps.omitMissing !== prevState.omitMissing\n\t\t) {\n\t\t\tconst { y, success, x, intercept, omitMissing, data, quantitative } = nextProps;\n\t\t\tconst newState = {\n\t\t\t\t...fitModel({ y, success, x, intercept, omitMissing, data, quantitative }),\n\t\t\t\t...nextProps\n\t\t\t};\n\t\t\treturn newState;\n\t\t}\n\t\treturn null;\n\t}\n\n\thandlePredict = () => {\n\t\tlet { x, y, quantitative, intercept, success } = this.props;\n\t\tif ( !isArray( x ) ) {\n\t\t\tx = [ x ];\n\t\t}\n\t\tconst predict = ( data ) => {\n\t\t\tconst { matrix, yvalues } = designMatrix( x, y, data, quantitative, intercept, success );\n\t\t\tconst probs = this.state.result.predict( matrix );\n\t\t\tconst residuals = subtract( probs, yvalues );\n\t\t\tconst yhat = probs.map( x => x > this.state.probabilityThreshold );\n\t\t\treturn { yhat, probs, residuals };\n\t\t};\n\t\tthis.props.onPredict( predict, COUNTER );\n\t};\n\n\trender() {\n\t\tconst { result } = this.state;\n\t\tconst { t } = this.props;\n\t\tif ( !result ) {\n\t\t\treturn <Alert variant=\"danger\">{t('missing-attributes')}</Alert>;\n\t\t}\n\t\treturn (\n\t\t\t<div style={{ overflowX: 'auto', width: '100%' }}>\n\t\t\t\t<span className=\"title\" >{t('logistic-title', { y: this.props.y, counter: COUNTER })}</span>\n\t\t\t\t{summaryTable( this.state.predictors, this.props.intercept, result, this.props.t )}\n\t\t\t\t<i>{result.converged ? t('fisher-scoring-converged', { n: result.iterations }) : t('fisher-scoring-not-converged', { n: result.iterations })}</i>\n\t\t\t\t<p>{t('aic')}: {roundn( result.aic, -3 )}</p>\n\t\t\t\t{this.props.onPredict ? <ButtonGroup>\n\t\t\t\t\t<Tooltip tooltip={t('use-model-to-predict-tooltip-logistic')} >\n\t\t\t\t\t\t<Button variant=\"secondary\" size=\"sm\" onClick={this.handlePredict} >\n\t\t\t\t\t\t\t{this.props.t('use-model-to-predict')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Tooltip>\n\t\t\t\t\t<InputGroup size=\"sm\" >\n\t\t\t\t\t\t<InputGroup.Text>{t('threshold')}:</InputGroup.Text>\n\t\t\t\t\t\t<FormControl\n\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\tmin={0}\n\t\t\t\t\t\t\tmax={1}\n\t\t\t\t\t\t\tdefaultValue={0.5}\n\t\t\t\t\t\t\tstep={0.01}\n\t\t\t\t\t\t\tonChange={( event ) => {\n\t\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\t\tprobabilityThreshold: event.target.value\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</InputGroup>\n\t\t\t\t</ButtonGroup> : null}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\n\n// PROPERTIES //\n\nLogisticRegression.defaultProps = {\n\tomitMissing: false,\n\tintercept: true,\n\tonPredict: null\n};\n\nLogisticRegression.propTypes = {\n\tdata: PropTypes.object.isRequired,\n\ty: PropTypes.oneOfType([\n\t\tPropTypes.string,\n\t\tPropTypes.instanceOf( Factor )\n\t]).isRequired,\n\tsuccess: PropTypes.any.isRequired,\n\tx: PropTypes.oneOfType([\n\t\tPropTypes.arrayOf( PropTypes.oneOfType([ PropTypes.string, PropTypes.instanceOf( Factor ) ]) ),\n\t\tPropTypes.string,\n\t\tPropTypes.instanceOf( Factor )\n\t]).isRequired,\n\tquantitative: PropTypes.arrayOf( PropTypes.string ).isRequired,\n\tomitMissing: PropTypes.bool,\n\tintercept: PropTypes.bool,\n\tonPredict: PropTypes.func\n};\n\n\n// EXPORTS //\n\nexport default withTranslation( 'models' )( withPropCheck( LogisticRegression ) );\n","/**\n* Computes a matrix product of a n x p matrix and a column vector of length p.\n*\n* @param {Matrix} A - n x p matrix\n* @param {Array} b - p x 1 column vector\n* @returns {Array} result of matrix multiplication\n*/\nfunction mmult( A, b ) {\n\tconst n = A.shape[ 0 ];\n\tconst p = A.shape[ 1 ];\n\n\tlet ret = new Float64Array( n );\n\tfor ( let i = 0; i < n; i++ ) {\n\t\t\tlet sum = 0;\n\t\t\tfor ( let j = 0; j < p; j++ ) {\n\t\t\t\tsum += A.get( i, j ) * b[ j ];\n\t\t\t}\n\t\t\tret[ i ] = sum;\n\t}\n\treturn ret;\n}\n\n\n// EXPORTS //\n\nexport default mmult;\n","/**\n* Copyright (C) 2020-present The ISLE Authors\n*\n* The isle-dashboard program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n// MODULES //\n\nimport ndarray from '@stdlib/ndarray/ctor';\n\n\n// MAIN //\n\n/**\n* Transposes a matrix.\n*\n* @param {Matrix} X - input matrix (2d `ndarray`)\n* @returns matrix transpose\n*/\nconst transpose = ( X ) => {\n\tconst shape = [ X.shape[ 1 ], X.shape[ 0 ] ];\n\tconst strides = [ X.strides[ 1 ], X.strides[ 0 ] ];\n\tconst offset = X.offset;\n\tconst order = X.order;\n\treturn ndarray( 'float64', X._buffer, shape, strides, offset, order );\n};\n\n\n// EXPORTS //\n\nexport default transpose;\n"],"sourceRoot":""}