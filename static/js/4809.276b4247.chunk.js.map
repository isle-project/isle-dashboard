{"version":3,"sources":["components/profile-page/two_factor_authentication.js","components/profile-page/enter_token_modal.js","components/profile-page/edit_modal.js","components/profile-page/action_types_display.js","components/profile-page/create_ticket_modal.js","components/profile-page/ticket_list.js","components/profile-page/index.js","actions/two_factor_auth.js","containers/visible-profile-page/index.js"],"names":["user","file","ticket"],"mappings":"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","file":"static/js/4809.276b4247.chunk.js","sourcesContent":["/**\r\n* Copyright (C) 2016-present The ISLE Authors\r\n*\r\n* The isle-dashboard program is free software: you can redistribute it and/or modify\r\n* it under the terms of the GNU Affero General Public License as\r\n* published by the Free Software Foundation, either version 3 of the\r\n* License, or (at your option) any later version.\r\n*\r\n* This program is distributed in the hope that it will be useful,\r\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n* GNU Affero General Public License for more details.\r\n*\r\n* You should have received a copy of the GNU Affero General Public License\r\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\r\n*/\r\n\r\n// MODULES //\r\n\r\nimport React, { Component, Fragment } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Row from 'react-bootstrap/Row';\r\nimport Col from 'react-bootstrap/Col';\r\nimport Card from 'react-bootstrap/Card';\r\nimport Button from 'react-bootstrap/Button';\r\nimport FormControl from 'react-bootstrap/FormControl';\r\n\r\n\r\n// MAIN //\r\n\r\nclass TwoFactorAuthentication extends Component {\r\n\tconstructor( props ) {\r\n\t\tsuper( props );\r\n\r\n\t\tthis.state = {\r\n\t\t\ttoken: ''\r\n\t\t};\r\n\t}\r\n\r\n\trequestTfaQRCode = async () => {\r\n\t\tconst res = await this.props.getTfaQRCode();\r\n\t\tif ( res ) {\r\n\t\t\tthis.setState({\r\n\t\t\t\ttfaQRCode: {\r\n\t\t\t\t\t__html: res.data\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\tenableTfa = () => {\r\n\t\tthis.props.enableTFA( this.state.token );\r\n\t};\r\n\r\n\tdisableTfa = () => {\r\n\t\tthis.props.disableTFA();\r\n\t};\r\n\r\n\trenderQRCode = () => {\r\n\t\tif ( !this.state.tfaQRCode ) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tconst t = this.props.t;\r\n\r\n\t\t/* eslint-disable react/no-danger */\r\n\t\treturn (\r\n\t\t\t<Fragment>\r\n\t\t\t\t<div dangerouslySetInnerHTML={this.state.tfaQRCode} />\r\n\t\t\t\t<p>\r\n\t\t\t\t\t{t('tfa-enable-instructions')}\r\n\t\t\t\t</p>\r\n\t\t\t\t<Row>\r\n\t\t\t\t\t<Col sm={8} >\r\n\t\t\t\t\t\t<FormControl\r\n\t\t\t\t\t\t\tautoFocus={true} // eslint-disable-line jsx-a11y/no-autofocus\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tonChange={( event ) => {\r\n\t\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\t\ttoken: event.target.value\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col sm={3} >\r\n\t\t\t\t\t\t<Button onClick={this.enableTfa} disabled={this.state.token.length !== 6} >\r\n\t\t\t\t\t\t\t{t('common:confirm')}\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>\r\n\t\t\t</Fragment>\r\n\t\t);\r\n\t\t/* eslint-enable react/no-danger */\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst t = this.props.t;\r\n\t\tif ( !this.props.user.twoFactorAuth ) {\r\n\t\t\treturn (\r\n\t\t\t\t<Card bg=\"light\" >\r\n\t\t\t\t\t<Card.Header>\r\n\t\t\t\t\t\t<span className=\"title\" >\r\n\t\t\t\t\t\t\t{t('common:two-factor-authentication')}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</Card.Header>\r\n\t\t\t\t\t<Card.Body>\r\n\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t{t('two-factor-authentication-is-disabled')}\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tvariant=\"success\"\r\n\t\t\t\t\t\t\tstyle={{ float: 'right', marginRight: 5 }}\r\n\t\t\t\t\t\t\tonClick={this.requestTfaQRCode}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<i className=\"fas fa-qrcode\" style={{ marginRight: 10 }}></i>\r\n\t\t\t\t\t\t\t{t('common:enable')}\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t{this.renderQRCode()}\r\n\t\t\t\t\t</Card.Body>\r\n\t\t\t\t</Card>\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<Card bg=\"light\" border=\"success\" >\r\n\t\t\t\t<Card.Header>\r\n\t\t\t\t\t{t('two-factor-authentication')}\r\n\t\t\t\t</Card.Header>\r\n\t\t\t\t<Card.Body>\r\n\t\t\t\t\t<p>\r\n\t\t\t\t\t\t{t('two-factor-authentication-is-enabled')}\r\n\t\t\t\t\t</p>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tvariant=\"warning\"\r\n\t\t\t\t\t\tstyle={{ float: 'right', marginRight: 5 }}\r\n\t\t\t\t\t\tonClick={this.disableTfa}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{t('common:disable')}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Card.Body>\r\n\t\t\t</Card>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n\r\n// PROPERTIES //\r\n\r\nTwoFactorAuthentication.propTypes = {\r\n\tdisableTFA: PropTypes.func.isRequired,\r\n\tenableTFA: PropTypes.func.isRequired,\r\n\tgetTfaQRCode: PropTypes.func.isRequired,\r\n\tt: PropTypes.func.isRequired,\r\n\tuser: PropTypes.object.isRequired\r\n};\r\n\r\nTwoFactorAuthentication.defaultProps = {};\r\n\r\n\r\n// EXPORTS //\r\n\r\nexport default TwoFactorAuthentication;\r\n","/**\r\n* Copyright (C) 2016-present The ISLE Authors\r\n*\r\n* The isle-dashboard program is free software: you can redistribute it and/or modify\r\n* it under the terms of the GNU Affero General Public License as\r\n* published by the Free Software Foundation, either version 3 of the\r\n* License, or (at your option) any later version.\r\n*\r\n* This program is distributed in the hope that it will be useful,\r\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n* GNU Affero General Public License for more details.\r\n*\r\n* You should have received a copy of the GNU Affero General Public License\r\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\r\n*/\r\n\r\n// MODULES //\r\n\r\nimport React, { useState } from 'react';\r\nimport Button from 'react-bootstrap/Button';\r\nimport Modal from 'react-bootstrap/Modal';\r\nimport Col from 'react-bootstrap/Col';\r\nimport Row from 'react-bootstrap/Row';\r\nimport FormLabel from 'react-bootstrap/FormLabel';\r\nimport Form from 'react-bootstrap/Form';\r\nimport FormControl from 'react-bootstrap/FormControl';\r\nimport FormGroup from 'react-bootstrap/FormGroup';\r\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\r\nimport Tooltip from 'react-bootstrap/Tooltip';\r\nimport PropTypes from 'prop-types';\r\n\r\n\r\n// MAIN //\r\n\r\n/**\r\n * A modal for entering a token to receive instructor access.\r\n *\r\n * @param {Object} props - component properties\r\n * @param {boolean} props.show - boolean indicating whether the modal is visible\r\n * @param {Function} props.close - callback to invoke when the modal is closed\r\n * @param {Function} props.authenticate - callback to invoke after the submit button is clicked to authenticate the token\r\n * @returns {ReactElement} modal window\r\n */\r\nconst EnterTokenModal = ({ authenticate, onHide, show }) => {\r\n\tconst [ token, setToken ] = useState( null );\r\n\tconst handleInputChange = ( event ) => {\r\n\t\tsetToken( event.target.value );\r\n\t};\r\n\tconst handleSubmit = async () => {\r\n\t\tconst success = await authenticate({\r\n\t\t\twriteAccessToken: token\r\n\t\t});\r\n\t\tif ( success ) {\r\n\t\t\tonHide();\r\n\t\t}\r\n\t};\r\n\treturn (\r\n\t\t<Modal onHide={onHide} show={show} >\r\n\t\t\t<Modal.Header closeButton >\r\n\t\t\t\t<Modal.Title as=\"h3\">Enter Access Token</Modal.Title>\r\n\t\t\t</Modal.Header>\r\n\t\t\t<Modal.Body>\r\n\t\t\t\t<div>\r\n\t\t\t\t\tPlease enter the write-access token that was sent to you. If you have not received it yet,\r\n\t\t\t\t\tplease get in touch with <a href=\"mailto:pgb@andrew.cmu.edu\">Philipp Burckhardt</a>.\r\n\t\t\t\t</div>\r\n\t\t\t\t<br />\r\n\t\t\t\t<Form>\r\n\t\t\t\t\t<OverlayTrigger placement=\"right\" overlay={<Tooltip id=\"ownerTooltip\">Please enter the access token.</Tooltip>}>\r\n\t\t\t\t\t\t<FormGroup>\r\n\t\t\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t\t\t<Col sm={2}>\r\n\t\t\t\t\t\t\t\t\t<FormLabel>Token</FormLabel>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col sm={10}>\r\n\t\t\t\t\t\t\t\t\t<FormControl\r\n\t\t\t\t\t\t\t\t\t\tname=\"title\"\r\n\t\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Enter token\"\r\n\t\t\t\t\t\t\t\t\t\tonChange={handleInputChange}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t</FormGroup>\r\n\t\t\t\t\t</OverlayTrigger>\r\n\t\t\t\t</Form>\r\n\t\t\t</Modal.Body>\r\n\t\t\t<Modal.Footer>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tonClick={handleSubmit}\r\n\t\t\t\t\tdisabled={!token}\r\n\t\t\t\t>\r\n\t\t\t\t\tSubmit\r\n\t\t\t\t</Button>\r\n\t\t\t</Modal.Footer>\r\n\t\t</Modal>\r\n\t);\r\n};\r\n\r\n\r\n// PROPERTIES //\r\n\r\nEnterTokenModal.propTypes = {\r\n\tauthenticate: PropTypes.func.isRequired,\r\n\tonHide: PropTypes.func.isRequired,\r\n\tshow: PropTypes.bool.isRequired\r\n};\r\n\r\n\r\n// EXPORTS //\r\n\r\nexport default EnterTokenModal;\r\n","/**\r\n* Copyright (C) 2016-present The ISLE Authors\r\n*\r\n* The isle-dashboard program is free software: you can redistribute it and/or modify\r\n* it under the terms of the GNU Affero General Public License as\r\n* published by the Free Software Foundation, either version 3 of the\r\n* License, or (at your option) any later version.\r\n*\r\n* This program is distributed in the hope that it will be useful,\r\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n* GNU Affero General Public License for more details.\r\n*\r\n* You should have received a copy of the GNU Affero General Public License\r\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\r\n*/\r\n\r\n// MODULES //\r\n\r\nimport React, { Component, Fragment } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport SelectInput from 'react-select';\r\nimport Button from 'react-bootstrap/Button';\r\nimport Badge from 'react-bootstrap/Badge';\r\nimport Row from 'react-bootstrap/Row';\r\nimport Col from 'react-bootstrap/Col';\r\nimport FormLabel from 'react-bootstrap/FormLabel';\r\nimport FormControl from 'react-bootstrap/FormControl';\r\nimport FormGroup from 'react-bootstrap/FormGroup';\r\nimport Form from 'react-bootstrap/Form';\r\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\r\nimport Tooltip from 'react-bootstrap/Tooltip';\r\nimport Modal from 'react-bootstrap/Modal';\r\nimport isEmptyObject from '@stdlib/assert/is-empty-object';\r\nimport logger from 'debug';\r\nimport TwoFactorAuthentication from './two_factor_authentication.js';\r\nimport EnterTokenModal from './enter_token_modal.js';\r\n\r\n\r\n// FUNCTIONS //\r\n\r\nconst createTooltip = ( str ) => {\r\n\treturn <Tooltip id=\"tooltip\">{str}</Tooltip>;\r\n};\r\n\r\nconst validateRequiredName = ( name ) => {\r\n\treturn name && name.length >= 2;\r\n};\r\n\r\nconst validateName = ( name ) => {\r\n\tif ( !name ) {\r\n\t\treturn true;\r\n\t}\r\n\tif ( name.length >= 2 ) {\r\n\t\treturn true;\r\n\t}\r\n\t// Case: name is too short.\r\n\treturn false;\r\n};\r\n\r\n\r\n// VARIABLES //\r\n\r\nconst debug = logger( 'isle-dashboard' );\r\n\r\n\r\n// MAIN //\r\n\r\nclass EditModal extends Component {\r\n\tconstructor( props ) {\r\n\t\tsuper( props );\r\n\r\n\t\tthis.state = {\r\n\t\t\temail: props.user.email,\r\n\t\t\tfirstName: props.user.firstName,\r\n\t\t\tlastName: props.user.lastName,\r\n\t\t\tpreferredName: props.user.preferredName,\r\n\t\t\torganization: props.user.organization,\r\n\t\t\tpronouns: props.user.pronouns,\r\n\t\t\tpassword: '',\r\n\t\t\tpasswordRepeat: '',\r\n\t\t\tchanged: false,\r\n\t\t\tshowTokenModal: false,\r\n\t\t\tcustomFields: props.user.customFields || {}\r\n\t\t};\r\n\t}\r\n\r\n\thandleUpdate = () => {\r\n\t\tconst { firstName, lastName, preferredName, pronouns, password, passwordRepeat, organization, customFields } = this.state;\r\n\t\tconst form = {\r\n\t\t\torganization,\r\n\t\t\tpreferredName,\r\n\t\t\tpronouns\r\n\t\t};\r\n\t\tif ( firstName ) {\r\n\t\t\tform.firstName = firstName;\r\n\t\t}\r\n\t\tif ( lastName ) {\r\n\t\t\tform.lastName = lastName;\r\n\t\t}\r\n\t\tlet change = false;\r\n\t\tif ( password ) {\r\n\t\t\tif ( passwordRepeat === password ) {\r\n\t\t\t\tchange = true;\r\n\t\t\t\tform.password = password;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (\r\n\t\t\tfirstName !== this.props.user.firstName ||\r\n\t\t\tlastName !== this.props.user.lastName ||\r\n\t\t\tpreferredName !== this.props.user.preferredName ||\r\n\t\t\tpronouns !== this.props.user.pronouns ||\r\n\t\t\torganization !== this.props.user.organization\r\n\t\t) {\r\n\t\t\tchange = true;\r\n\t\t}\r\n\t\tif ( !isEmptyObject( customFields ) ) {\r\n\t\t\tform.customFields = customFields;\r\n\t\t\tchange = true;\r\n\t\t}\r\n\t\tif ( change ) {\r\n\t\t\tdebug( 'Update user...' );\r\n\t\t\tthis.props.updateUser( form );\r\n\t\t\tthis.props.onHide();\r\n\t\t}\r\n\t};\r\n\r\n\thandleInputChange = ( event ) => {\r\n\t\tconst target = event.target;\r\n\t\tconst value = target.value;\r\n\t\tconst name = target.name;\r\n\t\tthis.setState({\r\n\t\t\t[ name ]: value,\r\n\t\t\tchanged: true\r\n\t\t});\r\n\t};\r\n\r\n\tgetPasswordValidationState = () => {\r\n\t\tconst { password, passwordRepeat } = this.state;\r\n\t\tif ( password.length < 6 || passwordRepeat.length === 0 ) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif ( password !== passwordRepeat ) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t};\r\n\r\n\ttoggleTokenModal = () => {\r\n\t\tthis.setState({\r\n\t\t\tshowTokenModal: !this.state.showTokenModal\r\n\t\t});\r\n\t};\r\n\r\n\trenderInstructorButton() {\r\n\t\tif ( this.props.user.writeAccess ) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tconst t = this.props.t;\r\n\t\treturn ( <Button\r\n\t\t\tonClick={this.toggleTokenModal}\r\n\t\t\tvariant=\"outline-success\"\r\n\t\t\tstyle={{ float: 'right', marginRight: 5 }}\r\n\t\t>{t('get-instructor-access')}</Button> );\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst validPasswords = this.getPasswordValidationState();\r\n\t\tconst validFirstName = validateRequiredName( this.state.firstName );\r\n\t\tconst validLastName = validateRequiredName( this.state.lastName );\r\n\t\tconst validPreferredName = validateName( this.state.preferredName );\r\n\t\tconst enteredPasswords = this.state.password || this.state.passwordRepeat;\r\n\t\tconst user = this.props.user;\r\n\t\tconst t = this.props.t;\r\n\t\tconst userCustomFields = this.state.customFields;\r\n\t\tconst availableCustomFields = user.availableCustomFields || [];\r\n\t\tlet passwordCol;\r\n\t\tif ( !user.loginWithoutPassword ) {\r\n\t\t\tpasswordCol = <Col sm={6} className=\"d-grid gap-3\" >\r\n\t\t\t\t<OverlayTrigger placement=\"right\" overlay={createTooltip( t('enter-password') )}>\r\n\t\t\t\t\t<FormGroup\r\n\t\t\t\t\t\tcontrolId=\"form-password\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<FormLabel>{t('common:password')}</FormLabel>\r\n\t\t\t\t\t\t<FormControl\r\n\t\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\tvalue={this.state.password}\r\n\t\t\t\t\t\t\tautoComplete=\"none\"\r\n\t\t\t\t\t\t\tplaceholder={t('common:choose-new-password')}\r\n\t\t\t\t\t\t\tonChange={this.handleInputChange}\r\n\t\t\t\t\t\t\tmaxLength={30}\r\n\t\t\t\t\t\t\tminLength={6}\r\n\t\t\t\t\t\t\tisInvalid={enteredPasswords && !validPasswords}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Form.Control.Feedback type=\"invalid\">\r\n\t\t\t\t\t\t\tPlease enter a new password with at least six characters.\r\n\t\t\t\t\t\t</Form.Control.Feedback>\r\n\t\t\t\t\t</FormGroup>\r\n\t\t\t\t</OverlayTrigger>\r\n\t\t\t\t<FormGroup\r\n\t\t\t\t\tcontrolId=\"form-repeat-password\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<FormControl\r\n\t\t\t\t\t\tname=\"passwordRepeat\"\r\n\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\tvalue={this.state.passwordRepeat}\r\n\t\t\t\t\t\tautoComplete=\"none\"\r\n\t\t\t\t\t\tplaceholder={t('repeat-new-password')}\r\n\t\t\t\t\t\tonChange={this.handleInputChange}\r\n\t\t\t\t\t\tmaxLength={30}\r\n\t\t\t\t\t\tminLength={6}\r\n\t\t\t\t\t\tisInvalid={enteredPasswords && !validPasswords}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Form.Control.Feedback type=\"invalid\">\r\n\t\t\t\t\t\t{t('invalid-password')}\r\n\t\t\t\t\t</Form.Control.Feedback>\r\n\t\t\t\t</FormGroup>\r\n\t\t\t\t<TwoFactorAuthentication\r\n\t\t\t\t\tuser={this.props.user} t={this.props.t}\r\n\t\t\t\t\tdisableTFA={this.props.disableTFA}\r\n\t\t\t\t\tenableTFA={this.props.enableTFA}\r\n\t\t\t\t\tgetTfaQRCode={this.props.getTfaQRCode}\r\n\t\t\t\t/>\r\n\t\t\t</Col>;\r\n\t\t} else {\r\n\t\t\tpasswordCol = null;\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<Fragment>\r\n\t\t\t\t<Modal show={this.props.show} onHide={this.props.onHide} dialogClassName=\"edit-modal\" >\r\n\t\t\t\t<Modal.Header>\r\n\t\t\t\t\t<Modal.Title as=\"h3\" style={{ width: '100%' }}>\r\n\t\t\t\t\t\t{t('profile')}\r\n\t\t\t\t\t\t<OverlayTrigger placement=\"right\" overlay={createTooltip( t('close-edit-modal') )}>\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tonClick={this.props.onHide}\r\n\t\t\t\t\t\t\t\tstyle={{ float: 'right' }}\r\n\t\t\t\t\t\t\t\tvariant=\"outline-secondary\"\r\n\t\t\t\t\t\t\t\taria-label={t('close-edit-modal')}\r\n\t\t\t\t\t\t\t\tclassName=\"modal-close\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<span aria-hidden=\"true\">x</span>\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</OverlayTrigger>\r\n\t\t\t\t\t\t{this.renderInstructorButton()}\r\n\t\t\t\t\t</Modal.Title>\r\n\t\t\t\t</Modal.Header>\r\n\t\t\t\t<Modal.Body>\r\n\t\t\t\t\t<Form as={Row} >\r\n\t\t\t\t\t\t<Col sm={6} className=\"d-grid gap-2\" >\r\n\t\t\t\t\t\t\t<FormGroup\r\n\t\t\t\t\t\t\t\tcontrolId=\"form-email\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<FormLabel style={{ width: '100%' }}>\r\n\t\t\t\t\t\t\t\t\t{t('common:email')}\r\n\t\t\t\t\t\t\t\t\t{!user.verifiedEmail ? <Badge\r\n\t\t\t\t\t\t\t\t\t\tbg=\"danger\" style={{ float: 'right' }}\r\n\t\t\t\t\t\t\t\t\t>{t('common:email-not-verified')}\r\n\t\t\t\t\t\t\t\t\t\t<OverlayTrigger placement=\"right\" overlay={createTooltip( t('resend-confirm-email') )}>\r\n\t\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\t\taria-label={t('resend-confirm-email')}\r\n\t\t\t\t\t\t\t\t\t\t\t\tsize=\"sm\" variant=\"outline-light\" onClick={this.props.resendConfirmEmail}\r\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ fontSize: 12, marginLeft: 6 }}\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<i className=\"fas fa-redo-alt\"></i>\r\n\t\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t\t</OverlayTrigger>\r\n\t\t\t\t\t\t\t\t\t</Badge> : null}\r\n\t\t\t\t\t\t\t\t</FormLabel>\r\n\t\t\t\t\t\t\t\t<FormControl\r\n\t\t\t\t\t\t\t\t\tname=\"email\"\r\n\t\t\t\t\t\t\t\t\ttype=\"email\"\r\n\t\t\t\t\t\t\t\t\tvalue={this.state.email}\r\n\t\t\t\t\t\t\t\t\tdisabled\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</FormGroup>\r\n\t\t\t\t\t\t\t<OverlayTrigger placement=\"right\" overlay={createTooltip( t('update-first-name') )}>\r\n\t\t\t\t\t\t\t\t<FormGroup\r\n\t\t\t\t\t\t\t\t\tcontrolId=\"form-first-name\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<FormLabel>{t('common:first-name')}</FormLabel>\r\n\t\t\t\t\t\t\t\t\t<FormControl\r\n\t\t\t\t\t\t\t\t\t\tname=\"firstName\"\r\n\t\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\t\tvalue={this.state.firstName}\r\n\t\t\t\t\t\t\t\t\t\tonChange={this.handleInputChange}\r\n\t\t\t\t\t\t\t\t\t\tisInvalid={!validFirstName}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<Form.Control.Feedback type=\"invalid\">\r\n\t\t\t\t\t\t\t\t\t\t{t('invalid-name')}\r\n\t\t\t\t\t\t\t\t\t</Form.Control.Feedback>\r\n\t\t\t\t\t\t\t\t</FormGroup>\r\n\t\t\t\t\t\t\t</OverlayTrigger>\r\n\t\t\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t\t\t<Col md={6} >\r\n\t\t\t\t\t\t\t\t\t<OverlayTrigger placement=\"right\" overlay={createTooltip( t('update-preferred-name') )}>\r\n\t\t\t\t\t\t\t\t\t\t<FormGroup\r\n\t\t\t\t\t\t\t\t\t\t\tcontrolId=\"form-preferred-name\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<FormLabel>{t('common:preferred-name')}</FormLabel>\r\n\t\t\t\t\t\t\t\t\t\t\t<FormControl\r\n\t\t\t\t\t\t\t\t\t\t\t\tname=\"preferredName\"\r\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={this.state.preferredName}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={this.handleInputChange}\r\n\t\t\t\t\t\t\t\t\t\t\t\tisInvalid={!validPreferredName}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t<Form.Control.Feedback type=\"invalid\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{t('invalid-name')}\r\n\t\t\t\t\t\t\t\t\t\t\t</Form.Control.Feedback>\r\n\t\t\t\t\t\t\t\t\t\t</FormGroup>\r\n\t\t\t\t\t\t\t\t\t</OverlayTrigger>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t<Col md={6} >\r\n\t\t\t\t\t\t\t\t\t<OverlayTrigger placement=\"right\" overlay={createTooltip( t('update-pronouns') )}>\r\n\t\t\t\t\t\t\t\t\t\t<FormGroup\r\n\t\t\t\t\t\t\t\t\t\t\tcontrolId=\"form-pronouns\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<FormLabel>{t('common:pronouns')}</FormLabel>\r\n\t\t\t\t\t\t\t\t\t\t\t<FormControl\r\n\t\t\t\t\t\t\t\t\t\t\t\tname=\"pronouns\"\r\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={this.state.pronouns}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={this.handleInputChange}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</FormGroup>\r\n\t\t\t\t\t\t\t\t\t</OverlayTrigger>\r\n\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t\t<OverlayTrigger placement=\"right\" overlay={createTooltip( t('update-last-name') )}>\r\n\t\t\t\t\t\t\t\t<FormGroup\r\n\t\t\t\t\t\t\t\t\tcontrolId=\"form-last-name\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<FormLabel>{t('common:last-name')}</FormLabel>\r\n\t\t\t\t\t\t\t\t\t<FormControl\r\n\t\t\t\t\t\t\t\t\t\tname=\"lastName\"\r\n\t\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\t\tvalue={this.state.lastName}\r\n\t\t\t\t\t\t\t\t\t\tonChange={this.handleInputChange}\r\n\t\t\t\t\t\t\t\t\t\tisInvalid={!validLastName}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t<Form.Control.Feedback type=\"invalid\">\r\n\t\t\t\t\t\t\t\t\t\t{t('invalid-name')}\r\n\t\t\t\t\t\t\t\t\t</Form.Control.Feedback>\r\n\t\t\t\t\t\t\t\t</FormGroup>\r\n\t\t\t\t\t\t\t</OverlayTrigger>\r\n\t\t\t\t\t\t\t<OverlayTrigger placement=\"right\" overlay={createTooltip( t('update-organization') )}>\r\n\t\t\t\t\t\t\t\t<FormGroup\r\n\t\t\t\t\t\t\t\t\tcontrolId=\"form-organization\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<FormLabel>{t('common:organization')}</FormLabel>\r\n\t\t\t\t\t\t\t\t\t<FormControl\r\n\t\t\t\t\t\t\t\t\t\tname=\"organization\"\r\n\t\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\t\tvalue={this.state.organization}\r\n\t\t\t\t\t\t\t\t\t\tonChange={this.handleInputChange}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</FormGroup>\r\n\t\t\t\t\t\t\t</OverlayTrigger>\r\n\t\t\t\t\t\t\t{availableCustomFields.filter( x => x.showOnProfile || x.editableOnProfile ).map( ( x, idx ) => {\r\n\t\t\t\t\t\t\t\tlet input;\r\n\t\t\t\t\t\t\t\tconst value = userCustomFields[ x.name ];\r\n\t\t\t\t\t\t\t\tif ( x.type === 'checkbox' ) {\r\n\t\t\t\t\t\t\t\t\tinput = <Form.Check\r\n\t\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\t\t\t\t\t\tlabel={x.name}\r\n\t\t\t\t\t\t\t\t\t\tdefaultChecked={value}\r\n\t\t\t\t\t\t\t\t\t\tdisabled={!x.editableOnProfile}\r\n\t\t\t\t\t\t\t\t\t\tonChange={( event ) => {\r\n\t\t\t\t\t\t\t\t\t\t\tconst newCustomFields = { ...this.state.customFields };\r\n\t\t\t\t\t\t\t\t\t\t\tnewCustomFields[ x.name ] = event.target.checked;\r\n\t\t\t\t\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\t\t\t\t\tcustomFields: newCustomFields,\r\n\t\t\t\t\t\t\t\t\t\t\t\tchanged: true\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t/>;\r\n\t\t\t\t\t\t\t\t} else if ( x.type === 'text' ) {\r\n\t\t\t\t\t\t\t\t\tinput = <FormGroup\r\n\t\t\t\t\t\t\t\t\t\tcontrolId={`form-${x.name}`}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<FormLabel>{x.name}</FormLabel>\r\n\t\t\t\t\t\t\t\t\t\t<FormControl\r\n\t\t\t\t\t\t\t\t\t\t\tname={x.name}\r\n\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={value}\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder={`Enter ${x.name}...`}\r\n\t\t\t\t\t\t\t\t\t\t\tdisabled={!x.editableOnProfile}\r\n\t\t\t\t\t\t\t\t\t\t\tonChange={( event ) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tconst newCustomFields = { ...this.state.customFields };\r\n\t\t\t\t\t\t\t\t\t\t\t\tnewCustomFields[ x.name ] = event.target.value;\r\n\t\t\t\t\t\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcustomFields: newCustomFields,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tchanged: true\r\n\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\tautoComplete=\"none\"\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</FormGroup>;\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t// Case: dropdown menu\r\n\t\t\t\t\t\t\t\t\tinput = <FormGroup\r\n\t\t\t\t\t\t\t\t\t\tcontrolId={`form-${x.name}`}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<FormLabel>{x.name}</FormLabel>\r\n\t\t\t\t\t\t\t\t\t\t<SelectInput\r\n\t\t\t\t\t\t\t\t\t\t\tdefaultValue={value ?\r\n\t\t\t\t\t\t\t\t\t\t\t\t{ label: value, value: value } :\r\n\t\t\t\t\t\t\t\t\t\t\t\tnull\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\tdisabled={!x.editableOnProfile}\r\n\t\t\t\t\t\t\t\t\t\t\toptions={x.options.map( e => {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn { value: e, label: e };\r\n\t\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t\t\tonChange={( elem ) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tconst newCustomFields = { ...this.state.customFields };\r\n\t\t\t\t\t\t\t\t\t\t\t\tnewCustomFields[ x.name ] = elem.value;\r\n\t\t\t\t\t\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcustomFields: newCustomFields,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tchanged: true\r\n\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</FormGroup>;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<OverlayTrigger key={idx} placement=\"top\" overlay={createTooltip( x.description )} >\r\n\t\t\t\t\t\t\t\t\t\t{input}\r\n\t\t\t\t\t\t\t\t\t</OverlayTrigger>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t{passwordCol}\r\n\t\t\t\t\t</Form>\r\n\t\t\t\t\t<Row style={{ paddingTop: 10 }} className=\"d-grid\" >\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tdisabled={!this.state.changed || !validFirstName || !validLastName || !validPreferredName || ( !validPasswords && enteredPasswords )}\r\n\t\t\t\t\t\t\tonClick={this.handleUpdate}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{t('common:update')}\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t\t</Modal.Body>\r\n\t\t\t\t</Modal>\r\n\t\t\t\t<EnterTokenModal\r\n\t\t\t\t\tuser={user}\r\n\t\t\t\t\tauthenticate={this.props.authenticate}\r\n\t\t\t\t\tshow={this.state.showTokenModal}\r\n\t\t\t\t\tonHide={this.toggleTokenModal}\r\n\t\t\t\t/>\r\n\t\t\t</Fragment>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n\r\n// PROPERTIES //\r\n\r\nEditModal.propTypes = {\r\n\tauthenticate: PropTypes.func.isRequired,\r\n\tdisableTFA: PropTypes.func.isRequired,\r\n\tenableTFA: PropTypes.func.isRequired,\r\n\tgetTfaQRCode: PropTypes.func.isRequired,\r\n\tonHide: PropTypes.func.isRequired,\r\n\tresendConfirmEmail: PropTypes.func.isRequired,\r\n\tshow: PropTypes.bool.isRequired,\r\n\tt: PropTypes.func.isRequired,\r\n\tupdateUser: PropTypes.func.isRequired,\r\n\tuser: PropTypes.object.isRequired\r\n};\r\n\r\nEditModal.defaultProps = {};\r\n\r\n\r\n// EXPORTS\r\n\r\nexport default EditModal;\r\n","/**\r\n* Copyright (C) 2016-present The ISLE Authors\r\n*\r\n* The isle-dashboard program is free software: you can redistribute it and/or modify\r\n* it under the terms of the GNU Affero General Public License as\r\n* published by the Free Software Foundation, either version 3 of the\r\n* License, or (at your option) any later version.\r\n*\r\n* This program is distributed in the hope that it will be useful,\r\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n* GNU Affero General Public License for more details.\r\n*\r\n* You should have received a copy of the GNU Affero General Public License\r\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\r\n*/\r\n\r\n// MODULES //\r\n\r\nimport React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Table from 'react-bootstrap/Table';\r\nimport objectKeys from '@stdlib/utils/keys';\r\n\r\n\r\n// MAIN //\r\n\r\nclass ActionTypesDisplay extends Component {\r\n\tshouldComponentUpdate( nextProps ) {\r\n\t\tif ( nextProps.selectedNamespaceID !== this.props.selectedNamespaceID ) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { selectedNamespace, lessonData: data } = this.props;\r\n\t\tif ( !selectedNamespace || !data ) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tconst lessons = selectedNamespace.lessons;\r\n\t\tif ( !lessons ) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tconst actionTypes = {};\r\n\t\tfor ( let i = 0; i < lessons.length; i++ ) {\r\n\t\t\tconst lesson = lessons[ i ];\r\n\t\t\tconst id = lesson._id;\r\n\t\t\tif ( data[ id ] ) {\r\n\t\t\t\tconst types = data[ id ].actionTypes;\r\n\t\t\t\tif ( types ) {\r\n\t\t\t\t\tconst typeNames = objectKeys( types );\r\n\t\t\t\t\tfor ( let j = 0; j < typeNames.length; j++ ) {\r\n\t\t\t\t\t\tconst name = typeNames[ j ];\r\n\t\t\t\t\t\tif ( actionTypes[ name ] ) {\r\n\t\t\t\t\t\t\tactionTypes[ name ] += types[ name ];\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tactionTypes[ name ] = types[ name ];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst keys = objectKeys( actionTypes );\r\n\t\tconst rows = new Array( keys.length );\r\n\t\tfor ( let i = 0; i < keys.length; i++ ) {\r\n\t\t\tconst type = keys[ i ];\r\n\t\t\tconst count = actionTypes[ keys[ i ] ];\r\n\t\t\trows[ i ] = <tr key={i}>\r\n\t\t\t\t<td>{type}</td>\r\n\t\t\t\t<td>{count}</td>\r\n\t\t\t</tr>;\r\n\t\t}\r\n\t\treturn ( <Table size=\"sm\" striped style={{ fontSize: '0.8rem' }}>\r\n\t\t\t<thead>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<th>Action Type</th>\r\n\t\t\t\t\t<th>Count</th>\r\n\t\t\t\t</tr>\r\n\t\t\t</thead>\r\n\t\t\t<tbody>\r\n\t\t\t\t{rows}\r\n\t\t\t</tbody>\r\n\t\t</Table> );\r\n\t}\r\n}\r\n\r\n\r\n// PROPERTIES //\r\n\r\nActionTypesDisplay.propTypes = {\r\n\tlessonData: PropTypes.object,\r\n\tselectedNamespace: PropTypes.object,\r\n\tselectedNamespaceID: PropTypes.string\r\n};\r\n\r\nActionTypesDisplay.defaultProps = {\r\n\tlessonData: null,\r\n\tselectedNamespace: null,\r\n\tselectedNamespaceID: ''\r\n};\r\n\r\n\r\n// EXPORTS //\r\n\r\nexport default ActionTypesDisplay;\r\n","// MODULES //\r\n\r\nimport React, { Component, Fragment } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport platform from 'platform';\r\nimport logger from 'debug';\r\nimport SelectInput from 'react-select';\r\nimport Modal from 'react-bootstrap/Modal';\r\nimport FormControl from 'react-bootstrap/FormControl';\r\nimport FormLabel from 'react-bootstrap/FormLabel';\r\nimport FormGroup from 'react-bootstrap/FormGroup';\r\nimport Button from 'react-bootstrap/Button';\r\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\r\nimport ListGroup from 'react-bootstrap/ListGroup';\r\nimport Tooltip from 'react-bootstrap/Tooltip';\r\n\r\n\r\n// VARIABLES //\r\n\r\nconst debug = logger( 'isle:toolbar:ticketing' );\r\n\r\n\r\n// FUNCTIONS //\r\n\r\nconst createOption = ( ns ) => {\r\n\treturn { value: ns, label: ns.title };\r\n};\r\n\r\n\r\n// MAIN //\r\n\r\nclass CreateTicketModal extends Component {\r\n\tconstructor( props ) {\r\n\t\tsuper( props );\r\n\r\n\t\tthis.state = {\r\n\t\t\ttitle: '',\r\n\t\t\tdescription: '',\r\n\t\t\tselectedCourse: props.enrolledNamespaces ? createOption( props.enrolledNamespaces[ 0 ] ) : null,\r\n\t\t\tfiles: []\r\n\t\t};\r\n\t}\r\n\r\n\tattachFile = () => {\r\n\t\tconst input = document.createElement( 'input' );\r\n\t\tinput.type = 'file';\r\n\t\tinput.onchange = ( e ) => {\r\n\t\t\tconst files = e.target.files;\r\n\t\t\tconst newFiles = [ ...this.state.files, ...files ];\r\n\t\t\tthis.setState({\r\n\t\t\t\tfiles: newFiles\r\n\t\t\t});\r\n\t\t};\r\n\t\tinput.click();\r\n\t};\r\n\r\n\thandleTitleChange = ( event ) => {\r\n\t\tthis.setState({\r\n\t\t\ttitle: event.target.value\r\n\t\t});\r\n\t};\r\n\r\n\thandleDescriptionChange = ( event ) => {\r\n\t\tthis.setState({\r\n\t\t\tdescription: event.target.value\r\n\t\t});\r\n\t};\r\n\r\n\thandleCourseChange = ( newValue ) => {\r\n\t\tthis.setState({\r\n\t\t\tselectedCourse: newValue\r\n\t\t});\r\n\t};\r\n\r\n\thandleSubmit = async () => {\r\n\t\tdebug( 'Create ticket...' );\r\n\t\tawait this.props.createTicket({\r\n\t\t\ttitle: this.state.title,\r\n\t\t\tdescription: this.state.description,\r\n\t\t\tplatform: {\r\n\t\t\t\tname: platform.name,\r\n\t\t\t\tversion: platform.version,\r\n\t\t\t\tproduct: platform.product,\r\n\t\t\t\tmanufacturer: platform.manufacturer,\r\n\t\t\t\tos: platform.os,\r\n\t\t\t\tdescription: platform.description\r\n\t\t\t},\r\n\t\t\tnamespace: this.state.selectedCourse.value,\r\n\t\t\tfiles: this.state.files\r\n\t\t});\r\n\t\tthis.props.onHide();\r\n\t};\r\n\r\n\tremoveFileFactory = ( idx ) => {\r\n\t\treturn () => {\r\n\t\t\tconst newFiles = this.state.files.slice();\r\n\t\t\tnewFiles.splice( idx, 1 );\r\n\t\t\tthis.setState({\r\n\t\t\t\tfiles: newFiles\r\n\t\t\t});\r\n\t\t};\r\n\t};\r\n\r\n\trenderAttachments() {\r\n\t\tif ( this.state.files.length === 0 ) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<Fragment>\r\n\t\t\t\t<span className=\"title\">{this.props.t('attachments')}:</span>\r\n\t\t\t\t<ListGroup className=\"ticketing-attachment-list\" >\r\n\t\t\t\t\t{this.state.files.map( ( file, idx ) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<ListGroup.Item key={`file-${idx}`}>\r\n\t\t\t\t\t\t\t\t{file.name}\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\tvariant=\"danger\"\r\n\t\t\t\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\t\t\t\tonClick={this.removeFileFactory( idx )}\r\n\t\t\t\t\t\t\t\t\tstyle={{ float: 'right' }}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\tx\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</ListGroup.Item>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t})}\r\n\t\t\t\t</ListGroup>\r\n\t\t\t</Fragment>\r\n\t\t);\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { t } = this.props;\r\n\t\treturn (\r\n\t\t\t<Modal onHide={this.props.onHide} show={this.props.show} dialogClassName=\"modal-40w\" >\r\n\t\t\t\t<Modal.Header closeButton >\r\n\t\t\t\t\t<Modal.Title as=\"h3\" >{t('new-ticket')}</Modal.Title>\r\n\t\t\t\t</Modal.Header>\r\n\t\t\t\t<Modal.Body>\r\n\t\t\t\t\t<p>{t('ticketing-intro')}</p>\r\n\t\t\t\t\t<FormGroup>\r\n\t\t\t\t\t\t<FormLabel>{t('common:course')}:</FormLabel>\r\n\t\t\t\t\t\t<SelectInput\r\n\t\t\t\t\t\t\toptions={this.props.enrolledNamespaces.map( createOption )}\r\n\t\t\t\t\t\t\tonChange={this.handleCourseChange}\r\n\t\t\t\t\t\t\tvalue={this.state.selectedCourse}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</FormGroup>\r\n\t\t\t\t\t<FormGroup>\r\n\t\t\t\t\t\t<FormLabel>{t('common:title')}:</FormLabel>\r\n\t\t\t\t\t\t<FormControl\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tplaceholder={t('ticket-title-placeholder')}\r\n\t\t\t\t\t\t\tonChange={this.handleTitleChange}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</FormGroup>\r\n\t\t\t\t\t<FormGroup controlId=\"form-text\" >\r\n\t\t\t\t\t\t<FormLabel>{t('common:description')}:</FormLabel>\r\n\t\t\t\t\t\t<FormControl\r\n\t\t\t\t\t\t\tname=\"body\"\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tas=\"textarea\" rows=\"5\"\r\n\t\t\t\t\t\t\tplaceholder={t('ticket-description-placeholder')}\r\n\t\t\t\t\t\t\tvalue={this.state.description}\r\n\t\t\t\t\t\t\tonChange={this.handleDescriptionChange}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t</FormGroup>\r\n\t\t\t\t\t{this.renderAttachments()}\r\n\t\t\t\t</Modal.Body>\r\n\t\t\t\t<Modal.Footer>\r\n\t\t\t\t\t<OverlayTrigger placement=\"left\" overlay={<Tooltip id=\"attachmentTooltip\">{t('attach-file')}</Tooltip>}>\r\n\t\t\t\t\t\t<Button onClick={this.attachFile} >\r\n\t\t\t\t\t\t\t<i className=\"fas fa-paperclip\"></i>\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</OverlayTrigger>\r\n\t\t\t\t\t<Button onClick={this.props.onHide} >\r\n\t\t\t\t\t\t{t('common:cancel')}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button onClick={this.handleSubmit} >\r\n\t\t\t\t\t\t{t('create-ticket')}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Modal.Footer>\r\n\t\t\t</Modal>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n\r\n// PROPERTIES //\r\n\r\nCreateTicketModal.propTypes = {\r\n\tcreateTicket: PropTypes.func.isRequired,\r\n\tenrolledNamespaces: PropTypes.array,\r\n\tonHide: PropTypes.func.isRequired,\r\n\tshow: PropTypes.bool.isRequired\r\n};\r\n\r\nCreateTicketModal.defaultProps = {\r\n\tenrolledNamespaces: []\r\n};\r\n\r\n\r\n// EXPORTS //\r\n\r\nexport default CreateTicketModal;\r\n","/**\r\n* Copyright (C) 2016-present The ISLE Authors\r\n*\r\n* The isle-dashboard program is free software: you can redistribute it and/or modify\r\n* it under the terms of the GNU Affero General Public License as\r\n* published by the Free Software Foundation, either version 3 of the\r\n* License, or (at your option) any later version.\r\n*\r\n* This program is distributed in the hope that it will be useful,\r\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n* GNU Affero General Public License for more details.\r\n*\r\n* You should have received a copy of the GNU Affero General Public License\r\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\r\n*/\r\n\r\n// MODULES //\r\n\r\nimport React, { Component, Fragment } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\r\nimport Tooltip from 'react-bootstrap/Tooltip';\r\nimport ListGroup from 'react-bootstrap/ListGroup';\r\nimport Button from 'react-bootstrap/Button';\r\nimport Badge from 'react-bootstrap/Badge';\r\nimport Modal from 'react-bootstrap/Modal';\r\nimport TicketModal from 'components/ticket-modal';\r\nimport CreateTicketModal from './create_ticket_modal.js';\r\n\r\n\r\n// VARIABLES //\r\n\r\nconst RE_TICKET = /ticket=([^&]*)/;\r\n\r\n\r\n// MAIN //\r\n\r\nclass TicketListModal extends Component {\r\n\tconstructor( props ) {\r\n\t\tsuper( props );\r\n\r\n\t\tthis.state = {\r\n\t\t\tshowCreateModal: false,\r\n\t\t\tshowMessagesModal: false,\r\n\t\t\tshowOpen: true\r\n\t\t};\r\n\t}\r\n\r\n\tasync componentDidMount() {\r\n\t\tawait this.props.getUserTickets();\r\n\t\tif ( window && window.location.search ) {\r\n\t\t\tconst match = RE_TICKET.exec( window.location.search );\r\n\t\t\tif ( match && match[ 1 ] ) {\r\n\t\t\t\tconst { tickets } = this.props.user;\r\n\t\t\t\tif ( tickets ) {\r\n\t\t\t\t\tfor ( let i = 0; i < tickets.length; i++ ) {\r\n\t\t\t\t\t\tconst ticket = tickets[ i ];\r\n\t\t\t\t\t\tif ( ticket._id === match[ 1 ] ) {\r\n\t\t\t\t\t\t\t// eslint-disable-next-line react/no-did-mount-set-state\r\n\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\tselectedTicket: ticket,\r\n\t\t\t\t\t\t\t\tshowMessagesModal: true\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\ttoggleCreateModal = () => {\r\n\t\tthis.setState({\r\n\t\t\tshowCreateModal: !this.state.showCreateModal\r\n\t\t});\r\n\t};\r\n\r\n\ttoggleTicketModal = () => {\r\n\t\tthis.setState({\r\n\t\t\tshowMessagesModal: !this.state.showMessagesModal\r\n\t\t});\r\n\t};\r\n\r\n\ttoggleShowAll = () => {\r\n\t\tthis.setState({\r\n\t\t\tshowOpen: !this.state.showOpen\r\n\t\t});\r\n\t};\r\n\r\n\trenderTicketList() {\r\n\t\tconst out = [];\r\n\t\tconst { user, t } = this.props;\r\n\t\tif ( !user ) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tconst { tickets } = user;\r\n\t\tif ( !tickets ) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tif ( this.state.showOpen ) {\r\n\t\t\tfor ( let i = 0; i < tickets.length; i++ ) {\r\n\t\t\t\tconst ticket = tickets[ i ];\r\n\t\t\t\tif ( ticket.done === true ) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tout.push(\r\n\t\t\t\t\t<ListGroup.Item key={`ticket-${i}`}>\r\n\t\t\t\t\t\t{ticket.title}: {ticket.description}\r\n\t\t\t\t\t\t<OverlayTrigger placement=\"bottom\" overlay={<Tooltip id=\"ticket-status-tooltip\">\r\n\t\t\t\t\t\t\t{t('common:close-ticket')}\r\n\t\t\t\t\t\t</Tooltip>}>\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tvariant=\"outline-secondary\" size=\"sm\"\r\n\t\t\t\t\t\t\t\tstyle={{ float: 'right', marginLeft: 6 }}\r\n\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\tthis.props.closeTicket( ticket._id );\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<i className=\"far fa-square\" />\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</OverlayTrigger>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\t\tvariant=\"outline-secondary\"\r\n\t\t\t\t\t\t\tstyle={{ float: 'right' }}\r\n\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\t\tselectedTicket: ticket\r\n\t\t\t\t\t\t\t\t}, this.toggleTicketModal );\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{t('common:messages')}\r\n\t\t\t\t\t\t\t<Badge className=\"ticket-badge\" bg=\"secondary\" >{ticket.messages.length}</Badge>\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</ListGroup.Item>\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tfor ( let i = 0; i < tickets.length; i++ ) {\r\n\t\t\t\tconst ticket = tickets[ i ];\r\n\t\t\t\tif ( ticket.done === false ) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tout.push(\r\n\t\t\t\t\t<ListGroup.Item key={`ticket-${i}`}>\r\n\t\t\t\t\t\t{ticket.title}: {ticket.description}\r\n\t\t\t\t\t\t<OverlayTrigger placement=\"bottom\" overlay={<Tooltip id=\"ticket-status-tooltip\">\r\n\t\t\t\t\t\t\t{t('common:open-ticket')}\r\n\t\t\t\t\t\t</Tooltip>}>\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tbg=\"outline-secondary\"\r\n\t\t\t\t\t\t\t\tsize=\"sm\" style={{ float: 'right', marginLeft: 6 }}\r\n\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\tthis.props.openTicket( ticket._id );\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<i className=\"far fa-check-square\"></i>\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</OverlayTrigger>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\t\tvariant=\"outline-secondary\"\r\n\t\t\t\t\t\t\tstyle={{ float: 'right' }}\r\n\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\t\tselectedTicket: ticket\r\n\t\t\t\t\t\t\t\t}, this.toggleTicketModal );\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{t('common:messages')}\r\n\t\t\t\t\t\t\t<Badge className=\"ticket-badge\" bg=\"secondary\" >{ticket.messages.length}</Badge>\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</ListGroup.Item>\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn ( <ListGroup>\r\n\t\t\t{out}\r\n\t\t</ListGroup> );\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { t } = this.props;\r\n\t\tconst enrolledNamespaces = this.props.user.enrolledNamespaces.filter( x => x.enableTicketing );\r\n\t\treturn (\r\n\t\t\t<Fragment>\r\n\t\t\t\t<Modal onHide={this.props.onHide} show={this.props.show} dialogClassName=\"modal-40w\" >\r\n\t\t\t\t\t<Modal.Header closeButton >\r\n\t\t\t\t\t\t<Modal.Title as=\"h3\">{t('my-tickets')}</Modal.Title>\r\n\t\t\t\t\t</Modal.Header>\r\n\t\t\t\t\t<Modal.Body>\r\n\t\t\t\t\t\t{this.renderTicketList()}\r\n\r\n\t\t\t\t\t</Modal.Body>\r\n\t\t\t\t\t<Modal.Footer>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tonClick={this.toggleShowAll}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{this.state.showOpen ? t('show-completed-tickets') : t('show-open-tickets')}\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tonClick={this.toggleCreateModal}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{t('new-ticket')}\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tonClick={this.props.onHide}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{t('common:close')}\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</Modal.Footer>\r\n\t\t\t\t</Modal>\r\n\t\t\t\t{ this.state.showCreateModal ? <CreateTicketModal\r\n\t\t\t\t\tshow={this.state.showCreateModal}\r\n\t\t\t\t\tonHide={this.toggleCreateModal}\r\n\t\t\t\t\tenrolledNamespaces={enrolledNamespaces}\r\n\t\t\t\t\tcreateTicket={this.props.createTicket}\r\n\t\t\t\t\tt={t}\r\n\t\t\t\t/> : null }\r\n\t\t\t\t{ this.state.showMessagesModal ? <TicketModal\r\n\t\t\t\t\tshow={this.state.showMessagesModal}\r\n\t\t\t\t\tonHide={this.toggleTicketModal}\r\n\t\t\t\t\tticket={this.state.selectedTicket}\r\n\t\t\t\t\tsubmitTicketMessage={this.props.submitTicketMessage}\r\n\t\t\t\t\tcloseTicket={this.props.closeTicket}\r\n\t\t\t\t\topenTicket={this.props.openTicket}\r\n\t\t\t\t/> : null }\r\n\t\t\t</Fragment>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n\r\n// PROPERTIES //\r\n\r\nTicketListModal.propTypes = {\r\n\tcloseTicket: PropTypes.func.isRequired,\r\n\tcreateTicket: PropTypes.func.isRequired,\r\n\tgetUserTickets: PropTypes.func.isRequired,\r\n\tonHide: PropTypes.func.isRequired,\r\n\topenTicket: PropTypes.func.isRequired,\r\n\tshow: PropTypes.bool.isRequired,\r\n\tsubmitTicketMessage: PropTypes.func.isRequired,\r\n\tuser: PropTypes.object.isRequired\r\n};\r\n\r\n\r\n// EXPORTS //\r\n\r\nexport default TicketListModal;\r\n","/**\r\n* Copyright (C) 2016-present The ISLE Authors\r\n*\r\n* The isle-dashboard program is free software: you can redistribute it and/or modify\r\n* it under the terms of the GNU Affero General Public License as\r\n* published by the Free Software Foundation, either version 3 of the\r\n* License, or (at your option) any later version.\r\n*\r\n* This program is distributed in the hope that it will be useful,\r\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n* GNU Affero General Public License for more details.\r\n*\r\n* You should have received a copy of the GNU Affero General Public License\r\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\r\n*/\r\n\r\n// MODULES //\r\n\r\nimport React, { Component, Fragment } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { withTranslation } from 'react-i18next';\r\nimport path from 'path';\r\nimport Button from 'react-bootstrap/Button';\r\nimport Card from 'react-bootstrap/Card';\r\nimport Nav from 'react-bootstrap/Nav';\r\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\r\nimport Tooltip from 'react-bootstrap/Tooltip';\r\nimport keys from '@stdlib/utils/keys';\r\nimport isObject from '@stdlib/assert/is-object';\r\nimport isArray from '@stdlib/assert/is-array';\r\nimport anyBy from '@stdlib/utils/any-by';\r\nimport formatTime from 'utils/format_time.js';\r\nimport asyncComponent from 'components/async';\r\nimport server from 'constants/server';\r\nimport EditModal from './edit_modal.js';\r\nconst ProfilePicModal = asyncComponent( () => import( './profile_pic_modal.js' ) );\r\nconst TimeSpent = asyncComponent( () => import( './time_spent.js' ) );\r\nconst ProgressStats = asyncComponent( () => import( './progress.js' ) );\r\nimport ActionTypesDisplay from './action_types_display.js';\r\nimport TicketListModal from './ticket_list.js';\r\nimport hoodie from './img/hoodie.jpg';\r\nimport badge from './img/question.svg';\r\nimport badgeCircle from './img/badge_circle.svg';\r\nimport './profile-page.css';\r\nimport './message-page.css';\r\n\r\n\r\n// FUNCTIONS //\r\n\r\nfunction id2Name( lessons, id ) {\r\n\tif ( !lessons ) {\r\n\t\treturn '';\r\n\t}\r\n\tfor ( let i = 0; i < lessons.length; i++ ) {\r\n\t\tif ( lessons[ i ]._id === id ) {\r\n\t\t\treturn lessons[ i ].title;\r\n\t\t}\r\n\t}\r\n\treturn '';\r\n}\r\n\r\n\r\n// MAIN //\r\n\r\nclass ProfilePage extends Component {\r\n\tconstructor( props ) {\r\n\t\tsuper( props );\r\n\r\n\t\tlet selectedNamespace = null;\r\n\t\tlet selectedNamespaceID = null;\r\n\t\tif ( props.user.enrolledNamespaces.length > 0 ) {\r\n\t\t\tselectedNamespace = props.user.enrolledNamespaces[ 0 ];\r\n\t\t\tselectedNamespaceID = selectedNamespace._id;\r\n\t\t}\r\n\t\tthis.state = {\r\n\t\t\tshowEditModal: false,\r\n\t\t\tshowProfilePicModal: false,\r\n\t\t\tshowTicketListModal: false,\r\n\t\t\tselectedNamespace: selectedNamespace,\r\n\t\t\tselectedNamespaceID: selectedNamespaceID,\r\n\t\t\tselectedDataType: 'messages',\r\n\t\t\tselectedStatsType: 'progress'\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tif ( !this.props.user.files ) {\r\n\t\t\tthis.props.getUserFiles();\r\n\t\t}\r\n\t\tconst course = this.state.selectedNamespace;\r\n\t\tif ( course ) {\r\n\t\t\tthis.props.getLessons( course.title );\r\n\t\t}\r\n\t\tthis.props.getUserBadges();\r\n\t}\r\n\r\n\ttoggleEditModal = () => {\r\n\t\tthis.setState({\r\n\t\t\tshowEditModal: !this.state.showEditModal\r\n\t\t});\r\n\t};\r\n\r\n\ttoggleTicketListModal = () => {\r\n\t\tthis.setState({\r\n\t\t\tshowTicketListModal: !this.state.showTicketListModal\r\n\t\t});\r\n\t};\r\n\r\n\ttoggleProfilePicModal = () => {\r\n\t\tthis.setState({\r\n\t\t\tshowProfilePicModal: !this.state.showProfilePicModal\r\n\t\t});\r\n\t};\r\n\r\n\thandleSelect = ( newValue, event ) => {\r\n\t\tconst namespaceName = event.target.title;\r\n\t\tconst id = event.target.dataset.id;\r\n\t\tthis.setState({\r\n\t\t\tselectedNamespaceID: newValue,\r\n\t\t\tselectedNamespace: this.props.user.enrolledNamespaces[ id ]\r\n\t\t}, () => {\r\n\t\t\tconst course = this.props.user.enrolledNamespaces[ id ];\r\n\t\t\tif ( !isObject( course.lessons[ 0 ] ) ) {\r\n\t\t\t\tthis.props.getLessons( namespaceName );\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\thandleStatsSelect = ( newValue, event ) => {\r\n\t\tthis.setState({\r\n\t\t\tselectedStatsType: newValue\r\n\t\t});\r\n\t};\r\n\r\n\trenderRightPanel() {\r\n\t\tif ( !this.state.selectedNamespace ) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tif ( this.state.selectedStatsType === 'progress' ) {\r\n\t\t\treturn (\r\n\t\t\t\t<ProgressStats\r\n\t\t\t\t\tuser={this.props.user}\r\n\t\t\t\t\tselectedNamespace={this.state.selectedNamespace}\r\n\t\t\t\t/>\r\n\t\t\t);\r\n\t\t}\r\n\t\tif ( this.state.selectedStatsType === 'timeSpent' ) {\r\n\t\t\treturn (\r\n\t\t\t\t<TimeSpent\r\n\t\t\t\t\tuser={this.props.user}\r\n\t\t\t\t\tselectedNamespace={this.state.selectedNamespace}\r\n\t\t\t\t/>\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\thandleDataSelect = ( newValue, event ) => {\r\n\t\tthis.setState({\r\n\t\t\tselectedDataType: newValue\r\n\t\t});\r\n\t};\r\n\r\n\tsubmitTicketMessage = ({ message, ticketID }) => {\r\n\t\tthis.props.sendTicketMessage({ message, ticketID, user: this.props.user });\r\n\t};\r\n\r\n\trenderLeftPanel() {\r\n\t\tif ( !this.state.selectedNamespace ) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tif ( this.state.selectedDataType === 'files' ) {\r\n\t\t\treturn this.renderFiles();\r\n\t\t}\r\n\t\tif ( this.state.selectedDataType === 'actions' ) {\r\n\t\t\tconst data = this.props.user.lessonData;\r\n\t\t\treturn ( <ActionTypesDisplay\r\n\t\t\t\tlessonData={data}\r\n\t\t\t\tselectedNamespace={this.state.selectedNamespace}\r\n\t\t\t\tselectedNamespaceID={this.state.selectedNamespaceID}\r\n\t\t\t/> );\r\n\t\t}\r\n\t\tif ( this.state.selectedDataType === 'messages' ) {\r\n\t\t\treturn this.renderMessages();\r\n\t\t}\r\n\t}\r\n\r\n\trenderFiles() {\r\n\t\tconst { t, user } = this.props;\r\n\t\tlet files = user.files;\r\n\t\tif ( files ) {\r\n\t\t\tfiles = files[ this.state.selectedNamespaceID ];\r\n\t\t}\r\n\t\tif ( !isArray( files ) ) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tconst out = [];\r\n\t\tfor ( let i = 0; i < files.length; i++ ) {\r\n\t\t\tconst file = files[ i ];\r\n\t\t\tconst lessonName = id2Name( this.state.selectedNamespace.lessons, file.lesson );\r\n\r\n\t\t\tlet cl = 'fas fa-file-image fa-4x';\r\n\t\t\tconst pth = path.extname( file.filename );\r\n\t\t\tswitch ( pth ) {\r\n\t\t\t\tcase '.html':\r\n\t\t\t\t\tcl = 'fab fa-html5 fa-4x';\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase '.pdf':\r\n\t\t\t\t\tcl = 'far fa-file-pdf fa-4x';\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase '.jpg':\r\n\t\t\t\t\tcl = 'fas fa-file-image fa-4x';\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tout.push( <div className=\"media\" key={i}>\r\n\t\t\t\t<div className=\"mr-3\">\r\n\t\t\t\t\t<a href={server+'/'+file.filename} target=\"_blank\" rel=\"noopener noreferrer\" >\r\n\t\t\t\t\t\t<i className={cl} />\r\n\t\t\t\t\t</a>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"media-body\" >\r\n\t\t\t\t\t<a href={server+'/'+file.filename} target=\"_blank\" rel=\"noopener noreferrer\" >\r\n\t\t\t\t\t\t<h4>{file.title}</h4>\r\n\t\t\t\t\t</a>\r\n\t\t\t\t\t<p>{t('common:date')}: {new Date( file.createdAt ).toLocaleDateString()}{lessonName ? `, ${t('common:lesson')}: ${lessonName}` : lessonName}</p>\r\n\t\t\t\t</div>\r\n\t\t\t</div> );\r\n\t\t}\r\n\t\treturn out;\r\n\t}\r\n\r\n\trenderMessages() {\r\n\t\tif ( !this.state.selectedNamespace.announcements ) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<div>{ this.state.selectedNamespace.announcements.map( (value, index) => {\r\n\t\t\t\tconst date = new Date(value.createdAt);\r\n\t\t\t\tconst dateString = date.toLocaleDateString() + '  -  ' + date.toLocaleTimeString( navigator.language, {\r\n\t\t\t\t\thour: '2-digit',\r\n\t\t\t\t\tminute: '2-digit'\r\n\t\t\t\t});\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div key={index} className=\"message-container\">\r\n\t\t\t\t\t\t<div className=\"message-data\">\r\n\t\t\t\t\t\t\t<div className=\"message-profile-pic\">\r\n\t\t\t\t\t\t\t\t<img src={value.picture} alt=\"Message User Profile\" />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"message-author-line\">\r\n\t\t\t\t\t\t\t\t<span className=\"message-author\">{ value.author } </span>\r\n\t\t\t\t\t\t\t\twrote on { dateString }\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"message-title\">\r\n\t\t\t\t\t\t\t{ value.title }\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"message-body\">\r\n\t\t\t\t\t\t\t{ value.body }\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t})\r\n\t\t\t}</div>\r\n\t\t);\r\n\t}\r\n\r\n\trenderStatisticDataToolbar() {\r\n\t\tconst { t } = this.props;\r\n\t\treturn (\r\n\t\t<Nav variant=\"tabs\" activeKey={this.state.selectedDataType} onSelect={this.handleDataSelect}>\r\n\t\t\t<Nav.Item >\r\n\t\t\t\t<Nav.Link eventKey=\"messages\" title={t('messages')}>\r\n\t\t\t\t\t{t('messages')}\r\n\t\t\t\t</Nav.Link>\r\n\t\t\t</Nav.Item>\r\n\t\t\t<Nav.Item >\r\n\t\t\t\t<Nav.Link eventKey=\"files\" title={t('common:files')}>\r\n\t\t\t\t\t{t('common:files')}\r\n\t\t\t\t</Nav.Link>\r\n\t\t\t</Nav.Item>\r\n\t\t\t<Nav.Item >\r\n\t\t\t\t<Nav.Link eventKey=\"actions\" title={t('actions')}>\r\n\t\t\t\t\t{t('actions')}\r\n\t\t\t\t</Nav.Link>\r\n\t\t\t</Nav.Item>\r\n\t\t</Nav>\r\n\t\t);\r\n\t}\r\n\r\n\trenderStatisticStatsToolbar() {\r\n\t\tconst { t } = this.props;\r\n\t\treturn (\r\n\t\t\t<Nav variant=\"tabs\" activeKey={this.state.selectedStatsType} onSelect={this.handleStatsSelect}>\r\n\t\t\t\t<Nav.Item >\r\n\t\t\t\t\t<Nav.Link eventKey=\"progress\" title={t('progress')}>\r\n\t\t\t\t\t\t{t('progress')}\r\n\t\t\t\t\t</Nav.Link>\r\n\t\t\t\t</Nav.Item>\r\n\t\t\t\t<Nav.Item >\r\n\t\t\t\t\t<Nav.Link eventKey=\"timeSpent\" title={t('time-spent')} >\r\n\t\t\t\t\t\t{t('time-spent')}\r\n\t\t\t\t\t</Nav.Link>\r\n\t\t\t\t</Nav.Item>\r\n\t\t\t</Nav>\r\n\t\t);\r\n\t}\r\n\r\n\trenderStatisticSection() {\r\n\t\tconst { t, user } = this.props;\r\n\t\tconst courses = user.enrolledNamespaces;\r\n\t\treturn (\r\n\t\t\t<div className=\"profile-page-statistics\">\r\n\t\t\t\t<div className=\"profile-page-statistics-navigation-title\">{t('common:courses')}</div>\r\n\t\t\t\t<div className=\"profile-page-statistics-navigation\">\r\n\t\t\t\t<Nav variant=\"tabs\" activeKey={this.state.selectedNamespaceID} onSelect={this.handleSelect}>\r\n\t\t\t\t\t{courses.map( ( course, i ) => {\r\n\t\t\t\t\t\tconst title = course.title;\r\n\t\t\t\t\t\tconst id = course._id;\r\n\t\t\t\t\t\treturn ( <Nav.Item key={i}>\r\n\t\t\t\t\t\t\t<Nav.Link eventKey={id} title={title} data-id={i} >\r\n\t\t\t\t\t\t\t\t{title}\r\n\t\t\t\t\t\t\t</Nav.Link>\r\n\t\t\t\t\t\t</Nav.Item> );\r\n\t\t\t\t\t})}\r\n\t\t\t\t</Nav>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"profile-page-statistics-data-select\">{t('common:data')}</div>\r\n\t\t\t\t<div className=\"profile-page-statistics-top-actions\">\r\n\t\t\t\t\t{ this.state.selectedNamespaceID ? this.renderStatisticDataToolbar() : null }\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"profile-page-statistics-title2\">\r\n\t\t\t\t\t{t('common:statistics')}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"profile-page-statistics-actions\">\r\n\t\t\t\t\t{this.renderLeftPanel()}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"profile-page-statistics-select\">\r\n\t\t\t\t\t{ this.state.selectedNamespaceID ? this.renderStatisticStatsToolbar() : null }\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"profile-page-statistics-stats\">\r\n\t\t\t\t\t{this.renderRightPanel()}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\trenderBadgesSection() {\r\n\t\tlet list = [];\r\n\t\tlet badges = this.props.user.badges || [];\r\n\r\n\t\tfor ( let i = 0; i < 24; i++ ) {\r\n\t\t\tlet temp = badge;\r\n\t\t\tlet desc = 'Hidden Badge';\r\n\t\t\tlet display = 'profile-page-badge-item-interior unknown';\r\n\t\t\tlet badgeState = 'badge-not-acquired';\r\n\t\t\tif ( i < badges.length ) {\r\n\t\t\t\ttemp = server + '/badges/' + badges[i].picture;\r\n\t\t\t\tdesc = badges[i].description;\r\n\t\t\t\tdisplay = 'profile-page-badge-item-interior';\r\n\t\t\t\tif ( badges[i].acquired ) {\r\n\t\t\t\t\tbadgeState='badge-acquired';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlist.push(\r\n\t\t\t\t<div style={{ animation: 'scale-up ' + ((i*0.05) + 0.1) + 's' }} className=\"profile-page-badge-item-nova\" key={i}>\r\n\t\t\t\t\t<OverlayTrigger placement=\"top\" overlay={<Tooltip id={`badge-${i}-description`} >{ desc }</Tooltip>}>\r\n\t\t\t\t\t\t<div className=\"profile-page-badge-item\">\r\n\t\t\t\t\t\t\t<img className=\"mask\" src={badgeCircle} alt=\"\" />\r\n\t\t\t\t\t\t\t<div className={display} >\r\n\t\t\t\t\t\t\t\t<img className={badgeState} src={temp} alt=\"User Badge\" />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</OverlayTrigger>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn list;\r\n\t}\r\n\r\n\trenderUserSection() {\r\n\t\tconst { t, user } = this.props;\r\n\t\tlet date = null;\r\n\t\tif ( user.createdAt ) {\r\n\t\t\tdate = new Date( user.createdAt ).toLocaleDateString();\r\n\t\t}\r\n\t\tlet userPic = hoodie;\r\n\t\tif ( user.picture ) {\r\n\t\t\tuserPic = user.picture;\r\n\t\t}\r\n\t\tconst showTicketingButton = anyBy( this.props.user.enrolledNamespaces, x => x.enableTicketing );\r\n\t\tconst nLessons = keys( user.lessonData ).length;\r\n\t\treturn (\r\n\t\t\t<div className=\"profile-page-user-container\">\r\n\t\t\t\t<div\r\n\t\t\t\t\trole=\"button\" className=\"profile-page-user-portrait\"\r\n\t\t\t\t\tonClick={this.toggleProfilePicModal}\r\n\t\t\t\t\tonKeyPress={this.toggleProfilePicModal}\r\n\t\t\t\t\ttabIndex={0}\r\n\t\t\t\t>\r\n\t\t\t\t\t<img alt=\"User Profile\" src={userPic} />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"profile-page-user-personal\">\r\n\t\t\t\t\t<div className=\"profile-page-user-personal-name\">\r\n\t\t\t\t\t\t<Card>\r\n\t\t\t\t\t\t\t<Card.Header>\r\n\t\t\t\t\t\t\t\t<Card.Title as=\"h3\">\r\n\t\t\t\t\t\t\t\t\t{user.name} <br />\r\n\t\t\t\t\t\t\t\t\t{user.organization ? <small>{user.organization}</small>: null }\r\n\t\t\t\t\t\t\t\t</Card.Title>\r\n\t\t\t\t\t\t\t\t{date ? <div>{t('registered-since', { date })}</div> : null}\r\n\t\t\t\t\t\t\t</Card.Header>\r\n\t\t\t\t\t\t\t<Card.Body>\r\n\t\t\t\t\t\t\t\t<div className=\"profile-page-user-values\">\r\n\t\t\t\t\t\t\t\t\t<div className=\"profile-page-user-legend\">{t('score')}</div>\r\n\t\t\t\t\t\t\t\t\t<div className=\"profile-page-user-value\">\r\n\t\t\t\t\t\t\t\t\t\t{user.score}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div className=\"profile-page-user-legend\">{t('no-lessons')}</div>\r\n\t\t\t\t\t\t\t\t\t<div className=\"profile-page-user-value\">{nLessons}</div>\r\n\t\t\t\t\t\t\t\t\t<div className=\"profile-page-user-legend\">{t('time-spent')}</div>\r\n\t\t\t\t\t\t\t\t\t<div className=\"profile-page-user-value\">\r\n\t\t\t\t\t\t\t\t\t\t{formatTime( user.spentTime )}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</Card.Body>\r\n\t\t\t\t\t\t</Card>\r\n\t\t\t\t\t\t<div className=\"d-grid gap-2\" >\r\n\t\t\t\t\t\t\t<Button style={{ marginTop: 15 }} onClick={this.toggleEditModal}>{t('edit-profile')}</Button>\r\n\t\t\t\t\t\t\t{ showTicketingButton ? <Button style={{ marginTop: 15 }} onClick={this.toggleTicketListModal}>{t('show-tickets')}</Button> : null}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"profile-page-user-footer\">\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { t } = this.props;\r\n\t\treturn (\r\n\t\t\t<Fragment>\r\n\t\t\t\t<div className=\"profile-page-grid-container\">\r\n\t\t\t\t\t<div className=\"profile-page-left\">\r\n\t\t\t\t\t\t{this.renderUserSection()}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{this.renderStatisticSection()}\r\n\t\t\t\t\t<div className=\"profile-page-badge-title\">{t('common:badges')}</div>\r\n\t\t\t\t\t<div className=\"profile-page-badge-container\">\r\n\t\t\t\t\t\t{this.renderBadgesSection()}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<EditModal\r\n\t\t\t\t\tuser={this.props.user}\r\n\t\t\t\t\tauthenticate={this.props.authenticate}\r\n\t\t\t\t\tshow={this.state.showEditModal}\r\n\t\t\t\t\taddNotification={this.props.addNotification}\r\n\t\t\t\t\tupdateUser={this.props.updateUser}\r\n\t\t\t\t\tonHide={this.toggleEditModal}\r\n\t\t\t\t\tresendConfirmEmail={this.props.resendConfirmEmail}\r\n\t\t\t\t\tdisableTFA={this.props.disableTFA}\r\n\t\t\t\t\tenableTFA={this.props.enableTFA}\r\n\t\t\t\t\tgetTfaQRCode={this.props.getTfaQRCode}\r\n\t\t\t\t\tt={t}\r\n\t\t\t\t/>\r\n\t\t\t\t<TicketListModal\r\n\t\t\t\t\tcreateTicket={this.props.createTicket}\r\n\t\t\t\t\tshow={this.state.showTicketListModal}\r\n\t\t\t\t\tonHide={this.toggleTicketListModal}\r\n\t\t\t\t\tgetUserTickets={this.props.getUserTickets}\r\n\t\t\t\t\tuser={this.props.user}\r\n\t\t\t\t\tsubmitTicketMessage={this.submitTicketMessage}\r\n\t\t\t\t\tcloseTicket={this.props.closeTicket}\r\n\t\t\t\t\topenTicket={this.props.openTicket}\r\n\t\t\t\t\tt={t}\r\n\t\t\t\t/>\r\n\t\t\t\t<ProfilePicModal\r\n\t\t\t\t\tuser={this.props.user}\r\n\t\t\t\t\tshow={this.state.showProfilePicModal}\r\n\t\t\t\t\tonHide={this.toggleProfilePicModal}\r\n\t\t\t\t\tuploadProfilePic={this.props.uploadProfilePic}\r\n\t\t\t\t\tt={t}\r\n\t\t\t\t/>\r\n\t\t\t</Fragment>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n\r\n// PROPERTIES //\r\n\r\nProfilePage.propTypes = {\r\n\taddNotification: PropTypes.func.isRequired,\r\n\tauthenticate: PropTypes.func.isRequired,\r\n\tcloseTicket: PropTypes.func.isRequired,\r\n\tcreateTicket: PropTypes.func.isRequired,\r\n\tdisableTFA: PropTypes.func.isRequired,\r\n\tenableTFA: PropTypes.func.isRequired,\r\n\tgetLessons: PropTypes.func.isRequired,\r\n\tgetTfaQRCode: PropTypes.func.isRequired,\r\n\tgetUserBadges: PropTypes.func.isRequired,\r\n\tgetUserFiles: PropTypes.func.isRequired,\r\n\tgetUserTickets: PropTypes.func.isRequired,\r\n\topenTicket: PropTypes.func.isRequired,\r\n\tresendConfirmEmail: PropTypes.func.isRequired,\r\n\tsendTicketMessage: PropTypes.func.isRequired,\r\n\tupdateUser: PropTypes.func.isRequired,\r\n\tuploadProfilePic: PropTypes.func.isRequired,\r\n\tuser: PropTypes.object.isRequired\r\n};\r\n\r\nProfilePage.defaultProps = {\r\n};\r\n\r\n\r\n// EXPORTS //\r\n\r\nexport default withTranslation( [ 'profile_page', 'common' ] )( ProfilePage );\r\n","/**\r\n* Copyright (C) 2016-present The ISLE Authors\r\n*\r\n* The isle-dashboard program is free software: you can redistribute it and/or modify\r\n* it under the terms of the GNU Affero General Public License as\r\n* published by the Free Software Foundation, either version 3 of the\r\n* License, or (at your option) any later version.\r\n*\r\n* This program is distributed in the hope that it will be useful,\r\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n* GNU Affero General Public License for more details.\r\n*\r\n* You should have received a copy of the GNU Affero General Public License\r\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\r\n*/\r\n\r\n// MODULES //\r\n\r\nimport axios from 'axios';\r\nimport server from 'constants/server';\r\nimport i18next from 'i18next';\r\nimport { addNotification, addErrorNotification } from 'actions/notification';\r\nimport { DISABLED_TFA, ENABLED_TFA, GET_TFA_QRCODE } from 'constants/action_types.js';\r\n\r\n\r\n// EXPORTS //\r\n\r\n/**\r\n * Makes a request to the server to get the two-factor authentication qrcode.\r\n *\r\n * @param {Function} dispatch - dispatch function\r\n * @returns {(Object|void)} qrcode or void\r\n */\r\nexport const getTfaQRCode = async ( dispatch ) => {\r\n\ttry {\r\n\t\tconst res = await axios.get( server+'/get_tfa_qrcode' );\r\n\t\tdispatch({\r\n\t\t\ttype: GET_TFA_QRCODE,\r\n\t\t\tpayload: {\r\n\t\t\t\tevents: res.data.events\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn res;\r\n\t} catch ( err ) {\r\n\t\treturn addErrorNotification( dispatch, err );\r\n\t}\r\n};\r\n\r\n/**\r\n * Returns a function to make a request for a two-factor authentication qrcode with a bound dispatch function.\r\n *\r\n * @param {Function} dispatch - dispatch function\r\n * @returns {Function} function to make a request for a two-factor authentication qrcode\r\n */\r\nexport const getTfaQRCodeInjector = dispatch => {\r\n\treturn async () => {\r\n\t\tconst result = await getTfaQRCode( dispatch );\r\n\t\treturn result;\r\n\t};\r\n};\r\n\r\n/**\r\n * Makes a POST request to the server to enable two-factor authentication for the user making the request.\r\n *\r\n * @param {Function} dispatch - dispatch function\r\n * @param {string} token - the token to use for the two-factor authentication\r\n * @returns {void}\r\n */\r\nexport const enableTFA = async ( dispatch, token ) => {\r\n\ttry {\r\n\t\tconst res = await axios.post( server+'/enable_tfa', {\r\n\t\t\ttoken\r\n\t\t});\r\n\t\taddNotification( dispatch, {\r\n\t\t\ttitle: res.data.verified ? i18next.t('common:tfa-enabled') : i18next.t('common:tfa-not-enabled'),\r\n\t\t\tmessage: res.data.message,\r\n\t\t\tlevel: res.data.verified ? 'success' : 'error'\r\n\t\t});\r\n\t\tdispatch({\r\n\t\t\ttype: ENABLED_TFA,\r\n\t\t\tpayload: {\r\n\t\t\t\tverified: res.data.verified\r\n\t\t\t}\r\n\t\t});\r\n\t} catch ( err ) {\r\n\t\treturn addErrorNotification( dispatch, err );\r\n\t}\r\n};\r\n\r\n/**\r\n * Returns a function to make a POST request to enable two-factor authentication for the user making the request with a bound dispatch function.\r\n *\r\n * @param {Function} dispatch - dispatch function\r\n * @returns {Function} function to make a POST request to enable two-factor authentication for the user making the request\r\n */\r\nexport const enableTFAInjector = dispatch => {\r\n\treturn async ( token ) => {\r\n\t\tawait enableTFA( dispatch, token );\r\n\t};\r\n};\r\n\r\n/**\r\n * Makes a POST request to the server to disable two-factor authentication for the user making the request.\r\n *\r\n * @param {Function} dispatch - dispatch function\r\n * @returns {void}\r\n */\r\nexport const disableTFA = async ( dispatch ) => {\r\n\ttry {\r\n\t\tconst res = await axios.post( server+'/disable_tfa' );\r\n\t\taddNotification( dispatch, {\r\n\t\t\ttitle: i18next.t('common:tfa-disabled'),\r\n\t\t\tmessage: res.data.message,\r\n\t\t\tlevel: 'success'\r\n\t\t});\r\n\t\tdispatch({\r\n\t\t\ttype: DISABLED_TFA,\r\n\t\t\tpayload: {\r\n\t\t\t\tmessage: res.data.message,\r\n\t\t\t\tdisabled: res.data.disabled\r\n\t\t\t}\r\n\t\t});\r\n\t} catch ( err ) {\r\n\t\treturn addErrorNotification( dispatch, err );\r\n\t}\r\n};\r\n\r\n/**\r\n * Returns a function to make a POST request to disable two-factor authentication for the user making the request with a bound dispatch function.\r\n *\r\n * @param {Function} dispatch - dispatch function\r\n * @returns {Function} function to make a POST request to disable two-factor authentication for the user making the request\r\n */\r\nexport const disableTFAInjector = dispatch => {\r\n\treturn async () => {\r\n\t\tawait disableTFA( dispatch );\r\n\t};\r\n};\r\n","/**\r\n* Copyright (C) 2016-present The ISLE Authors\r\n*\r\n* The isle-dashboard program is free software: you can redistribute it and/or modify\r\n* it under the terms of the GNU Affero General Public License as\r\n* published by the Free Software Foundation, either version 3 of the\r\n* License, or (at your option) any later version.\r\n*\r\n* This program is distributed in the hope that it will be useful,\r\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n* GNU Affero General Public License for more details.\r\n*\r\n* You should have received a copy of the GNU Affero General Public License\r\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\r\n*/\r\n\r\n// MODULES //\r\n\r\nimport React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport ProfilePage from 'components/profile-page';\r\nimport { getLessonsInjector } from 'actions/lesson';\r\nimport { getUserBadgesInjector } from 'actions/badge';\r\nimport { getUserFilesInjector } from 'actions/file';\r\nimport { authenticateInjector, uploadProfilePicInjector, updateUserInjector, resendConfirmEmailInjector } from 'actions/user';\r\nimport { addNotificationInjector } from 'actions/notification';\r\nimport { createTicketInjector, getUserTicketsInjector } from 'actions/ticket';\r\nimport { sendTicketMessageInjector, closeTicketInjector, openTicketInjector } from 'actions/ticket';\r\nimport { enableTFAInjector, disableTFAInjector, getTfaQRCodeInjector } from 'actions/two_factor_auth.js';\r\n\r\n\r\n// FUNCTIONS //\r\n\r\nfunction mapStateToProps( state ) {\r\n\treturn {\r\n\t\tuser: state.user\r\n\t};\r\n}\r\n\r\nfunction mapDispatchToProps( dispatch ) {\r\n\treturn {\r\n\t\taddNotification: addNotificationInjector( dispatch ),\r\n\t\tcreateTicket: createTicketInjector( dispatch ),\r\n\t\tgetUserBadges: getUserBadgesInjector( dispatch ),\r\n\t\tupdateUser: updateUserInjector( dispatch ),\r\n\t\tauthenticate: authenticateInjector( dispatch ),\r\n\t\tgetUserFiles: getUserFilesInjector( dispatch ),\r\n\t\tgetLessons: getLessonsInjector( dispatch ),\r\n\t\tresendConfirmEmail: resendConfirmEmailInjector( dispatch ),\r\n\t\tsendTicketMessage: sendTicketMessageInjector( dispatch ),\r\n\t\tcloseTicket: closeTicketInjector( dispatch ),\r\n\t\topenTicket: openTicketInjector( dispatch ),\r\n\t\tgetUserTickets: getUserTicketsInjector( dispatch ),\r\n\t\tuploadProfilePic: uploadProfilePicInjector( dispatch ),\r\n\t\tenableTFA: enableTFAInjector( dispatch ),\r\n\t\tdisableTFA: disableTFAInjector( dispatch ),\r\n\t\tgetTfaQRCode: getTfaQRCodeInjector( dispatch )\r\n\t};\r\n}\r\n\r\n\r\n// MAIN //\r\n\r\nconst VisibleProfilePage = connect( mapStateToProps, mapDispatchToProps )( ProfilePage );\r\n\r\n\r\n// EXPORTS //\r\n\r\nexport default VisibleProfilePage;\r\n"],"sourceRoot":""}