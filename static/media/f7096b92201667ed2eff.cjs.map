{"version":3,"sources":["../static/media/f7096b92201667ed2eff.cjs"],"sourcesContent":["'use strict';\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nfunction _get() { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(arguments.length < 3 ? target : receiver); } return desc.value; }; } return _get.apply(this, arguments); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar prosemirrorState = require('prosemirror-state');\n\nvar prosemirrorModel = require('prosemirror-model');\n\nvar prosemirrorTransform = require('prosemirror-transform');\n\nvar nav = typeof navigator != \"undefined\" ? navigator : null;\nvar doc = typeof document != \"undefined\" ? document : null;\nvar agent = nav && nav.userAgent || \"\";\nvar ie_edge = /Edge\\/(\\d+)/.exec(agent);\nvar ie_upto10 = /MSIE \\d/.exec(agent);\nvar ie_11up = /Trident\\/(?:[7-9]|\\d{2,})\\..*rv:(\\d+)/.exec(agent);\nvar ie = !!(ie_upto10 || ie_11up || ie_edge);\nvar ie_version = ie_upto10 ? document.documentMode : ie_11up ? +ie_11up[1] : ie_edge ? +ie_edge[1] : 0;\nvar gecko = !ie && /gecko\\/(\\d+)/i.test(agent);\ngecko && +(/Firefox\\/(\\d+)/.exec(agent) || [0, 0])[1];\n\nvar _chrome = !ie && /Chrome\\/(\\d+)/.exec(agent);\n\nvar chrome = !!_chrome;\nvar chrome_version = _chrome ? +_chrome[1] : 0;\nvar safari = !ie && !!nav && /Apple Computer/.test(nav.vendor);\nvar ios = safari && (/Mobile\\/\\w+/.test(agent) || !!nav && nav.maxTouchPoints > 2);\nvar mac = ios || (nav ? /Mac/.test(nav.platform) : false);\nvar android = /Android \\d/.test(agent);\nvar webkit = !!doc && \"webkitFontSmoothing\" in doc.documentElement.style;\nvar webkit_version = webkit ? +(/\\bAppleWebKit\\/(\\d+)/.exec(navigator.userAgent) || [0, 0])[1] : 0;\n\nvar domIndex = function domIndex(node) {\n  for (var index = 0;; index++) {\n    node = node.previousSibling;\n    if (!node) return index;\n  }\n};\n\nvar parentNode = function parentNode(node) {\n  var parent = node.assignedSlot || node.parentNode;\n  return parent && parent.nodeType == 11 ? parent.host : parent;\n};\n\nvar reusedRange = null;\n\nvar textRange = function textRange(node, from, to) {\n  var range = reusedRange || (reusedRange = document.createRange());\n  range.setEnd(node, to == null ? node.nodeValue.length : to);\n  range.setStart(node, from || 0);\n  return range;\n};\n\nvar isEquivalentPosition = function isEquivalentPosition(node, off, targetNode, targetOff) {\n  return targetNode && (scanFor(node, off, targetNode, targetOff, -1) || scanFor(node, off, targetNode, targetOff, 1));\n};\n\nvar atomElements = /^(img|br|input|textarea|hr)$/i;\n\nfunction scanFor(node, off, targetNode, targetOff, dir) {\n  for (;;) {\n    if (node == targetNode && off == targetOff) return true;\n\n    if (off == (dir < 0 ? 0 : nodeSize(node))) {\n      var parent = node.parentNode;\n      if (!parent || parent.nodeType != 1 || hasBlockDesc(node) || atomElements.test(node.nodeName) || node.contentEditable == \"false\") return false;\n      off = domIndex(node) + (dir < 0 ? 0 : 1);\n      node = parent;\n    } else if (node.nodeType == 1) {\n      node = node.childNodes[off + (dir < 0 ? -1 : 0)];\n      if (node.contentEditable == \"false\") return false;\n      off = dir < 0 ? nodeSize(node) : 0;\n    } else {\n      return false;\n    }\n  }\n}\n\nfunction nodeSize(node) {\n  return node.nodeType == 3 ? node.nodeValue.length : node.childNodes.length;\n}\n\nfunction isOnEdge(node, offset, parent) {\n  for (var atStart = offset == 0, atEnd = offset == nodeSize(node); atStart || atEnd;) {\n    if (node == parent) return true;\n    var index = domIndex(node);\n    node = node.parentNode;\n    if (!node) return false;\n    atStart = atStart && index == 0;\n    atEnd = atEnd && index == nodeSize(node);\n  }\n}\n\nfunction hasBlockDesc(dom) {\n  var desc;\n\n  for (var cur = dom; cur; cur = cur.parentNode) {\n    if (desc = cur.pmViewDesc) break;\n  }\n\n  return desc && desc.node && desc.node.isBlock && (desc.dom == dom || desc.contentDOM == dom);\n}\n\nvar selectionCollapsed = function selectionCollapsed(domSel) {\n  var collapsed = domSel.isCollapsed;\n  if (collapsed && chrome && domSel.rangeCount && !domSel.getRangeAt(0).collapsed) collapsed = false;\n  return collapsed;\n};\n\nfunction keyEvent(keyCode, key) {\n  var event = document.createEvent(\"Event\");\n  event.initEvent(\"keydown\", true, true);\n  event.keyCode = keyCode;\n  event.key = event.code = key;\n  return event;\n}\n\nfunction windowRect(doc) {\n  return {\n    left: 0,\n    right: doc.documentElement.clientWidth,\n    top: 0,\n    bottom: doc.documentElement.clientHeight\n  };\n}\n\nfunction getSide(value, side) {\n  return typeof value == \"number\" ? value : value[side];\n}\n\nfunction clientRect(node) {\n  var rect = node.getBoundingClientRect();\n  var scaleX = rect.width / node.offsetWidth || 1;\n  var scaleY = rect.height / node.offsetHeight || 1;\n  return {\n    left: rect.left,\n    right: rect.left + node.clientWidth * scaleX,\n    top: rect.top,\n    bottom: rect.top + node.clientHeight * scaleY\n  };\n}\n\nfunction scrollRectIntoView(view, rect, startDOM) {\n  var scrollThreshold = view.someProp(\"scrollThreshold\") || 0,\n      scrollMargin = view.someProp(\"scrollMargin\") || 5;\n  var doc = view.dom.ownerDocument;\n\n  for (var parent = startDOM || view.dom;; parent = parentNode(parent)) {\n    if (!parent) break;\n    if (parent.nodeType != 1) continue;\n    var elt = parent;\n    var atTop = elt == doc.body;\n    var bounding = atTop ? windowRect(doc) : clientRect(elt);\n    var moveX = 0,\n        moveY = 0;\n    if (rect.top < bounding.top + getSide(scrollThreshold, \"top\")) moveY = -(bounding.top - rect.top + getSide(scrollMargin, \"top\"));else if (rect.bottom > bounding.bottom - getSide(scrollThreshold, \"bottom\")) moveY = rect.bottom - bounding.bottom + getSide(scrollMargin, \"bottom\");\n    if (rect.left < bounding.left + getSide(scrollThreshold, \"left\")) moveX = -(bounding.left - rect.left + getSide(scrollMargin, \"left\"));else if (rect.right > bounding.right - getSide(scrollThreshold, \"right\")) moveX = rect.right - bounding.right + getSide(scrollMargin, \"right\");\n\n    if (moveX || moveY) {\n      if (atTop) {\n        doc.defaultView.scrollBy(moveX, moveY);\n      } else {\n        var startX = elt.scrollLeft,\n            startY = elt.scrollTop;\n        if (moveY) elt.scrollTop += moveY;\n        if (moveX) elt.scrollLeft += moveX;\n        var dX = elt.scrollLeft - startX,\n            dY = elt.scrollTop - startY;\n        rect = {\n          left: rect.left - dX,\n          top: rect.top - dY,\n          right: rect.right - dX,\n          bottom: rect.bottom - dY\n        };\n      }\n    }\n\n    if (atTop) break;\n  }\n}\n\nfunction storeScrollPos(view) {\n  var rect = view.dom.getBoundingClientRect(),\n      startY = Math.max(0, rect.top);\n  var refDOM, refTop;\n\n  for (var x = (rect.left + rect.right) / 2, y = startY + 1; y < Math.min(innerHeight, rect.bottom); y += 5) {\n    var dom = view.root.elementFromPoint(x, y);\n    if (!dom || dom == view.dom || !view.dom.contains(dom)) continue;\n    var localRect = dom.getBoundingClientRect();\n\n    if (localRect.top >= startY - 20) {\n      refDOM = dom;\n      refTop = localRect.top;\n      break;\n    }\n  }\n\n  return {\n    refDOM: refDOM,\n    refTop: refTop,\n    stack: scrollStack(view.dom)\n  };\n}\n\nfunction scrollStack(dom) {\n  var stack = [],\n      doc = dom.ownerDocument;\n\n  for (var cur = dom; cur; cur = parentNode(cur)) {\n    stack.push({\n      dom: cur,\n      top: cur.scrollTop,\n      left: cur.scrollLeft\n    });\n    if (dom == doc) break;\n  }\n\n  return stack;\n}\n\nfunction resetScrollPos(_ref) {\n  var refDOM = _ref.refDOM,\n      refTop = _ref.refTop,\n      stack = _ref.stack;\n  var newRefTop = refDOM ? refDOM.getBoundingClientRect().top : 0;\n  restoreScrollStack(stack, newRefTop == 0 ? 0 : newRefTop - refTop);\n}\n\nfunction restoreScrollStack(stack, dTop) {\n  for (var i = 0; i < stack.length; i++) {\n    var _stack$i = stack[i],\n        dom = _stack$i.dom,\n        top = _stack$i.top,\n        left = _stack$i.left;\n    if (dom.scrollTop != top + dTop) dom.scrollTop = top + dTop;\n    if (dom.scrollLeft != left) dom.scrollLeft = left;\n  }\n}\n\nvar preventScrollSupported = null;\n\nfunction focusPreventScroll(dom) {\n  if (dom.setActive) return dom.setActive();\n  if (preventScrollSupported) return dom.focus(preventScrollSupported);\n  var stored = scrollStack(dom);\n  dom.focus(preventScrollSupported == null ? {\n    get preventScroll() {\n      preventScrollSupported = {\n        preventScroll: true\n      };\n      return true;\n    }\n\n  } : undefined);\n\n  if (!preventScrollSupported) {\n    preventScrollSupported = false;\n    restoreScrollStack(stored, 0);\n  }\n}\n\nfunction findOffsetInNode(node, coords) {\n  var closest,\n      dxClosest = 2e8,\n      coordsClosest,\n      offset = 0;\n  var rowBot = coords.top,\n      rowTop = coords.top;\n\n  for (var child = node.firstChild, childIndex = 0; child; child = child.nextSibling, childIndex++) {\n    var rects = void 0;\n    if (child.nodeType == 1) rects = child.getClientRects();else if (child.nodeType == 3) rects = textRange(child).getClientRects();else continue;\n\n    for (var i = 0; i < rects.length; i++) {\n      var rect = rects[i];\n\n      if (rect.top <= rowBot && rect.bottom >= rowTop) {\n        rowBot = Math.max(rect.bottom, rowBot);\n        rowTop = Math.min(rect.top, rowTop);\n        var dx = rect.left > coords.left ? rect.left - coords.left : rect.right < coords.left ? coords.left - rect.right : 0;\n\n        if (dx < dxClosest) {\n          closest = child;\n          dxClosest = dx;\n          coordsClosest = dx && closest.nodeType == 3 ? {\n            left: rect.right < coords.left ? rect.right : rect.left,\n            top: coords.top\n          } : coords;\n          if (child.nodeType == 1 && dx) offset = childIndex + (coords.left >= (rect.left + rect.right) / 2 ? 1 : 0);\n          continue;\n        }\n      }\n\n      if (!closest && (coords.left >= rect.right && coords.top >= rect.top || coords.left >= rect.left && coords.top >= rect.bottom)) offset = childIndex + 1;\n    }\n  }\n\n  if (closest && closest.nodeType == 3) return findOffsetInText(closest, coordsClosest);\n  if (!closest || dxClosest && closest.nodeType == 1) return {\n    node: node,\n    offset: offset\n  };\n  return findOffsetInNode(closest, coordsClosest);\n}\n\nfunction findOffsetInText(node, coords) {\n  var len = node.nodeValue.length;\n  var range = document.createRange();\n\n  for (var i = 0; i < len; i++) {\n    range.setEnd(node, i + 1);\n    range.setStart(node, i);\n    var rect = singleRect(range, 1);\n    if (rect.top == rect.bottom) continue;\n    if (inRect(coords, rect)) return {\n      node: node,\n      offset: i + (coords.left >= (rect.left + rect.right) / 2 ? 1 : 0)\n    };\n  }\n\n  return {\n    node: node,\n    offset: 0\n  };\n}\n\nfunction inRect(coords, rect) {\n  return coords.left >= rect.left - 1 && coords.left <= rect.right + 1 && coords.top >= rect.top - 1 && coords.top <= rect.bottom + 1;\n}\n\nfunction targetKludge(dom, coords) {\n  var parent = dom.parentNode;\n  if (parent && /^li$/i.test(parent.nodeName) && coords.left < dom.getBoundingClientRect().left) return parent;\n  return dom;\n}\n\nfunction posFromElement(view, elt, coords) {\n  var _findOffsetInNode = findOffsetInNode(elt, coords),\n      node = _findOffsetInNode.node,\n      offset = _findOffsetInNode.offset,\n      bias = -1;\n\n  if (node.nodeType == 1 && !node.firstChild) {\n    var rect = node.getBoundingClientRect();\n    bias = rect.left != rect.right && coords.left > (rect.left + rect.right) / 2 ? 1 : -1;\n  }\n\n  return view.docView.posFromDOM(node, offset, bias);\n}\n\nfunction posFromCaret(view, node, offset, coords) {\n  var outside = -1;\n\n  for (var cur = node;;) {\n    if (cur == view.dom) break;\n    var desc = view.docView.nearestDesc(cur, true);\n    if (!desc) return null;\n\n    if (desc.node.isBlock && desc.parent) {\n      var rect = desc.dom.getBoundingClientRect();\n      if (rect.left > coords.left || rect.top > coords.top) outside = desc.posBefore;else if (rect.right < coords.left || rect.bottom < coords.top) outside = desc.posAfter;else break;\n    }\n\n    cur = desc.dom.parentNode;\n  }\n\n  return outside > -1 ? outside : view.docView.posFromDOM(node, offset, 1);\n}\n\nfunction elementFromPoint(element, coords, box) {\n  var len = element.childNodes.length;\n\n  if (len && box.top < box.bottom) {\n    for (var startI = Math.max(0, Math.min(len - 1, Math.floor(len * (coords.top - box.top) / (box.bottom - box.top)) - 2)), i = startI;;) {\n      var child = element.childNodes[i];\n\n      if (child.nodeType == 1) {\n        var rects = child.getClientRects();\n\n        for (var j = 0; j < rects.length; j++) {\n          var rect = rects[j];\n          if (inRect(coords, rect)) return elementFromPoint(child, coords, rect);\n        }\n      }\n\n      if ((i = (i + 1) % len) == startI) break;\n    }\n  }\n\n  return element;\n}\n\nfunction _posAtCoords(view, coords) {\n  var doc = view.dom.ownerDocument,\n      node,\n      offset = 0;\n\n  if (doc.caretPositionFromPoint) {\n    try {\n      var _pos = doc.caretPositionFromPoint(coords.left, coords.top);\n\n      if (_pos) {\n        node = _pos.offsetNode;\n        offset = _pos.offset;\n      }\n    } catch (_) {}\n  }\n\n  if (!node && doc.caretRangeFromPoint) {\n    var range = doc.caretRangeFromPoint(coords.left, coords.top);\n\n    if (range) {\n      node = range.startContainer;\n      offset = range.startOffset;\n    }\n  }\n\n  var elt = (view.root.elementFromPoint ? view.root : doc).elementFromPoint(coords.left, coords.top);\n  var pos;\n\n  if (!elt || !view.dom.contains(elt.nodeType != 1 ? elt.parentNode : elt)) {\n    var box = view.dom.getBoundingClientRect();\n    if (!inRect(coords, box)) return null;\n    elt = elementFromPoint(view.dom, coords, box);\n    if (!elt) return null;\n  }\n\n  if (safari) {\n    for (var p = elt; node && p; p = parentNode(p)) {\n      if (p.draggable) node = undefined;\n    }\n  }\n\n  elt = targetKludge(elt, coords);\n\n  if (node) {\n    if (gecko && node.nodeType == 1) {\n      offset = Math.min(offset, node.childNodes.length);\n\n      if (offset < node.childNodes.length) {\n        var next = node.childNodes[offset],\n            _box;\n\n        if (next.nodeName == \"IMG\" && (_box = next.getBoundingClientRect()).right <= coords.left && _box.bottom > coords.top) offset++;\n      }\n    }\n\n    if (node == view.dom && offset == node.childNodes.length - 1 && node.lastChild.nodeType == 1 && coords.top > node.lastChild.getBoundingClientRect().bottom) pos = view.state.doc.content.size;else if (offset == 0 || node.nodeType != 1 || node.childNodes[offset - 1].nodeName != \"BR\") pos = posFromCaret(view, node, offset, coords);\n  }\n\n  if (pos == null) pos = posFromElement(view, elt, coords);\n  var desc = view.docView.nearestDesc(elt, true);\n  return {\n    pos: pos,\n    inside: desc ? desc.posAtStart - desc.border : -1\n  };\n}\n\nfunction singleRect(target, bias) {\n  var rects = target.getClientRects();\n  return !rects.length ? target.getBoundingClientRect() : rects[bias < 0 ? 0 : rects.length - 1];\n}\n\nvar BIDI = /[\\u0590-\\u05f4\\u0600-\\u06ff\\u0700-\\u08ac]/;\n\nfunction _coordsAtPos(view, pos, side) {\n  var _view$docView$domFrom = view.docView.domFromPos(pos, side < 0 ? -1 : 1),\n      node = _view$docView$domFrom.node,\n      offset = _view$docView$domFrom.offset;\n\n  var supportEmptyRange = webkit || gecko;\n\n  if (node.nodeType == 3) {\n    if (supportEmptyRange && (BIDI.test(node.nodeValue) || (side < 0 ? !offset : offset == node.nodeValue.length))) {\n      var rect = singleRect(textRange(node, offset, offset), side);\n\n      if (gecko && offset && /\\s/.test(node.nodeValue[offset - 1]) && offset < node.nodeValue.length) {\n        var rectBefore = singleRect(textRange(node, offset - 1, offset - 1), -1);\n\n        if (rectBefore.top == rect.top) {\n          var rectAfter = singleRect(textRange(node, offset, offset + 1), -1);\n          if (rectAfter.top != rect.top) return flattenV(rectAfter, rectAfter.left < rectBefore.left);\n        }\n      }\n\n      return rect;\n    } else {\n      var from = offset,\n          to = offset,\n          takeSide = side < 0 ? 1 : -1;\n\n      if (side < 0 && !offset) {\n        to++;\n        takeSide = -1;\n      } else if (side >= 0 && offset == node.nodeValue.length) {\n        from--;\n        takeSide = 1;\n      } else if (side < 0) {\n        from--;\n      } else {\n        to++;\n      }\n\n      return flattenV(singleRect(textRange(node, from, to), takeSide), takeSide < 0);\n    }\n  }\n\n  if (!view.state.doc.resolve(pos).parent.inlineContent) {\n    if (offset && (side < 0 || offset == nodeSize(node))) {\n      var before = node.childNodes[offset - 1];\n      if (before.nodeType == 1) return flattenH(before.getBoundingClientRect(), false);\n    }\n\n    if (offset < nodeSize(node)) {\n      var after = node.childNodes[offset];\n      if (after.nodeType == 1) return flattenH(after.getBoundingClientRect(), true);\n    }\n\n    return flattenH(node.getBoundingClientRect(), side >= 0);\n  }\n\n  if (offset && (side < 0 || offset == nodeSize(node))) {\n    var _before = node.childNodes[offset - 1];\n    var target = _before.nodeType == 3 ? textRange(_before, nodeSize(_before) - (supportEmptyRange ? 0 : 1)) : _before.nodeType == 1 && (_before.nodeName != \"BR\" || !_before.nextSibling) ? _before : null;\n    if (target) return flattenV(singleRect(target, 1), false);\n  }\n\n  if (offset < nodeSize(node)) {\n    var _after = node.childNodes[offset];\n\n    while (_after.pmViewDesc && _after.pmViewDesc.ignoreForCoords) {\n      _after = _after.nextSibling;\n    }\n\n    var _target = !_after ? null : _after.nodeType == 3 ? textRange(_after, 0, supportEmptyRange ? 0 : 1) : _after.nodeType == 1 ? _after : null;\n\n    if (_target) return flattenV(singleRect(_target, -1), true);\n  }\n\n  return flattenV(singleRect(node.nodeType == 3 ? textRange(node) : node, -side), side >= 0);\n}\n\nfunction flattenV(rect, left) {\n  if (rect.width == 0) return rect;\n  var x = left ? rect.left : rect.right;\n  return {\n    top: rect.top,\n    bottom: rect.bottom,\n    left: x,\n    right: x\n  };\n}\n\nfunction flattenH(rect, top) {\n  if (rect.height == 0) return rect;\n  var y = top ? rect.top : rect.bottom;\n  return {\n    top: y,\n    bottom: y,\n    left: rect.left,\n    right: rect.right\n  };\n}\n\nfunction withFlushedState(view, state, f) {\n  var viewState = view.state,\n      active = view.root.activeElement;\n  if (viewState != state) view.updateState(state);\n  if (active != view.dom) view.focus();\n\n  try {\n    return f();\n  } finally {\n    if (viewState != state) view.updateState(viewState);\n    if (active != view.dom && active) active.focus();\n  }\n}\n\nfunction endOfTextblockVertical(view, state, dir) {\n  var sel = state.selection;\n  var $pos = dir == \"up\" ? sel.$from : sel.$to;\n  return withFlushedState(view, state, function () {\n    var _view$docView$domFrom2 = view.docView.domFromPos($pos.pos, dir == \"up\" ? -1 : 1),\n        dom = _view$docView$domFrom2.node;\n\n    for (;;) {\n      var nearest = view.docView.nearestDesc(dom, true);\n      if (!nearest) break;\n\n      if (nearest.node.isBlock) {\n        dom = nearest.dom;\n        break;\n      }\n\n      dom = nearest.dom.parentNode;\n    }\n\n    var coords = _coordsAtPos(view, $pos.pos, 1);\n\n    for (var child = dom.firstChild; child; child = child.nextSibling) {\n      var boxes = void 0;\n      if (child.nodeType == 1) boxes = child.getClientRects();else if (child.nodeType == 3) boxes = textRange(child, 0, child.nodeValue.length).getClientRects();else continue;\n\n      for (var i = 0; i < boxes.length; i++) {\n        var box = boxes[i];\n        if (box.bottom > box.top + 1 && (dir == \"up\" ? coords.top - box.top > (box.bottom - coords.top) * 2 : box.bottom - coords.bottom > (coords.bottom - box.top) * 2)) return false;\n      }\n    }\n\n    return true;\n  });\n}\n\nvar maybeRTL = /[\\u0590-\\u08ac]/;\n\nfunction endOfTextblockHorizontal(view, state, dir) {\n  var $head = state.selection.$head;\n  if (!$head.parent.isTextblock) return false;\n  var offset = $head.parentOffset,\n      atStart = !offset,\n      atEnd = offset == $head.parent.content.size;\n  var sel = view.domSelection();\n  if (!maybeRTL.test($head.parent.textContent) || !sel.modify) return dir == \"left\" || dir == \"backward\" ? atStart : atEnd;\n  return withFlushedState(view, state, function () {\n    var oldRange = sel.getRangeAt(0),\n        oldNode = sel.focusNode,\n        oldOff = sel.focusOffset;\n    var oldBidiLevel = sel.caretBidiLevel;\n    sel.modify(\"move\", dir, \"character\");\n    var parentDOM = $head.depth ? view.docView.domAfterPos($head.before()) : view.dom;\n    var result = !parentDOM.contains(sel.focusNode.nodeType == 1 ? sel.focusNode : sel.focusNode.parentNode) || oldNode == sel.focusNode && oldOff == sel.focusOffset;\n    sel.removeAllRanges();\n    sel.addRange(oldRange);\n    if (oldBidiLevel != null) sel.caretBidiLevel = oldBidiLevel;\n    return result;\n  });\n}\n\nvar cachedState = null;\nvar cachedDir = null;\nvar cachedResult = false;\n\nfunction _endOfTextblock(view, state, dir) {\n  if (cachedState == state && cachedDir == dir) return cachedResult;\n  cachedState = state;\n  cachedDir = dir;\n  return cachedResult = dir == \"up\" || dir == \"down\" ? endOfTextblockVertical(view, state, dir) : endOfTextblockHorizontal(view, state, dir);\n}\n\nvar NOT_DIRTY = 0,\n    CHILD_DIRTY = 1,\n    CONTENT_DIRTY = 2,\n    NODE_DIRTY = 3;\n\nvar ViewDesc = function () {\n  function ViewDesc(parent, children, dom, contentDOM) {\n    _classCallCheck(this, ViewDesc);\n\n    this.parent = parent;\n    this.children = children;\n    this.dom = dom;\n    this.contentDOM = contentDOM;\n    this.dirty = NOT_DIRTY;\n    dom.pmViewDesc = this;\n  }\n\n  _createClass(ViewDesc, [{\n    key: \"matchesWidget\",\n    value: function matchesWidget(widget) {\n      return false;\n    }\n  }, {\n    key: \"matchesMark\",\n    value: function matchesMark(mark) {\n      return false;\n    }\n  }, {\n    key: \"matchesNode\",\n    value: function matchesNode(node, outerDeco, innerDeco) {\n      return false;\n    }\n  }, {\n    key: \"matchesHack\",\n    value: function matchesHack(nodeName) {\n      return false;\n    }\n  }, {\n    key: \"parseRule\",\n    value: function parseRule() {\n      return null;\n    }\n  }, {\n    key: \"stopEvent\",\n    value: function stopEvent(event) {\n      return false;\n    }\n  }, {\n    key: \"size\",\n    get: function get() {\n      var size = 0;\n\n      for (var i = 0; i < this.children.length; i++) {\n        size += this.children[i].size;\n      }\n\n      return size;\n    }\n  }, {\n    key: \"border\",\n    get: function get() {\n      return 0;\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.parent = undefined;\n      if (this.dom.pmViewDesc == this) this.dom.pmViewDesc = undefined;\n\n      for (var i = 0; i < this.children.length; i++) {\n        this.children[i].destroy();\n      }\n    }\n  }, {\n    key: \"posBeforeChild\",\n    value: function posBeforeChild(child) {\n      for (var i = 0, pos = this.posAtStart;; i++) {\n        var cur = this.children[i];\n        if (cur == child) return pos;\n        pos += cur.size;\n      }\n    }\n  }, {\n    key: \"posBefore\",\n    get: function get() {\n      return this.parent.posBeforeChild(this);\n    }\n  }, {\n    key: \"posAtStart\",\n    get: function get() {\n      return this.parent ? this.parent.posBeforeChild(this) + this.border : 0;\n    }\n  }, {\n    key: \"posAfter\",\n    get: function get() {\n      return this.posBefore + this.size;\n    }\n  }, {\n    key: \"posAtEnd\",\n    get: function get() {\n      return this.posAtStart + this.size - 2 * this.border;\n    }\n  }, {\n    key: \"localPosFromDOM\",\n    value: function localPosFromDOM(dom, offset, bias) {\n      if (this.contentDOM && this.contentDOM.contains(dom.nodeType == 1 ? dom : dom.parentNode)) {\n        if (bias < 0) {\n          var domBefore, desc;\n\n          if (dom == this.contentDOM) {\n            domBefore = dom.childNodes[offset - 1];\n          } else {\n            while (dom.parentNode != this.contentDOM) {\n              dom = dom.parentNode;\n            }\n\n            domBefore = dom.previousSibling;\n          }\n\n          while (domBefore && !((desc = domBefore.pmViewDesc) && desc.parent == this)) {\n            domBefore = domBefore.previousSibling;\n          }\n\n          return domBefore ? this.posBeforeChild(desc) + desc.size : this.posAtStart;\n        } else {\n          var domAfter, _desc;\n\n          if (dom == this.contentDOM) {\n            domAfter = dom.childNodes[offset];\n          } else {\n            while (dom.parentNode != this.contentDOM) {\n              dom = dom.parentNode;\n            }\n\n            domAfter = dom.nextSibling;\n          }\n\n          while (domAfter && !((_desc = domAfter.pmViewDesc) && _desc.parent == this)) {\n            domAfter = domAfter.nextSibling;\n          }\n\n          return domAfter ? this.posBeforeChild(_desc) : this.posAtEnd;\n        }\n      }\n\n      var atEnd;\n\n      if (dom == this.dom && this.contentDOM) {\n        atEnd = offset > domIndex(this.contentDOM);\n      } else if (this.contentDOM && this.contentDOM != this.dom && this.dom.contains(this.contentDOM)) {\n        atEnd = dom.compareDocumentPosition(this.contentDOM) & 2;\n      } else if (this.dom.firstChild) {\n        if (offset == 0) for (var search = dom;; search = search.parentNode) {\n          if (search == this.dom) {\n            atEnd = false;\n            break;\n          }\n\n          if (search.previousSibling) break;\n        }\n        if (atEnd == null && offset == dom.childNodes.length) for (var _search = dom;; _search = _search.parentNode) {\n          if (_search == this.dom) {\n            atEnd = true;\n            break;\n          }\n\n          if (_search.nextSibling) break;\n        }\n      }\n\n      return (atEnd == null ? bias > 0 : atEnd) ? this.posAtEnd : this.posAtStart;\n    }\n  }, {\n    key: \"nearestDesc\",\n    value: function nearestDesc(dom) {\n      var onlyNodes = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      for (var first = true, cur = dom; cur; cur = cur.parentNode) {\n        var desc = this.getDesc(cur),\n            nodeDOM = void 0;\n\n        if (desc && (!onlyNodes || desc.node)) {\n          if (first && (nodeDOM = desc.nodeDOM) && !(nodeDOM.nodeType == 1 ? nodeDOM.contains(dom.nodeType == 1 ? dom : dom.parentNode) : nodeDOM == dom)) first = false;else return desc;\n        }\n      }\n    }\n  }, {\n    key: \"getDesc\",\n    value: function getDesc(dom) {\n      var desc = dom.pmViewDesc;\n\n      for (var cur = desc; cur; cur = cur.parent) {\n        if (cur == this) return desc;\n      }\n    }\n  }, {\n    key: \"posFromDOM\",\n    value: function posFromDOM(dom, offset, bias) {\n      for (var scan = dom; scan; scan = scan.parentNode) {\n        var desc = this.getDesc(scan);\n        if (desc) return desc.localPosFromDOM(dom, offset, bias);\n      }\n\n      return -1;\n    }\n  }, {\n    key: \"descAt\",\n    value: function descAt(pos) {\n      for (var i = 0, offset = 0; i < this.children.length; i++) {\n        var child = this.children[i],\n            end = offset + child.size;\n\n        if (offset == pos && end != offset) {\n          while (!child.border && child.children.length) {\n            child = child.children[0];\n          }\n\n          return child;\n        }\n\n        if (pos < end) return child.descAt(pos - offset - child.border);\n        offset = end;\n      }\n    }\n  }, {\n    key: \"domFromPos\",\n    value: function domFromPos(pos, side) {\n      if (!this.contentDOM) return {\n        node: this.dom,\n        offset: 0\n      };\n      var i = 0,\n          offset = 0;\n\n      for (var curPos = 0; i < this.children.length; i++) {\n        var child = this.children[i],\n            end = curPos + child.size;\n\n        if (end > pos || child instanceof TrailingHackViewDesc) {\n          offset = pos - curPos;\n          break;\n        }\n\n        curPos = end;\n      }\n\n      if (offset) return this.children[i].domFromPos(offset - this.children[i].border, side);\n\n      for (var prev; i && !(prev = this.children[i - 1]).size && prev instanceof WidgetViewDesc && prev.side >= 0; i--) {}\n\n      if (side <= 0) {\n        var _prev,\n            enter = true;\n\n        for (;; i--, enter = false) {\n          _prev = i ? this.children[i - 1] : null;\n          if (!_prev || _prev.dom.parentNode == this.contentDOM) break;\n        }\n\n        if (_prev && side && enter && !_prev.border && !_prev.domAtom) return _prev.domFromPos(_prev.size, side);\n        return {\n          node: this.contentDOM,\n          offset: _prev ? domIndex(_prev.dom) + 1 : 0\n        };\n      } else {\n        var next,\n            _enter = true;\n\n        for (;; i++, _enter = false) {\n          next = i < this.children.length ? this.children[i] : null;\n          if (!next || next.dom.parentNode == this.contentDOM) break;\n        }\n\n        if (next && _enter && !next.border && !next.domAtom) return next.domFromPos(0, side);\n        return {\n          node: this.contentDOM,\n          offset: next ? domIndex(next.dom) : this.contentDOM.childNodes.length\n        };\n      }\n    }\n  }, {\n    key: \"parseRange\",\n    value: function parseRange(from, to) {\n      var base = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      if (this.children.length == 0) return {\n        node: this.contentDOM,\n        from: from,\n        to: to,\n        fromOffset: 0,\n        toOffset: this.contentDOM.childNodes.length\n      };\n      var fromOffset = -1,\n          toOffset = -1;\n\n      for (var offset = base, i = 0;; i++) {\n        var child = this.children[i],\n            end = offset + child.size;\n\n        if (fromOffset == -1 && from <= end) {\n          var childBase = offset + child.border;\n          if (from >= childBase && to <= end - child.border && child.node && child.contentDOM && this.contentDOM.contains(child.contentDOM)) return child.parseRange(from, to, childBase);\n          from = offset;\n\n          for (var j = i; j > 0; j--) {\n            var prev = this.children[j - 1];\n\n            if (prev.size && prev.dom.parentNode == this.contentDOM && !prev.emptyChildAt(1)) {\n              fromOffset = domIndex(prev.dom) + 1;\n              break;\n            }\n\n            from -= prev.size;\n          }\n\n          if (fromOffset == -1) fromOffset = 0;\n        }\n\n        if (fromOffset > -1 && (end > to || i == this.children.length - 1)) {\n          to = end;\n\n          for (var _j = i + 1; _j < this.children.length; _j++) {\n            var next = this.children[_j];\n\n            if (next.size && next.dom.parentNode == this.contentDOM && !next.emptyChildAt(-1)) {\n              toOffset = domIndex(next.dom);\n              break;\n            }\n\n            to += next.size;\n          }\n\n          if (toOffset == -1) toOffset = this.contentDOM.childNodes.length;\n          break;\n        }\n\n        offset = end;\n      }\n\n      return {\n        node: this.contentDOM,\n        from: from,\n        to: to,\n        fromOffset: fromOffset,\n        toOffset: toOffset\n      };\n    }\n  }, {\n    key: \"emptyChildAt\",\n    value: function emptyChildAt(side) {\n      if (this.border || !this.contentDOM || !this.children.length) return false;\n      var child = this.children[side < 0 ? 0 : this.children.length - 1];\n      return child.size == 0 || child.emptyChildAt(side);\n    }\n  }, {\n    key: \"domAfterPos\",\n    value: function domAfterPos(pos) {\n      var _this$domFromPos = this.domFromPos(pos, 0),\n          node = _this$domFromPos.node,\n          offset = _this$domFromPos.offset;\n\n      if (node.nodeType != 1 || offset == node.childNodes.length) throw new RangeError(\"No node after pos \" + pos);\n      return node.childNodes[offset];\n    }\n  }, {\n    key: \"setSelection\",\n    value: function setSelection(anchor, head, root) {\n      var force = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n      var from = Math.min(anchor, head),\n          to = Math.max(anchor, head);\n\n      for (var i = 0, offset = 0; i < this.children.length; i++) {\n        var child = this.children[i],\n            end = offset + child.size;\n        if (from > offset && to < end) return child.setSelection(anchor - offset - child.border, head - offset - child.border, root, force);\n        offset = end;\n      }\n\n      var anchorDOM = this.domFromPos(anchor, anchor ? -1 : 1);\n      var headDOM = head == anchor ? anchorDOM : this.domFromPos(head, head ? -1 : 1);\n      var domSel = root.getSelection();\n      var brKludge = false;\n\n      if ((gecko || safari) && anchor == head) {\n        var _anchorDOM = anchorDOM,\n            node = _anchorDOM.node,\n            _offset = _anchorDOM.offset;\n\n        if (node.nodeType == 3) {\n          brKludge = !!(_offset && node.nodeValue[_offset - 1] == \"\\n\");\n\n          if (brKludge && _offset == node.nodeValue.length) {\n            for (var scan = node, after; scan; scan = scan.parentNode) {\n              if (after = scan.nextSibling) {\n                if (after.nodeName == \"BR\") anchorDOM = headDOM = {\n                  node: after.parentNode,\n                  offset: domIndex(after) + 1\n                };\n                break;\n              }\n\n              var desc = scan.pmViewDesc;\n              if (desc && desc.node && desc.node.isBlock) break;\n            }\n          }\n        } else {\n          var prev = node.childNodes[_offset - 1];\n          brKludge = prev && (prev.nodeName == \"BR\" || prev.contentEditable == \"false\");\n        }\n      }\n\n      if (gecko && domSel.focusNode && domSel.focusNode != headDOM.node && domSel.focusNode.nodeType == 1) {\n        var _after2 = domSel.focusNode.childNodes[domSel.focusOffset];\n        if (_after2 && _after2.contentEditable == \"false\") force = true;\n      }\n\n      if (!(force || brKludge && safari) && isEquivalentPosition(anchorDOM.node, anchorDOM.offset, domSel.anchorNode, domSel.anchorOffset) && isEquivalentPosition(headDOM.node, headDOM.offset, domSel.focusNode, domSel.focusOffset)) return;\n      var domSelExtended = false;\n\n      if ((domSel.extend || anchor == head) && !brKludge) {\n        domSel.collapse(anchorDOM.node, anchorDOM.offset);\n\n        try {\n          if (anchor != head) domSel.extend(headDOM.node, headDOM.offset);\n          domSelExtended = true;\n        } catch (err) {\n          if (!(err instanceof DOMException)) throw err;\n        }\n      }\n\n      if (!domSelExtended) {\n        if (anchor > head) {\n          var tmp = anchorDOM;\n          anchorDOM = headDOM;\n          headDOM = tmp;\n        }\n\n        var range = document.createRange();\n        range.setEnd(headDOM.node, headDOM.offset);\n        range.setStart(anchorDOM.node, anchorDOM.offset);\n        domSel.removeAllRanges();\n        domSel.addRange(range);\n      }\n    }\n  }, {\n    key: \"ignoreMutation\",\n    value: function ignoreMutation(mutation) {\n      return !this.contentDOM && mutation.type != \"selection\";\n    }\n  }, {\n    key: \"contentLost\",\n    get: function get() {\n      return this.contentDOM && this.contentDOM != this.dom && !this.dom.contains(this.contentDOM);\n    }\n  }, {\n    key: \"markDirty\",\n    value: function markDirty(from, to) {\n      for (var offset = 0, i = 0; i < this.children.length; i++) {\n        var child = this.children[i],\n            end = offset + child.size;\n\n        if (offset == end ? from <= end && to >= offset : from < end && to > offset) {\n          var startInside = offset + child.border,\n              endInside = end - child.border;\n\n          if (from >= startInside && to <= endInside) {\n            this.dirty = from == offset || to == end ? CONTENT_DIRTY : CHILD_DIRTY;\n            if (from == startInside && to == endInside && (child.contentLost || child.dom.parentNode != this.contentDOM)) child.dirty = NODE_DIRTY;else child.markDirty(from - startInside, to - startInside);\n            return;\n          } else {\n            child.dirty = child.dom == child.contentDOM && child.dom.parentNode == this.contentDOM && !child.children.length ? CONTENT_DIRTY : NODE_DIRTY;\n          }\n        }\n\n        offset = end;\n      }\n\n      this.dirty = CONTENT_DIRTY;\n    }\n  }, {\n    key: \"markParentsDirty\",\n    value: function markParentsDirty() {\n      var level = 1;\n\n      for (var node = this.parent; node; node = node.parent, level++) {\n        var dirty = level == 1 ? CONTENT_DIRTY : CHILD_DIRTY;\n        if (node.dirty < dirty) node.dirty = dirty;\n      }\n    }\n  }, {\n    key: \"domAtom\",\n    get: function get() {\n      return false;\n    }\n  }, {\n    key: \"ignoreForCoords\",\n    get: function get() {\n      return false;\n    }\n  }]);\n\n  return ViewDesc;\n}();\n\nvar WidgetViewDesc = function (_ViewDesc) {\n  _inherits(WidgetViewDesc, _ViewDesc);\n\n  var _super = _createSuper(WidgetViewDesc);\n\n  function WidgetViewDesc(parent, widget, view, pos) {\n    var _this;\n\n    _classCallCheck(this, WidgetViewDesc);\n\n    var self,\n        dom = widget.type.toDOM;\n    if (typeof dom == \"function\") dom = dom(view, function () {\n      if (!self) return pos;\n      if (self.parent) return self.parent.posBeforeChild(self);\n    });\n\n    if (!widget.type.spec.raw) {\n      if (dom.nodeType != 1) {\n        var wrap = document.createElement(\"span\");\n        wrap.appendChild(dom);\n        dom = wrap;\n      }\n\n      dom.contentEditable = \"false\";\n      dom.classList.add(\"ProseMirror-widget\");\n    }\n\n    _this = _super.call(this, parent, [], dom, null);\n    _this.widget = widget;\n    _this.widget = widget;\n    self = _assertThisInitialized(_this);\n    return _this;\n  }\n\n  _createClass(WidgetViewDesc, [{\n    key: \"matchesWidget\",\n    value: function matchesWidget(widget) {\n      return this.dirty == NOT_DIRTY && widget.type.eq(this.widget.type);\n    }\n  }, {\n    key: \"parseRule\",\n    value: function parseRule() {\n      return {\n        ignore: true\n      };\n    }\n  }, {\n    key: \"stopEvent\",\n    value: function stopEvent(event) {\n      var stop = this.widget.spec.stopEvent;\n      return stop ? stop(event) : false;\n    }\n  }, {\n    key: \"ignoreMutation\",\n    value: function ignoreMutation(mutation) {\n      return mutation.type != \"selection\" || this.widget.spec.ignoreSelection;\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.widget.type.destroy(this.dom);\n\n      _get(_getPrototypeOf(WidgetViewDesc.prototype), \"destroy\", this).call(this);\n    }\n  }, {\n    key: \"domAtom\",\n    get: function get() {\n      return true;\n    }\n  }, {\n    key: \"side\",\n    get: function get() {\n      return this.widget.type.side;\n    }\n  }]);\n\n  return WidgetViewDesc;\n}(ViewDesc);\n\nvar CompositionViewDesc = function (_ViewDesc2) {\n  _inherits(CompositionViewDesc, _ViewDesc2);\n\n  var _super2 = _createSuper(CompositionViewDesc);\n\n  function CompositionViewDesc(parent, dom, textDOM, text) {\n    var _this2;\n\n    _classCallCheck(this, CompositionViewDesc);\n\n    _this2 = _super2.call(this, parent, [], dom, null);\n    _this2.textDOM = textDOM;\n    _this2.text = text;\n    return _this2;\n  }\n\n  _createClass(CompositionViewDesc, [{\n    key: \"size\",\n    get: function get() {\n      return this.text.length;\n    }\n  }, {\n    key: \"localPosFromDOM\",\n    value: function localPosFromDOM(dom, offset) {\n      if (dom != this.textDOM) return this.posAtStart + (offset ? this.size : 0);\n      return this.posAtStart + offset;\n    }\n  }, {\n    key: \"domFromPos\",\n    value: function domFromPos(pos) {\n      return {\n        node: this.textDOM,\n        offset: pos\n      };\n    }\n  }, {\n    key: \"ignoreMutation\",\n    value: function ignoreMutation(mut) {\n      return mut.type === 'characterData' && mut.target.nodeValue == mut.oldValue;\n    }\n  }]);\n\n  return CompositionViewDesc;\n}(ViewDesc);\n\nvar MarkViewDesc = function (_ViewDesc3) {\n  _inherits(MarkViewDesc, _ViewDesc3);\n\n  var _super3 = _createSuper(MarkViewDesc);\n\n  function MarkViewDesc(parent, mark, dom, contentDOM) {\n    var _this3;\n\n    _classCallCheck(this, MarkViewDesc);\n\n    _this3 = _super3.call(this, parent, [], dom, contentDOM);\n    _this3.mark = mark;\n    return _this3;\n  }\n\n  _createClass(MarkViewDesc, [{\n    key: \"parseRule\",\n    value: function parseRule() {\n      if (this.dirty & NODE_DIRTY || this.mark.type.spec.reparseInView) return null;\n      return {\n        mark: this.mark.type.name,\n        attrs: this.mark.attrs,\n        contentElement: this.contentDOM || undefined\n      };\n    }\n  }, {\n    key: \"matchesMark\",\n    value: function matchesMark(mark) {\n      return this.dirty != NODE_DIRTY && this.mark.eq(mark);\n    }\n  }, {\n    key: \"markDirty\",\n    value: function markDirty(from, to) {\n      _get(_getPrototypeOf(MarkViewDesc.prototype), \"markDirty\", this).call(this, from, to);\n\n      if (this.dirty != NOT_DIRTY) {\n        var parent = this.parent;\n\n        while (!parent.node) {\n          parent = parent.parent;\n        }\n\n        if (parent.dirty < this.dirty) parent.dirty = this.dirty;\n        this.dirty = NOT_DIRTY;\n      }\n    }\n  }, {\n    key: \"slice\",\n    value: function slice(from, to, view) {\n      var copy = MarkViewDesc.create(this.parent, this.mark, true, view);\n      var nodes = this.children,\n          size = this.size;\n      if (to < size) nodes = replaceNodes(nodes, to, size, view);\n      if (from > 0) nodes = replaceNodes(nodes, 0, from, view);\n\n      for (var i = 0; i < nodes.length; i++) {\n        nodes[i].parent = copy;\n      }\n\n      copy.children = nodes;\n      return copy;\n    }\n  }], [{\n    key: \"create\",\n    value: function create(parent, mark, inline, view) {\n      var custom = view.nodeViews[mark.type.name];\n      var spec = custom && custom(mark, view, inline);\n      if (!spec || !spec.dom) spec = prosemirrorModel.DOMSerializer.renderSpec(document, mark.type.spec.toDOM(mark, inline));\n      return new MarkViewDesc(parent, mark, spec.dom, spec.contentDOM || spec.dom);\n    }\n  }]);\n\n  return MarkViewDesc;\n}(ViewDesc);\n\nvar NodeViewDesc = function (_ViewDesc4) {\n  _inherits(NodeViewDesc, _ViewDesc4);\n\n  var _super4 = _createSuper(NodeViewDesc);\n\n  function NodeViewDesc(parent, node, outerDeco, innerDeco, dom, contentDOM, nodeDOM, view, pos) {\n    var _this4;\n\n    _classCallCheck(this, NodeViewDesc);\n\n    _this4 = _super4.call(this, parent, [], dom, contentDOM);\n    _this4.node = node;\n    _this4.outerDeco = outerDeco;\n    _this4.innerDeco = innerDeco;\n    _this4.nodeDOM = nodeDOM;\n    if (contentDOM) _this4.updateChildren(view, pos);\n    return _this4;\n  }\n\n  _createClass(NodeViewDesc, [{\n    key: \"parseRule\",\n    value: function parseRule() {\n      var _this5 = this;\n\n      if (this.node.type.spec.reparseInView) return null;\n      var rule = {\n        node: this.node.type.name,\n        attrs: this.node.attrs\n      };\n      if (this.node.type.whitespace == \"pre\") rule.preserveWhitespace = \"full\";\n\n      if (!this.contentDOM) {\n        rule.getContent = function () {\n          return _this5.node.content;\n        };\n      } else if (!this.contentLost) {\n        rule.contentElement = this.contentDOM;\n      } else {\n        for (var i = this.children.length - 1; i >= 0; i--) {\n          var child = this.children[i];\n\n          if (this.dom.contains(child.dom.parentNode)) {\n            rule.contentElement = child.dom.parentNode;\n            break;\n          }\n        }\n\n        if (!rule.contentElement) rule.getContent = function () {\n          return prosemirrorModel.Fragment.empty;\n        };\n      }\n\n      return rule;\n    }\n  }, {\n    key: \"matchesNode\",\n    value: function matchesNode(node, outerDeco, innerDeco) {\n      return this.dirty == NOT_DIRTY && node.eq(this.node) && sameOuterDeco(outerDeco, this.outerDeco) && innerDeco.eq(this.innerDeco);\n    }\n  }, {\n    key: \"size\",\n    get: function get() {\n      return this.node.nodeSize;\n    }\n  }, {\n    key: \"border\",\n    get: function get() {\n      return this.node.isLeaf ? 0 : 1;\n    }\n  }, {\n    key: \"updateChildren\",\n    value: function updateChildren(view, pos) {\n      var _this6 = this;\n\n      var inline = this.node.inlineContent,\n          off = pos;\n      var composition = view.composing ? this.localCompositionInfo(view, pos) : null;\n      var localComposition = composition && composition.pos > -1 ? composition : null;\n      var compositionInChild = composition && composition.pos < 0;\n      var updater = new ViewTreeUpdater(this, localComposition && localComposition.node);\n      iterDeco(this.node, this.innerDeco, function (widget, i, insideNode) {\n        if (widget.spec.marks) updater.syncToMarks(widget.spec.marks, inline, view);else if (widget.type.side >= 0 && !insideNode) updater.syncToMarks(i == _this6.node.childCount ? prosemirrorModel.Mark.none : _this6.node.child(i).marks, inline, view);\n        updater.placeWidget(widget, view, off);\n      }, function (child, outerDeco, innerDeco, i) {\n        updater.syncToMarks(child.marks, inline, view);\n        var compIndex;\n        if (updater.findNodeMatch(child, outerDeco, innerDeco, i)) ;else if (compositionInChild && view.state.selection.from > off && view.state.selection.to < off + child.nodeSize && (compIndex = updater.findIndexWithChild(composition.node)) > -1 && updater.updateNodeAt(child, outerDeco, innerDeco, compIndex, view)) ;else if (updater.updateNextNode(child, outerDeco, innerDeco, view, i)) ;else {\n          updater.addNode(child, outerDeco, innerDeco, view, off);\n        }\n        off += child.nodeSize;\n      });\n      updater.syncToMarks([], inline, view);\n      if (this.node.isTextblock) updater.addTextblockHacks();\n      updater.destroyRest();\n\n      if (updater.changed || this.dirty == CONTENT_DIRTY) {\n        if (localComposition) this.protectLocalComposition(view, localComposition);\n        renderDescs(this.contentDOM, this.children, view);\n        if (ios) iosHacks(this.dom);\n      }\n    }\n  }, {\n    key: \"localCompositionInfo\",\n    value: function localCompositionInfo(view, pos) {\n      var _view$state$selection = view.state.selection,\n          from = _view$state$selection.from,\n          to = _view$state$selection.to;\n      if (!(view.state.selection instanceof prosemirrorState.TextSelection) || from < pos || to > pos + this.node.content.size) return null;\n      var sel = view.domSelection();\n      var textNode = nearbyTextNode(sel.focusNode, sel.focusOffset);\n      if (!textNode || !this.dom.contains(textNode.parentNode)) return null;\n\n      if (this.node.inlineContent) {\n        var text = textNode.nodeValue;\n        var textPos = findTextInFragment(this.node.content, text, from - pos, to - pos);\n        return textPos < 0 ? null : {\n          node: textNode,\n          pos: textPos,\n          text: text\n        };\n      } else {\n        return {\n          node: textNode,\n          pos: -1,\n          text: \"\"\n        };\n      }\n    }\n  }, {\n    key: \"protectLocalComposition\",\n    value: function protectLocalComposition(view, _ref2) {\n      var node = _ref2.node,\n          pos = _ref2.pos,\n          text = _ref2.text;\n      if (this.getDesc(node)) return;\n      var topNode = node;\n\n      for (;; topNode = topNode.parentNode) {\n        if (topNode.parentNode == this.contentDOM) break;\n\n        while (topNode.previousSibling) {\n          topNode.parentNode.removeChild(topNode.previousSibling);\n        }\n\n        while (topNode.nextSibling) {\n          topNode.parentNode.removeChild(topNode.nextSibling);\n        }\n\n        if (topNode.pmViewDesc) topNode.pmViewDesc = undefined;\n      }\n\n      var desc = new CompositionViewDesc(this, topNode, node, text);\n      view.input.compositionNodes.push(desc);\n      this.children = replaceNodes(this.children, pos, pos + text.length, view, desc);\n    }\n  }, {\n    key: \"update\",\n    value: function update(node, outerDeco, innerDeco, view) {\n      if (this.dirty == NODE_DIRTY || !node.sameMarkup(this.node)) return false;\n      this.updateInner(node, outerDeco, innerDeco, view);\n      return true;\n    }\n  }, {\n    key: \"updateInner\",\n    value: function updateInner(node, outerDeco, innerDeco, view) {\n      this.updateOuterDeco(outerDeco);\n      this.node = node;\n      this.innerDeco = innerDeco;\n      if (this.contentDOM) this.updateChildren(view, this.posAtStart);\n      this.dirty = NOT_DIRTY;\n    }\n  }, {\n    key: \"updateOuterDeco\",\n    value: function updateOuterDeco(outerDeco) {\n      if (sameOuterDeco(outerDeco, this.outerDeco)) return;\n      var needsWrap = this.nodeDOM.nodeType != 1;\n      var oldDOM = this.dom;\n      this.dom = patchOuterDeco(this.dom, this.nodeDOM, computeOuterDeco(this.outerDeco, this.node, needsWrap), computeOuterDeco(outerDeco, this.node, needsWrap));\n\n      if (this.dom != oldDOM) {\n        oldDOM.pmViewDesc = undefined;\n        this.dom.pmViewDesc = this;\n      }\n\n      this.outerDeco = outerDeco;\n    }\n  }, {\n    key: \"selectNode\",\n    value: function selectNode() {\n      if (this.nodeDOM.nodeType == 1) this.nodeDOM.classList.add(\"ProseMirror-selectednode\");\n      if (this.contentDOM || !this.node.type.spec.draggable) this.dom.draggable = true;\n    }\n  }, {\n    key: \"deselectNode\",\n    value: function deselectNode() {\n      if (this.nodeDOM.nodeType == 1) this.nodeDOM.classList.remove(\"ProseMirror-selectednode\");\n      if (this.contentDOM || !this.node.type.spec.draggable) this.dom.removeAttribute(\"draggable\");\n    }\n  }, {\n    key: \"domAtom\",\n    get: function get() {\n      return this.node.isAtom;\n    }\n  }], [{\n    key: \"create\",\n    value: function create(parent, node, outerDeco, innerDeco, view, pos) {\n      var custom = view.nodeViews[node.type.name],\n          descObj;\n      var spec = custom && custom(node, view, function () {\n        if (!descObj) return pos;\n        if (descObj.parent) return descObj.parent.posBeforeChild(descObj);\n      }, outerDeco, innerDeco);\n      var dom = spec && spec.dom,\n          contentDOM = spec && spec.contentDOM;\n\n      if (node.isText) {\n        if (!dom) dom = document.createTextNode(node.text);else if (dom.nodeType != 3) throw new RangeError(\"Text must be rendered as a DOM text node\");\n      } else if (!dom) {\n        var _prosemirrorModel$DOM = prosemirrorModel.DOMSerializer.renderSpec(document, node.type.spec.toDOM(node));\n\n        dom = _prosemirrorModel$DOM.dom;\n        contentDOM = _prosemirrorModel$DOM.contentDOM;\n      }\n\n      if (!contentDOM && !node.isText && dom.nodeName != \"BR\") {\n        if (!dom.hasAttribute(\"contenteditable\")) dom.contentEditable = \"false\";\n        if (node.type.spec.draggable) dom.draggable = true;\n      }\n\n      var nodeDOM = dom;\n      dom = applyOuterDeco(dom, outerDeco, node);\n      if (spec) return descObj = new CustomNodeViewDesc(parent, node, outerDeco, innerDeco, dom, contentDOM || null, nodeDOM, spec, view, pos + 1);else if (node.isText) return new TextViewDesc(parent, node, outerDeco, innerDeco, dom, nodeDOM, view);else return new NodeViewDesc(parent, node, outerDeco, innerDeco, dom, contentDOM || null, nodeDOM, view, pos + 1);\n    }\n  }]);\n\n  return NodeViewDesc;\n}(ViewDesc);\n\nfunction docViewDesc(doc, outerDeco, innerDeco, dom, view) {\n  applyOuterDeco(dom, outerDeco, doc);\n  return new NodeViewDesc(undefined, doc, outerDeco, innerDeco, dom, dom, dom, view, 0);\n}\n\nvar TextViewDesc = function (_NodeViewDesc) {\n  _inherits(TextViewDesc, _NodeViewDesc);\n\n  var _super5 = _createSuper(TextViewDesc);\n\n  function TextViewDesc(parent, node, outerDeco, innerDeco, dom, nodeDOM, view) {\n    _classCallCheck(this, TextViewDesc);\n\n    return _super5.call(this, parent, node, outerDeco, innerDeco, dom, null, nodeDOM, view, 0);\n  }\n\n  _createClass(TextViewDesc, [{\n    key: \"parseRule\",\n    value: function parseRule() {\n      var skip = this.nodeDOM.parentNode;\n\n      while (skip && skip != this.dom && !skip.pmIsDeco) {\n        skip = skip.parentNode;\n      }\n\n      return {\n        skip: skip || true\n      };\n    }\n  }, {\n    key: \"update\",\n    value: function update(node, outerDeco, innerDeco, view) {\n      if (this.dirty == NODE_DIRTY || this.dirty != NOT_DIRTY && !this.inParent() || !node.sameMarkup(this.node)) return false;\n      this.updateOuterDeco(outerDeco);\n\n      if ((this.dirty != NOT_DIRTY || node.text != this.node.text) && node.text != this.nodeDOM.nodeValue) {\n        this.nodeDOM.nodeValue = node.text;\n        if (view.trackWrites == this.nodeDOM) view.trackWrites = null;\n      }\n\n      this.node = node;\n      this.dirty = NOT_DIRTY;\n      return true;\n    }\n  }, {\n    key: \"inParent\",\n    value: function inParent() {\n      var parentDOM = this.parent.contentDOM;\n\n      for (var n = this.nodeDOM; n; n = n.parentNode) {\n        if (n == parentDOM) return true;\n      }\n\n      return false;\n    }\n  }, {\n    key: \"domFromPos\",\n    value: function domFromPos(pos) {\n      return {\n        node: this.nodeDOM,\n        offset: pos\n      };\n    }\n  }, {\n    key: \"localPosFromDOM\",\n    value: function localPosFromDOM(dom, offset, bias) {\n      if (dom == this.nodeDOM) return this.posAtStart + Math.min(offset, this.node.text.length);\n      return _get(_getPrototypeOf(TextViewDesc.prototype), \"localPosFromDOM\", this).call(this, dom, offset, bias);\n    }\n  }, {\n    key: \"ignoreMutation\",\n    value: function ignoreMutation(mutation) {\n      return mutation.type != \"characterData\" && mutation.type != \"selection\";\n    }\n  }, {\n    key: \"slice\",\n    value: function slice(from, to, view) {\n      var node = this.node.cut(from, to),\n          dom = document.createTextNode(node.text);\n      return new TextViewDesc(this.parent, node, this.outerDeco, this.innerDeco, dom, dom, view);\n    }\n  }, {\n    key: \"markDirty\",\n    value: function markDirty(from, to) {\n      _get(_getPrototypeOf(TextViewDesc.prototype), \"markDirty\", this).call(this, from, to);\n\n      if (this.dom != this.nodeDOM && (from == 0 || to == this.nodeDOM.nodeValue.length)) this.dirty = NODE_DIRTY;\n    }\n  }, {\n    key: \"domAtom\",\n    get: function get() {\n      return false;\n    }\n  }]);\n\n  return TextViewDesc;\n}(NodeViewDesc);\n\nvar TrailingHackViewDesc = function (_ViewDesc5) {\n  _inherits(TrailingHackViewDesc, _ViewDesc5);\n\n  var _super6 = _createSuper(TrailingHackViewDesc);\n\n  function TrailingHackViewDesc() {\n    _classCallCheck(this, TrailingHackViewDesc);\n\n    return _super6.apply(this, arguments);\n  }\n\n  _createClass(TrailingHackViewDesc, [{\n    key: \"parseRule\",\n    value: function parseRule() {\n      return {\n        ignore: true\n      };\n    }\n  }, {\n    key: \"matchesHack\",\n    value: function matchesHack(nodeName) {\n      return this.dirty == NOT_DIRTY && this.dom.nodeName == nodeName;\n    }\n  }, {\n    key: \"domAtom\",\n    get: function get() {\n      return true;\n    }\n  }, {\n    key: \"ignoreForCoords\",\n    get: function get() {\n      return this.dom.nodeName == \"IMG\";\n    }\n  }]);\n\n  return TrailingHackViewDesc;\n}(ViewDesc);\n\nvar CustomNodeViewDesc = function (_NodeViewDesc2) {\n  _inherits(CustomNodeViewDesc, _NodeViewDesc2);\n\n  var _super7 = _createSuper(CustomNodeViewDesc);\n\n  function CustomNodeViewDesc(parent, node, outerDeco, innerDeco, dom, contentDOM, nodeDOM, spec, view, pos) {\n    var _this7;\n\n    _classCallCheck(this, CustomNodeViewDesc);\n\n    _this7 = _super7.call(this, parent, node, outerDeco, innerDeco, dom, contentDOM, nodeDOM, view, pos);\n    _this7.spec = spec;\n    return _this7;\n  }\n\n  _createClass(CustomNodeViewDesc, [{\n    key: \"update\",\n    value: function update(node, outerDeco, innerDeco, view) {\n      if (this.dirty == NODE_DIRTY) return false;\n\n      if (this.spec.update) {\n        var result = this.spec.update(node, outerDeco, innerDeco);\n        if (result) this.updateInner(node, outerDeco, innerDeco, view);\n        return result;\n      } else if (!this.contentDOM && !node.isLeaf) {\n        return false;\n      } else {\n        return _get(_getPrototypeOf(CustomNodeViewDesc.prototype), \"update\", this).call(this, node, outerDeco, innerDeco, view);\n      }\n    }\n  }, {\n    key: \"selectNode\",\n    value: function selectNode() {\n      this.spec.selectNode ? this.spec.selectNode() : _get(_getPrototypeOf(CustomNodeViewDesc.prototype), \"selectNode\", this).call(this);\n    }\n  }, {\n    key: \"deselectNode\",\n    value: function deselectNode() {\n      this.spec.deselectNode ? this.spec.deselectNode() : _get(_getPrototypeOf(CustomNodeViewDesc.prototype), \"deselectNode\", this).call(this);\n    }\n  }, {\n    key: \"setSelection\",\n    value: function setSelection(anchor, head, root, force) {\n      this.spec.setSelection ? this.spec.setSelection(anchor, head, root) : _get(_getPrototypeOf(CustomNodeViewDesc.prototype), \"setSelection\", this).call(this, anchor, head, root, force);\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      if (this.spec.destroy) this.spec.destroy();\n\n      _get(_getPrototypeOf(CustomNodeViewDesc.prototype), \"destroy\", this).call(this);\n    }\n  }, {\n    key: \"stopEvent\",\n    value: function stopEvent(event) {\n      return this.spec.stopEvent ? this.spec.stopEvent(event) : false;\n    }\n  }, {\n    key: \"ignoreMutation\",\n    value: function ignoreMutation(mutation) {\n      return this.spec.ignoreMutation ? this.spec.ignoreMutation(mutation) : _get(_getPrototypeOf(CustomNodeViewDesc.prototype), \"ignoreMutation\", this).call(this, mutation);\n    }\n  }]);\n\n  return CustomNodeViewDesc;\n}(NodeViewDesc);\n\nfunction renderDescs(parentDOM, descs, view) {\n  var dom = parentDOM.firstChild,\n      written = false;\n\n  for (var i = 0; i < descs.length; i++) {\n    var desc = descs[i],\n        childDOM = desc.dom;\n\n    if (childDOM.parentNode == parentDOM) {\n      while (childDOM != dom) {\n        dom = rm(dom);\n        written = true;\n      }\n\n      dom = dom.nextSibling;\n    } else {\n      written = true;\n      parentDOM.insertBefore(childDOM, dom);\n    }\n\n    if (desc instanceof MarkViewDesc) {\n      var pos = dom ? dom.previousSibling : parentDOM.lastChild;\n      renderDescs(desc.contentDOM, desc.children, view);\n      dom = pos ? pos.nextSibling : parentDOM.firstChild;\n    }\n  }\n\n  while (dom) {\n    dom = rm(dom);\n    written = true;\n  }\n\n  if (written && view.trackWrites == parentDOM) view.trackWrites = null;\n}\n\nvar OuterDecoLevel = function OuterDecoLevel(nodeName) {\n  if (nodeName) this.nodeName = nodeName;\n};\n\nOuterDecoLevel.prototype = Object.create(null);\nvar noDeco = [new OuterDecoLevel()];\n\nfunction computeOuterDeco(outerDeco, node, needsWrap) {\n  if (outerDeco.length == 0) return noDeco;\n  var top = needsWrap ? noDeco[0] : new OuterDecoLevel(),\n      result = [top];\n\n  for (var i = 0; i < outerDeco.length; i++) {\n    var attrs = outerDeco[i].type.attrs;\n    if (!attrs) continue;\n    if (attrs.nodeName) result.push(top = new OuterDecoLevel(attrs.nodeName));\n\n    for (var name in attrs) {\n      var val = attrs[name];\n      if (val == null) continue;\n      if (needsWrap && result.length == 1) result.push(top = new OuterDecoLevel(node.isInline ? \"span\" : \"div\"));\n      if (name == \"class\") top[\"class\"] = (top[\"class\"] ? top[\"class\"] + \" \" : \"\") + val;else if (name == \"style\") top.style = (top.style ? top.style + \";\" : \"\") + val;else if (name != \"nodeName\") top[name] = val;\n    }\n  }\n\n  return result;\n}\n\nfunction patchOuterDeco(outerDOM, nodeDOM, prevComputed, curComputed) {\n  if (prevComputed == noDeco && curComputed == noDeco) return nodeDOM;\n  var curDOM = nodeDOM;\n\n  for (var i = 0; i < curComputed.length; i++) {\n    var deco = curComputed[i],\n        prev = prevComputed[i];\n\n    if (i) {\n      var parent = void 0;\n\n      if (prev && prev.nodeName == deco.nodeName && curDOM != outerDOM && (parent = curDOM.parentNode) && parent.nodeName.toLowerCase() == deco.nodeName) {\n        curDOM = parent;\n      } else {\n        parent = document.createElement(deco.nodeName);\n        parent.pmIsDeco = true;\n        parent.appendChild(curDOM);\n        prev = noDeco[0];\n        curDOM = parent;\n      }\n    }\n\n    patchAttributes(curDOM, prev || noDeco[0], deco);\n  }\n\n  return curDOM;\n}\n\nfunction patchAttributes(dom, prev, cur) {\n  for (var name in prev) {\n    if (name != \"class\" && name != \"style\" && name != \"nodeName\" && !(name in cur)) dom.removeAttribute(name);\n  }\n\n  for (var _name in cur) {\n    if (_name != \"class\" && _name != \"style\" && _name != \"nodeName\" && cur[_name] != prev[_name]) dom.setAttribute(_name, cur[_name]);\n  }\n\n  if (prev[\"class\"] != cur[\"class\"]) {\n    var prevList = prev[\"class\"] ? prev[\"class\"].split(\" \").filter(Boolean) : [];\n    var curList = cur[\"class\"] ? cur[\"class\"].split(\" \").filter(Boolean) : [];\n\n    for (var i = 0; i < prevList.length; i++) {\n      if (curList.indexOf(prevList[i]) == -1) dom.classList.remove(prevList[i]);\n    }\n\n    for (var _i = 0; _i < curList.length; _i++) {\n      if (prevList.indexOf(curList[_i]) == -1) dom.classList.add(curList[_i]);\n    }\n\n    if (dom.classList.length == 0) dom.removeAttribute(\"class\");\n  }\n\n  if (prev.style != cur.style) {\n    if (prev.style) {\n      var prop = /\\s*([\\w\\-\\xa1-\\uffff]+)\\s*:(?:\"(?:\\\\.|[^\"])*\"|'(?:\\\\.|[^'])*'|\\(.*?\\)|[^;])*/g,\n          m;\n\n      while (m = prop.exec(prev.style)) {\n        dom.style.removeProperty(m[1]);\n      }\n    }\n\n    if (cur.style) dom.style.cssText += cur.style;\n  }\n}\n\nfunction applyOuterDeco(dom, deco, node) {\n  return patchOuterDeco(dom, dom, noDeco, computeOuterDeco(deco, node, dom.nodeType != 1));\n}\n\nfunction sameOuterDeco(a, b) {\n  if (a.length != b.length) return false;\n\n  for (var i = 0; i < a.length; i++) {\n    if (!a[i].type.eq(b[i].type)) return false;\n  }\n\n  return true;\n}\n\nfunction rm(dom) {\n  var next = dom.nextSibling;\n  dom.parentNode.removeChild(dom);\n  return next;\n}\n\nvar ViewTreeUpdater = function () {\n  function ViewTreeUpdater(top, lock) {\n    _classCallCheck(this, ViewTreeUpdater);\n\n    this.lock = lock;\n    this.index = 0;\n    this.stack = [];\n    this.changed = false;\n    this.top = top;\n    this.preMatch = preMatch(top.node.content, top);\n  }\n\n  _createClass(ViewTreeUpdater, [{\n    key: \"destroyBetween\",\n    value: function destroyBetween(start, end) {\n      if (start == end) return;\n\n      for (var i = start; i < end; i++) {\n        this.top.children[i].destroy();\n      }\n\n      this.top.children.splice(start, end - start);\n      this.changed = true;\n    }\n  }, {\n    key: \"destroyRest\",\n    value: function destroyRest() {\n      this.destroyBetween(this.index, this.top.children.length);\n    }\n  }, {\n    key: \"syncToMarks\",\n    value: function syncToMarks(marks, inline, view) {\n      var keep = 0,\n          depth = this.stack.length >> 1;\n      var maxKeep = Math.min(depth, marks.length);\n\n      while (keep < maxKeep && (keep == depth - 1 ? this.top : this.stack[keep + 1 << 1]).matchesMark(marks[keep]) && marks[keep].type.spec.spanning !== false) {\n        keep++;\n      }\n\n      while (keep < depth) {\n        this.destroyRest();\n        this.top.dirty = NOT_DIRTY;\n        this.index = this.stack.pop();\n        this.top = this.stack.pop();\n        depth--;\n      }\n\n      while (depth < marks.length) {\n        this.stack.push(this.top, this.index + 1);\n        var found = -1;\n\n        for (var i = this.index; i < Math.min(this.index + 3, this.top.children.length); i++) {\n          if (this.top.children[i].matchesMark(marks[depth])) {\n            found = i;\n            break;\n          }\n        }\n\n        if (found > -1) {\n          if (found > this.index) {\n            this.changed = true;\n            this.destroyBetween(this.index, found);\n          }\n\n          this.top = this.top.children[this.index];\n        } else {\n          var markDesc = MarkViewDesc.create(this.top, marks[depth], inline, view);\n          this.top.children.splice(this.index, 0, markDesc);\n          this.top = markDesc;\n          this.changed = true;\n        }\n\n        this.index = 0;\n        depth++;\n      }\n    }\n  }, {\n    key: \"findNodeMatch\",\n    value: function findNodeMatch(node, outerDeco, innerDeco, index) {\n      var found = -1,\n          targetDesc;\n\n      if (index >= this.preMatch.index && (targetDesc = this.preMatch.matches[index - this.preMatch.index]).parent == this.top && targetDesc.matchesNode(node, outerDeco, innerDeco)) {\n        found = this.top.children.indexOf(targetDesc, this.index);\n      } else {\n        for (var i = this.index, e = Math.min(this.top.children.length, i + 5); i < e; i++) {\n          var child = this.top.children[i];\n\n          if (child.matchesNode(node, outerDeco, innerDeco) && !this.preMatch.matched.has(child)) {\n            found = i;\n            break;\n          }\n        }\n      }\n\n      if (found < 0) return false;\n      this.destroyBetween(this.index, found);\n      this.index++;\n      return true;\n    }\n  }, {\n    key: \"updateNodeAt\",\n    value: function updateNodeAt(node, outerDeco, innerDeco, index, view) {\n      var child = this.top.children[index];\n      if (child.dirty == NODE_DIRTY && child.dom == child.contentDOM) child.dirty = CONTENT_DIRTY;\n      if (!child.update(node, outerDeco, innerDeco, view)) return false;\n      this.destroyBetween(this.index, index);\n      this.index = index + 1;\n      return true;\n    }\n  }, {\n    key: \"findIndexWithChild\",\n    value: function findIndexWithChild(domNode) {\n      for (;;) {\n        var parent = domNode.parentNode;\n        if (!parent) return -1;\n\n        if (parent == this.top.contentDOM) {\n          var desc = domNode.pmViewDesc;\n          if (desc) for (var i = this.index; i < this.top.children.length; i++) {\n            if (this.top.children[i] == desc) return i;\n          }\n          return -1;\n        }\n\n        domNode = parent;\n      }\n    }\n  }, {\n    key: \"updateNextNode\",\n    value: function updateNextNode(node, outerDeco, innerDeco, view, index) {\n      for (var i = this.index; i < this.top.children.length; i++) {\n        var next = this.top.children[i];\n\n        if (next instanceof NodeViewDesc) {\n          var _preMatch = this.preMatch.matched.get(next);\n\n          if (_preMatch != null && _preMatch != index) return false;\n          var nextDOM = next.dom;\n          var locked = this.lock && (nextDOM == this.lock || nextDOM.nodeType == 1 && nextDOM.contains(this.lock.parentNode)) && !(node.isText && next.node && next.node.isText && next.nodeDOM.nodeValue == node.text && next.dirty != NODE_DIRTY && sameOuterDeco(outerDeco, next.outerDeco));\n\n          if (!locked && next.update(node, outerDeco, innerDeco, view)) {\n            this.destroyBetween(this.index, i);\n            if (next.dom != nextDOM) this.changed = true;\n            this.index++;\n            return true;\n          }\n\n          break;\n        }\n      }\n\n      return false;\n    }\n  }, {\n    key: \"addNode\",\n    value: function addNode(node, outerDeco, innerDeco, view, pos) {\n      this.top.children.splice(this.index++, 0, NodeViewDesc.create(this.top, node, outerDeco, innerDeco, view, pos));\n      this.changed = true;\n    }\n  }, {\n    key: \"placeWidget\",\n    value: function placeWidget(widget, view, pos) {\n      var next = this.index < this.top.children.length ? this.top.children[this.index] : null;\n\n      if (next && next.matchesWidget(widget) && (widget == next.widget || !next.widget.type.toDOM.parentNode)) {\n        this.index++;\n      } else {\n        var desc = new WidgetViewDesc(this.top, widget, view, pos);\n        this.top.children.splice(this.index++, 0, desc);\n        this.changed = true;\n      }\n    }\n  }, {\n    key: \"addTextblockHacks\",\n    value: function addTextblockHacks() {\n      var lastChild = this.top.children[this.index - 1],\n          parent = this.top;\n\n      while (lastChild instanceof MarkViewDesc) {\n        parent = lastChild;\n        lastChild = parent.children[parent.children.length - 1];\n      }\n\n      if (!lastChild || !(lastChild instanceof TextViewDesc) || /\\n$/.test(lastChild.node.text)) {\n        if ((safari || chrome) && lastChild && lastChild.dom.contentEditable == \"false\") this.addHackNode(\"IMG\", parent);\n        this.addHackNode(\"BR\", this.top);\n      }\n    }\n  }, {\n    key: \"addHackNode\",\n    value: function addHackNode(nodeName, parent) {\n      if (parent == this.top && this.index < parent.children.length && parent.children[this.index].matchesHack(nodeName)) {\n        this.index++;\n      } else {\n        var dom = document.createElement(nodeName);\n\n        if (nodeName == \"IMG\") {\n          dom.className = \"ProseMirror-separator\";\n          dom.alt = \"\";\n        }\n\n        if (nodeName == \"BR\") dom.className = \"ProseMirror-trailingBreak\";\n        var hack = new TrailingHackViewDesc(this.top, [], dom, null);\n        if (parent != this.top) parent.children.push(hack);else parent.children.splice(this.index++, 0, hack);\n        this.changed = true;\n      }\n    }\n  }]);\n\n  return ViewTreeUpdater;\n}();\n\nfunction preMatch(frag, parentDesc) {\n  var curDesc = parentDesc,\n      descI = curDesc.children.length;\n  var fI = frag.childCount,\n      matched = new Map(),\n      matches = [];\n\n  outer: while (fI > 0) {\n    var desc = void 0;\n\n    for (;;) {\n      if (descI) {\n        var next = curDesc.children[descI - 1];\n\n        if (next instanceof MarkViewDesc) {\n          curDesc = next;\n          descI = next.children.length;\n        } else {\n          desc = next;\n          descI--;\n          break;\n        }\n      } else if (curDesc == parentDesc) {\n        break outer;\n      } else {\n        descI = curDesc.parent.children.indexOf(curDesc);\n        curDesc = curDesc.parent;\n      }\n    }\n\n    var node = desc.node;\n    if (!node) continue;\n    if (node != frag.child(fI - 1)) break;\n    --fI;\n    matched.set(desc, fI);\n    matches.push(desc);\n  }\n\n  return {\n    index: fI,\n    matched: matched,\n    matches: matches.reverse()\n  };\n}\n\nfunction compareSide(a, b) {\n  return a.type.side - b.type.side;\n}\n\nfunction iterDeco(parent, deco, onWidget, onNode) {\n  var locals = deco.locals(parent),\n      offset = 0;\n\n  if (locals.length == 0) {\n    for (var i = 0; i < parent.childCount; i++) {\n      var child = parent.child(i);\n      onNode(child, locals, deco.forChild(offset, child), i);\n      offset += child.nodeSize;\n    }\n\n    return;\n  }\n\n  var decoIndex = 0,\n      active = [],\n      restNode = null;\n\n  for (var parentIndex = 0;;) {\n    if (decoIndex < locals.length && locals[decoIndex].to == offset) {\n      var widget = locals[decoIndex++],\n          widgets = void 0;\n\n      while (decoIndex < locals.length && locals[decoIndex].to == offset) {\n        (widgets || (widgets = [widget])).push(locals[decoIndex++]);\n      }\n\n      if (widgets) {\n        widgets.sort(compareSide);\n\n        for (var _i2 = 0; _i2 < widgets.length; _i2++) {\n          onWidget(widgets[_i2], parentIndex, !!restNode);\n        }\n      } else {\n        onWidget(widget, parentIndex, !!restNode);\n      }\n    }\n\n    var _child = void 0,\n        index = void 0;\n\n    if (restNode) {\n      index = -1;\n      _child = restNode;\n      restNode = null;\n    } else if (parentIndex < parent.childCount) {\n      index = parentIndex;\n      _child = parent.child(parentIndex++);\n    } else {\n      break;\n    }\n\n    for (var _i3 = 0; _i3 < active.length; _i3++) {\n      if (active[_i3].to <= offset) active.splice(_i3--, 1);\n    }\n\n    while (decoIndex < locals.length && locals[decoIndex].from <= offset && locals[decoIndex].to > offset) {\n      active.push(locals[decoIndex++]);\n    }\n\n    var end = offset + _child.nodeSize;\n\n    if (_child.isText) {\n      var cutAt = end;\n      if (decoIndex < locals.length && locals[decoIndex].from < cutAt) cutAt = locals[decoIndex].from;\n\n      for (var _i4 = 0; _i4 < active.length; _i4++) {\n        if (active[_i4].to < cutAt) cutAt = active[_i4].to;\n      }\n\n      if (cutAt < end) {\n        restNode = _child.cut(cutAt - offset);\n        _child = _child.cut(0, cutAt - offset);\n        end = cutAt;\n        index = -1;\n      }\n    }\n\n    var outerDeco = _child.isInline && !_child.isLeaf ? active.filter(function (d) {\n      return !d.inline;\n    }) : active.slice();\n    onNode(_child, outerDeco, deco.forChild(offset, _child), index);\n    offset = end;\n  }\n}\n\nfunction iosHacks(dom) {\n  if (dom.nodeName == \"UL\" || dom.nodeName == \"OL\") {\n    var oldCSS = dom.style.cssText;\n    dom.style.cssText = oldCSS + \"; list-style: square !important\";\n    window.getComputedStyle(dom).listStyle;\n    dom.style.cssText = oldCSS;\n  }\n}\n\nfunction nearbyTextNode(node, offset) {\n  for (;;) {\n    if (node.nodeType == 3) return node;\n\n    if (node.nodeType == 1 && offset > 0) {\n      if (node.childNodes.length > offset && node.childNodes[offset].nodeType == 3) return node.childNodes[offset];\n      node = node.childNodes[offset - 1];\n      offset = nodeSize(node);\n    } else if (node.nodeType == 1 && offset < node.childNodes.length) {\n      node = node.childNodes[offset];\n      offset = 0;\n    } else {\n      return null;\n    }\n  }\n}\n\nfunction findTextInFragment(frag, text, from, to) {\n  for (var i = 0, pos = 0; i < frag.childCount && pos <= to;) {\n    var child = frag.child(i++),\n        childStart = pos;\n    pos += child.nodeSize;\n    if (!child.isText) continue;\n    var str = child.text;\n\n    while (i < frag.childCount) {\n      var next = frag.child(i++);\n      pos += next.nodeSize;\n      if (!next.isText) break;\n      str += next.text;\n    }\n\n    if (pos >= from) {\n      var found = childStart < to ? str.lastIndexOf(text, to - childStart - 1) : -1;\n      if (found >= 0 && found + text.length + childStart >= from) return childStart + found;\n      if (from == to && str.length >= to + text.length - childStart && str.slice(to - childStart, to - childStart + text.length) == text) return to;\n    }\n  }\n\n  return -1;\n}\n\nfunction replaceNodes(nodes, from, to, view, replacement) {\n  var result = [];\n\n  for (var i = 0, off = 0; i < nodes.length; i++) {\n    var child = nodes[i],\n        start = off,\n        end = off += child.size;\n\n    if (start >= to || end <= from) {\n      result.push(child);\n    } else {\n      if (start < from) result.push(child.slice(0, from - start, view));\n\n      if (replacement) {\n        result.push(replacement);\n        replacement = undefined;\n      }\n\n      if (end > to) result.push(child.slice(to - start, child.size, view));\n    }\n  }\n\n  return result;\n}\n\nfunction selectionFromDOM(view) {\n  var origin = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n  var domSel = view.domSelection(),\n      doc = view.state.doc;\n  if (!domSel.focusNode) return null;\n  var nearestDesc = view.docView.nearestDesc(domSel.focusNode),\n      inWidget = nearestDesc && nearestDesc.size == 0;\n  var head = view.docView.posFromDOM(domSel.focusNode, domSel.focusOffset, 1);\n  if (head < 0) return null;\n  var $head = doc.resolve(head),\n      $anchor,\n      selection;\n\n  if (selectionCollapsed(domSel)) {\n    $anchor = $head;\n\n    while (nearestDesc && !nearestDesc.node) {\n      nearestDesc = nearestDesc.parent;\n    }\n\n    var nearestDescNode = nearestDesc.node;\n\n    if (nearestDesc && nearestDescNode.isAtom && prosemirrorState.NodeSelection.isSelectable(nearestDescNode) && nearestDesc.parent && !(nearestDescNode.isInline && isOnEdge(domSel.focusNode, domSel.focusOffset, nearestDesc.dom))) {\n      var pos = nearestDesc.posBefore;\n      selection = new prosemirrorState.NodeSelection(head == pos ? $head : doc.resolve(pos));\n    }\n  } else {\n    var anchor = view.docView.posFromDOM(domSel.anchorNode, domSel.anchorOffset, 1);\n    if (anchor < 0) return null;\n    $anchor = doc.resolve(anchor);\n  }\n\n  if (!selection) {\n    var bias = origin == \"pointer\" || view.state.selection.head < $head.pos && !inWidget ? 1 : -1;\n    selection = selectionBetween(view, $anchor, $head, bias);\n  }\n\n  return selection;\n}\n\nfunction editorOwnsSelection(view) {\n  return view.editable ? view.hasFocus() : hasSelection(view) && document.activeElement && document.activeElement.contains(view.dom);\n}\n\nfunction selectionToDOM(view) {\n  var force = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  var sel = view.state.selection;\n  syncNodeSelection(view, sel);\n  if (!editorOwnsSelection(view)) return;\n\n  if (!force && view.input.mouseDown && view.input.mouseDown.allowDefault && chrome) {\n    var domSel = view.domSelection(),\n        curSel = view.domObserver.currentSelection;\n\n    if (domSel.anchorNode && curSel.anchorNode && isEquivalentPosition(domSel.anchorNode, domSel.anchorOffset, curSel.anchorNode, curSel.anchorOffset)) {\n      view.input.mouseDown.delayedSelectionSync = true;\n      view.domObserver.setCurSelection();\n      return;\n    }\n  }\n\n  view.domObserver.disconnectSelection();\n\n  if (view.cursorWrapper) {\n    selectCursorWrapper(view);\n  } else {\n    var anchor = sel.anchor,\n        head = sel.head,\n        resetEditableFrom,\n        resetEditableTo;\n\n    if (brokenSelectBetweenUneditable && !(sel instanceof prosemirrorState.TextSelection)) {\n      if (!sel.$from.parent.inlineContent) resetEditableFrom = temporarilyEditableNear(view, sel.from);\n      if (!sel.empty && !sel.$from.parent.inlineContent) resetEditableTo = temporarilyEditableNear(view, sel.to);\n    }\n\n    view.docView.setSelection(anchor, head, view.root, force);\n\n    if (brokenSelectBetweenUneditable) {\n      if (resetEditableFrom) resetEditable(resetEditableFrom);\n      if (resetEditableTo) resetEditable(resetEditableTo);\n    }\n\n    if (sel.visible) {\n      view.dom.classList.remove(\"ProseMirror-hideselection\");\n    } else {\n      view.dom.classList.add(\"ProseMirror-hideselection\");\n      if (\"onselectionchange\" in document) removeClassOnSelectionChange(view);\n    }\n  }\n\n  view.domObserver.setCurSelection();\n  view.domObserver.connectSelection();\n}\n\nvar brokenSelectBetweenUneditable = safari || chrome && chrome_version < 63;\n\nfunction temporarilyEditableNear(view, pos) {\n  var _view$docView$domFrom3 = view.docView.domFromPos(pos, 0),\n      node = _view$docView$domFrom3.node,\n      offset = _view$docView$domFrom3.offset;\n\n  var after = offset < node.childNodes.length ? node.childNodes[offset] : null;\n  var before = offset ? node.childNodes[offset - 1] : null;\n  if (safari && after && after.contentEditable == \"false\") return setEditable(after);\n\n  if ((!after || after.contentEditable == \"false\") && (!before || before.contentEditable == \"false\")) {\n    if (after) return setEditable(after);else if (before) return setEditable(before);\n  }\n}\n\nfunction setEditable(element) {\n  element.contentEditable = \"true\";\n\n  if (safari && element.draggable) {\n    element.draggable = false;\n    element.wasDraggable = true;\n  }\n\n  return element;\n}\n\nfunction resetEditable(element) {\n  element.contentEditable = \"false\";\n\n  if (element.wasDraggable) {\n    element.draggable = true;\n    element.wasDraggable = null;\n  }\n}\n\nfunction removeClassOnSelectionChange(view) {\n  var doc = view.dom.ownerDocument;\n  doc.removeEventListener(\"selectionchange\", view.input.hideSelectionGuard);\n  var domSel = view.domSelection();\n  var node = domSel.anchorNode,\n      offset = domSel.anchorOffset;\n  doc.addEventListener(\"selectionchange\", view.input.hideSelectionGuard = function () {\n    if (domSel.anchorNode != node || domSel.anchorOffset != offset) {\n      doc.removeEventListener(\"selectionchange\", view.input.hideSelectionGuard);\n      setTimeout(function () {\n        if (!editorOwnsSelection(view) || view.state.selection.visible) view.dom.classList.remove(\"ProseMirror-hideselection\");\n      }, 20);\n    }\n  });\n}\n\nfunction selectCursorWrapper(view) {\n  var domSel = view.domSelection(),\n      range = document.createRange();\n  var node = view.cursorWrapper.dom,\n      img = node.nodeName == \"IMG\";\n  if (img) range.setEnd(node.parentNode, domIndex(node) + 1);else range.setEnd(node, 0);\n  range.collapse(false);\n  domSel.removeAllRanges();\n  domSel.addRange(range);\n\n  if (!img && !view.state.selection.visible && ie && ie_version <= 11) {\n    node.disabled = true;\n    node.disabled = false;\n  }\n}\n\nfunction syncNodeSelection(view, sel) {\n  if (sel instanceof prosemirrorState.NodeSelection) {\n    var desc = view.docView.descAt(sel.from);\n\n    if (desc != view.lastSelectedViewDesc) {\n      clearNodeSelection(view);\n      if (desc) desc.selectNode();\n      view.lastSelectedViewDesc = desc;\n    }\n  } else {\n    clearNodeSelection(view);\n  }\n}\n\nfunction clearNodeSelection(view) {\n  if (view.lastSelectedViewDesc) {\n    if (view.lastSelectedViewDesc.parent) view.lastSelectedViewDesc.deselectNode();\n    view.lastSelectedViewDesc = undefined;\n  }\n}\n\nfunction selectionBetween(view, $anchor, $head, bias) {\n  return view.someProp(\"createSelectionBetween\", function (f) {\n    return f(view, $anchor, $head);\n  }) || prosemirrorState.TextSelection.between($anchor, $head, bias);\n}\n\nfunction hasFocusAndSelection(view) {\n  if (view.editable && view.root.activeElement != view.dom) return false;\n  return hasSelection(view);\n}\n\nfunction hasSelection(view) {\n  var sel = view.domSelection();\n  if (!sel.anchorNode) return false;\n\n  try {\n    return view.dom.contains(sel.anchorNode.nodeType == 3 ? sel.anchorNode.parentNode : sel.anchorNode) && (view.editable || view.dom.contains(sel.focusNode.nodeType == 3 ? sel.focusNode.parentNode : sel.focusNode));\n  } catch (_) {\n    return false;\n  }\n}\n\nfunction anchorInRightPlace(view) {\n  var anchorDOM = view.docView.domFromPos(view.state.selection.anchor, 0);\n  var domSel = view.domSelection();\n  return isEquivalentPosition(anchorDOM.node, anchorDOM.offset, domSel.anchorNode, domSel.anchorOffset);\n}\n\nfunction moveSelectionBlock(state, dir) {\n  var _state$selection = state.selection,\n      $anchor = _state$selection.$anchor,\n      $head = _state$selection.$head;\n  var $side = dir > 0 ? $anchor.max($head) : $anchor.min($head);\n  var $start = !$side.parent.inlineContent ? $side : $side.depth ? state.doc.resolve(dir > 0 ? $side.after() : $side.before()) : null;\n  return $start && prosemirrorState.Selection.findFrom($start, dir);\n}\n\nfunction apply(view, sel) {\n  view.dispatch(view.state.tr.setSelection(sel).scrollIntoView());\n  return true;\n}\n\nfunction selectHorizontally(view, dir, mods) {\n  var sel = view.state.selection;\n\n  if (sel instanceof prosemirrorState.TextSelection) {\n    if (!sel.empty || mods.indexOf(\"s\") > -1) {\n      return false;\n    } else if (view.endOfTextblock(dir > 0 ? \"right\" : \"left\")) {\n      var next = moveSelectionBlock(view.state, dir);\n      if (next && next instanceof prosemirrorState.NodeSelection) return apply(view, next);\n      return false;\n    } else if (!(mac && mods.indexOf(\"m\") > -1)) {\n      var $head = sel.$head,\n          node = $head.textOffset ? null : dir < 0 ? $head.nodeBefore : $head.nodeAfter,\n          desc;\n      if (!node || node.isText) return false;\n      var nodePos = dir < 0 ? $head.pos - node.nodeSize : $head.pos;\n      if (!(node.isAtom || (desc = view.docView.descAt(nodePos)) && !desc.contentDOM)) return false;\n\n      if (prosemirrorState.NodeSelection.isSelectable(node)) {\n        return apply(view, new prosemirrorState.NodeSelection(dir < 0 ? view.state.doc.resolve($head.pos - node.nodeSize) : $head));\n      } else if (webkit) {\n        return apply(view, new prosemirrorState.TextSelection(view.state.doc.resolve(dir < 0 ? nodePos : nodePos + node.nodeSize)));\n      } else {\n        return false;\n      }\n    }\n  } else if (sel instanceof prosemirrorState.NodeSelection && sel.node.isInline) {\n    return apply(view, new prosemirrorState.TextSelection(dir > 0 ? sel.$to : sel.$from));\n  } else {\n    var _next = moveSelectionBlock(view.state, dir);\n\n    if (_next) return apply(view, _next);\n    return false;\n  }\n}\n\nfunction nodeLen(node) {\n  return node.nodeType == 3 ? node.nodeValue.length : node.childNodes.length;\n}\n\nfunction isIgnorable(dom) {\n  var desc = dom.pmViewDesc;\n  return desc && desc.size == 0 && (dom.nextSibling || dom.nodeName != \"BR\");\n}\n\nfunction skipIgnoredNodesLeft(view) {\n  var sel = view.domSelection();\n  var node = sel.focusNode,\n      offset = sel.focusOffset;\n  if (!node) return;\n  var moveNode,\n      moveOffset,\n      force = false;\n  if (gecko && node.nodeType == 1 && offset < nodeLen(node) && isIgnorable(node.childNodes[offset])) force = true;\n\n  for (;;) {\n    if (offset > 0) {\n      if (node.nodeType != 1) {\n        break;\n      } else {\n        var before = node.childNodes[offset - 1];\n\n        if (isIgnorable(before)) {\n          moveNode = node;\n          moveOffset = --offset;\n        } else if (before.nodeType == 3) {\n          node = before;\n          offset = node.nodeValue.length;\n        } else break;\n      }\n    } else if (isBlockNode(node)) {\n      break;\n    } else {\n      var prev = node.previousSibling;\n\n      while (prev && isIgnorable(prev)) {\n        moveNode = node.parentNode;\n        moveOffset = domIndex(prev);\n        prev = prev.previousSibling;\n      }\n\n      if (!prev) {\n        node = node.parentNode;\n        if (node == view.dom) break;\n        offset = 0;\n      } else {\n        node = prev;\n        offset = nodeLen(node);\n      }\n    }\n  }\n\n  if (force) setSelFocus(view, sel, node, offset);else if (moveNode) setSelFocus(view, sel, moveNode, moveOffset);\n}\n\nfunction skipIgnoredNodesRight(view) {\n  var sel = view.domSelection();\n  var node = sel.focusNode,\n      offset = sel.focusOffset;\n  if (!node) return;\n  var len = nodeLen(node);\n  var moveNode, moveOffset;\n\n  for (;;) {\n    if (offset < len) {\n      if (node.nodeType != 1) break;\n      var after = node.childNodes[offset];\n\n      if (isIgnorable(after)) {\n        moveNode = node;\n        moveOffset = ++offset;\n      } else break;\n    } else if (isBlockNode(node)) {\n      break;\n    } else {\n      var next = node.nextSibling;\n\n      while (next && isIgnorable(next)) {\n        moveNode = next.parentNode;\n        moveOffset = domIndex(next) + 1;\n        next = next.nextSibling;\n      }\n\n      if (!next) {\n        node = node.parentNode;\n        if (node == view.dom) break;\n        offset = len = 0;\n      } else {\n        node = next;\n        offset = 0;\n        len = nodeLen(node);\n      }\n    }\n  }\n\n  if (moveNode) setSelFocus(view, sel, moveNode, moveOffset);\n}\n\nfunction isBlockNode(dom) {\n  var desc = dom.pmViewDesc;\n  return desc && desc.node && desc.node.isBlock;\n}\n\nfunction setSelFocus(view, sel, node, offset) {\n  if (selectionCollapsed(sel)) {\n    var range = document.createRange();\n    range.setEnd(node, offset);\n    range.setStart(node, offset);\n    sel.removeAllRanges();\n    sel.addRange(range);\n  } else if (sel.extend) {\n    sel.extend(node, offset);\n  }\n\n  view.domObserver.setCurSelection();\n  var state = view.state;\n  setTimeout(function () {\n    if (view.state == state) selectionToDOM(view);\n  }, 50);\n}\n\nfunction selectVertically(view, dir, mods) {\n  var sel = view.state.selection;\n  if (sel instanceof prosemirrorState.TextSelection && !sel.empty || mods.indexOf(\"s\") > -1) return false;\n  if (mac && mods.indexOf(\"m\") > -1) return false;\n  var $from = sel.$from,\n      $to = sel.$to;\n\n  if (!$from.parent.inlineContent || view.endOfTextblock(dir < 0 ? \"up\" : \"down\")) {\n    var next = moveSelectionBlock(view.state, dir);\n    if (next && next instanceof prosemirrorState.NodeSelection) return apply(view, next);\n  }\n\n  if (!$from.parent.inlineContent) {\n    var side = dir < 0 ? $from : $to;\n    var beyond = sel instanceof prosemirrorState.AllSelection ? prosemirrorState.Selection.near(side, dir) : prosemirrorState.Selection.findFrom(side, dir);\n    return beyond ? apply(view, beyond) : false;\n  }\n\n  return false;\n}\n\nfunction stopNativeHorizontalDelete(view, dir) {\n  if (!(view.state.selection instanceof prosemirrorState.TextSelection)) return true;\n  var _view$state$selection2 = view.state.selection,\n      $head = _view$state$selection2.$head,\n      $anchor = _view$state$selection2.$anchor,\n      empty = _view$state$selection2.empty;\n  if (!$head.sameParent($anchor)) return true;\n  if (!empty) return false;\n  if (view.endOfTextblock(dir > 0 ? \"forward\" : \"backward\")) return true;\n  var nextNode = !$head.textOffset && (dir < 0 ? $head.nodeBefore : $head.nodeAfter);\n\n  if (nextNode && !nextNode.isText) {\n    var tr = view.state.tr;\n    if (dir < 0) tr[\"delete\"]($head.pos - nextNode.nodeSize, $head.pos);else tr[\"delete\"]($head.pos, $head.pos + nextNode.nodeSize);\n    view.dispatch(tr);\n    return true;\n  }\n\n  return false;\n}\n\nfunction switchEditable(view, node, state) {\n  view.domObserver.stop();\n  node.contentEditable = state;\n  view.domObserver.start();\n}\n\nfunction safariDownArrowBug(view) {\n  if (!safari || view.state.selection.$head.parentOffset > 0) return false;\n\n  var _view$domSelection = view.domSelection(),\n      focusNode = _view$domSelection.focusNode,\n      focusOffset = _view$domSelection.focusOffset;\n\n  if (focusNode && focusNode.nodeType == 1 && focusOffset == 0 && focusNode.firstChild && focusNode.firstChild.contentEditable == \"false\") {\n    var child = focusNode.firstChild;\n    switchEditable(view, child, \"true\");\n    setTimeout(function () {\n      return switchEditable(view, child, \"false\");\n    }, 20);\n  }\n\n  return false;\n}\n\nfunction getMods(event) {\n  var result = \"\";\n  if (event.ctrlKey) result += \"c\";\n  if (event.metaKey) result += \"m\";\n  if (event.altKey) result += \"a\";\n  if (event.shiftKey) result += \"s\";\n  return result;\n}\n\nfunction captureKeyDown(view, event) {\n  var code = event.keyCode,\n      mods = getMods(event);\n\n  if (code == 8 || mac && code == 72 && mods == \"c\") {\n    return stopNativeHorizontalDelete(view, -1) || skipIgnoredNodesLeft(view);\n  } else if (code == 46 || mac && code == 68 && mods == \"c\") {\n    return stopNativeHorizontalDelete(view, 1) || skipIgnoredNodesRight(view);\n  } else if (code == 13 || code == 27) {\n    return true;\n  } else if (code == 37 || mac && code == 66 && mods == \"c\") {\n    return selectHorizontally(view, -1, mods) || skipIgnoredNodesLeft(view);\n  } else if (code == 39 || mac && code == 70 && mods == \"c\") {\n    return selectHorizontally(view, 1, mods) || skipIgnoredNodesRight(view);\n  } else if (code == 38 || mac && code == 80 && mods == \"c\") {\n    return selectVertically(view, -1, mods) || skipIgnoredNodesLeft(view);\n  } else if (code == 40 || mac && code == 78 && mods == \"c\") {\n    return safariDownArrowBug(view) || selectVertically(view, 1, mods) || skipIgnoredNodesRight(view);\n  } else if (mods == (mac ? \"m\" : \"c\") && (code == 66 || code == 73 || code == 89 || code == 90)) {\n    return true;\n  }\n\n  return false;\n}\n\nfunction serializeForClipboard(view, slice) {\n  var context = [],\n      content = slice.content,\n      openStart = slice.openStart,\n      openEnd = slice.openEnd;\n\n  while (openStart > 1 && openEnd > 1 && content.childCount == 1 && content.firstChild.childCount == 1) {\n    openStart--;\n    openEnd--;\n    var node = content.firstChild;\n    context.push(node.type.name, node.attrs != node.type.defaultAttrs ? node.attrs : null);\n    content = node.content;\n  }\n\n  var serializer = view.someProp(\"clipboardSerializer\") || prosemirrorModel.DOMSerializer.fromSchema(view.state.schema);\n  var doc = detachedDoc(),\n      wrap = doc.createElement(\"div\");\n  wrap.appendChild(serializer.serializeFragment(content, {\n    document: doc\n  }));\n  var firstChild = wrap.firstChild,\n      needsWrap,\n      wrappers = 0;\n\n  while (firstChild && firstChild.nodeType == 1 && (needsWrap = wrapMap[firstChild.nodeName.toLowerCase()])) {\n    for (var i = needsWrap.length - 1; i >= 0; i--) {\n      var wrapper = doc.createElement(needsWrap[i]);\n\n      while (wrap.firstChild) {\n        wrapper.appendChild(wrap.firstChild);\n      }\n\n      wrap.appendChild(wrapper);\n      wrappers++;\n    }\n\n    firstChild = wrap.firstChild;\n  }\n\n  if (firstChild && firstChild.nodeType == 1) firstChild.setAttribute(\"data-pm-slice\", \"\".concat(openStart, \" \").concat(openEnd).concat(wrappers ? \" -\".concat(wrappers) : \"\", \" \").concat(JSON.stringify(context)));\n  var text = view.someProp(\"clipboardTextSerializer\", function (f) {\n    return f(slice);\n  }) || slice.content.textBetween(0, slice.content.size, \"\\n\\n\");\n  return {\n    dom: wrap,\n    text: text\n  };\n}\n\nfunction parseFromClipboard(view, text, html, plainText, $context) {\n  var inCode = $context.parent.type.spec.code;\n  var dom, slice;\n  if (!html && !text) return null;\n  var asText = text && (plainText || inCode || !html);\n\n  if (asText) {\n    view.someProp(\"transformPastedText\", function (f) {\n      text = f(text, inCode || plainText);\n    });\n    if (inCode) return text ? new prosemirrorModel.Slice(prosemirrorModel.Fragment.from(view.state.schema.text(text.replace(/\\r\\n?/g, \"\\n\"))), 0, 0) : prosemirrorModel.Slice.empty;\n    var parsed = view.someProp(\"clipboardTextParser\", function (f) {\n      return f(text, $context, plainText);\n    });\n\n    if (parsed) {\n      slice = parsed;\n    } else {\n      var marks = $context.marks();\n      var schema = view.state.schema,\n          serializer = prosemirrorModel.DOMSerializer.fromSchema(schema);\n      dom = document.createElement(\"div\");\n      text.split(/(?:\\r\\n?|\\n)+/).forEach(function (block) {\n        var p = dom.appendChild(document.createElement(\"p\"));\n        if (block) p.appendChild(serializer.serializeNode(schema.text(block, marks)));\n      });\n    }\n  } else {\n    view.someProp(\"transformPastedHTML\", function (f) {\n      html = f(html);\n    });\n    dom = readHTML(html);\n    if (webkit) restoreReplacedSpaces(dom);\n  }\n\n  var contextNode = dom && dom.querySelector(\"[data-pm-slice]\");\n  var sliceData = contextNode && /^(\\d+) (\\d+)(?: -(\\d+))? (.*)/.exec(contextNode.getAttribute(\"data-pm-slice\") || \"\");\n  if (sliceData && sliceData[3]) for (var i = +sliceData[3]; i > 0 && dom.firstChild; i--) {\n    dom = dom.firstChild;\n  }\n\n  if (!slice) {\n    var parser = view.someProp(\"clipboardParser\") || view.someProp(\"domParser\") || prosemirrorModel.DOMParser.fromSchema(view.state.schema);\n    slice = parser.parseSlice(dom, {\n      preserveWhitespace: !!(asText || sliceData),\n      context: $context,\n      ruleFromNode: function ruleFromNode(dom) {\n        if (dom.nodeName == \"BR\" && !dom.nextSibling && dom.parentNode && !inlineParents.test(dom.parentNode.nodeName)) return {\n          ignore: true\n        };\n        return null;\n      }\n    });\n  }\n\n  if (sliceData) {\n    slice = addContext(closeSlice(slice, +sliceData[1], +sliceData[2]), sliceData[4]);\n  } else {\n    slice = prosemirrorModel.Slice.maxOpen(normalizeSiblings(slice.content, $context), true);\n\n    if (slice.openStart || slice.openEnd) {\n      var openStart = 0,\n          openEnd = 0;\n\n      for (var node = slice.content.firstChild; openStart < slice.openStart && !node.type.spec.isolating; openStart++, node = node.firstChild) {}\n\n      for (var _node = slice.content.lastChild; openEnd < slice.openEnd && !_node.type.spec.isolating; openEnd++, _node = _node.lastChild) {}\n\n      slice = closeSlice(slice, openStart, openEnd);\n    }\n  }\n\n  view.someProp(\"transformPasted\", function (f) {\n    slice = f(slice);\n  });\n  return slice;\n}\n\nvar inlineParents = /^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;\n\nfunction normalizeSiblings(fragment, $context) {\n  if (fragment.childCount < 2) return fragment;\n\n  var _loop = function _loop(d) {\n    var parent = $context.node(d);\n    var match = parent.contentMatchAt($context.index(d));\n    var lastWrap = void 0,\n        result = [];\n    fragment.forEach(function (node) {\n      if (!result) return;\n      var wrap = match.findWrapping(node.type),\n          inLast;\n      if (!wrap) return result = null;\n\n      if (inLast = result.length && lastWrap.length && addToSibling(wrap, lastWrap, node, result[result.length - 1], 0)) {\n        result[result.length - 1] = inLast;\n      } else {\n        if (result.length) result[result.length - 1] = closeRight(result[result.length - 1], lastWrap.length);\n        var wrapped = withWrappers(node, wrap);\n        result.push(wrapped);\n        match = match.matchType(wrapped.type);\n        lastWrap = wrap;\n      }\n    });\n    if (result) return {\n      v: prosemirrorModel.Fragment.from(result)\n    };\n  };\n\n  for (var d = $context.depth; d >= 0; d--) {\n    var _ret = _loop(d);\n\n    if (_typeof(_ret) === \"object\") return _ret.v;\n  }\n\n  return fragment;\n}\n\nfunction withWrappers(node, wrap) {\n  var from = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n\n  for (var i = wrap.length - 1; i >= from; i--) {\n    node = wrap[i].create(null, prosemirrorModel.Fragment.from(node));\n  }\n\n  return node;\n}\n\nfunction addToSibling(wrap, lastWrap, node, sibling, depth) {\n  if (depth < wrap.length && depth < lastWrap.length && wrap[depth] == lastWrap[depth]) {\n    var inner = addToSibling(wrap, lastWrap, node, sibling.lastChild, depth + 1);\n    if (inner) return sibling.copy(sibling.content.replaceChild(sibling.childCount - 1, inner));\n    var match = sibling.contentMatchAt(sibling.childCount);\n    if (match.matchType(depth == wrap.length - 1 ? node.type : wrap[depth + 1])) return sibling.copy(sibling.content.append(prosemirrorModel.Fragment.from(withWrappers(node, wrap, depth + 1))));\n  }\n}\n\nfunction closeRight(node, depth) {\n  if (depth == 0) return node;\n  var fragment = node.content.replaceChild(node.childCount - 1, closeRight(node.lastChild, depth - 1));\n  var fill = node.contentMatchAt(node.childCount).fillBefore(prosemirrorModel.Fragment.empty, true);\n  return node.copy(fragment.append(fill));\n}\n\nfunction closeRange(fragment, side, from, to, depth, openEnd) {\n  var node = side < 0 ? fragment.firstChild : fragment.lastChild,\n      inner = node.content;\n  if (depth < to - 1) inner = closeRange(inner, side, from, to, depth + 1, openEnd);\n  if (depth >= from) inner = side < 0 ? node.contentMatchAt(0).fillBefore(inner, fragment.childCount > 1 || openEnd <= depth).append(inner) : inner.append(node.contentMatchAt(node.childCount).fillBefore(prosemirrorModel.Fragment.empty, true));\n  return fragment.replaceChild(side < 0 ? 0 : fragment.childCount - 1, node.copy(inner));\n}\n\nfunction closeSlice(slice, openStart, openEnd) {\n  if (openStart < slice.openStart) slice = new prosemirrorModel.Slice(closeRange(slice.content, -1, openStart, slice.openStart, 0, slice.openEnd), openStart, slice.openEnd);\n  if (openEnd < slice.openEnd) slice = new prosemirrorModel.Slice(closeRange(slice.content, 1, openEnd, slice.openEnd, 0, 0), slice.openStart, openEnd);\n  return slice;\n}\n\nvar wrapMap = {\n  thead: [\"table\"],\n  tbody: [\"table\"],\n  tfoot: [\"table\"],\n  caption: [\"table\"],\n  colgroup: [\"table\"],\n  col: [\"table\", \"colgroup\"],\n  tr: [\"table\", \"tbody\"],\n  td: [\"table\", \"tbody\", \"tr\"],\n  th: [\"table\", \"tbody\", \"tr\"]\n};\nvar _detachedDoc = null;\n\nfunction detachedDoc() {\n  return _detachedDoc || (_detachedDoc = document.implementation.createHTMLDocument(\"title\"));\n}\n\nfunction readHTML(html) {\n  var metas = /^(\\s*<meta [^>]*>)*/.exec(html);\n  if (metas) html = html.slice(metas[0].length);\n  var elt = detachedDoc().createElement(\"div\");\n  var firstTag = /<([a-z][^>\\s]+)/i.exec(html),\n      wrap;\n  if (wrap = firstTag && wrapMap[firstTag[1].toLowerCase()]) html = wrap.map(function (n) {\n    return \"<\" + n + \">\";\n  }).join(\"\") + html + wrap.map(function (n) {\n    return \"</\" + n + \">\";\n  }).reverse().join(\"\");\n  elt.innerHTML = html;\n  if (wrap) for (var i = 0; i < wrap.length; i++) {\n    elt = elt.querySelector(wrap[i]) || elt;\n  }\n  return elt;\n}\n\nfunction restoreReplacedSpaces(dom) {\n  var nodes = dom.querySelectorAll(chrome ? \"span:not([class]):not([style])\" : \"span.Apple-converted-space\");\n\n  for (var i = 0; i < nodes.length; i++) {\n    var node = nodes[i];\n    if (node.childNodes.length == 1 && node.textContent == \"\\xA0\" && node.parentNode) node.parentNode.replaceChild(dom.ownerDocument.createTextNode(\" \"), node);\n  }\n}\n\nfunction addContext(slice, context) {\n  if (!slice.size) return slice;\n  var schema = slice.content.firstChild.type.schema,\n      array;\n\n  try {\n    array = JSON.parse(context);\n  } catch (e) {\n    return slice;\n  }\n\n  var content = slice.content,\n      openStart = slice.openStart,\n      openEnd = slice.openEnd;\n\n  for (var i = array.length - 2; i >= 0; i -= 2) {\n    var type = schema.nodes[array[i]];\n    if (!type || type.hasRequiredAttrs()) break;\n    content = prosemirrorModel.Fragment.from(type.create(array[i + 1], content));\n    openStart++;\n    openEnd++;\n  }\n\n  return new prosemirrorModel.Slice(content, openStart, openEnd);\n}\n\nvar handlers = {};\nvar editHandlers = {};\n\nvar InputState = _createClass(function InputState() {\n  _classCallCheck(this, InputState);\n\n  this.shiftKey = false;\n  this.mouseDown = null;\n  this.lastKeyCode = null;\n  this.lastKeyCodeTime = 0;\n  this.lastClick = {\n    time: 0,\n    x: 0,\n    y: 0,\n    type: \"\"\n  };\n  this.lastSelectionOrigin = null;\n  this.lastSelectionTime = 0;\n  this.lastIOSEnter = 0;\n  this.lastIOSEnterFallbackTimeout = -1;\n  this.lastAndroidDelete = 0;\n  this.composing = false;\n  this.composingTimeout = -1;\n  this.compositionNodes = [];\n  this.compositionEndedAt = -2e8;\n  this.domChangeCount = 0;\n  this.eventHandlers = Object.create(null);\n  this.hideSelectionGuard = null;\n});\n\nfunction initInput(view) {\n  var _loop2 = function _loop2(event) {\n    var handler = handlers[event];\n    view.dom.addEventListener(event, view.input.eventHandlers[event] = function (event) {\n      if (eventBelongsToView(view, event) && !runCustomHandler(view, event) && (view.editable || !(event.type in editHandlers))) handler(view, event);\n    });\n  };\n\n  for (var event in handlers) {\n    _loop2(event);\n  }\n\n  if (safari) view.dom.addEventListener(\"input\", function () {\n    return null;\n  });\n  ensureListeners(view);\n}\n\nfunction setSelectionOrigin(view, origin) {\n  view.input.lastSelectionOrigin = origin;\n  view.input.lastSelectionTime = Date.now();\n}\n\nfunction destroyInput(view) {\n  view.domObserver.stop();\n\n  for (var type in view.input.eventHandlers) {\n    view.dom.removeEventListener(type, view.input.eventHandlers[type]);\n  }\n\n  clearTimeout(view.input.composingTimeout);\n  clearTimeout(view.input.lastIOSEnterFallbackTimeout);\n}\n\nfunction ensureListeners(view) {\n  view.someProp(\"handleDOMEvents\", function (currentHandlers) {\n    for (var type in currentHandlers) {\n      if (!view.input.eventHandlers[type]) view.dom.addEventListener(type, view.input.eventHandlers[type] = function (event) {\n        return runCustomHandler(view, event);\n      });\n    }\n  });\n}\n\nfunction runCustomHandler(view, event) {\n  return view.someProp(\"handleDOMEvents\", function (handlers) {\n    var handler = handlers[event.type];\n    return handler ? handler(view, event) || event.defaultPrevented : false;\n  });\n}\n\nfunction eventBelongsToView(view, event) {\n  if (!event.bubbles) return true;\n  if (event.defaultPrevented) return false;\n\n  for (var node = event.target; node != view.dom; node = node.parentNode) {\n    if (!node || node.nodeType == 11 || node.pmViewDesc && node.pmViewDesc.stopEvent(event)) return false;\n  }\n\n  return true;\n}\n\nfunction _dispatchEvent(view, event) {\n  if (!runCustomHandler(view, event) && handlers[event.type] && (view.editable || !(event.type in editHandlers))) handlers[event.type](view, event);\n}\n\neditHandlers.keydown = function (view, _event) {\n  var event = _event;\n  view.input.shiftKey = event.keyCode == 16 || event.shiftKey;\n  if (inOrNearComposition(view, event)) return;\n  view.input.lastKeyCode = event.keyCode;\n  view.input.lastKeyCodeTime = Date.now();\n  if (android && chrome && event.keyCode == 13) return;\n  if (event.keyCode != 229) view.domObserver.forceFlush();\n\n  if (ios && event.keyCode == 13 && !event.ctrlKey && !event.altKey && !event.metaKey) {\n    var now = Date.now();\n    view.input.lastIOSEnter = now;\n    view.input.lastIOSEnterFallbackTimeout = setTimeout(function () {\n      if (view.input.lastIOSEnter == now) {\n        view.someProp(\"handleKeyDown\", function (f) {\n          return f(view, keyEvent(13, \"Enter\"));\n        });\n        view.input.lastIOSEnter = 0;\n      }\n    }, 200);\n  } else if (view.someProp(\"handleKeyDown\", function (f) {\n    return f(view, event);\n  }) || captureKeyDown(view, event)) {\n    event.preventDefault();\n  } else {\n    setSelectionOrigin(view, \"key\");\n  }\n};\n\neditHandlers.keyup = function (view, event) {\n  if (event.keyCode == 16) view.input.shiftKey = false;\n};\n\neditHandlers.keypress = function (view, _event) {\n  var event = _event;\n  if (inOrNearComposition(view, event) || !event.charCode || event.ctrlKey && !event.altKey || mac && event.metaKey) return;\n\n  if (view.someProp(\"handleKeyPress\", function (f) {\n    return f(view, event);\n  })) {\n    event.preventDefault();\n    return;\n  }\n\n  var sel = view.state.selection;\n\n  if (!(sel instanceof prosemirrorState.TextSelection) || !sel.$from.sameParent(sel.$to)) {\n    var text = String.fromCharCode(event.charCode);\n    if (!view.someProp(\"handleTextInput\", function (f) {\n      return f(view, sel.$from.pos, sel.$to.pos, text);\n    })) view.dispatch(view.state.tr.insertText(text).scrollIntoView());\n    event.preventDefault();\n  }\n};\n\nfunction eventCoords(event) {\n  return {\n    left: event.clientX,\n    top: event.clientY\n  };\n}\n\nfunction isNear(event, click) {\n  var dx = click.x - event.clientX,\n      dy = click.y - event.clientY;\n  return dx * dx + dy * dy < 100;\n}\n\nfunction runHandlerOnContext(view, propName, pos, inside, event) {\n  if (inside == -1) return false;\n  var $pos = view.state.doc.resolve(inside);\n\n  var _loop3 = function _loop3(i) {\n    if (view.someProp(propName, function (f) {\n      return i > $pos.depth ? f(view, pos, $pos.nodeAfter, $pos.before(i), event, true) : f(view, pos, $pos.node(i), $pos.before(i), event, false);\n    })) return {\n      v: true\n    };\n  };\n\n  for (var i = $pos.depth + 1; i > 0; i--) {\n    var _ret2 = _loop3(i);\n\n    if (_typeof(_ret2) === \"object\") return _ret2.v;\n  }\n\n  return false;\n}\n\nfunction updateSelection(view, selection, origin) {\n  if (!view.focused) view.focus();\n  var tr = view.state.tr.setSelection(selection);\n  if (origin == \"pointer\") tr.setMeta(\"pointer\", true);\n  view.dispatch(tr);\n}\n\nfunction selectClickedLeaf(view, inside) {\n  if (inside == -1) return false;\n  var $pos = view.state.doc.resolve(inside),\n      node = $pos.nodeAfter;\n\n  if (node && node.isAtom && prosemirrorState.NodeSelection.isSelectable(node)) {\n    updateSelection(view, new prosemirrorState.NodeSelection($pos), \"pointer\");\n    return true;\n  }\n\n  return false;\n}\n\nfunction selectClickedNode(view, inside) {\n  if (inside == -1) return false;\n  var sel = view.state.selection,\n      selectedNode,\n      selectAt;\n  if (sel instanceof prosemirrorState.NodeSelection) selectedNode = sel.node;\n  var $pos = view.state.doc.resolve(inside);\n\n  for (var i = $pos.depth + 1; i > 0; i--) {\n    var node = i > $pos.depth ? $pos.nodeAfter : $pos.node(i);\n\n    if (prosemirrorState.NodeSelection.isSelectable(node)) {\n      if (selectedNode && sel.$from.depth > 0 && i >= sel.$from.depth && $pos.before(sel.$from.depth + 1) == sel.$from.pos) selectAt = $pos.before(sel.$from.depth);else selectAt = $pos.before(i);\n      break;\n    }\n  }\n\n  if (selectAt != null) {\n    updateSelection(view, prosemirrorState.NodeSelection.create(view.state.doc, selectAt), \"pointer\");\n    return true;\n  } else {\n    return false;\n  }\n}\n\nfunction handleSingleClick(view, pos, inside, event, selectNode) {\n  return runHandlerOnContext(view, \"handleClickOn\", pos, inside, event) || view.someProp(\"handleClick\", function (f) {\n    return f(view, pos, event);\n  }) || (selectNode ? selectClickedNode(view, inside) : selectClickedLeaf(view, inside));\n}\n\nfunction handleDoubleClick(view, pos, inside, event) {\n  return runHandlerOnContext(view, \"handleDoubleClickOn\", pos, inside, event) || view.someProp(\"handleDoubleClick\", function (f) {\n    return f(view, pos, event);\n  });\n}\n\nfunction handleTripleClick(view, pos, inside, event) {\n  return runHandlerOnContext(view, \"handleTripleClickOn\", pos, inside, event) || view.someProp(\"handleTripleClick\", function (f) {\n    return f(view, pos, event);\n  }) || defaultTripleClick(view, inside, event);\n}\n\nfunction defaultTripleClick(view, inside, event) {\n  if (event.button != 0) return false;\n  var doc = view.state.doc;\n\n  if (inside == -1) {\n    if (doc.inlineContent) {\n      updateSelection(view, prosemirrorState.TextSelection.create(doc, 0, doc.content.size), \"pointer\");\n      return true;\n    }\n\n    return false;\n  }\n\n  var $pos = doc.resolve(inside);\n\n  for (var i = $pos.depth + 1; i > 0; i--) {\n    var node = i > $pos.depth ? $pos.nodeAfter : $pos.node(i);\n    var nodePos = $pos.before(i);\n    if (node.inlineContent) updateSelection(view, prosemirrorState.TextSelection.create(doc, nodePos + 1, nodePos + 1 + node.content.size), \"pointer\");else if (prosemirrorState.NodeSelection.isSelectable(node)) updateSelection(view, prosemirrorState.NodeSelection.create(doc, nodePos), \"pointer\");else continue;\n    return true;\n  }\n}\n\nfunction forceDOMFlush(view) {\n  return endComposition(view);\n}\n\nvar selectNodeModifier = mac ? \"metaKey\" : \"ctrlKey\";\n\nhandlers.mousedown = function (view, _event) {\n  var event = _event;\n  view.input.shiftKey = event.shiftKey;\n  var flushed = forceDOMFlush(view);\n  var now = Date.now(),\n      type = \"singleClick\";\n\n  if (now - view.input.lastClick.time < 500 && isNear(event, view.input.lastClick) && !event[selectNodeModifier]) {\n    if (view.input.lastClick.type == \"singleClick\") type = \"doubleClick\";else if (view.input.lastClick.type == \"doubleClick\") type = \"tripleClick\";\n  }\n\n  view.input.lastClick = {\n    time: now,\n    x: event.clientX,\n    y: event.clientY,\n    type: type\n  };\n  var pos = view.posAtCoords(eventCoords(event));\n  if (!pos) return;\n\n  if (type == \"singleClick\") {\n    if (view.input.mouseDown) view.input.mouseDown.done();\n    view.input.mouseDown = new MouseDown(view, pos, event, !!flushed);\n  } else if ((type == \"doubleClick\" ? handleDoubleClick : handleTripleClick)(view, pos.pos, pos.inside, event)) {\n    event.preventDefault();\n  } else {\n    setSelectionOrigin(view, \"pointer\");\n  }\n};\n\nvar MouseDown = function () {\n  function MouseDown(view, pos, event, flushed) {\n    var _this8 = this;\n\n    _classCallCheck(this, MouseDown);\n\n    this.view = view;\n    this.pos = pos;\n    this.event = event;\n    this.flushed = flushed;\n    this.delayedSelectionSync = false;\n    this.mightDrag = null;\n    this.startDoc = view.state.doc;\n    this.selectNode = !!event[selectNodeModifier];\n    this.allowDefault = event.shiftKey;\n    var targetNode, targetPos;\n\n    if (pos.inside > -1) {\n      targetNode = view.state.doc.nodeAt(pos.inside);\n      targetPos = pos.inside;\n    } else {\n      var $pos = view.state.doc.resolve(pos.pos);\n      targetNode = $pos.parent;\n      targetPos = $pos.depth ? $pos.before() : 0;\n    }\n\n    var target = flushed ? null : event.target;\n    var targetDesc = target ? view.docView.nearestDesc(target, true) : null;\n    this.target = targetDesc ? targetDesc.dom : null;\n    var selection = view.state.selection;\n    if (event.button == 0 && targetNode.type.spec.draggable && targetNode.type.spec.selectable !== false || selection instanceof prosemirrorState.NodeSelection && selection.from <= targetPos && selection.to > targetPos) this.mightDrag = {\n      node: targetNode,\n      pos: targetPos,\n      addAttr: !!(this.target && !this.target.draggable),\n      setUneditable: !!(this.target && gecko && !this.target.hasAttribute(\"contentEditable\"))\n    };\n\n    if (this.target && this.mightDrag && (this.mightDrag.addAttr || this.mightDrag.setUneditable)) {\n      this.view.domObserver.stop();\n      if (this.mightDrag.addAttr) this.target.draggable = true;\n      if (this.mightDrag.setUneditable) setTimeout(function () {\n        if (_this8.view.input.mouseDown == _this8) _this8.target.setAttribute(\"contentEditable\", \"false\");\n      }, 20);\n      this.view.domObserver.start();\n    }\n\n    view.root.addEventListener(\"mouseup\", this.up = this.up.bind(this));\n    view.root.addEventListener(\"mousemove\", this.move = this.move.bind(this));\n    setSelectionOrigin(view, \"pointer\");\n  }\n\n  _createClass(MouseDown, [{\n    key: \"done\",\n    value: function done() {\n      var _this9 = this;\n\n      this.view.root.removeEventListener(\"mouseup\", this.up);\n      this.view.root.removeEventListener(\"mousemove\", this.move);\n\n      if (this.mightDrag && this.target) {\n        this.view.domObserver.stop();\n        if (this.mightDrag.addAttr) this.target.removeAttribute(\"draggable\");\n        if (this.mightDrag.setUneditable) this.target.removeAttribute(\"contentEditable\");\n        this.view.domObserver.start();\n      }\n\n      if (this.delayedSelectionSync) setTimeout(function () {\n        return selectionToDOM(_this9.view);\n      });\n      this.view.input.mouseDown = null;\n    }\n  }, {\n    key: \"up\",\n    value: function up(event) {\n      this.done();\n      if (!this.view.dom.contains(event.target)) return;\n      var pos = this.pos;\n      if (this.view.state.doc != this.startDoc) pos = this.view.posAtCoords(eventCoords(event));\n\n      if (this.allowDefault || !pos) {\n        setSelectionOrigin(this.view, \"pointer\");\n      } else if (handleSingleClick(this.view, pos.pos, pos.inside, event, this.selectNode)) {\n        event.preventDefault();\n      } else if (event.button == 0 && (this.flushed || safari && this.mightDrag && !this.mightDrag.node.isAtom || chrome && !(this.view.state.selection instanceof prosemirrorState.TextSelection) && Math.min(Math.abs(pos.pos - this.view.state.selection.from), Math.abs(pos.pos - this.view.state.selection.to)) <= 2)) {\n        updateSelection(this.view, prosemirrorState.Selection.near(this.view.state.doc.resolve(pos.pos)), \"pointer\");\n        event.preventDefault();\n      } else {\n        setSelectionOrigin(this.view, \"pointer\");\n      }\n    }\n  }, {\n    key: \"move\",\n    value: function move(event) {\n      if (!this.allowDefault && (Math.abs(this.event.x - event.clientX) > 4 || Math.abs(this.event.y - event.clientY) > 4)) this.allowDefault = true;\n      setSelectionOrigin(this.view, \"pointer\");\n      if (event.buttons == 0) this.done();\n    }\n  }]);\n\n  return MouseDown;\n}();\n\nhandlers.touchdown = function (view) {\n  forceDOMFlush(view);\n  setSelectionOrigin(view, \"pointer\");\n};\n\nhandlers.contextmenu = function (view) {\n  return forceDOMFlush(view);\n};\n\nfunction inOrNearComposition(view, event) {\n  if (view.composing) return true;\n\n  if (safari && Math.abs(event.timeStamp - view.input.compositionEndedAt) < 500) {\n    view.input.compositionEndedAt = -2e8;\n    return true;\n  }\n\n  return false;\n}\n\nvar timeoutComposition = android ? 5000 : -1;\n\neditHandlers.compositionstart = editHandlers.compositionupdate = function (view) {\n  if (!view.composing) {\n    view.domObserver.flush();\n    var state = view.state,\n        $pos = state.selection.$from;\n\n    if (state.selection.empty && (state.storedMarks || !$pos.textOffset && $pos.parentOffset && $pos.nodeBefore.marks.some(function (m) {\n      return m.type.spec.inclusive === false;\n    }))) {\n      view.markCursor = view.state.storedMarks || $pos.marks();\n      endComposition(view, true);\n      view.markCursor = null;\n    } else {\n      endComposition(view);\n\n      if (gecko && state.selection.empty && $pos.parentOffset && !$pos.textOffset && $pos.nodeBefore.marks.length) {\n        var sel = view.domSelection();\n\n        for (var node = sel.focusNode, offset = sel.focusOffset; node && node.nodeType == 1 && offset != 0;) {\n          var before = offset < 0 ? node.lastChild : node.childNodes[offset - 1];\n          if (!before) break;\n\n          if (before.nodeType == 3) {\n            sel.collapse(before, before.nodeValue.length);\n            break;\n          } else {\n            node = before;\n            offset = -1;\n          }\n        }\n      }\n    }\n\n    view.input.composing = true;\n  }\n\n  scheduleComposeEnd(view, timeoutComposition);\n};\n\neditHandlers.compositionend = function (view, event) {\n  if (view.composing) {\n    view.input.composing = false;\n    view.input.compositionEndedAt = event.timeStamp;\n    scheduleComposeEnd(view, 20);\n  }\n};\n\nfunction scheduleComposeEnd(view, delay) {\n  clearTimeout(view.input.composingTimeout);\n  if (delay > -1) view.input.composingTimeout = setTimeout(function () {\n    return endComposition(view);\n  }, delay);\n}\n\nfunction clearComposition(view) {\n  if (view.composing) {\n    view.input.composing = false;\n    view.input.compositionEndedAt = timestampFromCustomEvent();\n  }\n\n  while (view.input.compositionNodes.length > 0) {\n    view.input.compositionNodes.pop().markParentsDirty();\n  }\n}\n\nfunction timestampFromCustomEvent() {\n  var event = document.createEvent(\"Event\");\n  event.initEvent(\"event\", true, true);\n  return event.timeStamp;\n}\n\nfunction endComposition(view) {\n  var forceUpdate = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  if (android && view.domObserver.flushingSoon >= 0) return;\n  view.domObserver.forceFlush();\n  clearComposition(view);\n\n  if (forceUpdate || view.docView && view.docView.dirty) {\n    var sel = selectionFromDOM(view);\n    if (sel && !sel.eq(view.state.selection)) view.dispatch(view.state.tr.setSelection(sel));else view.updateState(view.state);\n    return true;\n  }\n\n  return false;\n}\n\nfunction captureCopy(view, dom) {\n  if (!view.dom.parentNode) return;\n  var wrap = view.dom.parentNode.appendChild(document.createElement(\"div\"));\n  wrap.appendChild(dom);\n  wrap.style.cssText = \"position: fixed; left: -10000px; top: 10px\";\n  var sel = getSelection(),\n      range = document.createRange();\n  range.selectNodeContents(dom);\n  view.dom.blur();\n  sel.removeAllRanges();\n  sel.addRange(range);\n  setTimeout(function () {\n    if (wrap.parentNode) wrap.parentNode.removeChild(wrap);\n    view.focus();\n  }, 50);\n}\n\nvar brokenClipboardAPI = ie && ie_version < 15 || ios && webkit_version < 604;\n\nhandlers.copy = editHandlers.cut = function (view, _event) {\n  var event = _event;\n  var sel = view.state.selection,\n      cut = event.type == \"cut\";\n  if (sel.empty) return;\n  var data = brokenClipboardAPI ? null : event.clipboardData;\n\n  var slice = sel.content(),\n      _serializeForClipboar = serializeForClipboard(view, slice),\n      dom = _serializeForClipboar.dom,\n      text = _serializeForClipboar.text;\n\n  if (data) {\n    event.preventDefault();\n    data.clearData();\n    data.setData(\"text/html\", dom.innerHTML);\n    data.setData(\"text/plain\", text);\n  } else {\n    captureCopy(view, dom);\n  }\n\n  if (cut) view.dispatch(view.state.tr.deleteSelection().scrollIntoView().setMeta(\"uiEvent\", \"cut\"));\n};\n\nfunction sliceSingleNode(slice) {\n  return slice.openStart == 0 && slice.openEnd == 0 && slice.content.childCount == 1 ? slice.content.firstChild : null;\n}\n\nfunction capturePaste(view, event) {\n  if (!view.dom.parentNode) return;\n  var plainText = view.input.shiftKey || view.state.selection.$from.parent.type.spec.code;\n  var target = view.dom.parentNode.appendChild(document.createElement(plainText ? \"textarea\" : \"div\"));\n  if (!plainText) target.contentEditable = \"true\";\n  target.style.cssText = \"position: fixed; left: -10000px; top: 10px\";\n  target.focus();\n  setTimeout(function () {\n    view.focus();\n    if (target.parentNode) target.parentNode.removeChild(target);\n    if (plainText) doPaste(view, target.value, null, event);else doPaste(view, target.textContent, target.innerHTML, event);\n  }, 50);\n}\n\nfunction doPaste(view, text, html, event) {\n  var slice = parseFromClipboard(view, text, html, view.input.shiftKey, view.state.selection.$from);\n  if (view.someProp(\"handlePaste\", function (f) {\n    return f(view, event, slice || prosemirrorModel.Slice.empty);\n  })) return true;\n  if (!slice) return false;\n  var singleNode = sliceSingleNode(slice);\n  var tr = singleNode ? view.state.tr.replaceSelectionWith(singleNode, view.input.shiftKey) : view.state.tr.replaceSelection(slice);\n  view.dispatch(tr.scrollIntoView().setMeta(\"paste\", true).setMeta(\"uiEvent\", \"paste\"));\n  return true;\n}\n\neditHandlers.paste = function (view, _event) {\n  var event = _event;\n  if (view.composing && !android) return;\n  var data = brokenClipboardAPI ? null : event.clipboardData;\n  if (data && doPaste(view, data.getData(\"text/plain\"), data.getData(\"text/html\"), event)) event.preventDefault();else capturePaste(view, event);\n};\n\nvar Dragging = _createClass(function Dragging(slice, move) {\n  _classCallCheck(this, Dragging);\n\n  this.slice = slice;\n  this.move = move;\n});\n\nvar dragCopyModifier = mac ? \"altKey\" : \"ctrlKey\";\n\nhandlers.dragstart = function (view, _event) {\n  var event = _event;\n  var mouseDown = view.input.mouseDown;\n  if (mouseDown) mouseDown.done();\n  if (!event.dataTransfer) return;\n  var sel = view.state.selection;\n  var pos = sel.empty ? null : view.posAtCoords(eventCoords(event));\n  if (pos && pos.pos >= sel.from && pos.pos <= (sel instanceof prosemirrorState.NodeSelection ? sel.to - 1 : sel.to)) ;else if (mouseDown && mouseDown.mightDrag) {\n    view.dispatch(view.state.tr.setSelection(prosemirrorState.NodeSelection.create(view.state.doc, mouseDown.mightDrag.pos)));\n  } else if (event.target && event.target.nodeType == 1) {\n    var desc = view.docView.nearestDesc(event.target, true);\n    if (desc && desc.node.type.spec.draggable && desc != view.docView) view.dispatch(view.state.tr.setSelection(prosemirrorState.NodeSelection.create(view.state.doc, desc.posBefore)));\n  }\n\n  var slice = view.state.selection.content(),\n      _serializeForClipboar2 = serializeForClipboard(view, slice),\n      dom = _serializeForClipboar2.dom,\n      text = _serializeForClipboar2.text;\n\n  event.dataTransfer.clearData();\n  event.dataTransfer.setData(brokenClipboardAPI ? \"Text\" : \"text/html\", dom.innerHTML);\n  event.dataTransfer.effectAllowed = \"copyMove\";\n  if (!brokenClipboardAPI) event.dataTransfer.setData(\"text/plain\", text);\n  view.dragging = new Dragging(slice, !event[dragCopyModifier]);\n};\n\nhandlers.dragend = function (view) {\n  var dragging = view.dragging;\n  window.setTimeout(function () {\n    if (view.dragging == dragging) view.dragging = null;\n  }, 50);\n};\n\neditHandlers.dragover = editHandlers.dragenter = function (_, e) {\n  return e.preventDefault();\n};\n\neditHandlers.drop = function (view, _event) {\n  var event = _event;\n  var dragging = view.dragging;\n  view.dragging = null;\n  if (!event.dataTransfer) return;\n  var eventPos = view.posAtCoords(eventCoords(event));\n  if (!eventPos) return;\n  var $mouse = view.state.doc.resolve(eventPos.pos);\n  if (!$mouse) return;\n  var slice = dragging && dragging.slice;\n\n  if (slice) {\n    view.someProp(\"transformPasted\", function (f) {\n      slice = f(slice);\n    });\n  } else {\n    slice = parseFromClipboard(view, event.dataTransfer.getData(brokenClipboardAPI ? \"Text\" : \"text/plain\"), brokenClipboardAPI ? null : event.dataTransfer.getData(\"text/html\"), false, $mouse);\n  }\n\n  var move = !!(dragging && !event[dragCopyModifier]);\n\n  if (view.someProp(\"handleDrop\", function (f) {\n    return f(view, event, slice || prosemirrorModel.Slice.empty, move);\n  })) {\n    event.preventDefault();\n    return;\n  }\n\n  if (!slice) return;\n  event.preventDefault();\n  var insertPos = slice ? prosemirrorTransform.dropPoint(view.state.doc, $mouse.pos, slice) : $mouse.pos;\n  if (insertPos == null) insertPos = $mouse.pos;\n  var tr = view.state.tr;\n  if (move) tr.deleteSelection();\n  var pos = tr.mapping.map(insertPos);\n  var isNode = slice.openStart == 0 && slice.openEnd == 0 && slice.content.childCount == 1;\n  var beforeInsert = tr.doc;\n  if (isNode) tr.replaceRangeWith(pos, pos, slice.content.firstChild);else tr.replaceRange(pos, pos, slice);\n  if (tr.doc.eq(beforeInsert)) return;\n  var $pos = tr.doc.resolve(pos);\n\n  if (isNode && prosemirrorState.NodeSelection.isSelectable(slice.content.firstChild) && $pos.nodeAfter && $pos.nodeAfter.sameMarkup(slice.content.firstChild)) {\n    tr.setSelection(new prosemirrorState.NodeSelection($pos));\n  } else {\n    var end = tr.mapping.map(insertPos);\n    tr.mapping.maps[tr.mapping.maps.length - 1].forEach(function (_from, _to, _newFrom, newTo) {\n      return end = newTo;\n    });\n    tr.setSelection(selectionBetween(view, $pos, tr.doc.resolve(end)));\n  }\n\n  view.focus();\n  view.dispatch(tr.setMeta(\"uiEvent\", \"drop\"));\n};\n\nhandlers.focus = function (view) {\n  if (!view.focused) {\n    view.domObserver.stop();\n    view.dom.classList.add(\"ProseMirror-focused\");\n    view.domObserver.start();\n    view.focused = true;\n    setTimeout(function () {\n      if (view.docView && view.hasFocus() && !view.domObserver.currentSelection.eq(view.domSelection())) selectionToDOM(view);\n    }, 20);\n  }\n};\n\nhandlers.blur = function (view, _event) {\n  var event = _event;\n\n  if (view.focused) {\n    view.domObserver.stop();\n    view.dom.classList.remove(\"ProseMirror-focused\");\n    view.domObserver.start();\n    if (event.relatedTarget && view.dom.contains(event.relatedTarget)) view.domObserver.currentSelection.clear();\n    view.focused = false;\n  }\n};\n\nhandlers.beforeinput = function (view, _event) {\n  var event = _event;\n\n  if (chrome && android && event.inputType == \"deleteContentBackward\") {\n    view.domObserver.flushSoon();\n    var domChangeCount = view.input.domChangeCount;\n    setTimeout(function () {\n      if (view.input.domChangeCount != domChangeCount) return;\n      view.dom.blur();\n      view.focus();\n      if (view.someProp(\"handleKeyDown\", function (f) {\n        return f(view, keyEvent(8, \"Backspace\"));\n      })) return;\n      var $cursor = view.state.selection.$cursor;\n      if ($cursor && $cursor.pos > 0) view.dispatch(view.state.tr[\"delete\"]($cursor.pos - 1, $cursor.pos).scrollIntoView());\n    }, 50);\n  }\n};\n\nfor (var prop in editHandlers) {\n  handlers[prop] = editHandlers[prop];\n}\n\nfunction compareObjs(a, b) {\n  if (a == b) return true;\n\n  for (var p in a) {\n    if (a[p] !== b[p]) return false;\n  }\n\n  for (var _p in b) {\n    if (!(_p in a)) return false;\n  }\n\n  return true;\n}\n\nvar WidgetType = function () {\n  function WidgetType(toDOM, spec) {\n    _classCallCheck(this, WidgetType);\n\n    this.toDOM = toDOM;\n    this.spec = spec || noSpec;\n    this.side = this.spec.side || 0;\n  }\n\n  _createClass(WidgetType, [{\n    key: \"map\",\n    value: function map(mapping, span, offset, oldOffset) {\n      var _mapping$mapResult = mapping.mapResult(span.from + oldOffset, this.side < 0 ? -1 : 1),\n          pos = _mapping$mapResult.pos,\n          deleted = _mapping$mapResult.deleted;\n\n      return deleted ? null : new Decoration(pos - offset, pos - offset, this);\n    }\n  }, {\n    key: \"valid\",\n    value: function valid() {\n      return true;\n    }\n  }, {\n    key: \"eq\",\n    value: function eq(other) {\n      return this == other || other instanceof WidgetType && (this.spec.key && this.spec.key == other.spec.key || this.toDOM == other.toDOM && compareObjs(this.spec, other.spec));\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy(node) {\n      if (this.spec.destroy) this.spec.destroy(node);\n    }\n  }]);\n\n  return WidgetType;\n}();\n\nvar InlineType = function () {\n  function InlineType(attrs, spec) {\n    _classCallCheck(this, InlineType);\n\n    this.attrs = attrs;\n    this.spec = spec || noSpec;\n  }\n\n  _createClass(InlineType, [{\n    key: \"map\",\n    value: function map(mapping, span, offset, oldOffset) {\n      var from = mapping.map(span.from + oldOffset, this.spec.inclusiveStart ? -1 : 1) - offset;\n      var to = mapping.map(span.to + oldOffset, this.spec.inclusiveEnd ? 1 : -1) - offset;\n      return from >= to ? null : new Decoration(from, to, this);\n    }\n  }, {\n    key: \"valid\",\n    value: function valid(_, span) {\n      return span.from < span.to;\n    }\n  }, {\n    key: \"eq\",\n    value: function eq(other) {\n      return this == other || other instanceof InlineType && compareObjs(this.attrs, other.attrs) && compareObjs(this.spec, other.spec);\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {}\n  }], [{\n    key: \"is\",\n    value: function is(span) {\n      return span.type instanceof InlineType;\n    }\n  }]);\n\n  return InlineType;\n}();\n\nvar NodeType = function () {\n  function NodeType(attrs, spec) {\n    _classCallCheck(this, NodeType);\n\n    this.attrs = attrs;\n    this.spec = spec || noSpec;\n  }\n\n  _createClass(NodeType, [{\n    key: \"map\",\n    value: function map(mapping, span, offset, oldOffset) {\n      var from = mapping.mapResult(span.from + oldOffset, 1);\n      if (from.deleted) return null;\n      var to = mapping.mapResult(span.to + oldOffset, -1);\n      if (to.deleted || to.pos <= from.pos) return null;\n      return new Decoration(from.pos - offset, to.pos - offset, this);\n    }\n  }, {\n    key: \"valid\",\n    value: function valid(node, span) {\n      var _node$content$findInd = node.content.findIndex(span.from),\n          index = _node$content$findInd.index,\n          offset = _node$content$findInd.offset,\n          child;\n\n      return offset == span.from && !(child = node.child(index)).isText && offset + child.nodeSize == span.to;\n    }\n  }, {\n    key: \"eq\",\n    value: function eq(other) {\n      return this == other || other instanceof NodeType && compareObjs(this.attrs, other.attrs) && compareObjs(this.spec, other.spec);\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {}\n  }]);\n\n  return NodeType;\n}();\n\nvar Decoration = function () {\n  function Decoration(from, to, type) {\n    _classCallCheck(this, Decoration);\n\n    this.from = from;\n    this.to = to;\n    this.type = type;\n  }\n\n  _createClass(Decoration, [{\n    key: \"copy\",\n    value: function copy(from, to) {\n      return new Decoration(from, to, this.type);\n    }\n  }, {\n    key: \"eq\",\n    value: function eq(other) {\n      var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      return this.type.eq(other.type) && this.from + offset == other.from && this.to + offset == other.to;\n    }\n  }, {\n    key: \"map\",\n    value: function map(mapping, offset, oldOffset) {\n      return this.type.map(mapping, this, offset, oldOffset);\n    }\n  }, {\n    key: \"spec\",\n    get: function get() {\n      return this.type.spec;\n    }\n  }, {\n    key: \"inline\",\n    get: function get() {\n      return this.type instanceof InlineType;\n    }\n  }], [{\n    key: \"widget\",\n    value: function widget(pos, toDOM, spec) {\n      return new Decoration(pos, pos, new WidgetType(toDOM, spec));\n    }\n  }, {\n    key: \"inline\",\n    value: function inline(from, to, attrs, spec) {\n      return new Decoration(from, to, new InlineType(attrs, spec));\n    }\n  }, {\n    key: \"node\",\n    value: function node(from, to, attrs, spec) {\n      return new Decoration(from, to, new NodeType(attrs, spec));\n    }\n  }]);\n\n  return Decoration;\n}();\n\nvar none = [],\n    noSpec = {};\n\nvar DecorationSet = function () {\n  function DecorationSet(local, children) {\n    _classCallCheck(this, DecorationSet);\n\n    this.local = local.length ? local : none;\n    this.children = children.length ? children : none;\n  }\n\n  _createClass(DecorationSet, [{\n    key: \"find\",\n    value: function find(start, end, predicate) {\n      var result = [];\n      this.findInner(start == null ? 0 : start, end == null ? 1e9 : end, result, 0, predicate);\n      return result;\n    }\n  }, {\n    key: \"findInner\",\n    value: function findInner(start, end, result, offset, predicate) {\n      for (var i = 0; i < this.local.length; i++) {\n        var span = this.local[i];\n        if (span.from <= end && span.to >= start && (!predicate || predicate(span.spec))) result.push(span.copy(span.from + offset, span.to + offset));\n      }\n\n      for (var _i5 = 0; _i5 < this.children.length; _i5 += 3) {\n        if (this.children[_i5] < end && this.children[_i5 + 1] > start) {\n          var childOff = this.children[_i5] + 1;\n\n          this.children[_i5 + 2].findInner(start - childOff, end - childOff, result, offset + childOff, predicate);\n        }\n      }\n    }\n  }, {\n    key: \"map\",\n    value: function map(mapping, doc, options) {\n      if (this == empty || mapping.maps.length == 0) return this;\n      return this.mapInner(mapping, doc, 0, 0, options || noSpec);\n    }\n  }, {\n    key: \"mapInner\",\n    value: function mapInner(mapping, node, offset, oldOffset, options) {\n      var newLocal;\n\n      for (var i = 0; i < this.local.length; i++) {\n        var mapped = this.local[i].map(mapping, offset, oldOffset);\n        if (mapped && mapped.type.valid(node, mapped)) (newLocal || (newLocal = [])).push(mapped);else if (options.onRemove) options.onRemove(this.local[i].spec);\n      }\n\n      if (this.children.length) return mapChildren(this.children, newLocal || [], mapping, node, offset, oldOffset, options);else return newLocal ? new DecorationSet(newLocal.sort(byPos), none) : empty;\n    }\n  }, {\n    key: \"add\",\n    value: function add(doc, decorations) {\n      if (!decorations.length) return this;\n      if (this == empty) return DecorationSet.create(doc, decorations);\n      return this.addInner(doc, decorations, 0);\n    }\n  }, {\n    key: \"addInner\",\n    value: function addInner(doc, decorations, offset) {\n      var _this10 = this;\n\n      var children,\n          childIndex = 0;\n      doc.forEach(function (childNode, childOffset) {\n        var baseOffset = childOffset + offset,\n            found;\n        if (!(found = takeSpansForNode(decorations, childNode, baseOffset))) return;\n        if (!children) children = _this10.children.slice();\n\n        while (childIndex < children.length && children[childIndex] < childOffset) {\n          childIndex += 3;\n        }\n\n        if (children[childIndex] == childOffset) children[childIndex + 2] = children[childIndex + 2].addInner(childNode, found, baseOffset + 1);else children.splice(childIndex, 0, childOffset, childOffset + childNode.nodeSize, buildTree(found, childNode, baseOffset + 1, noSpec));\n        childIndex += 3;\n      });\n      var local = moveSpans(childIndex ? withoutNulls(decorations) : decorations, -offset);\n\n      for (var i = 0; i < local.length; i++) {\n        if (!local[i].type.valid(doc, local[i])) local.splice(i--, 1);\n      }\n\n      return new DecorationSet(local.length ? this.local.concat(local).sort(byPos) : this.local, children || this.children);\n    }\n  }, {\n    key: \"remove\",\n    value: function remove(decorations) {\n      if (decorations.length == 0 || this == empty) return this;\n      return this.removeInner(decorations, 0);\n    }\n  }, {\n    key: \"removeInner\",\n    value: function removeInner(decorations, offset) {\n      var children = this.children,\n          local = this.local;\n\n      for (var i = 0; i < children.length; i += 3) {\n        var found = void 0;\n        var from = children[i] + offset,\n            to = children[i + 1] + offset;\n\n        for (var j = 0, span; j < decorations.length; j++) {\n          if (span = decorations[j]) {\n            if (span.from > from && span.to < to) {\n              decorations[j] = null;\n              (found || (found = [])).push(span);\n            }\n          }\n        }\n\n        if (!found) continue;\n        if (children == this.children) children = this.children.slice();\n        var removed = children[i + 2].removeInner(found, from + 1);\n\n        if (removed != empty) {\n          children[i + 2] = removed;\n        } else {\n          children.splice(i, 3);\n          i -= 3;\n        }\n      }\n\n      if (local.length) for (var _i6 = 0, _span; _i6 < decorations.length; _i6++) {\n        if (_span = decorations[_i6]) {\n          for (var _j2 = 0; _j2 < local.length; _j2++) {\n            if (local[_j2].eq(_span, offset)) {\n              if (local == this.local) local = this.local.slice();\n              local.splice(_j2--, 1);\n            }\n          }\n        }\n      }\n      if (children == this.children && local == this.local) return this;\n      return local.length || children.length ? new DecorationSet(local, children) : empty;\n    }\n  }, {\n    key: \"forChild\",\n    value: function forChild(offset, node) {\n      if (this == empty) return this;\n      if (node.isLeaf) return DecorationSet.empty;\n      var child, local;\n\n      for (var i = 0; i < this.children.length; i += 3) {\n        if (this.children[i] >= offset) {\n          if (this.children[i] == offset) child = this.children[i + 2];\n          break;\n        }\n      }\n\n      var start = offset + 1,\n          end = start + node.content.size;\n\n      for (var _i7 = 0; _i7 < this.local.length; _i7++) {\n        var dec = this.local[_i7];\n\n        if (dec.from < end && dec.to > start && dec.type instanceof InlineType) {\n          var from = Math.max(start, dec.from) - start,\n              to = Math.min(end, dec.to) - start;\n          if (from < to) (local || (local = [])).push(dec.copy(from, to));\n        }\n      }\n\n      if (local) {\n        var localSet = new DecorationSet(local.sort(byPos), none);\n        return child ? new DecorationGroup([localSet, child]) : localSet;\n      }\n\n      return child || empty;\n    }\n  }, {\n    key: \"eq\",\n    value: function eq(other) {\n      if (this == other) return true;\n      if (!(other instanceof DecorationSet) || this.local.length != other.local.length || this.children.length != other.children.length) return false;\n\n      for (var i = 0; i < this.local.length; i++) {\n        if (!this.local[i].eq(other.local[i])) return false;\n      }\n\n      for (var _i8 = 0; _i8 < this.children.length; _i8 += 3) {\n        if (this.children[_i8] != other.children[_i8] || this.children[_i8 + 1] != other.children[_i8 + 1] || !this.children[_i8 + 2].eq(other.children[_i8 + 2])) return false;\n      }\n\n      return true;\n    }\n  }, {\n    key: \"locals\",\n    value: function locals(node) {\n      return removeOverlap(this.localsInner(node));\n    }\n  }, {\n    key: \"localsInner\",\n    value: function localsInner(node) {\n      if (this == empty) return none;\n      if (node.inlineContent || !this.local.some(InlineType.is)) return this.local;\n      var result = [];\n\n      for (var i = 0; i < this.local.length; i++) {\n        if (!(this.local[i].type instanceof InlineType)) result.push(this.local[i]);\n      }\n\n      return result;\n    }\n  }], [{\n    key: \"create\",\n    value: function create(doc, decorations) {\n      return decorations.length ? buildTree(decorations, doc, 0, noSpec) : empty;\n    }\n  }]);\n\n  return DecorationSet;\n}();\n\nDecorationSet.empty = new DecorationSet([], []);\nDecorationSet.removeOverlap = removeOverlap;\nvar empty = DecorationSet.empty;\n\nvar DecorationGroup = function () {\n  function DecorationGroup(members) {\n    _classCallCheck(this, DecorationGroup);\n\n    this.members = members;\n  }\n\n  _createClass(DecorationGroup, [{\n    key: \"map\",\n    value: function map(mapping, doc) {\n      var mappedDecos = this.members.map(function (member) {\n        return member.map(mapping, doc, noSpec);\n      });\n      return DecorationGroup.from(mappedDecos);\n    }\n  }, {\n    key: \"forChild\",\n    value: function forChild(offset, child) {\n      if (child.isLeaf) return DecorationSet.empty;\n      var found = [];\n\n      for (var i = 0; i < this.members.length; i++) {\n        var result = this.members[i].forChild(offset, child);\n        if (result == empty) continue;\n        if (result instanceof DecorationGroup) found = found.concat(result.members);else found.push(result);\n      }\n\n      return DecorationGroup.from(found);\n    }\n  }, {\n    key: \"eq\",\n    value: function eq(other) {\n      if (!(other instanceof DecorationGroup) || other.members.length != this.members.length) return false;\n\n      for (var i = 0; i < this.members.length; i++) {\n        if (!this.members[i].eq(other.members[i])) return false;\n      }\n\n      return true;\n    }\n  }, {\n    key: \"locals\",\n    value: function locals(node) {\n      var result,\n          sorted = true;\n\n      for (var i = 0; i < this.members.length; i++) {\n        var locals = this.members[i].localsInner(node);\n        if (!locals.length) continue;\n\n        if (!result) {\n          result = locals;\n        } else {\n          if (sorted) {\n            result = result.slice();\n            sorted = false;\n          }\n\n          for (var j = 0; j < locals.length; j++) {\n            result.push(locals[j]);\n          }\n        }\n      }\n\n      return result ? removeOverlap(sorted ? result : result.sort(byPos)) : none;\n    }\n  }], [{\n    key: \"from\",\n    value: function from(members) {\n      switch (members.length) {\n        case 0:\n          return empty;\n\n        case 1:\n          return members[0];\n\n        default:\n          return new DecorationGroup(members);\n      }\n    }\n  }]);\n\n  return DecorationGroup;\n}();\n\nfunction mapChildren(oldChildren, newLocal, mapping, node, offset, oldOffset, options) {\n  var children = oldChildren.slice();\n\n  var shift = function shift(oldStart, oldEnd, newStart, newEnd) {\n    for (var i = 0; i < children.length; i += 3) {\n      var end = children[i + 1],\n          dSize = void 0;\n      if (end < 0 || oldStart > end + oldOffset) continue;\n      var start = children[i] + oldOffset;\n\n      if (oldEnd >= start) {\n        children[i + 1] = oldStart <= start ? -2 : -1;\n      } else if (newStart >= offset && (dSize = newEnd - newStart - (oldEnd - oldStart))) {\n        children[i] += dSize;\n        children[i + 1] += dSize;\n      }\n    }\n  };\n\n  for (var i = 0; i < mapping.maps.length; i++) {\n    mapping.maps[i].forEach(shift);\n  }\n\n  var mustRebuild = false;\n\n  for (var _i9 = 0; _i9 < children.length; _i9 += 3) {\n    if (children[_i9 + 1] < 0) {\n      if (children[_i9 + 1] == -2) {\n        mustRebuild = true;\n        children[_i9 + 1] = -1;\n        continue;\n      }\n\n      var from = mapping.map(oldChildren[_i9] + oldOffset),\n          fromLocal = from - offset;\n\n      if (fromLocal < 0 || fromLocal >= node.content.size) {\n        mustRebuild = true;\n        continue;\n      }\n\n      var to = mapping.map(oldChildren[_i9 + 1] + oldOffset, -1),\n          toLocal = to - offset;\n\n      var _node$content$findInd2 = node.content.findIndex(fromLocal),\n          index = _node$content$findInd2.index,\n          childOffset = _node$content$findInd2.offset;\n\n      var childNode = node.maybeChild(index);\n\n      if (childNode && childOffset == fromLocal && childOffset + childNode.nodeSize == toLocal) {\n        var mapped = children[_i9 + 2].mapInner(mapping, childNode, from + 1, oldChildren[_i9] + oldOffset + 1, options);\n\n        if (mapped != empty) {\n          children[_i9] = fromLocal;\n          children[_i9 + 1] = toLocal;\n          children[_i9 + 2] = mapped;\n        } else {\n          children[_i9 + 1] = -2;\n          mustRebuild = true;\n        }\n      } else {\n        mustRebuild = true;\n      }\n    }\n  }\n\n  if (mustRebuild) {\n    var decorations = mapAndGatherRemainingDecorations(children, oldChildren, newLocal, mapping, offset, oldOffset, options);\n    var built = buildTree(decorations, node, 0, options);\n    newLocal = built.local;\n\n    for (var _i10 = 0; _i10 < children.length; _i10 += 3) {\n      if (children[_i10 + 1] < 0) {\n        children.splice(_i10, 3);\n        _i10 -= 3;\n      }\n    }\n\n    for (var _i11 = 0, j = 0; _i11 < built.children.length; _i11 += 3) {\n      var _from2 = built.children[_i11];\n\n      while (j < children.length && children[j] < _from2) {\n        j += 3;\n      }\n\n      children.splice(j, 0, built.children[_i11], built.children[_i11 + 1], built.children[_i11 + 2]);\n    }\n  }\n\n  return new DecorationSet(newLocal.sort(byPos), children);\n}\n\nfunction moveSpans(spans, offset) {\n  if (!offset || !spans.length) return spans;\n  var result = [];\n\n  for (var i = 0; i < spans.length; i++) {\n    var span = spans[i];\n    result.push(new Decoration(span.from + offset, span.to + offset, span.type));\n  }\n\n  return result;\n}\n\nfunction mapAndGatherRemainingDecorations(children, oldChildren, decorations, mapping, offset, oldOffset, options) {\n  function gather(set, oldOffset) {\n    for (var i = 0; i < set.local.length; i++) {\n      var mapped = set.local[i].map(mapping, offset, oldOffset);\n      if (mapped) decorations.push(mapped);else if (options.onRemove) options.onRemove(set.local[i].spec);\n    }\n\n    for (var _i12 = 0; _i12 < set.children.length; _i12 += 3) {\n      gather(set.children[_i12 + 2], set.children[_i12] + oldOffset + 1);\n    }\n  }\n\n  for (var i = 0; i < children.length; i += 3) {\n    if (children[i + 1] == -1) gather(children[i + 2], oldChildren[i] + oldOffset + 1);\n  }\n\n  return decorations;\n}\n\nfunction takeSpansForNode(spans, node, offset) {\n  if (node.isLeaf) return null;\n  var end = offset + node.nodeSize,\n      found = null;\n\n  for (var i = 0, span; i < spans.length; i++) {\n    if ((span = spans[i]) && span.from > offset && span.to < end) {\n      (found || (found = [])).push(span);\n      spans[i] = null;\n    }\n  }\n\n  return found;\n}\n\nfunction withoutNulls(array) {\n  var result = [];\n\n  for (var i = 0; i < array.length; i++) {\n    if (array[i] != null) result.push(array[i]);\n  }\n\n  return result;\n}\n\nfunction buildTree(spans, node, offset, options) {\n  var children = [],\n      hasNulls = false;\n  node.forEach(function (childNode, localStart) {\n    var found = takeSpansForNode(spans, childNode, localStart + offset);\n\n    if (found) {\n      hasNulls = true;\n      var subtree = buildTree(found, childNode, offset + localStart + 1, options);\n      if (subtree != empty) children.push(localStart, localStart + childNode.nodeSize, subtree);\n    }\n  });\n  var locals = moveSpans(hasNulls ? withoutNulls(spans) : spans, -offset).sort(byPos);\n\n  for (var i = 0; i < locals.length; i++) {\n    if (!locals[i].type.valid(node, locals[i])) {\n      if (options.onRemove) options.onRemove(locals[i].spec);\n      locals.splice(i--, 1);\n    }\n  }\n\n  return locals.length || children.length ? new DecorationSet(locals, children) : empty;\n}\n\nfunction byPos(a, b) {\n  return a.from - b.from || a.to - b.to;\n}\n\nfunction removeOverlap(spans) {\n  var working = spans;\n\n  for (var i = 0; i < working.length - 1; i++) {\n    var span = working[i];\n    if (span.from != span.to) for (var j = i + 1; j < working.length; j++) {\n      var next = working[j];\n\n      if (next.from == span.from) {\n        if (next.to != span.to) {\n          if (working == spans) working = spans.slice();\n          working[j] = next.copy(next.from, span.to);\n          insertAhead(working, j + 1, next.copy(span.to, next.to));\n        }\n\n        continue;\n      } else {\n        if (next.from < span.to) {\n          if (working == spans) working = spans.slice();\n          working[i] = span.copy(span.from, next.from);\n          insertAhead(working, j, span.copy(next.from, span.to));\n        }\n\n        break;\n      }\n    }\n  }\n\n  return working;\n}\n\nfunction insertAhead(array, i, deco) {\n  while (i < array.length && byPos(deco, array[i]) > 0) {\n    i++;\n  }\n\n  array.splice(i, 0, deco);\n}\n\nfunction viewDecorations(view) {\n  var found = [];\n  view.someProp(\"decorations\", function (f) {\n    var result = f(view.state);\n    if (result && result != empty) found.push(result);\n  });\n  if (view.cursorWrapper) found.push(DecorationSet.create(view.state.doc, [view.cursorWrapper.deco]));\n  return DecorationGroup.from(found);\n}\n\nvar observeOptions = {\n  childList: true,\n  characterData: true,\n  characterDataOldValue: true,\n  attributes: true,\n  attributeOldValue: true,\n  subtree: true\n};\nvar useCharData = ie && ie_version <= 11;\n\nvar SelectionState = function () {\n  function SelectionState() {\n    _classCallCheck(this, SelectionState);\n\n    this.anchorNode = null;\n    this.anchorOffset = 0;\n    this.focusNode = null;\n    this.focusOffset = 0;\n  }\n\n  _createClass(SelectionState, [{\n    key: \"set\",\n    value: function set(sel) {\n      this.anchorNode = sel.anchorNode;\n      this.anchorOffset = sel.anchorOffset;\n      this.focusNode = sel.focusNode;\n      this.focusOffset = sel.focusOffset;\n    }\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      this.anchorNode = this.focusNode = null;\n    }\n  }, {\n    key: \"eq\",\n    value: function eq(sel) {\n      return sel.anchorNode == this.anchorNode && sel.anchorOffset == this.anchorOffset && sel.focusNode == this.focusNode && sel.focusOffset == this.focusOffset;\n    }\n  }]);\n\n  return SelectionState;\n}();\n\nvar DOMObserver = function () {\n  function DOMObserver(view, handleDOMChange) {\n    var _this11 = this;\n\n    _classCallCheck(this, DOMObserver);\n\n    this.view = view;\n    this.handleDOMChange = handleDOMChange;\n    this.queue = [];\n    this.flushingSoon = -1;\n    this.observer = null;\n    this.currentSelection = new SelectionState();\n    this.onCharData = null;\n    this.suppressingSelectionUpdates = false;\n    this.observer = window.MutationObserver && new window.MutationObserver(function (mutations) {\n      for (var i = 0; i < mutations.length; i++) {\n        _this11.queue.push(mutations[i]);\n      }\n\n      if (ie && ie_version <= 11 && mutations.some(function (m) {\n        return m.type == \"childList\" && m.removedNodes.length || m.type == \"characterData\" && m.oldValue.length > m.target.nodeValue.length;\n      })) _this11.flushSoon();else _this11.flush();\n    });\n\n    if (useCharData) {\n      this.onCharData = function (e) {\n        _this11.queue.push({\n          target: e.target,\n          type: \"characterData\",\n          oldValue: e.prevValue\n        });\n\n        _this11.flushSoon();\n      };\n    }\n\n    this.onSelectionChange = this.onSelectionChange.bind(this);\n  }\n\n  _createClass(DOMObserver, [{\n    key: \"flushSoon\",\n    value: function flushSoon() {\n      var _this12 = this;\n\n      if (this.flushingSoon < 0) this.flushingSoon = window.setTimeout(function () {\n        _this12.flushingSoon = -1;\n\n        _this12.flush();\n      }, 20);\n    }\n  }, {\n    key: \"forceFlush\",\n    value: function forceFlush() {\n      if (this.flushingSoon > -1) {\n        window.clearTimeout(this.flushingSoon);\n        this.flushingSoon = -1;\n        this.flush();\n      }\n    }\n  }, {\n    key: \"start\",\n    value: function start() {\n      if (this.observer) {\n        this.observer.takeRecords();\n        this.observer.observe(this.view.dom, observeOptions);\n      }\n\n      if (this.onCharData) this.view.dom.addEventListener(\"DOMCharacterDataModified\", this.onCharData);\n      this.connectSelection();\n    }\n  }, {\n    key: \"stop\",\n    value: function stop() {\n      var _this13 = this;\n\n      if (this.observer) {\n        var take = this.observer.takeRecords();\n\n        if (take.length) {\n          for (var i = 0; i < take.length; i++) {\n            this.queue.push(take[i]);\n          }\n\n          window.setTimeout(function () {\n            return _this13.flush();\n          }, 20);\n        }\n\n        this.observer.disconnect();\n      }\n\n      if (this.onCharData) this.view.dom.removeEventListener(\"DOMCharacterDataModified\", this.onCharData);\n      this.disconnectSelection();\n    }\n  }, {\n    key: \"connectSelection\",\n    value: function connectSelection() {\n      this.view.dom.ownerDocument.addEventListener(\"selectionchange\", this.onSelectionChange);\n    }\n  }, {\n    key: \"disconnectSelection\",\n    value: function disconnectSelection() {\n      this.view.dom.ownerDocument.removeEventListener(\"selectionchange\", this.onSelectionChange);\n    }\n  }, {\n    key: \"suppressSelectionUpdates\",\n    value: function suppressSelectionUpdates() {\n      var _this14 = this;\n\n      this.suppressingSelectionUpdates = true;\n      setTimeout(function () {\n        return _this14.suppressingSelectionUpdates = false;\n      }, 50);\n    }\n  }, {\n    key: \"onSelectionChange\",\n    value: function onSelectionChange() {\n      if (!hasFocusAndSelection(this.view)) return;\n      if (this.suppressingSelectionUpdates) return selectionToDOM(this.view);\n\n      if (ie && ie_version <= 11 && !this.view.state.selection.empty) {\n        var sel = this.view.domSelection();\n        if (sel.focusNode && isEquivalentPosition(sel.focusNode, sel.focusOffset, sel.anchorNode, sel.anchorOffset)) return this.flushSoon();\n      }\n\n      this.flush();\n    }\n  }, {\n    key: \"setCurSelection\",\n    value: function setCurSelection() {\n      this.currentSelection.set(this.view.domSelection());\n    }\n  }, {\n    key: \"ignoreSelectionChange\",\n    value: function ignoreSelectionChange(sel) {\n      if (sel.rangeCount == 0) return true;\n      var container = sel.getRangeAt(0).commonAncestorContainer;\n      var desc = this.view.docView.nearestDesc(container);\n\n      if (desc && desc.ignoreMutation({\n        type: \"selection\",\n        target: container.nodeType == 3 ? container.parentNode : container\n      })) {\n        this.setCurSelection();\n        return true;\n      }\n    }\n  }, {\n    key: \"flush\",\n    value: function flush() {\n      if (!this.view.docView || this.flushingSoon > -1) return;\n      var mutations = this.observer ? this.observer.takeRecords() : [];\n\n      if (this.queue.length) {\n        mutations = this.queue.concat(mutations);\n        this.queue.length = 0;\n      }\n\n      var sel = this.view.domSelection();\n      var newSel = !this.suppressingSelectionUpdates && !this.currentSelection.eq(sel) && hasFocusAndSelection(this.view) && !this.ignoreSelectionChange(sel);\n      var from = -1,\n          to = -1,\n          typeOver = false,\n          added = [];\n\n      if (this.view.editable) {\n        for (var i = 0; i < mutations.length; i++) {\n          var result = this.registerMutation(mutations[i], added);\n\n          if (result) {\n            from = from < 0 ? result.from : Math.min(result.from, from);\n            to = to < 0 ? result.to : Math.max(result.to, to);\n            if (result.typeOver) typeOver = true;\n          }\n        }\n      }\n\n      if (gecko && added.length > 1) {\n        var brs = added.filter(function (n) {\n          return n.nodeName == \"BR\";\n        });\n\n        if (brs.length == 2) {\n          var a = brs[0],\n              b = brs[1];\n          if (a.parentNode && a.parentNode.parentNode == b.parentNode) b.remove();else a.remove();\n        }\n      }\n\n      if (from > -1 || newSel) {\n        if (from > -1) {\n          this.view.docView.markDirty(from, to);\n          checkCSS(this.view);\n        }\n\n        this.handleDOMChange(from, to, typeOver, added);\n        if (this.view.docView && this.view.docView.dirty) this.view.updateState(this.view.state);else if (!this.currentSelection.eq(sel)) selectionToDOM(this.view);\n        this.currentSelection.set(sel);\n      }\n    }\n  }, {\n    key: \"registerMutation\",\n    value: function registerMutation(mut, added) {\n      if (added.indexOf(mut.target) > -1) return null;\n      var desc = this.view.docView.nearestDesc(mut.target);\n      if (mut.type == \"attributes\" && (desc == this.view.docView || mut.attributeName == \"contenteditable\" || mut.attributeName == \"style\" && !mut.oldValue && !mut.target.getAttribute(\"style\"))) return null;\n      if (!desc || desc.ignoreMutation(mut)) return null;\n\n      if (mut.type == \"childList\") {\n        for (var i = 0; i < mut.addedNodes.length; i++) {\n          added.push(mut.addedNodes[i]);\n        }\n\n        if (desc.contentDOM && desc.contentDOM != desc.dom && !desc.contentDOM.contains(mut.target)) return {\n          from: desc.posBefore,\n          to: desc.posAfter\n        };\n        var prev = mut.previousSibling,\n            next = mut.nextSibling;\n\n        if (ie && ie_version <= 11 && mut.addedNodes.length) {\n          for (var _i13 = 0; _i13 < mut.addedNodes.length; _i13++) {\n            var _mut$addedNodes$_i = mut.addedNodes[_i13],\n                previousSibling = _mut$addedNodes$_i.previousSibling,\n                nextSibling = _mut$addedNodes$_i.nextSibling;\n            if (!previousSibling || Array.prototype.indexOf.call(mut.addedNodes, previousSibling) < 0) prev = previousSibling;\n            if (!nextSibling || Array.prototype.indexOf.call(mut.addedNodes, nextSibling) < 0) next = nextSibling;\n          }\n        }\n\n        var fromOffset = prev && prev.parentNode == mut.target ? domIndex(prev) + 1 : 0;\n        var from = desc.localPosFromDOM(mut.target, fromOffset, -1);\n        var toOffset = next && next.parentNode == mut.target ? domIndex(next) : mut.target.childNodes.length;\n        var to = desc.localPosFromDOM(mut.target, toOffset, 1);\n        return {\n          from: from,\n          to: to\n        };\n      } else if (mut.type == \"attributes\") {\n        return {\n          from: desc.posAtStart - desc.border,\n          to: desc.posAtEnd + desc.border\n        };\n      } else {\n        return {\n          from: desc.posAtStart,\n          to: desc.posAtEnd,\n          typeOver: mut.target.nodeValue == mut.oldValue\n        };\n      }\n    }\n  }]);\n\n  return DOMObserver;\n}();\n\nvar cssChecked = false;\n\nfunction checkCSS(view) {\n  if (cssChecked) return;\n  cssChecked = true;\n  if (getComputedStyle(view.dom).whiteSpace == \"normal\") console[\"warn\"](\"ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package.\");\n}\n\nfunction parseBetween(view, from_, to_) {\n  var _view$docView$parseRa = view.docView.parseRange(from_, to_),\n      parent = _view$docView$parseRa.node,\n      fromOffset = _view$docView$parseRa.fromOffset,\n      toOffset = _view$docView$parseRa.toOffset,\n      from = _view$docView$parseRa.from,\n      to = _view$docView$parseRa.to;\n\n  var domSel = view.domSelection();\n  var find;\n  var anchor = domSel.anchorNode;\n\n  if (anchor && view.dom.contains(anchor.nodeType == 1 ? anchor : anchor.parentNode)) {\n    find = [{\n      node: anchor,\n      offset: domSel.anchorOffset\n    }];\n    if (!selectionCollapsed(domSel)) find.push({\n      node: domSel.focusNode,\n      offset: domSel.focusOffset\n    });\n  }\n\n  if (chrome && view.input.lastKeyCode === 8) {\n    for (var off = toOffset; off > fromOffset; off--) {\n      var node = parent.childNodes[off - 1],\n          desc = node.pmViewDesc;\n\n      if (node.nodeName == \"BR\" && !desc) {\n        toOffset = off;\n        break;\n      }\n\n      if (!desc || desc.size) break;\n    }\n  }\n\n  var startDoc = view.state.doc;\n  var parser = view.someProp(\"domParser\") || prosemirrorModel.DOMParser.fromSchema(view.state.schema);\n  var $from = startDoc.resolve(from);\n  var sel = null,\n      doc = parser.parse(parent, {\n    topNode: $from.parent,\n    topMatch: $from.parent.contentMatchAt($from.index()),\n    topOpen: true,\n    from: fromOffset,\n    to: toOffset,\n    preserveWhitespace: $from.parent.type.whitespace == \"pre\" ? \"full\" : true,\n    findPositions: find,\n    ruleFromNode: ruleFromNode,\n    context: $from\n  });\n\n  if (find && find[0].pos != null) {\n    var _anchor = find[0].pos,\n        head = find[1] && find[1].pos;\n    if (head == null) head = _anchor;\n    sel = {\n      anchor: _anchor + from,\n      head: head + from\n    };\n  }\n\n  return {\n    doc: doc,\n    sel: sel,\n    from: from,\n    to: to\n  };\n}\n\nfunction ruleFromNode(dom) {\n  var desc = dom.pmViewDesc;\n\n  if (desc) {\n    return desc.parseRule();\n  } else if (dom.nodeName == \"BR\" && dom.parentNode) {\n    if (safari && /^(ul|ol)$/i.test(dom.parentNode.nodeName)) {\n      var skip = document.createElement(\"div\");\n      skip.appendChild(document.createElement(\"li\"));\n      return {\n        skip: skip\n      };\n    } else if (dom.parentNode.lastChild == dom || safari && /^(tr|table)$/i.test(dom.parentNode.nodeName)) {\n      return {\n        ignore: true\n      };\n    }\n  } else if (dom.nodeName == \"IMG\" && dom.getAttribute(\"mark-placeholder\")) {\n    return {\n      ignore: true\n    };\n  }\n\n  return null;\n}\n\nfunction readDOMChange(view, from, to, typeOver, addedNodes) {\n  if (from < 0) {\n    var origin = view.input.lastSelectionTime > Date.now() - 50 ? view.input.lastSelectionOrigin : null;\n    var newSel = selectionFromDOM(view, origin);\n\n    if (newSel && !view.state.selection.eq(newSel)) {\n      var _tr = view.state.tr.setSelection(newSel);\n\n      if (origin == \"pointer\") _tr.setMeta(\"pointer\", true);else if (origin == \"key\") _tr.scrollIntoView();\n      view.dispatch(_tr);\n    }\n\n    return;\n  }\n\n  var $before = view.state.doc.resolve(from);\n  var shared = $before.sharedDepth(to);\n  from = $before.before(shared + 1);\n  to = view.state.doc.resolve(to).after(shared + 1);\n  var sel = view.state.selection;\n  var parse = parseBetween(view, from, to);\n\n  if (chrome && view.cursorWrapper && parse.sel && parse.sel.anchor == view.cursorWrapper.deco.from) {\n    var text = view.cursorWrapper.deco.type.toDOM.nextSibling;\n    var size = text && text.nodeValue ? text.nodeValue.length : 1;\n    parse.sel = {\n      anchor: parse.sel.anchor + size,\n      head: parse.sel.anchor + size\n    };\n  }\n\n  var doc = view.state.doc,\n      compare = doc.slice(parse.from, parse.to);\n  var preferredPos, preferredSide;\n\n  if (view.input.lastKeyCode === 8 && Date.now() - 100 < view.input.lastKeyCodeTime) {\n    preferredPos = view.state.selection.to;\n    preferredSide = \"end\";\n  } else {\n    preferredPos = view.state.selection.from;\n    preferredSide = \"start\";\n  }\n\n  view.input.lastKeyCode = null;\n  var change = findDiff(compare.content, parse.doc.content, parse.from, preferredPos, preferredSide);\n\n  if ((ios && view.input.lastIOSEnter > Date.now() - 225 || android) && addedNodes.some(function (n) {\n    return n.nodeName == \"DIV\" || n.nodeName == \"P\";\n  }) && (!change || change.endA >= change.endB) && view.someProp(\"handleKeyDown\", function (f) {\n    return f(view, keyEvent(13, \"Enter\"));\n  })) {\n    view.input.lastIOSEnter = 0;\n    return;\n  }\n\n  if (!change) {\n    if (typeOver && sel instanceof prosemirrorState.TextSelection && !sel.empty && sel.$head.sameParent(sel.$anchor) && !view.composing && !(parse.sel && parse.sel.anchor != parse.sel.head)) {\n      change = {\n        start: sel.from,\n        endA: sel.to,\n        endB: sel.to\n      };\n    } else {\n      if (parse.sel) {\n        var _sel = resolveSelection(view, view.state.doc, parse.sel);\n\n        if (_sel && !_sel.eq(view.state.selection)) view.dispatch(view.state.tr.setSelection(_sel));\n      }\n\n      return;\n    }\n  }\n\n  view.input.domChangeCount++;\n\n  if (view.state.selection.from < view.state.selection.to && change.start == change.endB && view.state.selection instanceof prosemirrorState.TextSelection) {\n    if (change.start > view.state.selection.from && change.start <= view.state.selection.from + 2 && view.state.selection.from >= parse.from) {\n      change.start = view.state.selection.from;\n    } else if (change.endA < view.state.selection.to && change.endA >= view.state.selection.to - 2 && view.state.selection.to <= parse.to) {\n      change.endB += view.state.selection.to - change.endA;\n      change.endA = view.state.selection.to;\n    }\n  }\n\n  if (ie && ie_version <= 11 && change.endB == change.start + 1 && change.endA == change.start && change.start > parse.from && parse.doc.textBetween(change.start - parse.from - 1, change.start - parse.from + 1) == \" \\xA0\") {\n    change.start--;\n    change.endA--;\n    change.endB--;\n  }\n\n  var $from = parse.doc.resolveNoCache(change.start - parse.from);\n  var $to = parse.doc.resolveNoCache(change.endB - parse.from);\n  var $fromA = doc.resolve(change.start);\n  var inlineChange = $from.sameParent($to) && $from.parent.inlineContent && $fromA.end() >= change.endA;\n  var nextSel;\n\n  if ((ios && view.input.lastIOSEnter > Date.now() - 225 && (!inlineChange || addedNodes.some(function (n) {\n    return n.nodeName == \"DIV\" || n.nodeName == \"P\";\n  })) || !inlineChange && $from.pos < parse.doc.content.size && (nextSel = prosemirrorState.Selection.findFrom(parse.doc.resolve($from.pos + 1), 1, true)) && nextSel.head == $to.pos) && view.someProp(\"handleKeyDown\", function (f) {\n    return f(view, keyEvent(13, \"Enter\"));\n  })) {\n    view.input.lastIOSEnter = 0;\n    return;\n  }\n\n  if (view.state.selection.anchor > change.start && looksLikeJoin(doc, change.start, change.endA, $from, $to) && view.someProp(\"handleKeyDown\", function (f) {\n    return f(view, keyEvent(8, \"Backspace\"));\n  })) {\n    if (android && chrome) view.domObserver.suppressSelectionUpdates();\n    return;\n  }\n\n  if (chrome && android && change.endB == change.start) view.input.lastAndroidDelete = Date.now();\n\n  if (android && !inlineChange && $from.start() != $to.start() && $to.parentOffset == 0 && $from.depth == $to.depth && parse.sel && parse.sel.anchor == parse.sel.head && parse.sel.head == change.endA) {\n    change.endB -= 2;\n    $to = parse.doc.resolveNoCache(change.endB - parse.from);\n    setTimeout(function () {\n      view.someProp(\"handleKeyDown\", function (f) {\n        return f(view, keyEvent(13, \"Enter\"));\n      });\n    }, 20);\n  }\n\n  var chFrom = change.start,\n      chTo = change.endA;\n  var tr, storedMarks, markChange;\n\n  if (inlineChange) {\n    if ($from.pos == $to.pos) {\n      if (ie && ie_version <= 11 && $from.parentOffset == 0) {\n        view.domObserver.suppressSelectionUpdates();\n        setTimeout(function () {\n          return selectionToDOM(view);\n        }, 20);\n      }\n\n      tr = view.state.tr[\"delete\"](chFrom, chTo);\n      storedMarks = doc.resolve(change.start).marksAcross(doc.resolve(change.endA));\n    } else if (change.endA == change.endB && (markChange = isMarkChange($from.parent.content.cut($from.parentOffset, $to.parentOffset), $fromA.parent.content.cut($fromA.parentOffset, change.endA - $fromA.start())))) {\n      tr = view.state.tr;\n      if (markChange.type == \"add\") tr.addMark(chFrom, chTo, markChange.mark);else tr.removeMark(chFrom, chTo, markChange.mark);\n    } else if ($from.parent.child($from.index()).isText && $from.index() == $to.index() - ($to.textOffset ? 0 : 1)) {\n      var _text = $from.parent.textBetween($from.parentOffset, $to.parentOffset);\n\n      if (view.someProp(\"handleTextInput\", function (f) {\n        return f(view, chFrom, chTo, _text);\n      })) return;\n      tr = view.state.tr.insertText(_text, chFrom, chTo);\n    }\n  }\n\n  if (!tr) tr = view.state.tr.replace(chFrom, chTo, parse.doc.slice(change.start - parse.from, change.endB - parse.from));\n\n  if (parse.sel) {\n    var _sel2 = resolveSelection(view, tr.doc, parse.sel);\n\n    if (_sel2 && !(chrome && android && view.composing && _sel2.empty && (change.start != change.endB || view.input.lastAndroidDelete < Date.now() - 100) && (_sel2.head == chFrom || _sel2.head == tr.mapping.map(chTo) - 1) || ie && _sel2.empty && _sel2.head == chFrom)) tr.setSelection(_sel2);\n  }\n\n  if (storedMarks) tr.ensureMarks(storedMarks);\n  view.dispatch(tr.scrollIntoView());\n}\n\nfunction resolveSelection(view, doc, parsedSel) {\n  if (Math.max(parsedSel.anchor, parsedSel.head) > doc.content.size) return null;\n  return selectionBetween(view, doc.resolve(parsedSel.anchor), doc.resolve(parsedSel.head));\n}\n\nfunction isMarkChange(cur, prev) {\n  var curMarks = cur.firstChild.marks,\n      prevMarks = prev.firstChild.marks;\n  var added = curMarks,\n      removed = prevMarks,\n      type,\n      mark,\n      update;\n\n  for (var i = 0; i < prevMarks.length; i++) {\n    added = prevMarks[i].removeFromSet(added);\n  }\n\n  for (var _i14 = 0; _i14 < curMarks.length; _i14++) {\n    removed = curMarks[_i14].removeFromSet(removed);\n  }\n\n  if (added.length == 1 && removed.length == 0) {\n    mark = added[0];\n    type = \"add\";\n\n    update = function update(node) {\n      return node.mark(mark.addToSet(node.marks));\n    };\n  } else if (added.length == 0 && removed.length == 1) {\n    mark = removed[0];\n    type = \"remove\";\n\n    update = function update(node) {\n      return node.mark(mark.removeFromSet(node.marks));\n    };\n  } else {\n    return null;\n  }\n\n  var updated = [];\n\n  for (var _i15 = 0; _i15 < prev.childCount; _i15++) {\n    updated.push(update(prev.child(_i15)));\n  }\n\n  if (prosemirrorModel.Fragment.from(updated).eq(cur)) return {\n    mark: mark,\n    type: type\n  };\n}\n\nfunction looksLikeJoin(old, start, end, $newStart, $newEnd) {\n  if (!$newStart.parent.isTextblock || end - start <= $newEnd.pos - $newStart.pos || skipClosingAndOpening($newStart, true, false) < $newEnd.pos) return false;\n  var $start = old.resolve(start);\n  if ($start.parentOffset < $start.parent.content.size || !$start.parent.isTextblock) return false;\n  var $next = old.resolve(skipClosingAndOpening($start, true, true));\n  if (!$next.parent.isTextblock || $next.pos > end || skipClosingAndOpening($next, true, false) < end) return false;\n  return $newStart.parent.content.cut($newStart.parentOffset).eq($next.parent.content);\n}\n\nfunction skipClosingAndOpening($pos, fromEnd, mayOpen) {\n  var depth = $pos.depth,\n      end = fromEnd ? $pos.end() : $pos.pos;\n\n  while (depth > 0 && (fromEnd || $pos.indexAfter(depth) == $pos.node(depth).childCount)) {\n    depth--;\n    end++;\n    fromEnd = false;\n  }\n\n  if (mayOpen) {\n    var next = $pos.node(depth).maybeChild($pos.indexAfter(depth));\n\n    while (next && !next.isLeaf) {\n      next = next.firstChild;\n      end++;\n    }\n  }\n\n  return end;\n}\n\nfunction findDiff(a, b, pos, preferredPos, preferredSide) {\n  var start = a.findDiffStart(b, pos);\n  if (start == null) return null;\n\n  var _a$findDiffEnd = a.findDiffEnd(b, pos + a.size, pos + b.size),\n      endA = _a$findDiffEnd.a,\n      endB = _a$findDiffEnd.b;\n\n  if (preferredSide == \"end\") {\n    var adjust = Math.max(0, start - Math.min(endA, endB));\n    preferredPos -= endA + adjust - start;\n  }\n\n  if (endA < start && a.size < b.size) {\n    var move = preferredPos <= start && preferredPos >= endA ? start - preferredPos : 0;\n    start -= move;\n    endB = start + (endB - endA);\n    endA = start;\n  } else if (endB < start) {\n    var _move = preferredPos <= start && preferredPos >= endB ? start - preferredPos : 0;\n\n    start -= _move;\n    endA = start + (endA - endB);\n    endB = start;\n  }\n\n  return {\n    start: start,\n    endA: endA,\n    endB: endB\n  };\n}\n\nvar __serializeForClipboard = serializeForClipboard;\nvar __parseFromClipboard = parseFromClipboard;\nvar __endComposition = endComposition;\n\nvar EditorView = function () {\n  function EditorView(place, props) {\n    var _this15 = this;\n\n    _classCallCheck(this, EditorView);\n\n    this._root = null;\n    this.focused = false;\n    this.trackWrites = null;\n    this.mounted = false;\n    this.markCursor = null;\n    this.cursorWrapper = null;\n    this.lastSelectedViewDesc = undefined;\n    this.input = new InputState();\n    this.prevDirectPlugins = [];\n    this.pluginViews = [];\n    this.dragging = null;\n    this._props = props;\n    this.state = props.state;\n    this.directPlugins = props.plugins || [];\n    this.directPlugins.forEach(checkStateComponent);\n    this.dispatch = this.dispatch.bind(this);\n    this.dom = place && place.mount || document.createElement(\"div\");\n\n    if (place) {\n      if (place.appendChild) place.appendChild(this.dom);else if (typeof place == \"function\") place(this.dom);else if (place.mount) this.mounted = true;\n    }\n\n    this.editable = getEditable(this);\n    updateCursorWrapper(this);\n    this.nodeViews = buildNodeViews(this);\n    this.docView = docViewDesc(this.state.doc, computeDocDeco(this), viewDecorations(this), this.dom, this);\n    this.domObserver = new DOMObserver(this, function (from, to, typeOver, added) {\n      return readDOMChange(_this15, from, to, typeOver, added);\n    });\n    this.domObserver.start();\n    initInput(this);\n    this.updatePluginViews();\n  }\n\n  _createClass(EditorView, [{\n    key: \"composing\",\n    get: function get() {\n      return this.input.composing;\n    }\n  }, {\n    key: \"props\",\n    get: function get() {\n      if (this._props.state != this.state) {\n        var prev = this._props;\n        this._props = {};\n\n        for (var name in prev) {\n          this._props[name] = prev[name];\n        }\n\n        this._props.state = this.state;\n      }\n\n      return this._props;\n    }\n  }, {\n    key: \"update\",\n    value: function update(props) {\n      if (props.handleDOMEvents != this._props.handleDOMEvents) ensureListeners(this);\n      this._props = props;\n\n      if (props.plugins) {\n        props.plugins.forEach(checkStateComponent);\n        this.directPlugins = props.plugins;\n      }\n\n      this.updateStateInner(props.state, true);\n    }\n  }, {\n    key: \"setProps\",\n    value: function setProps(props) {\n      var updated = {};\n\n      for (var name in this._props) {\n        updated[name] = this._props[name];\n      }\n\n      updated.state = this.state;\n\n      for (var _name2 in props) {\n        updated[_name2] = props[_name2];\n      }\n\n      this.update(updated);\n    }\n  }, {\n    key: \"updateState\",\n    value: function updateState(state) {\n      this.updateStateInner(state, this.state.plugins != state.plugins);\n    }\n  }, {\n    key: \"updateStateInner\",\n    value: function updateStateInner(state, reconfigured) {\n      var _this16 = this;\n\n      var prev = this.state,\n          redraw = false,\n          updateSel = false;\n\n      if (state.storedMarks && this.composing) {\n        clearComposition(this);\n        updateSel = true;\n      }\n\n      this.state = state;\n\n      if (reconfigured) {\n        var nodeViews = buildNodeViews(this);\n\n        if (changedNodeViews(nodeViews, this.nodeViews)) {\n          this.nodeViews = nodeViews;\n          redraw = true;\n        }\n\n        ensureListeners(this);\n      }\n\n      this.editable = getEditable(this);\n      updateCursorWrapper(this);\n      var innerDeco = viewDecorations(this),\n          outerDeco = computeDocDeco(this);\n      var scroll = reconfigured ? \"reset\" : state.scrollToSelection > prev.scrollToSelection ? \"to selection\" : \"preserve\";\n      var updateDoc = redraw || !this.docView.matchesNode(state.doc, outerDeco, innerDeco);\n      if (updateDoc || !state.selection.eq(prev.selection)) updateSel = true;\n      var oldScrollPos = scroll == \"preserve\" && updateSel && this.dom.style.overflowAnchor == null && storeScrollPos(this);\n\n      if (updateSel) {\n        this.domObserver.stop();\n        var forceSelUpdate = updateDoc && (ie || chrome) && !this.composing && !prev.selection.empty && !state.selection.empty && selectionContextChanged(prev.selection, state.selection);\n\n        if (updateDoc) {\n          var chromeKludge = chrome ? this.trackWrites = this.domSelection().focusNode : null;\n\n          if (redraw || !this.docView.update(state.doc, outerDeco, innerDeco, this)) {\n            this.docView.updateOuterDeco([]);\n            this.docView.destroy();\n            this.docView = docViewDesc(state.doc, outerDeco, innerDeco, this.dom, this);\n          }\n\n          if (chromeKludge && !this.trackWrites) forceSelUpdate = true;\n        }\n\n        if (forceSelUpdate || !(this.input.mouseDown && this.domObserver.currentSelection.eq(this.domSelection()) && anchorInRightPlace(this))) {\n          selectionToDOM(this, forceSelUpdate);\n        } else {\n          syncNodeSelection(this, state.selection);\n          this.domObserver.setCurSelection();\n        }\n\n        this.domObserver.start();\n      }\n\n      this.updatePluginViews(prev);\n\n      if (scroll == \"reset\") {\n        this.dom.scrollTop = 0;\n      } else if (scroll == \"to selection\") {\n        var startDOM = this.domSelection().focusNode;\n        if (this.someProp(\"handleScrollToSelection\", function (f) {\n          return f(_this16);\n        })) ;else if (state.selection instanceof prosemirrorState.NodeSelection) {\n          var target = this.docView.domAfterPos(state.selection.from);\n          if (target.nodeType == 1) scrollRectIntoView(this, target.getBoundingClientRect(), startDOM);\n        } else {\n          scrollRectIntoView(this, this.coordsAtPos(state.selection.head, 1), startDOM);\n        }\n      } else if (oldScrollPos) {\n        resetScrollPos(oldScrollPos);\n      }\n    }\n  }, {\n    key: \"destroyPluginViews\",\n    value: function destroyPluginViews() {\n      var view;\n\n      while (view = this.pluginViews.pop()) {\n        if (view.destroy) view.destroy();\n      }\n    }\n  }, {\n    key: \"updatePluginViews\",\n    value: function updatePluginViews(prevState) {\n      if (!prevState || prevState.plugins != this.state.plugins || this.directPlugins != this.prevDirectPlugins) {\n        this.prevDirectPlugins = this.directPlugins;\n        this.destroyPluginViews();\n\n        for (var i = 0; i < this.directPlugins.length; i++) {\n          var plugin = this.directPlugins[i];\n          if (plugin.spec.view) this.pluginViews.push(plugin.spec.view(this));\n        }\n\n        for (var _i16 = 0; _i16 < this.state.plugins.length; _i16++) {\n          var _plugin = this.state.plugins[_i16];\n          if (_plugin.spec.view) this.pluginViews.push(_plugin.spec.view(this));\n        }\n      } else {\n        for (var _i17 = 0; _i17 < this.pluginViews.length; _i17++) {\n          var pluginView = this.pluginViews[_i17];\n          if (pluginView.update) pluginView.update(this, prevState);\n        }\n      }\n    }\n  }, {\n    key: \"someProp\",\n    value: function someProp(propName, f) {\n      var prop = this._props && this._props[propName],\n          value;\n      if (prop != null && (value = f ? f(prop) : prop)) return value;\n\n      for (var i = 0; i < this.directPlugins.length; i++) {\n        var _prop = this.directPlugins[i].props[propName];\n        if (_prop != null && (value = f ? f(_prop) : _prop)) return value;\n      }\n\n      var plugins = this.state.plugins;\n      if (plugins) for (var _i18 = 0; _i18 < plugins.length; _i18++) {\n        var _prop2 = plugins[_i18].props[propName];\n        if (_prop2 != null && (value = f ? f(_prop2) : _prop2)) return value;\n      }\n    }\n  }, {\n    key: \"hasFocus\",\n    value: function hasFocus() {\n      return this.root.activeElement == this.dom;\n    }\n  }, {\n    key: \"focus\",\n    value: function focus() {\n      this.domObserver.stop();\n      if (this.editable) focusPreventScroll(this.dom);\n      selectionToDOM(this);\n      this.domObserver.start();\n    }\n  }, {\n    key: \"root\",\n    get: function get() {\n      var _this17 = this;\n\n      var cached = this._root;\n\n      if (cached == null) {\n        var _loop4 = function _loop4(search) {\n          if (search.nodeType == 9 || search.nodeType == 11 && search.host) {\n            if (!search.getSelection) Object.getPrototypeOf(search).getSelection = function () {\n              return search.ownerDocument.getSelection();\n            };\n            return {\n              v: _this17._root = search\n            };\n          }\n        };\n\n        for (var search = this.dom.parentNode; search; search = search.parentNode) {\n          var _ret3 = _loop4(search);\n\n          if (_typeof(_ret3) === \"object\") return _ret3.v;\n        }\n      }\n\n      return cached || document;\n    }\n  }, {\n    key: \"posAtCoords\",\n    value: function posAtCoords(coords) {\n      return _posAtCoords(this, coords);\n    }\n  }, {\n    key: \"coordsAtPos\",\n    value: function coordsAtPos(pos) {\n      var side = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n      return _coordsAtPos(this, pos, side);\n    }\n  }, {\n    key: \"domAtPos\",\n    value: function domAtPos(pos) {\n      var side = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      return this.docView.domFromPos(pos, side);\n    }\n  }, {\n    key: \"nodeDOM\",\n    value: function nodeDOM(pos) {\n      var desc = this.docView.descAt(pos);\n      return desc ? desc.nodeDOM : null;\n    }\n  }, {\n    key: \"posAtDOM\",\n    value: function posAtDOM(node, offset) {\n      var bias = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : -1;\n      var pos = this.docView.posFromDOM(node, offset, bias);\n      if (pos == null) throw new RangeError(\"DOM position not inside the editor\");\n      return pos;\n    }\n  }, {\n    key: \"endOfTextblock\",\n    value: function endOfTextblock(dir, state) {\n      return _endOfTextblock(this, state || this.state, dir);\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      if (!this.docView) return;\n      destroyInput(this);\n      this.destroyPluginViews();\n\n      if (this.mounted) {\n        this.docView.update(this.state.doc, [], viewDecorations(this), this);\n        this.dom.textContent = \"\";\n      } else if (this.dom.parentNode) {\n        this.dom.parentNode.removeChild(this.dom);\n      }\n\n      this.docView.destroy();\n      this.docView = null;\n    }\n  }, {\n    key: \"isDestroyed\",\n    get: function get() {\n      return this.docView == null;\n    }\n  }, {\n    key: \"dispatchEvent\",\n    value: function dispatchEvent(event) {\n      return _dispatchEvent(this, event);\n    }\n  }, {\n    key: \"dispatch\",\n    value: function dispatch(tr) {\n      var dispatchTransaction = this._props.dispatchTransaction;\n      if (dispatchTransaction) dispatchTransaction.call(this, tr);else this.updateState(this.state.apply(tr));\n    }\n  }, {\n    key: \"domSelection\",\n    value: function domSelection() {\n      return this.root.getSelection();\n    }\n  }]);\n\n  return EditorView;\n}();\n\nfunction computeDocDeco(view) {\n  var attrs = Object.create(null);\n  attrs[\"class\"] = \"ProseMirror\";\n  attrs.contenteditable = String(view.editable);\n  attrs.translate = \"no\";\n  view.someProp(\"attributes\", function (value) {\n    if (typeof value == \"function\") value = value(view.state);\n    if (value) for (var attr in value) {\n      if (attr == \"class\") attrs[\"class\"] += \" \" + value[attr];\n\n      if (attr == \"style\") {\n        attrs.style = (attrs.style ? attrs.style + \";\" : \"\") + value[attr];\n      } else if (!attrs[attr] && attr != \"contenteditable\" && attr != \"nodeName\") attrs[attr] = String(value[attr]);\n    }\n  });\n  return [Decoration.node(0, view.state.doc.content.size, attrs)];\n}\n\nfunction updateCursorWrapper(view) {\n  if (view.markCursor) {\n    var dom = document.createElement(\"img\");\n    dom.className = \"ProseMirror-separator\";\n    dom.setAttribute(\"mark-placeholder\", \"true\");\n    dom.setAttribute(\"alt\", \"\");\n    view.cursorWrapper = {\n      dom: dom,\n      deco: Decoration.widget(view.state.selection.head, dom, {\n        raw: true,\n        marks: view.markCursor\n      })\n    };\n  } else {\n    view.cursorWrapper = null;\n  }\n}\n\nfunction getEditable(view) {\n  return !view.someProp(\"editable\", function (value) {\n    return value(view.state) === false;\n  });\n}\n\nfunction selectionContextChanged(sel1, sel2) {\n  var depth = Math.min(sel1.$anchor.sharedDepth(sel1.head), sel2.$anchor.sharedDepth(sel2.head));\n  return sel1.$anchor.start(depth) != sel2.$anchor.start(depth);\n}\n\nfunction buildNodeViews(view) {\n  var result = Object.create(null);\n\n  function add(obj) {\n    for (var _prop3 in obj) {\n      if (!Object.prototype.hasOwnProperty.call(result, _prop3)) result[_prop3] = obj[_prop3];\n    }\n  }\n\n  view.someProp(\"nodeViews\", add);\n  view.someProp(\"markViews\", add);\n  return result;\n}\n\nfunction changedNodeViews(a, b) {\n  var nA = 0,\n      nB = 0;\n\n  for (var _prop4 in a) {\n    if (a[_prop4] != b[_prop4]) return true;\n    nA++;\n  }\n\n  for (var _ in b) {\n    nB++;\n  }\n\n  return nA != nB;\n}\n\nfunction checkStateComponent(plugin) {\n  if (plugin.spec.state || plugin.spec.filterTransaction || plugin.spec.appendTransaction) throw new RangeError(\"Plugins passed directly to the view must not have a state component\");\n}\n\nexports.Decoration = Decoration;\nexports.DecorationSet = DecorationSet;\nexports.EditorView = EditorView;\nexports.__endComposition = __endComposition;\nexports.__parseFromClipboard = __parseFromClipboard;\nexports.__serializeForClipboard = __serializeForClipboard;\n"],"mappings":"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","names":[],"sourceRoot":"","file":"static/media/f7096b92201667ed2eff.cjs"}