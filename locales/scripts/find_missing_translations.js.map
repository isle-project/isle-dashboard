{"version":3,"sources":["../locales/scripts/find_missing_translations.js"],"sourcesContent":["/**\n* Copyright (C) 2016-present The ISLE Authors\n*\n* The isle-server program is free software: you can redistribute it and/or modify\n* it under the terms of the GNU Affero General Public License as\n* published by the Free Software Foundation, either version 3 of the\n* License, or (at your option) any later version.\n*\n* This program is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n* GNU Affero General Public License for more details.\n*\n* You should have received a copy of the GNU Affero General Public License\n* along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\n'use strict';\n\n// MODULES //\n\nconst { basename, resolve } = require( 'path' );\nconst { execSync } = require( 'child_process' );\nconst glob = require( 'glob' );\nconst readJSON = require( '@stdlib/fs/read-json' );\nconst objectKeys = require( '@stdlib/utils/keys' );\n\n\n// VARIABLES //\n\nconst TOPLEVEL_DIR = resolve( __dirname, '..', '..', '..' );\n\n\n// MAIN //\n\nglob( 'public/locales/en/*.json', {\n\tcwd: TOPLEVEL_DIR\n}, function onFiles( err, files ) {\n\tconst translations = new Set();\n\tfor ( let i = 0; i < files.length; i++ ) {\n\t\tconst file = resolve( TOPLEVEL_DIR, files[ i ] );\n\t\tconst table = readJSON.sync( file );\n\t\tconst keys = objectKeys( table );\n\t\tkeys.forEach( key => {\n\t\t\ttranslations.add( key );\n\t\t\ttranslations.add( basename( files[ i ], '.json' )+':'+key );\n\t\t});\n\t}\n\tconst command = 'grep -hroP \"(props.| |\\t|{)t\\\\( ?\\'\\\\K[^\\']*(?=\\' ?\\\\))\" src/* ';\n\tconst identifiers = execSync( command, {\n\t\tcwd: TOPLEVEL_DIR\n\t})\n\t\t.toString()\n\t\t.split( '\\n' );\n\tconst unique = new Set( identifiers );\n\n\tunique.forEach( value => {\n\t\tif ( value && !translations.has( value ) ) {\n\t\t\tconsole.log( 'Missing translation: '+value ); // eslint-disable-line no-console\n\t\t}\n\t});\n});\n\n"],"mappings":"aAqBA,KAAM,CAAE,SAAU,SAAY,QAAS,QACjC,CAAE,UAAa,QAAS,iBACxB,KAAO,QAAS,QAChB,SAAW,QAAS,wBACpB,WAAa,QAAS,sBAKtB,aAAe,QAAS,UAAW,KAAM,KAAM,MAKrD,KAAM,2BAA4B,CACjC,IAAK,cACH,SAAkB,IAAK,MAAQ,CACjC,KAAM,cAAe,GAAI,KACzB,OAAU,GAAI,EAAG,EAAI,MAAM,OAAQ,IAAM,CACxC,KAAM,MAAO,QAAS,aAAc,MAAO,IACrC,MAAQ,SAAS,KAAM,MAE7B,AADa,WAAY,OACpB,QAAS,KAAO,CACpB,aAAa,IAAK,KAClB,aAAa,IAAK,SAAU,MAAO,GAAK,SAAU,IAAI,OAIxD,KAAM,aAAc,SADJ,8DACuB,CACtC,IAAK,eAEJ,WACA,MAAO;AAAA,GAGT,AAFe,GAAI,KAAK,aAEjB,QAAS,OAAS,CACxB,AAAK,OAAS,CAAC,aAAa,IAAK,QAChC,QAAQ,IAAK,wBAAwB","names":[],"sourceRoot":"","file":"locales/scripts/find_missing_translations.js"}